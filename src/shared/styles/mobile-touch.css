/* Mobile Touch Optimization - Comprehensive */

/* Reset aggressive touch prevention - CRITICAL FOR SCROLLING */
body {
  touch-action: auto !important; /* Allow vertical scrolling */
  overflow-y: auto !important; /* Allow vertical scrolling */
  overflow-x: hidden !important; /* Prevent horizontal overflow only */
  position: static !important; /* Reset any fixed positioning */
}

/* Debug mode - uncomment to visualize touch targets */
/*
@media (max-width: 768px) {
  button, .btn, [role="button"], .clickable {
    outline: 2px dashed rgba(255, 0, 0, 0.5) !important;
  }
  
  input, select, textarea {
    outline: 2px dashed rgba(0, 255, 0, 0.5) !important;
  }
  
  a, .nav-link {
    outline: 2px dashed rgba(0, 0, 255, 0.5) !important;
  }
}
*/

/* Global mobile touch improvements */
@media (max-width: 768px) {
  /* CRITICAL: Ensure all major containers allow vertical scrolling */
  html, body, #root, .layout, .layout-main, .layout-content {
    overflow-y: auto !important;
    touch-action: auto !important;
    -webkit-overflow-scrolling: touch !important;
  }
  
  /* Force minimum height to ensure there's content to scroll */
  .layout-content,
  .content-container,
  main {
    min-height: 150vh !important; /* Force scrollable content for testing */
  }
  
  /* Specifically reset any modal-induced scroll blocking */
  body[style*="overflow: hidden"] {
    overflow-y: auto !important;
  }
  
  body[style*="position: fixed"] {
    position: static !important;
  }
  
  /* Ensure all interactive elements are touch-friendly */
  button,
  .btn,
  [role="button"],
  [tabindex="0"],
  input[type="submit"],
  input[type="button"],
  input[type="reset"],
  .clickable {
    min-height: 48px !important;
    min-width: 48px !important;
    touch-action: manipulation !important;
    -webkit-tap-highlight-color: transparent !important;
    cursor: pointer !important;
  }
  
  /* Form controls */
  input,
  select,
  textarea {
    min-height: 48px !important;
    font-size: 16px !important; /* Prevent zoom on iOS */
    touch-action: manipulation !important;
    -webkit-tap-highlight-color: transparent !important;
  }
  
  /* Links and navigation */
  a,
  .nav-link,
  .nav-item {
    min-height: 44px !important;
    touch-action: manipulation !important;
    -webkit-tap-highlight-color: transparent !important;
    display: flex !important;
    align-items: center !important;
  }
  
  /* Tab navigation */
  .tab-button,
  .tab-nav-item,
  .tab-item {
    min-height: 50px !important;
    min-width: 60px !important;
    touch-action: manipulation !important;
    -webkit-tap-highlight-color: transparent !important;
  }
  
  /* Table interactions */
  .table td,
  .table th {
    touch-action: manipulation !important;
  }
  
  /* Modal elements */
  .modal *[role="button"],
  .modal button,
  .modal .btn {
    min-height: 48px !important;
    touch-action: manipulation !important;
    -webkit-tap-highlight-color: transparent !important;
  }
  
  /* Scroll containers */
  .scroll-container,
  .table-responsive,
  .modal-body,
  .content-container {
    -webkit-overflow-scrolling: touch !important;
    touch-action: auto !important;
  }
  
  /* Allow vertical scrolling on mobile - CRITICAL FIX */
  html {
    overflow-x: hidden; /* Prevent horizontal overflow only */
    overflow-y: auto; /* Allow vertical scrolling */
    -webkit-overflow-scrolling: touch;
  }
  
  body {
    overflow-x: hidden; /* Prevent horizontal overflow only */
    overflow-y: auto; /* Allow vertical scrolling */
    -webkit-overflow-scrolling: touch;
    touch-action: auto; /* Allow all touch gestures including vertical scrolling */
  }
  
  /* Fix for sticky elements on mobile */
  .sticky,
  .fixed,
  .position-fixed {
    transform: translateZ(0); /* Force hardware acceleration */
  }
}

/* Extra small mobile devices */
@media (max-width: 480px) {
  /* Larger touch targets for small screens */
  button,
  .btn,
  [role="button"] {
    min-height: 52px !important;
    padding: 12px 16px !important;
  }
  
  input,
  select,
  textarea {
    min-height: 52px !important;
    padding: 14px 12px !important;
  }
  
  .nav-link,
  .nav-item {
    min-height: 56px !important;
    padding: 16px 12px !important;
  }
}

/* High DPI screens (Retina) */
@media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
  /* Ensure crisp rendering on high DPI mobile screens */
  * {
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }
}

/* iOS specific fixes */
@supports (-webkit-touch-callout: none) {
  /* iOS Safari specific fixes */
  body {
    -webkit-overflow-scrolling: touch;
  }
  
  /* Fix for iOS input zoom */
  input,
  select,
  textarea {
    font-size: 16px !important;
    transform: translateZ(0);
  }
  
  /* Prevent iOS bounce scrolling on the body */
  body {
    overflow-x: hidden;
    -webkit-overflow-scrolling: touch;
  }
}

/* Android specific fixes */
@media (max-width: 768px) and (-webkit-min-device-pixel-ratio: 1) {
  /* Android Chrome specific optimizations */
  * {
    -webkit-tap-highlight-color: transparent;
  }
  
  input {
    -webkit-user-select: text;
    user-select: text;
  }
}
