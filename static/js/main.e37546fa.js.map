{"version":3,"file":"static/js/main.e37546fa.js","mappings":"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","sources":["../node_modules/react-dom/cjs/react-dom-client.production.js","../node_modules/react/index.js","../node_modules/prop-types/index.js","../node_modules/prop-types/lib/ReactPropTypesSecret.js","../node_modules/react/cjs/react.production.js","../node_modules/react-dom/client.js","../node_modules/prop-types/factoryWithThrowingShims.js","../node_modules/trim-canvas/build/index.js","../node_modules/react/jsx-runtime.js","../node_modules/react-dom/cjs/react-dom.production.js","../node_modules/react/cjs/react-jsx-runtime.production.js","../node_modules/scheduler/index.js","../node_modules/scheduler/cjs/scheduler.production.js","../node_modules/react-dom/index.js","../webpack/bootstrap","../webpack/runtime/define property getters","../webpack/runtime/global","../webpack/runtime/hasOwnProperty shorthand","../webpack/runtime/make namespace object","shared/layout/Layout.tsx","shared/layout/Navigation.tsx","../node_modules/axios/lib/helpers/bind.js","../node_modules/axios/lib/utils.js","../node_modules/axios/lib/core/AxiosError.js","../node_modules/axios/lib/helpers/toFormData.js","../node_modules/axios/lib/helpers/AxiosURLSearchParams.js","../node_modules/axios/lib/helpers/buildURL.js","../node_modules/axios/lib/core/InterceptorManager.js","../node_modules/axios/lib/defaults/transitional.js","../node_modules/axios/lib/platform/browser/index.js","../node_modules/axios/lib/platform/browser/classes/URLSearchParams.js","../node_modules/axios/lib/platform/browser/classes/FormData.js","../node_modules/axios/lib/platform/browser/classes/Blob.js","../node_modules/axios/lib/platform/common/utils.js","../node_modules/axios/lib/platform/index.js","../node_modules/axios/lib/helpers/formDataToJSON.js","../node_modules/axios/lib/defaults/index.js","../node_modules/axios/lib/helpers/toURLEncodedForm.js","../node_modules/axios/lib/helpers/parseHeaders.js","../node_modules/axios/lib/core/AxiosHeaders.js","../node_modules/axios/lib/core/transformData.js","../node_modules/axios/lib/cancel/isCancel.js","../node_modules/axios/lib/cancel/CanceledError.js","../node_modules/axios/lib/core/settle.js","../node_modules/axios/lib/helpers/speedometer.js","../node_modules/axios/lib/helpers/throttle.js","../node_modules/axios/lib/helpers/progressEventReducer.js","../node_modules/axios/lib/helpers/isURLSameOrigin.js","../node_modules/axios/lib/helpers/cookies.js","../node_modules/axios/lib/core/buildFullPath.js","../node_modules/axios/lib/helpers/isAbsoluteURL.js","../node_modules/axios/lib/helpers/combineURLs.js","../node_modules/axios/lib/core/mergeConfig.js","../node_modules/axios/lib/helpers/resolveConfig.js","../node_modules/axios/lib/adapters/xhr.js","../node_modules/axios/lib/helpers/parseProtocol.js","../node_modules/axios/lib/helpers/composeSignals.js","../node_modules/axios/lib/helpers/trackStream.js","../node_modules/axios/lib/adapters/fetch.js","../node_modules/axios/lib/adapters/adapters.js","../node_modules/axios/lib/helpers/null.js","../node_modules/axios/lib/core/dispatchRequest.js","../node_modules/axios/lib/env/data.js","../node_modules/axios/lib/helpers/validator.js","../node_modules/axios/lib/core/Axios.js","../node_modules/axios/lib/cancel/CancelToken.js","../node_modules/axios/lib/helpers/HttpStatusCode.js","../node_modules/axios/lib/axios.js","../node_modules/axios/lib/helpers/spread.js","../node_modules/axios/lib/helpers/isAxiosError.js","../node_modules/@firebase/util/src/crypt.ts","../node_modules/@firebase/util/src/defaults.ts","../node_modules/@firebase/util/src/global.ts","../node_modules/@firebase/util/src/deferred.ts","../node_modules/@firebase/util/src/url.ts","../node_modules/@firebase/util/src/emulator.ts","../node_modules/@firebase/util/src/environment.ts","../node_modules/@firebase/util/src/errors.ts","../node_modules/@firebase/util/src/obj.ts","../node_modules/@firebase/util/src/query.ts","../node_modules/@firebase/util/src/subscribe.ts","../node_modules/@firebase/util/src/exponential_backoff.ts","../node_modules/@firebase/util/src/compat.ts","../node_modules/@firebase/component/src/component.ts","../node_modules/@firebase/component/src/constants.ts","../node_modules/@firebase/component/src/provider.ts","../node_modules/@firebase/component/src/component_container.ts","../node_modules/@firebase/logger/src/logger.ts","../node_modules/idb/build/wrap-idb-value.js","../node_modules/idb/build/index.js","../node_modules/@firebase/app/src/platformLoggerService.ts","../node_modules/@firebase/app/src/logger.ts","../node_modules/@firebase/app/src/constants.ts","../node_modules/@firebase/app/src/internal.ts","../node_modules/@firebase/app/src/errors.ts","../node_modules/@firebase/app/src/firebaseApp.ts","../node_modules/@firebase/app/src/api.ts","../node_modules/@firebase/app/src/indexeddb.ts","../node_modules/@firebase/app/src/heartbeatService.ts","../node_modules/@firebase/app/src/registerCoreComponents.ts","../node_modules/@firebase/app/src/index.ts","../node_modules/@firebase/auth/src/core/errors.ts","../node_modules/@firebase/auth/src/core/util/log.ts","../node_modules/@firebase/auth/src/core/util/assert.ts","../node_modules/@firebase/auth/src/core/util/location.ts","../node_modules/@firebase/auth/src/core/util/delay.ts","../node_modules/@firebase/auth/src/core/util/navigator.ts","../node_modules/@firebase/auth/src/core/util/emulator.ts","../node_modules/@firebase/auth/src/core/util/fetch_provider.ts","../node_modules/@firebase/auth/src/api/errors.ts","../node_modules/@firebase/auth/src/api/index.ts","../node_modules/@firebase/auth/src/platform_browser/recaptcha/recaptcha.ts","../node_modules/@firebase/auth/src/api/authentication/recaptcha.ts","../node_modules/@firebase/auth/src/api/account_management/account.ts","../node_modules/@firebase/auth/src/core/util/time.ts","../node_modules/@firebase/auth/src/core/user/id_token_result.ts","../node_modules/@firebase/auth/src/core/user/invalidation.ts","../node_modules/@firebase/auth/src/core/user/proactive_refresh.ts","../node_modules/@firebase/auth/src/core/user/user_metadata.ts","../node_modules/@firebase/auth/src/core/user/reload.ts","../node_modules/@firebase/auth/src/core/user/token_manager.ts","../node_modules/@firebase/auth/src/api/authentication/token.ts","../node_modules/@firebase/auth/src/core/user/user_impl.ts","../node_modules/@firebase/auth/src/core/util/instantiator.ts","../node_modules/@firebase/auth/src/core/persistence/in_memory.ts","../node_modules/@firebase/auth/src/core/persistence/persistence_user_manager.ts","../node_modules/@firebase/auth/src/core/util/browser.ts","../node_modules/@firebase/auth/src/core/util/version.ts","../node_modules/@firebase/auth/src/core/auth/middleware.ts","../node_modules/@firebase/auth/src/core/auth/password_policy_impl.ts","../node_modules/@firebase/auth/src/core/auth/auth_impl.ts","../node_modules/@firebase/auth/src/api/password_policy/get_password_policy.ts","../node_modules/@firebase/auth/src/platform_browser/load_js.ts","../node_modules/@firebase/auth/src/platform_browser/recaptcha/recaptcha_mock.ts","../node_modules/@firebase/auth/src/platform_browser/recaptcha/recaptcha_enterprise_verifier.ts","../node_modules/@firebase/auth/src/core/auth/emulator.ts","../node_modules/@firebase/auth/src/core/credentials/auth_credential.ts","../node_modules/@firebase/auth/src/api/account_management/email_and_password.ts","../node_modules/@firebase/auth/src/api/authentication/email_and_password.ts","../node_modules/@firebase/auth/src/core/credentials/email.ts","../node_modules/@firebase/auth/src/api/authentication/email_link.ts","../node_modules/@firebase/auth/src/api/authentication/idp.ts","../node_modules/@firebase/auth/src/core/credentials/oauth.ts","../node_modules/@firebase/auth/src/api/authentication/sms.ts","../node_modules/@firebase/auth/src/core/credentials/phone.ts","../node_modules/@firebase/auth/src/core/action_code_url.ts","../node_modules/@firebase/auth/src/core/providers/email.ts","../node_modules/@firebase/auth/src/core/providers/federated.ts","../node_modules/@firebase/auth/src/core/providers/oauth.ts","../node_modules/@firebase/auth/src/core/providers/facebook.ts","../node_modules/@firebase/auth/src/core/providers/google.ts","../node_modules/@firebase/auth/src/core/providers/github.ts","../node_modules/@firebase/auth/src/core/providers/twitter.ts","../node_modules/@firebase/auth/src/core/user/user_credential_impl.ts","../node_modules/@firebase/auth/src/mfa/mfa_error.ts","../node_modules/@firebase/auth/src/core/user/link_unlink.ts","../node_modules/@firebase/auth/src/core/user/reauthenticate.ts","../node_modules/@firebase/auth/src/core/strategies/credential.ts","../node_modules/@firebase/auth/src/api/account_management/mfa.ts","../node_modules/@firebase/auth/src/mfa/mfa_user.ts","../node_modules/@firebase/auth/src/core/persistence/index.ts","../node_modules/@firebase/auth/src/platform_browser/persistence/browser.ts","../node_modules/@firebase/auth/src/platform_browser/persistence/local_storage.ts","../node_modules/@firebase/auth/src/platform_browser/persistence/cookie_storage.ts","../node_modules/@firebase/auth/src/platform_browser/persistence/session_storage.ts","../node_modules/@firebase/auth/src/platform_browser/messagechannel/receiver.ts","../node_modules/@firebase/auth/src/platform_browser/messagechannel/promise.ts","../node_modules/@firebase/auth/src/core/util/event_id.ts","../node_modules/@firebase/auth/src/platform_browser/messagechannel/sender.ts","../node_modules/@firebase/auth/src/platform_browser/auth_window.ts","../node_modules/@firebase/auth/src/platform_browser/util/worker.ts","../node_modules/@firebase/auth/src/platform_browser/persistence/indexed_db.ts","../node_modules/@firebase/auth/src/api/authentication/mfa.ts","../node_modules/@firebase/auth/src/platform_browser/recaptcha/recaptcha_loader.ts","../node_modules/@firebase/auth/src/platform_browser/recaptcha/recaptcha_verifier.ts","../node_modules/@firebase/auth/src/platform_browser/strategies/phone.ts","../node_modules/@firebase/auth/src/platform_browser/providers/phone.ts","../node_modules/@firebase/auth/src/core/util/resolver.ts","../node_modules/@firebase/auth/src/core/strategies/idp.ts","../node_modules/@firebase/auth/src/core/strategies/abstract_popup_redirect_operation.ts","../node_modules/@firebase/auth/src/platform_browser/strategies/popup.ts","../node_modules/@firebase/auth/src/core/strategies/redirect.ts","../node_modules/@firebase/auth/src/platform_browser/strategies/redirect.ts","../node_modules/@firebase/auth/src/core/auth/auth_event_manager.ts","../node_modules/@firebase/auth/src/core/util/validate_origin.ts","../node_modules/@firebase/auth/src/api/project_config/get_project_config.ts","../node_modules/@firebase/auth/src/platform_browser/iframe/gapi.ts","../node_modules/@firebase/auth/src/platform_browser/iframe/iframe.ts","../node_modules/@firebase/auth/src/platform_browser/util/popup.ts","../node_modules/@firebase/auth/src/core/util/handler.ts","../node_modules/@firebase/auth/src/platform_browser/popup_redirect.ts","../node_modules/@firebase/auth/src/core/auth/firebase_internal.ts","../node_modules/@firebase/auth/src/platform_browser/index.ts","../node_modules/@firebase/auth/src/core/auth/initialize.ts","../node_modules/@firebase/auth/src/core/index.ts","../node_modules/@firebase/auth/src/core/auth/register.ts","config/app.config.ts","services/api.service.ts","services/user.service.ts","services/item.service.ts","services/receipt.service.ts","services/report.service.ts","services/management.service.ts","utils/date.utils.ts","utils/dateUtils.ts","utils/receiptUtils.ts","utils/validation.utils.ts","utils/pagination.utils.ts","utils/errorHandler.ts","hooks/useUsers.ts","hooks/useItems.ts","hooks/useReports.ts","hooks/useReceipts.ts","../node_modules/firebase/app/index.ts","../node_modules/@firebase/installations/src/util/constants.ts","../node_modules/@firebase/installations/src/util/errors.ts","../node_modules/@firebase/installations/src/functions/common.ts","../node_modules/@firebase/installations/src/util/sleep.ts","../node_modules/@firebase/installations/src/helpers/generate-fid.ts","../node_modules/@firebase/installations/src/helpers/buffer-to-base64-url-safe.ts","../node_modules/@firebase/installations/src/util/get-key.ts","../node_modules/@firebase/installations/src/helpers/fid-changed.ts","../node_modules/@firebase/installations/src/helpers/idb-manager.ts","../node_modules/@firebase/installations/src/helpers/get-installation-entry.ts","../node_modules/@firebase/installations/src/functions/create-installation-request.ts","../node_modules/@firebase/installations/src/functions/generate-auth-token-request.ts","../node_modules/@firebase/installations/src/helpers/refresh-auth-token.ts","../node_modules/@firebase/installations/src/api/get-token.ts","../node_modules/@firebase/installations/src/helpers/extract-app-config.ts","../node_modules/@firebase/installations/src/functions/config.ts","../node_modules/@firebase/installations/src/api/get-id.ts","../node_modules/@firebase/installations/src/index.ts","../node_modules/@firebase/analytics/src/constants.ts","../node_modules/@firebase/analytics/src/logger.ts","../node_modules/@firebase/analytics/src/errors.ts","../node_modules/@firebase/analytics/src/helpers.ts","../node_modules/@firebase/analytics/src/get-config.ts","../node_modules/@firebase/analytics/src/functions.ts","../node_modules/@firebase/analytics/src/initialize-analytics.ts","../node_modules/@firebase/analytics/src/factory.ts","../node_modules/@firebase/analytics/src/index.ts","../node_modules/@firebase/analytics/src/api.ts","firebase.ts","hooks/useAuth.ts","hooks/useUserProfile.ts","contexts/ThemeContext.tsx","hooks/useModernTableSelection.ts","contexts/ManagementContext.tsx","contexts/PendingReceiptsContext.tsx","shared/components/ServerError.tsx","shared/components/Modal.tsx","shared/components/ConflictErrorModal.tsx","shared/components/BulkDeleteErrorModal.tsx","shared/components/ErrorNotificationModal.tsx","shared/components/NotificationModal.tsx","shared/components/SmartPagination.tsx","shared/components/TabNavigation.tsx","shared/components/LoadingSpinner.tsx","shared/components/ThemeToggle.tsx","shared/components/SelectionToolbar.tsx","shared/components/SearchInput.tsx","shared/components/AdvancedFilter.tsx","shared/components/PendingReceiptsBadge.tsx","shared/components/ErrorBoundary.tsx","shared/components/ResponsiveTable.tsx","shared/layout/TopHeader.tsx","hooks/usePendingReceiptsCount.ts","features/dashboard/DashboardShared.tsx","features/dashboard/Dashboard.tsx","hooks/useUserDashboard.ts","features/reports/DailyReportHistory.tsx","features/reports/DailyReport.tsx","features/receipts/ReceiptForm.tsx","hooks/useAvailableItems.ts","../node_modules/@babel/runtime/helpers/esm/extends.js","../node_modules/@babel/runtime/helpers/esm/typeof.js","../node_modules/@babel/runtime/helpers/esm/toPropertyKey.js","../node_modules/@babel/runtime/helpers/esm/toPrimitive.js","../node_modules/@babel/runtime/helpers/esm/createClass.js","../node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","../node_modules/@babel/runtime/helpers/esm/isNativeReflectConstruct.js","../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","../node_modules/signature_pad/dist/signature_pad.mjs","../node_modules/react-signature-canvas/src/index.tsx","../node_modules/@babel/runtime/helpers/esm/inherits.js","../node_modules/@babel/runtime/helpers/esm/createSuper.js","../node_modules/@babel/runtime/helpers/esm/classCallCheck.js","../node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js","../node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js","features/receipts/SignaturePad.tsx","../node_modules/date-fns/locale/en-US/_lib/formatDistance.js","../node_modules/date-fns/locale/_lib/buildFormatLongFn.js","../node_modules/date-fns/locale/en-US/_lib/formatLong.js","../node_modules/date-fns/locale/en-US/_lib/formatRelative.js","../node_modules/date-fns/locale/_lib/buildLocalizeFn.js","../node_modules/date-fns/locale/_lib/buildMatchFn.js","../node_modules/date-fns/locale/_lib/buildMatchPatternFn.js","../node_modules/date-fns/locale/en-US.js","../node_modules/date-fns/locale/en-US/_lib/localize.js","../node_modules/date-fns/locale/en-US/_lib/match.js","../node_modules/date-fns/_lib/defaultOptions.js","../node_modules/date-fns/constants.js","../node_modules/date-fns/constructFrom.js","../node_modules/date-fns/toDate.js","../node_modules/date-fns/_lib/getTimezoneOffsetInMilliseconds.js","../node_modules/date-fns/startOfDay.js","../node_modules/date-fns/differenceInCalendarDays.js","../node_modules/date-fns/_lib/normalizeDates.js","../node_modules/date-fns/startOfYear.js","../node_modules/date-fns/getDayOfYear.js","../node_modules/date-fns/startOfWeek.js","../node_modules/date-fns/startOfISOWeek.js","../node_modules/date-fns/getISOWeekYear.js","../node_modules/date-fns/startOfISOWeekYear.js","../node_modules/date-fns/getISOWeek.js","../node_modules/date-fns/getWeekYear.js","../node_modules/date-fns/startOfWeekYear.js","../node_modules/date-fns/getWeek.js","../node_modules/date-fns/_lib/addLeadingZeros.js","../node_modules/date-fns/_lib/format/lightFormatters.js","../node_modules/date-fns/_lib/format/formatters.js","../node_modules/date-fns/_lib/format/longFormatters.js","../node_modules/date-fns/_lib/protectedTokens.js","../node_modules/date-fns/isDate.js","../node_modules/date-fns/isValid.js","../node_modules/date-fns/format.js","features/receipts/ReceiptDetailsModal.tsx","features/receipts/DeleteReceiptModal.tsx","features/receipts/PendingReceiptsList.tsx","features/receipts/ReceiptsTab.tsx","types/user.types.ts","features/users/UserForm.tsx","features/users/UsersTab.tsx","features/items/ItemForm.tsx","features/items/ItemsTab.tsx","features/management/ManagementTab.tsx","features/management/ManagementTable.tsx","features/management/UnitsTab.tsx","features/management/LocationsTable.tsx","features/management/LocationsTab.tsx","features/management/ItemNamesTab.tsx","features/management/AllocationsTab.tsx","features/management/ManagementSettingsTab.tsx","features/management/BackupRestoreTab.tsx","features/settings/SettingsTab.tsx","components/landing/LandingComponents.tsx","components/landing/LandingPage.tsx","features/auth/GoogleAuth.tsx","components/auth/UserProfileSetup.tsx","App.tsx","index.tsx"],"sourcesContent":["/**\n * @license React\n * react-dom-client.production.js\n *\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n/*\n Modernizr 3.0.0pre (Custom Build) | MIT\n*/\n\"use strict\";\nvar Scheduler = require(\"scheduler\"),\n  React = require(\"react\"),\n  ReactDOM = require(\"react-dom\");\nfunction formatProdErrorMessage(code) {\n  var url = \"https://react.dev/errors/\" + code;\n  if (1 < arguments.length) {\n    url += \"?args[]=\" + encodeURIComponent(arguments[1]);\n    for (var i = 2; i < arguments.length; i++)\n      url += \"&args[]=\" + encodeURIComponent(arguments[i]);\n  }\n  return (\n    \"Minified React error #\" +\n    code +\n    \"; visit \" +\n    url +\n    \" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.\"\n  );\n}\nfunction isValidContainer(node) {\n  return !(\n    !node ||\n    (1 !== node.nodeType && 9 !== node.nodeType && 11 !== node.nodeType)\n  );\n}\nfunction getNearestMountedFiber(fiber) {\n  var node = fiber,\n    nearestMounted = fiber;\n  if (fiber.alternate) for (; node.return; ) node = node.return;\n  else {\n    fiber = node;\n    do\n      (node = fiber),\n        0 !== (node.flags & 4098) && (nearestMounted = node.return),\n        (fiber = node.return);\n    while (fiber);\n  }\n  return 3 === node.tag ? nearestMounted : null;\n}\nfunction getSuspenseInstanceFromFiber(fiber) {\n  if (13 === fiber.tag) {\n    var suspenseState = fiber.memoizedState;\n    null === suspenseState &&\n      ((fiber = fiber.alternate),\n      null !== fiber && (suspenseState = fiber.memoizedState));\n    if (null !== suspenseState) return suspenseState.dehydrated;\n  }\n  return null;\n}\nfunction assertIsMounted(fiber) {\n  if (getNearestMountedFiber(fiber) !== fiber)\n    throw Error(formatProdErrorMessage(188));\n}\nfunction findCurrentFiberUsingSlowPath(fiber) {\n  var alternate = fiber.alternate;\n  if (!alternate) {\n    alternate = getNearestMountedFiber(fiber);\n    if (null === alternate) throw Error(formatProdErrorMessage(188));\n    return alternate !== fiber ? null : fiber;\n  }\n  for (var a = fiber, b = alternate; ; ) {\n    var parentA = a.return;\n    if (null === parentA) break;\n    var parentB = parentA.alternate;\n    if (null === parentB) {\n      b = parentA.return;\n      if (null !== b) {\n        a = b;\n        continue;\n      }\n      break;\n    }\n    if (parentA.child === parentB.child) {\n      for (parentB = parentA.child; parentB; ) {\n        if (parentB === a) return assertIsMounted(parentA), fiber;\n        if (parentB === b) return assertIsMounted(parentA), alternate;\n        parentB = parentB.sibling;\n      }\n      throw Error(formatProdErrorMessage(188));\n    }\n    if (a.return !== b.return) (a = parentA), (b = parentB);\n    else {\n      for (var didFindChild = !1, child$0 = parentA.child; child$0; ) {\n        if (child$0 === a) {\n          didFindChild = !0;\n          a = parentA;\n          b = parentB;\n          break;\n        }\n        if (child$0 === b) {\n          didFindChild = !0;\n          b = parentA;\n          a = parentB;\n          break;\n        }\n        child$0 = child$0.sibling;\n      }\n      if (!didFindChild) {\n        for (child$0 = parentB.child; child$0; ) {\n          if (child$0 === a) {\n            didFindChild = !0;\n            a = parentB;\n            b = parentA;\n            break;\n          }\n          if (child$0 === b) {\n            didFindChild = !0;\n            b = parentB;\n            a = parentA;\n            break;\n          }\n          child$0 = child$0.sibling;\n        }\n        if (!didFindChild) throw Error(formatProdErrorMessage(189));\n      }\n    }\n    if (a.alternate !== b) throw Error(formatProdErrorMessage(190));\n  }\n  if (3 !== a.tag) throw Error(formatProdErrorMessage(188));\n  return a.stateNode.current === a ? fiber : alternate;\n}\nfunction findCurrentHostFiberImpl(node) {\n  var tag = node.tag;\n  if (5 === tag || 26 === tag || 27 === tag || 6 === tag) return node;\n  for (node = node.child; null !== node; ) {\n    tag = findCurrentHostFiberImpl(node);\n    if (null !== tag) return tag;\n    node = node.sibling;\n  }\n  return null;\n}\nvar assign = Object.assign,\n  REACT_LEGACY_ELEMENT_TYPE = Symbol.for(\"react.element\"),\n  REACT_ELEMENT_TYPE = Symbol.for(\"react.transitional.element\"),\n  REACT_PORTAL_TYPE = Symbol.for(\"react.portal\"),\n  REACT_FRAGMENT_TYPE = Symbol.for(\"react.fragment\"),\n  REACT_STRICT_MODE_TYPE = Symbol.for(\"react.strict_mode\"),\n  REACT_PROFILER_TYPE = Symbol.for(\"react.profiler\"),\n  REACT_PROVIDER_TYPE = Symbol.for(\"react.provider\"),\n  REACT_CONSUMER_TYPE = Symbol.for(\"react.consumer\"),\n  REACT_CONTEXT_TYPE = Symbol.for(\"react.context\"),\n  REACT_FORWARD_REF_TYPE = Symbol.for(\"react.forward_ref\"),\n  REACT_SUSPENSE_TYPE = Symbol.for(\"react.suspense\"),\n  REACT_SUSPENSE_LIST_TYPE = Symbol.for(\"react.suspense_list\"),\n  REACT_MEMO_TYPE = Symbol.for(\"react.memo\"),\n  REACT_LAZY_TYPE = Symbol.for(\"react.lazy\");\nSymbol.for(\"react.scope\");\nvar REACT_ACTIVITY_TYPE = Symbol.for(\"react.activity\");\nSymbol.for(\"react.legacy_hidden\");\nSymbol.for(\"react.tracing_marker\");\nvar REACT_MEMO_CACHE_SENTINEL = Symbol.for(\"react.memo_cache_sentinel\");\nSymbol.for(\"react.view_transition\");\nvar MAYBE_ITERATOR_SYMBOL = Symbol.iterator;\nfunction getIteratorFn(maybeIterable) {\n  if (null === maybeIterable || \"object\" !== typeof maybeIterable) return null;\n  maybeIterable =\n    (MAYBE_ITERATOR_SYMBOL && maybeIterable[MAYBE_ITERATOR_SYMBOL]) ||\n    maybeIterable[\"@@iterator\"];\n  return \"function\" === typeof maybeIterable ? maybeIterable : null;\n}\nvar REACT_CLIENT_REFERENCE = Symbol.for(\"react.client.reference\");\nfunction getComponentNameFromType(type) {\n  if (null == type) return null;\n  if (\"function\" === typeof type)\n    return type.$$typeof === REACT_CLIENT_REFERENCE\n      ? null\n      : type.displayName || type.name || null;\n  if (\"string\" === typeof type) return type;\n  switch (type) {\n    case REACT_FRAGMENT_TYPE:\n      return \"Fragment\";\n    case REACT_PROFILER_TYPE:\n      return \"Profiler\";\n    case REACT_STRICT_MODE_TYPE:\n      return \"StrictMode\";\n    case REACT_SUSPENSE_TYPE:\n      return \"Suspense\";\n    case REACT_SUSPENSE_LIST_TYPE:\n      return \"SuspenseList\";\n    case REACT_ACTIVITY_TYPE:\n      return \"Activity\";\n  }\n  if (\"object\" === typeof type)\n    switch (type.$$typeof) {\n      case REACT_PORTAL_TYPE:\n        return \"Portal\";\n      case REACT_CONTEXT_TYPE:\n        return (type.displayName || \"Context\") + \".Provider\";\n      case REACT_CONSUMER_TYPE:\n        return (type._context.displayName || \"Context\") + \".Consumer\";\n      case REACT_FORWARD_REF_TYPE:\n        var innerType = type.render;\n        type = type.displayName;\n        type ||\n          ((type = innerType.displayName || innerType.name || \"\"),\n          (type = \"\" !== type ? \"ForwardRef(\" + type + \")\" : \"ForwardRef\"));\n        return type;\n      case REACT_MEMO_TYPE:\n        return (\n          (innerType = type.displayName || null),\n          null !== innerType\n            ? innerType\n            : getComponentNameFromType(type.type) || \"Memo\"\n        );\n      case REACT_LAZY_TYPE:\n        innerType = type._payload;\n        type = type._init;\n        try {\n          return getComponentNameFromType(type(innerType));\n        } catch (x) {}\n    }\n  return null;\n}\nvar isArrayImpl = Array.isArray,\n  ReactSharedInternals =\n    React.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,\n  ReactDOMSharedInternals =\n    ReactDOM.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,\n  sharedNotPendingObject = {\n    pending: !1,\n    data: null,\n    method: null,\n    action: null\n  },\n  valueStack = [],\n  index = -1;\nfunction createCursor(defaultValue) {\n  return { current: defaultValue };\n}\nfunction pop(cursor) {\n  0 > index ||\n    ((cursor.current = valueStack[index]), (valueStack[index] = null), index--);\n}\nfunction push(cursor, value) {\n  index++;\n  valueStack[index] = cursor.current;\n  cursor.current = value;\n}\nvar contextStackCursor = createCursor(null),\n  contextFiberStackCursor = createCursor(null),\n  rootInstanceStackCursor = createCursor(null),\n  hostTransitionProviderCursor = createCursor(null);\nfunction pushHostContainer(fiber, nextRootInstance) {\n  push(rootInstanceStackCursor, nextRootInstance);\n  push(contextFiberStackCursor, fiber);\n  push(contextStackCursor, null);\n  switch (nextRootInstance.nodeType) {\n    case 9:\n    case 11:\n      fiber = (fiber = nextRootInstance.documentElement)\n        ? (fiber = fiber.namespaceURI)\n          ? getOwnHostContext(fiber)\n          : 0\n        : 0;\n      break;\n    default:\n      if (\n        ((fiber = nextRootInstance.tagName),\n        (nextRootInstance = nextRootInstance.namespaceURI))\n      )\n        (nextRootInstance = getOwnHostContext(nextRootInstance)),\n          (fiber = getChildHostContextProd(nextRootInstance, fiber));\n      else\n        switch (fiber) {\n          case \"svg\":\n            fiber = 1;\n            break;\n          case \"math\":\n            fiber = 2;\n            break;\n          default:\n            fiber = 0;\n        }\n  }\n  pop(contextStackCursor);\n  push(contextStackCursor, fiber);\n}\nfunction popHostContainer() {\n  pop(contextStackCursor);\n  pop(contextFiberStackCursor);\n  pop(rootInstanceStackCursor);\n}\nfunction pushHostContext(fiber) {\n  null !== fiber.memoizedState && push(hostTransitionProviderCursor, fiber);\n  var context = contextStackCursor.current;\n  var JSCompiler_inline_result = getChildHostContextProd(context, fiber.type);\n  context !== JSCompiler_inline_result &&\n    (push(contextFiberStackCursor, fiber),\n    push(contextStackCursor, JSCompiler_inline_result));\n}\nfunction popHostContext(fiber) {\n  contextFiberStackCursor.current === fiber &&\n    (pop(contextStackCursor), pop(contextFiberStackCursor));\n  hostTransitionProviderCursor.current === fiber &&\n    (pop(hostTransitionProviderCursor),\n    (HostTransitionContext._currentValue = sharedNotPendingObject));\n}\nvar hasOwnProperty = Object.prototype.hasOwnProperty,\n  scheduleCallback$3 = Scheduler.unstable_scheduleCallback,\n  cancelCallback$1 = Scheduler.unstable_cancelCallback,\n  shouldYield = Scheduler.unstable_shouldYield,\n  requestPaint = Scheduler.unstable_requestPaint,\n  now = Scheduler.unstable_now,\n  getCurrentPriorityLevel = Scheduler.unstable_getCurrentPriorityLevel,\n  ImmediatePriority = Scheduler.unstable_ImmediatePriority,\n  UserBlockingPriority = Scheduler.unstable_UserBlockingPriority,\n  NormalPriority$1 = Scheduler.unstable_NormalPriority,\n  LowPriority = Scheduler.unstable_LowPriority,\n  IdlePriority = Scheduler.unstable_IdlePriority,\n  log$1 = Scheduler.log,\n  unstable_setDisableYieldValue = Scheduler.unstable_setDisableYieldValue,\n  rendererID = null,\n  injectedHook = null;\nfunction setIsStrictModeForDevtools(newIsStrictMode) {\n  \"function\" === typeof log$1 && unstable_setDisableYieldValue(newIsStrictMode);\n  if (injectedHook && \"function\" === typeof injectedHook.setStrictMode)\n    try {\n      injectedHook.setStrictMode(rendererID, newIsStrictMode);\n    } catch (err) {}\n}\nvar clz32 = Math.clz32 ? Math.clz32 : clz32Fallback,\n  log = Math.log,\n  LN2 = Math.LN2;\nfunction clz32Fallback(x) {\n  x >>>= 0;\n  return 0 === x ? 32 : (31 - ((log(x) / LN2) | 0)) | 0;\n}\nvar nextTransitionLane = 256,\n  nextRetryLane = 4194304;\nfunction getHighestPriorityLanes(lanes) {\n  var pendingSyncLanes = lanes & 42;\n  if (0 !== pendingSyncLanes) return pendingSyncLanes;\n  switch (lanes & -lanes) {\n    case 1:\n      return 1;\n    case 2:\n      return 2;\n    case 4:\n      return 4;\n    case 8:\n      return 8;\n    case 16:\n      return 16;\n    case 32:\n      return 32;\n    case 64:\n      return 64;\n    case 128:\n      return 128;\n    case 256:\n    case 512:\n    case 1024:\n    case 2048:\n    case 4096:\n    case 8192:\n    case 16384:\n    case 32768:\n    case 65536:\n    case 131072:\n    case 262144:\n    case 524288:\n    case 1048576:\n    case 2097152:\n      return lanes & 4194048;\n    case 4194304:\n    case 8388608:\n    case 16777216:\n    case 33554432:\n      return lanes & 62914560;\n    case 67108864:\n      return 67108864;\n    case 134217728:\n      return 134217728;\n    case 268435456:\n      return 268435456;\n    case 536870912:\n      return 536870912;\n    case 1073741824:\n      return 0;\n    default:\n      return lanes;\n  }\n}\nfunction getNextLanes(root, wipLanes, rootHasPendingCommit) {\n  var pendingLanes = root.pendingLanes;\n  if (0 === pendingLanes) return 0;\n  var nextLanes = 0,\n    suspendedLanes = root.suspendedLanes,\n    pingedLanes = root.pingedLanes;\n  root = root.warmLanes;\n  var nonIdlePendingLanes = pendingLanes & 134217727;\n  0 !== nonIdlePendingLanes\n    ? ((pendingLanes = nonIdlePendingLanes & ~suspendedLanes),\n      0 !== pendingLanes\n        ? (nextLanes = getHighestPriorityLanes(pendingLanes))\n        : ((pingedLanes &= nonIdlePendingLanes),\n          0 !== pingedLanes\n            ? (nextLanes = getHighestPriorityLanes(pingedLanes))\n            : rootHasPendingCommit ||\n              ((rootHasPendingCommit = nonIdlePendingLanes & ~root),\n              0 !== rootHasPendingCommit &&\n                (nextLanes = getHighestPriorityLanes(rootHasPendingCommit)))))\n    : ((nonIdlePendingLanes = pendingLanes & ~suspendedLanes),\n      0 !== nonIdlePendingLanes\n        ? (nextLanes = getHighestPriorityLanes(nonIdlePendingLanes))\n        : 0 !== pingedLanes\n          ? (nextLanes = getHighestPriorityLanes(pingedLanes))\n          : rootHasPendingCommit ||\n            ((rootHasPendingCommit = pendingLanes & ~root),\n            0 !== rootHasPendingCommit &&\n              (nextLanes = getHighestPriorityLanes(rootHasPendingCommit))));\n  return 0 === nextLanes\n    ? 0\n    : 0 !== wipLanes &&\n        wipLanes !== nextLanes &&\n        0 === (wipLanes & suspendedLanes) &&\n        ((suspendedLanes = nextLanes & -nextLanes),\n        (rootHasPendingCommit = wipLanes & -wipLanes),\n        suspendedLanes >= rootHasPendingCommit ||\n          (32 === suspendedLanes && 0 !== (rootHasPendingCommit & 4194048)))\n      ? wipLanes\n      : nextLanes;\n}\nfunction checkIfRootIsPrerendering(root, renderLanes) {\n  return (\n    0 ===\n    (root.pendingLanes &\n      ~(root.suspendedLanes & ~root.pingedLanes) &\n      renderLanes)\n  );\n}\nfunction computeExpirationTime(lane, currentTime) {\n  switch (lane) {\n    case 1:\n    case 2:\n    case 4:\n    case 8:\n    case 64:\n      return currentTime + 250;\n    case 16:\n    case 32:\n    case 128:\n    case 256:\n    case 512:\n    case 1024:\n    case 2048:\n    case 4096:\n    case 8192:\n    case 16384:\n    case 32768:\n    case 65536:\n    case 131072:\n    case 262144:\n    case 524288:\n    case 1048576:\n    case 2097152:\n      return currentTime + 5e3;\n    case 4194304:\n    case 8388608:\n    case 16777216:\n    case 33554432:\n      return -1;\n    case 67108864:\n    case 134217728:\n    case 268435456:\n    case 536870912:\n    case 1073741824:\n      return -1;\n    default:\n      return -1;\n  }\n}\nfunction claimNextTransitionLane() {\n  var lane = nextTransitionLane;\n  nextTransitionLane <<= 1;\n  0 === (nextTransitionLane & 4194048) && (nextTransitionLane = 256);\n  return lane;\n}\nfunction claimNextRetryLane() {\n  var lane = nextRetryLane;\n  nextRetryLane <<= 1;\n  0 === (nextRetryLane & 62914560) && (nextRetryLane = 4194304);\n  return lane;\n}\nfunction createLaneMap(initial) {\n  for (var laneMap = [], i = 0; 31 > i; i++) laneMap.push(initial);\n  return laneMap;\n}\nfunction markRootUpdated$1(root, updateLane) {\n  root.pendingLanes |= updateLane;\n  268435456 !== updateLane &&\n    ((root.suspendedLanes = 0), (root.pingedLanes = 0), (root.warmLanes = 0));\n}\nfunction markRootFinished(\n  root,\n  finishedLanes,\n  remainingLanes,\n  spawnedLane,\n  updatedLanes,\n  suspendedRetryLanes\n) {\n  var previouslyPendingLanes = root.pendingLanes;\n  root.pendingLanes = remainingLanes;\n  root.suspendedLanes = 0;\n  root.pingedLanes = 0;\n  root.warmLanes = 0;\n  root.expiredLanes &= remainingLanes;\n  root.entangledLanes &= remainingLanes;\n  root.errorRecoveryDisabledLanes &= remainingLanes;\n  root.shellSuspendCounter = 0;\n  var entanglements = root.entanglements,\n    expirationTimes = root.expirationTimes,\n    hiddenUpdates = root.hiddenUpdates;\n  for (\n    remainingLanes = previouslyPendingLanes & ~remainingLanes;\n    0 < remainingLanes;\n\n  ) {\n    var index$5 = 31 - clz32(remainingLanes),\n      lane = 1 << index$5;\n    entanglements[index$5] = 0;\n    expirationTimes[index$5] = -1;\n    var hiddenUpdatesForLane = hiddenUpdates[index$5];\n    if (null !== hiddenUpdatesForLane)\n      for (\n        hiddenUpdates[index$5] = null, index$5 = 0;\n        index$5 < hiddenUpdatesForLane.length;\n        index$5++\n      ) {\n        var update = hiddenUpdatesForLane[index$5];\n        null !== update && (update.lane &= -536870913);\n      }\n    remainingLanes &= ~lane;\n  }\n  0 !== spawnedLane && markSpawnedDeferredLane(root, spawnedLane, 0);\n  0 !== suspendedRetryLanes &&\n    0 === updatedLanes &&\n    0 !== root.tag &&\n    (root.suspendedLanes |=\n      suspendedRetryLanes & ~(previouslyPendingLanes & ~finishedLanes));\n}\nfunction markSpawnedDeferredLane(root, spawnedLane, entangledLanes) {\n  root.pendingLanes |= spawnedLane;\n  root.suspendedLanes &= ~spawnedLane;\n  var spawnedLaneIndex = 31 - clz32(spawnedLane);\n  root.entangledLanes |= spawnedLane;\n  root.entanglements[spawnedLaneIndex] =\n    root.entanglements[spawnedLaneIndex] |\n    1073741824 |\n    (entangledLanes & 4194090);\n}\nfunction markRootEntangled(root, entangledLanes) {\n  var rootEntangledLanes = (root.entangledLanes |= entangledLanes);\n  for (root = root.entanglements; rootEntangledLanes; ) {\n    var index$6 = 31 - clz32(rootEntangledLanes),\n      lane = 1 << index$6;\n    (lane & entangledLanes) | (root[index$6] & entangledLanes) &&\n      (root[index$6] |= entangledLanes);\n    rootEntangledLanes &= ~lane;\n  }\n}\nfunction getBumpedLaneForHydrationByLane(lane) {\n  switch (lane) {\n    case 2:\n      lane = 1;\n      break;\n    case 8:\n      lane = 4;\n      break;\n    case 32:\n      lane = 16;\n      break;\n    case 256:\n    case 512:\n    case 1024:\n    case 2048:\n    case 4096:\n    case 8192:\n    case 16384:\n    case 32768:\n    case 65536:\n    case 131072:\n    case 262144:\n    case 524288:\n    case 1048576:\n    case 2097152:\n    case 4194304:\n    case 8388608:\n    case 16777216:\n    case 33554432:\n      lane = 128;\n      break;\n    case 268435456:\n      lane = 134217728;\n      break;\n    default:\n      lane = 0;\n  }\n  return lane;\n}\nfunction lanesToEventPriority(lanes) {\n  lanes &= -lanes;\n  return 2 < lanes\n    ? 8 < lanes\n      ? 0 !== (lanes & 134217727)\n        ? 32\n        : 268435456\n      : 8\n    : 2;\n}\nfunction resolveUpdatePriority() {\n  var updatePriority = ReactDOMSharedInternals.p;\n  if (0 !== updatePriority) return updatePriority;\n  updatePriority = window.event;\n  return void 0 === updatePriority ? 32 : getEventPriority(updatePriority.type);\n}\nfunction runWithPriority(priority, fn) {\n  var previousPriority = ReactDOMSharedInternals.p;\n  try {\n    return (ReactDOMSharedInternals.p = priority), fn();\n  } finally {\n    ReactDOMSharedInternals.p = previousPriority;\n  }\n}\nvar randomKey = Math.random().toString(36).slice(2),\n  internalInstanceKey = \"__reactFiber$\" + randomKey,\n  internalPropsKey = \"__reactProps$\" + randomKey,\n  internalContainerInstanceKey = \"__reactContainer$\" + randomKey,\n  internalEventHandlersKey = \"__reactEvents$\" + randomKey,\n  internalEventHandlerListenersKey = \"__reactListeners$\" + randomKey,\n  internalEventHandlesSetKey = \"__reactHandles$\" + randomKey,\n  internalRootNodeResourcesKey = \"__reactResources$\" + randomKey,\n  internalHoistableMarker = \"__reactMarker$\" + randomKey;\nfunction detachDeletedInstance(node) {\n  delete node[internalInstanceKey];\n  delete node[internalPropsKey];\n  delete node[internalEventHandlersKey];\n  delete node[internalEventHandlerListenersKey];\n  delete node[internalEventHandlesSetKey];\n}\nfunction getClosestInstanceFromNode(targetNode) {\n  var targetInst = targetNode[internalInstanceKey];\n  if (targetInst) return targetInst;\n  for (var parentNode = targetNode.parentNode; parentNode; ) {\n    if (\n      (targetInst =\n        parentNode[internalContainerInstanceKey] ||\n        parentNode[internalInstanceKey])\n    ) {\n      parentNode = targetInst.alternate;\n      if (\n        null !== targetInst.child ||\n        (null !== parentNode && null !== parentNode.child)\n      )\n        for (\n          targetNode = getParentSuspenseInstance(targetNode);\n          null !== targetNode;\n\n        ) {\n          if ((parentNode = targetNode[internalInstanceKey])) return parentNode;\n          targetNode = getParentSuspenseInstance(targetNode);\n        }\n      return targetInst;\n    }\n    targetNode = parentNode;\n    parentNode = targetNode.parentNode;\n  }\n  return null;\n}\nfunction getInstanceFromNode(node) {\n  if (\n    (node = node[internalInstanceKey] || node[internalContainerInstanceKey])\n  ) {\n    var tag = node.tag;\n    if (\n      5 === tag ||\n      6 === tag ||\n      13 === tag ||\n      26 === tag ||\n      27 === tag ||\n      3 === tag\n    )\n      return node;\n  }\n  return null;\n}\nfunction getNodeFromInstance(inst) {\n  var tag = inst.tag;\n  if (5 === tag || 26 === tag || 27 === tag || 6 === tag) return inst.stateNode;\n  throw Error(formatProdErrorMessage(33));\n}\nfunction getResourcesFromRoot(root) {\n  var resources = root[internalRootNodeResourcesKey];\n  resources ||\n    (resources = root[internalRootNodeResourcesKey] =\n      { hoistableStyles: new Map(), hoistableScripts: new Map() });\n  return resources;\n}\nfunction markNodeAsHoistable(node) {\n  node[internalHoistableMarker] = !0;\n}\nvar allNativeEvents = new Set(),\n  registrationNameDependencies = {};\nfunction registerTwoPhaseEvent(registrationName, dependencies) {\n  registerDirectEvent(registrationName, dependencies);\n  registerDirectEvent(registrationName + \"Capture\", dependencies);\n}\nfunction registerDirectEvent(registrationName, dependencies) {\n  registrationNameDependencies[registrationName] = dependencies;\n  for (\n    registrationName = 0;\n    registrationName < dependencies.length;\n    registrationName++\n  )\n    allNativeEvents.add(dependencies[registrationName]);\n}\nvar VALID_ATTRIBUTE_NAME_REGEX = RegExp(\n    \"^[:A-Z_a-z\\\\u00C0-\\\\u00D6\\\\u00D8-\\\\u00F6\\\\u00F8-\\\\u02FF\\\\u0370-\\\\u037D\\\\u037F-\\\\u1FFF\\\\u200C-\\\\u200D\\\\u2070-\\\\u218F\\\\u2C00-\\\\u2FEF\\\\u3001-\\\\uD7FF\\\\uF900-\\\\uFDCF\\\\uFDF0-\\\\uFFFD][:A-Z_a-z\\\\u00C0-\\\\u00D6\\\\u00D8-\\\\u00F6\\\\u00F8-\\\\u02FF\\\\u0370-\\\\u037D\\\\u037F-\\\\u1FFF\\\\u200C-\\\\u200D\\\\u2070-\\\\u218F\\\\u2C00-\\\\u2FEF\\\\u3001-\\\\uD7FF\\\\uF900-\\\\uFDCF\\\\uFDF0-\\\\uFFFD\\\\-.0-9\\\\u00B7\\\\u0300-\\\\u036F\\\\u203F-\\\\u2040]*$\"\n  ),\n  illegalAttributeNameCache = {},\n  validatedAttributeNameCache = {};\nfunction isAttributeNameSafe(attributeName) {\n  if (hasOwnProperty.call(validatedAttributeNameCache, attributeName))\n    return !0;\n  if (hasOwnProperty.call(illegalAttributeNameCache, attributeName)) return !1;\n  if (VALID_ATTRIBUTE_NAME_REGEX.test(attributeName))\n    return (validatedAttributeNameCache[attributeName] = !0);\n  illegalAttributeNameCache[attributeName] = !0;\n  return !1;\n}\nfunction setValueForAttribute(node, name, value) {\n  if (isAttributeNameSafe(name))\n    if (null === value) node.removeAttribute(name);\n    else {\n      switch (typeof value) {\n        case \"undefined\":\n        case \"function\":\n        case \"symbol\":\n          node.removeAttribute(name);\n          return;\n        case \"boolean\":\n          var prefix$8 = name.toLowerCase().slice(0, 5);\n          if (\"data-\" !== prefix$8 && \"aria-\" !== prefix$8) {\n            node.removeAttribute(name);\n            return;\n          }\n      }\n      node.setAttribute(name, \"\" + value);\n    }\n}\nfunction setValueForKnownAttribute(node, name, value) {\n  if (null === value) node.removeAttribute(name);\n  else {\n    switch (typeof value) {\n      case \"undefined\":\n      case \"function\":\n      case \"symbol\":\n      case \"boolean\":\n        node.removeAttribute(name);\n        return;\n    }\n    node.setAttribute(name, \"\" + value);\n  }\n}\nfunction setValueForNamespacedAttribute(node, namespace, name, value) {\n  if (null === value) node.removeAttribute(name);\n  else {\n    switch (typeof value) {\n      case \"undefined\":\n      case \"function\":\n      case \"symbol\":\n      case \"boolean\":\n        node.removeAttribute(name);\n        return;\n    }\n    node.setAttributeNS(namespace, name, \"\" + value);\n  }\n}\nvar prefix, suffix;\nfunction describeBuiltInComponentFrame(name) {\n  if (void 0 === prefix)\n    try {\n      throw Error();\n    } catch (x) {\n      var match = x.stack.trim().match(/\\n( *(at )?)/);\n      prefix = (match && match[1]) || \"\";\n      suffix =\n        -1 < x.stack.indexOf(\"\\n    at\")\n          ? \" (<anonymous>)\"\n          : -1 < x.stack.indexOf(\"@\")\n            ? \"@unknown:0:0\"\n            : \"\";\n    }\n  return \"\\n\" + prefix + name + suffix;\n}\nvar reentry = !1;\nfunction describeNativeComponentFrame(fn, construct) {\n  if (!fn || reentry) return \"\";\n  reentry = !0;\n  var previousPrepareStackTrace = Error.prepareStackTrace;\n  Error.prepareStackTrace = void 0;\n  try {\n    var RunInRootFrame = {\n      DetermineComponentFrameRoot: function () {\n        try {\n          if (construct) {\n            var Fake = function () {\n              throw Error();\n            };\n            Object.defineProperty(Fake.prototype, \"props\", {\n              set: function () {\n                throw Error();\n              }\n            });\n            if (\"object\" === typeof Reflect && Reflect.construct) {\n              try {\n                Reflect.construct(Fake, []);\n              } catch (x) {\n                var control = x;\n              }\n              Reflect.construct(fn, [], Fake);\n            } else {\n              try {\n                Fake.call();\n              } catch (x$9) {\n                control = x$9;\n              }\n              fn.call(Fake.prototype);\n            }\n          } else {\n            try {\n              throw Error();\n            } catch (x$10) {\n              control = x$10;\n            }\n            (Fake = fn()) &&\n              \"function\" === typeof Fake.catch &&\n              Fake.catch(function () {});\n          }\n        } catch (sample) {\n          if (sample && control && \"string\" === typeof sample.stack)\n            return [sample.stack, control.stack];\n        }\n        return [null, null];\n      }\n    };\n    RunInRootFrame.DetermineComponentFrameRoot.displayName =\n      \"DetermineComponentFrameRoot\";\n    var namePropDescriptor = Object.getOwnPropertyDescriptor(\n      RunInRootFrame.DetermineComponentFrameRoot,\n      \"name\"\n    );\n    namePropDescriptor &&\n      namePropDescriptor.configurable &&\n      Object.defineProperty(\n        RunInRootFrame.DetermineComponentFrameRoot,\n        \"name\",\n        { value: \"DetermineComponentFrameRoot\" }\n      );\n    var _RunInRootFrame$Deter = RunInRootFrame.DetermineComponentFrameRoot(),\n      sampleStack = _RunInRootFrame$Deter[0],\n      controlStack = _RunInRootFrame$Deter[1];\n    if (sampleStack && controlStack) {\n      var sampleLines = sampleStack.split(\"\\n\"),\n        controlLines = controlStack.split(\"\\n\");\n      for (\n        namePropDescriptor = RunInRootFrame = 0;\n        RunInRootFrame < sampleLines.length &&\n        !sampleLines[RunInRootFrame].includes(\"DetermineComponentFrameRoot\");\n\n      )\n        RunInRootFrame++;\n      for (\n        ;\n        namePropDescriptor < controlLines.length &&\n        !controlLines[namePropDescriptor].includes(\n          \"DetermineComponentFrameRoot\"\n        );\n\n      )\n        namePropDescriptor++;\n      if (\n        RunInRootFrame === sampleLines.length ||\n        namePropDescriptor === controlLines.length\n      )\n        for (\n          RunInRootFrame = sampleLines.length - 1,\n            namePropDescriptor = controlLines.length - 1;\n          1 <= RunInRootFrame &&\n          0 <= namePropDescriptor &&\n          sampleLines[RunInRootFrame] !== controlLines[namePropDescriptor];\n\n        )\n          namePropDescriptor--;\n      for (\n        ;\n        1 <= RunInRootFrame && 0 <= namePropDescriptor;\n        RunInRootFrame--, namePropDescriptor--\n      )\n        if (sampleLines[RunInRootFrame] !== controlLines[namePropDescriptor]) {\n          if (1 !== RunInRootFrame || 1 !== namePropDescriptor) {\n            do\n              if (\n                (RunInRootFrame--,\n                namePropDescriptor--,\n                0 > namePropDescriptor ||\n                  sampleLines[RunInRootFrame] !==\n                    controlLines[namePropDescriptor])\n              ) {\n                var frame =\n                  \"\\n\" +\n                  sampleLines[RunInRootFrame].replace(\" at new \", \" at \");\n                fn.displayName &&\n                  frame.includes(\"<anonymous>\") &&\n                  (frame = frame.replace(\"<anonymous>\", fn.displayName));\n                return frame;\n              }\n            while (1 <= RunInRootFrame && 0 <= namePropDescriptor);\n          }\n          break;\n        }\n    }\n  } finally {\n    (reentry = !1), (Error.prepareStackTrace = previousPrepareStackTrace);\n  }\n  return (previousPrepareStackTrace = fn ? fn.displayName || fn.name : \"\")\n    ? describeBuiltInComponentFrame(previousPrepareStackTrace)\n    : \"\";\n}\nfunction describeFiber(fiber) {\n  switch (fiber.tag) {\n    case 26:\n    case 27:\n    case 5:\n      return describeBuiltInComponentFrame(fiber.type);\n    case 16:\n      return describeBuiltInComponentFrame(\"Lazy\");\n    case 13:\n      return describeBuiltInComponentFrame(\"Suspense\");\n    case 19:\n      return describeBuiltInComponentFrame(\"SuspenseList\");\n    case 0:\n    case 15:\n      return describeNativeComponentFrame(fiber.type, !1);\n    case 11:\n      return describeNativeComponentFrame(fiber.type.render, !1);\n    case 1:\n      return describeNativeComponentFrame(fiber.type, !0);\n    case 31:\n      return describeBuiltInComponentFrame(\"Activity\");\n    default:\n      return \"\";\n  }\n}\nfunction getStackByFiberInDevAndProd(workInProgress) {\n  try {\n    var info = \"\";\n    do\n      (info += describeFiber(workInProgress)),\n        (workInProgress = workInProgress.return);\n    while (workInProgress);\n    return info;\n  } catch (x) {\n    return \"\\nError generating stack: \" + x.message + \"\\n\" + x.stack;\n  }\n}\nfunction getToStringValue(value) {\n  switch (typeof value) {\n    case \"bigint\":\n    case \"boolean\":\n    case \"number\":\n    case \"string\":\n    case \"undefined\":\n      return value;\n    case \"object\":\n      return value;\n    default:\n      return \"\";\n  }\n}\nfunction isCheckable(elem) {\n  var type = elem.type;\n  return (\n    (elem = elem.nodeName) &&\n    \"input\" === elem.toLowerCase() &&\n    (\"checkbox\" === type || \"radio\" === type)\n  );\n}\nfunction trackValueOnNode(node) {\n  var valueField = isCheckable(node) ? \"checked\" : \"value\",\n    descriptor = Object.getOwnPropertyDescriptor(\n      node.constructor.prototype,\n      valueField\n    ),\n    currentValue = \"\" + node[valueField];\n  if (\n    !node.hasOwnProperty(valueField) &&\n    \"undefined\" !== typeof descriptor &&\n    \"function\" === typeof descriptor.get &&\n    \"function\" === typeof descriptor.set\n  ) {\n    var get = descriptor.get,\n      set = descriptor.set;\n    Object.defineProperty(node, valueField, {\n      configurable: !0,\n      get: function () {\n        return get.call(this);\n      },\n      set: function (value) {\n        currentValue = \"\" + value;\n        set.call(this, value);\n      }\n    });\n    Object.defineProperty(node, valueField, {\n      enumerable: descriptor.enumerable\n    });\n    return {\n      getValue: function () {\n        return currentValue;\n      },\n      setValue: function (value) {\n        currentValue = \"\" + value;\n      },\n      stopTracking: function () {\n        node._valueTracker = null;\n        delete node[valueField];\n      }\n    };\n  }\n}\nfunction track(node) {\n  node._valueTracker || (node._valueTracker = trackValueOnNode(node));\n}\nfunction updateValueIfChanged(node) {\n  if (!node) return !1;\n  var tracker = node._valueTracker;\n  if (!tracker) return !0;\n  var lastValue = tracker.getValue();\n  var value = \"\";\n  node &&\n    (value = isCheckable(node)\n      ? node.checked\n        ? \"true\"\n        : \"false\"\n      : node.value);\n  node = value;\n  return node !== lastValue ? (tracker.setValue(node), !0) : !1;\n}\nfunction getActiveElement(doc) {\n  doc = doc || (\"undefined\" !== typeof document ? document : void 0);\n  if (\"undefined\" === typeof doc) return null;\n  try {\n    return doc.activeElement || doc.body;\n  } catch (e) {\n    return doc.body;\n  }\n}\nvar escapeSelectorAttributeValueInsideDoubleQuotesRegex = /[\\n\"\\\\]/g;\nfunction escapeSelectorAttributeValueInsideDoubleQuotes(value) {\n  return value.replace(\n    escapeSelectorAttributeValueInsideDoubleQuotesRegex,\n    function (ch) {\n      return \"\\\\\" + ch.charCodeAt(0).toString(16) + \" \";\n    }\n  );\n}\nfunction updateInput(\n  element,\n  value,\n  defaultValue,\n  lastDefaultValue,\n  checked,\n  defaultChecked,\n  type,\n  name\n) {\n  element.name = \"\";\n  null != type &&\n  \"function\" !== typeof type &&\n  \"symbol\" !== typeof type &&\n  \"boolean\" !== typeof type\n    ? (element.type = type)\n    : element.removeAttribute(\"type\");\n  if (null != value)\n    if (\"number\" === type) {\n      if ((0 === value && \"\" === element.value) || element.value != value)\n        element.value = \"\" + getToStringValue(value);\n    } else\n      element.value !== \"\" + getToStringValue(value) &&\n        (element.value = \"\" + getToStringValue(value));\n  else\n    (\"submit\" !== type && \"reset\" !== type) || element.removeAttribute(\"value\");\n  null != value\n    ? setDefaultValue(element, type, getToStringValue(value))\n    : null != defaultValue\n      ? setDefaultValue(element, type, getToStringValue(defaultValue))\n      : null != lastDefaultValue && element.removeAttribute(\"value\");\n  null == checked &&\n    null != defaultChecked &&\n    (element.defaultChecked = !!defaultChecked);\n  null != checked &&\n    (element.checked =\n      checked && \"function\" !== typeof checked && \"symbol\" !== typeof checked);\n  null != name &&\n  \"function\" !== typeof name &&\n  \"symbol\" !== typeof name &&\n  \"boolean\" !== typeof name\n    ? (element.name = \"\" + getToStringValue(name))\n    : element.removeAttribute(\"name\");\n}\nfunction initInput(\n  element,\n  value,\n  defaultValue,\n  checked,\n  defaultChecked,\n  type,\n  name,\n  isHydrating\n) {\n  null != type &&\n    \"function\" !== typeof type &&\n    \"symbol\" !== typeof type &&\n    \"boolean\" !== typeof type &&\n    (element.type = type);\n  if (null != value || null != defaultValue) {\n    if (\n      !(\n        (\"submit\" !== type && \"reset\" !== type) ||\n        (void 0 !== value && null !== value)\n      )\n    )\n      return;\n    defaultValue =\n      null != defaultValue ? \"\" + getToStringValue(defaultValue) : \"\";\n    value = null != value ? \"\" + getToStringValue(value) : defaultValue;\n    isHydrating || value === element.value || (element.value = value);\n    element.defaultValue = value;\n  }\n  checked = null != checked ? checked : defaultChecked;\n  checked =\n    \"function\" !== typeof checked && \"symbol\" !== typeof checked && !!checked;\n  element.checked = isHydrating ? element.checked : !!checked;\n  element.defaultChecked = !!checked;\n  null != name &&\n    \"function\" !== typeof name &&\n    \"symbol\" !== typeof name &&\n    \"boolean\" !== typeof name &&\n    (element.name = name);\n}\nfunction setDefaultValue(node, type, value) {\n  (\"number\" === type && getActiveElement(node.ownerDocument) === node) ||\n    node.defaultValue === \"\" + value ||\n    (node.defaultValue = \"\" + value);\n}\nfunction updateOptions(node, multiple, propValue, setDefaultSelected) {\n  node = node.options;\n  if (multiple) {\n    multiple = {};\n    for (var i = 0; i < propValue.length; i++)\n      multiple[\"$\" + propValue[i]] = !0;\n    for (propValue = 0; propValue < node.length; propValue++)\n      (i = multiple.hasOwnProperty(\"$\" + node[propValue].value)),\n        node[propValue].selected !== i && (node[propValue].selected = i),\n        i && setDefaultSelected && (node[propValue].defaultSelected = !0);\n  } else {\n    propValue = \"\" + getToStringValue(propValue);\n    multiple = null;\n    for (i = 0; i < node.length; i++) {\n      if (node[i].value === propValue) {\n        node[i].selected = !0;\n        setDefaultSelected && (node[i].defaultSelected = !0);\n        return;\n      }\n      null !== multiple || node[i].disabled || (multiple = node[i]);\n    }\n    null !== multiple && (multiple.selected = !0);\n  }\n}\nfunction updateTextarea(element, value, defaultValue) {\n  if (\n    null != value &&\n    ((value = \"\" + getToStringValue(value)),\n    value !== element.value && (element.value = value),\n    null == defaultValue)\n  ) {\n    element.defaultValue !== value && (element.defaultValue = value);\n    return;\n  }\n  element.defaultValue =\n    null != defaultValue ? \"\" + getToStringValue(defaultValue) : \"\";\n}\nfunction initTextarea(element, value, defaultValue, children) {\n  if (null == value) {\n    if (null != children) {\n      if (null != defaultValue) throw Error(formatProdErrorMessage(92));\n      if (isArrayImpl(children)) {\n        if (1 < children.length) throw Error(formatProdErrorMessage(93));\n        children = children[0];\n      }\n      defaultValue = children;\n    }\n    null == defaultValue && (defaultValue = \"\");\n    value = defaultValue;\n  }\n  defaultValue = getToStringValue(value);\n  element.defaultValue = defaultValue;\n  children = element.textContent;\n  children === defaultValue &&\n    \"\" !== children &&\n    null !== children &&\n    (element.value = children);\n}\nfunction setTextContent(node, text) {\n  if (text) {\n    var firstChild = node.firstChild;\n    if (\n      firstChild &&\n      firstChild === node.lastChild &&\n      3 === firstChild.nodeType\n    ) {\n      firstChild.nodeValue = text;\n      return;\n    }\n  }\n  node.textContent = text;\n}\nvar unitlessNumbers = new Set(\n  \"animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp\".split(\n    \" \"\n  )\n);\nfunction setValueForStyle(style, styleName, value) {\n  var isCustomProperty = 0 === styleName.indexOf(\"--\");\n  null == value || \"boolean\" === typeof value || \"\" === value\n    ? isCustomProperty\n      ? style.setProperty(styleName, \"\")\n      : \"float\" === styleName\n        ? (style.cssFloat = \"\")\n        : (style[styleName] = \"\")\n    : isCustomProperty\n      ? style.setProperty(styleName, value)\n      : \"number\" !== typeof value ||\n          0 === value ||\n          unitlessNumbers.has(styleName)\n        ? \"float\" === styleName\n          ? (style.cssFloat = value)\n          : (style[styleName] = (\"\" + value).trim())\n        : (style[styleName] = value + \"px\");\n}\nfunction setValueForStyles(node, styles, prevStyles) {\n  if (null != styles && \"object\" !== typeof styles)\n    throw Error(formatProdErrorMessage(62));\n  node = node.style;\n  if (null != prevStyles) {\n    for (var styleName in prevStyles)\n      !prevStyles.hasOwnProperty(styleName) ||\n        (null != styles && styles.hasOwnProperty(styleName)) ||\n        (0 === styleName.indexOf(\"--\")\n          ? node.setProperty(styleName, \"\")\n          : \"float\" === styleName\n            ? (node.cssFloat = \"\")\n            : (node[styleName] = \"\"));\n    for (var styleName$16 in styles)\n      (styleName = styles[styleName$16]),\n        styles.hasOwnProperty(styleName$16) &&\n          prevStyles[styleName$16] !== styleName &&\n          setValueForStyle(node, styleName$16, styleName);\n  } else\n    for (var styleName$17 in styles)\n      styles.hasOwnProperty(styleName$17) &&\n        setValueForStyle(node, styleName$17, styles[styleName$17]);\n}\nfunction isCustomElement(tagName) {\n  if (-1 === tagName.indexOf(\"-\")) return !1;\n  switch (tagName) {\n    case \"annotation-xml\":\n    case \"color-profile\":\n    case \"font-face\":\n    case \"font-face-src\":\n    case \"font-face-uri\":\n    case \"font-face-format\":\n    case \"font-face-name\":\n    case \"missing-glyph\":\n      return !1;\n    default:\n      return !0;\n  }\n}\nvar aliases = new Map([\n    [\"acceptCharset\", \"accept-charset\"],\n    [\"htmlFor\", \"for\"],\n    [\"httpEquiv\", \"http-equiv\"],\n    [\"crossOrigin\", \"crossorigin\"],\n    [\"accentHeight\", \"accent-height\"],\n    [\"alignmentBaseline\", \"alignment-baseline\"],\n    [\"arabicForm\", \"arabic-form\"],\n    [\"baselineShift\", \"baseline-shift\"],\n    [\"capHeight\", \"cap-height\"],\n    [\"clipPath\", \"clip-path\"],\n    [\"clipRule\", \"clip-rule\"],\n    [\"colorInterpolation\", \"color-interpolation\"],\n    [\"colorInterpolationFilters\", \"color-interpolation-filters\"],\n    [\"colorProfile\", \"color-profile\"],\n    [\"colorRendering\", \"color-rendering\"],\n    [\"dominantBaseline\", \"dominant-baseline\"],\n    [\"enableBackground\", \"enable-background\"],\n    [\"fillOpacity\", \"fill-opacity\"],\n    [\"fillRule\", \"fill-rule\"],\n    [\"floodColor\", \"flood-color\"],\n    [\"floodOpacity\", \"flood-opacity\"],\n    [\"fontFamily\", \"font-family\"],\n    [\"fontSize\", \"font-size\"],\n    [\"fontSizeAdjust\", \"font-size-adjust\"],\n    [\"fontStretch\", \"font-stretch\"],\n    [\"fontStyle\", \"font-style\"],\n    [\"fontVariant\", \"font-variant\"],\n    [\"fontWeight\", \"font-weight\"],\n    [\"glyphName\", \"glyph-name\"],\n    [\"glyphOrientationHorizontal\", \"glyph-orientation-horizontal\"],\n    [\"glyphOrientationVertical\", \"glyph-orientation-vertical\"],\n    [\"horizAdvX\", \"horiz-adv-x\"],\n    [\"horizOriginX\", \"horiz-origin-x\"],\n    [\"imageRendering\", \"image-rendering\"],\n    [\"letterSpacing\", \"letter-spacing\"],\n    [\"lightingColor\", \"lighting-color\"],\n    [\"markerEnd\", \"marker-end\"],\n    [\"markerMid\", \"marker-mid\"],\n    [\"markerStart\", \"marker-start\"],\n    [\"overlinePosition\", \"overline-position\"],\n    [\"overlineThickness\", \"overline-thickness\"],\n    [\"paintOrder\", \"paint-order\"],\n    [\"panose-1\", \"panose-1\"],\n    [\"pointerEvents\", \"pointer-events\"],\n    [\"renderingIntent\", \"rendering-intent\"],\n    [\"shapeRendering\", \"shape-rendering\"],\n    [\"stopColor\", \"stop-color\"],\n    [\"stopOpacity\", \"stop-opacity\"],\n    [\"strikethroughPosition\", \"strikethrough-position\"],\n    [\"strikethroughThickness\", \"strikethrough-thickness\"],\n    [\"strokeDasharray\", \"stroke-dasharray\"],\n    [\"strokeDashoffset\", \"stroke-dashoffset\"],\n    [\"strokeLinecap\", \"stroke-linecap\"],\n    [\"strokeLinejoin\", \"stroke-linejoin\"],\n    [\"strokeMiterlimit\", \"stroke-miterlimit\"],\n    [\"strokeOpacity\", \"stroke-opacity\"],\n    [\"strokeWidth\", \"stroke-width\"],\n    [\"textAnchor\", \"text-anchor\"],\n    [\"textDecoration\", \"text-decoration\"],\n    [\"textRendering\", \"text-rendering\"],\n    [\"transformOrigin\", \"transform-origin\"],\n    [\"underlinePosition\", \"underline-position\"],\n    [\"underlineThickness\", \"underline-thickness\"],\n    [\"unicodeBidi\", \"unicode-bidi\"],\n    [\"unicodeRange\", \"unicode-range\"],\n    [\"unitsPerEm\", \"units-per-em\"],\n    [\"vAlphabetic\", \"v-alphabetic\"],\n    [\"vHanging\", \"v-hanging\"],\n    [\"vIdeographic\", \"v-ideographic\"],\n    [\"vMathematical\", \"v-mathematical\"],\n    [\"vectorEffect\", \"vector-effect\"],\n    [\"vertAdvY\", \"vert-adv-y\"],\n    [\"vertOriginX\", \"vert-origin-x\"],\n    [\"vertOriginY\", \"vert-origin-y\"],\n    [\"wordSpacing\", \"word-spacing\"],\n    [\"writingMode\", \"writing-mode\"],\n    [\"xmlnsXlink\", \"xmlns:xlink\"],\n    [\"xHeight\", \"x-height\"]\n  ]),\n  isJavaScriptProtocol =\n    /^[\\u0000-\\u001F ]*j[\\r\\n\\t]*a[\\r\\n\\t]*v[\\r\\n\\t]*a[\\r\\n\\t]*s[\\r\\n\\t]*c[\\r\\n\\t]*r[\\r\\n\\t]*i[\\r\\n\\t]*p[\\r\\n\\t]*t[\\r\\n\\t]*:/i;\nfunction sanitizeURL(url) {\n  return isJavaScriptProtocol.test(\"\" + url)\n    ? \"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')\"\n    : url;\n}\nvar currentReplayingEvent = null;\nfunction getEventTarget(nativeEvent) {\n  nativeEvent = nativeEvent.target || nativeEvent.srcElement || window;\n  nativeEvent.correspondingUseElement &&\n    (nativeEvent = nativeEvent.correspondingUseElement);\n  return 3 === nativeEvent.nodeType ? nativeEvent.parentNode : nativeEvent;\n}\nvar restoreTarget = null,\n  restoreQueue = null;\nfunction restoreStateOfTarget(target) {\n  var internalInstance = getInstanceFromNode(target);\n  if (internalInstance && (target = internalInstance.stateNode)) {\n    var props = target[internalPropsKey] || null;\n    a: switch (((target = internalInstance.stateNode), internalInstance.type)) {\n      case \"input\":\n        updateInput(\n          target,\n          props.value,\n          props.defaultValue,\n          props.defaultValue,\n          props.checked,\n          props.defaultChecked,\n          props.type,\n          props.name\n        );\n        internalInstance = props.name;\n        if (\"radio\" === props.type && null != internalInstance) {\n          for (props = target; props.parentNode; ) props = props.parentNode;\n          props = props.querySelectorAll(\n            'input[name=\"' +\n              escapeSelectorAttributeValueInsideDoubleQuotes(\n                \"\" + internalInstance\n              ) +\n              '\"][type=\"radio\"]'\n          );\n          for (\n            internalInstance = 0;\n            internalInstance < props.length;\n            internalInstance++\n          ) {\n            var otherNode = props[internalInstance];\n            if (otherNode !== target && otherNode.form === target.form) {\n              var otherProps = otherNode[internalPropsKey] || null;\n              if (!otherProps) throw Error(formatProdErrorMessage(90));\n              updateInput(\n                otherNode,\n                otherProps.value,\n                otherProps.defaultValue,\n                otherProps.defaultValue,\n                otherProps.checked,\n                otherProps.defaultChecked,\n                otherProps.type,\n                otherProps.name\n              );\n            }\n          }\n          for (\n            internalInstance = 0;\n            internalInstance < props.length;\n            internalInstance++\n          )\n            (otherNode = props[internalInstance]),\n              otherNode.form === target.form && updateValueIfChanged(otherNode);\n        }\n        break a;\n      case \"textarea\":\n        updateTextarea(target, props.value, props.defaultValue);\n        break a;\n      case \"select\":\n        (internalInstance = props.value),\n          null != internalInstance &&\n            updateOptions(target, !!props.multiple, internalInstance, !1);\n    }\n  }\n}\nvar isInsideEventHandler = !1;\nfunction batchedUpdates$1(fn, a, b) {\n  if (isInsideEventHandler) return fn(a, b);\n  isInsideEventHandler = !0;\n  try {\n    var JSCompiler_inline_result = fn(a);\n    return JSCompiler_inline_result;\n  } finally {\n    if (\n      ((isInsideEventHandler = !1),\n      null !== restoreTarget || null !== restoreQueue)\n    )\n      if (\n        (flushSyncWork$1(),\n        restoreTarget &&\n          ((a = restoreTarget),\n          (fn = restoreQueue),\n          (restoreQueue = restoreTarget = null),\n          restoreStateOfTarget(a),\n          fn))\n      )\n        for (a = 0; a < fn.length; a++) restoreStateOfTarget(fn[a]);\n  }\n}\nfunction getListener(inst, registrationName) {\n  var stateNode = inst.stateNode;\n  if (null === stateNode) return null;\n  var props = stateNode[internalPropsKey] || null;\n  if (null === props) return null;\n  stateNode = props[registrationName];\n  a: switch (registrationName) {\n    case \"onClick\":\n    case \"onClickCapture\":\n    case \"onDoubleClick\":\n    case \"onDoubleClickCapture\":\n    case \"onMouseDown\":\n    case \"onMouseDownCapture\":\n    case \"onMouseMove\":\n    case \"onMouseMoveCapture\":\n    case \"onMouseUp\":\n    case \"onMouseUpCapture\":\n    case \"onMouseEnter\":\n      (props = !props.disabled) ||\n        ((inst = inst.type),\n        (props = !(\n          \"button\" === inst ||\n          \"input\" === inst ||\n          \"select\" === inst ||\n          \"textarea\" === inst\n        )));\n      inst = !props;\n      break a;\n    default:\n      inst = !1;\n  }\n  if (inst) return null;\n  if (stateNode && \"function\" !== typeof stateNode)\n    throw Error(\n      formatProdErrorMessage(231, registrationName, typeof stateNode)\n    );\n  return stateNode;\n}\nvar canUseDOM = !(\n    \"undefined\" === typeof window ||\n    \"undefined\" === typeof window.document ||\n    \"undefined\" === typeof window.document.createElement\n  ),\n  passiveBrowserEventsSupported = !1;\nif (canUseDOM)\n  try {\n    var options = {};\n    Object.defineProperty(options, \"passive\", {\n      get: function () {\n        passiveBrowserEventsSupported = !0;\n      }\n    });\n    window.addEventListener(\"test\", options, options);\n    window.removeEventListener(\"test\", options, options);\n  } catch (e) {\n    passiveBrowserEventsSupported = !1;\n  }\nvar root = null,\n  startText = null,\n  fallbackText = null;\nfunction getData() {\n  if (fallbackText) return fallbackText;\n  var start,\n    startValue = startText,\n    startLength = startValue.length,\n    end,\n    endValue = \"value\" in root ? root.value : root.textContent,\n    endLength = endValue.length;\n  for (\n    start = 0;\n    start < startLength && startValue[start] === endValue[start];\n    start++\n  );\n  var minEnd = startLength - start;\n  for (\n    end = 1;\n    end <= minEnd &&\n    startValue[startLength - end] === endValue[endLength - end];\n    end++\n  );\n  return (fallbackText = endValue.slice(start, 1 < end ? 1 - end : void 0));\n}\nfunction getEventCharCode(nativeEvent) {\n  var keyCode = nativeEvent.keyCode;\n  \"charCode\" in nativeEvent\n    ? ((nativeEvent = nativeEvent.charCode),\n      0 === nativeEvent && 13 === keyCode && (nativeEvent = 13))\n    : (nativeEvent = keyCode);\n  10 === nativeEvent && (nativeEvent = 13);\n  return 32 <= nativeEvent || 13 === nativeEvent ? nativeEvent : 0;\n}\nfunction functionThatReturnsTrue() {\n  return !0;\n}\nfunction functionThatReturnsFalse() {\n  return !1;\n}\nfunction createSyntheticEvent(Interface) {\n  function SyntheticBaseEvent(\n    reactName,\n    reactEventType,\n    targetInst,\n    nativeEvent,\n    nativeEventTarget\n  ) {\n    this._reactName = reactName;\n    this._targetInst = targetInst;\n    this.type = reactEventType;\n    this.nativeEvent = nativeEvent;\n    this.target = nativeEventTarget;\n    this.currentTarget = null;\n    for (var propName in Interface)\n      Interface.hasOwnProperty(propName) &&\n        ((reactName = Interface[propName]),\n        (this[propName] = reactName\n          ? reactName(nativeEvent)\n          : nativeEvent[propName]));\n    this.isDefaultPrevented = (\n      null != nativeEvent.defaultPrevented\n        ? nativeEvent.defaultPrevented\n        : !1 === nativeEvent.returnValue\n    )\n      ? functionThatReturnsTrue\n      : functionThatReturnsFalse;\n    this.isPropagationStopped = functionThatReturnsFalse;\n    return this;\n  }\n  assign(SyntheticBaseEvent.prototype, {\n    preventDefault: function () {\n      this.defaultPrevented = !0;\n      var event = this.nativeEvent;\n      event &&\n        (event.preventDefault\n          ? event.preventDefault()\n          : \"unknown\" !== typeof event.returnValue && (event.returnValue = !1),\n        (this.isDefaultPrevented = functionThatReturnsTrue));\n    },\n    stopPropagation: function () {\n      var event = this.nativeEvent;\n      event &&\n        (event.stopPropagation\n          ? event.stopPropagation()\n          : \"unknown\" !== typeof event.cancelBubble &&\n            (event.cancelBubble = !0),\n        (this.isPropagationStopped = functionThatReturnsTrue));\n    },\n    persist: function () {},\n    isPersistent: functionThatReturnsTrue\n  });\n  return SyntheticBaseEvent;\n}\nvar EventInterface = {\n    eventPhase: 0,\n    bubbles: 0,\n    cancelable: 0,\n    timeStamp: function (event) {\n      return event.timeStamp || Date.now();\n    },\n    defaultPrevented: 0,\n    isTrusted: 0\n  },\n  SyntheticEvent = createSyntheticEvent(EventInterface),\n  UIEventInterface = assign({}, EventInterface, { view: 0, detail: 0 }),\n  SyntheticUIEvent = createSyntheticEvent(UIEventInterface),\n  lastMovementX,\n  lastMovementY,\n  lastMouseEvent,\n  MouseEventInterface = assign({}, UIEventInterface, {\n    screenX: 0,\n    screenY: 0,\n    clientX: 0,\n    clientY: 0,\n    pageX: 0,\n    pageY: 0,\n    ctrlKey: 0,\n    shiftKey: 0,\n    altKey: 0,\n    metaKey: 0,\n    getModifierState: getEventModifierState,\n    button: 0,\n    buttons: 0,\n    relatedTarget: function (event) {\n      return void 0 === event.relatedTarget\n        ? event.fromElement === event.srcElement\n          ? event.toElement\n          : event.fromElement\n        : event.relatedTarget;\n    },\n    movementX: function (event) {\n      if (\"movementX\" in event) return event.movementX;\n      event !== lastMouseEvent &&\n        (lastMouseEvent && \"mousemove\" === event.type\n          ? ((lastMovementX = event.screenX - lastMouseEvent.screenX),\n            (lastMovementY = event.screenY - lastMouseEvent.screenY))\n          : (lastMovementY = lastMovementX = 0),\n        (lastMouseEvent = event));\n      return lastMovementX;\n    },\n    movementY: function (event) {\n      return \"movementY\" in event ? event.movementY : lastMovementY;\n    }\n  }),\n  SyntheticMouseEvent = createSyntheticEvent(MouseEventInterface),\n  DragEventInterface = assign({}, MouseEventInterface, { dataTransfer: 0 }),\n  SyntheticDragEvent = createSyntheticEvent(DragEventInterface),\n  FocusEventInterface = assign({}, UIEventInterface, { relatedTarget: 0 }),\n  SyntheticFocusEvent = createSyntheticEvent(FocusEventInterface),\n  AnimationEventInterface = assign({}, EventInterface, {\n    animationName: 0,\n    elapsedTime: 0,\n    pseudoElement: 0\n  }),\n  SyntheticAnimationEvent = createSyntheticEvent(AnimationEventInterface),\n  ClipboardEventInterface = assign({}, EventInterface, {\n    clipboardData: function (event) {\n      return \"clipboardData\" in event\n        ? event.clipboardData\n        : window.clipboardData;\n    }\n  }),\n  SyntheticClipboardEvent = createSyntheticEvent(ClipboardEventInterface),\n  CompositionEventInterface = assign({}, EventInterface, { data: 0 }),\n  SyntheticCompositionEvent = createSyntheticEvent(CompositionEventInterface),\n  normalizeKey = {\n    Esc: \"Escape\",\n    Spacebar: \" \",\n    Left: \"ArrowLeft\",\n    Up: \"ArrowUp\",\n    Right: \"ArrowRight\",\n    Down: \"ArrowDown\",\n    Del: \"Delete\",\n    Win: \"OS\",\n    Menu: \"ContextMenu\",\n    Apps: \"ContextMenu\",\n    Scroll: \"ScrollLock\",\n    MozPrintableKey: \"Unidentified\"\n  },\n  translateToKey = {\n    8: \"Backspace\",\n    9: \"Tab\",\n    12: \"Clear\",\n    13: \"Enter\",\n    16: \"Shift\",\n    17: \"Control\",\n    18: \"Alt\",\n    19: \"Pause\",\n    20: \"CapsLock\",\n    27: \"Escape\",\n    32: \" \",\n    33: \"PageUp\",\n    34: \"PageDown\",\n    35: \"End\",\n    36: \"Home\",\n    37: \"ArrowLeft\",\n    38: \"ArrowUp\",\n    39: \"ArrowRight\",\n    40: \"ArrowDown\",\n    45: \"Insert\",\n    46: \"Delete\",\n    112: \"F1\",\n    113: \"F2\",\n    114: \"F3\",\n    115: \"F4\",\n    116: \"F5\",\n    117: \"F6\",\n    118: \"F7\",\n    119: \"F8\",\n    120: \"F9\",\n    121: \"F10\",\n    122: \"F11\",\n    123: \"F12\",\n    144: \"NumLock\",\n    145: \"ScrollLock\",\n    224: \"Meta\"\n  },\n  modifierKeyToProp = {\n    Alt: \"altKey\",\n    Control: \"ctrlKey\",\n    Meta: \"metaKey\",\n    Shift: \"shiftKey\"\n  };\nfunction modifierStateGetter(keyArg) {\n  var nativeEvent = this.nativeEvent;\n  return nativeEvent.getModifierState\n    ? nativeEvent.getModifierState(keyArg)\n    : (keyArg = modifierKeyToProp[keyArg])\n      ? !!nativeEvent[keyArg]\n      : !1;\n}\nfunction getEventModifierState() {\n  return modifierStateGetter;\n}\nvar KeyboardEventInterface = assign({}, UIEventInterface, {\n    key: function (nativeEvent) {\n      if (nativeEvent.key) {\n        var key = normalizeKey[nativeEvent.key] || nativeEvent.key;\n        if (\"Unidentified\" !== key) return key;\n      }\n      return \"keypress\" === nativeEvent.type\n        ? ((nativeEvent = getEventCharCode(nativeEvent)),\n          13 === nativeEvent ? \"Enter\" : String.fromCharCode(nativeEvent))\n        : \"keydown\" === nativeEvent.type || \"keyup\" === nativeEvent.type\n          ? translateToKey[nativeEvent.keyCode] || \"Unidentified\"\n          : \"\";\n    },\n    code: 0,\n    location: 0,\n    ctrlKey: 0,\n    shiftKey: 0,\n    altKey: 0,\n    metaKey: 0,\n    repeat: 0,\n    locale: 0,\n    getModifierState: getEventModifierState,\n    charCode: function (event) {\n      return \"keypress\" === event.type ? getEventCharCode(event) : 0;\n    },\n    keyCode: function (event) {\n      return \"keydown\" === event.type || \"keyup\" === event.type\n        ? event.keyCode\n        : 0;\n    },\n    which: function (event) {\n      return \"keypress\" === event.type\n        ? getEventCharCode(event)\n        : \"keydown\" === event.type || \"keyup\" === event.type\n          ? event.keyCode\n          : 0;\n    }\n  }),\n  SyntheticKeyboardEvent = createSyntheticEvent(KeyboardEventInterface),\n  PointerEventInterface = assign({}, MouseEventInterface, {\n    pointerId: 0,\n    width: 0,\n    height: 0,\n    pressure: 0,\n    tangentialPressure: 0,\n    tiltX: 0,\n    tiltY: 0,\n    twist: 0,\n    pointerType: 0,\n    isPrimary: 0\n  }),\n  SyntheticPointerEvent = createSyntheticEvent(PointerEventInterface),\n  TouchEventInterface = assign({}, UIEventInterface, {\n    touches: 0,\n    targetTouches: 0,\n    changedTouches: 0,\n    altKey: 0,\n    metaKey: 0,\n    ctrlKey: 0,\n    shiftKey: 0,\n    getModifierState: getEventModifierState\n  }),\n  SyntheticTouchEvent = createSyntheticEvent(TouchEventInterface),\n  TransitionEventInterface = assign({}, EventInterface, {\n    propertyName: 0,\n    elapsedTime: 0,\n    pseudoElement: 0\n  }),\n  SyntheticTransitionEvent = createSyntheticEvent(TransitionEventInterface),\n  WheelEventInterface = assign({}, MouseEventInterface, {\n    deltaX: function (event) {\n      return \"deltaX\" in event\n        ? event.deltaX\n        : \"wheelDeltaX\" in event\n          ? -event.wheelDeltaX\n          : 0;\n    },\n    deltaY: function (event) {\n      return \"deltaY\" in event\n        ? event.deltaY\n        : \"wheelDeltaY\" in event\n          ? -event.wheelDeltaY\n          : \"wheelDelta\" in event\n            ? -event.wheelDelta\n            : 0;\n    },\n    deltaZ: 0,\n    deltaMode: 0\n  }),\n  SyntheticWheelEvent = createSyntheticEvent(WheelEventInterface),\n  ToggleEventInterface = assign({}, EventInterface, {\n    newState: 0,\n    oldState: 0\n  }),\n  SyntheticToggleEvent = createSyntheticEvent(ToggleEventInterface),\n  END_KEYCODES = [9, 13, 27, 32],\n  canUseCompositionEvent = canUseDOM && \"CompositionEvent\" in window,\n  documentMode = null;\ncanUseDOM &&\n  \"documentMode\" in document &&\n  (documentMode = document.documentMode);\nvar canUseTextInputEvent = canUseDOM && \"TextEvent\" in window && !documentMode,\n  useFallbackCompositionData =\n    canUseDOM &&\n    (!canUseCompositionEvent ||\n      (documentMode && 8 < documentMode && 11 >= documentMode)),\n  SPACEBAR_CHAR = String.fromCharCode(32),\n  hasSpaceKeypress = !1;\nfunction isFallbackCompositionEnd(domEventName, nativeEvent) {\n  switch (domEventName) {\n    case \"keyup\":\n      return -1 !== END_KEYCODES.indexOf(nativeEvent.keyCode);\n    case \"keydown\":\n      return 229 !== nativeEvent.keyCode;\n    case \"keypress\":\n    case \"mousedown\":\n    case \"focusout\":\n      return !0;\n    default:\n      return !1;\n  }\n}\nfunction getDataFromCustomEvent(nativeEvent) {\n  nativeEvent = nativeEvent.detail;\n  return \"object\" === typeof nativeEvent && \"data\" in nativeEvent\n    ? nativeEvent.data\n    : null;\n}\nvar isComposing = !1;\nfunction getNativeBeforeInputChars(domEventName, nativeEvent) {\n  switch (domEventName) {\n    case \"compositionend\":\n      return getDataFromCustomEvent(nativeEvent);\n    case \"keypress\":\n      if (32 !== nativeEvent.which) return null;\n      hasSpaceKeypress = !0;\n      return SPACEBAR_CHAR;\n    case \"textInput\":\n      return (\n        (domEventName = nativeEvent.data),\n        domEventName === SPACEBAR_CHAR && hasSpaceKeypress ? null : domEventName\n      );\n    default:\n      return null;\n  }\n}\nfunction getFallbackBeforeInputChars(domEventName, nativeEvent) {\n  if (isComposing)\n    return \"compositionend\" === domEventName ||\n      (!canUseCompositionEvent &&\n        isFallbackCompositionEnd(domEventName, nativeEvent))\n      ? ((domEventName = getData()),\n        (fallbackText = startText = root = null),\n        (isComposing = !1),\n        domEventName)\n      : null;\n  switch (domEventName) {\n    case \"paste\":\n      return null;\n    case \"keypress\":\n      if (\n        !(nativeEvent.ctrlKey || nativeEvent.altKey || nativeEvent.metaKey) ||\n        (nativeEvent.ctrlKey && nativeEvent.altKey)\n      ) {\n        if (nativeEvent.char && 1 < nativeEvent.char.length)\n          return nativeEvent.char;\n        if (nativeEvent.which) return String.fromCharCode(nativeEvent.which);\n      }\n      return null;\n    case \"compositionend\":\n      return useFallbackCompositionData && \"ko\" !== nativeEvent.locale\n        ? null\n        : nativeEvent.data;\n    default:\n      return null;\n  }\n}\nvar supportedInputTypes = {\n  color: !0,\n  date: !0,\n  datetime: !0,\n  \"datetime-local\": !0,\n  email: !0,\n  month: !0,\n  number: !0,\n  password: !0,\n  range: !0,\n  search: !0,\n  tel: !0,\n  text: !0,\n  time: !0,\n  url: !0,\n  week: !0\n};\nfunction isTextInputElement(elem) {\n  var nodeName = elem && elem.nodeName && elem.nodeName.toLowerCase();\n  return \"input\" === nodeName\n    ? !!supportedInputTypes[elem.type]\n    : \"textarea\" === nodeName\n      ? !0\n      : !1;\n}\nfunction createAndAccumulateChangeEvent(\n  dispatchQueue,\n  inst,\n  nativeEvent,\n  target\n) {\n  restoreTarget\n    ? restoreQueue\n      ? restoreQueue.push(target)\n      : (restoreQueue = [target])\n    : (restoreTarget = target);\n  inst = accumulateTwoPhaseListeners(inst, \"onChange\");\n  0 < inst.length &&\n    ((nativeEvent = new SyntheticEvent(\n      \"onChange\",\n      \"change\",\n      null,\n      nativeEvent,\n      target\n    )),\n    dispatchQueue.push({ event: nativeEvent, listeners: inst }));\n}\nvar activeElement$1 = null,\n  activeElementInst$1 = null;\nfunction runEventInBatch(dispatchQueue) {\n  processDispatchQueue(dispatchQueue, 0);\n}\nfunction getInstIfValueChanged(targetInst) {\n  var targetNode = getNodeFromInstance(targetInst);\n  if (updateValueIfChanged(targetNode)) return targetInst;\n}\nfunction getTargetInstForChangeEvent(domEventName, targetInst) {\n  if (\"change\" === domEventName) return targetInst;\n}\nvar isInputEventSupported = !1;\nif (canUseDOM) {\n  var JSCompiler_inline_result$jscomp$282;\n  if (canUseDOM) {\n    var isSupported$jscomp$inline_417 = \"oninput\" in document;\n    if (!isSupported$jscomp$inline_417) {\n      var element$jscomp$inline_418 = document.createElement(\"div\");\n      element$jscomp$inline_418.setAttribute(\"oninput\", \"return;\");\n      isSupported$jscomp$inline_417 =\n        \"function\" === typeof element$jscomp$inline_418.oninput;\n    }\n    JSCompiler_inline_result$jscomp$282 = isSupported$jscomp$inline_417;\n  } else JSCompiler_inline_result$jscomp$282 = !1;\n  isInputEventSupported =\n    JSCompiler_inline_result$jscomp$282 &&\n    (!document.documentMode || 9 < document.documentMode);\n}\nfunction stopWatchingForValueChange() {\n  activeElement$1 &&\n    (activeElement$1.detachEvent(\"onpropertychange\", handlePropertyChange),\n    (activeElementInst$1 = activeElement$1 = null));\n}\nfunction handlePropertyChange(nativeEvent) {\n  if (\n    \"value\" === nativeEvent.propertyName &&\n    getInstIfValueChanged(activeElementInst$1)\n  ) {\n    var dispatchQueue = [];\n    createAndAccumulateChangeEvent(\n      dispatchQueue,\n      activeElementInst$1,\n      nativeEvent,\n      getEventTarget(nativeEvent)\n    );\n    batchedUpdates$1(runEventInBatch, dispatchQueue);\n  }\n}\nfunction handleEventsForInputEventPolyfill(domEventName, target, targetInst) {\n  \"focusin\" === domEventName\n    ? (stopWatchingForValueChange(),\n      (activeElement$1 = target),\n      (activeElementInst$1 = targetInst),\n      activeElement$1.attachEvent(\"onpropertychange\", handlePropertyChange))\n    : \"focusout\" === domEventName && stopWatchingForValueChange();\n}\nfunction getTargetInstForInputEventPolyfill(domEventName) {\n  if (\n    \"selectionchange\" === domEventName ||\n    \"keyup\" === domEventName ||\n    \"keydown\" === domEventName\n  )\n    return getInstIfValueChanged(activeElementInst$1);\n}\nfunction getTargetInstForClickEvent(domEventName, targetInst) {\n  if (\"click\" === domEventName) return getInstIfValueChanged(targetInst);\n}\nfunction getTargetInstForInputOrChangeEvent(domEventName, targetInst) {\n  if (\"input\" === domEventName || \"change\" === domEventName)\n    return getInstIfValueChanged(targetInst);\n}\nfunction is(x, y) {\n  return (x === y && (0 !== x || 1 / x === 1 / y)) || (x !== x && y !== y);\n}\nvar objectIs = \"function\" === typeof Object.is ? Object.is : is;\nfunction shallowEqual(objA, objB) {\n  if (objectIs(objA, objB)) return !0;\n  if (\n    \"object\" !== typeof objA ||\n    null === objA ||\n    \"object\" !== typeof objB ||\n    null === objB\n  )\n    return !1;\n  var keysA = Object.keys(objA),\n    keysB = Object.keys(objB);\n  if (keysA.length !== keysB.length) return !1;\n  for (keysB = 0; keysB < keysA.length; keysB++) {\n    var currentKey = keysA[keysB];\n    if (\n      !hasOwnProperty.call(objB, currentKey) ||\n      !objectIs(objA[currentKey], objB[currentKey])\n    )\n      return !1;\n  }\n  return !0;\n}\nfunction getLeafNode(node) {\n  for (; node && node.firstChild; ) node = node.firstChild;\n  return node;\n}\nfunction getNodeForCharacterOffset(root, offset) {\n  var node = getLeafNode(root);\n  root = 0;\n  for (var nodeEnd; node; ) {\n    if (3 === node.nodeType) {\n      nodeEnd = root + node.textContent.length;\n      if (root <= offset && nodeEnd >= offset)\n        return { node: node, offset: offset - root };\n      root = nodeEnd;\n    }\n    a: {\n      for (; node; ) {\n        if (node.nextSibling) {\n          node = node.nextSibling;\n          break a;\n        }\n        node = node.parentNode;\n      }\n      node = void 0;\n    }\n    node = getLeafNode(node);\n  }\n}\nfunction containsNode(outerNode, innerNode) {\n  return outerNode && innerNode\n    ? outerNode === innerNode\n      ? !0\n      : outerNode && 3 === outerNode.nodeType\n        ? !1\n        : innerNode && 3 === innerNode.nodeType\n          ? containsNode(outerNode, innerNode.parentNode)\n          : \"contains\" in outerNode\n            ? outerNode.contains(innerNode)\n            : outerNode.compareDocumentPosition\n              ? !!(outerNode.compareDocumentPosition(innerNode) & 16)\n              : !1\n    : !1;\n}\nfunction getActiveElementDeep(containerInfo) {\n  containerInfo =\n    null != containerInfo &&\n    null != containerInfo.ownerDocument &&\n    null != containerInfo.ownerDocument.defaultView\n      ? containerInfo.ownerDocument.defaultView\n      : window;\n  for (\n    var element = getActiveElement(containerInfo.document);\n    element instanceof containerInfo.HTMLIFrameElement;\n\n  ) {\n    try {\n      var JSCompiler_inline_result =\n        \"string\" === typeof element.contentWindow.location.href;\n    } catch (err) {\n      JSCompiler_inline_result = !1;\n    }\n    if (JSCompiler_inline_result) containerInfo = element.contentWindow;\n    else break;\n    element = getActiveElement(containerInfo.document);\n  }\n  return element;\n}\nfunction hasSelectionCapabilities(elem) {\n  var nodeName = elem && elem.nodeName && elem.nodeName.toLowerCase();\n  return (\n    nodeName &&\n    ((\"input\" === nodeName &&\n      (\"text\" === elem.type ||\n        \"search\" === elem.type ||\n        \"tel\" === elem.type ||\n        \"url\" === elem.type ||\n        \"password\" === elem.type)) ||\n      \"textarea\" === nodeName ||\n      \"true\" === elem.contentEditable)\n  );\n}\nvar skipSelectionChangeEvent =\n    canUseDOM && \"documentMode\" in document && 11 >= document.documentMode,\n  activeElement = null,\n  activeElementInst = null,\n  lastSelection = null,\n  mouseDown = !1;\nfunction constructSelectEvent(dispatchQueue, nativeEvent, nativeEventTarget) {\n  var doc =\n    nativeEventTarget.window === nativeEventTarget\n      ? nativeEventTarget.document\n      : 9 === nativeEventTarget.nodeType\n        ? nativeEventTarget\n        : nativeEventTarget.ownerDocument;\n  mouseDown ||\n    null == activeElement ||\n    activeElement !== getActiveElement(doc) ||\n    ((doc = activeElement),\n    \"selectionStart\" in doc && hasSelectionCapabilities(doc)\n      ? (doc = { start: doc.selectionStart, end: doc.selectionEnd })\n      : ((doc = (\n          (doc.ownerDocument && doc.ownerDocument.defaultView) ||\n          window\n        ).getSelection()),\n        (doc = {\n          anchorNode: doc.anchorNode,\n          anchorOffset: doc.anchorOffset,\n          focusNode: doc.focusNode,\n          focusOffset: doc.focusOffset\n        })),\n    (lastSelection && shallowEqual(lastSelection, doc)) ||\n      ((lastSelection = doc),\n      (doc = accumulateTwoPhaseListeners(activeElementInst, \"onSelect\")),\n      0 < doc.length &&\n        ((nativeEvent = new SyntheticEvent(\n          \"onSelect\",\n          \"select\",\n          null,\n          nativeEvent,\n          nativeEventTarget\n        )),\n        dispatchQueue.push({ event: nativeEvent, listeners: doc }),\n        (nativeEvent.target = activeElement))));\n}\nfunction makePrefixMap(styleProp, eventName) {\n  var prefixes = {};\n  prefixes[styleProp.toLowerCase()] = eventName.toLowerCase();\n  prefixes[\"Webkit\" + styleProp] = \"webkit\" + eventName;\n  prefixes[\"Moz\" + styleProp] = \"moz\" + eventName;\n  return prefixes;\n}\nvar vendorPrefixes = {\n    animationend: makePrefixMap(\"Animation\", \"AnimationEnd\"),\n    animationiteration: makePrefixMap(\"Animation\", \"AnimationIteration\"),\n    animationstart: makePrefixMap(\"Animation\", \"AnimationStart\"),\n    transitionrun: makePrefixMap(\"Transition\", \"TransitionRun\"),\n    transitionstart: makePrefixMap(\"Transition\", \"TransitionStart\"),\n    transitioncancel: makePrefixMap(\"Transition\", \"TransitionCancel\"),\n    transitionend: makePrefixMap(\"Transition\", \"TransitionEnd\")\n  },\n  prefixedEventNames = {},\n  style = {};\ncanUseDOM &&\n  ((style = document.createElement(\"div\").style),\n  \"AnimationEvent\" in window ||\n    (delete vendorPrefixes.animationend.animation,\n    delete vendorPrefixes.animationiteration.animation,\n    delete vendorPrefixes.animationstart.animation),\n  \"TransitionEvent\" in window ||\n    delete vendorPrefixes.transitionend.transition);\nfunction getVendorPrefixedEventName(eventName) {\n  if (prefixedEventNames[eventName]) return prefixedEventNames[eventName];\n  if (!vendorPrefixes[eventName]) return eventName;\n  var prefixMap = vendorPrefixes[eventName],\n    styleProp;\n  for (styleProp in prefixMap)\n    if (prefixMap.hasOwnProperty(styleProp) && styleProp in style)\n      return (prefixedEventNames[eventName] = prefixMap[styleProp]);\n  return eventName;\n}\nvar ANIMATION_END = getVendorPrefixedEventName(\"animationend\"),\n  ANIMATION_ITERATION = getVendorPrefixedEventName(\"animationiteration\"),\n  ANIMATION_START = getVendorPrefixedEventName(\"animationstart\"),\n  TRANSITION_RUN = getVendorPrefixedEventName(\"transitionrun\"),\n  TRANSITION_START = getVendorPrefixedEventName(\"transitionstart\"),\n  TRANSITION_CANCEL = getVendorPrefixedEventName(\"transitioncancel\"),\n  TRANSITION_END = getVendorPrefixedEventName(\"transitionend\"),\n  topLevelEventsToReactNames = new Map(),\n  simpleEventPluginEvents =\n    \"abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel\".split(\n      \" \"\n    );\nsimpleEventPluginEvents.push(\"scrollEnd\");\nfunction registerSimpleEvent(domEventName, reactName) {\n  topLevelEventsToReactNames.set(domEventName, reactName);\n  registerTwoPhaseEvent(reactName, [domEventName]);\n}\nvar CapturedStacks = new WeakMap();\nfunction createCapturedValueAtFiber(value, source) {\n  if (\"object\" === typeof value && null !== value) {\n    var existing = CapturedStacks.get(value);\n    if (void 0 !== existing) return existing;\n    source = {\n      value: value,\n      source: source,\n      stack: getStackByFiberInDevAndProd(source)\n    };\n    CapturedStacks.set(value, source);\n    return source;\n  }\n  return {\n    value: value,\n    source: source,\n    stack: getStackByFiberInDevAndProd(source)\n  };\n}\nvar concurrentQueues = [],\n  concurrentQueuesIndex = 0,\n  concurrentlyUpdatedLanes = 0;\nfunction finishQueueingConcurrentUpdates() {\n  for (\n    var endIndex = concurrentQueuesIndex,\n      i = (concurrentlyUpdatedLanes = concurrentQueuesIndex = 0);\n    i < endIndex;\n\n  ) {\n    var fiber = concurrentQueues[i];\n    concurrentQueues[i++] = null;\n    var queue = concurrentQueues[i];\n    concurrentQueues[i++] = null;\n    var update = concurrentQueues[i];\n    concurrentQueues[i++] = null;\n    var lane = concurrentQueues[i];\n    concurrentQueues[i++] = null;\n    if (null !== queue && null !== update) {\n      var pending = queue.pending;\n      null === pending\n        ? (update.next = update)\n        : ((update.next = pending.next), (pending.next = update));\n      queue.pending = update;\n    }\n    0 !== lane && markUpdateLaneFromFiberToRoot(fiber, update, lane);\n  }\n}\nfunction enqueueUpdate$1(fiber, queue, update, lane) {\n  concurrentQueues[concurrentQueuesIndex++] = fiber;\n  concurrentQueues[concurrentQueuesIndex++] = queue;\n  concurrentQueues[concurrentQueuesIndex++] = update;\n  concurrentQueues[concurrentQueuesIndex++] = lane;\n  concurrentlyUpdatedLanes |= lane;\n  fiber.lanes |= lane;\n  fiber = fiber.alternate;\n  null !== fiber && (fiber.lanes |= lane);\n}\nfunction enqueueConcurrentHookUpdate(fiber, queue, update, lane) {\n  enqueueUpdate$1(fiber, queue, update, lane);\n  return getRootForUpdatedFiber(fiber);\n}\nfunction enqueueConcurrentRenderForLane(fiber, lane) {\n  enqueueUpdate$1(fiber, null, null, lane);\n  return getRootForUpdatedFiber(fiber);\n}\nfunction markUpdateLaneFromFiberToRoot(sourceFiber, update, lane) {\n  sourceFiber.lanes |= lane;\n  var alternate = sourceFiber.alternate;\n  null !== alternate && (alternate.lanes |= lane);\n  for (var isHidden = !1, parent = sourceFiber.return; null !== parent; )\n    (parent.childLanes |= lane),\n      (alternate = parent.alternate),\n      null !== alternate && (alternate.childLanes |= lane),\n      22 === parent.tag &&\n        ((sourceFiber = parent.stateNode),\n        null === sourceFiber || sourceFiber._visibility & 1 || (isHidden = !0)),\n      (sourceFiber = parent),\n      (parent = parent.return);\n  return 3 === sourceFiber.tag\n    ? ((parent = sourceFiber.stateNode),\n      isHidden &&\n        null !== update &&\n        ((isHidden = 31 - clz32(lane)),\n        (sourceFiber = parent.hiddenUpdates),\n        (alternate = sourceFiber[isHidden]),\n        null === alternate\n          ? (sourceFiber[isHidden] = [update])\n          : alternate.push(update),\n        (update.lane = lane | 536870912)),\n      parent)\n    : null;\n}\nfunction getRootForUpdatedFiber(sourceFiber) {\n  if (50 < nestedUpdateCount)\n    throw (\n      ((nestedUpdateCount = 0),\n      (rootWithNestedUpdates = null),\n      Error(formatProdErrorMessage(185)))\n    );\n  for (var parent = sourceFiber.return; null !== parent; )\n    (sourceFiber = parent), (parent = sourceFiber.return);\n  return 3 === sourceFiber.tag ? sourceFiber.stateNode : null;\n}\nvar emptyContextObject = {};\nfunction FiberNode(tag, pendingProps, key, mode) {\n  this.tag = tag;\n  this.key = key;\n  this.sibling =\n    this.child =\n    this.return =\n    this.stateNode =\n    this.type =\n    this.elementType =\n      null;\n  this.index = 0;\n  this.refCleanup = this.ref = null;\n  this.pendingProps = pendingProps;\n  this.dependencies =\n    this.memoizedState =\n    this.updateQueue =\n    this.memoizedProps =\n      null;\n  this.mode = mode;\n  this.subtreeFlags = this.flags = 0;\n  this.deletions = null;\n  this.childLanes = this.lanes = 0;\n  this.alternate = null;\n}\nfunction createFiberImplClass(tag, pendingProps, key, mode) {\n  return new FiberNode(tag, pendingProps, key, mode);\n}\nfunction shouldConstruct(Component) {\n  Component = Component.prototype;\n  return !(!Component || !Component.isReactComponent);\n}\nfunction createWorkInProgress(current, pendingProps) {\n  var workInProgress = current.alternate;\n  null === workInProgress\n    ? ((workInProgress = createFiberImplClass(\n        current.tag,\n        pendingProps,\n        current.key,\n        current.mode\n      )),\n      (workInProgress.elementType = current.elementType),\n      (workInProgress.type = current.type),\n      (workInProgress.stateNode = current.stateNode),\n      (workInProgress.alternate = current),\n      (current.alternate = workInProgress))\n    : ((workInProgress.pendingProps = pendingProps),\n      (workInProgress.type = current.type),\n      (workInProgress.flags = 0),\n      (workInProgress.subtreeFlags = 0),\n      (workInProgress.deletions = null));\n  workInProgress.flags = current.flags & 65011712;\n  workInProgress.childLanes = current.childLanes;\n  workInProgress.lanes = current.lanes;\n  workInProgress.child = current.child;\n  workInProgress.memoizedProps = current.memoizedProps;\n  workInProgress.memoizedState = current.memoizedState;\n  workInProgress.updateQueue = current.updateQueue;\n  pendingProps = current.dependencies;\n  workInProgress.dependencies =\n    null === pendingProps\n      ? null\n      : { lanes: pendingProps.lanes, firstContext: pendingProps.firstContext };\n  workInProgress.sibling = current.sibling;\n  workInProgress.index = current.index;\n  workInProgress.ref = current.ref;\n  workInProgress.refCleanup = current.refCleanup;\n  return workInProgress;\n}\nfunction resetWorkInProgress(workInProgress, renderLanes) {\n  workInProgress.flags &= 65011714;\n  var current = workInProgress.alternate;\n  null === current\n    ? ((workInProgress.childLanes = 0),\n      (workInProgress.lanes = renderLanes),\n      (workInProgress.child = null),\n      (workInProgress.subtreeFlags = 0),\n      (workInProgress.memoizedProps = null),\n      (workInProgress.memoizedState = null),\n      (workInProgress.updateQueue = null),\n      (workInProgress.dependencies = null),\n      (workInProgress.stateNode = null))\n    : ((workInProgress.childLanes = current.childLanes),\n      (workInProgress.lanes = current.lanes),\n      (workInProgress.child = current.child),\n      (workInProgress.subtreeFlags = 0),\n      (workInProgress.deletions = null),\n      (workInProgress.memoizedProps = current.memoizedProps),\n      (workInProgress.memoizedState = current.memoizedState),\n      (workInProgress.updateQueue = current.updateQueue),\n      (workInProgress.type = current.type),\n      (renderLanes = current.dependencies),\n      (workInProgress.dependencies =\n        null === renderLanes\n          ? null\n          : {\n              lanes: renderLanes.lanes,\n              firstContext: renderLanes.firstContext\n            }));\n  return workInProgress;\n}\nfunction createFiberFromTypeAndProps(\n  type,\n  key,\n  pendingProps,\n  owner,\n  mode,\n  lanes\n) {\n  var fiberTag = 0;\n  owner = type;\n  if (\"function\" === typeof type) shouldConstruct(type) && (fiberTag = 1);\n  else if (\"string\" === typeof type)\n    fiberTag = isHostHoistableType(\n      type,\n      pendingProps,\n      contextStackCursor.current\n    )\n      ? 26\n      : \"html\" === type || \"head\" === type || \"body\" === type\n        ? 27\n        : 5;\n  else\n    a: switch (type) {\n      case REACT_ACTIVITY_TYPE:\n        return (\n          (type = createFiberImplClass(31, pendingProps, key, mode)),\n          (type.elementType = REACT_ACTIVITY_TYPE),\n          (type.lanes = lanes),\n          type\n        );\n      case REACT_FRAGMENT_TYPE:\n        return createFiberFromFragment(pendingProps.children, mode, lanes, key);\n      case REACT_STRICT_MODE_TYPE:\n        fiberTag = 8;\n        mode |= 24;\n        break;\n      case REACT_PROFILER_TYPE:\n        return (\n          (type = createFiberImplClass(12, pendingProps, key, mode | 2)),\n          (type.elementType = REACT_PROFILER_TYPE),\n          (type.lanes = lanes),\n          type\n        );\n      case REACT_SUSPENSE_TYPE:\n        return (\n          (type = createFiberImplClass(13, pendingProps, key, mode)),\n          (type.elementType = REACT_SUSPENSE_TYPE),\n          (type.lanes = lanes),\n          type\n        );\n      case REACT_SUSPENSE_LIST_TYPE:\n        return (\n          (type = createFiberImplClass(19, pendingProps, key, mode)),\n          (type.elementType = REACT_SUSPENSE_LIST_TYPE),\n          (type.lanes = lanes),\n          type\n        );\n      default:\n        if (\"object\" === typeof type && null !== type)\n          switch (type.$$typeof) {\n            case REACT_PROVIDER_TYPE:\n            case REACT_CONTEXT_TYPE:\n              fiberTag = 10;\n              break a;\n            case REACT_CONSUMER_TYPE:\n              fiberTag = 9;\n              break a;\n            case REACT_FORWARD_REF_TYPE:\n              fiberTag = 11;\n              break a;\n            case REACT_MEMO_TYPE:\n              fiberTag = 14;\n              break a;\n            case REACT_LAZY_TYPE:\n              fiberTag = 16;\n              owner = null;\n              break a;\n          }\n        fiberTag = 29;\n        pendingProps = Error(\n          formatProdErrorMessage(130, null === type ? \"null\" : typeof type, \"\")\n        );\n        owner = null;\n    }\n  key = createFiberImplClass(fiberTag, pendingProps, key, mode);\n  key.elementType = type;\n  key.type = owner;\n  key.lanes = lanes;\n  return key;\n}\nfunction createFiberFromFragment(elements, mode, lanes, key) {\n  elements = createFiberImplClass(7, elements, key, mode);\n  elements.lanes = lanes;\n  return elements;\n}\nfunction createFiberFromText(content, mode, lanes) {\n  content = createFiberImplClass(6, content, null, mode);\n  content.lanes = lanes;\n  return content;\n}\nfunction createFiberFromPortal(portal, mode, lanes) {\n  mode = createFiberImplClass(\n    4,\n    null !== portal.children ? portal.children : [],\n    portal.key,\n    mode\n  );\n  mode.lanes = lanes;\n  mode.stateNode = {\n    containerInfo: portal.containerInfo,\n    pendingChildren: null,\n    implementation: portal.implementation\n  };\n  return mode;\n}\nvar forkStack = [],\n  forkStackIndex = 0,\n  treeForkProvider = null,\n  treeForkCount = 0,\n  idStack = [],\n  idStackIndex = 0,\n  treeContextProvider = null,\n  treeContextId = 1,\n  treeContextOverflow = \"\";\nfunction pushTreeFork(workInProgress, totalChildren) {\n  forkStack[forkStackIndex++] = treeForkCount;\n  forkStack[forkStackIndex++] = treeForkProvider;\n  treeForkProvider = workInProgress;\n  treeForkCount = totalChildren;\n}\nfunction pushTreeId(workInProgress, totalChildren, index) {\n  idStack[idStackIndex++] = treeContextId;\n  idStack[idStackIndex++] = treeContextOverflow;\n  idStack[idStackIndex++] = treeContextProvider;\n  treeContextProvider = workInProgress;\n  var baseIdWithLeadingBit = treeContextId;\n  workInProgress = treeContextOverflow;\n  var baseLength = 32 - clz32(baseIdWithLeadingBit) - 1;\n  baseIdWithLeadingBit &= ~(1 << baseLength);\n  index += 1;\n  var length = 32 - clz32(totalChildren) + baseLength;\n  if (30 < length) {\n    var numberOfOverflowBits = baseLength - (baseLength % 5);\n    length = (\n      baseIdWithLeadingBit &\n      ((1 << numberOfOverflowBits) - 1)\n    ).toString(32);\n    baseIdWithLeadingBit >>= numberOfOverflowBits;\n    baseLength -= numberOfOverflowBits;\n    treeContextId =\n      (1 << (32 - clz32(totalChildren) + baseLength)) |\n      (index << baseLength) |\n      baseIdWithLeadingBit;\n    treeContextOverflow = length + workInProgress;\n  } else\n    (treeContextId =\n      (1 << length) | (index << baseLength) | baseIdWithLeadingBit),\n      (treeContextOverflow = workInProgress);\n}\nfunction pushMaterializedTreeId(workInProgress) {\n  null !== workInProgress.return &&\n    (pushTreeFork(workInProgress, 1), pushTreeId(workInProgress, 1, 0));\n}\nfunction popTreeContext(workInProgress) {\n  for (; workInProgress === treeForkProvider; )\n    (treeForkProvider = forkStack[--forkStackIndex]),\n      (forkStack[forkStackIndex] = null),\n      (treeForkCount = forkStack[--forkStackIndex]),\n      (forkStack[forkStackIndex] = null);\n  for (; workInProgress === treeContextProvider; )\n    (treeContextProvider = idStack[--idStackIndex]),\n      (idStack[idStackIndex] = null),\n      (treeContextOverflow = idStack[--idStackIndex]),\n      (idStack[idStackIndex] = null),\n      (treeContextId = idStack[--idStackIndex]),\n      (idStack[idStackIndex] = null);\n}\nvar hydrationParentFiber = null,\n  nextHydratableInstance = null,\n  isHydrating = !1,\n  hydrationErrors = null,\n  rootOrSingletonContext = !1,\n  HydrationMismatchException = Error(formatProdErrorMessage(519));\nfunction throwOnHydrationMismatch(fiber) {\n  var error = Error(formatProdErrorMessage(418, \"\"));\n  queueHydrationError(createCapturedValueAtFiber(error, fiber));\n  throw HydrationMismatchException;\n}\nfunction prepareToHydrateHostInstance(fiber) {\n  var instance = fiber.stateNode,\n    type = fiber.type,\n    props = fiber.memoizedProps;\n  instance[internalInstanceKey] = fiber;\n  instance[internalPropsKey] = props;\n  switch (type) {\n    case \"dialog\":\n      listenToNonDelegatedEvent(\"cancel\", instance);\n      listenToNonDelegatedEvent(\"close\", instance);\n      break;\n    case \"iframe\":\n    case \"object\":\n    case \"embed\":\n      listenToNonDelegatedEvent(\"load\", instance);\n      break;\n    case \"video\":\n    case \"audio\":\n      for (type = 0; type < mediaEventTypes.length; type++)\n        listenToNonDelegatedEvent(mediaEventTypes[type], instance);\n      break;\n    case \"source\":\n      listenToNonDelegatedEvent(\"error\", instance);\n      break;\n    case \"img\":\n    case \"image\":\n    case \"link\":\n      listenToNonDelegatedEvent(\"error\", instance);\n      listenToNonDelegatedEvent(\"load\", instance);\n      break;\n    case \"details\":\n      listenToNonDelegatedEvent(\"toggle\", instance);\n      break;\n    case \"input\":\n      listenToNonDelegatedEvent(\"invalid\", instance);\n      initInput(\n        instance,\n        props.value,\n        props.defaultValue,\n        props.checked,\n        props.defaultChecked,\n        props.type,\n        props.name,\n        !0\n      );\n      track(instance);\n      break;\n    case \"select\":\n      listenToNonDelegatedEvent(\"invalid\", instance);\n      break;\n    case \"textarea\":\n      listenToNonDelegatedEvent(\"invalid\", instance),\n        initTextarea(instance, props.value, props.defaultValue, props.children),\n        track(instance);\n  }\n  type = props.children;\n  (\"string\" !== typeof type &&\n    \"number\" !== typeof type &&\n    \"bigint\" !== typeof type) ||\n  instance.textContent === \"\" + type ||\n  !0 === props.suppressHydrationWarning ||\n  checkForUnmatchedText(instance.textContent, type)\n    ? (null != props.popover &&\n        (listenToNonDelegatedEvent(\"beforetoggle\", instance),\n        listenToNonDelegatedEvent(\"toggle\", instance)),\n      null != props.onScroll && listenToNonDelegatedEvent(\"scroll\", instance),\n      null != props.onScrollEnd &&\n        listenToNonDelegatedEvent(\"scrollend\", instance),\n      null != props.onClick && (instance.onclick = noop$1),\n      (instance = !0))\n    : (instance = !1);\n  instance || throwOnHydrationMismatch(fiber);\n}\nfunction popToNextHostParent(fiber) {\n  for (hydrationParentFiber = fiber.return; hydrationParentFiber; )\n    switch (hydrationParentFiber.tag) {\n      case 5:\n      case 13:\n        rootOrSingletonContext = !1;\n        return;\n      case 27:\n      case 3:\n        rootOrSingletonContext = !0;\n        return;\n      default:\n        hydrationParentFiber = hydrationParentFiber.return;\n    }\n}\nfunction popHydrationState(fiber) {\n  if (fiber !== hydrationParentFiber) return !1;\n  if (!isHydrating) return popToNextHostParent(fiber), (isHydrating = !0), !1;\n  var tag = fiber.tag,\n    JSCompiler_temp;\n  if ((JSCompiler_temp = 3 !== tag && 27 !== tag)) {\n    if ((JSCompiler_temp = 5 === tag))\n      (JSCompiler_temp = fiber.type),\n        (JSCompiler_temp =\n          !(\"form\" !== JSCompiler_temp && \"button\" !== JSCompiler_temp) ||\n          shouldSetTextContent(fiber.type, fiber.memoizedProps));\n    JSCompiler_temp = !JSCompiler_temp;\n  }\n  JSCompiler_temp && nextHydratableInstance && throwOnHydrationMismatch(fiber);\n  popToNextHostParent(fiber);\n  if (13 === tag) {\n    fiber = fiber.memoizedState;\n    fiber = null !== fiber ? fiber.dehydrated : null;\n    if (!fiber) throw Error(formatProdErrorMessage(317));\n    a: {\n      fiber = fiber.nextSibling;\n      for (tag = 0; fiber; ) {\n        if (8 === fiber.nodeType)\n          if (((JSCompiler_temp = fiber.data), \"/$\" === JSCompiler_temp)) {\n            if (0 === tag) {\n              nextHydratableInstance = getNextHydratable(fiber.nextSibling);\n              break a;\n            }\n            tag--;\n          } else\n            (\"$\" !== JSCompiler_temp &&\n              \"$!\" !== JSCompiler_temp &&\n              \"$?\" !== JSCompiler_temp) ||\n              tag++;\n        fiber = fiber.nextSibling;\n      }\n      nextHydratableInstance = null;\n    }\n  } else\n    27 === tag\n      ? ((tag = nextHydratableInstance),\n        isSingletonScope(fiber.type)\n          ? ((fiber = previousHydratableOnEnteringScopedSingleton),\n            (previousHydratableOnEnteringScopedSingleton = null),\n            (nextHydratableInstance = fiber))\n          : (nextHydratableInstance = tag))\n      : (nextHydratableInstance = hydrationParentFiber\n          ? getNextHydratable(fiber.stateNode.nextSibling)\n          : null);\n  return !0;\n}\nfunction resetHydrationState() {\n  nextHydratableInstance = hydrationParentFiber = null;\n  isHydrating = !1;\n}\nfunction upgradeHydrationErrorsToRecoverable() {\n  var queuedErrors = hydrationErrors;\n  null !== queuedErrors &&\n    (null === workInProgressRootRecoverableErrors\n      ? (workInProgressRootRecoverableErrors = queuedErrors)\n      : workInProgressRootRecoverableErrors.push.apply(\n          workInProgressRootRecoverableErrors,\n          queuedErrors\n        ),\n    (hydrationErrors = null));\n  return queuedErrors;\n}\nfunction queueHydrationError(error) {\n  null === hydrationErrors\n    ? (hydrationErrors = [error])\n    : hydrationErrors.push(error);\n}\nvar valueCursor = createCursor(null),\n  currentlyRenderingFiber$1 = null,\n  lastContextDependency = null;\nfunction pushProvider(providerFiber, context, nextValue) {\n  push(valueCursor, context._currentValue);\n  context._currentValue = nextValue;\n}\nfunction popProvider(context) {\n  context._currentValue = valueCursor.current;\n  pop(valueCursor);\n}\nfunction scheduleContextWorkOnParentPath(parent, renderLanes, propagationRoot) {\n  for (; null !== parent; ) {\n    var alternate = parent.alternate;\n    (parent.childLanes & renderLanes) !== renderLanes\n      ? ((parent.childLanes |= renderLanes),\n        null !== alternate && (alternate.childLanes |= renderLanes))\n      : null !== alternate &&\n        (alternate.childLanes & renderLanes) !== renderLanes &&\n        (alternate.childLanes |= renderLanes);\n    if (parent === propagationRoot) break;\n    parent = parent.return;\n  }\n}\nfunction propagateContextChanges(\n  workInProgress,\n  contexts,\n  renderLanes,\n  forcePropagateEntireTree\n) {\n  var fiber = workInProgress.child;\n  null !== fiber && (fiber.return = workInProgress);\n  for (; null !== fiber; ) {\n    var list = fiber.dependencies;\n    if (null !== list) {\n      var nextFiber = fiber.child;\n      list = list.firstContext;\n      a: for (; null !== list; ) {\n        var dependency = list;\n        list = fiber;\n        for (var i = 0; i < contexts.length; i++)\n          if (dependency.context === contexts[i]) {\n            list.lanes |= renderLanes;\n            dependency = list.alternate;\n            null !== dependency && (dependency.lanes |= renderLanes);\n            scheduleContextWorkOnParentPath(\n              list.return,\n              renderLanes,\n              workInProgress\n            );\n            forcePropagateEntireTree || (nextFiber = null);\n            break a;\n          }\n        list = dependency.next;\n      }\n    } else if (18 === fiber.tag) {\n      nextFiber = fiber.return;\n      if (null === nextFiber) throw Error(formatProdErrorMessage(341));\n      nextFiber.lanes |= renderLanes;\n      list = nextFiber.alternate;\n      null !== list && (list.lanes |= renderLanes);\n      scheduleContextWorkOnParentPath(nextFiber, renderLanes, workInProgress);\n      nextFiber = null;\n    } else nextFiber = fiber.child;\n    if (null !== nextFiber) nextFiber.return = fiber;\n    else\n      for (nextFiber = fiber; null !== nextFiber; ) {\n        if (nextFiber === workInProgress) {\n          nextFiber = null;\n          break;\n        }\n        fiber = nextFiber.sibling;\n        if (null !== fiber) {\n          fiber.return = nextFiber.return;\n          nextFiber = fiber;\n          break;\n        }\n        nextFiber = nextFiber.return;\n      }\n    fiber = nextFiber;\n  }\n}\nfunction propagateParentContextChanges(\n  current,\n  workInProgress,\n  renderLanes,\n  forcePropagateEntireTree\n) {\n  current = null;\n  for (\n    var parent = workInProgress, isInsidePropagationBailout = !1;\n    null !== parent;\n\n  ) {\n    if (!isInsidePropagationBailout)\n      if (0 !== (parent.flags & 524288)) isInsidePropagationBailout = !0;\n      else if (0 !== (parent.flags & 262144)) break;\n    if (10 === parent.tag) {\n      var currentParent = parent.alternate;\n      if (null === currentParent) throw Error(formatProdErrorMessage(387));\n      currentParent = currentParent.memoizedProps;\n      if (null !== currentParent) {\n        var context = parent.type;\n        objectIs(parent.pendingProps.value, currentParent.value) ||\n          (null !== current ? current.push(context) : (current = [context]));\n      }\n    } else if (parent === hostTransitionProviderCursor.current) {\n      currentParent = parent.alternate;\n      if (null === currentParent) throw Error(formatProdErrorMessage(387));\n      currentParent.memoizedState.memoizedState !==\n        parent.memoizedState.memoizedState &&\n        (null !== current\n          ? current.push(HostTransitionContext)\n          : (current = [HostTransitionContext]));\n    }\n    parent = parent.return;\n  }\n  null !== current &&\n    propagateContextChanges(\n      workInProgress,\n      current,\n      renderLanes,\n      forcePropagateEntireTree\n    );\n  workInProgress.flags |= 262144;\n}\nfunction checkIfContextChanged(currentDependencies) {\n  for (\n    currentDependencies = currentDependencies.firstContext;\n    null !== currentDependencies;\n\n  ) {\n    if (\n      !objectIs(\n        currentDependencies.context._currentValue,\n        currentDependencies.memoizedValue\n      )\n    )\n      return !0;\n    currentDependencies = currentDependencies.next;\n  }\n  return !1;\n}\nfunction prepareToReadContext(workInProgress) {\n  currentlyRenderingFiber$1 = workInProgress;\n  lastContextDependency = null;\n  workInProgress = workInProgress.dependencies;\n  null !== workInProgress && (workInProgress.firstContext = null);\n}\nfunction readContext(context) {\n  return readContextForConsumer(currentlyRenderingFiber$1, context);\n}\nfunction readContextDuringReconciliation(consumer, context) {\n  null === currentlyRenderingFiber$1 && prepareToReadContext(consumer);\n  return readContextForConsumer(consumer, context);\n}\nfunction readContextForConsumer(consumer, context) {\n  var value = context._currentValue;\n  context = { context: context, memoizedValue: value, next: null };\n  if (null === lastContextDependency) {\n    if (null === consumer) throw Error(formatProdErrorMessage(308));\n    lastContextDependency = context;\n    consumer.dependencies = { lanes: 0, firstContext: context };\n    consumer.flags |= 524288;\n  } else lastContextDependency = lastContextDependency.next = context;\n  return value;\n}\nvar AbortControllerLocal =\n    \"undefined\" !== typeof AbortController\n      ? AbortController\n      : function () {\n          var listeners = [],\n            signal = (this.signal = {\n              aborted: !1,\n              addEventListener: function (type, listener) {\n                listeners.push(listener);\n              }\n            });\n          this.abort = function () {\n            signal.aborted = !0;\n            listeners.forEach(function (listener) {\n              return listener();\n            });\n          };\n        },\n  scheduleCallback$2 = Scheduler.unstable_scheduleCallback,\n  NormalPriority = Scheduler.unstable_NormalPriority,\n  CacheContext = {\n    $$typeof: REACT_CONTEXT_TYPE,\n    Consumer: null,\n    Provider: null,\n    _currentValue: null,\n    _currentValue2: null,\n    _threadCount: 0\n  };\nfunction createCache() {\n  return {\n    controller: new AbortControllerLocal(),\n    data: new Map(),\n    refCount: 0\n  };\n}\nfunction releaseCache(cache) {\n  cache.refCount--;\n  0 === cache.refCount &&\n    scheduleCallback$2(NormalPriority, function () {\n      cache.controller.abort();\n    });\n}\nvar currentEntangledListeners = null,\n  currentEntangledPendingCount = 0,\n  currentEntangledLane = 0,\n  currentEntangledActionThenable = null;\nfunction entangleAsyncAction(transition, thenable) {\n  if (null === currentEntangledListeners) {\n    var entangledListeners = (currentEntangledListeners = []);\n    currentEntangledPendingCount = 0;\n    currentEntangledLane = requestTransitionLane();\n    currentEntangledActionThenable = {\n      status: \"pending\",\n      value: void 0,\n      then: function (resolve) {\n        entangledListeners.push(resolve);\n      }\n    };\n  }\n  currentEntangledPendingCount++;\n  thenable.then(pingEngtangledActionScope, pingEngtangledActionScope);\n  return thenable;\n}\nfunction pingEngtangledActionScope() {\n  if (\n    0 === --currentEntangledPendingCount &&\n    null !== currentEntangledListeners\n  ) {\n    null !== currentEntangledActionThenable &&\n      (currentEntangledActionThenable.status = \"fulfilled\");\n    var listeners = currentEntangledListeners;\n    currentEntangledListeners = null;\n    currentEntangledLane = 0;\n    currentEntangledActionThenable = null;\n    for (var i = 0; i < listeners.length; i++) (0, listeners[i])();\n  }\n}\nfunction chainThenableValue(thenable, result) {\n  var listeners = [],\n    thenableWithOverride = {\n      status: \"pending\",\n      value: null,\n      reason: null,\n      then: function (resolve) {\n        listeners.push(resolve);\n      }\n    };\n  thenable.then(\n    function () {\n      thenableWithOverride.status = \"fulfilled\";\n      thenableWithOverride.value = result;\n      for (var i = 0; i < listeners.length; i++) (0, listeners[i])(result);\n    },\n    function (error) {\n      thenableWithOverride.status = \"rejected\";\n      thenableWithOverride.reason = error;\n      for (error = 0; error < listeners.length; error++)\n        (0, listeners[error])(void 0);\n    }\n  );\n  return thenableWithOverride;\n}\nvar prevOnStartTransitionFinish = ReactSharedInternals.S;\nReactSharedInternals.S = function (transition, returnValue) {\n  \"object\" === typeof returnValue &&\n    null !== returnValue &&\n    \"function\" === typeof returnValue.then &&\n    entangleAsyncAction(transition, returnValue);\n  null !== prevOnStartTransitionFinish &&\n    prevOnStartTransitionFinish(transition, returnValue);\n};\nvar resumedCache = createCursor(null);\nfunction peekCacheFromPool() {\n  var cacheResumedFromPreviousRender = resumedCache.current;\n  return null !== cacheResumedFromPreviousRender\n    ? cacheResumedFromPreviousRender\n    : workInProgressRoot.pooledCache;\n}\nfunction pushTransition(offscreenWorkInProgress, prevCachePool) {\n  null === prevCachePool\n    ? push(resumedCache, resumedCache.current)\n    : push(resumedCache, prevCachePool.pool);\n}\nfunction getSuspendedCache() {\n  var cacheFromPool = peekCacheFromPool();\n  return null === cacheFromPool\n    ? null\n    : { parent: CacheContext._currentValue, pool: cacheFromPool };\n}\nvar SuspenseException = Error(formatProdErrorMessage(460)),\n  SuspenseyCommitException = Error(formatProdErrorMessage(474)),\n  SuspenseActionException = Error(formatProdErrorMessage(542)),\n  noopSuspenseyCommitThenable = { then: function () {} };\nfunction isThenableResolved(thenable) {\n  thenable = thenable.status;\n  return \"fulfilled\" === thenable || \"rejected\" === thenable;\n}\nfunction noop$3() {}\nfunction trackUsedThenable(thenableState, thenable, index) {\n  index = thenableState[index];\n  void 0 === index\n    ? thenableState.push(thenable)\n    : index !== thenable && (thenable.then(noop$3, noop$3), (thenable = index));\n  switch (thenable.status) {\n    case \"fulfilled\":\n      return thenable.value;\n    case \"rejected\":\n      throw (\n        ((thenableState = thenable.reason),\n        checkIfUseWrappedInAsyncCatch(thenableState),\n        thenableState)\n      );\n    default:\n      if (\"string\" === typeof thenable.status) thenable.then(noop$3, noop$3);\n      else {\n        thenableState = workInProgressRoot;\n        if (null !== thenableState && 100 < thenableState.shellSuspendCounter)\n          throw Error(formatProdErrorMessage(482));\n        thenableState = thenable;\n        thenableState.status = \"pending\";\n        thenableState.then(\n          function (fulfilledValue) {\n            if (\"pending\" === thenable.status) {\n              var fulfilledThenable = thenable;\n              fulfilledThenable.status = \"fulfilled\";\n              fulfilledThenable.value = fulfilledValue;\n            }\n          },\n          function (error) {\n            if (\"pending\" === thenable.status) {\n              var rejectedThenable = thenable;\n              rejectedThenable.status = \"rejected\";\n              rejectedThenable.reason = error;\n            }\n          }\n        );\n      }\n      switch (thenable.status) {\n        case \"fulfilled\":\n          return thenable.value;\n        case \"rejected\":\n          throw (\n            ((thenableState = thenable.reason),\n            checkIfUseWrappedInAsyncCatch(thenableState),\n            thenableState)\n          );\n      }\n      suspendedThenable = thenable;\n      throw SuspenseException;\n  }\n}\nvar suspendedThenable = null;\nfunction getSuspendedThenable() {\n  if (null === suspendedThenable) throw Error(formatProdErrorMessage(459));\n  var thenable = suspendedThenable;\n  suspendedThenable = null;\n  return thenable;\n}\nfunction checkIfUseWrappedInAsyncCatch(rejectedReason) {\n  if (\n    rejectedReason === SuspenseException ||\n    rejectedReason === SuspenseActionException\n  )\n    throw Error(formatProdErrorMessage(483));\n}\nvar hasForceUpdate = !1;\nfunction initializeUpdateQueue(fiber) {\n  fiber.updateQueue = {\n    baseState: fiber.memoizedState,\n    firstBaseUpdate: null,\n    lastBaseUpdate: null,\n    shared: { pending: null, lanes: 0, hiddenCallbacks: null },\n    callbacks: null\n  };\n}\nfunction cloneUpdateQueue(current, workInProgress) {\n  current = current.updateQueue;\n  workInProgress.updateQueue === current &&\n    (workInProgress.updateQueue = {\n      baseState: current.baseState,\n      firstBaseUpdate: current.firstBaseUpdate,\n      lastBaseUpdate: current.lastBaseUpdate,\n      shared: current.shared,\n      callbacks: null\n    });\n}\nfunction createUpdate(lane) {\n  return { lane: lane, tag: 0, payload: null, callback: null, next: null };\n}\nfunction enqueueUpdate(fiber, update, lane) {\n  var updateQueue = fiber.updateQueue;\n  if (null === updateQueue) return null;\n  updateQueue = updateQueue.shared;\n  if (0 !== (executionContext & 2)) {\n    var pending = updateQueue.pending;\n    null === pending\n      ? (update.next = update)\n      : ((update.next = pending.next), (pending.next = update));\n    updateQueue.pending = update;\n    update = getRootForUpdatedFiber(fiber);\n    markUpdateLaneFromFiberToRoot(fiber, null, lane);\n    return update;\n  }\n  enqueueUpdate$1(fiber, updateQueue, update, lane);\n  return getRootForUpdatedFiber(fiber);\n}\nfunction entangleTransitions(root, fiber, lane) {\n  fiber = fiber.updateQueue;\n  if (null !== fiber && ((fiber = fiber.shared), 0 !== (lane & 4194048))) {\n    var queueLanes = fiber.lanes;\n    queueLanes &= root.pendingLanes;\n    lane |= queueLanes;\n    fiber.lanes = lane;\n    markRootEntangled(root, lane);\n  }\n}\nfunction enqueueCapturedUpdate(workInProgress, capturedUpdate) {\n  var queue = workInProgress.updateQueue,\n    current = workInProgress.alternate;\n  if (\n    null !== current &&\n    ((current = current.updateQueue), queue === current)\n  ) {\n    var newFirst = null,\n      newLast = null;\n    queue = queue.firstBaseUpdate;\n    if (null !== queue) {\n      do {\n        var clone = {\n          lane: queue.lane,\n          tag: queue.tag,\n          payload: queue.payload,\n          callback: null,\n          next: null\n        };\n        null === newLast\n          ? (newFirst = newLast = clone)\n          : (newLast = newLast.next = clone);\n        queue = queue.next;\n      } while (null !== queue);\n      null === newLast\n        ? (newFirst = newLast = capturedUpdate)\n        : (newLast = newLast.next = capturedUpdate);\n    } else newFirst = newLast = capturedUpdate;\n    queue = {\n      baseState: current.baseState,\n      firstBaseUpdate: newFirst,\n      lastBaseUpdate: newLast,\n      shared: current.shared,\n      callbacks: current.callbacks\n    };\n    workInProgress.updateQueue = queue;\n    return;\n  }\n  workInProgress = queue.lastBaseUpdate;\n  null === workInProgress\n    ? (queue.firstBaseUpdate = capturedUpdate)\n    : (workInProgress.next = capturedUpdate);\n  queue.lastBaseUpdate = capturedUpdate;\n}\nvar didReadFromEntangledAsyncAction = !1;\nfunction suspendIfUpdateReadFromEntangledAsyncAction() {\n  if (didReadFromEntangledAsyncAction) {\n    var entangledActionThenable = currentEntangledActionThenable;\n    if (null !== entangledActionThenable) throw entangledActionThenable;\n  }\n}\nfunction processUpdateQueue(\n  workInProgress$jscomp$0,\n  props,\n  instance$jscomp$0,\n  renderLanes\n) {\n  didReadFromEntangledAsyncAction = !1;\n  var queue = workInProgress$jscomp$0.updateQueue;\n  hasForceUpdate = !1;\n  var firstBaseUpdate = queue.firstBaseUpdate,\n    lastBaseUpdate = queue.lastBaseUpdate,\n    pendingQueue = queue.shared.pending;\n  if (null !== pendingQueue) {\n    queue.shared.pending = null;\n    var lastPendingUpdate = pendingQueue,\n      firstPendingUpdate = lastPendingUpdate.next;\n    lastPendingUpdate.next = null;\n    null === lastBaseUpdate\n      ? (firstBaseUpdate = firstPendingUpdate)\n      : (lastBaseUpdate.next = firstPendingUpdate);\n    lastBaseUpdate = lastPendingUpdate;\n    var current = workInProgress$jscomp$0.alternate;\n    null !== current &&\n      ((current = current.updateQueue),\n      (pendingQueue = current.lastBaseUpdate),\n      pendingQueue !== lastBaseUpdate &&\n        (null === pendingQueue\n          ? (current.firstBaseUpdate = firstPendingUpdate)\n          : (pendingQueue.next = firstPendingUpdate),\n        (current.lastBaseUpdate = lastPendingUpdate)));\n  }\n  if (null !== firstBaseUpdate) {\n    var newState = queue.baseState;\n    lastBaseUpdate = 0;\n    current = firstPendingUpdate = lastPendingUpdate = null;\n    pendingQueue = firstBaseUpdate;\n    do {\n      var updateLane = pendingQueue.lane & -536870913,\n        isHiddenUpdate = updateLane !== pendingQueue.lane;\n      if (\n        isHiddenUpdate\n          ? (workInProgressRootRenderLanes & updateLane) === updateLane\n          : (renderLanes & updateLane) === updateLane\n      ) {\n        0 !== updateLane &&\n          updateLane === currentEntangledLane &&\n          (didReadFromEntangledAsyncAction = !0);\n        null !== current &&\n          (current = current.next =\n            {\n              lane: 0,\n              tag: pendingQueue.tag,\n              payload: pendingQueue.payload,\n              callback: null,\n              next: null\n            });\n        a: {\n          var workInProgress = workInProgress$jscomp$0,\n            update = pendingQueue;\n          updateLane = props;\n          var instance = instance$jscomp$0;\n          switch (update.tag) {\n            case 1:\n              workInProgress = update.payload;\n              if (\"function\" === typeof workInProgress) {\n                newState = workInProgress.call(instance, newState, updateLane);\n                break a;\n              }\n              newState = workInProgress;\n              break a;\n            case 3:\n              workInProgress.flags = (workInProgress.flags & -65537) | 128;\n            case 0:\n              workInProgress = update.payload;\n              updateLane =\n                \"function\" === typeof workInProgress\n                  ? workInProgress.call(instance, newState, updateLane)\n                  : workInProgress;\n              if (null === updateLane || void 0 === updateLane) break a;\n              newState = assign({}, newState, updateLane);\n              break a;\n            case 2:\n              hasForceUpdate = !0;\n          }\n        }\n        updateLane = pendingQueue.callback;\n        null !== updateLane &&\n          ((workInProgress$jscomp$0.flags |= 64),\n          isHiddenUpdate && (workInProgress$jscomp$0.flags |= 8192),\n          (isHiddenUpdate = queue.callbacks),\n          null === isHiddenUpdate\n            ? (queue.callbacks = [updateLane])\n            : isHiddenUpdate.push(updateLane));\n      } else\n        (isHiddenUpdate = {\n          lane: updateLane,\n          tag: pendingQueue.tag,\n          payload: pendingQueue.payload,\n          callback: pendingQueue.callback,\n          next: null\n        }),\n          null === current\n            ? ((firstPendingUpdate = current = isHiddenUpdate),\n              (lastPendingUpdate = newState))\n            : (current = current.next = isHiddenUpdate),\n          (lastBaseUpdate |= updateLane);\n      pendingQueue = pendingQueue.next;\n      if (null === pendingQueue)\n        if (((pendingQueue = queue.shared.pending), null === pendingQueue))\n          break;\n        else\n          (isHiddenUpdate = pendingQueue),\n            (pendingQueue = isHiddenUpdate.next),\n            (isHiddenUpdate.next = null),\n            (queue.lastBaseUpdate = isHiddenUpdate),\n            (queue.shared.pending = null);\n    } while (1);\n    null === current && (lastPendingUpdate = newState);\n    queue.baseState = lastPendingUpdate;\n    queue.firstBaseUpdate = firstPendingUpdate;\n    queue.lastBaseUpdate = current;\n    null === firstBaseUpdate && (queue.shared.lanes = 0);\n    workInProgressRootSkippedLanes |= lastBaseUpdate;\n    workInProgress$jscomp$0.lanes = lastBaseUpdate;\n    workInProgress$jscomp$0.memoizedState = newState;\n  }\n}\nfunction callCallback(callback, context) {\n  if (\"function\" !== typeof callback)\n    throw Error(formatProdErrorMessage(191, callback));\n  callback.call(context);\n}\nfunction commitCallbacks(updateQueue, context) {\n  var callbacks = updateQueue.callbacks;\n  if (null !== callbacks)\n    for (\n      updateQueue.callbacks = null, updateQueue = 0;\n      updateQueue < callbacks.length;\n      updateQueue++\n    )\n      callCallback(callbacks[updateQueue], context);\n}\nvar currentTreeHiddenStackCursor = createCursor(null),\n  prevEntangledRenderLanesCursor = createCursor(0);\nfunction pushHiddenContext(fiber, context) {\n  fiber = entangledRenderLanes;\n  push(prevEntangledRenderLanesCursor, fiber);\n  push(currentTreeHiddenStackCursor, context);\n  entangledRenderLanes = fiber | context.baseLanes;\n}\nfunction reuseHiddenContextOnStack() {\n  push(prevEntangledRenderLanesCursor, entangledRenderLanes);\n  push(currentTreeHiddenStackCursor, currentTreeHiddenStackCursor.current);\n}\nfunction popHiddenContext() {\n  entangledRenderLanes = prevEntangledRenderLanesCursor.current;\n  pop(currentTreeHiddenStackCursor);\n  pop(prevEntangledRenderLanesCursor);\n}\nvar renderLanes = 0,\n  currentlyRenderingFiber = null,\n  currentHook = null,\n  workInProgressHook = null,\n  didScheduleRenderPhaseUpdate = !1,\n  didScheduleRenderPhaseUpdateDuringThisPass = !1,\n  shouldDoubleInvokeUserFnsInHooksDEV = !1,\n  localIdCounter = 0,\n  thenableIndexCounter$1 = 0,\n  thenableState$1 = null,\n  globalClientIdCounter = 0;\nfunction throwInvalidHookError() {\n  throw Error(formatProdErrorMessage(321));\n}\nfunction areHookInputsEqual(nextDeps, prevDeps) {\n  if (null === prevDeps) return !1;\n  for (var i = 0; i < prevDeps.length && i < nextDeps.length; i++)\n    if (!objectIs(nextDeps[i], prevDeps[i])) return !1;\n  return !0;\n}\nfunction renderWithHooks(\n  current,\n  workInProgress,\n  Component,\n  props,\n  secondArg,\n  nextRenderLanes\n) {\n  renderLanes = nextRenderLanes;\n  currentlyRenderingFiber = workInProgress;\n  workInProgress.memoizedState = null;\n  workInProgress.updateQueue = null;\n  workInProgress.lanes = 0;\n  ReactSharedInternals.H =\n    null === current || null === current.memoizedState\n      ? HooksDispatcherOnMount\n      : HooksDispatcherOnUpdate;\n  shouldDoubleInvokeUserFnsInHooksDEV = !1;\n  nextRenderLanes = Component(props, secondArg);\n  shouldDoubleInvokeUserFnsInHooksDEV = !1;\n  didScheduleRenderPhaseUpdateDuringThisPass &&\n    (nextRenderLanes = renderWithHooksAgain(\n      workInProgress,\n      Component,\n      props,\n      secondArg\n    ));\n  finishRenderingHooks(current);\n  return nextRenderLanes;\n}\nfunction finishRenderingHooks(current) {\n  ReactSharedInternals.H = ContextOnlyDispatcher;\n  var didRenderTooFewHooks = null !== currentHook && null !== currentHook.next;\n  renderLanes = 0;\n  workInProgressHook = currentHook = currentlyRenderingFiber = null;\n  didScheduleRenderPhaseUpdate = !1;\n  thenableIndexCounter$1 = 0;\n  thenableState$1 = null;\n  if (didRenderTooFewHooks) throw Error(formatProdErrorMessage(300));\n  null === current ||\n    didReceiveUpdate ||\n    ((current = current.dependencies),\n    null !== current &&\n      checkIfContextChanged(current) &&\n      (didReceiveUpdate = !0));\n}\nfunction renderWithHooksAgain(workInProgress, Component, props, secondArg) {\n  currentlyRenderingFiber = workInProgress;\n  var numberOfReRenders = 0;\n  do {\n    didScheduleRenderPhaseUpdateDuringThisPass && (thenableState$1 = null);\n    thenableIndexCounter$1 = 0;\n    didScheduleRenderPhaseUpdateDuringThisPass = !1;\n    if (25 <= numberOfReRenders) throw Error(formatProdErrorMessage(301));\n    numberOfReRenders += 1;\n    workInProgressHook = currentHook = null;\n    if (null != workInProgress.updateQueue) {\n      var children = workInProgress.updateQueue;\n      children.lastEffect = null;\n      children.events = null;\n      children.stores = null;\n      null != children.memoCache && (children.memoCache.index = 0);\n    }\n    ReactSharedInternals.H = HooksDispatcherOnRerender;\n    children = Component(props, secondArg);\n  } while (didScheduleRenderPhaseUpdateDuringThisPass);\n  return children;\n}\nfunction TransitionAwareHostComponent() {\n  var dispatcher = ReactSharedInternals.H,\n    maybeThenable = dispatcher.useState()[0];\n  maybeThenable =\n    \"function\" === typeof maybeThenable.then\n      ? useThenable(maybeThenable)\n      : maybeThenable;\n  dispatcher = dispatcher.useState()[0];\n  (null !== currentHook ? currentHook.memoizedState : null) !== dispatcher &&\n    (currentlyRenderingFiber.flags |= 1024);\n  return maybeThenable;\n}\nfunction checkDidRenderIdHook() {\n  var didRenderIdHook = 0 !== localIdCounter;\n  localIdCounter = 0;\n  return didRenderIdHook;\n}\nfunction bailoutHooks(current, workInProgress, lanes) {\n  workInProgress.updateQueue = current.updateQueue;\n  workInProgress.flags &= -2053;\n  current.lanes &= ~lanes;\n}\nfunction resetHooksOnUnwind(workInProgress) {\n  if (didScheduleRenderPhaseUpdate) {\n    for (\n      workInProgress = workInProgress.memoizedState;\n      null !== workInProgress;\n\n    ) {\n      var queue = workInProgress.queue;\n      null !== queue && (queue.pending = null);\n      workInProgress = workInProgress.next;\n    }\n    didScheduleRenderPhaseUpdate = !1;\n  }\n  renderLanes = 0;\n  workInProgressHook = currentHook = currentlyRenderingFiber = null;\n  didScheduleRenderPhaseUpdateDuringThisPass = !1;\n  thenableIndexCounter$1 = localIdCounter = 0;\n  thenableState$1 = null;\n}\nfunction mountWorkInProgressHook() {\n  var hook = {\n    memoizedState: null,\n    baseState: null,\n    baseQueue: null,\n    queue: null,\n    next: null\n  };\n  null === workInProgressHook\n    ? (currentlyRenderingFiber.memoizedState = workInProgressHook = hook)\n    : (workInProgressHook = workInProgressHook.next = hook);\n  return workInProgressHook;\n}\nfunction updateWorkInProgressHook() {\n  if (null === currentHook) {\n    var nextCurrentHook = currentlyRenderingFiber.alternate;\n    nextCurrentHook =\n      null !== nextCurrentHook ? nextCurrentHook.memoizedState : null;\n  } else nextCurrentHook = currentHook.next;\n  var nextWorkInProgressHook =\n    null === workInProgressHook\n      ? currentlyRenderingFiber.memoizedState\n      : workInProgressHook.next;\n  if (null !== nextWorkInProgressHook)\n    (workInProgressHook = nextWorkInProgressHook),\n      (currentHook = nextCurrentHook);\n  else {\n    if (null === nextCurrentHook) {\n      if (null === currentlyRenderingFiber.alternate)\n        throw Error(formatProdErrorMessage(467));\n      throw Error(formatProdErrorMessage(310));\n    }\n    currentHook = nextCurrentHook;\n    nextCurrentHook = {\n      memoizedState: currentHook.memoizedState,\n      baseState: currentHook.baseState,\n      baseQueue: currentHook.baseQueue,\n      queue: currentHook.queue,\n      next: null\n    };\n    null === workInProgressHook\n      ? (currentlyRenderingFiber.memoizedState = workInProgressHook =\n          nextCurrentHook)\n      : (workInProgressHook = workInProgressHook.next = nextCurrentHook);\n  }\n  return workInProgressHook;\n}\nfunction createFunctionComponentUpdateQueue() {\n  return { lastEffect: null, events: null, stores: null, memoCache: null };\n}\nfunction useThenable(thenable) {\n  var index = thenableIndexCounter$1;\n  thenableIndexCounter$1 += 1;\n  null === thenableState$1 && (thenableState$1 = []);\n  thenable = trackUsedThenable(thenableState$1, thenable, index);\n  index = currentlyRenderingFiber;\n  null ===\n    (null === workInProgressHook\n      ? index.memoizedState\n      : workInProgressHook.next) &&\n    ((index = index.alternate),\n    (ReactSharedInternals.H =\n      null === index || null === index.memoizedState\n        ? HooksDispatcherOnMount\n        : HooksDispatcherOnUpdate));\n  return thenable;\n}\nfunction use(usable) {\n  if (null !== usable && \"object\" === typeof usable) {\n    if (\"function\" === typeof usable.then) return useThenable(usable);\n    if (usable.$$typeof === REACT_CONTEXT_TYPE) return readContext(usable);\n  }\n  throw Error(formatProdErrorMessage(438, String(usable)));\n}\nfunction useMemoCache(size) {\n  var memoCache = null,\n    updateQueue = currentlyRenderingFiber.updateQueue;\n  null !== updateQueue && (memoCache = updateQueue.memoCache);\n  if (null == memoCache) {\n    var current = currentlyRenderingFiber.alternate;\n    null !== current &&\n      ((current = current.updateQueue),\n      null !== current &&\n        ((current = current.memoCache),\n        null != current &&\n          (memoCache = {\n            data: current.data.map(function (array) {\n              return array.slice();\n            }),\n            index: 0\n          })));\n  }\n  null == memoCache && (memoCache = { data: [], index: 0 });\n  null === updateQueue &&\n    ((updateQueue = createFunctionComponentUpdateQueue()),\n    (currentlyRenderingFiber.updateQueue = updateQueue));\n  updateQueue.memoCache = memoCache;\n  updateQueue = memoCache.data[memoCache.index];\n  if (void 0 === updateQueue)\n    for (\n      updateQueue = memoCache.data[memoCache.index] = Array(size), current = 0;\n      current < size;\n      current++\n    )\n      updateQueue[current] = REACT_MEMO_CACHE_SENTINEL;\n  memoCache.index++;\n  return updateQueue;\n}\nfunction basicStateReducer(state, action) {\n  return \"function\" === typeof action ? action(state) : action;\n}\nfunction updateReducer(reducer) {\n  var hook = updateWorkInProgressHook();\n  return updateReducerImpl(hook, currentHook, reducer);\n}\nfunction updateReducerImpl(hook, current, reducer) {\n  var queue = hook.queue;\n  if (null === queue) throw Error(formatProdErrorMessage(311));\n  queue.lastRenderedReducer = reducer;\n  var baseQueue = hook.baseQueue,\n    pendingQueue = queue.pending;\n  if (null !== pendingQueue) {\n    if (null !== baseQueue) {\n      var baseFirst = baseQueue.next;\n      baseQueue.next = pendingQueue.next;\n      pendingQueue.next = baseFirst;\n    }\n    current.baseQueue = baseQueue = pendingQueue;\n    queue.pending = null;\n  }\n  pendingQueue = hook.baseState;\n  if (null === baseQueue) hook.memoizedState = pendingQueue;\n  else {\n    current = baseQueue.next;\n    var newBaseQueueFirst = (baseFirst = null),\n      newBaseQueueLast = null,\n      update = current,\n      didReadFromEntangledAsyncAction$32 = !1;\n    do {\n      var updateLane = update.lane & -536870913;\n      if (\n        updateLane !== update.lane\n          ? (workInProgressRootRenderLanes & updateLane) === updateLane\n          : (renderLanes & updateLane) === updateLane\n      ) {\n        var revertLane = update.revertLane;\n        if (0 === revertLane)\n          null !== newBaseQueueLast &&\n            (newBaseQueueLast = newBaseQueueLast.next =\n              {\n                lane: 0,\n                revertLane: 0,\n                action: update.action,\n                hasEagerState: update.hasEagerState,\n                eagerState: update.eagerState,\n                next: null\n              }),\n            updateLane === currentEntangledLane &&\n              (didReadFromEntangledAsyncAction$32 = !0);\n        else if ((renderLanes & revertLane) === revertLane) {\n          update = update.next;\n          revertLane === currentEntangledLane &&\n            (didReadFromEntangledAsyncAction$32 = !0);\n          continue;\n        } else\n          (updateLane = {\n            lane: 0,\n            revertLane: update.revertLane,\n            action: update.action,\n            hasEagerState: update.hasEagerState,\n            eagerState: update.eagerState,\n            next: null\n          }),\n            null === newBaseQueueLast\n              ? ((newBaseQueueFirst = newBaseQueueLast = updateLane),\n                (baseFirst = pendingQueue))\n              : (newBaseQueueLast = newBaseQueueLast.next = updateLane),\n            (currentlyRenderingFiber.lanes |= revertLane),\n            (workInProgressRootSkippedLanes |= revertLane);\n        updateLane = update.action;\n        shouldDoubleInvokeUserFnsInHooksDEV &&\n          reducer(pendingQueue, updateLane);\n        pendingQueue = update.hasEagerState\n          ? update.eagerState\n          : reducer(pendingQueue, updateLane);\n      } else\n        (revertLane = {\n          lane: updateLane,\n          revertLane: update.revertLane,\n          action: update.action,\n          hasEagerState: update.hasEagerState,\n          eagerState: update.eagerState,\n          next: null\n        }),\n          null === newBaseQueueLast\n            ? ((newBaseQueueFirst = newBaseQueueLast = revertLane),\n              (baseFirst = pendingQueue))\n            : (newBaseQueueLast = newBaseQueueLast.next = revertLane),\n          (currentlyRenderingFiber.lanes |= updateLane),\n          (workInProgressRootSkippedLanes |= updateLane);\n      update = update.next;\n    } while (null !== update && update !== current);\n    null === newBaseQueueLast\n      ? (baseFirst = pendingQueue)\n      : (newBaseQueueLast.next = newBaseQueueFirst);\n    if (\n      !objectIs(pendingQueue, hook.memoizedState) &&\n      ((didReceiveUpdate = !0),\n      didReadFromEntangledAsyncAction$32 &&\n        ((reducer = currentEntangledActionThenable), null !== reducer))\n    )\n      throw reducer;\n    hook.memoizedState = pendingQueue;\n    hook.baseState = baseFirst;\n    hook.baseQueue = newBaseQueueLast;\n    queue.lastRenderedState = pendingQueue;\n  }\n  null === baseQueue && (queue.lanes = 0);\n  return [hook.memoizedState, queue.dispatch];\n}\nfunction rerenderReducer(reducer) {\n  var hook = updateWorkInProgressHook(),\n    queue = hook.queue;\n  if (null === queue) throw Error(formatProdErrorMessage(311));\n  queue.lastRenderedReducer = reducer;\n  var dispatch = queue.dispatch,\n    lastRenderPhaseUpdate = queue.pending,\n    newState = hook.memoizedState;\n  if (null !== lastRenderPhaseUpdate) {\n    queue.pending = null;\n    var update = (lastRenderPhaseUpdate = lastRenderPhaseUpdate.next);\n    do (newState = reducer(newState, update.action)), (update = update.next);\n    while (update !== lastRenderPhaseUpdate);\n    objectIs(newState, hook.memoizedState) || (didReceiveUpdate = !0);\n    hook.memoizedState = newState;\n    null === hook.baseQueue && (hook.baseState = newState);\n    queue.lastRenderedState = newState;\n  }\n  return [newState, dispatch];\n}\nfunction updateSyncExternalStore(subscribe, getSnapshot, getServerSnapshot) {\n  var fiber = currentlyRenderingFiber,\n    hook = updateWorkInProgressHook(),\n    isHydrating$jscomp$0 = isHydrating;\n  if (isHydrating$jscomp$0) {\n    if (void 0 === getServerSnapshot) throw Error(formatProdErrorMessage(407));\n    getServerSnapshot = getServerSnapshot();\n  } else getServerSnapshot = getSnapshot();\n  var snapshotChanged = !objectIs(\n    (currentHook || hook).memoizedState,\n    getServerSnapshot\n  );\n  snapshotChanged &&\n    ((hook.memoizedState = getServerSnapshot), (didReceiveUpdate = !0));\n  hook = hook.queue;\n  var create = subscribeToStore.bind(null, fiber, hook, subscribe);\n  updateEffectImpl(2048, 8, create, [subscribe]);\n  if (\n    hook.getSnapshot !== getSnapshot ||\n    snapshotChanged ||\n    (null !== workInProgressHook && workInProgressHook.memoizedState.tag & 1)\n  ) {\n    fiber.flags |= 2048;\n    pushSimpleEffect(\n      9,\n      createEffectInstance(),\n      updateStoreInstance.bind(\n        null,\n        fiber,\n        hook,\n        getServerSnapshot,\n        getSnapshot\n      ),\n      null\n    );\n    if (null === workInProgressRoot) throw Error(formatProdErrorMessage(349));\n    isHydrating$jscomp$0 ||\n      0 !== (renderLanes & 124) ||\n      pushStoreConsistencyCheck(fiber, getSnapshot, getServerSnapshot);\n  }\n  return getServerSnapshot;\n}\nfunction pushStoreConsistencyCheck(fiber, getSnapshot, renderedSnapshot) {\n  fiber.flags |= 16384;\n  fiber = { getSnapshot: getSnapshot, value: renderedSnapshot };\n  getSnapshot = currentlyRenderingFiber.updateQueue;\n  null === getSnapshot\n    ? ((getSnapshot = createFunctionComponentUpdateQueue()),\n      (currentlyRenderingFiber.updateQueue = getSnapshot),\n      (getSnapshot.stores = [fiber]))\n    : ((renderedSnapshot = getSnapshot.stores),\n      null === renderedSnapshot\n        ? (getSnapshot.stores = [fiber])\n        : renderedSnapshot.push(fiber));\n}\nfunction updateStoreInstance(fiber, inst, nextSnapshot, getSnapshot) {\n  inst.value = nextSnapshot;\n  inst.getSnapshot = getSnapshot;\n  checkIfSnapshotChanged(inst) && forceStoreRerender(fiber);\n}\nfunction subscribeToStore(fiber, inst, subscribe) {\n  return subscribe(function () {\n    checkIfSnapshotChanged(inst) && forceStoreRerender(fiber);\n  });\n}\nfunction checkIfSnapshotChanged(inst) {\n  var latestGetSnapshot = inst.getSnapshot;\n  inst = inst.value;\n  try {\n    var nextValue = latestGetSnapshot();\n    return !objectIs(inst, nextValue);\n  } catch (error) {\n    return !0;\n  }\n}\nfunction forceStoreRerender(fiber) {\n  var root = enqueueConcurrentRenderForLane(fiber, 2);\n  null !== root && scheduleUpdateOnFiber(root, fiber, 2);\n}\nfunction mountStateImpl(initialState) {\n  var hook = mountWorkInProgressHook();\n  if (\"function\" === typeof initialState) {\n    var initialStateInitializer = initialState;\n    initialState = initialStateInitializer();\n    if (shouldDoubleInvokeUserFnsInHooksDEV) {\n      setIsStrictModeForDevtools(!0);\n      try {\n        initialStateInitializer();\n      } finally {\n        setIsStrictModeForDevtools(!1);\n      }\n    }\n  }\n  hook.memoizedState = hook.baseState = initialState;\n  hook.queue = {\n    pending: null,\n    lanes: 0,\n    dispatch: null,\n    lastRenderedReducer: basicStateReducer,\n    lastRenderedState: initialState\n  };\n  return hook;\n}\nfunction updateOptimisticImpl(hook, current, passthrough, reducer) {\n  hook.baseState = passthrough;\n  return updateReducerImpl(\n    hook,\n    currentHook,\n    \"function\" === typeof reducer ? reducer : basicStateReducer\n  );\n}\nfunction dispatchActionState(\n  fiber,\n  actionQueue,\n  setPendingState,\n  setState,\n  payload\n) {\n  if (isRenderPhaseUpdate(fiber)) throw Error(formatProdErrorMessage(485));\n  fiber = actionQueue.action;\n  if (null !== fiber) {\n    var actionNode = {\n      payload: payload,\n      action: fiber,\n      next: null,\n      isTransition: !0,\n      status: \"pending\",\n      value: null,\n      reason: null,\n      listeners: [],\n      then: function (listener) {\n        actionNode.listeners.push(listener);\n      }\n    };\n    null !== ReactSharedInternals.T\n      ? setPendingState(!0)\n      : (actionNode.isTransition = !1);\n    setState(actionNode);\n    setPendingState = actionQueue.pending;\n    null === setPendingState\n      ? ((actionNode.next = actionQueue.pending = actionNode),\n        runActionStateAction(actionQueue, actionNode))\n      : ((actionNode.next = setPendingState.next),\n        (actionQueue.pending = setPendingState.next = actionNode));\n  }\n}\nfunction runActionStateAction(actionQueue, node) {\n  var action = node.action,\n    payload = node.payload,\n    prevState = actionQueue.state;\n  if (node.isTransition) {\n    var prevTransition = ReactSharedInternals.T,\n      currentTransition = {};\n    ReactSharedInternals.T = currentTransition;\n    try {\n      var returnValue = action(prevState, payload),\n        onStartTransitionFinish = ReactSharedInternals.S;\n      null !== onStartTransitionFinish &&\n        onStartTransitionFinish(currentTransition, returnValue);\n      handleActionReturnValue(actionQueue, node, returnValue);\n    } catch (error) {\n      onActionError(actionQueue, node, error);\n    } finally {\n      ReactSharedInternals.T = prevTransition;\n    }\n  } else\n    try {\n      (prevTransition = action(prevState, payload)),\n        handleActionReturnValue(actionQueue, node, prevTransition);\n    } catch (error$38) {\n      onActionError(actionQueue, node, error$38);\n    }\n}\nfunction handleActionReturnValue(actionQueue, node, returnValue) {\n  null !== returnValue &&\n  \"object\" === typeof returnValue &&\n  \"function\" === typeof returnValue.then\n    ? returnValue.then(\n        function (nextState) {\n          onActionSuccess(actionQueue, node, nextState);\n        },\n        function (error) {\n          return onActionError(actionQueue, node, error);\n        }\n      )\n    : onActionSuccess(actionQueue, node, returnValue);\n}\nfunction onActionSuccess(actionQueue, actionNode, nextState) {\n  actionNode.status = \"fulfilled\";\n  actionNode.value = nextState;\n  notifyActionListeners(actionNode);\n  actionQueue.state = nextState;\n  actionNode = actionQueue.pending;\n  null !== actionNode &&\n    ((nextState = actionNode.next),\n    nextState === actionNode\n      ? (actionQueue.pending = null)\n      : ((nextState = nextState.next),\n        (actionNode.next = nextState),\n        runActionStateAction(actionQueue, nextState)));\n}\nfunction onActionError(actionQueue, actionNode, error) {\n  var last = actionQueue.pending;\n  actionQueue.pending = null;\n  if (null !== last) {\n    last = last.next;\n    do\n      (actionNode.status = \"rejected\"),\n        (actionNode.reason = error),\n        notifyActionListeners(actionNode),\n        (actionNode = actionNode.next);\n    while (actionNode !== last);\n  }\n  actionQueue.action = null;\n}\nfunction notifyActionListeners(actionNode) {\n  actionNode = actionNode.listeners;\n  for (var i = 0; i < actionNode.length; i++) (0, actionNode[i])();\n}\nfunction actionStateReducer(oldState, newState) {\n  return newState;\n}\nfunction mountActionState(action, initialStateProp) {\n  if (isHydrating) {\n    var ssrFormState = workInProgressRoot.formState;\n    if (null !== ssrFormState) {\n      a: {\n        var JSCompiler_inline_result = currentlyRenderingFiber;\n        if (isHydrating) {\n          if (nextHydratableInstance) {\n            b: {\n              var JSCompiler_inline_result$jscomp$0 = nextHydratableInstance;\n              for (\n                var inRootOrSingleton = rootOrSingletonContext;\n                8 !== JSCompiler_inline_result$jscomp$0.nodeType;\n\n              ) {\n                if (!inRootOrSingleton) {\n                  JSCompiler_inline_result$jscomp$0 = null;\n                  break b;\n                }\n                JSCompiler_inline_result$jscomp$0 = getNextHydratable(\n                  JSCompiler_inline_result$jscomp$0.nextSibling\n                );\n                if (null === JSCompiler_inline_result$jscomp$0) {\n                  JSCompiler_inline_result$jscomp$0 = null;\n                  break b;\n                }\n              }\n              inRootOrSingleton = JSCompiler_inline_result$jscomp$0.data;\n              JSCompiler_inline_result$jscomp$0 =\n                \"F!\" === inRootOrSingleton || \"F\" === inRootOrSingleton\n                  ? JSCompiler_inline_result$jscomp$0\n                  : null;\n            }\n            if (JSCompiler_inline_result$jscomp$0) {\n              nextHydratableInstance = getNextHydratable(\n                JSCompiler_inline_result$jscomp$0.nextSibling\n              );\n              JSCompiler_inline_result =\n                \"F!\" === JSCompiler_inline_result$jscomp$0.data;\n              break a;\n            }\n          }\n          throwOnHydrationMismatch(JSCompiler_inline_result);\n        }\n        JSCompiler_inline_result = !1;\n      }\n      JSCompiler_inline_result && (initialStateProp = ssrFormState[0]);\n    }\n  }\n  ssrFormState = mountWorkInProgressHook();\n  ssrFormState.memoizedState = ssrFormState.baseState = initialStateProp;\n  JSCompiler_inline_result = {\n    pending: null,\n    lanes: 0,\n    dispatch: null,\n    lastRenderedReducer: actionStateReducer,\n    lastRenderedState: initialStateProp\n  };\n  ssrFormState.queue = JSCompiler_inline_result;\n  ssrFormState = dispatchSetState.bind(\n    null,\n    currentlyRenderingFiber,\n    JSCompiler_inline_result\n  );\n  JSCompiler_inline_result.dispatch = ssrFormState;\n  JSCompiler_inline_result = mountStateImpl(!1);\n  inRootOrSingleton = dispatchOptimisticSetState.bind(\n    null,\n    currentlyRenderingFiber,\n    !1,\n    JSCompiler_inline_result.queue\n  );\n  JSCompiler_inline_result = mountWorkInProgressHook();\n  JSCompiler_inline_result$jscomp$0 = {\n    state: initialStateProp,\n    dispatch: null,\n    action: action,\n    pending: null\n  };\n  JSCompiler_inline_result.queue = JSCompiler_inline_result$jscomp$0;\n  ssrFormState = dispatchActionState.bind(\n    null,\n    currentlyRenderingFiber,\n    JSCompiler_inline_result$jscomp$0,\n    inRootOrSingleton,\n    ssrFormState\n  );\n  JSCompiler_inline_result$jscomp$0.dispatch = ssrFormState;\n  JSCompiler_inline_result.memoizedState = action;\n  return [initialStateProp, ssrFormState, !1];\n}\nfunction updateActionState(action) {\n  var stateHook = updateWorkInProgressHook();\n  return updateActionStateImpl(stateHook, currentHook, action);\n}\nfunction updateActionStateImpl(stateHook, currentStateHook, action) {\n  currentStateHook = updateReducerImpl(\n    stateHook,\n    currentStateHook,\n    actionStateReducer\n  )[0];\n  stateHook = updateReducer(basicStateReducer)[0];\n  if (\n    \"object\" === typeof currentStateHook &&\n    null !== currentStateHook &&\n    \"function\" === typeof currentStateHook.then\n  )\n    try {\n      var state = useThenable(currentStateHook);\n    } catch (x) {\n      if (x === SuspenseException) throw SuspenseActionException;\n      throw x;\n    }\n  else state = currentStateHook;\n  currentStateHook = updateWorkInProgressHook();\n  var actionQueue = currentStateHook.queue,\n    dispatch = actionQueue.dispatch;\n  action !== currentStateHook.memoizedState &&\n    ((currentlyRenderingFiber.flags |= 2048),\n    pushSimpleEffect(\n      9,\n      createEffectInstance(),\n      actionStateActionEffect.bind(null, actionQueue, action),\n      null\n    ));\n  return [state, dispatch, stateHook];\n}\nfunction actionStateActionEffect(actionQueue, action) {\n  actionQueue.action = action;\n}\nfunction rerenderActionState(action) {\n  var stateHook = updateWorkInProgressHook(),\n    currentStateHook = currentHook;\n  if (null !== currentStateHook)\n    return updateActionStateImpl(stateHook, currentStateHook, action);\n  updateWorkInProgressHook();\n  stateHook = stateHook.memoizedState;\n  currentStateHook = updateWorkInProgressHook();\n  var dispatch = currentStateHook.queue.dispatch;\n  currentStateHook.memoizedState = action;\n  return [stateHook, dispatch, !1];\n}\nfunction pushSimpleEffect(tag, inst, create, createDeps) {\n  tag = { tag: tag, create: create, deps: createDeps, inst: inst, next: null };\n  inst = currentlyRenderingFiber.updateQueue;\n  null === inst &&\n    ((inst = createFunctionComponentUpdateQueue()),\n    (currentlyRenderingFiber.updateQueue = inst));\n  create = inst.lastEffect;\n  null === create\n    ? (inst.lastEffect = tag.next = tag)\n    : ((createDeps = create.next),\n      (create.next = tag),\n      (tag.next = createDeps),\n      (inst.lastEffect = tag));\n  return tag;\n}\nfunction createEffectInstance() {\n  return { destroy: void 0, resource: void 0 };\n}\nfunction updateRef() {\n  return updateWorkInProgressHook().memoizedState;\n}\nfunction mountEffectImpl(fiberFlags, hookFlags, create, createDeps) {\n  var hook = mountWorkInProgressHook();\n  createDeps = void 0 === createDeps ? null : createDeps;\n  currentlyRenderingFiber.flags |= fiberFlags;\n  hook.memoizedState = pushSimpleEffect(\n    1 | hookFlags,\n    createEffectInstance(),\n    create,\n    createDeps\n  );\n}\nfunction updateEffectImpl(fiberFlags, hookFlags, create, deps) {\n  var hook = updateWorkInProgressHook();\n  deps = void 0 === deps ? null : deps;\n  var inst = hook.memoizedState.inst;\n  null !== currentHook &&\n  null !== deps &&\n  areHookInputsEqual(deps, currentHook.memoizedState.deps)\n    ? (hook.memoizedState = pushSimpleEffect(hookFlags, inst, create, deps))\n    : ((currentlyRenderingFiber.flags |= fiberFlags),\n      (hook.memoizedState = pushSimpleEffect(\n        1 | hookFlags,\n        inst,\n        create,\n        deps\n      )));\n}\nfunction mountEffect(create, createDeps) {\n  mountEffectImpl(8390656, 8, create, createDeps);\n}\nfunction updateEffect(create, createDeps) {\n  updateEffectImpl(2048, 8, create, createDeps);\n}\nfunction updateInsertionEffect(create, deps) {\n  return updateEffectImpl(4, 2, create, deps);\n}\nfunction updateLayoutEffect(create, deps) {\n  return updateEffectImpl(4, 4, create, deps);\n}\nfunction imperativeHandleEffect(create, ref) {\n  if (\"function\" === typeof ref) {\n    create = create();\n    var refCleanup = ref(create);\n    return function () {\n      \"function\" === typeof refCleanup ? refCleanup() : ref(null);\n    };\n  }\n  if (null !== ref && void 0 !== ref)\n    return (\n      (create = create()),\n      (ref.current = create),\n      function () {\n        ref.current = null;\n      }\n    );\n}\nfunction updateImperativeHandle(ref, create, deps) {\n  deps = null !== deps && void 0 !== deps ? deps.concat([ref]) : null;\n  updateEffectImpl(4, 4, imperativeHandleEffect.bind(null, create, ref), deps);\n}\nfunction mountDebugValue() {}\nfunction updateCallback(callback, deps) {\n  var hook = updateWorkInProgressHook();\n  deps = void 0 === deps ? null : deps;\n  var prevState = hook.memoizedState;\n  if (null !== deps && areHookInputsEqual(deps, prevState[1]))\n    return prevState[0];\n  hook.memoizedState = [callback, deps];\n  return callback;\n}\nfunction updateMemo(nextCreate, deps) {\n  var hook = updateWorkInProgressHook();\n  deps = void 0 === deps ? null : deps;\n  var prevState = hook.memoizedState;\n  if (null !== deps && areHookInputsEqual(deps, prevState[1]))\n    return prevState[0];\n  prevState = nextCreate();\n  if (shouldDoubleInvokeUserFnsInHooksDEV) {\n    setIsStrictModeForDevtools(!0);\n    try {\n      nextCreate();\n    } finally {\n      setIsStrictModeForDevtools(!1);\n    }\n  }\n  hook.memoizedState = [prevState, deps];\n  return prevState;\n}\nfunction mountDeferredValueImpl(hook, value, initialValue) {\n  if (void 0 === initialValue || 0 !== (renderLanes & 1073741824))\n    return (hook.memoizedState = value);\n  hook.memoizedState = initialValue;\n  hook = requestDeferredLane();\n  currentlyRenderingFiber.lanes |= hook;\n  workInProgressRootSkippedLanes |= hook;\n  return initialValue;\n}\nfunction updateDeferredValueImpl(hook, prevValue, value, initialValue) {\n  if (objectIs(value, prevValue)) return value;\n  if (null !== currentTreeHiddenStackCursor.current)\n    return (\n      (hook = mountDeferredValueImpl(hook, value, initialValue)),\n      objectIs(hook, prevValue) || (didReceiveUpdate = !0),\n      hook\n    );\n  if (0 === (renderLanes & 42))\n    return (didReceiveUpdate = !0), (hook.memoizedState = value);\n  hook = requestDeferredLane();\n  currentlyRenderingFiber.lanes |= hook;\n  workInProgressRootSkippedLanes |= hook;\n  return prevValue;\n}\nfunction startTransition(fiber, queue, pendingState, finishedState, callback) {\n  var previousPriority = ReactDOMSharedInternals.p;\n  ReactDOMSharedInternals.p =\n    0 !== previousPriority && 8 > previousPriority ? previousPriority : 8;\n  var prevTransition = ReactSharedInternals.T,\n    currentTransition = {};\n  ReactSharedInternals.T = currentTransition;\n  dispatchOptimisticSetState(fiber, !1, queue, pendingState);\n  try {\n    var returnValue = callback(),\n      onStartTransitionFinish = ReactSharedInternals.S;\n    null !== onStartTransitionFinish &&\n      onStartTransitionFinish(currentTransition, returnValue);\n    if (\n      null !== returnValue &&\n      \"object\" === typeof returnValue &&\n      \"function\" === typeof returnValue.then\n    ) {\n      var thenableForFinishedState = chainThenableValue(\n        returnValue,\n        finishedState\n      );\n      dispatchSetStateInternal(\n        fiber,\n        queue,\n        thenableForFinishedState,\n        requestUpdateLane(fiber)\n      );\n    } else\n      dispatchSetStateInternal(\n        fiber,\n        queue,\n        finishedState,\n        requestUpdateLane(fiber)\n      );\n  } catch (error) {\n    dispatchSetStateInternal(\n      fiber,\n      queue,\n      { then: function () {}, status: \"rejected\", reason: error },\n      requestUpdateLane()\n    );\n  } finally {\n    (ReactDOMSharedInternals.p = previousPriority),\n      (ReactSharedInternals.T = prevTransition);\n  }\n}\nfunction noop$2() {}\nfunction startHostTransition(formFiber, pendingState, action, formData) {\n  if (5 !== formFiber.tag) throw Error(formatProdErrorMessage(476));\n  var queue = ensureFormComponentIsStateful(formFiber).queue;\n  startTransition(\n    formFiber,\n    queue,\n    pendingState,\n    sharedNotPendingObject,\n    null === action\n      ? noop$2\n      : function () {\n          requestFormReset$1(formFiber);\n          return action(formData);\n        }\n  );\n}\nfunction ensureFormComponentIsStateful(formFiber) {\n  var existingStateHook = formFiber.memoizedState;\n  if (null !== existingStateHook) return existingStateHook;\n  existingStateHook = {\n    memoizedState: sharedNotPendingObject,\n    baseState: sharedNotPendingObject,\n    baseQueue: null,\n    queue: {\n      pending: null,\n      lanes: 0,\n      dispatch: null,\n      lastRenderedReducer: basicStateReducer,\n      lastRenderedState: sharedNotPendingObject\n    },\n    next: null\n  };\n  var initialResetState = {};\n  existingStateHook.next = {\n    memoizedState: initialResetState,\n    baseState: initialResetState,\n    baseQueue: null,\n    queue: {\n      pending: null,\n      lanes: 0,\n      dispatch: null,\n      lastRenderedReducer: basicStateReducer,\n      lastRenderedState: initialResetState\n    },\n    next: null\n  };\n  formFiber.memoizedState = existingStateHook;\n  formFiber = formFiber.alternate;\n  null !== formFiber && (formFiber.memoizedState = existingStateHook);\n  return existingStateHook;\n}\nfunction requestFormReset$1(formFiber) {\n  var resetStateQueue = ensureFormComponentIsStateful(formFiber).next.queue;\n  dispatchSetStateInternal(formFiber, resetStateQueue, {}, requestUpdateLane());\n}\nfunction useHostTransitionStatus() {\n  return readContext(HostTransitionContext);\n}\nfunction updateId() {\n  return updateWorkInProgressHook().memoizedState;\n}\nfunction updateRefresh() {\n  return updateWorkInProgressHook().memoizedState;\n}\nfunction refreshCache(fiber) {\n  for (var provider = fiber.return; null !== provider; ) {\n    switch (provider.tag) {\n      case 24:\n      case 3:\n        var lane = requestUpdateLane();\n        fiber = createUpdate(lane);\n        var root$41 = enqueueUpdate(provider, fiber, lane);\n        null !== root$41 &&\n          (scheduleUpdateOnFiber(root$41, provider, lane),\n          entangleTransitions(root$41, provider, lane));\n        provider = { cache: createCache() };\n        fiber.payload = provider;\n        return;\n    }\n    provider = provider.return;\n  }\n}\nfunction dispatchReducerAction(fiber, queue, action) {\n  var lane = requestUpdateLane();\n  action = {\n    lane: lane,\n    revertLane: 0,\n    action: action,\n    hasEagerState: !1,\n    eagerState: null,\n    next: null\n  };\n  isRenderPhaseUpdate(fiber)\n    ? enqueueRenderPhaseUpdate(queue, action)\n    : ((action = enqueueConcurrentHookUpdate(fiber, queue, action, lane)),\n      null !== action &&\n        (scheduleUpdateOnFiber(action, fiber, lane),\n        entangleTransitionUpdate(action, queue, lane)));\n}\nfunction dispatchSetState(fiber, queue, action) {\n  var lane = requestUpdateLane();\n  dispatchSetStateInternal(fiber, queue, action, lane);\n}\nfunction dispatchSetStateInternal(fiber, queue, action, lane) {\n  var update = {\n    lane: lane,\n    revertLane: 0,\n    action: action,\n    hasEagerState: !1,\n    eagerState: null,\n    next: null\n  };\n  if (isRenderPhaseUpdate(fiber)) enqueueRenderPhaseUpdate(queue, update);\n  else {\n    var alternate = fiber.alternate;\n    if (\n      0 === fiber.lanes &&\n      (null === alternate || 0 === alternate.lanes) &&\n      ((alternate = queue.lastRenderedReducer), null !== alternate)\n    )\n      try {\n        var currentState = queue.lastRenderedState,\n          eagerState = alternate(currentState, action);\n        update.hasEagerState = !0;\n        update.eagerState = eagerState;\n        if (objectIs(eagerState, currentState))\n          return (\n            enqueueUpdate$1(fiber, queue, update, 0),\n            null === workInProgressRoot && finishQueueingConcurrentUpdates(),\n            !1\n          );\n      } catch (error) {\n      } finally {\n      }\n    action = enqueueConcurrentHookUpdate(fiber, queue, update, lane);\n    if (null !== action)\n      return (\n        scheduleUpdateOnFiber(action, fiber, lane),\n        entangleTransitionUpdate(action, queue, lane),\n        !0\n      );\n  }\n  return !1;\n}\nfunction dispatchOptimisticSetState(fiber, throwIfDuringRender, queue, action) {\n  action = {\n    lane: 2,\n    revertLane: requestTransitionLane(),\n    action: action,\n    hasEagerState: !1,\n    eagerState: null,\n    next: null\n  };\n  if (isRenderPhaseUpdate(fiber)) {\n    if (throwIfDuringRender) throw Error(formatProdErrorMessage(479));\n  } else\n    (throwIfDuringRender = enqueueConcurrentHookUpdate(\n      fiber,\n      queue,\n      action,\n      2\n    )),\n      null !== throwIfDuringRender &&\n        scheduleUpdateOnFiber(throwIfDuringRender, fiber, 2);\n}\nfunction isRenderPhaseUpdate(fiber) {\n  var alternate = fiber.alternate;\n  return (\n    fiber === currentlyRenderingFiber ||\n    (null !== alternate && alternate === currentlyRenderingFiber)\n  );\n}\nfunction enqueueRenderPhaseUpdate(queue, update) {\n  didScheduleRenderPhaseUpdateDuringThisPass = didScheduleRenderPhaseUpdate =\n    !0;\n  var pending = queue.pending;\n  null === pending\n    ? (update.next = update)\n    : ((update.next = pending.next), (pending.next = update));\n  queue.pending = update;\n}\nfunction entangleTransitionUpdate(root, queue, lane) {\n  if (0 !== (lane & 4194048)) {\n    var queueLanes = queue.lanes;\n    queueLanes &= root.pendingLanes;\n    lane |= queueLanes;\n    queue.lanes = lane;\n    markRootEntangled(root, lane);\n  }\n}\nvar ContextOnlyDispatcher = {\n    readContext: readContext,\n    use: use,\n    useCallback: throwInvalidHookError,\n    useContext: throwInvalidHookError,\n    useEffect: throwInvalidHookError,\n    useImperativeHandle: throwInvalidHookError,\n    useLayoutEffect: throwInvalidHookError,\n    useInsertionEffect: throwInvalidHookError,\n    useMemo: throwInvalidHookError,\n    useReducer: throwInvalidHookError,\n    useRef: throwInvalidHookError,\n    useState: throwInvalidHookError,\n    useDebugValue: throwInvalidHookError,\n    useDeferredValue: throwInvalidHookError,\n    useTransition: throwInvalidHookError,\n    useSyncExternalStore: throwInvalidHookError,\n    useId: throwInvalidHookError,\n    useHostTransitionStatus: throwInvalidHookError,\n    useFormState: throwInvalidHookError,\n    useActionState: throwInvalidHookError,\n    useOptimistic: throwInvalidHookError,\n    useMemoCache: throwInvalidHookError,\n    useCacheRefresh: throwInvalidHookError\n  },\n  HooksDispatcherOnMount = {\n    readContext: readContext,\n    use: use,\n    useCallback: function (callback, deps) {\n      mountWorkInProgressHook().memoizedState = [\n        callback,\n        void 0 === deps ? null : deps\n      ];\n      return callback;\n    },\n    useContext: readContext,\n    useEffect: mountEffect,\n    useImperativeHandle: function (ref, create, deps) {\n      deps = null !== deps && void 0 !== deps ? deps.concat([ref]) : null;\n      mountEffectImpl(\n        4194308,\n        4,\n        imperativeHandleEffect.bind(null, create, ref),\n        deps\n      );\n    },\n    useLayoutEffect: function (create, deps) {\n      return mountEffectImpl(4194308, 4, create, deps);\n    },\n    useInsertionEffect: function (create, deps) {\n      mountEffectImpl(4, 2, create, deps);\n    },\n    useMemo: function (nextCreate, deps) {\n      var hook = mountWorkInProgressHook();\n      deps = void 0 === deps ? null : deps;\n      var nextValue = nextCreate();\n      if (shouldDoubleInvokeUserFnsInHooksDEV) {\n        setIsStrictModeForDevtools(!0);\n        try {\n          nextCreate();\n        } finally {\n          setIsStrictModeForDevtools(!1);\n        }\n      }\n      hook.memoizedState = [nextValue, deps];\n      return nextValue;\n    },\n    useReducer: function (reducer, initialArg, init) {\n      var hook = mountWorkInProgressHook();\n      if (void 0 !== init) {\n        var initialState = init(initialArg);\n        if (shouldDoubleInvokeUserFnsInHooksDEV) {\n          setIsStrictModeForDevtools(!0);\n          try {\n            init(initialArg);\n          } finally {\n            setIsStrictModeForDevtools(!1);\n          }\n        }\n      } else initialState = initialArg;\n      hook.memoizedState = hook.baseState = initialState;\n      reducer = {\n        pending: null,\n        lanes: 0,\n        dispatch: null,\n        lastRenderedReducer: reducer,\n        lastRenderedState: initialState\n      };\n      hook.queue = reducer;\n      reducer = reducer.dispatch = dispatchReducerAction.bind(\n        null,\n        currentlyRenderingFiber,\n        reducer\n      );\n      return [hook.memoizedState, reducer];\n    },\n    useRef: function (initialValue) {\n      var hook = mountWorkInProgressHook();\n      initialValue = { current: initialValue };\n      return (hook.memoizedState = initialValue);\n    },\n    useState: function (initialState) {\n      initialState = mountStateImpl(initialState);\n      var queue = initialState.queue,\n        dispatch = dispatchSetState.bind(null, currentlyRenderingFiber, queue);\n      queue.dispatch = dispatch;\n      return [initialState.memoizedState, dispatch];\n    },\n    useDebugValue: mountDebugValue,\n    useDeferredValue: function (value, initialValue) {\n      var hook = mountWorkInProgressHook();\n      return mountDeferredValueImpl(hook, value, initialValue);\n    },\n    useTransition: function () {\n      var stateHook = mountStateImpl(!1);\n      stateHook = startTransition.bind(\n        null,\n        currentlyRenderingFiber,\n        stateHook.queue,\n        !0,\n        !1\n      );\n      mountWorkInProgressHook().memoizedState = stateHook;\n      return [!1, stateHook];\n    },\n    useSyncExternalStore: function (subscribe, getSnapshot, getServerSnapshot) {\n      var fiber = currentlyRenderingFiber,\n        hook = mountWorkInProgressHook();\n      if (isHydrating) {\n        if (void 0 === getServerSnapshot)\n          throw Error(formatProdErrorMessage(407));\n        getServerSnapshot = getServerSnapshot();\n      } else {\n        getServerSnapshot = getSnapshot();\n        if (null === workInProgressRoot)\n          throw Error(formatProdErrorMessage(349));\n        0 !== (workInProgressRootRenderLanes & 124) ||\n          pushStoreConsistencyCheck(fiber, getSnapshot, getServerSnapshot);\n      }\n      hook.memoizedState = getServerSnapshot;\n      var inst = { value: getServerSnapshot, getSnapshot: getSnapshot };\n      hook.queue = inst;\n      mountEffect(subscribeToStore.bind(null, fiber, inst, subscribe), [\n        subscribe\n      ]);\n      fiber.flags |= 2048;\n      pushSimpleEffect(\n        9,\n        createEffectInstance(),\n        updateStoreInstance.bind(\n          null,\n          fiber,\n          inst,\n          getServerSnapshot,\n          getSnapshot\n        ),\n        null\n      );\n      return getServerSnapshot;\n    },\n    useId: function () {\n      var hook = mountWorkInProgressHook(),\n        identifierPrefix = workInProgressRoot.identifierPrefix;\n      if (isHydrating) {\n        var JSCompiler_inline_result = treeContextOverflow;\n        var idWithLeadingBit = treeContextId;\n        JSCompiler_inline_result =\n          (\n            idWithLeadingBit & ~(1 << (32 - clz32(idWithLeadingBit) - 1))\n          ).toString(32) + JSCompiler_inline_result;\n        identifierPrefix =\n          \"\\u00ab\" + identifierPrefix + \"R\" + JSCompiler_inline_result;\n        JSCompiler_inline_result = localIdCounter++;\n        0 < JSCompiler_inline_result &&\n          (identifierPrefix += \"H\" + JSCompiler_inline_result.toString(32));\n        identifierPrefix += \"\\u00bb\";\n      } else\n        (JSCompiler_inline_result = globalClientIdCounter++),\n          (identifierPrefix =\n            \"\\u00ab\" +\n            identifierPrefix +\n            \"r\" +\n            JSCompiler_inline_result.toString(32) +\n            \"\\u00bb\");\n      return (hook.memoizedState = identifierPrefix);\n    },\n    useHostTransitionStatus: useHostTransitionStatus,\n    useFormState: mountActionState,\n    useActionState: mountActionState,\n    useOptimistic: function (passthrough) {\n      var hook = mountWorkInProgressHook();\n      hook.memoizedState = hook.baseState = passthrough;\n      var queue = {\n        pending: null,\n        lanes: 0,\n        dispatch: null,\n        lastRenderedReducer: null,\n        lastRenderedState: null\n      };\n      hook.queue = queue;\n      hook = dispatchOptimisticSetState.bind(\n        null,\n        currentlyRenderingFiber,\n        !0,\n        queue\n      );\n      queue.dispatch = hook;\n      return [passthrough, hook];\n    },\n    useMemoCache: useMemoCache,\n    useCacheRefresh: function () {\n      return (mountWorkInProgressHook().memoizedState = refreshCache.bind(\n        null,\n        currentlyRenderingFiber\n      ));\n    }\n  },\n  HooksDispatcherOnUpdate = {\n    readContext: readContext,\n    use: use,\n    useCallback: updateCallback,\n    useContext: readContext,\n    useEffect: updateEffect,\n    useImperativeHandle: updateImperativeHandle,\n    useInsertionEffect: updateInsertionEffect,\n    useLayoutEffect: updateLayoutEffect,\n    useMemo: updateMemo,\n    useReducer: updateReducer,\n    useRef: updateRef,\n    useState: function () {\n      return updateReducer(basicStateReducer);\n    },\n    useDebugValue: mountDebugValue,\n    useDeferredValue: function (value, initialValue) {\n      var hook = updateWorkInProgressHook();\n      return updateDeferredValueImpl(\n        hook,\n        currentHook.memoizedState,\n        value,\n        initialValue\n      );\n    },\n    useTransition: function () {\n      var booleanOrThenable = updateReducer(basicStateReducer)[0],\n        start = updateWorkInProgressHook().memoizedState;\n      return [\n        \"boolean\" === typeof booleanOrThenable\n          ? booleanOrThenable\n          : useThenable(booleanOrThenable),\n        start\n      ];\n    },\n    useSyncExternalStore: updateSyncExternalStore,\n    useId: updateId,\n    useHostTransitionStatus: useHostTransitionStatus,\n    useFormState: updateActionState,\n    useActionState: updateActionState,\n    useOptimistic: function (passthrough, reducer) {\n      var hook = updateWorkInProgressHook();\n      return updateOptimisticImpl(hook, currentHook, passthrough, reducer);\n    },\n    useMemoCache: useMemoCache,\n    useCacheRefresh: updateRefresh\n  },\n  HooksDispatcherOnRerender = {\n    readContext: readContext,\n    use: use,\n    useCallback: updateCallback,\n    useContext: readContext,\n    useEffect: updateEffect,\n    useImperativeHandle: updateImperativeHandle,\n    useInsertionEffect: updateInsertionEffect,\n    useLayoutEffect: updateLayoutEffect,\n    useMemo: updateMemo,\n    useReducer: rerenderReducer,\n    useRef: updateRef,\n    useState: function () {\n      return rerenderReducer(basicStateReducer);\n    },\n    useDebugValue: mountDebugValue,\n    useDeferredValue: function (value, initialValue) {\n      var hook = updateWorkInProgressHook();\n      return null === currentHook\n        ? mountDeferredValueImpl(hook, value, initialValue)\n        : updateDeferredValueImpl(\n            hook,\n            currentHook.memoizedState,\n            value,\n            initialValue\n          );\n    },\n    useTransition: function () {\n      var booleanOrThenable = rerenderReducer(basicStateReducer)[0],\n        start = updateWorkInProgressHook().memoizedState;\n      return [\n        \"boolean\" === typeof booleanOrThenable\n          ? booleanOrThenable\n          : useThenable(booleanOrThenable),\n        start\n      ];\n    },\n    useSyncExternalStore: updateSyncExternalStore,\n    useId: updateId,\n    useHostTransitionStatus: useHostTransitionStatus,\n    useFormState: rerenderActionState,\n    useActionState: rerenderActionState,\n    useOptimistic: function (passthrough, reducer) {\n      var hook = updateWorkInProgressHook();\n      if (null !== currentHook)\n        return updateOptimisticImpl(hook, currentHook, passthrough, reducer);\n      hook.baseState = passthrough;\n      return [passthrough, hook.queue.dispatch];\n    },\n    useMemoCache: useMemoCache,\n    useCacheRefresh: updateRefresh\n  },\n  thenableState = null,\n  thenableIndexCounter = 0;\nfunction unwrapThenable(thenable) {\n  var index = thenableIndexCounter;\n  thenableIndexCounter += 1;\n  null === thenableState && (thenableState = []);\n  return trackUsedThenable(thenableState, thenable, index);\n}\nfunction coerceRef(workInProgress, element) {\n  element = element.props.ref;\n  workInProgress.ref = void 0 !== element ? element : null;\n}\nfunction throwOnInvalidObjectType(returnFiber, newChild) {\n  if (newChild.$$typeof === REACT_LEGACY_ELEMENT_TYPE)\n    throw Error(formatProdErrorMessage(525));\n  returnFiber = Object.prototype.toString.call(newChild);\n  throw Error(\n    formatProdErrorMessage(\n      31,\n      \"[object Object]\" === returnFiber\n        ? \"object with keys {\" + Object.keys(newChild).join(\", \") + \"}\"\n        : returnFiber\n    )\n  );\n}\nfunction resolveLazy(lazyType) {\n  var init = lazyType._init;\n  return init(lazyType._payload);\n}\nfunction createChildReconciler(shouldTrackSideEffects) {\n  function deleteChild(returnFiber, childToDelete) {\n    if (shouldTrackSideEffects) {\n      var deletions = returnFiber.deletions;\n      null === deletions\n        ? ((returnFiber.deletions = [childToDelete]), (returnFiber.flags |= 16))\n        : deletions.push(childToDelete);\n    }\n  }\n  function deleteRemainingChildren(returnFiber, currentFirstChild) {\n    if (!shouldTrackSideEffects) return null;\n    for (; null !== currentFirstChild; )\n      deleteChild(returnFiber, currentFirstChild),\n        (currentFirstChild = currentFirstChild.sibling);\n    return null;\n  }\n  function mapRemainingChildren(currentFirstChild) {\n    for (var existingChildren = new Map(); null !== currentFirstChild; )\n      null !== currentFirstChild.key\n        ? existingChildren.set(currentFirstChild.key, currentFirstChild)\n        : existingChildren.set(currentFirstChild.index, currentFirstChild),\n        (currentFirstChild = currentFirstChild.sibling);\n    return existingChildren;\n  }\n  function useFiber(fiber, pendingProps) {\n    fiber = createWorkInProgress(fiber, pendingProps);\n    fiber.index = 0;\n    fiber.sibling = null;\n    return fiber;\n  }\n  function placeChild(newFiber, lastPlacedIndex, newIndex) {\n    newFiber.index = newIndex;\n    if (!shouldTrackSideEffects)\n      return (newFiber.flags |= 1048576), lastPlacedIndex;\n    newIndex = newFiber.alternate;\n    if (null !== newIndex)\n      return (\n        (newIndex = newIndex.index),\n        newIndex < lastPlacedIndex\n          ? ((newFiber.flags |= 67108866), lastPlacedIndex)\n          : newIndex\n      );\n    newFiber.flags |= 67108866;\n    return lastPlacedIndex;\n  }\n  function placeSingleChild(newFiber) {\n    shouldTrackSideEffects &&\n      null === newFiber.alternate &&\n      (newFiber.flags |= 67108866);\n    return newFiber;\n  }\n  function updateTextNode(returnFiber, current, textContent, lanes) {\n    if (null === current || 6 !== current.tag)\n      return (\n        (current = createFiberFromText(textContent, returnFiber.mode, lanes)),\n        (current.return = returnFiber),\n        current\n      );\n    current = useFiber(current, textContent);\n    current.return = returnFiber;\n    return current;\n  }\n  function updateElement(returnFiber, current, element, lanes) {\n    var elementType = element.type;\n    if (elementType === REACT_FRAGMENT_TYPE)\n      return updateFragment(\n        returnFiber,\n        current,\n        element.props.children,\n        lanes,\n        element.key\n      );\n    if (\n      null !== current &&\n      (current.elementType === elementType ||\n        (\"object\" === typeof elementType &&\n          null !== elementType &&\n          elementType.$$typeof === REACT_LAZY_TYPE &&\n          resolveLazy(elementType) === current.type))\n    )\n      return (\n        (current = useFiber(current, element.props)),\n        coerceRef(current, element),\n        (current.return = returnFiber),\n        current\n      );\n    current = createFiberFromTypeAndProps(\n      element.type,\n      element.key,\n      element.props,\n      null,\n      returnFiber.mode,\n      lanes\n    );\n    coerceRef(current, element);\n    current.return = returnFiber;\n    return current;\n  }\n  function updatePortal(returnFiber, current, portal, lanes) {\n    if (\n      null === current ||\n      4 !== current.tag ||\n      current.stateNode.containerInfo !== portal.containerInfo ||\n      current.stateNode.implementation !== portal.implementation\n    )\n      return (\n        (current = createFiberFromPortal(portal, returnFiber.mode, lanes)),\n        (current.return = returnFiber),\n        current\n      );\n    current = useFiber(current, portal.children || []);\n    current.return = returnFiber;\n    return current;\n  }\n  function updateFragment(returnFiber, current, fragment, lanes, key) {\n    if (null === current || 7 !== current.tag)\n      return (\n        (current = createFiberFromFragment(\n          fragment,\n          returnFiber.mode,\n          lanes,\n          key\n        )),\n        (current.return = returnFiber),\n        current\n      );\n    current = useFiber(current, fragment);\n    current.return = returnFiber;\n    return current;\n  }\n  function createChild(returnFiber, newChild, lanes) {\n    if (\n      (\"string\" === typeof newChild && \"\" !== newChild) ||\n      \"number\" === typeof newChild ||\n      \"bigint\" === typeof newChild\n    )\n      return (\n        (newChild = createFiberFromText(\n          \"\" + newChild,\n          returnFiber.mode,\n          lanes\n        )),\n        (newChild.return = returnFiber),\n        newChild\n      );\n    if (\"object\" === typeof newChild && null !== newChild) {\n      switch (newChild.$$typeof) {\n        case REACT_ELEMENT_TYPE:\n          return (\n            (lanes = createFiberFromTypeAndProps(\n              newChild.type,\n              newChild.key,\n              newChild.props,\n              null,\n              returnFiber.mode,\n              lanes\n            )),\n            coerceRef(lanes, newChild),\n            (lanes.return = returnFiber),\n            lanes\n          );\n        case REACT_PORTAL_TYPE:\n          return (\n            (newChild = createFiberFromPortal(\n              newChild,\n              returnFiber.mode,\n              lanes\n            )),\n            (newChild.return = returnFiber),\n            newChild\n          );\n        case REACT_LAZY_TYPE:\n          var init = newChild._init;\n          newChild = init(newChild._payload);\n          return createChild(returnFiber, newChild, lanes);\n      }\n      if (isArrayImpl(newChild) || getIteratorFn(newChild))\n        return (\n          (newChild = createFiberFromFragment(\n            newChild,\n            returnFiber.mode,\n            lanes,\n            null\n          )),\n          (newChild.return = returnFiber),\n          newChild\n        );\n      if (\"function\" === typeof newChild.then)\n        return createChild(returnFiber, unwrapThenable(newChild), lanes);\n      if (newChild.$$typeof === REACT_CONTEXT_TYPE)\n        return createChild(\n          returnFiber,\n          readContextDuringReconciliation(returnFiber, newChild),\n          lanes\n        );\n      throwOnInvalidObjectType(returnFiber, newChild);\n    }\n    return null;\n  }\n  function updateSlot(returnFiber, oldFiber, newChild, lanes) {\n    var key = null !== oldFiber ? oldFiber.key : null;\n    if (\n      (\"string\" === typeof newChild && \"\" !== newChild) ||\n      \"number\" === typeof newChild ||\n      \"bigint\" === typeof newChild\n    )\n      return null !== key\n        ? null\n        : updateTextNode(returnFiber, oldFiber, \"\" + newChild, lanes);\n    if (\"object\" === typeof newChild && null !== newChild) {\n      switch (newChild.$$typeof) {\n        case REACT_ELEMENT_TYPE:\n          return newChild.key === key\n            ? updateElement(returnFiber, oldFiber, newChild, lanes)\n            : null;\n        case REACT_PORTAL_TYPE:\n          return newChild.key === key\n            ? updatePortal(returnFiber, oldFiber, newChild, lanes)\n            : null;\n        case REACT_LAZY_TYPE:\n          return (\n            (key = newChild._init),\n            (newChild = key(newChild._payload)),\n            updateSlot(returnFiber, oldFiber, newChild, lanes)\n          );\n      }\n      if (isArrayImpl(newChild) || getIteratorFn(newChild))\n        return null !== key\n          ? null\n          : updateFragment(returnFiber, oldFiber, newChild, lanes, null);\n      if (\"function\" === typeof newChild.then)\n        return updateSlot(\n          returnFiber,\n          oldFiber,\n          unwrapThenable(newChild),\n          lanes\n        );\n      if (newChild.$$typeof === REACT_CONTEXT_TYPE)\n        return updateSlot(\n          returnFiber,\n          oldFiber,\n          readContextDuringReconciliation(returnFiber, newChild),\n          lanes\n        );\n      throwOnInvalidObjectType(returnFiber, newChild);\n    }\n    return null;\n  }\n  function updateFromMap(\n    existingChildren,\n    returnFiber,\n    newIdx,\n    newChild,\n    lanes\n  ) {\n    if (\n      (\"string\" === typeof newChild && \"\" !== newChild) ||\n      \"number\" === typeof newChild ||\n      \"bigint\" === typeof newChild\n    )\n      return (\n        (existingChildren = existingChildren.get(newIdx) || null),\n        updateTextNode(returnFiber, existingChildren, \"\" + newChild, lanes)\n      );\n    if (\"object\" === typeof newChild && null !== newChild) {\n      switch (newChild.$$typeof) {\n        case REACT_ELEMENT_TYPE:\n          return (\n            (existingChildren =\n              existingChildren.get(\n                null === newChild.key ? newIdx : newChild.key\n              ) || null),\n            updateElement(returnFiber, existingChildren, newChild, lanes)\n          );\n        case REACT_PORTAL_TYPE:\n          return (\n            (existingChildren =\n              existingChildren.get(\n                null === newChild.key ? newIdx : newChild.key\n              ) || null),\n            updatePortal(returnFiber, existingChildren, newChild, lanes)\n          );\n        case REACT_LAZY_TYPE:\n          var init = newChild._init;\n          newChild = init(newChild._payload);\n          return updateFromMap(\n            existingChildren,\n            returnFiber,\n            newIdx,\n            newChild,\n            lanes\n          );\n      }\n      if (isArrayImpl(newChild) || getIteratorFn(newChild))\n        return (\n          (existingChildren = existingChildren.get(newIdx) || null),\n          updateFragment(returnFiber, existingChildren, newChild, lanes, null)\n        );\n      if (\"function\" === typeof newChild.then)\n        return updateFromMap(\n          existingChildren,\n          returnFiber,\n          newIdx,\n          unwrapThenable(newChild),\n          lanes\n        );\n      if (newChild.$$typeof === REACT_CONTEXT_TYPE)\n        return updateFromMap(\n          existingChildren,\n          returnFiber,\n          newIdx,\n          readContextDuringReconciliation(returnFiber, newChild),\n          lanes\n        );\n      throwOnInvalidObjectType(returnFiber, newChild);\n    }\n    return null;\n  }\n  function reconcileChildrenArray(\n    returnFiber,\n    currentFirstChild,\n    newChildren,\n    lanes\n  ) {\n    for (\n      var resultingFirstChild = null,\n        previousNewFiber = null,\n        oldFiber = currentFirstChild,\n        newIdx = (currentFirstChild = 0),\n        nextOldFiber = null;\n      null !== oldFiber && newIdx < newChildren.length;\n      newIdx++\n    ) {\n      oldFiber.index > newIdx\n        ? ((nextOldFiber = oldFiber), (oldFiber = null))\n        : (nextOldFiber = oldFiber.sibling);\n      var newFiber = updateSlot(\n        returnFiber,\n        oldFiber,\n        newChildren[newIdx],\n        lanes\n      );\n      if (null === newFiber) {\n        null === oldFiber && (oldFiber = nextOldFiber);\n        break;\n      }\n      shouldTrackSideEffects &&\n        oldFiber &&\n        null === newFiber.alternate &&\n        deleteChild(returnFiber, oldFiber);\n      currentFirstChild = placeChild(newFiber, currentFirstChild, newIdx);\n      null === previousNewFiber\n        ? (resultingFirstChild = newFiber)\n        : (previousNewFiber.sibling = newFiber);\n      previousNewFiber = newFiber;\n      oldFiber = nextOldFiber;\n    }\n    if (newIdx === newChildren.length)\n      return (\n        deleteRemainingChildren(returnFiber, oldFiber),\n        isHydrating && pushTreeFork(returnFiber, newIdx),\n        resultingFirstChild\n      );\n    if (null === oldFiber) {\n      for (; newIdx < newChildren.length; newIdx++)\n        (oldFiber = createChild(returnFiber, newChildren[newIdx], lanes)),\n          null !== oldFiber &&\n            ((currentFirstChild = placeChild(\n              oldFiber,\n              currentFirstChild,\n              newIdx\n            )),\n            null === previousNewFiber\n              ? (resultingFirstChild = oldFiber)\n              : (previousNewFiber.sibling = oldFiber),\n            (previousNewFiber = oldFiber));\n      isHydrating && pushTreeFork(returnFiber, newIdx);\n      return resultingFirstChild;\n    }\n    for (\n      oldFiber = mapRemainingChildren(oldFiber);\n      newIdx < newChildren.length;\n      newIdx++\n    )\n      (nextOldFiber = updateFromMap(\n        oldFiber,\n        returnFiber,\n        newIdx,\n        newChildren[newIdx],\n        lanes\n      )),\n        null !== nextOldFiber &&\n          (shouldTrackSideEffects &&\n            null !== nextOldFiber.alternate &&\n            oldFiber.delete(\n              null === nextOldFiber.key ? newIdx : nextOldFiber.key\n            ),\n          (currentFirstChild = placeChild(\n            nextOldFiber,\n            currentFirstChild,\n            newIdx\n          )),\n          null === previousNewFiber\n            ? (resultingFirstChild = nextOldFiber)\n            : (previousNewFiber.sibling = nextOldFiber),\n          (previousNewFiber = nextOldFiber));\n    shouldTrackSideEffects &&\n      oldFiber.forEach(function (child) {\n        return deleteChild(returnFiber, child);\n      });\n    isHydrating && pushTreeFork(returnFiber, newIdx);\n    return resultingFirstChild;\n  }\n  function reconcileChildrenIterator(\n    returnFiber,\n    currentFirstChild,\n    newChildren,\n    lanes\n  ) {\n    if (null == newChildren) throw Error(formatProdErrorMessage(151));\n    for (\n      var resultingFirstChild = null,\n        previousNewFiber = null,\n        oldFiber = currentFirstChild,\n        newIdx = (currentFirstChild = 0),\n        nextOldFiber = null,\n        step = newChildren.next();\n      null !== oldFiber && !step.done;\n      newIdx++, step = newChildren.next()\n    ) {\n      oldFiber.index > newIdx\n        ? ((nextOldFiber = oldFiber), (oldFiber = null))\n        : (nextOldFiber = oldFiber.sibling);\n      var newFiber = updateSlot(returnFiber, oldFiber, step.value, lanes);\n      if (null === newFiber) {\n        null === oldFiber && (oldFiber = nextOldFiber);\n        break;\n      }\n      shouldTrackSideEffects &&\n        oldFiber &&\n        null === newFiber.alternate &&\n        deleteChild(returnFiber, oldFiber);\n      currentFirstChild = placeChild(newFiber, currentFirstChild, newIdx);\n      null === previousNewFiber\n        ? (resultingFirstChild = newFiber)\n        : (previousNewFiber.sibling = newFiber);\n      previousNewFiber = newFiber;\n      oldFiber = nextOldFiber;\n    }\n    if (step.done)\n      return (\n        deleteRemainingChildren(returnFiber, oldFiber),\n        isHydrating && pushTreeFork(returnFiber, newIdx),\n        resultingFirstChild\n      );\n    if (null === oldFiber) {\n      for (; !step.done; newIdx++, step = newChildren.next())\n        (step = createChild(returnFiber, step.value, lanes)),\n          null !== step &&\n            ((currentFirstChild = placeChild(step, currentFirstChild, newIdx)),\n            null === previousNewFiber\n              ? (resultingFirstChild = step)\n              : (previousNewFiber.sibling = step),\n            (previousNewFiber = step));\n      isHydrating && pushTreeFork(returnFiber, newIdx);\n      return resultingFirstChild;\n    }\n    for (\n      oldFiber = mapRemainingChildren(oldFiber);\n      !step.done;\n      newIdx++, step = newChildren.next()\n    )\n      (step = updateFromMap(oldFiber, returnFiber, newIdx, step.value, lanes)),\n        null !== step &&\n          (shouldTrackSideEffects &&\n            null !== step.alternate &&\n            oldFiber.delete(null === step.key ? newIdx : step.key),\n          (currentFirstChild = placeChild(step, currentFirstChild, newIdx)),\n          null === previousNewFiber\n            ? (resultingFirstChild = step)\n            : (previousNewFiber.sibling = step),\n          (previousNewFiber = step));\n    shouldTrackSideEffects &&\n      oldFiber.forEach(function (child) {\n        return deleteChild(returnFiber, child);\n      });\n    isHydrating && pushTreeFork(returnFiber, newIdx);\n    return resultingFirstChild;\n  }\n  function reconcileChildFibersImpl(\n    returnFiber,\n    currentFirstChild,\n    newChild,\n    lanes\n  ) {\n    \"object\" === typeof newChild &&\n      null !== newChild &&\n      newChild.type === REACT_FRAGMENT_TYPE &&\n      null === newChild.key &&\n      (newChild = newChild.props.children);\n    if (\"object\" === typeof newChild && null !== newChild) {\n      switch (newChild.$$typeof) {\n        case REACT_ELEMENT_TYPE:\n          a: {\n            for (var key = newChild.key; null !== currentFirstChild; ) {\n              if (currentFirstChild.key === key) {\n                key = newChild.type;\n                if (key === REACT_FRAGMENT_TYPE) {\n                  if (7 === currentFirstChild.tag) {\n                    deleteRemainingChildren(\n                      returnFiber,\n                      currentFirstChild.sibling\n                    );\n                    lanes = useFiber(\n                      currentFirstChild,\n                      newChild.props.children\n                    );\n                    lanes.return = returnFiber;\n                    returnFiber = lanes;\n                    break a;\n                  }\n                } else if (\n                  currentFirstChild.elementType === key ||\n                  (\"object\" === typeof key &&\n                    null !== key &&\n                    key.$$typeof === REACT_LAZY_TYPE &&\n                    resolveLazy(key) === currentFirstChild.type)\n                ) {\n                  deleteRemainingChildren(\n                    returnFiber,\n                    currentFirstChild.sibling\n                  );\n                  lanes = useFiber(currentFirstChild, newChild.props);\n                  coerceRef(lanes, newChild);\n                  lanes.return = returnFiber;\n                  returnFiber = lanes;\n                  break a;\n                }\n                deleteRemainingChildren(returnFiber, currentFirstChild);\n                break;\n              } else deleteChild(returnFiber, currentFirstChild);\n              currentFirstChild = currentFirstChild.sibling;\n            }\n            newChild.type === REACT_FRAGMENT_TYPE\n              ? ((lanes = createFiberFromFragment(\n                  newChild.props.children,\n                  returnFiber.mode,\n                  lanes,\n                  newChild.key\n                )),\n                (lanes.return = returnFiber),\n                (returnFiber = lanes))\n              : ((lanes = createFiberFromTypeAndProps(\n                  newChild.type,\n                  newChild.key,\n                  newChild.props,\n                  null,\n                  returnFiber.mode,\n                  lanes\n                )),\n                coerceRef(lanes, newChild),\n                (lanes.return = returnFiber),\n                (returnFiber = lanes));\n          }\n          return placeSingleChild(returnFiber);\n        case REACT_PORTAL_TYPE:\n          a: {\n            for (key = newChild.key; null !== currentFirstChild; ) {\n              if (currentFirstChild.key === key)\n                if (\n                  4 === currentFirstChild.tag &&\n                  currentFirstChild.stateNode.containerInfo ===\n                    newChild.containerInfo &&\n                  currentFirstChild.stateNode.implementation ===\n                    newChild.implementation\n                ) {\n                  deleteRemainingChildren(\n                    returnFiber,\n                    currentFirstChild.sibling\n                  );\n                  lanes = useFiber(currentFirstChild, newChild.children || []);\n                  lanes.return = returnFiber;\n                  returnFiber = lanes;\n                  break a;\n                } else {\n                  deleteRemainingChildren(returnFiber, currentFirstChild);\n                  break;\n                }\n              else deleteChild(returnFiber, currentFirstChild);\n              currentFirstChild = currentFirstChild.sibling;\n            }\n            lanes = createFiberFromPortal(newChild, returnFiber.mode, lanes);\n            lanes.return = returnFiber;\n            returnFiber = lanes;\n          }\n          return placeSingleChild(returnFiber);\n        case REACT_LAZY_TYPE:\n          return (\n            (key = newChild._init),\n            (newChild = key(newChild._payload)),\n            reconcileChildFibersImpl(\n              returnFiber,\n              currentFirstChild,\n              newChild,\n              lanes\n            )\n          );\n      }\n      if (isArrayImpl(newChild))\n        return reconcileChildrenArray(\n          returnFiber,\n          currentFirstChild,\n          newChild,\n          lanes\n        );\n      if (getIteratorFn(newChild)) {\n        key = getIteratorFn(newChild);\n        if (\"function\" !== typeof key) throw Error(formatProdErrorMessage(150));\n        newChild = key.call(newChild);\n        return reconcileChildrenIterator(\n          returnFiber,\n          currentFirstChild,\n          newChild,\n          lanes\n        );\n      }\n      if (\"function\" === typeof newChild.then)\n        return reconcileChildFibersImpl(\n          returnFiber,\n          currentFirstChild,\n          unwrapThenable(newChild),\n          lanes\n        );\n      if (newChild.$$typeof === REACT_CONTEXT_TYPE)\n        return reconcileChildFibersImpl(\n          returnFiber,\n          currentFirstChild,\n          readContextDuringReconciliation(returnFiber, newChild),\n          lanes\n        );\n      throwOnInvalidObjectType(returnFiber, newChild);\n    }\n    return (\"string\" === typeof newChild && \"\" !== newChild) ||\n      \"number\" === typeof newChild ||\n      \"bigint\" === typeof newChild\n      ? ((newChild = \"\" + newChild),\n        null !== currentFirstChild && 6 === currentFirstChild.tag\n          ? (deleteRemainingChildren(returnFiber, currentFirstChild.sibling),\n            (lanes = useFiber(currentFirstChild, newChild)),\n            (lanes.return = returnFiber),\n            (returnFiber = lanes))\n          : (deleteRemainingChildren(returnFiber, currentFirstChild),\n            (lanes = createFiberFromText(newChild, returnFiber.mode, lanes)),\n            (lanes.return = returnFiber),\n            (returnFiber = lanes)),\n        placeSingleChild(returnFiber))\n      : deleteRemainingChildren(returnFiber, currentFirstChild);\n  }\n  return function (returnFiber, currentFirstChild, newChild, lanes) {\n    try {\n      thenableIndexCounter = 0;\n      var firstChildFiber = reconcileChildFibersImpl(\n        returnFiber,\n        currentFirstChild,\n        newChild,\n        lanes\n      );\n      thenableState = null;\n      return firstChildFiber;\n    } catch (x) {\n      if (x === SuspenseException || x === SuspenseActionException) throw x;\n      var fiber = createFiberImplClass(29, x, null, returnFiber.mode);\n      fiber.lanes = lanes;\n      fiber.return = returnFiber;\n      return fiber;\n    } finally {\n    }\n  };\n}\nvar reconcileChildFibers = createChildReconciler(!0),\n  mountChildFibers = createChildReconciler(!1),\n  suspenseHandlerStackCursor = createCursor(null),\n  shellBoundary = null;\nfunction pushPrimaryTreeSuspenseHandler(handler) {\n  var current = handler.alternate;\n  push(suspenseStackCursor, suspenseStackCursor.current & 1);\n  push(suspenseHandlerStackCursor, handler);\n  null === shellBoundary &&\n    (null === current || null !== currentTreeHiddenStackCursor.current\n      ? (shellBoundary = handler)\n      : null !== current.memoizedState && (shellBoundary = handler));\n}\nfunction pushOffscreenSuspenseHandler(fiber) {\n  if (22 === fiber.tag) {\n    if (\n      (push(suspenseStackCursor, suspenseStackCursor.current),\n      push(suspenseHandlerStackCursor, fiber),\n      null === shellBoundary)\n    ) {\n      var current = fiber.alternate;\n      null !== current &&\n        null !== current.memoizedState &&\n        (shellBoundary = fiber);\n    }\n  } else reuseSuspenseHandlerOnStack(fiber);\n}\nfunction reuseSuspenseHandlerOnStack() {\n  push(suspenseStackCursor, suspenseStackCursor.current);\n  push(suspenseHandlerStackCursor, suspenseHandlerStackCursor.current);\n}\nfunction popSuspenseHandler(fiber) {\n  pop(suspenseHandlerStackCursor);\n  shellBoundary === fiber && (shellBoundary = null);\n  pop(suspenseStackCursor);\n}\nvar suspenseStackCursor = createCursor(0);\nfunction findFirstSuspended(row) {\n  for (var node = row; null !== node; ) {\n    if (13 === node.tag) {\n      var state = node.memoizedState;\n      if (\n        null !== state &&\n        ((state = state.dehydrated),\n        null === state ||\n          \"$?\" === state.data ||\n          isSuspenseInstanceFallback(state))\n      )\n        return node;\n    } else if (19 === node.tag && void 0 !== node.memoizedProps.revealOrder) {\n      if (0 !== (node.flags & 128)) return node;\n    } else if (null !== node.child) {\n      node.child.return = node;\n      node = node.child;\n      continue;\n    }\n    if (node === row) break;\n    for (; null === node.sibling; ) {\n      if (null === node.return || node.return === row) return null;\n      node = node.return;\n    }\n    node.sibling.return = node.return;\n    node = node.sibling;\n  }\n  return null;\n}\nfunction applyDerivedStateFromProps(\n  workInProgress,\n  ctor,\n  getDerivedStateFromProps,\n  nextProps\n) {\n  ctor = workInProgress.memoizedState;\n  getDerivedStateFromProps = getDerivedStateFromProps(nextProps, ctor);\n  getDerivedStateFromProps =\n    null === getDerivedStateFromProps || void 0 === getDerivedStateFromProps\n      ? ctor\n      : assign({}, ctor, getDerivedStateFromProps);\n  workInProgress.memoizedState = getDerivedStateFromProps;\n  0 === workInProgress.lanes &&\n    (workInProgress.updateQueue.baseState = getDerivedStateFromProps);\n}\nvar classComponentUpdater = {\n  enqueueSetState: function (inst, payload, callback) {\n    inst = inst._reactInternals;\n    var lane = requestUpdateLane(),\n      update = createUpdate(lane);\n    update.payload = payload;\n    void 0 !== callback && null !== callback && (update.callback = callback);\n    payload = enqueueUpdate(inst, update, lane);\n    null !== payload &&\n      (scheduleUpdateOnFiber(payload, inst, lane),\n      entangleTransitions(payload, inst, lane));\n  },\n  enqueueReplaceState: function (inst, payload, callback) {\n    inst = inst._reactInternals;\n    var lane = requestUpdateLane(),\n      update = createUpdate(lane);\n    update.tag = 1;\n    update.payload = payload;\n    void 0 !== callback && null !== callback && (update.callback = callback);\n    payload = enqueueUpdate(inst, update, lane);\n    null !== payload &&\n      (scheduleUpdateOnFiber(payload, inst, lane),\n      entangleTransitions(payload, inst, lane));\n  },\n  enqueueForceUpdate: function (inst, callback) {\n    inst = inst._reactInternals;\n    var lane = requestUpdateLane(),\n      update = createUpdate(lane);\n    update.tag = 2;\n    void 0 !== callback && null !== callback && (update.callback = callback);\n    callback = enqueueUpdate(inst, update, lane);\n    null !== callback &&\n      (scheduleUpdateOnFiber(callback, inst, lane),\n      entangleTransitions(callback, inst, lane));\n  }\n};\nfunction checkShouldComponentUpdate(\n  workInProgress,\n  ctor,\n  oldProps,\n  newProps,\n  oldState,\n  newState,\n  nextContext\n) {\n  workInProgress = workInProgress.stateNode;\n  return \"function\" === typeof workInProgress.shouldComponentUpdate\n    ? workInProgress.shouldComponentUpdate(newProps, newState, nextContext)\n    : ctor.prototype && ctor.prototype.isPureReactComponent\n      ? !shallowEqual(oldProps, newProps) || !shallowEqual(oldState, newState)\n      : !0;\n}\nfunction callComponentWillReceiveProps(\n  workInProgress,\n  instance,\n  newProps,\n  nextContext\n) {\n  workInProgress = instance.state;\n  \"function\" === typeof instance.componentWillReceiveProps &&\n    instance.componentWillReceiveProps(newProps, nextContext);\n  \"function\" === typeof instance.UNSAFE_componentWillReceiveProps &&\n    instance.UNSAFE_componentWillReceiveProps(newProps, nextContext);\n  instance.state !== workInProgress &&\n    classComponentUpdater.enqueueReplaceState(instance, instance.state, null);\n}\nfunction resolveClassComponentProps(Component, baseProps) {\n  var newProps = baseProps;\n  if (\"ref\" in baseProps) {\n    newProps = {};\n    for (var propName in baseProps)\n      \"ref\" !== propName && (newProps[propName] = baseProps[propName]);\n  }\n  if ((Component = Component.defaultProps)) {\n    newProps === baseProps && (newProps = assign({}, newProps));\n    for (var propName$73 in Component)\n      void 0 === newProps[propName$73] &&\n        (newProps[propName$73] = Component[propName$73]);\n  }\n  return newProps;\n}\nvar reportGlobalError =\n  \"function\" === typeof reportError\n    ? reportError\n    : function (error) {\n        if (\n          \"object\" === typeof window &&\n          \"function\" === typeof window.ErrorEvent\n        ) {\n          var event = new window.ErrorEvent(\"error\", {\n            bubbles: !0,\n            cancelable: !0,\n            message:\n              \"object\" === typeof error &&\n              null !== error &&\n              \"string\" === typeof error.message\n                ? String(error.message)\n                : String(error),\n            error: error\n          });\n          if (!window.dispatchEvent(event)) return;\n        } else if (\n          \"object\" === typeof process &&\n          \"function\" === typeof process.emit\n        ) {\n          process.emit(\"uncaughtException\", error);\n          return;\n        }\n        console.error(error);\n      };\nfunction defaultOnUncaughtError(error) {\n  reportGlobalError(error);\n}\nfunction defaultOnCaughtError(error) {\n  console.error(error);\n}\nfunction defaultOnRecoverableError(error) {\n  reportGlobalError(error);\n}\nfunction logUncaughtError(root, errorInfo) {\n  try {\n    var onUncaughtError = root.onUncaughtError;\n    onUncaughtError(errorInfo.value, { componentStack: errorInfo.stack });\n  } catch (e$74) {\n    setTimeout(function () {\n      throw e$74;\n    });\n  }\n}\nfunction logCaughtError(root, boundary, errorInfo) {\n  try {\n    var onCaughtError = root.onCaughtError;\n    onCaughtError(errorInfo.value, {\n      componentStack: errorInfo.stack,\n      errorBoundary: 1 === boundary.tag ? boundary.stateNode : null\n    });\n  } catch (e$75) {\n    setTimeout(function () {\n      throw e$75;\n    });\n  }\n}\nfunction createRootErrorUpdate(root, errorInfo, lane) {\n  lane = createUpdate(lane);\n  lane.tag = 3;\n  lane.payload = { element: null };\n  lane.callback = function () {\n    logUncaughtError(root, errorInfo);\n  };\n  return lane;\n}\nfunction createClassErrorUpdate(lane) {\n  lane = createUpdate(lane);\n  lane.tag = 3;\n  return lane;\n}\nfunction initializeClassErrorUpdate(update, root, fiber, errorInfo) {\n  var getDerivedStateFromError = fiber.type.getDerivedStateFromError;\n  if (\"function\" === typeof getDerivedStateFromError) {\n    var error = errorInfo.value;\n    update.payload = function () {\n      return getDerivedStateFromError(error);\n    };\n    update.callback = function () {\n      logCaughtError(root, fiber, errorInfo);\n    };\n  }\n  var inst = fiber.stateNode;\n  null !== inst &&\n    \"function\" === typeof inst.componentDidCatch &&\n    (update.callback = function () {\n      logCaughtError(root, fiber, errorInfo);\n      \"function\" !== typeof getDerivedStateFromError &&\n        (null === legacyErrorBoundariesThatAlreadyFailed\n          ? (legacyErrorBoundariesThatAlreadyFailed = new Set([this]))\n          : legacyErrorBoundariesThatAlreadyFailed.add(this));\n      var stack = errorInfo.stack;\n      this.componentDidCatch(errorInfo.value, {\n        componentStack: null !== stack ? stack : \"\"\n      });\n    });\n}\nfunction throwException(\n  root,\n  returnFiber,\n  sourceFiber,\n  value,\n  rootRenderLanes\n) {\n  sourceFiber.flags |= 32768;\n  if (\n    null !== value &&\n    \"object\" === typeof value &&\n    \"function\" === typeof value.then\n  ) {\n    returnFiber = sourceFiber.alternate;\n    null !== returnFiber &&\n      propagateParentContextChanges(\n        returnFiber,\n        sourceFiber,\n        rootRenderLanes,\n        !0\n      );\n    sourceFiber = suspenseHandlerStackCursor.current;\n    if (null !== sourceFiber) {\n      switch (sourceFiber.tag) {\n        case 13:\n          return (\n            null === shellBoundary\n              ? renderDidSuspendDelayIfPossible()\n              : null === sourceFiber.alternate &&\n                0 === workInProgressRootExitStatus &&\n                (workInProgressRootExitStatus = 3),\n            (sourceFiber.flags &= -257),\n            (sourceFiber.flags |= 65536),\n            (sourceFiber.lanes = rootRenderLanes),\n            value === noopSuspenseyCommitThenable\n              ? (sourceFiber.flags |= 16384)\n              : ((returnFiber = sourceFiber.updateQueue),\n                null === returnFiber\n                  ? (sourceFiber.updateQueue = new Set([value]))\n                  : returnFiber.add(value),\n                attachPingListener(root, value, rootRenderLanes)),\n            !1\n          );\n        case 22:\n          return (\n            (sourceFiber.flags |= 65536),\n            value === noopSuspenseyCommitThenable\n              ? (sourceFiber.flags |= 16384)\n              : ((returnFiber = sourceFiber.updateQueue),\n                null === returnFiber\n                  ? ((returnFiber = {\n                      transitions: null,\n                      markerInstances: null,\n                      retryQueue: new Set([value])\n                    }),\n                    (sourceFiber.updateQueue = returnFiber))\n                  : ((sourceFiber = returnFiber.retryQueue),\n                    null === sourceFiber\n                      ? (returnFiber.retryQueue = new Set([value]))\n                      : sourceFiber.add(value)),\n                attachPingListener(root, value, rootRenderLanes)),\n            !1\n          );\n      }\n      throw Error(formatProdErrorMessage(435, sourceFiber.tag));\n    }\n    attachPingListener(root, value, rootRenderLanes);\n    renderDidSuspendDelayIfPossible();\n    return !1;\n  }\n  if (isHydrating)\n    return (\n      (returnFiber = suspenseHandlerStackCursor.current),\n      null !== returnFiber\n        ? (0 === (returnFiber.flags & 65536) && (returnFiber.flags |= 256),\n          (returnFiber.flags |= 65536),\n          (returnFiber.lanes = rootRenderLanes),\n          value !== HydrationMismatchException &&\n            ((root = Error(formatProdErrorMessage(422), { cause: value })),\n            queueHydrationError(createCapturedValueAtFiber(root, sourceFiber))))\n        : (value !== HydrationMismatchException &&\n            ((returnFiber = Error(formatProdErrorMessage(423), {\n              cause: value\n            })),\n            queueHydrationError(\n              createCapturedValueAtFiber(returnFiber, sourceFiber)\n            )),\n          (root = root.current.alternate),\n          (root.flags |= 65536),\n          (rootRenderLanes &= -rootRenderLanes),\n          (root.lanes |= rootRenderLanes),\n          (value = createCapturedValueAtFiber(value, sourceFiber)),\n          (rootRenderLanes = createRootErrorUpdate(\n            root.stateNode,\n            value,\n            rootRenderLanes\n          )),\n          enqueueCapturedUpdate(root, rootRenderLanes),\n          4 !== workInProgressRootExitStatus &&\n            (workInProgressRootExitStatus = 2)),\n      !1\n    );\n  var wrapperError = Error(formatProdErrorMessage(520), { cause: value });\n  wrapperError = createCapturedValueAtFiber(wrapperError, sourceFiber);\n  null === workInProgressRootConcurrentErrors\n    ? (workInProgressRootConcurrentErrors = [wrapperError])\n    : workInProgressRootConcurrentErrors.push(wrapperError);\n  4 !== workInProgressRootExitStatus && (workInProgressRootExitStatus = 2);\n  if (null === returnFiber) return !0;\n  value = createCapturedValueAtFiber(value, sourceFiber);\n  sourceFiber = returnFiber;\n  do {\n    switch (sourceFiber.tag) {\n      case 3:\n        return (\n          (sourceFiber.flags |= 65536),\n          (root = rootRenderLanes & -rootRenderLanes),\n          (sourceFiber.lanes |= root),\n          (root = createRootErrorUpdate(sourceFiber.stateNode, value, root)),\n          enqueueCapturedUpdate(sourceFiber, root),\n          !1\n        );\n      case 1:\n        if (\n          ((returnFiber = sourceFiber.type),\n          (wrapperError = sourceFiber.stateNode),\n          0 === (sourceFiber.flags & 128) &&\n            (\"function\" === typeof returnFiber.getDerivedStateFromError ||\n              (null !== wrapperError &&\n                \"function\" === typeof wrapperError.componentDidCatch &&\n                (null === legacyErrorBoundariesThatAlreadyFailed ||\n                  !legacyErrorBoundariesThatAlreadyFailed.has(wrapperError)))))\n        )\n          return (\n            (sourceFiber.flags |= 65536),\n            (rootRenderLanes &= -rootRenderLanes),\n            (sourceFiber.lanes |= rootRenderLanes),\n            (rootRenderLanes = createClassErrorUpdate(rootRenderLanes)),\n            initializeClassErrorUpdate(\n              rootRenderLanes,\n              root,\n              sourceFiber,\n              value\n            ),\n            enqueueCapturedUpdate(sourceFiber, rootRenderLanes),\n            !1\n          );\n    }\n    sourceFiber = sourceFiber.return;\n  } while (null !== sourceFiber);\n  return !1;\n}\nvar SelectiveHydrationException = Error(formatProdErrorMessage(461)),\n  didReceiveUpdate = !1;\nfunction reconcileChildren(current, workInProgress, nextChildren, renderLanes) {\n  workInProgress.child =\n    null === current\n      ? mountChildFibers(workInProgress, null, nextChildren, renderLanes)\n      : reconcileChildFibers(\n          workInProgress,\n          current.child,\n          nextChildren,\n          renderLanes\n        );\n}\nfunction updateForwardRef(\n  current,\n  workInProgress,\n  Component,\n  nextProps,\n  renderLanes\n) {\n  Component = Component.render;\n  var ref = workInProgress.ref;\n  if (\"ref\" in nextProps) {\n    var propsWithoutRef = {};\n    for (var key in nextProps)\n      \"ref\" !== key && (propsWithoutRef[key] = nextProps[key]);\n  } else propsWithoutRef = nextProps;\n  prepareToReadContext(workInProgress);\n  nextProps = renderWithHooks(\n    current,\n    workInProgress,\n    Component,\n    propsWithoutRef,\n    ref,\n    renderLanes\n  );\n  key = checkDidRenderIdHook();\n  if (null !== current && !didReceiveUpdate)\n    return (\n      bailoutHooks(current, workInProgress, renderLanes),\n      bailoutOnAlreadyFinishedWork(current, workInProgress, renderLanes)\n    );\n  isHydrating && key && pushMaterializedTreeId(workInProgress);\n  workInProgress.flags |= 1;\n  reconcileChildren(current, workInProgress, nextProps, renderLanes);\n  return workInProgress.child;\n}\nfunction updateMemoComponent(\n  current,\n  workInProgress,\n  Component,\n  nextProps,\n  renderLanes\n) {\n  if (null === current) {\n    var type = Component.type;\n    if (\n      \"function\" === typeof type &&\n      !shouldConstruct(type) &&\n      void 0 === type.defaultProps &&\n      null === Component.compare\n    )\n      return (\n        (workInProgress.tag = 15),\n        (workInProgress.type = type),\n        updateSimpleMemoComponent(\n          current,\n          workInProgress,\n          type,\n          nextProps,\n          renderLanes\n        )\n      );\n    current = createFiberFromTypeAndProps(\n      Component.type,\n      null,\n      nextProps,\n      workInProgress,\n      workInProgress.mode,\n      renderLanes\n    );\n    current.ref = workInProgress.ref;\n    current.return = workInProgress;\n    return (workInProgress.child = current);\n  }\n  type = current.child;\n  if (!checkScheduledUpdateOrContext(current, renderLanes)) {\n    var prevProps = type.memoizedProps;\n    Component = Component.compare;\n    Component = null !== Component ? Component : shallowEqual;\n    if (Component(prevProps, nextProps) && current.ref === workInProgress.ref)\n      return bailoutOnAlreadyFinishedWork(current, workInProgress, renderLanes);\n  }\n  workInProgress.flags |= 1;\n  current = createWorkInProgress(type, nextProps);\n  current.ref = workInProgress.ref;\n  current.return = workInProgress;\n  return (workInProgress.child = current);\n}\nfunction updateSimpleMemoComponent(\n  current,\n  workInProgress,\n  Component,\n  nextProps,\n  renderLanes\n) {\n  if (null !== current) {\n    var prevProps = current.memoizedProps;\n    if (\n      shallowEqual(prevProps, nextProps) &&\n      current.ref === workInProgress.ref\n    )\n      if (\n        ((didReceiveUpdate = !1),\n        (workInProgress.pendingProps = nextProps = prevProps),\n        checkScheduledUpdateOrContext(current, renderLanes))\n      )\n        0 !== (current.flags & 131072) && (didReceiveUpdate = !0);\n      else\n        return (\n          (workInProgress.lanes = current.lanes),\n          bailoutOnAlreadyFinishedWork(current, workInProgress, renderLanes)\n        );\n  }\n  return updateFunctionComponent(\n    current,\n    workInProgress,\n    Component,\n    nextProps,\n    renderLanes\n  );\n}\nfunction updateOffscreenComponent(current, workInProgress, renderLanes) {\n  var nextProps = workInProgress.pendingProps,\n    nextChildren = nextProps.children,\n    prevState = null !== current ? current.memoizedState : null;\n  if (\"hidden\" === nextProps.mode) {\n    if (0 !== (workInProgress.flags & 128)) {\n      nextProps =\n        null !== prevState ? prevState.baseLanes | renderLanes : renderLanes;\n      if (null !== current) {\n        nextChildren = workInProgress.child = current.child;\n        for (prevState = 0; null !== nextChildren; )\n          (prevState =\n            prevState | nextChildren.lanes | nextChildren.childLanes),\n            (nextChildren = nextChildren.sibling);\n        workInProgress.childLanes = prevState & ~nextProps;\n      } else (workInProgress.childLanes = 0), (workInProgress.child = null);\n      return deferHiddenOffscreenComponent(\n        current,\n        workInProgress,\n        nextProps,\n        renderLanes\n      );\n    }\n    if (0 !== (renderLanes & 536870912))\n      (workInProgress.memoizedState = { baseLanes: 0, cachePool: null }),\n        null !== current &&\n          pushTransition(\n            workInProgress,\n            null !== prevState ? prevState.cachePool : null\n          ),\n        null !== prevState\n          ? pushHiddenContext(workInProgress, prevState)\n          : reuseHiddenContextOnStack(),\n        pushOffscreenSuspenseHandler(workInProgress);\n    else\n      return (\n        (workInProgress.lanes = workInProgress.childLanes = 536870912),\n        deferHiddenOffscreenComponent(\n          current,\n          workInProgress,\n          null !== prevState ? prevState.baseLanes | renderLanes : renderLanes,\n          renderLanes\n        )\n      );\n  } else\n    null !== prevState\n      ? (pushTransition(workInProgress, prevState.cachePool),\n        pushHiddenContext(workInProgress, prevState),\n        reuseSuspenseHandlerOnStack(workInProgress),\n        (workInProgress.memoizedState = null))\n      : (null !== current && pushTransition(workInProgress, null),\n        reuseHiddenContextOnStack(),\n        reuseSuspenseHandlerOnStack(workInProgress));\n  reconcileChildren(current, workInProgress, nextChildren, renderLanes);\n  return workInProgress.child;\n}\nfunction deferHiddenOffscreenComponent(\n  current,\n  workInProgress,\n  nextBaseLanes,\n  renderLanes\n) {\n  var JSCompiler_inline_result = peekCacheFromPool();\n  JSCompiler_inline_result =\n    null === JSCompiler_inline_result\n      ? null\n      : { parent: CacheContext._currentValue, pool: JSCompiler_inline_result };\n  workInProgress.memoizedState = {\n    baseLanes: nextBaseLanes,\n    cachePool: JSCompiler_inline_result\n  };\n  null !== current && pushTransition(workInProgress, null);\n  reuseHiddenContextOnStack();\n  pushOffscreenSuspenseHandler(workInProgress);\n  null !== current &&\n    propagateParentContextChanges(current, workInProgress, renderLanes, !0);\n  return null;\n}\nfunction markRef(current, workInProgress) {\n  var ref = workInProgress.ref;\n  if (null === ref)\n    null !== current &&\n      null !== current.ref &&\n      (workInProgress.flags |= 4194816);\n  else {\n    if (\"function\" !== typeof ref && \"object\" !== typeof ref)\n      throw Error(formatProdErrorMessage(284));\n    if (null === current || current.ref !== ref)\n      workInProgress.flags |= 4194816;\n  }\n}\nfunction updateFunctionComponent(\n  current,\n  workInProgress,\n  Component,\n  nextProps,\n  renderLanes\n) {\n  prepareToReadContext(workInProgress);\n  Component = renderWithHooks(\n    current,\n    workInProgress,\n    Component,\n    nextProps,\n    void 0,\n    renderLanes\n  );\n  nextProps = checkDidRenderIdHook();\n  if (null !== current && !didReceiveUpdate)\n    return (\n      bailoutHooks(current, workInProgress, renderLanes),\n      bailoutOnAlreadyFinishedWork(current, workInProgress, renderLanes)\n    );\n  isHydrating && nextProps && pushMaterializedTreeId(workInProgress);\n  workInProgress.flags |= 1;\n  reconcileChildren(current, workInProgress, Component, renderLanes);\n  return workInProgress.child;\n}\nfunction replayFunctionComponent(\n  current,\n  workInProgress,\n  nextProps,\n  Component,\n  secondArg,\n  renderLanes\n) {\n  prepareToReadContext(workInProgress);\n  workInProgress.updateQueue = null;\n  nextProps = renderWithHooksAgain(\n    workInProgress,\n    Component,\n    nextProps,\n    secondArg\n  );\n  finishRenderingHooks(current);\n  Component = checkDidRenderIdHook();\n  if (null !== current && !didReceiveUpdate)\n    return (\n      bailoutHooks(current, workInProgress, renderLanes),\n      bailoutOnAlreadyFinishedWork(current, workInProgress, renderLanes)\n    );\n  isHydrating && Component && pushMaterializedTreeId(workInProgress);\n  workInProgress.flags |= 1;\n  reconcileChildren(current, workInProgress, nextProps, renderLanes);\n  return workInProgress.child;\n}\nfunction updateClassComponent(\n  current,\n  workInProgress,\n  Component,\n  nextProps,\n  renderLanes\n) {\n  prepareToReadContext(workInProgress);\n  if (null === workInProgress.stateNode) {\n    var context = emptyContextObject,\n      contextType = Component.contextType;\n    \"object\" === typeof contextType &&\n      null !== contextType &&\n      (context = readContext(contextType));\n    context = new Component(nextProps, context);\n    workInProgress.memoizedState =\n      null !== context.state && void 0 !== context.state ? context.state : null;\n    context.updater = classComponentUpdater;\n    workInProgress.stateNode = context;\n    context._reactInternals = workInProgress;\n    context = workInProgress.stateNode;\n    context.props = nextProps;\n    context.state = workInProgress.memoizedState;\n    context.refs = {};\n    initializeUpdateQueue(workInProgress);\n    contextType = Component.contextType;\n    context.context =\n      \"object\" === typeof contextType && null !== contextType\n        ? readContext(contextType)\n        : emptyContextObject;\n    context.state = workInProgress.memoizedState;\n    contextType = Component.getDerivedStateFromProps;\n    \"function\" === typeof contextType &&\n      (applyDerivedStateFromProps(\n        workInProgress,\n        Component,\n        contextType,\n        nextProps\n      ),\n      (context.state = workInProgress.memoizedState));\n    \"function\" === typeof Component.getDerivedStateFromProps ||\n      \"function\" === typeof context.getSnapshotBeforeUpdate ||\n      (\"function\" !== typeof context.UNSAFE_componentWillMount &&\n        \"function\" !== typeof context.componentWillMount) ||\n      ((contextType = context.state),\n      \"function\" === typeof context.componentWillMount &&\n        context.componentWillMount(),\n      \"function\" === typeof context.UNSAFE_componentWillMount &&\n        context.UNSAFE_componentWillMount(),\n      contextType !== context.state &&\n        classComponentUpdater.enqueueReplaceState(context, context.state, null),\n      processUpdateQueue(workInProgress, nextProps, context, renderLanes),\n      suspendIfUpdateReadFromEntangledAsyncAction(),\n      (context.state = workInProgress.memoizedState));\n    \"function\" === typeof context.componentDidMount &&\n      (workInProgress.flags |= 4194308);\n    nextProps = !0;\n  } else if (null === current) {\n    context = workInProgress.stateNode;\n    var unresolvedOldProps = workInProgress.memoizedProps,\n      oldProps = resolveClassComponentProps(Component, unresolvedOldProps);\n    context.props = oldProps;\n    var oldContext = context.context,\n      contextType$jscomp$0 = Component.contextType;\n    contextType = emptyContextObject;\n    \"object\" === typeof contextType$jscomp$0 &&\n      null !== contextType$jscomp$0 &&\n      (contextType = readContext(contextType$jscomp$0));\n    var getDerivedStateFromProps = Component.getDerivedStateFromProps;\n    contextType$jscomp$0 =\n      \"function\" === typeof getDerivedStateFromProps ||\n      \"function\" === typeof context.getSnapshotBeforeUpdate;\n    unresolvedOldProps = workInProgress.pendingProps !== unresolvedOldProps;\n    contextType$jscomp$0 ||\n      (\"function\" !== typeof context.UNSAFE_componentWillReceiveProps &&\n        \"function\" !== typeof context.componentWillReceiveProps) ||\n      ((unresolvedOldProps || oldContext !== contextType) &&\n        callComponentWillReceiveProps(\n          workInProgress,\n          context,\n          nextProps,\n          contextType\n        ));\n    hasForceUpdate = !1;\n    var oldState = workInProgress.memoizedState;\n    context.state = oldState;\n    processUpdateQueue(workInProgress, nextProps, context, renderLanes);\n    suspendIfUpdateReadFromEntangledAsyncAction();\n    oldContext = workInProgress.memoizedState;\n    unresolvedOldProps || oldState !== oldContext || hasForceUpdate\n      ? (\"function\" === typeof getDerivedStateFromProps &&\n          (applyDerivedStateFromProps(\n            workInProgress,\n            Component,\n            getDerivedStateFromProps,\n            nextProps\n          ),\n          (oldContext = workInProgress.memoizedState)),\n        (oldProps =\n          hasForceUpdate ||\n          checkShouldComponentUpdate(\n            workInProgress,\n            Component,\n            oldProps,\n            nextProps,\n            oldState,\n            oldContext,\n            contextType\n          ))\n          ? (contextType$jscomp$0 ||\n              (\"function\" !== typeof context.UNSAFE_componentWillMount &&\n                \"function\" !== typeof context.componentWillMount) ||\n              (\"function\" === typeof context.componentWillMount &&\n                context.componentWillMount(),\n              \"function\" === typeof context.UNSAFE_componentWillMount &&\n                context.UNSAFE_componentWillMount()),\n            \"function\" === typeof context.componentDidMount &&\n              (workInProgress.flags |= 4194308))\n          : (\"function\" === typeof context.componentDidMount &&\n              (workInProgress.flags |= 4194308),\n            (workInProgress.memoizedProps = nextProps),\n            (workInProgress.memoizedState = oldContext)),\n        (context.props = nextProps),\n        (context.state = oldContext),\n        (context.context = contextType),\n        (nextProps = oldProps))\n      : (\"function\" === typeof context.componentDidMount &&\n          (workInProgress.flags |= 4194308),\n        (nextProps = !1));\n  } else {\n    context = workInProgress.stateNode;\n    cloneUpdateQueue(current, workInProgress);\n    contextType = workInProgress.memoizedProps;\n    contextType$jscomp$0 = resolveClassComponentProps(Component, contextType);\n    context.props = contextType$jscomp$0;\n    getDerivedStateFromProps = workInProgress.pendingProps;\n    oldState = context.context;\n    oldContext = Component.contextType;\n    oldProps = emptyContextObject;\n    \"object\" === typeof oldContext &&\n      null !== oldContext &&\n      (oldProps = readContext(oldContext));\n    unresolvedOldProps = Component.getDerivedStateFromProps;\n    (oldContext =\n      \"function\" === typeof unresolvedOldProps ||\n      \"function\" === typeof context.getSnapshotBeforeUpdate) ||\n      (\"function\" !== typeof context.UNSAFE_componentWillReceiveProps &&\n        \"function\" !== typeof context.componentWillReceiveProps) ||\n      ((contextType !== getDerivedStateFromProps || oldState !== oldProps) &&\n        callComponentWillReceiveProps(\n          workInProgress,\n          context,\n          nextProps,\n          oldProps\n        ));\n    hasForceUpdate = !1;\n    oldState = workInProgress.memoizedState;\n    context.state = oldState;\n    processUpdateQueue(workInProgress, nextProps, context, renderLanes);\n    suspendIfUpdateReadFromEntangledAsyncAction();\n    var newState = workInProgress.memoizedState;\n    contextType !== getDerivedStateFromProps ||\n    oldState !== newState ||\n    hasForceUpdate ||\n    (null !== current &&\n      null !== current.dependencies &&\n      checkIfContextChanged(current.dependencies))\n      ? (\"function\" === typeof unresolvedOldProps &&\n          (applyDerivedStateFromProps(\n            workInProgress,\n            Component,\n            unresolvedOldProps,\n            nextProps\n          ),\n          (newState = workInProgress.memoizedState)),\n        (contextType$jscomp$0 =\n          hasForceUpdate ||\n          checkShouldComponentUpdate(\n            workInProgress,\n            Component,\n            contextType$jscomp$0,\n            nextProps,\n            oldState,\n            newState,\n            oldProps\n          ) ||\n          (null !== current &&\n            null !== current.dependencies &&\n            checkIfContextChanged(current.dependencies)))\n          ? (oldContext ||\n              (\"function\" !== typeof context.UNSAFE_componentWillUpdate &&\n                \"function\" !== typeof context.componentWillUpdate) ||\n              (\"function\" === typeof context.componentWillUpdate &&\n                context.componentWillUpdate(nextProps, newState, oldProps),\n              \"function\" === typeof context.UNSAFE_componentWillUpdate &&\n                context.UNSAFE_componentWillUpdate(\n                  nextProps,\n                  newState,\n                  oldProps\n                )),\n            \"function\" === typeof context.componentDidUpdate &&\n              (workInProgress.flags |= 4),\n            \"function\" === typeof context.getSnapshotBeforeUpdate &&\n              (workInProgress.flags |= 1024))\n          : (\"function\" !== typeof context.componentDidUpdate ||\n              (contextType === current.memoizedProps &&\n                oldState === current.memoizedState) ||\n              (workInProgress.flags |= 4),\n            \"function\" !== typeof context.getSnapshotBeforeUpdate ||\n              (contextType === current.memoizedProps &&\n                oldState === current.memoizedState) ||\n              (workInProgress.flags |= 1024),\n            (workInProgress.memoizedProps = nextProps),\n            (workInProgress.memoizedState = newState)),\n        (context.props = nextProps),\n        (context.state = newState),\n        (context.context = oldProps),\n        (nextProps = contextType$jscomp$0))\n      : (\"function\" !== typeof context.componentDidUpdate ||\n          (contextType === current.memoizedProps &&\n            oldState === current.memoizedState) ||\n          (workInProgress.flags |= 4),\n        \"function\" !== typeof context.getSnapshotBeforeUpdate ||\n          (contextType === current.memoizedProps &&\n            oldState === current.memoizedState) ||\n          (workInProgress.flags |= 1024),\n        (nextProps = !1));\n  }\n  context = nextProps;\n  markRef(current, workInProgress);\n  nextProps = 0 !== (workInProgress.flags & 128);\n  context || nextProps\n    ? ((context = workInProgress.stateNode),\n      (Component =\n        nextProps && \"function\" !== typeof Component.getDerivedStateFromError\n          ? null\n          : context.render()),\n      (workInProgress.flags |= 1),\n      null !== current && nextProps\n        ? ((workInProgress.child = reconcileChildFibers(\n            workInProgress,\n            current.child,\n            null,\n            renderLanes\n          )),\n          (workInProgress.child = reconcileChildFibers(\n            workInProgress,\n            null,\n            Component,\n            renderLanes\n          )))\n        : reconcileChildren(current, workInProgress, Component, renderLanes),\n      (workInProgress.memoizedState = context.state),\n      (current = workInProgress.child))\n    : (current = bailoutOnAlreadyFinishedWork(\n        current,\n        workInProgress,\n        renderLanes\n      ));\n  return current;\n}\nfunction mountHostRootWithoutHydrating(\n  current,\n  workInProgress,\n  nextChildren,\n  renderLanes\n) {\n  resetHydrationState();\n  workInProgress.flags |= 256;\n  reconcileChildren(current, workInProgress, nextChildren, renderLanes);\n  return workInProgress.child;\n}\nvar SUSPENDED_MARKER = {\n  dehydrated: null,\n  treeContext: null,\n  retryLane: 0,\n  hydrationErrors: null\n};\nfunction mountSuspenseOffscreenState(renderLanes) {\n  return { baseLanes: renderLanes, cachePool: getSuspendedCache() };\n}\nfunction getRemainingWorkInPrimaryTree(\n  current,\n  primaryTreeDidDefer,\n  renderLanes\n) {\n  current = null !== current ? current.childLanes & ~renderLanes : 0;\n  primaryTreeDidDefer && (current |= workInProgressDeferredLane);\n  return current;\n}\nfunction updateSuspenseComponent(current, workInProgress, renderLanes) {\n  var nextProps = workInProgress.pendingProps,\n    showFallback = !1,\n    didSuspend = 0 !== (workInProgress.flags & 128),\n    JSCompiler_temp;\n  (JSCompiler_temp = didSuspend) ||\n    (JSCompiler_temp =\n      null !== current && null === current.memoizedState\n        ? !1\n        : 0 !== (suspenseStackCursor.current & 2));\n  JSCompiler_temp && ((showFallback = !0), (workInProgress.flags &= -129));\n  JSCompiler_temp = 0 !== (workInProgress.flags & 32);\n  workInProgress.flags &= -33;\n  if (null === current) {\n    if (isHydrating) {\n      showFallback\n        ? pushPrimaryTreeSuspenseHandler(workInProgress)\n        : reuseSuspenseHandlerOnStack(workInProgress);\n      if (isHydrating) {\n        var nextInstance = nextHydratableInstance,\n          JSCompiler_temp$jscomp$0;\n        if ((JSCompiler_temp$jscomp$0 = nextInstance)) {\n          c: {\n            JSCompiler_temp$jscomp$0 = nextInstance;\n            for (\n              nextInstance = rootOrSingletonContext;\n              8 !== JSCompiler_temp$jscomp$0.nodeType;\n\n            ) {\n              if (!nextInstance) {\n                nextInstance = null;\n                break c;\n              }\n              JSCompiler_temp$jscomp$0 = getNextHydratable(\n                JSCompiler_temp$jscomp$0.nextSibling\n              );\n              if (null === JSCompiler_temp$jscomp$0) {\n                nextInstance = null;\n                break c;\n              }\n            }\n            nextInstance = JSCompiler_temp$jscomp$0;\n          }\n          null !== nextInstance\n            ? ((workInProgress.memoizedState = {\n                dehydrated: nextInstance,\n                treeContext:\n                  null !== treeContextProvider\n                    ? { id: treeContextId, overflow: treeContextOverflow }\n                    : null,\n                retryLane: 536870912,\n                hydrationErrors: null\n              }),\n              (JSCompiler_temp$jscomp$0 = createFiberImplClass(\n                18,\n                null,\n                null,\n                0\n              )),\n              (JSCompiler_temp$jscomp$0.stateNode = nextInstance),\n              (JSCompiler_temp$jscomp$0.return = workInProgress),\n              (workInProgress.child = JSCompiler_temp$jscomp$0),\n              (hydrationParentFiber = workInProgress),\n              (nextHydratableInstance = null),\n              (JSCompiler_temp$jscomp$0 = !0))\n            : (JSCompiler_temp$jscomp$0 = !1);\n        }\n        JSCompiler_temp$jscomp$0 || throwOnHydrationMismatch(workInProgress);\n      }\n      nextInstance = workInProgress.memoizedState;\n      if (\n        null !== nextInstance &&\n        ((nextInstance = nextInstance.dehydrated), null !== nextInstance)\n      )\n        return (\n          isSuspenseInstanceFallback(nextInstance)\n            ? (workInProgress.lanes = 32)\n            : (workInProgress.lanes = 536870912),\n          null\n        );\n      popSuspenseHandler(workInProgress);\n    }\n    nextInstance = nextProps.children;\n    nextProps = nextProps.fallback;\n    if (showFallback)\n      return (\n        reuseSuspenseHandlerOnStack(workInProgress),\n        (showFallback = workInProgress.mode),\n        (nextInstance = mountWorkInProgressOffscreenFiber(\n          { mode: \"hidden\", children: nextInstance },\n          showFallback\n        )),\n        (nextProps = createFiberFromFragment(\n          nextProps,\n          showFallback,\n          renderLanes,\n          null\n        )),\n        (nextInstance.return = workInProgress),\n        (nextProps.return = workInProgress),\n        (nextInstance.sibling = nextProps),\n        (workInProgress.child = nextInstance),\n        (showFallback = workInProgress.child),\n        (showFallback.memoizedState = mountSuspenseOffscreenState(renderLanes)),\n        (showFallback.childLanes = getRemainingWorkInPrimaryTree(\n          current,\n          JSCompiler_temp,\n          renderLanes\n        )),\n        (workInProgress.memoizedState = SUSPENDED_MARKER),\n        nextProps\n      );\n    pushPrimaryTreeSuspenseHandler(workInProgress);\n    return mountSuspensePrimaryChildren(workInProgress, nextInstance);\n  }\n  JSCompiler_temp$jscomp$0 = current.memoizedState;\n  if (\n    null !== JSCompiler_temp$jscomp$0 &&\n    ((nextInstance = JSCompiler_temp$jscomp$0.dehydrated),\n    null !== nextInstance)\n  ) {\n    if (didSuspend)\n      workInProgress.flags & 256\n        ? (pushPrimaryTreeSuspenseHandler(workInProgress),\n          (workInProgress.flags &= -257),\n          (workInProgress = retrySuspenseComponentWithoutHydrating(\n            current,\n            workInProgress,\n            renderLanes\n          )))\n        : null !== workInProgress.memoizedState\n          ? (reuseSuspenseHandlerOnStack(workInProgress),\n            (workInProgress.child = current.child),\n            (workInProgress.flags |= 128),\n            (workInProgress = null))\n          : (reuseSuspenseHandlerOnStack(workInProgress),\n            (showFallback = nextProps.fallback),\n            (nextInstance = workInProgress.mode),\n            (nextProps = mountWorkInProgressOffscreenFiber(\n              { mode: \"visible\", children: nextProps.children },\n              nextInstance\n            )),\n            (showFallback = createFiberFromFragment(\n              showFallback,\n              nextInstance,\n              renderLanes,\n              null\n            )),\n            (showFallback.flags |= 2),\n            (nextProps.return = workInProgress),\n            (showFallback.return = workInProgress),\n            (nextProps.sibling = showFallback),\n            (workInProgress.child = nextProps),\n            reconcileChildFibers(\n              workInProgress,\n              current.child,\n              null,\n              renderLanes\n            ),\n            (nextProps = workInProgress.child),\n            (nextProps.memoizedState =\n              mountSuspenseOffscreenState(renderLanes)),\n            (nextProps.childLanes = getRemainingWorkInPrimaryTree(\n              current,\n              JSCompiler_temp,\n              renderLanes\n            )),\n            (workInProgress.memoizedState = SUSPENDED_MARKER),\n            (workInProgress = showFallback));\n    else if (\n      (pushPrimaryTreeSuspenseHandler(workInProgress),\n      isSuspenseInstanceFallback(nextInstance))\n    ) {\n      JSCompiler_temp =\n        nextInstance.nextSibling && nextInstance.nextSibling.dataset;\n      if (JSCompiler_temp) var digest = JSCompiler_temp.dgst;\n      JSCompiler_temp = digest;\n      nextProps = Error(formatProdErrorMessage(419));\n      nextProps.stack = \"\";\n      nextProps.digest = JSCompiler_temp;\n      queueHydrationError({ value: nextProps, source: null, stack: null });\n      workInProgress = retrySuspenseComponentWithoutHydrating(\n        current,\n        workInProgress,\n        renderLanes\n      );\n    } else if (\n      (didReceiveUpdate ||\n        propagateParentContextChanges(current, workInProgress, renderLanes, !1),\n      (JSCompiler_temp = 0 !== (renderLanes & current.childLanes)),\n      didReceiveUpdate || JSCompiler_temp)\n    ) {\n      JSCompiler_temp = workInProgressRoot;\n      if (\n        null !== JSCompiler_temp &&\n        ((nextProps = renderLanes & -renderLanes),\n        (nextProps =\n          0 !== (nextProps & 42)\n            ? 1\n            : getBumpedLaneForHydrationByLane(nextProps)),\n        (nextProps =\n          0 !== (nextProps & (JSCompiler_temp.suspendedLanes | renderLanes))\n            ? 0\n            : nextProps),\n        0 !== nextProps && nextProps !== JSCompiler_temp$jscomp$0.retryLane)\n      )\n        throw (\n          ((JSCompiler_temp$jscomp$0.retryLane = nextProps),\n          enqueueConcurrentRenderForLane(current, nextProps),\n          scheduleUpdateOnFiber(JSCompiler_temp, current, nextProps),\n          SelectiveHydrationException)\n        );\n      \"$?\" === nextInstance.data || renderDidSuspendDelayIfPossible();\n      workInProgress = retrySuspenseComponentWithoutHydrating(\n        current,\n        workInProgress,\n        renderLanes\n      );\n    } else\n      \"$?\" === nextInstance.data\n        ? ((workInProgress.flags |= 192),\n          (workInProgress.child = current.child),\n          (workInProgress = null))\n        : ((current = JSCompiler_temp$jscomp$0.treeContext),\n          (nextHydratableInstance = getNextHydratable(\n            nextInstance.nextSibling\n          )),\n          (hydrationParentFiber = workInProgress),\n          (isHydrating = !0),\n          (hydrationErrors = null),\n          (rootOrSingletonContext = !1),\n          null !== current &&\n            ((idStack[idStackIndex++] = treeContextId),\n            (idStack[idStackIndex++] = treeContextOverflow),\n            (idStack[idStackIndex++] = treeContextProvider),\n            (treeContextId = current.id),\n            (treeContextOverflow = current.overflow),\n            (treeContextProvider = workInProgress)),\n          (workInProgress = mountSuspensePrimaryChildren(\n            workInProgress,\n            nextProps.children\n          )),\n          (workInProgress.flags |= 4096));\n    return workInProgress;\n  }\n  if (showFallback)\n    return (\n      reuseSuspenseHandlerOnStack(workInProgress),\n      (showFallback = nextProps.fallback),\n      (nextInstance = workInProgress.mode),\n      (JSCompiler_temp$jscomp$0 = current.child),\n      (digest = JSCompiler_temp$jscomp$0.sibling),\n      (nextProps = createWorkInProgress(JSCompiler_temp$jscomp$0, {\n        mode: \"hidden\",\n        children: nextProps.children\n      })),\n      (nextProps.subtreeFlags =\n        JSCompiler_temp$jscomp$0.subtreeFlags & 65011712),\n      null !== digest\n        ? (showFallback = createWorkInProgress(digest, showFallback))\n        : ((showFallback = createFiberFromFragment(\n            showFallback,\n            nextInstance,\n            renderLanes,\n            null\n          )),\n          (showFallback.flags |= 2)),\n      (showFallback.return = workInProgress),\n      (nextProps.return = workInProgress),\n      (nextProps.sibling = showFallback),\n      (workInProgress.child = nextProps),\n      (nextProps = showFallback),\n      (showFallback = workInProgress.child),\n      (nextInstance = current.child.memoizedState),\n      null === nextInstance\n        ? (nextInstance = mountSuspenseOffscreenState(renderLanes))\n        : ((JSCompiler_temp$jscomp$0 = nextInstance.cachePool),\n          null !== JSCompiler_temp$jscomp$0\n            ? ((digest = CacheContext._currentValue),\n              (JSCompiler_temp$jscomp$0 =\n                JSCompiler_temp$jscomp$0.parent !== digest\n                  ? { parent: digest, pool: digest }\n                  : JSCompiler_temp$jscomp$0))\n            : (JSCompiler_temp$jscomp$0 = getSuspendedCache()),\n          (nextInstance = {\n            baseLanes: nextInstance.baseLanes | renderLanes,\n            cachePool: JSCompiler_temp$jscomp$0\n          })),\n      (showFallback.memoizedState = nextInstance),\n      (showFallback.childLanes = getRemainingWorkInPrimaryTree(\n        current,\n        JSCompiler_temp,\n        renderLanes\n      )),\n      (workInProgress.memoizedState = SUSPENDED_MARKER),\n      nextProps\n    );\n  pushPrimaryTreeSuspenseHandler(workInProgress);\n  renderLanes = current.child;\n  current = renderLanes.sibling;\n  renderLanes = createWorkInProgress(renderLanes, {\n    mode: \"visible\",\n    children: nextProps.children\n  });\n  renderLanes.return = workInProgress;\n  renderLanes.sibling = null;\n  null !== current &&\n    ((JSCompiler_temp = workInProgress.deletions),\n    null === JSCompiler_temp\n      ? ((workInProgress.deletions = [current]), (workInProgress.flags |= 16))\n      : JSCompiler_temp.push(current));\n  workInProgress.child = renderLanes;\n  workInProgress.memoizedState = null;\n  return renderLanes;\n}\nfunction mountSuspensePrimaryChildren(workInProgress, primaryChildren) {\n  primaryChildren = mountWorkInProgressOffscreenFiber(\n    { mode: \"visible\", children: primaryChildren },\n    workInProgress.mode\n  );\n  primaryChildren.return = workInProgress;\n  return (workInProgress.child = primaryChildren);\n}\nfunction mountWorkInProgressOffscreenFiber(offscreenProps, mode) {\n  offscreenProps = createFiberImplClass(22, offscreenProps, null, mode);\n  offscreenProps.lanes = 0;\n  offscreenProps.stateNode = {\n    _visibility: 1,\n    _pendingMarkers: null,\n    _retryCache: null,\n    _transitions: null\n  };\n  return offscreenProps;\n}\nfunction retrySuspenseComponentWithoutHydrating(\n  current,\n  workInProgress,\n  renderLanes\n) {\n  reconcileChildFibers(workInProgress, current.child, null, renderLanes);\n  current = mountSuspensePrimaryChildren(\n    workInProgress,\n    workInProgress.pendingProps.children\n  );\n  current.flags |= 2;\n  workInProgress.memoizedState = null;\n  return current;\n}\nfunction scheduleSuspenseWorkOnFiber(fiber, renderLanes, propagationRoot) {\n  fiber.lanes |= renderLanes;\n  var alternate = fiber.alternate;\n  null !== alternate && (alternate.lanes |= renderLanes);\n  scheduleContextWorkOnParentPath(fiber.return, renderLanes, propagationRoot);\n}\nfunction initSuspenseListRenderState(\n  workInProgress,\n  isBackwards,\n  tail,\n  lastContentRow,\n  tailMode\n) {\n  var renderState = workInProgress.memoizedState;\n  null === renderState\n    ? (workInProgress.memoizedState = {\n        isBackwards: isBackwards,\n        rendering: null,\n        renderingStartTime: 0,\n        last: lastContentRow,\n        tail: tail,\n        tailMode: tailMode\n      })\n    : ((renderState.isBackwards = isBackwards),\n      (renderState.rendering = null),\n      (renderState.renderingStartTime = 0),\n      (renderState.last = lastContentRow),\n      (renderState.tail = tail),\n      (renderState.tailMode = tailMode));\n}\nfunction updateSuspenseListComponent(current, workInProgress, renderLanes) {\n  var nextProps = workInProgress.pendingProps,\n    revealOrder = nextProps.revealOrder,\n    tailMode = nextProps.tail;\n  reconcileChildren(current, workInProgress, nextProps.children, renderLanes);\n  nextProps = suspenseStackCursor.current;\n  if (0 !== (nextProps & 2))\n    (nextProps = (nextProps & 1) | 2), (workInProgress.flags |= 128);\n  else {\n    if (null !== current && 0 !== (current.flags & 128))\n      a: for (current = workInProgress.child; null !== current; ) {\n        if (13 === current.tag)\n          null !== current.memoizedState &&\n            scheduleSuspenseWorkOnFiber(current, renderLanes, workInProgress);\n        else if (19 === current.tag)\n          scheduleSuspenseWorkOnFiber(current, renderLanes, workInProgress);\n        else if (null !== current.child) {\n          current.child.return = current;\n          current = current.child;\n          continue;\n        }\n        if (current === workInProgress) break a;\n        for (; null === current.sibling; ) {\n          if (null === current.return || current.return === workInProgress)\n            break a;\n          current = current.return;\n        }\n        current.sibling.return = current.return;\n        current = current.sibling;\n      }\n    nextProps &= 1;\n  }\n  push(suspenseStackCursor, nextProps);\n  switch (revealOrder) {\n    case \"forwards\":\n      renderLanes = workInProgress.child;\n      for (revealOrder = null; null !== renderLanes; )\n        (current = renderLanes.alternate),\n          null !== current &&\n            null === findFirstSuspended(current) &&\n            (revealOrder = renderLanes),\n          (renderLanes = renderLanes.sibling);\n      renderLanes = revealOrder;\n      null === renderLanes\n        ? ((revealOrder = workInProgress.child), (workInProgress.child = null))\n        : ((revealOrder = renderLanes.sibling), (renderLanes.sibling = null));\n      initSuspenseListRenderState(\n        workInProgress,\n        !1,\n        revealOrder,\n        renderLanes,\n        tailMode\n      );\n      break;\n    case \"backwards\":\n      renderLanes = null;\n      revealOrder = workInProgress.child;\n      for (workInProgress.child = null; null !== revealOrder; ) {\n        current = revealOrder.alternate;\n        if (null !== current && null === findFirstSuspended(current)) {\n          workInProgress.child = revealOrder;\n          break;\n        }\n        current = revealOrder.sibling;\n        revealOrder.sibling = renderLanes;\n        renderLanes = revealOrder;\n        revealOrder = current;\n      }\n      initSuspenseListRenderState(\n        workInProgress,\n        !0,\n        renderLanes,\n        null,\n        tailMode\n      );\n      break;\n    case \"together\":\n      initSuspenseListRenderState(workInProgress, !1, null, null, void 0);\n      break;\n    default:\n      workInProgress.memoizedState = null;\n  }\n  return workInProgress.child;\n}\nfunction bailoutOnAlreadyFinishedWork(current, workInProgress, renderLanes) {\n  null !== current && (workInProgress.dependencies = current.dependencies);\n  workInProgressRootSkippedLanes |= workInProgress.lanes;\n  if (0 === (renderLanes & workInProgress.childLanes))\n    if (null !== current) {\n      if (\n        (propagateParentContextChanges(\n          current,\n          workInProgress,\n          renderLanes,\n          !1\n        ),\n        0 === (renderLanes & workInProgress.childLanes))\n      )\n        return null;\n    } else return null;\n  if (null !== current && workInProgress.child !== current.child)\n    throw Error(formatProdErrorMessage(153));\n  if (null !== workInProgress.child) {\n    current = workInProgress.child;\n    renderLanes = createWorkInProgress(current, current.pendingProps);\n    workInProgress.child = renderLanes;\n    for (renderLanes.return = workInProgress; null !== current.sibling; )\n      (current = current.sibling),\n        (renderLanes = renderLanes.sibling =\n          createWorkInProgress(current, current.pendingProps)),\n        (renderLanes.return = workInProgress);\n    renderLanes.sibling = null;\n  }\n  return workInProgress.child;\n}\nfunction checkScheduledUpdateOrContext(current, renderLanes) {\n  if (0 !== (current.lanes & renderLanes)) return !0;\n  current = current.dependencies;\n  return null !== current && checkIfContextChanged(current) ? !0 : !1;\n}\nfunction attemptEarlyBailoutIfNoScheduledUpdate(\n  current,\n  workInProgress,\n  renderLanes\n) {\n  switch (workInProgress.tag) {\n    case 3:\n      pushHostContainer(workInProgress, workInProgress.stateNode.containerInfo);\n      pushProvider(workInProgress, CacheContext, current.memoizedState.cache);\n      resetHydrationState();\n      break;\n    case 27:\n    case 5:\n      pushHostContext(workInProgress);\n      break;\n    case 4:\n      pushHostContainer(workInProgress, workInProgress.stateNode.containerInfo);\n      break;\n    case 10:\n      pushProvider(\n        workInProgress,\n        workInProgress.type,\n        workInProgress.memoizedProps.value\n      );\n      break;\n    case 13:\n      var state = workInProgress.memoizedState;\n      if (null !== state) {\n        if (null !== state.dehydrated)\n          return (\n            pushPrimaryTreeSuspenseHandler(workInProgress),\n            (workInProgress.flags |= 128),\n            null\n          );\n        if (0 !== (renderLanes & workInProgress.child.childLanes))\n          return updateSuspenseComponent(current, workInProgress, renderLanes);\n        pushPrimaryTreeSuspenseHandler(workInProgress);\n        current = bailoutOnAlreadyFinishedWork(\n          current,\n          workInProgress,\n          renderLanes\n        );\n        return null !== current ? current.sibling : null;\n      }\n      pushPrimaryTreeSuspenseHandler(workInProgress);\n      break;\n    case 19:\n      var didSuspendBefore = 0 !== (current.flags & 128);\n      state = 0 !== (renderLanes & workInProgress.childLanes);\n      state ||\n        (propagateParentContextChanges(\n          current,\n          workInProgress,\n          renderLanes,\n          !1\n        ),\n        (state = 0 !== (renderLanes & workInProgress.childLanes)));\n      if (didSuspendBefore) {\n        if (state)\n          return updateSuspenseListComponent(\n            current,\n            workInProgress,\n            renderLanes\n          );\n        workInProgress.flags |= 128;\n      }\n      didSuspendBefore = workInProgress.memoizedState;\n      null !== didSuspendBefore &&\n        ((didSuspendBefore.rendering = null),\n        (didSuspendBefore.tail = null),\n        (didSuspendBefore.lastEffect = null));\n      push(suspenseStackCursor, suspenseStackCursor.current);\n      if (state) break;\n      else return null;\n    case 22:\n    case 23:\n      return (\n        (workInProgress.lanes = 0),\n        updateOffscreenComponent(current, workInProgress, renderLanes)\n      );\n    case 24:\n      pushProvider(workInProgress, CacheContext, current.memoizedState.cache);\n  }\n  return bailoutOnAlreadyFinishedWork(current, workInProgress, renderLanes);\n}\nfunction beginWork(current, workInProgress, renderLanes) {\n  if (null !== current)\n    if (current.memoizedProps !== workInProgress.pendingProps)\n      didReceiveUpdate = !0;\n    else {\n      if (\n        !checkScheduledUpdateOrContext(current, renderLanes) &&\n        0 === (workInProgress.flags & 128)\n      )\n        return (\n          (didReceiveUpdate = !1),\n          attemptEarlyBailoutIfNoScheduledUpdate(\n            current,\n            workInProgress,\n            renderLanes\n          )\n        );\n      didReceiveUpdate = 0 !== (current.flags & 131072) ? !0 : !1;\n    }\n  else\n    (didReceiveUpdate = !1),\n      isHydrating &&\n        0 !== (workInProgress.flags & 1048576) &&\n        pushTreeId(workInProgress, treeForkCount, workInProgress.index);\n  workInProgress.lanes = 0;\n  switch (workInProgress.tag) {\n    case 16:\n      a: {\n        current = workInProgress.pendingProps;\n        var lazyComponent = workInProgress.elementType,\n          init = lazyComponent._init;\n        lazyComponent = init(lazyComponent._payload);\n        workInProgress.type = lazyComponent;\n        if (\"function\" === typeof lazyComponent)\n          shouldConstruct(lazyComponent)\n            ? ((current = resolveClassComponentProps(lazyComponent, current)),\n              (workInProgress.tag = 1),\n              (workInProgress = updateClassComponent(\n                null,\n                workInProgress,\n                lazyComponent,\n                current,\n                renderLanes\n              )))\n            : ((workInProgress.tag = 0),\n              (workInProgress = updateFunctionComponent(\n                null,\n                workInProgress,\n                lazyComponent,\n                current,\n                renderLanes\n              )));\n        else {\n          if (void 0 !== lazyComponent && null !== lazyComponent)\n            if (\n              ((init = lazyComponent.$$typeof), init === REACT_FORWARD_REF_TYPE)\n            ) {\n              workInProgress.tag = 11;\n              workInProgress = updateForwardRef(\n                null,\n                workInProgress,\n                lazyComponent,\n                current,\n                renderLanes\n              );\n              break a;\n            } else if (init === REACT_MEMO_TYPE) {\n              workInProgress.tag = 14;\n              workInProgress = updateMemoComponent(\n                null,\n                workInProgress,\n                lazyComponent,\n                current,\n                renderLanes\n              );\n              break a;\n            }\n          workInProgress =\n            getComponentNameFromType(lazyComponent) || lazyComponent;\n          throw Error(formatProdErrorMessage(306, workInProgress, \"\"));\n        }\n      }\n      return workInProgress;\n    case 0:\n      return updateFunctionComponent(\n        current,\n        workInProgress,\n        workInProgress.type,\n        workInProgress.pendingProps,\n        renderLanes\n      );\n    case 1:\n      return (\n        (lazyComponent = workInProgress.type),\n        (init = resolveClassComponentProps(\n          lazyComponent,\n          workInProgress.pendingProps\n        )),\n        updateClassComponent(\n          current,\n          workInProgress,\n          lazyComponent,\n          init,\n          renderLanes\n        )\n      );\n    case 3:\n      a: {\n        pushHostContainer(\n          workInProgress,\n          workInProgress.stateNode.containerInfo\n        );\n        if (null === current) throw Error(formatProdErrorMessage(387));\n        lazyComponent = workInProgress.pendingProps;\n        var prevState = workInProgress.memoizedState;\n        init = prevState.element;\n        cloneUpdateQueue(current, workInProgress);\n        processUpdateQueue(workInProgress, lazyComponent, null, renderLanes);\n        var nextState = workInProgress.memoizedState;\n        lazyComponent = nextState.cache;\n        pushProvider(workInProgress, CacheContext, lazyComponent);\n        lazyComponent !== prevState.cache &&\n          propagateContextChanges(\n            workInProgress,\n            [CacheContext],\n            renderLanes,\n            !0\n          );\n        suspendIfUpdateReadFromEntangledAsyncAction();\n        lazyComponent = nextState.element;\n        if (prevState.isDehydrated)\n          if (\n            ((prevState = {\n              element: lazyComponent,\n              isDehydrated: !1,\n              cache: nextState.cache\n            }),\n            (workInProgress.updateQueue.baseState = prevState),\n            (workInProgress.memoizedState = prevState),\n            workInProgress.flags & 256)\n          ) {\n            workInProgress = mountHostRootWithoutHydrating(\n              current,\n              workInProgress,\n              lazyComponent,\n              renderLanes\n            );\n            break a;\n          } else if (lazyComponent !== init) {\n            init = createCapturedValueAtFiber(\n              Error(formatProdErrorMessage(424)),\n              workInProgress\n            );\n            queueHydrationError(init);\n            workInProgress = mountHostRootWithoutHydrating(\n              current,\n              workInProgress,\n              lazyComponent,\n              renderLanes\n            );\n            break a;\n          } else {\n            current = workInProgress.stateNode.containerInfo;\n            switch (current.nodeType) {\n              case 9:\n                current = current.body;\n                break;\n              default:\n                current =\n                  \"HTML\" === current.nodeName\n                    ? current.ownerDocument.body\n                    : current;\n            }\n            nextHydratableInstance = getNextHydratable(current.firstChild);\n            hydrationParentFiber = workInProgress;\n            isHydrating = !0;\n            hydrationErrors = null;\n            rootOrSingletonContext = !0;\n            renderLanes = mountChildFibers(\n              workInProgress,\n              null,\n              lazyComponent,\n              renderLanes\n            );\n            for (workInProgress.child = renderLanes; renderLanes; )\n              (renderLanes.flags = (renderLanes.flags & -3) | 4096),\n                (renderLanes = renderLanes.sibling);\n          }\n        else {\n          resetHydrationState();\n          if (lazyComponent === init) {\n            workInProgress = bailoutOnAlreadyFinishedWork(\n              current,\n              workInProgress,\n              renderLanes\n            );\n            break a;\n          }\n          reconcileChildren(\n            current,\n            workInProgress,\n            lazyComponent,\n            renderLanes\n          );\n        }\n        workInProgress = workInProgress.child;\n      }\n      return workInProgress;\n    case 26:\n      return (\n        markRef(current, workInProgress),\n        null === current\n          ? (renderLanes = getResource(\n              workInProgress.type,\n              null,\n              workInProgress.pendingProps,\n              null\n            ))\n            ? (workInProgress.memoizedState = renderLanes)\n            : isHydrating ||\n              ((renderLanes = workInProgress.type),\n              (current = workInProgress.pendingProps),\n              (lazyComponent = getOwnerDocumentFromRootContainer(\n                rootInstanceStackCursor.current\n              ).createElement(renderLanes)),\n              (lazyComponent[internalInstanceKey] = workInProgress),\n              (lazyComponent[internalPropsKey] = current),\n              setInitialProperties(lazyComponent, renderLanes, current),\n              markNodeAsHoistable(lazyComponent),\n              (workInProgress.stateNode = lazyComponent))\n          : (workInProgress.memoizedState = getResource(\n              workInProgress.type,\n              current.memoizedProps,\n              workInProgress.pendingProps,\n              current.memoizedState\n            )),\n        null\n      );\n    case 27:\n      return (\n        pushHostContext(workInProgress),\n        null === current &&\n          isHydrating &&\n          ((lazyComponent = workInProgress.stateNode =\n            resolveSingletonInstance(\n              workInProgress.type,\n              workInProgress.pendingProps,\n              rootInstanceStackCursor.current\n            )),\n          (hydrationParentFiber = workInProgress),\n          (rootOrSingletonContext = !0),\n          (init = nextHydratableInstance),\n          isSingletonScope(workInProgress.type)\n            ? ((previousHydratableOnEnteringScopedSingleton = init),\n              (nextHydratableInstance = getNextHydratable(\n                lazyComponent.firstChild\n              )))\n            : (nextHydratableInstance = init)),\n        reconcileChildren(\n          current,\n          workInProgress,\n          workInProgress.pendingProps.children,\n          renderLanes\n        ),\n        markRef(current, workInProgress),\n        null === current && (workInProgress.flags |= 4194304),\n        workInProgress.child\n      );\n    case 5:\n      if (null === current && isHydrating) {\n        if ((init = lazyComponent = nextHydratableInstance))\n          (lazyComponent = canHydrateInstance(\n            lazyComponent,\n            workInProgress.type,\n            workInProgress.pendingProps,\n            rootOrSingletonContext\n          )),\n            null !== lazyComponent\n              ? ((workInProgress.stateNode = lazyComponent),\n                (hydrationParentFiber = workInProgress),\n                (nextHydratableInstance = getNextHydratable(\n                  lazyComponent.firstChild\n                )),\n                (rootOrSingletonContext = !1),\n                (init = !0))\n              : (init = !1);\n        init || throwOnHydrationMismatch(workInProgress);\n      }\n      pushHostContext(workInProgress);\n      init = workInProgress.type;\n      prevState = workInProgress.pendingProps;\n      nextState = null !== current ? current.memoizedProps : null;\n      lazyComponent = prevState.children;\n      shouldSetTextContent(init, prevState)\n        ? (lazyComponent = null)\n        : null !== nextState &&\n          shouldSetTextContent(init, nextState) &&\n          (workInProgress.flags |= 32);\n      null !== workInProgress.memoizedState &&\n        ((init = renderWithHooks(\n          current,\n          workInProgress,\n          TransitionAwareHostComponent,\n          null,\n          null,\n          renderLanes\n        )),\n        (HostTransitionContext._currentValue = init));\n      markRef(current, workInProgress);\n      reconcileChildren(current, workInProgress, lazyComponent, renderLanes);\n      return workInProgress.child;\n    case 6:\n      if (null === current && isHydrating) {\n        if ((current = renderLanes = nextHydratableInstance))\n          (renderLanes = canHydrateTextInstance(\n            renderLanes,\n            workInProgress.pendingProps,\n            rootOrSingletonContext\n          )),\n            null !== renderLanes\n              ? ((workInProgress.stateNode = renderLanes),\n                (hydrationParentFiber = workInProgress),\n                (nextHydratableInstance = null),\n                (current = !0))\n              : (current = !1);\n        current || throwOnHydrationMismatch(workInProgress);\n      }\n      return null;\n    case 13:\n      return updateSuspenseComponent(current, workInProgress, renderLanes);\n    case 4:\n      return (\n        pushHostContainer(\n          workInProgress,\n          workInProgress.stateNode.containerInfo\n        ),\n        (lazyComponent = workInProgress.pendingProps),\n        null === current\n          ? (workInProgress.child = reconcileChildFibers(\n              workInProgress,\n              null,\n              lazyComponent,\n              renderLanes\n            ))\n          : reconcileChildren(\n              current,\n              workInProgress,\n              lazyComponent,\n              renderLanes\n            ),\n        workInProgress.child\n      );\n    case 11:\n      return updateForwardRef(\n        current,\n        workInProgress,\n        workInProgress.type,\n        workInProgress.pendingProps,\n        renderLanes\n      );\n    case 7:\n      return (\n        reconcileChildren(\n          current,\n          workInProgress,\n          workInProgress.pendingProps,\n          renderLanes\n        ),\n        workInProgress.child\n      );\n    case 8:\n      return (\n        reconcileChildren(\n          current,\n          workInProgress,\n          workInProgress.pendingProps.children,\n          renderLanes\n        ),\n        workInProgress.child\n      );\n    case 12:\n      return (\n        reconcileChildren(\n          current,\n          workInProgress,\n          workInProgress.pendingProps.children,\n          renderLanes\n        ),\n        workInProgress.child\n      );\n    case 10:\n      return (\n        (lazyComponent = workInProgress.pendingProps),\n        pushProvider(workInProgress, workInProgress.type, lazyComponent.value),\n        reconcileChildren(\n          current,\n          workInProgress,\n          lazyComponent.children,\n          renderLanes\n        ),\n        workInProgress.child\n      );\n    case 9:\n      return (\n        (init = workInProgress.type._context),\n        (lazyComponent = workInProgress.pendingProps.children),\n        prepareToReadContext(workInProgress),\n        (init = readContext(init)),\n        (lazyComponent = lazyComponent(init)),\n        (workInProgress.flags |= 1),\n        reconcileChildren(current, workInProgress, lazyComponent, renderLanes),\n        workInProgress.child\n      );\n    case 14:\n      return updateMemoComponent(\n        current,\n        workInProgress,\n        workInProgress.type,\n        workInProgress.pendingProps,\n        renderLanes\n      );\n    case 15:\n      return updateSimpleMemoComponent(\n        current,\n        workInProgress,\n        workInProgress.type,\n        workInProgress.pendingProps,\n        renderLanes\n      );\n    case 19:\n      return updateSuspenseListComponent(current, workInProgress, renderLanes);\n    case 31:\n      return (\n        (lazyComponent = workInProgress.pendingProps),\n        (renderLanes = workInProgress.mode),\n        (lazyComponent = {\n          mode: lazyComponent.mode,\n          children: lazyComponent.children\n        }),\n        null === current\n          ? ((renderLanes = mountWorkInProgressOffscreenFiber(\n              lazyComponent,\n              renderLanes\n            )),\n            (renderLanes.ref = workInProgress.ref),\n            (workInProgress.child = renderLanes),\n            (renderLanes.return = workInProgress),\n            (workInProgress = renderLanes))\n          : ((renderLanes = createWorkInProgress(current.child, lazyComponent)),\n            (renderLanes.ref = workInProgress.ref),\n            (workInProgress.child = renderLanes),\n            (renderLanes.return = workInProgress),\n            (workInProgress = renderLanes)),\n        workInProgress\n      );\n    case 22:\n      return updateOffscreenComponent(current, workInProgress, renderLanes);\n    case 24:\n      return (\n        prepareToReadContext(workInProgress),\n        (lazyComponent = readContext(CacheContext)),\n        null === current\n          ? ((init = peekCacheFromPool()),\n            null === init &&\n              ((init = workInProgressRoot),\n              (prevState = createCache()),\n              (init.pooledCache = prevState),\n              prevState.refCount++,\n              null !== prevState && (init.pooledCacheLanes |= renderLanes),\n              (init = prevState)),\n            (workInProgress.memoizedState = {\n              parent: lazyComponent,\n              cache: init\n            }),\n            initializeUpdateQueue(workInProgress),\n            pushProvider(workInProgress, CacheContext, init))\n          : (0 !== (current.lanes & renderLanes) &&\n              (cloneUpdateQueue(current, workInProgress),\n              processUpdateQueue(workInProgress, null, null, renderLanes),\n              suspendIfUpdateReadFromEntangledAsyncAction()),\n            (init = current.memoizedState),\n            (prevState = workInProgress.memoizedState),\n            init.parent !== lazyComponent\n              ? ((init = { parent: lazyComponent, cache: lazyComponent }),\n                (workInProgress.memoizedState = init),\n                0 === workInProgress.lanes &&\n                  (workInProgress.memoizedState =\n                    workInProgress.updateQueue.baseState =\n                      init),\n                pushProvider(workInProgress, CacheContext, lazyComponent))\n              : ((lazyComponent = prevState.cache),\n                pushProvider(workInProgress, CacheContext, lazyComponent),\n                lazyComponent !== init.cache &&\n                  propagateContextChanges(\n                    workInProgress,\n                    [CacheContext],\n                    renderLanes,\n                    !0\n                  ))),\n        reconcileChildren(\n          current,\n          workInProgress,\n          workInProgress.pendingProps.children,\n          renderLanes\n        ),\n        workInProgress.child\n      );\n    case 29:\n      throw workInProgress.pendingProps;\n  }\n  throw Error(formatProdErrorMessage(156, workInProgress.tag));\n}\nfunction markUpdate(workInProgress) {\n  workInProgress.flags |= 4;\n}\nfunction preloadResourceAndSuspendIfNeeded(workInProgress, resource) {\n  if (\"stylesheet\" !== resource.type || 0 !== (resource.state.loading & 4))\n    workInProgress.flags &= -16777217;\n  else if (((workInProgress.flags |= 16777216), !preloadResource(resource))) {\n    resource = suspenseHandlerStackCursor.current;\n    if (\n      null !== resource &&\n      ((workInProgressRootRenderLanes & 4194048) ===\n      workInProgressRootRenderLanes\n        ? null !== shellBoundary\n        : ((workInProgressRootRenderLanes & 62914560) !==\n            workInProgressRootRenderLanes &&\n            0 === (workInProgressRootRenderLanes & 536870912)) ||\n          resource !== shellBoundary)\n    )\n      throw (\n        ((suspendedThenable = noopSuspenseyCommitThenable),\n        SuspenseyCommitException)\n      );\n    workInProgress.flags |= 8192;\n  }\n}\nfunction scheduleRetryEffect(workInProgress, retryQueue) {\n  null !== retryQueue && (workInProgress.flags |= 4);\n  workInProgress.flags & 16384 &&\n    ((retryQueue =\n      22 !== workInProgress.tag ? claimNextRetryLane() : 536870912),\n    (workInProgress.lanes |= retryQueue),\n    (workInProgressSuspendedRetryLanes |= retryQueue));\n}\nfunction cutOffTailIfNeeded(renderState, hasRenderedATailFallback) {\n  if (!isHydrating)\n    switch (renderState.tailMode) {\n      case \"hidden\":\n        hasRenderedATailFallback = renderState.tail;\n        for (var lastTailNode = null; null !== hasRenderedATailFallback; )\n          null !== hasRenderedATailFallback.alternate &&\n            (lastTailNode = hasRenderedATailFallback),\n            (hasRenderedATailFallback = hasRenderedATailFallback.sibling);\n        null === lastTailNode\n          ? (renderState.tail = null)\n          : (lastTailNode.sibling = null);\n        break;\n      case \"collapsed\":\n        lastTailNode = renderState.tail;\n        for (var lastTailNode$113 = null; null !== lastTailNode; )\n          null !== lastTailNode.alternate && (lastTailNode$113 = lastTailNode),\n            (lastTailNode = lastTailNode.sibling);\n        null === lastTailNode$113\n          ? hasRenderedATailFallback || null === renderState.tail\n            ? (renderState.tail = null)\n            : (renderState.tail.sibling = null)\n          : (lastTailNode$113.sibling = null);\n    }\n}\nfunction bubbleProperties(completedWork) {\n  var didBailout =\n      null !== completedWork.alternate &&\n      completedWork.alternate.child === completedWork.child,\n    newChildLanes = 0,\n    subtreeFlags = 0;\n  if (didBailout)\n    for (var child$114 = completedWork.child; null !== child$114; )\n      (newChildLanes |= child$114.lanes | child$114.childLanes),\n        (subtreeFlags |= child$114.subtreeFlags & 65011712),\n        (subtreeFlags |= child$114.flags & 65011712),\n        (child$114.return = completedWork),\n        (child$114 = child$114.sibling);\n  else\n    for (child$114 = completedWork.child; null !== child$114; )\n      (newChildLanes |= child$114.lanes | child$114.childLanes),\n        (subtreeFlags |= child$114.subtreeFlags),\n        (subtreeFlags |= child$114.flags),\n        (child$114.return = completedWork),\n        (child$114 = child$114.sibling);\n  completedWork.subtreeFlags |= subtreeFlags;\n  completedWork.childLanes = newChildLanes;\n  return didBailout;\n}\nfunction completeWork(current, workInProgress, renderLanes) {\n  var newProps = workInProgress.pendingProps;\n  popTreeContext(workInProgress);\n  switch (workInProgress.tag) {\n    case 31:\n    case 16:\n    case 15:\n    case 0:\n    case 11:\n    case 7:\n    case 8:\n    case 12:\n    case 9:\n    case 14:\n      return bubbleProperties(workInProgress), null;\n    case 1:\n      return bubbleProperties(workInProgress), null;\n    case 3:\n      renderLanes = workInProgress.stateNode;\n      newProps = null;\n      null !== current && (newProps = current.memoizedState.cache);\n      workInProgress.memoizedState.cache !== newProps &&\n        (workInProgress.flags |= 2048);\n      popProvider(CacheContext);\n      popHostContainer();\n      renderLanes.pendingContext &&\n        ((renderLanes.context = renderLanes.pendingContext),\n        (renderLanes.pendingContext = null));\n      if (null === current || null === current.child)\n        popHydrationState(workInProgress)\n          ? markUpdate(workInProgress)\n          : null === current ||\n            (current.memoizedState.isDehydrated &&\n              0 === (workInProgress.flags & 256)) ||\n            ((workInProgress.flags |= 1024),\n            upgradeHydrationErrorsToRecoverable());\n      bubbleProperties(workInProgress);\n      return null;\n    case 26:\n      return (\n        (renderLanes = workInProgress.memoizedState),\n        null === current\n          ? (markUpdate(workInProgress),\n            null !== renderLanes\n              ? (bubbleProperties(workInProgress),\n                preloadResourceAndSuspendIfNeeded(workInProgress, renderLanes))\n              : (bubbleProperties(workInProgress),\n                (workInProgress.flags &= -16777217)))\n          : renderLanes\n            ? renderLanes !== current.memoizedState\n              ? (markUpdate(workInProgress),\n                bubbleProperties(workInProgress),\n                preloadResourceAndSuspendIfNeeded(workInProgress, renderLanes))\n              : (bubbleProperties(workInProgress),\n                (workInProgress.flags &= -16777217))\n            : (current.memoizedProps !== newProps && markUpdate(workInProgress),\n              bubbleProperties(workInProgress),\n              (workInProgress.flags &= -16777217)),\n        null\n      );\n    case 27:\n      popHostContext(workInProgress);\n      renderLanes = rootInstanceStackCursor.current;\n      var type = workInProgress.type;\n      if (null !== current && null != workInProgress.stateNode)\n        current.memoizedProps !== newProps && markUpdate(workInProgress);\n      else {\n        if (!newProps) {\n          if (null === workInProgress.stateNode)\n            throw Error(formatProdErrorMessage(166));\n          bubbleProperties(workInProgress);\n          return null;\n        }\n        current = contextStackCursor.current;\n        popHydrationState(workInProgress)\n          ? prepareToHydrateHostInstance(workInProgress, current)\n          : ((current = resolveSingletonInstance(type, newProps, renderLanes)),\n            (workInProgress.stateNode = current),\n            markUpdate(workInProgress));\n      }\n      bubbleProperties(workInProgress);\n      return null;\n    case 5:\n      popHostContext(workInProgress);\n      renderLanes = workInProgress.type;\n      if (null !== current && null != workInProgress.stateNode)\n        current.memoizedProps !== newProps && markUpdate(workInProgress);\n      else {\n        if (!newProps) {\n          if (null === workInProgress.stateNode)\n            throw Error(formatProdErrorMessage(166));\n          bubbleProperties(workInProgress);\n          return null;\n        }\n        current = contextStackCursor.current;\n        if (popHydrationState(workInProgress))\n          prepareToHydrateHostInstance(workInProgress, current);\n        else {\n          type = getOwnerDocumentFromRootContainer(\n            rootInstanceStackCursor.current\n          );\n          switch (current) {\n            case 1:\n              current = type.createElementNS(\n                \"http://www.w3.org/2000/svg\",\n                renderLanes\n              );\n              break;\n            case 2:\n              current = type.createElementNS(\n                \"http://www.w3.org/1998/Math/MathML\",\n                renderLanes\n              );\n              break;\n            default:\n              switch (renderLanes) {\n                case \"svg\":\n                  current = type.createElementNS(\n                    \"http://www.w3.org/2000/svg\",\n                    renderLanes\n                  );\n                  break;\n                case \"math\":\n                  current = type.createElementNS(\n                    \"http://www.w3.org/1998/Math/MathML\",\n                    renderLanes\n                  );\n                  break;\n                case \"script\":\n                  current = type.createElement(\"div\");\n                  current.innerHTML = \"<script>\\x3c/script>\";\n                  current = current.removeChild(current.firstChild);\n                  break;\n                case \"select\":\n                  current =\n                    \"string\" === typeof newProps.is\n                      ? type.createElement(\"select\", { is: newProps.is })\n                      : type.createElement(\"select\");\n                  newProps.multiple\n                    ? (current.multiple = !0)\n                    : newProps.size && (current.size = newProps.size);\n                  break;\n                default:\n                  current =\n                    \"string\" === typeof newProps.is\n                      ? type.createElement(renderLanes, { is: newProps.is })\n                      : type.createElement(renderLanes);\n              }\n          }\n          current[internalInstanceKey] = workInProgress;\n          current[internalPropsKey] = newProps;\n          a: for (type = workInProgress.child; null !== type; ) {\n            if (5 === type.tag || 6 === type.tag)\n              current.appendChild(type.stateNode);\n            else if (4 !== type.tag && 27 !== type.tag && null !== type.child) {\n              type.child.return = type;\n              type = type.child;\n              continue;\n            }\n            if (type === workInProgress) break a;\n            for (; null === type.sibling; ) {\n              if (null === type.return || type.return === workInProgress)\n                break a;\n              type = type.return;\n            }\n            type.sibling.return = type.return;\n            type = type.sibling;\n          }\n          workInProgress.stateNode = current;\n          a: switch (\n            (setInitialProperties(current, renderLanes, newProps), renderLanes)\n          ) {\n            case \"button\":\n            case \"input\":\n            case \"select\":\n            case \"textarea\":\n              current = !!newProps.autoFocus;\n              break a;\n            case \"img\":\n              current = !0;\n              break a;\n            default:\n              current = !1;\n          }\n          current && markUpdate(workInProgress);\n        }\n      }\n      bubbleProperties(workInProgress);\n      workInProgress.flags &= -16777217;\n      return null;\n    case 6:\n      if (current && null != workInProgress.stateNode)\n        current.memoizedProps !== newProps && markUpdate(workInProgress);\n      else {\n        if (\"string\" !== typeof newProps && null === workInProgress.stateNode)\n          throw Error(formatProdErrorMessage(166));\n        current = rootInstanceStackCursor.current;\n        if (popHydrationState(workInProgress)) {\n          current = workInProgress.stateNode;\n          renderLanes = workInProgress.memoizedProps;\n          newProps = null;\n          type = hydrationParentFiber;\n          if (null !== type)\n            switch (type.tag) {\n              case 27:\n              case 5:\n                newProps = type.memoizedProps;\n            }\n          current[internalInstanceKey] = workInProgress;\n          current =\n            current.nodeValue === renderLanes ||\n            (null !== newProps && !0 === newProps.suppressHydrationWarning) ||\n            checkForUnmatchedText(current.nodeValue, renderLanes)\n              ? !0\n              : !1;\n          current || throwOnHydrationMismatch(workInProgress);\n        } else\n          (current =\n            getOwnerDocumentFromRootContainer(current).createTextNode(\n              newProps\n            )),\n            (current[internalInstanceKey] = workInProgress),\n            (workInProgress.stateNode = current);\n      }\n      bubbleProperties(workInProgress);\n      return null;\n    case 13:\n      newProps = workInProgress.memoizedState;\n      if (\n        null === current ||\n        (null !== current.memoizedState &&\n          null !== current.memoizedState.dehydrated)\n      ) {\n        type = popHydrationState(workInProgress);\n        if (null !== newProps && null !== newProps.dehydrated) {\n          if (null === current) {\n            if (!type) throw Error(formatProdErrorMessage(318));\n            type = workInProgress.memoizedState;\n            type = null !== type ? type.dehydrated : null;\n            if (!type) throw Error(formatProdErrorMessage(317));\n            type[internalInstanceKey] = workInProgress;\n          } else\n            resetHydrationState(),\n              0 === (workInProgress.flags & 128) &&\n                (workInProgress.memoizedState = null),\n              (workInProgress.flags |= 4);\n          bubbleProperties(workInProgress);\n          type = !1;\n        } else\n          (type = upgradeHydrationErrorsToRecoverable()),\n            null !== current &&\n              null !== current.memoizedState &&\n              (current.memoizedState.hydrationErrors = type),\n            (type = !0);\n        if (!type) {\n          if (workInProgress.flags & 256)\n            return popSuspenseHandler(workInProgress), workInProgress;\n          popSuspenseHandler(workInProgress);\n          return null;\n        }\n      }\n      popSuspenseHandler(workInProgress);\n      if (0 !== (workInProgress.flags & 128))\n        return (workInProgress.lanes = renderLanes), workInProgress;\n      renderLanes = null !== newProps;\n      current = null !== current && null !== current.memoizedState;\n      if (renderLanes) {\n        newProps = workInProgress.child;\n        type = null;\n        null !== newProps.alternate &&\n          null !== newProps.alternate.memoizedState &&\n          null !== newProps.alternate.memoizedState.cachePool &&\n          (type = newProps.alternate.memoizedState.cachePool.pool);\n        var cache$127 = null;\n        null !== newProps.memoizedState &&\n          null !== newProps.memoizedState.cachePool &&\n          (cache$127 = newProps.memoizedState.cachePool.pool);\n        cache$127 !== type && (newProps.flags |= 2048);\n      }\n      renderLanes !== current &&\n        renderLanes &&\n        (workInProgress.child.flags |= 8192);\n      scheduleRetryEffect(workInProgress, workInProgress.updateQueue);\n      bubbleProperties(workInProgress);\n      return null;\n    case 4:\n      return (\n        popHostContainer(),\n        null === current &&\n          listenToAllSupportedEvents(workInProgress.stateNode.containerInfo),\n        bubbleProperties(workInProgress),\n        null\n      );\n    case 10:\n      return (\n        popProvider(workInProgress.type), bubbleProperties(workInProgress), null\n      );\n    case 19:\n      pop(suspenseStackCursor);\n      type = workInProgress.memoizedState;\n      if (null === type) return bubbleProperties(workInProgress), null;\n      newProps = 0 !== (workInProgress.flags & 128);\n      cache$127 = type.rendering;\n      if (null === cache$127)\n        if (newProps) cutOffTailIfNeeded(type, !1);\n        else {\n          if (\n            0 !== workInProgressRootExitStatus ||\n            (null !== current && 0 !== (current.flags & 128))\n          )\n            for (current = workInProgress.child; null !== current; ) {\n              cache$127 = findFirstSuspended(current);\n              if (null !== cache$127) {\n                workInProgress.flags |= 128;\n                cutOffTailIfNeeded(type, !1);\n                current = cache$127.updateQueue;\n                workInProgress.updateQueue = current;\n                scheduleRetryEffect(workInProgress, current);\n                workInProgress.subtreeFlags = 0;\n                current = renderLanes;\n                for (renderLanes = workInProgress.child; null !== renderLanes; )\n                  resetWorkInProgress(renderLanes, current),\n                    (renderLanes = renderLanes.sibling);\n                push(\n                  suspenseStackCursor,\n                  (suspenseStackCursor.current & 1) | 2\n                );\n                return workInProgress.child;\n              }\n              current = current.sibling;\n            }\n          null !== type.tail &&\n            now() > workInProgressRootRenderTargetTime &&\n            ((workInProgress.flags |= 128),\n            (newProps = !0),\n            cutOffTailIfNeeded(type, !1),\n            (workInProgress.lanes = 4194304));\n        }\n      else {\n        if (!newProps)\n          if (((current = findFirstSuspended(cache$127)), null !== current)) {\n            if (\n              ((workInProgress.flags |= 128),\n              (newProps = !0),\n              (current = current.updateQueue),\n              (workInProgress.updateQueue = current),\n              scheduleRetryEffect(workInProgress, current),\n              cutOffTailIfNeeded(type, !0),\n              null === type.tail &&\n                \"hidden\" === type.tailMode &&\n                !cache$127.alternate &&\n                !isHydrating)\n            )\n              return bubbleProperties(workInProgress), null;\n          } else\n            2 * now() - type.renderingStartTime >\n              workInProgressRootRenderTargetTime &&\n              536870912 !== renderLanes &&\n              ((workInProgress.flags |= 128),\n              (newProps = !0),\n              cutOffTailIfNeeded(type, !1),\n              (workInProgress.lanes = 4194304));\n        type.isBackwards\n          ? ((cache$127.sibling = workInProgress.child),\n            (workInProgress.child = cache$127))\n          : ((current = type.last),\n            null !== current\n              ? (current.sibling = cache$127)\n              : (workInProgress.child = cache$127),\n            (type.last = cache$127));\n      }\n      if (null !== type.tail)\n        return (\n          (workInProgress = type.tail),\n          (type.rendering = workInProgress),\n          (type.tail = workInProgress.sibling),\n          (type.renderingStartTime = now()),\n          (workInProgress.sibling = null),\n          (current = suspenseStackCursor.current),\n          push(suspenseStackCursor, newProps ? (current & 1) | 2 : current & 1),\n          workInProgress\n        );\n      bubbleProperties(workInProgress);\n      return null;\n    case 22:\n    case 23:\n      return (\n        popSuspenseHandler(workInProgress),\n        popHiddenContext(),\n        (newProps = null !== workInProgress.memoizedState),\n        null !== current\n          ? (null !== current.memoizedState) !== newProps &&\n            (workInProgress.flags |= 8192)\n          : newProps && (workInProgress.flags |= 8192),\n        newProps\n          ? 0 !== (renderLanes & 536870912) &&\n            0 === (workInProgress.flags & 128) &&\n            (bubbleProperties(workInProgress),\n            workInProgress.subtreeFlags & 6 && (workInProgress.flags |= 8192))\n          : bubbleProperties(workInProgress),\n        (renderLanes = workInProgress.updateQueue),\n        null !== renderLanes &&\n          scheduleRetryEffect(workInProgress, renderLanes.retryQueue),\n        (renderLanes = null),\n        null !== current &&\n          null !== current.memoizedState &&\n          null !== current.memoizedState.cachePool &&\n          (renderLanes = current.memoizedState.cachePool.pool),\n        (newProps = null),\n        null !== workInProgress.memoizedState &&\n          null !== workInProgress.memoizedState.cachePool &&\n          (newProps = workInProgress.memoizedState.cachePool.pool),\n        newProps !== renderLanes && (workInProgress.flags |= 2048),\n        null !== current && pop(resumedCache),\n        null\n      );\n    case 24:\n      return (\n        (renderLanes = null),\n        null !== current && (renderLanes = current.memoizedState.cache),\n        workInProgress.memoizedState.cache !== renderLanes &&\n          (workInProgress.flags |= 2048),\n        popProvider(CacheContext),\n        bubbleProperties(workInProgress),\n        null\n      );\n    case 25:\n      return null;\n    case 30:\n      return null;\n  }\n  throw Error(formatProdErrorMessage(156, workInProgress.tag));\n}\nfunction unwindWork(current, workInProgress) {\n  popTreeContext(workInProgress);\n  switch (workInProgress.tag) {\n    case 1:\n      return (\n        (current = workInProgress.flags),\n        current & 65536\n          ? ((workInProgress.flags = (current & -65537) | 128), workInProgress)\n          : null\n      );\n    case 3:\n      return (\n        popProvider(CacheContext),\n        popHostContainer(),\n        (current = workInProgress.flags),\n        0 !== (current & 65536) && 0 === (current & 128)\n          ? ((workInProgress.flags = (current & -65537) | 128), workInProgress)\n          : null\n      );\n    case 26:\n    case 27:\n    case 5:\n      return popHostContext(workInProgress), null;\n    case 13:\n      popSuspenseHandler(workInProgress);\n      current = workInProgress.memoizedState;\n      if (null !== current && null !== current.dehydrated) {\n        if (null === workInProgress.alternate)\n          throw Error(formatProdErrorMessage(340));\n        resetHydrationState();\n      }\n      current = workInProgress.flags;\n      return current & 65536\n        ? ((workInProgress.flags = (current & -65537) | 128), workInProgress)\n        : null;\n    case 19:\n      return pop(suspenseStackCursor), null;\n    case 4:\n      return popHostContainer(), null;\n    case 10:\n      return popProvider(workInProgress.type), null;\n    case 22:\n    case 23:\n      return (\n        popSuspenseHandler(workInProgress),\n        popHiddenContext(),\n        null !== current && pop(resumedCache),\n        (current = workInProgress.flags),\n        current & 65536\n          ? ((workInProgress.flags = (current & -65537) | 128), workInProgress)\n          : null\n      );\n    case 24:\n      return popProvider(CacheContext), null;\n    case 25:\n      return null;\n    default:\n      return null;\n  }\n}\nfunction unwindInterruptedWork(current, interruptedWork) {\n  popTreeContext(interruptedWork);\n  switch (interruptedWork.tag) {\n    case 3:\n      popProvider(CacheContext);\n      popHostContainer();\n      break;\n    case 26:\n    case 27:\n    case 5:\n      popHostContext(interruptedWork);\n      break;\n    case 4:\n      popHostContainer();\n      break;\n    case 13:\n      popSuspenseHandler(interruptedWork);\n      break;\n    case 19:\n      pop(suspenseStackCursor);\n      break;\n    case 10:\n      popProvider(interruptedWork.type);\n      break;\n    case 22:\n    case 23:\n      popSuspenseHandler(interruptedWork);\n      popHiddenContext();\n      null !== current && pop(resumedCache);\n      break;\n    case 24:\n      popProvider(CacheContext);\n  }\n}\nfunction commitHookEffectListMount(flags, finishedWork) {\n  try {\n    var updateQueue = finishedWork.updateQueue,\n      lastEffect = null !== updateQueue ? updateQueue.lastEffect : null;\n    if (null !== lastEffect) {\n      var firstEffect = lastEffect.next;\n      updateQueue = firstEffect;\n      do {\n        if ((updateQueue.tag & flags) === flags) {\n          lastEffect = void 0;\n          var create = updateQueue.create,\n            inst = updateQueue.inst;\n          lastEffect = create();\n          inst.destroy = lastEffect;\n        }\n        updateQueue = updateQueue.next;\n      } while (updateQueue !== firstEffect);\n    }\n  } catch (error) {\n    captureCommitPhaseError(finishedWork, finishedWork.return, error);\n  }\n}\nfunction commitHookEffectListUnmount(\n  flags,\n  finishedWork,\n  nearestMountedAncestor$jscomp$0\n) {\n  try {\n    var updateQueue = finishedWork.updateQueue,\n      lastEffect = null !== updateQueue ? updateQueue.lastEffect : null;\n    if (null !== lastEffect) {\n      var firstEffect = lastEffect.next;\n      updateQueue = firstEffect;\n      do {\n        if ((updateQueue.tag & flags) === flags) {\n          var inst = updateQueue.inst,\n            destroy = inst.destroy;\n          if (void 0 !== destroy) {\n            inst.destroy = void 0;\n            lastEffect = finishedWork;\n            var nearestMountedAncestor = nearestMountedAncestor$jscomp$0,\n              destroy_ = destroy;\n            try {\n              destroy_();\n            } catch (error) {\n              captureCommitPhaseError(\n                lastEffect,\n                nearestMountedAncestor,\n                error\n              );\n            }\n          }\n        }\n        updateQueue = updateQueue.next;\n      } while (updateQueue !== firstEffect);\n    }\n  } catch (error) {\n    captureCommitPhaseError(finishedWork, finishedWork.return, error);\n  }\n}\nfunction commitClassCallbacks(finishedWork) {\n  var updateQueue = finishedWork.updateQueue;\n  if (null !== updateQueue) {\n    var instance = finishedWork.stateNode;\n    try {\n      commitCallbacks(updateQueue, instance);\n    } catch (error) {\n      captureCommitPhaseError(finishedWork, finishedWork.return, error);\n    }\n  }\n}\nfunction safelyCallComponentWillUnmount(\n  current,\n  nearestMountedAncestor,\n  instance\n) {\n  instance.props = resolveClassComponentProps(\n    current.type,\n    current.memoizedProps\n  );\n  instance.state = current.memoizedState;\n  try {\n    instance.componentWillUnmount();\n  } catch (error) {\n    captureCommitPhaseError(current, nearestMountedAncestor, error);\n  }\n}\nfunction safelyAttachRef(current, nearestMountedAncestor) {\n  try {\n    var ref = current.ref;\n    if (null !== ref) {\n      switch (current.tag) {\n        case 26:\n        case 27:\n        case 5:\n          var instanceToUse = current.stateNode;\n          break;\n        case 30:\n          instanceToUse = current.stateNode;\n          break;\n        default:\n          instanceToUse = current.stateNode;\n      }\n      \"function\" === typeof ref\n        ? (current.refCleanup = ref(instanceToUse))\n        : (ref.current = instanceToUse);\n    }\n  } catch (error) {\n    captureCommitPhaseError(current, nearestMountedAncestor, error);\n  }\n}\nfunction safelyDetachRef(current, nearestMountedAncestor) {\n  var ref = current.ref,\n    refCleanup = current.refCleanup;\n  if (null !== ref)\n    if (\"function\" === typeof refCleanup)\n      try {\n        refCleanup();\n      } catch (error) {\n        captureCommitPhaseError(current, nearestMountedAncestor, error);\n      } finally {\n        (current.refCleanup = null),\n          (current = current.alternate),\n          null != current && (current.refCleanup = null);\n      }\n    else if (\"function\" === typeof ref)\n      try {\n        ref(null);\n      } catch (error$143) {\n        captureCommitPhaseError(current, nearestMountedAncestor, error$143);\n      }\n    else ref.current = null;\n}\nfunction commitHostMount(finishedWork) {\n  var type = finishedWork.type,\n    props = finishedWork.memoizedProps,\n    instance = finishedWork.stateNode;\n  try {\n    a: switch (type) {\n      case \"button\":\n      case \"input\":\n      case \"select\":\n      case \"textarea\":\n        props.autoFocus && instance.focus();\n        break a;\n      case \"img\":\n        props.src\n          ? (instance.src = props.src)\n          : props.srcSet && (instance.srcset = props.srcSet);\n    }\n  } catch (error) {\n    captureCommitPhaseError(finishedWork, finishedWork.return, error);\n  }\n}\nfunction commitHostUpdate(finishedWork, newProps, oldProps) {\n  try {\n    var domElement = finishedWork.stateNode;\n    updateProperties(domElement, finishedWork.type, oldProps, newProps);\n    domElement[internalPropsKey] = newProps;\n  } catch (error) {\n    captureCommitPhaseError(finishedWork, finishedWork.return, error);\n  }\n}\nfunction isHostParent(fiber) {\n  return (\n    5 === fiber.tag ||\n    3 === fiber.tag ||\n    26 === fiber.tag ||\n    (27 === fiber.tag && isSingletonScope(fiber.type)) ||\n    4 === fiber.tag\n  );\n}\nfunction getHostSibling(fiber) {\n  a: for (;;) {\n    for (; null === fiber.sibling; ) {\n      if (null === fiber.return || isHostParent(fiber.return)) return null;\n      fiber = fiber.return;\n    }\n    fiber.sibling.return = fiber.return;\n    for (\n      fiber = fiber.sibling;\n      5 !== fiber.tag && 6 !== fiber.tag && 18 !== fiber.tag;\n\n    ) {\n      if (27 === fiber.tag && isSingletonScope(fiber.type)) continue a;\n      if (fiber.flags & 2) continue a;\n      if (null === fiber.child || 4 === fiber.tag) continue a;\n      else (fiber.child.return = fiber), (fiber = fiber.child);\n    }\n    if (!(fiber.flags & 2)) return fiber.stateNode;\n  }\n}\nfunction insertOrAppendPlacementNodeIntoContainer(node, before, parent) {\n  var tag = node.tag;\n  if (5 === tag || 6 === tag)\n    (node = node.stateNode),\n      before\n        ? (9 === parent.nodeType\n            ? parent.body\n            : \"HTML\" === parent.nodeName\n              ? parent.ownerDocument.body\n              : parent\n          ).insertBefore(node, before)\n        : ((before =\n            9 === parent.nodeType\n              ? parent.body\n              : \"HTML\" === parent.nodeName\n                ? parent.ownerDocument.body\n                : parent),\n          before.appendChild(node),\n          (parent = parent._reactRootContainer),\n          (null !== parent && void 0 !== parent) ||\n            null !== before.onclick ||\n            (before.onclick = noop$1));\n  else if (\n    4 !== tag &&\n    (27 === tag &&\n      isSingletonScope(node.type) &&\n      ((parent = node.stateNode), (before = null)),\n    (node = node.child),\n    null !== node)\n  )\n    for (\n      insertOrAppendPlacementNodeIntoContainer(node, before, parent),\n        node = node.sibling;\n      null !== node;\n\n    )\n      insertOrAppendPlacementNodeIntoContainer(node, before, parent),\n        (node = node.sibling);\n}\nfunction insertOrAppendPlacementNode(node, before, parent) {\n  var tag = node.tag;\n  if (5 === tag || 6 === tag)\n    (node = node.stateNode),\n      before ? parent.insertBefore(node, before) : parent.appendChild(node);\n  else if (\n    4 !== tag &&\n    (27 === tag && isSingletonScope(node.type) && (parent = node.stateNode),\n    (node = node.child),\n    null !== node)\n  )\n    for (\n      insertOrAppendPlacementNode(node, before, parent), node = node.sibling;\n      null !== node;\n\n    )\n      insertOrAppendPlacementNode(node, before, parent), (node = node.sibling);\n}\nfunction commitHostSingletonAcquisition(finishedWork) {\n  var singleton = finishedWork.stateNode,\n    props = finishedWork.memoizedProps;\n  try {\n    for (\n      var type = finishedWork.type, attributes = singleton.attributes;\n      attributes.length;\n\n    )\n      singleton.removeAttributeNode(attributes[0]);\n    setInitialProperties(singleton, type, props);\n    singleton[internalInstanceKey] = finishedWork;\n    singleton[internalPropsKey] = props;\n  } catch (error) {\n    captureCommitPhaseError(finishedWork, finishedWork.return, error);\n  }\n}\nvar offscreenSubtreeIsHidden = !1,\n  offscreenSubtreeWasHidden = !1,\n  needsFormReset = !1,\n  PossiblyWeakSet = \"function\" === typeof WeakSet ? WeakSet : Set,\n  nextEffect = null;\nfunction commitBeforeMutationEffects(root, firstChild) {\n  root = root.containerInfo;\n  eventsEnabled = _enabled;\n  root = getActiveElementDeep(root);\n  if (hasSelectionCapabilities(root)) {\n    if (\"selectionStart\" in root)\n      var JSCompiler_temp = {\n        start: root.selectionStart,\n        end: root.selectionEnd\n      };\n    else\n      a: {\n        JSCompiler_temp =\n          ((JSCompiler_temp = root.ownerDocument) &&\n            JSCompiler_temp.defaultView) ||\n          window;\n        var selection =\n          JSCompiler_temp.getSelection && JSCompiler_temp.getSelection();\n        if (selection && 0 !== selection.rangeCount) {\n          JSCompiler_temp = selection.anchorNode;\n          var anchorOffset = selection.anchorOffset,\n            focusNode = selection.focusNode;\n          selection = selection.focusOffset;\n          try {\n            JSCompiler_temp.nodeType, focusNode.nodeType;\n          } catch (e$20) {\n            JSCompiler_temp = null;\n            break a;\n          }\n          var length = 0,\n            start = -1,\n            end = -1,\n            indexWithinAnchor = 0,\n            indexWithinFocus = 0,\n            node = root,\n            parentNode = null;\n          b: for (;;) {\n            for (var next; ; ) {\n              node !== JSCompiler_temp ||\n                (0 !== anchorOffset && 3 !== node.nodeType) ||\n                (start = length + anchorOffset);\n              node !== focusNode ||\n                (0 !== selection && 3 !== node.nodeType) ||\n                (end = length + selection);\n              3 === node.nodeType && (length += node.nodeValue.length);\n              if (null === (next = node.firstChild)) break;\n              parentNode = node;\n              node = next;\n            }\n            for (;;) {\n              if (node === root) break b;\n              parentNode === JSCompiler_temp &&\n                ++indexWithinAnchor === anchorOffset &&\n                (start = length);\n              parentNode === focusNode &&\n                ++indexWithinFocus === selection &&\n                (end = length);\n              if (null !== (next = node.nextSibling)) break;\n              node = parentNode;\n              parentNode = node.parentNode;\n            }\n            node = next;\n          }\n          JSCompiler_temp =\n            -1 === start || -1 === end ? null : { start: start, end: end };\n        } else JSCompiler_temp = null;\n      }\n    JSCompiler_temp = JSCompiler_temp || { start: 0, end: 0 };\n  } else JSCompiler_temp = null;\n  selectionInformation = { focusedElem: root, selectionRange: JSCompiler_temp };\n  _enabled = !1;\n  for (nextEffect = firstChild; null !== nextEffect; )\n    if (\n      ((firstChild = nextEffect),\n      (root = firstChild.child),\n      0 !== (firstChild.subtreeFlags & 1024) && null !== root)\n    )\n      (root.return = firstChild), (nextEffect = root);\n    else\n      for (; null !== nextEffect; ) {\n        firstChild = nextEffect;\n        focusNode = firstChild.alternate;\n        root = firstChild.flags;\n        switch (firstChild.tag) {\n          case 0:\n            break;\n          case 11:\n          case 15:\n            break;\n          case 1:\n            if (0 !== (root & 1024) && null !== focusNode) {\n              root = void 0;\n              JSCompiler_temp = firstChild;\n              anchorOffset = focusNode.memoizedProps;\n              focusNode = focusNode.memoizedState;\n              selection = JSCompiler_temp.stateNode;\n              try {\n                var resolvedPrevProps = resolveClassComponentProps(\n                  JSCompiler_temp.type,\n                  anchorOffset,\n                  JSCompiler_temp.elementType === JSCompiler_temp.type\n                );\n                root = selection.getSnapshotBeforeUpdate(\n                  resolvedPrevProps,\n                  focusNode\n                );\n                selection.__reactInternalSnapshotBeforeUpdate = root;\n              } catch (error) {\n                captureCommitPhaseError(\n                  JSCompiler_temp,\n                  JSCompiler_temp.return,\n                  error\n                );\n              }\n            }\n            break;\n          case 3:\n            if (0 !== (root & 1024))\n              if (\n                ((root = firstChild.stateNode.containerInfo),\n                (JSCompiler_temp = root.nodeType),\n                9 === JSCompiler_temp)\n              )\n                clearContainerSparingly(root);\n              else if (1 === JSCompiler_temp)\n                switch (root.nodeName) {\n                  case \"HEAD\":\n                  case \"HTML\":\n                  case \"BODY\":\n                    clearContainerSparingly(root);\n                    break;\n                  default:\n                    root.textContent = \"\";\n                }\n            break;\n          case 5:\n          case 26:\n          case 27:\n          case 6:\n          case 4:\n          case 17:\n            break;\n          default:\n            if (0 !== (root & 1024)) throw Error(formatProdErrorMessage(163));\n        }\n        root = firstChild.sibling;\n        if (null !== root) {\n          root.return = firstChild.return;\n          nextEffect = root;\n          break;\n        }\n        nextEffect = firstChild.return;\n      }\n}\nfunction commitLayoutEffectOnFiber(finishedRoot, current, finishedWork) {\n  var flags = finishedWork.flags;\n  switch (finishedWork.tag) {\n    case 0:\n    case 11:\n    case 15:\n      recursivelyTraverseLayoutEffects(finishedRoot, finishedWork);\n      flags & 4 && commitHookEffectListMount(5, finishedWork);\n      break;\n    case 1:\n      recursivelyTraverseLayoutEffects(finishedRoot, finishedWork);\n      if (flags & 4)\n        if (((finishedRoot = finishedWork.stateNode), null === current))\n          try {\n            finishedRoot.componentDidMount();\n          } catch (error) {\n            captureCommitPhaseError(finishedWork, finishedWork.return, error);\n          }\n        else {\n          var prevProps = resolveClassComponentProps(\n            finishedWork.type,\n            current.memoizedProps\n          );\n          current = current.memoizedState;\n          try {\n            finishedRoot.componentDidUpdate(\n              prevProps,\n              current,\n              finishedRoot.__reactInternalSnapshotBeforeUpdate\n            );\n          } catch (error$142) {\n            captureCommitPhaseError(\n              finishedWork,\n              finishedWork.return,\n              error$142\n            );\n          }\n        }\n      flags & 64 && commitClassCallbacks(finishedWork);\n      flags & 512 && safelyAttachRef(finishedWork, finishedWork.return);\n      break;\n    case 3:\n      recursivelyTraverseLayoutEffects(finishedRoot, finishedWork);\n      if (\n        flags & 64 &&\n        ((finishedRoot = finishedWork.updateQueue), null !== finishedRoot)\n      ) {\n        current = null;\n        if (null !== finishedWork.child)\n          switch (finishedWork.child.tag) {\n            case 27:\n            case 5:\n              current = finishedWork.child.stateNode;\n              break;\n            case 1:\n              current = finishedWork.child.stateNode;\n          }\n        try {\n          commitCallbacks(finishedRoot, current);\n        } catch (error) {\n          captureCommitPhaseError(finishedWork, finishedWork.return, error);\n        }\n      }\n      break;\n    case 27:\n      null === current &&\n        flags & 4 &&\n        commitHostSingletonAcquisition(finishedWork);\n    case 26:\n    case 5:\n      recursivelyTraverseLayoutEffects(finishedRoot, finishedWork);\n      null === current && flags & 4 && commitHostMount(finishedWork);\n      flags & 512 && safelyAttachRef(finishedWork, finishedWork.return);\n      break;\n    case 12:\n      recursivelyTraverseLayoutEffects(finishedRoot, finishedWork);\n      break;\n    case 13:\n      recursivelyTraverseLayoutEffects(finishedRoot, finishedWork);\n      flags & 4 && commitSuspenseHydrationCallbacks(finishedRoot, finishedWork);\n      flags & 64 &&\n        ((finishedRoot = finishedWork.memoizedState),\n        null !== finishedRoot &&\n          ((finishedRoot = finishedRoot.dehydrated),\n          null !== finishedRoot &&\n            ((finishedWork = retryDehydratedSuspenseBoundary.bind(\n              null,\n              finishedWork\n            )),\n            registerSuspenseInstanceRetry(finishedRoot, finishedWork))));\n      break;\n    case 22:\n      flags = null !== finishedWork.memoizedState || offscreenSubtreeIsHidden;\n      if (!flags) {\n        current =\n          (null !== current && null !== current.memoizedState) ||\n          offscreenSubtreeWasHidden;\n        prevProps = offscreenSubtreeIsHidden;\n        var prevOffscreenSubtreeWasHidden = offscreenSubtreeWasHidden;\n        offscreenSubtreeIsHidden = flags;\n        (offscreenSubtreeWasHidden = current) && !prevOffscreenSubtreeWasHidden\n          ? recursivelyTraverseReappearLayoutEffects(\n              finishedRoot,\n              finishedWork,\n              0 !== (finishedWork.subtreeFlags & 8772)\n            )\n          : recursivelyTraverseLayoutEffects(finishedRoot, finishedWork);\n        offscreenSubtreeIsHidden = prevProps;\n        offscreenSubtreeWasHidden = prevOffscreenSubtreeWasHidden;\n      }\n      break;\n    case 30:\n      break;\n    default:\n      recursivelyTraverseLayoutEffects(finishedRoot, finishedWork);\n  }\n}\nfunction detachFiberAfterEffects(fiber) {\n  var alternate = fiber.alternate;\n  null !== alternate &&\n    ((fiber.alternate = null), detachFiberAfterEffects(alternate));\n  fiber.child = null;\n  fiber.deletions = null;\n  fiber.sibling = null;\n  5 === fiber.tag &&\n    ((alternate = fiber.stateNode),\n    null !== alternate && detachDeletedInstance(alternate));\n  fiber.stateNode = null;\n  fiber.return = null;\n  fiber.dependencies = null;\n  fiber.memoizedProps = null;\n  fiber.memoizedState = null;\n  fiber.pendingProps = null;\n  fiber.stateNode = null;\n  fiber.updateQueue = null;\n}\nvar hostParent = null,\n  hostParentIsContainer = !1;\nfunction recursivelyTraverseDeletionEffects(\n  finishedRoot,\n  nearestMountedAncestor,\n  parent\n) {\n  for (parent = parent.child; null !== parent; )\n    commitDeletionEffectsOnFiber(finishedRoot, nearestMountedAncestor, parent),\n      (parent = parent.sibling);\n}\nfunction commitDeletionEffectsOnFiber(\n  finishedRoot,\n  nearestMountedAncestor,\n  deletedFiber\n) {\n  if (injectedHook && \"function\" === typeof injectedHook.onCommitFiberUnmount)\n    try {\n      injectedHook.onCommitFiberUnmount(rendererID, deletedFiber);\n    } catch (err) {}\n  switch (deletedFiber.tag) {\n    case 26:\n      offscreenSubtreeWasHidden ||\n        safelyDetachRef(deletedFiber, nearestMountedAncestor);\n      recursivelyTraverseDeletionEffects(\n        finishedRoot,\n        nearestMountedAncestor,\n        deletedFiber\n      );\n      deletedFiber.memoizedState\n        ? deletedFiber.memoizedState.count--\n        : deletedFiber.stateNode &&\n          ((deletedFiber = deletedFiber.stateNode),\n          deletedFiber.parentNode.removeChild(deletedFiber));\n      break;\n    case 27:\n      offscreenSubtreeWasHidden ||\n        safelyDetachRef(deletedFiber, nearestMountedAncestor);\n      var prevHostParent = hostParent,\n        prevHostParentIsContainer = hostParentIsContainer;\n      isSingletonScope(deletedFiber.type) &&\n        ((hostParent = deletedFiber.stateNode), (hostParentIsContainer = !1));\n      recursivelyTraverseDeletionEffects(\n        finishedRoot,\n        nearestMountedAncestor,\n        deletedFiber\n      );\n      releaseSingletonInstance(deletedFiber.stateNode);\n      hostParent = prevHostParent;\n      hostParentIsContainer = prevHostParentIsContainer;\n      break;\n    case 5:\n      offscreenSubtreeWasHidden ||\n        safelyDetachRef(deletedFiber, nearestMountedAncestor);\n    case 6:\n      prevHostParent = hostParent;\n      prevHostParentIsContainer = hostParentIsContainer;\n      hostParent = null;\n      recursivelyTraverseDeletionEffects(\n        finishedRoot,\n        nearestMountedAncestor,\n        deletedFiber\n      );\n      hostParent = prevHostParent;\n      hostParentIsContainer = prevHostParentIsContainer;\n      if (null !== hostParent)\n        if (hostParentIsContainer)\n          try {\n            (9 === hostParent.nodeType\n              ? hostParent.body\n              : \"HTML\" === hostParent.nodeName\n                ? hostParent.ownerDocument.body\n                : hostParent\n            ).removeChild(deletedFiber.stateNode);\n          } catch (error) {\n            captureCommitPhaseError(\n              deletedFiber,\n              nearestMountedAncestor,\n              error\n            );\n          }\n        else\n          try {\n            hostParent.removeChild(deletedFiber.stateNode);\n          } catch (error) {\n            captureCommitPhaseError(\n              deletedFiber,\n              nearestMountedAncestor,\n              error\n            );\n          }\n      break;\n    case 18:\n      null !== hostParent &&\n        (hostParentIsContainer\n          ? ((finishedRoot = hostParent),\n            clearSuspenseBoundary(\n              9 === finishedRoot.nodeType\n                ? finishedRoot.body\n                : \"HTML\" === finishedRoot.nodeName\n                  ? finishedRoot.ownerDocument.body\n                  : finishedRoot,\n              deletedFiber.stateNode\n            ),\n            retryIfBlockedOn(finishedRoot))\n          : clearSuspenseBoundary(hostParent, deletedFiber.stateNode));\n      break;\n    case 4:\n      prevHostParent = hostParent;\n      prevHostParentIsContainer = hostParentIsContainer;\n      hostParent = deletedFiber.stateNode.containerInfo;\n      hostParentIsContainer = !0;\n      recursivelyTraverseDeletionEffects(\n        finishedRoot,\n        nearestMountedAncestor,\n        deletedFiber\n      );\n      hostParent = prevHostParent;\n      hostParentIsContainer = prevHostParentIsContainer;\n      break;\n    case 0:\n    case 11:\n    case 14:\n    case 15:\n      offscreenSubtreeWasHidden ||\n        commitHookEffectListUnmount(2, deletedFiber, nearestMountedAncestor);\n      offscreenSubtreeWasHidden ||\n        commitHookEffectListUnmount(4, deletedFiber, nearestMountedAncestor);\n      recursivelyTraverseDeletionEffects(\n        finishedRoot,\n        nearestMountedAncestor,\n        deletedFiber\n      );\n      break;\n    case 1:\n      offscreenSubtreeWasHidden ||\n        (safelyDetachRef(deletedFiber, nearestMountedAncestor),\n        (prevHostParent = deletedFiber.stateNode),\n        \"function\" === typeof prevHostParent.componentWillUnmount &&\n          safelyCallComponentWillUnmount(\n            deletedFiber,\n            nearestMountedAncestor,\n            prevHostParent\n          ));\n      recursivelyTraverseDeletionEffects(\n        finishedRoot,\n        nearestMountedAncestor,\n        deletedFiber\n      );\n      break;\n    case 21:\n      recursivelyTraverseDeletionEffects(\n        finishedRoot,\n        nearestMountedAncestor,\n        deletedFiber\n      );\n      break;\n    case 22:\n      offscreenSubtreeWasHidden =\n        (prevHostParent = offscreenSubtreeWasHidden) ||\n        null !== deletedFiber.memoizedState;\n      recursivelyTraverseDeletionEffects(\n        finishedRoot,\n        nearestMountedAncestor,\n        deletedFiber\n      );\n      offscreenSubtreeWasHidden = prevHostParent;\n      break;\n    default:\n      recursivelyTraverseDeletionEffects(\n        finishedRoot,\n        nearestMountedAncestor,\n        deletedFiber\n      );\n  }\n}\nfunction commitSuspenseHydrationCallbacks(finishedRoot, finishedWork) {\n  if (\n    null === finishedWork.memoizedState &&\n    ((finishedRoot = finishedWork.alternate),\n    null !== finishedRoot &&\n      ((finishedRoot = finishedRoot.memoizedState),\n      null !== finishedRoot &&\n        ((finishedRoot = finishedRoot.dehydrated), null !== finishedRoot)))\n  )\n    try {\n      retryIfBlockedOn(finishedRoot);\n    } catch (error) {\n      captureCommitPhaseError(finishedWork, finishedWork.return, error);\n    }\n}\nfunction getRetryCache(finishedWork) {\n  switch (finishedWork.tag) {\n    case 13:\n    case 19:\n      var retryCache = finishedWork.stateNode;\n      null === retryCache &&\n        (retryCache = finishedWork.stateNode = new PossiblyWeakSet());\n      return retryCache;\n    case 22:\n      return (\n        (finishedWork = finishedWork.stateNode),\n        (retryCache = finishedWork._retryCache),\n        null === retryCache &&\n          (retryCache = finishedWork._retryCache = new PossiblyWeakSet()),\n        retryCache\n      );\n    default:\n      throw Error(formatProdErrorMessage(435, finishedWork.tag));\n  }\n}\nfunction attachSuspenseRetryListeners(finishedWork, wakeables) {\n  var retryCache = getRetryCache(finishedWork);\n  wakeables.forEach(function (wakeable) {\n    var retry = resolveRetryWakeable.bind(null, finishedWork, wakeable);\n    retryCache.has(wakeable) ||\n      (retryCache.add(wakeable), wakeable.then(retry, retry));\n  });\n}\nfunction recursivelyTraverseMutationEffects(root$jscomp$0, parentFiber) {\n  var deletions = parentFiber.deletions;\n  if (null !== deletions)\n    for (var i = 0; i < deletions.length; i++) {\n      var childToDelete = deletions[i],\n        root = root$jscomp$0,\n        returnFiber = parentFiber,\n        parent = returnFiber;\n      a: for (; null !== parent; ) {\n        switch (parent.tag) {\n          case 27:\n            if (isSingletonScope(parent.type)) {\n              hostParent = parent.stateNode;\n              hostParentIsContainer = !1;\n              break a;\n            }\n            break;\n          case 5:\n            hostParent = parent.stateNode;\n            hostParentIsContainer = !1;\n            break a;\n          case 3:\n          case 4:\n            hostParent = parent.stateNode.containerInfo;\n            hostParentIsContainer = !0;\n            break a;\n        }\n        parent = parent.return;\n      }\n      if (null === hostParent) throw Error(formatProdErrorMessage(160));\n      commitDeletionEffectsOnFiber(root, returnFiber, childToDelete);\n      hostParent = null;\n      hostParentIsContainer = !1;\n      root = childToDelete.alternate;\n      null !== root && (root.return = null);\n      childToDelete.return = null;\n    }\n  if (parentFiber.subtreeFlags & 13878)\n    for (parentFiber = parentFiber.child; null !== parentFiber; )\n      commitMutationEffectsOnFiber(parentFiber, root$jscomp$0),\n        (parentFiber = parentFiber.sibling);\n}\nvar currentHoistableRoot = null;\nfunction commitMutationEffectsOnFiber(finishedWork, root) {\n  var current = finishedWork.alternate,\n    flags = finishedWork.flags;\n  switch (finishedWork.tag) {\n    case 0:\n    case 11:\n    case 14:\n    case 15:\n      recursivelyTraverseMutationEffects(root, finishedWork);\n      commitReconciliationEffects(finishedWork);\n      flags & 4 &&\n        (commitHookEffectListUnmount(3, finishedWork, finishedWork.return),\n        commitHookEffectListMount(3, finishedWork),\n        commitHookEffectListUnmount(5, finishedWork, finishedWork.return));\n      break;\n    case 1:\n      recursivelyTraverseMutationEffects(root, finishedWork);\n      commitReconciliationEffects(finishedWork);\n      flags & 512 &&\n        (offscreenSubtreeWasHidden ||\n          null === current ||\n          safelyDetachRef(current, current.return));\n      flags & 64 &&\n        offscreenSubtreeIsHidden &&\n        ((finishedWork = finishedWork.updateQueue),\n        null !== finishedWork &&\n          ((flags = finishedWork.callbacks),\n          null !== flags &&\n            ((current = finishedWork.shared.hiddenCallbacks),\n            (finishedWork.shared.hiddenCallbacks =\n              null === current ? flags : current.concat(flags)))));\n      break;\n    case 26:\n      var hoistableRoot = currentHoistableRoot;\n      recursivelyTraverseMutationEffects(root, finishedWork);\n      commitReconciliationEffects(finishedWork);\n      flags & 512 &&\n        (offscreenSubtreeWasHidden ||\n          null === current ||\n          safelyDetachRef(current, current.return));\n      if (flags & 4) {\n        var currentResource = null !== current ? current.memoizedState : null;\n        flags = finishedWork.memoizedState;\n        if (null === current)\n          if (null === flags)\n            if (null === finishedWork.stateNode) {\n              a: {\n                flags = finishedWork.type;\n                current = finishedWork.memoizedProps;\n                hoistableRoot = hoistableRoot.ownerDocument || hoistableRoot;\n                b: switch (flags) {\n                  case \"title\":\n                    currentResource =\n                      hoistableRoot.getElementsByTagName(\"title\")[0];\n                    if (\n                      !currentResource ||\n                      currentResource[internalHoistableMarker] ||\n                      currentResource[internalInstanceKey] ||\n                      \"http://www.w3.org/2000/svg\" ===\n                        currentResource.namespaceURI ||\n                      currentResource.hasAttribute(\"itemprop\")\n                    )\n                      (currentResource = hoistableRoot.createElement(flags)),\n                        hoistableRoot.head.insertBefore(\n                          currentResource,\n                          hoistableRoot.querySelector(\"head > title\")\n                        );\n                    setInitialProperties(currentResource, flags, current);\n                    currentResource[internalInstanceKey] = finishedWork;\n                    markNodeAsHoistable(currentResource);\n                    flags = currentResource;\n                    break a;\n                  case \"link\":\n                    var maybeNodes = getHydratableHoistableCache(\n                      \"link\",\n                      \"href\",\n                      hoistableRoot\n                    ).get(flags + (current.href || \"\"));\n                    if (maybeNodes)\n                      for (var i = 0; i < maybeNodes.length; i++)\n                        if (\n                          ((currentResource = maybeNodes[i]),\n                          currentResource.getAttribute(\"href\") ===\n                            (null == current.href || \"\" === current.href\n                              ? null\n                              : current.href) &&\n                            currentResource.getAttribute(\"rel\") ===\n                              (null == current.rel ? null : current.rel) &&\n                            currentResource.getAttribute(\"title\") ===\n                              (null == current.title ? null : current.title) &&\n                            currentResource.getAttribute(\"crossorigin\") ===\n                              (null == current.crossOrigin\n                                ? null\n                                : current.crossOrigin))\n                        ) {\n                          maybeNodes.splice(i, 1);\n                          break b;\n                        }\n                    currentResource = hoistableRoot.createElement(flags);\n                    setInitialProperties(currentResource, flags, current);\n                    hoistableRoot.head.appendChild(currentResource);\n                    break;\n                  case \"meta\":\n                    if (\n                      (maybeNodes = getHydratableHoistableCache(\n                        \"meta\",\n                        \"content\",\n                        hoistableRoot\n                      ).get(flags + (current.content || \"\")))\n                    )\n                      for (i = 0; i < maybeNodes.length; i++)\n                        if (\n                          ((currentResource = maybeNodes[i]),\n                          currentResource.getAttribute(\"content\") ===\n                            (null == current.content\n                              ? null\n                              : \"\" + current.content) &&\n                            currentResource.getAttribute(\"name\") ===\n                              (null == current.name ? null : current.name) &&\n                            currentResource.getAttribute(\"property\") ===\n                              (null == current.property\n                                ? null\n                                : current.property) &&\n                            currentResource.getAttribute(\"http-equiv\") ===\n                              (null == current.httpEquiv\n                                ? null\n                                : current.httpEquiv) &&\n                            currentResource.getAttribute(\"charset\") ===\n                              (null == current.charSet\n                                ? null\n                                : current.charSet))\n                        ) {\n                          maybeNodes.splice(i, 1);\n                          break b;\n                        }\n                    currentResource = hoistableRoot.createElement(flags);\n                    setInitialProperties(currentResource, flags, current);\n                    hoistableRoot.head.appendChild(currentResource);\n                    break;\n                  default:\n                    throw Error(formatProdErrorMessage(468, flags));\n                }\n                currentResource[internalInstanceKey] = finishedWork;\n                markNodeAsHoistable(currentResource);\n                flags = currentResource;\n              }\n              finishedWork.stateNode = flags;\n            } else\n              mountHoistable(\n                hoistableRoot,\n                finishedWork.type,\n                finishedWork.stateNode\n              );\n          else\n            finishedWork.stateNode = acquireResource(\n              hoistableRoot,\n              flags,\n              finishedWork.memoizedProps\n            );\n        else\n          currentResource !== flags\n            ? (null === currentResource\n                ? null !== current.stateNode &&\n                  ((current = current.stateNode),\n                  current.parentNode.removeChild(current))\n                : currentResource.count--,\n              null === flags\n                ? mountHoistable(\n                    hoistableRoot,\n                    finishedWork.type,\n                    finishedWork.stateNode\n                  )\n                : acquireResource(\n                    hoistableRoot,\n                    flags,\n                    finishedWork.memoizedProps\n                  ))\n            : null === flags &&\n              null !== finishedWork.stateNode &&\n              commitHostUpdate(\n                finishedWork,\n                finishedWork.memoizedProps,\n                current.memoizedProps\n              );\n      }\n      break;\n    case 27:\n      recursivelyTraverseMutationEffects(root, finishedWork);\n      commitReconciliationEffects(finishedWork);\n      flags & 512 &&\n        (offscreenSubtreeWasHidden ||\n          null === current ||\n          safelyDetachRef(current, current.return));\n      null !== current &&\n        flags & 4 &&\n        commitHostUpdate(\n          finishedWork,\n          finishedWork.memoizedProps,\n          current.memoizedProps\n        );\n      break;\n    case 5:\n      recursivelyTraverseMutationEffects(root, finishedWork);\n      commitReconciliationEffects(finishedWork);\n      flags & 512 &&\n        (offscreenSubtreeWasHidden ||\n          null === current ||\n          safelyDetachRef(current, current.return));\n      if (finishedWork.flags & 32) {\n        hoistableRoot = finishedWork.stateNode;\n        try {\n          setTextContent(hoistableRoot, \"\");\n        } catch (error) {\n          captureCommitPhaseError(finishedWork, finishedWork.return, error);\n        }\n      }\n      flags & 4 &&\n        null != finishedWork.stateNode &&\n        ((hoistableRoot = finishedWork.memoizedProps),\n        commitHostUpdate(\n          finishedWork,\n          hoistableRoot,\n          null !== current ? current.memoizedProps : hoistableRoot\n        ));\n      flags & 1024 && (needsFormReset = !0);\n      break;\n    case 6:\n      recursivelyTraverseMutationEffects(root, finishedWork);\n      commitReconciliationEffects(finishedWork);\n      if (flags & 4) {\n        if (null === finishedWork.stateNode)\n          throw Error(formatProdErrorMessage(162));\n        flags = finishedWork.memoizedProps;\n        current = finishedWork.stateNode;\n        try {\n          current.nodeValue = flags;\n        } catch (error) {\n          captureCommitPhaseError(finishedWork, finishedWork.return, error);\n        }\n      }\n      break;\n    case 3:\n      tagCaches = null;\n      hoistableRoot = currentHoistableRoot;\n      currentHoistableRoot = getHoistableRoot(root.containerInfo);\n      recursivelyTraverseMutationEffects(root, finishedWork);\n      currentHoistableRoot = hoistableRoot;\n      commitReconciliationEffects(finishedWork);\n      if (flags & 4 && null !== current && current.memoizedState.isDehydrated)\n        try {\n          retryIfBlockedOn(root.containerInfo);\n        } catch (error) {\n          captureCommitPhaseError(finishedWork, finishedWork.return, error);\n        }\n      needsFormReset &&\n        ((needsFormReset = !1), recursivelyResetForms(finishedWork));\n      break;\n    case 4:\n      flags = currentHoistableRoot;\n      currentHoistableRoot = getHoistableRoot(\n        finishedWork.stateNode.containerInfo\n      );\n      recursivelyTraverseMutationEffects(root, finishedWork);\n      commitReconciliationEffects(finishedWork);\n      currentHoistableRoot = flags;\n      break;\n    case 12:\n      recursivelyTraverseMutationEffects(root, finishedWork);\n      commitReconciliationEffects(finishedWork);\n      break;\n    case 13:\n      recursivelyTraverseMutationEffects(root, finishedWork);\n      commitReconciliationEffects(finishedWork);\n      finishedWork.child.flags & 8192 &&\n        (null !== finishedWork.memoizedState) !==\n          (null !== current && null !== current.memoizedState) &&\n        (globalMostRecentFallbackTime = now());\n      flags & 4 &&\n        ((flags = finishedWork.updateQueue),\n        null !== flags &&\n          ((finishedWork.updateQueue = null),\n          attachSuspenseRetryListeners(finishedWork, flags)));\n      break;\n    case 22:\n      hoistableRoot = null !== finishedWork.memoizedState;\n      var wasHidden = null !== current && null !== current.memoizedState,\n        prevOffscreenSubtreeIsHidden = offscreenSubtreeIsHidden,\n        prevOffscreenSubtreeWasHidden = offscreenSubtreeWasHidden;\n      offscreenSubtreeIsHidden = prevOffscreenSubtreeIsHidden || hoistableRoot;\n      offscreenSubtreeWasHidden = prevOffscreenSubtreeWasHidden || wasHidden;\n      recursivelyTraverseMutationEffects(root, finishedWork);\n      offscreenSubtreeWasHidden = prevOffscreenSubtreeWasHidden;\n      offscreenSubtreeIsHidden = prevOffscreenSubtreeIsHidden;\n      commitReconciliationEffects(finishedWork);\n      if (flags & 8192)\n        a: for (\n          root = finishedWork.stateNode,\n            root._visibility = hoistableRoot\n              ? root._visibility & -2\n              : root._visibility | 1,\n            hoistableRoot &&\n              (null === current ||\n                wasHidden ||\n                offscreenSubtreeIsHidden ||\n                offscreenSubtreeWasHidden ||\n                recursivelyTraverseDisappearLayoutEffects(finishedWork)),\n            current = null,\n            root = finishedWork;\n          ;\n\n        ) {\n          if (5 === root.tag || 26 === root.tag) {\n            if (null === current) {\n              wasHidden = current = root;\n              try {\n                if (((currentResource = wasHidden.stateNode), hoistableRoot))\n                  (maybeNodes = currentResource.style),\n                    \"function\" === typeof maybeNodes.setProperty\n                      ? maybeNodes.setProperty(\"display\", \"none\", \"important\")\n                      : (maybeNodes.display = \"none\");\n                else {\n                  i = wasHidden.stateNode;\n                  var styleProp = wasHidden.memoizedProps.style,\n                    display =\n                      void 0 !== styleProp &&\n                      null !== styleProp &&\n                      styleProp.hasOwnProperty(\"display\")\n                        ? styleProp.display\n                        : null;\n                  i.style.display =\n                    null == display || \"boolean\" === typeof display\n                      ? \"\"\n                      : (\"\" + display).trim();\n                }\n              } catch (error) {\n                captureCommitPhaseError(wasHidden, wasHidden.return, error);\n              }\n            }\n          } else if (6 === root.tag) {\n            if (null === current) {\n              wasHidden = root;\n              try {\n                wasHidden.stateNode.nodeValue = hoistableRoot\n                  ? \"\"\n                  : wasHidden.memoizedProps;\n              } catch (error) {\n                captureCommitPhaseError(wasHidden, wasHidden.return, error);\n              }\n            }\n          } else if (\n            ((22 !== root.tag && 23 !== root.tag) ||\n              null === root.memoizedState ||\n              root === finishedWork) &&\n            null !== root.child\n          ) {\n            root.child.return = root;\n            root = root.child;\n            continue;\n          }\n          if (root === finishedWork) break a;\n          for (; null === root.sibling; ) {\n            if (null === root.return || root.return === finishedWork) break a;\n            current === root && (current = null);\n            root = root.return;\n          }\n          current === root && (current = null);\n          root.sibling.return = root.return;\n          root = root.sibling;\n        }\n      flags & 4 &&\n        ((flags = finishedWork.updateQueue),\n        null !== flags &&\n          ((current = flags.retryQueue),\n          null !== current &&\n            ((flags.retryQueue = null),\n            attachSuspenseRetryListeners(finishedWork, current))));\n      break;\n    case 19:\n      recursivelyTraverseMutationEffects(root, finishedWork);\n      commitReconciliationEffects(finishedWork);\n      flags & 4 &&\n        ((flags = finishedWork.updateQueue),\n        null !== flags &&\n          ((finishedWork.updateQueue = null),\n          attachSuspenseRetryListeners(finishedWork, flags)));\n      break;\n    case 30:\n      break;\n    case 21:\n      break;\n    default:\n      recursivelyTraverseMutationEffects(root, finishedWork),\n        commitReconciliationEffects(finishedWork);\n  }\n}\nfunction commitReconciliationEffects(finishedWork) {\n  var flags = finishedWork.flags;\n  if (flags & 2) {\n    try {\n      for (\n        var hostParentFiber, parentFiber = finishedWork.return;\n        null !== parentFiber;\n\n      ) {\n        if (isHostParent(parentFiber)) {\n          hostParentFiber = parentFiber;\n          break;\n        }\n        parentFiber = parentFiber.return;\n      }\n      if (null == hostParentFiber) throw Error(formatProdErrorMessage(160));\n      switch (hostParentFiber.tag) {\n        case 27:\n          var parent = hostParentFiber.stateNode,\n            before = getHostSibling(finishedWork);\n          insertOrAppendPlacementNode(finishedWork, before, parent);\n          break;\n        case 5:\n          var parent$144 = hostParentFiber.stateNode;\n          hostParentFiber.flags & 32 &&\n            (setTextContent(parent$144, \"\"), (hostParentFiber.flags &= -33));\n          var before$145 = getHostSibling(finishedWork);\n          insertOrAppendPlacementNode(finishedWork, before$145, parent$144);\n          break;\n        case 3:\n        case 4:\n          var parent$146 = hostParentFiber.stateNode.containerInfo,\n            before$147 = getHostSibling(finishedWork);\n          insertOrAppendPlacementNodeIntoContainer(\n            finishedWork,\n            before$147,\n            parent$146\n          );\n          break;\n        default:\n          throw Error(formatProdErrorMessage(161));\n      }\n    } catch (error) {\n      captureCommitPhaseError(finishedWork, finishedWork.return, error);\n    }\n    finishedWork.flags &= -3;\n  }\n  flags & 4096 && (finishedWork.flags &= -4097);\n}\nfunction recursivelyResetForms(parentFiber) {\n  if (parentFiber.subtreeFlags & 1024)\n    for (parentFiber = parentFiber.child; null !== parentFiber; ) {\n      var fiber = parentFiber;\n      recursivelyResetForms(fiber);\n      5 === fiber.tag && fiber.flags & 1024 && fiber.stateNode.reset();\n      parentFiber = parentFiber.sibling;\n    }\n}\nfunction recursivelyTraverseLayoutEffects(root, parentFiber) {\n  if (parentFiber.subtreeFlags & 8772)\n    for (parentFiber = parentFiber.child; null !== parentFiber; )\n      commitLayoutEffectOnFiber(root, parentFiber.alternate, parentFiber),\n        (parentFiber = parentFiber.sibling);\n}\nfunction recursivelyTraverseDisappearLayoutEffects(parentFiber) {\n  for (parentFiber = parentFiber.child; null !== parentFiber; ) {\n    var finishedWork = parentFiber;\n    switch (finishedWork.tag) {\n      case 0:\n      case 11:\n      case 14:\n      case 15:\n        commitHookEffectListUnmount(4, finishedWork, finishedWork.return);\n        recursivelyTraverseDisappearLayoutEffects(finishedWork);\n        break;\n      case 1:\n        safelyDetachRef(finishedWork, finishedWork.return);\n        var instance = finishedWork.stateNode;\n        \"function\" === typeof instance.componentWillUnmount &&\n          safelyCallComponentWillUnmount(\n            finishedWork,\n            finishedWork.return,\n            instance\n          );\n        recursivelyTraverseDisappearLayoutEffects(finishedWork);\n        break;\n      case 27:\n        releaseSingletonInstance(finishedWork.stateNode);\n      case 26:\n      case 5:\n        safelyDetachRef(finishedWork, finishedWork.return);\n        recursivelyTraverseDisappearLayoutEffects(finishedWork);\n        break;\n      case 22:\n        null === finishedWork.memoizedState &&\n          recursivelyTraverseDisappearLayoutEffects(finishedWork);\n        break;\n      case 30:\n        recursivelyTraverseDisappearLayoutEffects(finishedWork);\n        break;\n      default:\n        recursivelyTraverseDisappearLayoutEffects(finishedWork);\n    }\n    parentFiber = parentFiber.sibling;\n  }\n}\nfunction recursivelyTraverseReappearLayoutEffects(\n  finishedRoot$jscomp$0,\n  parentFiber,\n  includeWorkInProgressEffects\n) {\n  includeWorkInProgressEffects =\n    includeWorkInProgressEffects && 0 !== (parentFiber.subtreeFlags & 8772);\n  for (parentFiber = parentFiber.child; null !== parentFiber; ) {\n    var current = parentFiber.alternate,\n      finishedRoot = finishedRoot$jscomp$0,\n      finishedWork = parentFiber,\n      flags = finishedWork.flags;\n    switch (finishedWork.tag) {\n      case 0:\n      case 11:\n      case 15:\n        recursivelyTraverseReappearLayoutEffects(\n          finishedRoot,\n          finishedWork,\n          includeWorkInProgressEffects\n        );\n        commitHookEffectListMount(4, finishedWork);\n        break;\n      case 1:\n        recursivelyTraverseReappearLayoutEffects(\n          finishedRoot,\n          finishedWork,\n          includeWorkInProgressEffects\n        );\n        current = finishedWork;\n        finishedRoot = current.stateNode;\n        if (\"function\" === typeof finishedRoot.componentDidMount)\n          try {\n            finishedRoot.componentDidMount();\n          } catch (error) {\n            captureCommitPhaseError(current, current.return, error);\n          }\n        current = finishedWork;\n        finishedRoot = current.updateQueue;\n        if (null !== finishedRoot) {\n          var instance = current.stateNode;\n          try {\n            var hiddenCallbacks = finishedRoot.shared.hiddenCallbacks;\n            if (null !== hiddenCallbacks)\n              for (\n                finishedRoot.shared.hiddenCallbacks = null, finishedRoot = 0;\n                finishedRoot < hiddenCallbacks.length;\n                finishedRoot++\n              )\n                callCallback(hiddenCallbacks[finishedRoot], instance);\n          } catch (error) {\n            captureCommitPhaseError(current, current.return, error);\n          }\n        }\n        includeWorkInProgressEffects &&\n          flags & 64 &&\n          commitClassCallbacks(finishedWork);\n        safelyAttachRef(finishedWork, finishedWork.return);\n        break;\n      case 27:\n        commitHostSingletonAcquisition(finishedWork);\n      case 26:\n      case 5:\n        recursivelyTraverseReappearLayoutEffects(\n          finishedRoot,\n          finishedWork,\n          includeWorkInProgressEffects\n        );\n        includeWorkInProgressEffects &&\n          null === current &&\n          flags & 4 &&\n          commitHostMount(finishedWork);\n        safelyAttachRef(finishedWork, finishedWork.return);\n        break;\n      case 12:\n        recursivelyTraverseReappearLayoutEffects(\n          finishedRoot,\n          finishedWork,\n          includeWorkInProgressEffects\n        );\n        break;\n      case 13:\n        recursivelyTraverseReappearLayoutEffects(\n          finishedRoot,\n          finishedWork,\n          includeWorkInProgressEffects\n        );\n        includeWorkInProgressEffects &&\n          flags & 4 &&\n          commitSuspenseHydrationCallbacks(finishedRoot, finishedWork);\n        break;\n      case 22:\n        null === finishedWork.memoizedState &&\n          recursivelyTraverseReappearLayoutEffects(\n            finishedRoot,\n            finishedWork,\n            includeWorkInProgressEffects\n          );\n        safelyAttachRef(finishedWork, finishedWork.return);\n        break;\n      case 30:\n        break;\n      default:\n        recursivelyTraverseReappearLayoutEffects(\n          finishedRoot,\n          finishedWork,\n          includeWorkInProgressEffects\n        );\n    }\n    parentFiber = parentFiber.sibling;\n  }\n}\nfunction commitOffscreenPassiveMountEffects(current, finishedWork) {\n  var previousCache = null;\n  null !== current &&\n    null !== current.memoizedState &&\n    null !== current.memoizedState.cachePool &&\n    (previousCache = current.memoizedState.cachePool.pool);\n  current = null;\n  null !== finishedWork.memoizedState &&\n    null !== finishedWork.memoizedState.cachePool &&\n    (current = finishedWork.memoizedState.cachePool.pool);\n  current !== previousCache &&\n    (null != current && current.refCount++,\n    null != previousCache && releaseCache(previousCache));\n}\nfunction commitCachePassiveMountEffect(current, finishedWork) {\n  current = null;\n  null !== finishedWork.alternate &&\n    (current = finishedWork.alternate.memoizedState.cache);\n  finishedWork = finishedWork.memoizedState.cache;\n  finishedWork !== current &&\n    (finishedWork.refCount++, null != current && releaseCache(current));\n}\nfunction recursivelyTraversePassiveMountEffects(\n  root,\n  parentFiber,\n  committedLanes,\n  committedTransitions\n) {\n  if (parentFiber.subtreeFlags & 10256)\n    for (parentFiber = parentFiber.child; null !== parentFiber; )\n      commitPassiveMountOnFiber(\n        root,\n        parentFiber,\n        committedLanes,\n        committedTransitions\n      ),\n        (parentFiber = parentFiber.sibling);\n}\nfunction commitPassiveMountOnFiber(\n  finishedRoot,\n  finishedWork,\n  committedLanes,\n  committedTransitions\n) {\n  var flags = finishedWork.flags;\n  switch (finishedWork.tag) {\n    case 0:\n    case 11:\n    case 15:\n      recursivelyTraversePassiveMountEffects(\n        finishedRoot,\n        finishedWork,\n        committedLanes,\n        committedTransitions\n      );\n      flags & 2048 && commitHookEffectListMount(9, finishedWork);\n      break;\n    case 1:\n      recursivelyTraversePassiveMountEffects(\n        finishedRoot,\n        finishedWork,\n        committedLanes,\n        committedTransitions\n      );\n      break;\n    case 3:\n      recursivelyTraversePassiveMountEffects(\n        finishedRoot,\n        finishedWork,\n        committedLanes,\n        committedTransitions\n      );\n      flags & 2048 &&\n        ((finishedRoot = null),\n        null !== finishedWork.alternate &&\n          (finishedRoot = finishedWork.alternate.memoizedState.cache),\n        (finishedWork = finishedWork.memoizedState.cache),\n        finishedWork !== finishedRoot &&\n          (finishedWork.refCount++,\n          null != finishedRoot && releaseCache(finishedRoot)));\n      break;\n    case 12:\n      if (flags & 2048) {\n        recursivelyTraversePassiveMountEffects(\n          finishedRoot,\n          finishedWork,\n          committedLanes,\n          committedTransitions\n        );\n        finishedRoot = finishedWork.stateNode;\n        try {\n          var _finishedWork$memoize2 = finishedWork.memoizedProps,\n            id = _finishedWork$memoize2.id,\n            onPostCommit = _finishedWork$memoize2.onPostCommit;\n          \"function\" === typeof onPostCommit &&\n            onPostCommit(\n              id,\n              null === finishedWork.alternate ? \"mount\" : \"update\",\n              finishedRoot.passiveEffectDuration,\n              -0\n            );\n        } catch (error) {\n          captureCommitPhaseError(finishedWork, finishedWork.return, error);\n        }\n      } else\n        recursivelyTraversePassiveMountEffects(\n          finishedRoot,\n          finishedWork,\n          committedLanes,\n          committedTransitions\n        );\n      break;\n    case 13:\n      recursivelyTraversePassiveMountEffects(\n        finishedRoot,\n        finishedWork,\n        committedLanes,\n        committedTransitions\n      );\n      break;\n    case 23:\n      break;\n    case 22:\n      _finishedWork$memoize2 = finishedWork.stateNode;\n      id = finishedWork.alternate;\n      null !== finishedWork.memoizedState\n        ? _finishedWork$memoize2._visibility & 2\n          ? recursivelyTraversePassiveMountEffects(\n              finishedRoot,\n              finishedWork,\n              committedLanes,\n              committedTransitions\n            )\n          : recursivelyTraverseAtomicPassiveEffects(finishedRoot, finishedWork)\n        : _finishedWork$memoize2._visibility & 2\n          ? recursivelyTraversePassiveMountEffects(\n              finishedRoot,\n              finishedWork,\n              committedLanes,\n              committedTransitions\n            )\n          : ((_finishedWork$memoize2._visibility |= 2),\n            recursivelyTraverseReconnectPassiveEffects(\n              finishedRoot,\n              finishedWork,\n              committedLanes,\n              committedTransitions,\n              0 !== (finishedWork.subtreeFlags & 10256)\n            ));\n      flags & 2048 && commitOffscreenPassiveMountEffects(id, finishedWork);\n      break;\n    case 24:\n      recursivelyTraversePassiveMountEffects(\n        finishedRoot,\n        finishedWork,\n        committedLanes,\n        committedTransitions\n      );\n      flags & 2048 &&\n        commitCachePassiveMountEffect(finishedWork.alternate, finishedWork);\n      break;\n    default:\n      recursivelyTraversePassiveMountEffects(\n        finishedRoot,\n        finishedWork,\n        committedLanes,\n        committedTransitions\n      );\n  }\n}\nfunction recursivelyTraverseReconnectPassiveEffects(\n  finishedRoot$jscomp$0,\n  parentFiber,\n  committedLanes$jscomp$0,\n  committedTransitions$jscomp$0,\n  includeWorkInProgressEffects\n) {\n  includeWorkInProgressEffects =\n    includeWorkInProgressEffects && 0 !== (parentFiber.subtreeFlags & 10256);\n  for (parentFiber = parentFiber.child; null !== parentFiber; ) {\n    var finishedRoot = finishedRoot$jscomp$0,\n      finishedWork = parentFiber,\n      committedLanes = committedLanes$jscomp$0,\n      committedTransitions = committedTransitions$jscomp$0,\n      flags = finishedWork.flags;\n    switch (finishedWork.tag) {\n      case 0:\n      case 11:\n      case 15:\n        recursivelyTraverseReconnectPassiveEffects(\n          finishedRoot,\n          finishedWork,\n          committedLanes,\n          committedTransitions,\n          includeWorkInProgressEffects\n        );\n        commitHookEffectListMount(8, finishedWork);\n        break;\n      case 23:\n        break;\n      case 22:\n        var instance = finishedWork.stateNode;\n        null !== finishedWork.memoizedState\n          ? instance._visibility & 2\n            ? recursivelyTraverseReconnectPassiveEffects(\n                finishedRoot,\n                finishedWork,\n                committedLanes,\n                committedTransitions,\n                includeWorkInProgressEffects\n              )\n            : recursivelyTraverseAtomicPassiveEffects(\n                finishedRoot,\n                finishedWork\n              )\n          : ((instance._visibility |= 2),\n            recursivelyTraverseReconnectPassiveEffects(\n              finishedRoot,\n              finishedWork,\n              committedLanes,\n              committedTransitions,\n              includeWorkInProgressEffects\n            ));\n        includeWorkInProgressEffects &&\n          flags & 2048 &&\n          commitOffscreenPassiveMountEffects(\n            finishedWork.alternate,\n            finishedWork\n          );\n        break;\n      case 24:\n        recursivelyTraverseReconnectPassiveEffects(\n          finishedRoot,\n          finishedWork,\n          committedLanes,\n          committedTransitions,\n          includeWorkInProgressEffects\n        );\n        includeWorkInProgressEffects &&\n          flags & 2048 &&\n          commitCachePassiveMountEffect(finishedWork.alternate, finishedWork);\n        break;\n      default:\n        recursivelyTraverseReconnectPassiveEffects(\n          finishedRoot,\n          finishedWork,\n          committedLanes,\n          committedTransitions,\n          includeWorkInProgressEffects\n        );\n    }\n    parentFiber = parentFiber.sibling;\n  }\n}\nfunction recursivelyTraverseAtomicPassiveEffects(\n  finishedRoot$jscomp$0,\n  parentFiber\n) {\n  if (parentFiber.subtreeFlags & 10256)\n    for (parentFiber = parentFiber.child; null !== parentFiber; ) {\n      var finishedRoot = finishedRoot$jscomp$0,\n        finishedWork = parentFiber,\n        flags = finishedWork.flags;\n      switch (finishedWork.tag) {\n        case 22:\n          recursivelyTraverseAtomicPassiveEffects(finishedRoot, finishedWork);\n          flags & 2048 &&\n            commitOffscreenPassiveMountEffects(\n              finishedWork.alternate,\n              finishedWork\n            );\n          break;\n        case 24:\n          recursivelyTraverseAtomicPassiveEffects(finishedRoot, finishedWork);\n          flags & 2048 &&\n            commitCachePassiveMountEffect(finishedWork.alternate, finishedWork);\n          break;\n        default:\n          recursivelyTraverseAtomicPassiveEffects(finishedRoot, finishedWork);\n      }\n      parentFiber = parentFiber.sibling;\n    }\n}\nvar suspenseyCommitFlag = 8192;\nfunction recursivelyAccumulateSuspenseyCommit(parentFiber) {\n  if (parentFiber.subtreeFlags & suspenseyCommitFlag)\n    for (parentFiber = parentFiber.child; null !== parentFiber; )\n      accumulateSuspenseyCommitOnFiber(parentFiber),\n        (parentFiber = parentFiber.sibling);\n}\nfunction accumulateSuspenseyCommitOnFiber(fiber) {\n  switch (fiber.tag) {\n    case 26:\n      recursivelyAccumulateSuspenseyCommit(fiber);\n      fiber.flags & suspenseyCommitFlag &&\n        null !== fiber.memoizedState &&\n        suspendResource(\n          currentHoistableRoot,\n          fiber.memoizedState,\n          fiber.memoizedProps\n        );\n      break;\n    case 5:\n      recursivelyAccumulateSuspenseyCommit(fiber);\n      break;\n    case 3:\n    case 4:\n      var previousHoistableRoot = currentHoistableRoot;\n      currentHoistableRoot = getHoistableRoot(fiber.stateNode.containerInfo);\n      recursivelyAccumulateSuspenseyCommit(fiber);\n      currentHoistableRoot = previousHoistableRoot;\n      break;\n    case 22:\n      null === fiber.memoizedState &&\n        ((previousHoistableRoot = fiber.alternate),\n        null !== previousHoistableRoot &&\n        null !== previousHoistableRoot.memoizedState\n          ? ((previousHoistableRoot = suspenseyCommitFlag),\n            (suspenseyCommitFlag = 16777216),\n            recursivelyAccumulateSuspenseyCommit(fiber),\n            (suspenseyCommitFlag = previousHoistableRoot))\n          : recursivelyAccumulateSuspenseyCommit(fiber));\n      break;\n    default:\n      recursivelyAccumulateSuspenseyCommit(fiber);\n  }\n}\nfunction detachAlternateSiblings(parentFiber) {\n  var previousFiber = parentFiber.alternate;\n  if (\n    null !== previousFiber &&\n    ((parentFiber = previousFiber.child), null !== parentFiber)\n  ) {\n    previousFiber.child = null;\n    do\n      (previousFiber = parentFiber.sibling),\n        (parentFiber.sibling = null),\n        (parentFiber = previousFiber);\n    while (null !== parentFiber);\n  }\n}\nfunction recursivelyTraversePassiveUnmountEffects(parentFiber) {\n  var deletions = parentFiber.deletions;\n  if (0 !== (parentFiber.flags & 16)) {\n    if (null !== deletions)\n      for (var i = 0; i < deletions.length; i++) {\n        var childToDelete = deletions[i];\n        nextEffect = childToDelete;\n        commitPassiveUnmountEffectsInsideOfDeletedTree_begin(\n          childToDelete,\n          parentFiber\n        );\n      }\n    detachAlternateSiblings(parentFiber);\n  }\n  if (parentFiber.subtreeFlags & 10256)\n    for (parentFiber = parentFiber.child; null !== parentFiber; )\n      commitPassiveUnmountOnFiber(parentFiber),\n        (parentFiber = parentFiber.sibling);\n}\nfunction commitPassiveUnmountOnFiber(finishedWork) {\n  switch (finishedWork.tag) {\n    case 0:\n    case 11:\n    case 15:\n      recursivelyTraversePassiveUnmountEffects(finishedWork);\n      finishedWork.flags & 2048 &&\n        commitHookEffectListUnmount(9, finishedWork, finishedWork.return);\n      break;\n    case 3:\n      recursivelyTraversePassiveUnmountEffects(finishedWork);\n      break;\n    case 12:\n      recursivelyTraversePassiveUnmountEffects(finishedWork);\n      break;\n    case 22:\n      var instance = finishedWork.stateNode;\n      null !== finishedWork.memoizedState &&\n      instance._visibility & 2 &&\n      (null === finishedWork.return || 13 !== finishedWork.return.tag)\n        ? ((instance._visibility &= -3),\n          recursivelyTraverseDisconnectPassiveEffects(finishedWork))\n        : recursivelyTraversePassiveUnmountEffects(finishedWork);\n      break;\n    default:\n      recursivelyTraversePassiveUnmountEffects(finishedWork);\n  }\n}\nfunction recursivelyTraverseDisconnectPassiveEffects(parentFiber) {\n  var deletions = parentFiber.deletions;\n  if (0 !== (parentFiber.flags & 16)) {\n    if (null !== deletions)\n      for (var i = 0; i < deletions.length; i++) {\n        var childToDelete = deletions[i];\n        nextEffect = childToDelete;\n        commitPassiveUnmountEffectsInsideOfDeletedTree_begin(\n          childToDelete,\n          parentFiber\n        );\n      }\n    detachAlternateSiblings(parentFiber);\n  }\n  for (parentFiber = parentFiber.child; null !== parentFiber; ) {\n    deletions = parentFiber;\n    switch (deletions.tag) {\n      case 0:\n      case 11:\n      case 15:\n        commitHookEffectListUnmount(8, deletions, deletions.return);\n        recursivelyTraverseDisconnectPassiveEffects(deletions);\n        break;\n      case 22:\n        i = deletions.stateNode;\n        i._visibility & 2 &&\n          ((i._visibility &= -3),\n          recursivelyTraverseDisconnectPassiveEffects(deletions));\n        break;\n      default:\n        recursivelyTraverseDisconnectPassiveEffects(deletions);\n    }\n    parentFiber = parentFiber.sibling;\n  }\n}\nfunction commitPassiveUnmountEffectsInsideOfDeletedTree_begin(\n  deletedSubtreeRoot,\n  nearestMountedAncestor\n) {\n  for (; null !== nextEffect; ) {\n    var fiber = nextEffect;\n    switch (fiber.tag) {\n      case 0:\n      case 11:\n      case 15:\n        commitHookEffectListUnmount(8, fiber, nearestMountedAncestor);\n        break;\n      case 23:\n      case 22:\n        if (\n          null !== fiber.memoizedState &&\n          null !== fiber.memoizedState.cachePool\n        ) {\n          var cache = fiber.memoizedState.cachePool.pool;\n          null != cache && cache.refCount++;\n        }\n        break;\n      case 24:\n        releaseCache(fiber.memoizedState.cache);\n    }\n    cache = fiber.child;\n    if (null !== cache) (cache.return = fiber), (nextEffect = cache);\n    else\n      a: for (fiber = deletedSubtreeRoot; null !== nextEffect; ) {\n        cache = nextEffect;\n        var sibling = cache.sibling,\n          returnFiber = cache.return;\n        detachFiberAfterEffects(cache);\n        if (cache === fiber) {\n          nextEffect = null;\n          break a;\n        }\n        if (null !== sibling) {\n          sibling.return = returnFiber;\n          nextEffect = sibling;\n          break a;\n        }\n        nextEffect = returnFiber;\n      }\n  }\n}\nvar DefaultAsyncDispatcher = {\n    getCacheForType: function (resourceType) {\n      var cache = readContext(CacheContext),\n        cacheForType = cache.data.get(resourceType);\n      void 0 === cacheForType &&\n        ((cacheForType = resourceType()),\n        cache.data.set(resourceType, cacheForType));\n      return cacheForType;\n    }\n  },\n  PossiblyWeakMap = \"function\" === typeof WeakMap ? WeakMap : Map,\n  executionContext = 0,\n  workInProgressRoot = null,\n  workInProgress = null,\n  workInProgressRootRenderLanes = 0,\n  workInProgressSuspendedReason = 0,\n  workInProgressThrownValue = null,\n  workInProgressRootDidSkipSuspendedSiblings = !1,\n  workInProgressRootIsPrerendering = !1,\n  workInProgressRootDidAttachPingListener = !1,\n  entangledRenderLanes = 0,\n  workInProgressRootExitStatus = 0,\n  workInProgressRootSkippedLanes = 0,\n  workInProgressRootInterleavedUpdatedLanes = 0,\n  workInProgressRootPingedLanes = 0,\n  workInProgressDeferredLane = 0,\n  workInProgressSuspendedRetryLanes = 0,\n  workInProgressRootConcurrentErrors = null,\n  workInProgressRootRecoverableErrors = null,\n  workInProgressRootDidIncludeRecursiveRenderUpdate = !1,\n  globalMostRecentFallbackTime = 0,\n  workInProgressRootRenderTargetTime = Infinity,\n  workInProgressTransitions = null,\n  legacyErrorBoundariesThatAlreadyFailed = null,\n  pendingEffectsStatus = 0,\n  pendingEffectsRoot = null,\n  pendingFinishedWork = null,\n  pendingEffectsLanes = 0,\n  pendingEffectsRemainingLanes = 0,\n  pendingPassiveTransitions = null,\n  pendingRecoverableErrors = null,\n  nestedUpdateCount = 0,\n  rootWithNestedUpdates = null;\nfunction requestUpdateLane() {\n  if (0 !== (executionContext & 2) && 0 !== workInProgressRootRenderLanes)\n    return workInProgressRootRenderLanes & -workInProgressRootRenderLanes;\n  if (null !== ReactSharedInternals.T) {\n    var actionScopeLane = currentEntangledLane;\n    return 0 !== actionScopeLane ? actionScopeLane : requestTransitionLane();\n  }\n  return resolveUpdatePriority();\n}\nfunction requestDeferredLane() {\n  0 === workInProgressDeferredLane &&\n    (workInProgressDeferredLane =\n      0 === (workInProgressRootRenderLanes & 536870912) || isHydrating\n        ? claimNextTransitionLane()\n        : 536870912);\n  var suspenseHandler = suspenseHandlerStackCursor.current;\n  null !== suspenseHandler && (suspenseHandler.flags |= 32);\n  return workInProgressDeferredLane;\n}\nfunction scheduleUpdateOnFiber(root, fiber, lane) {\n  if (\n    (root === workInProgressRoot &&\n      (2 === workInProgressSuspendedReason ||\n        9 === workInProgressSuspendedReason)) ||\n    null !== root.cancelPendingCommit\n  )\n    prepareFreshStack(root, 0),\n      markRootSuspended(\n        root,\n        workInProgressRootRenderLanes,\n        workInProgressDeferredLane,\n        !1\n      );\n  markRootUpdated$1(root, lane);\n  if (0 === (executionContext & 2) || root !== workInProgressRoot)\n    root === workInProgressRoot &&\n      (0 === (executionContext & 2) &&\n        (workInProgressRootInterleavedUpdatedLanes |= lane),\n      4 === workInProgressRootExitStatus &&\n        markRootSuspended(\n          root,\n          workInProgressRootRenderLanes,\n          workInProgressDeferredLane,\n          !1\n        )),\n      ensureRootIsScheduled(root);\n}\nfunction performWorkOnRoot(root$jscomp$0, lanes, forceSync) {\n  if (0 !== (executionContext & 6)) throw Error(formatProdErrorMessage(327));\n  var shouldTimeSlice =\n      (!forceSync &&\n        0 === (lanes & 124) &&\n        0 === (lanes & root$jscomp$0.expiredLanes)) ||\n      checkIfRootIsPrerendering(root$jscomp$0, lanes),\n    exitStatus = shouldTimeSlice\n      ? renderRootConcurrent(root$jscomp$0, lanes)\n      : renderRootSync(root$jscomp$0, lanes, !0),\n    renderWasConcurrent = shouldTimeSlice;\n  do {\n    if (0 === exitStatus) {\n      workInProgressRootIsPrerendering &&\n        !shouldTimeSlice &&\n        markRootSuspended(root$jscomp$0, lanes, 0, !1);\n      break;\n    } else {\n      forceSync = root$jscomp$0.current.alternate;\n      if (\n        renderWasConcurrent &&\n        !isRenderConsistentWithExternalStores(forceSync)\n      ) {\n        exitStatus = renderRootSync(root$jscomp$0, lanes, !1);\n        renderWasConcurrent = !1;\n        continue;\n      }\n      if (2 === exitStatus) {\n        renderWasConcurrent = lanes;\n        if (root$jscomp$0.errorRecoveryDisabledLanes & renderWasConcurrent)\n          var JSCompiler_inline_result = 0;\n        else\n          (JSCompiler_inline_result = root$jscomp$0.pendingLanes & -536870913),\n            (JSCompiler_inline_result =\n              0 !== JSCompiler_inline_result\n                ? JSCompiler_inline_result\n                : JSCompiler_inline_result & 536870912\n                  ? 536870912\n                  : 0);\n        if (0 !== JSCompiler_inline_result) {\n          lanes = JSCompiler_inline_result;\n          a: {\n            var root = root$jscomp$0;\n            exitStatus = workInProgressRootConcurrentErrors;\n            var wasRootDehydrated = root.current.memoizedState.isDehydrated;\n            wasRootDehydrated &&\n              (prepareFreshStack(root, JSCompiler_inline_result).flags |= 256);\n            JSCompiler_inline_result = renderRootSync(\n              root,\n              JSCompiler_inline_result,\n              !1\n            );\n            if (2 !== JSCompiler_inline_result) {\n              if (\n                workInProgressRootDidAttachPingListener &&\n                !wasRootDehydrated\n              ) {\n                root.errorRecoveryDisabledLanes |= renderWasConcurrent;\n                workInProgressRootInterleavedUpdatedLanes |=\n                  renderWasConcurrent;\n                exitStatus = 4;\n                break a;\n              }\n              renderWasConcurrent = workInProgressRootRecoverableErrors;\n              workInProgressRootRecoverableErrors = exitStatus;\n              null !== renderWasConcurrent &&\n                (null === workInProgressRootRecoverableErrors\n                  ? (workInProgressRootRecoverableErrors = renderWasConcurrent)\n                  : workInProgressRootRecoverableErrors.push.apply(\n                      workInProgressRootRecoverableErrors,\n                      renderWasConcurrent\n                    ));\n            }\n            exitStatus = JSCompiler_inline_result;\n          }\n          renderWasConcurrent = !1;\n          if (2 !== exitStatus) continue;\n        }\n      }\n      if (1 === exitStatus) {\n        prepareFreshStack(root$jscomp$0, 0);\n        markRootSuspended(root$jscomp$0, lanes, 0, !0);\n        break;\n      }\n      a: {\n        shouldTimeSlice = root$jscomp$0;\n        renderWasConcurrent = exitStatus;\n        switch (renderWasConcurrent) {\n          case 0:\n          case 1:\n            throw Error(formatProdErrorMessage(345));\n          case 4:\n            if ((lanes & 4194048) !== lanes) break;\n          case 6:\n            markRootSuspended(\n              shouldTimeSlice,\n              lanes,\n              workInProgressDeferredLane,\n              !workInProgressRootDidSkipSuspendedSiblings\n            );\n            break a;\n          case 2:\n            workInProgressRootRecoverableErrors = null;\n            break;\n          case 3:\n          case 5:\n            break;\n          default:\n            throw Error(formatProdErrorMessage(329));\n        }\n        if (\n          (lanes & 62914560) === lanes &&\n          ((exitStatus = globalMostRecentFallbackTime + 300 - now()),\n          10 < exitStatus)\n        ) {\n          markRootSuspended(\n            shouldTimeSlice,\n            lanes,\n            workInProgressDeferredLane,\n            !workInProgressRootDidSkipSuspendedSiblings\n          );\n          if (0 !== getNextLanes(shouldTimeSlice, 0, !0)) break a;\n          shouldTimeSlice.timeoutHandle = scheduleTimeout(\n            commitRootWhenReady.bind(\n              null,\n              shouldTimeSlice,\n              forceSync,\n              workInProgressRootRecoverableErrors,\n              workInProgressTransitions,\n              workInProgressRootDidIncludeRecursiveRenderUpdate,\n              lanes,\n              workInProgressDeferredLane,\n              workInProgressRootInterleavedUpdatedLanes,\n              workInProgressSuspendedRetryLanes,\n              workInProgressRootDidSkipSuspendedSiblings,\n              renderWasConcurrent,\n              2,\n              -0,\n              0\n            ),\n            exitStatus\n          );\n          break a;\n        }\n        commitRootWhenReady(\n          shouldTimeSlice,\n          forceSync,\n          workInProgressRootRecoverableErrors,\n          workInProgressTransitions,\n          workInProgressRootDidIncludeRecursiveRenderUpdate,\n          lanes,\n          workInProgressDeferredLane,\n          workInProgressRootInterleavedUpdatedLanes,\n          workInProgressSuspendedRetryLanes,\n          workInProgressRootDidSkipSuspendedSiblings,\n          renderWasConcurrent,\n          0,\n          -0,\n          0\n        );\n      }\n    }\n    break;\n  } while (1);\n  ensureRootIsScheduled(root$jscomp$0);\n}\nfunction commitRootWhenReady(\n  root,\n  finishedWork,\n  recoverableErrors,\n  transitions,\n  didIncludeRenderPhaseUpdate,\n  lanes,\n  spawnedLane,\n  updatedLanes,\n  suspendedRetryLanes,\n  didSkipSuspendedSiblings,\n  exitStatus,\n  suspendedCommitReason,\n  completedRenderStartTime,\n  completedRenderEndTime\n) {\n  root.timeoutHandle = -1;\n  suspendedCommitReason = finishedWork.subtreeFlags;\n  if (\n    suspendedCommitReason & 8192 ||\n    16785408 === (suspendedCommitReason & 16785408)\n  )\n    if (\n      ((suspendedState = { stylesheets: null, count: 0, unsuspend: noop }),\n      accumulateSuspenseyCommitOnFiber(finishedWork),\n      (suspendedCommitReason = waitForCommitToBeReady()),\n      null !== suspendedCommitReason)\n    ) {\n      root.cancelPendingCommit = suspendedCommitReason(\n        commitRoot.bind(\n          null,\n          root,\n          finishedWork,\n          lanes,\n          recoverableErrors,\n          transitions,\n          didIncludeRenderPhaseUpdate,\n          spawnedLane,\n          updatedLanes,\n          suspendedRetryLanes,\n          exitStatus,\n          1,\n          completedRenderStartTime,\n          completedRenderEndTime\n        )\n      );\n      markRootSuspended(root, lanes, spawnedLane, !didSkipSuspendedSiblings);\n      return;\n    }\n  commitRoot(\n    root,\n    finishedWork,\n    lanes,\n    recoverableErrors,\n    transitions,\n    didIncludeRenderPhaseUpdate,\n    spawnedLane,\n    updatedLanes,\n    suspendedRetryLanes\n  );\n}\nfunction isRenderConsistentWithExternalStores(finishedWork) {\n  for (var node = finishedWork; ; ) {\n    var tag = node.tag;\n    if (\n      (0 === tag || 11 === tag || 15 === tag) &&\n      node.flags & 16384 &&\n      ((tag = node.updateQueue),\n      null !== tag && ((tag = tag.stores), null !== tag))\n    )\n      for (var i = 0; i < tag.length; i++) {\n        var check = tag[i],\n          getSnapshot = check.getSnapshot;\n        check = check.value;\n        try {\n          if (!objectIs(getSnapshot(), check)) return !1;\n        } catch (error) {\n          return !1;\n        }\n      }\n    tag = node.child;\n    if (node.subtreeFlags & 16384 && null !== tag)\n      (tag.return = node), (node = tag);\n    else {\n      if (node === finishedWork) break;\n      for (; null === node.sibling; ) {\n        if (null === node.return || node.return === finishedWork) return !0;\n        node = node.return;\n      }\n      node.sibling.return = node.return;\n      node = node.sibling;\n    }\n  }\n  return !0;\n}\nfunction markRootSuspended(\n  root,\n  suspendedLanes,\n  spawnedLane,\n  didAttemptEntireTree\n) {\n  suspendedLanes &= ~workInProgressRootPingedLanes;\n  suspendedLanes &= ~workInProgressRootInterleavedUpdatedLanes;\n  root.suspendedLanes |= suspendedLanes;\n  root.pingedLanes &= ~suspendedLanes;\n  didAttemptEntireTree && (root.warmLanes |= suspendedLanes);\n  didAttemptEntireTree = root.expirationTimes;\n  for (var lanes = suspendedLanes; 0 < lanes; ) {\n    var index$4 = 31 - clz32(lanes),\n      lane = 1 << index$4;\n    didAttemptEntireTree[index$4] = -1;\n    lanes &= ~lane;\n  }\n  0 !== spawnedLane &&\n    markSpawnedDeferredLane(root, spawnedLane, suspendedLanes);\n}\nfunction flushSyncWork$1() {\n  return 0 === (executionContext & 6)\n    ? (flushSyncWorkAcrossRoots_impl(0, !1), !1)\n    : !0;\n}\nfunction resetWorkInProgressStack() {\n  if (null !== workInProgress) {\n    if (0 === workInProgressSuspendedReason)\n      var interruptedWork = workInProgress.return;\n    else\n      (interruptedWork = workInProgress),\n        (lastContextDependency = currentlyRenderingFiber$1 = null),\n        resetHooksOnUnwind(interruptedWork),\n        (thenableState = null),\n        (thenableIndexCounter = 0),\n        (interruptedWork = workInProgress);\n    for (; null !== interruptedWork; )\n      unwindInterruptedWork(interruptedWork.alternate, interruptedWork),\n        (interruptedWork = interruptedWork.return);\n    workInProgress = null;\n  }\n}\nfunction prepareFreshStack(root, lanes) {\n  var timeoutHandle = root.timeoutHandle;\n  -1 !== timeoutHandle &&\n    ((root.timeoutHandle = -1), cancelTimeout(timeoutHandle));\n  timeoutHandle = root.cancelPendingCommit;\n  null !== timeoutHandle &&\n    ((root.cancelPendingCommit = null), timeoutHandle());\n  resetWorkInProgressStack();\n  workInProgressRoot = root;\n  workInProgress = timeoutHandle = createWorkInProgress(root.current, null);\n  workInProgressRootRenderLanes = lanes;\n  workInProgressSuspendedReason = 0;\n  workInProgressThrownValue = null;\n  workInProgressRootDidSkipSuspendedSiblings = !1;\n  workInProgressRootIsPrerendering = checkIfRootIsPrerendering(root, lanes);\n  workInProgressRootDidAttachPingListener = !1;\n  workInProgressSuspendedRetryLanes =\n    workInProgressDeferredLane =\n    workInProgressRootPingedLanes =\n    workInProgressRootInterleavedUpdatedLanes =\n    workInProgressRootSkippedLanes =\n    workInProgressRootExitStatus =\n      0;\n  workInProgressRootRecoverableErrors = workInProgressRootConcurrentErrors =\n    null;\n  workInProgressRootDidIncludeRecursiveRenderUpdate = !1;\n  0 !== (lanes & 8) && (lanes |= lanes & 32);\n  var allEntangledLanes = root.entangledLanes;\n  if (0 !== allEntangledLanes)\n    for (\n      root = root.entanglements, allEntangledLanes &= lanes;\n      0 < allEntangledLanes;\n\n    ) {\n      var index$2 = 31 - clz32(allEntangledLanes),\n        lane = 1 << index$2;\n      lanes |= root[index$2];\n      allEntangledLanes &= ~lane;\n    }\n  entangledRenderLanes = lanes;\n  finishQueueingConcurrentUpdates();\n  return timeoutHandle;\n}\nfunction handleThrow(root, thrownValue) {\n  currentlyRenderingFiber = null;\n  ReactSharedInternals.H = ContextOnlyDispatcher;\n  thrownValue === SuspenseException || thrownValue === SuspenseActionException\n    ? ((thrownValue = getSuspendedThenable()),\n      (workInProgressSuspendedReason = 3))\n    : thrownValue === SuspenseyCommitException\n      ? ((thrownValue = getSuspendedThenable()),\n        (workInProgressSuspendedReason = 4))\n      : (workInProgressSuspendedReason =\n          thrownValue === SelectiveHydrationException\n            ? 8\n            : null !== thrownValue &&\n                \"object\" === typeof thrownValue &&\n                \"function\" === typeof thrownValue.then\n              ? 6\n              : 1);\n  workInProgressThrownValue = thrownValue;\n  null === workInProgress &&\n    ((workInProgressRootExitStatus = 1),\n    logUncaughtError(\n      root,\n      createCapturedValueAtFiber(thrownValue, root.current)\n    ));\n}\nfunction pushDispatcher() {\n  var prevDispatcher = ReactSharedInternals.H;\n  ReactSharedInternals.H = ContextOnlyDispatcher;\n  return null === prevDispatcher ? ContextOnlyDispatcher : prevDispatcher;\n}\nfunction pushAsyncDispatcher() {\n  var prevAsyncDispatcher = ReactSharedInternals.A;\n  ReactSharedInternals.A = DefaultAsyncDispatcher;\n  return prevAsyncDispatcher;\n}\nfunction renderDidSuspendDelayIfPossible() {\n  workInProgressRootExitStatus = 4;\n  workInProgressRootDidSkipSuspendedSiblings ||\n    ((workInProgressRootRenderLanes & 4194048) !==\n      workInProgressRootRenderLanes &&\n      null !== suspenseHandlerStackCursor.current) ||\n    (workInProgressRootIsPrerendering = !0);\n  (0 === (workInProgressRootSkippedLanes & 134217727) &&\n    0 === (workInProgressRootInterleavedUpdatedLanes & 134217727)) ||\n    null === workInProgressRoot ||\n    markRootSuspended(\n      workInProgressRoot,\n      workInProgressRootRenderLanes,\n      workInProgressDeferredLane,\n      !1\n    );\n}\nfunction renderRootSync(root, lanes, shouldYieldForPrerendering) {\n  var prevExecutionContext = executionContext;\n  executionContext |= 2;\n  var prevDispatcher = pushDispatcher(),\n    prevAsyncDispatcher = pushAsyncDispatcher();\n  if (workInProgressRoot !== root || workInProgressRootRenderLanes !== lanes)\n    (workInProgressTransitions = null), prepareFreshStack(root, lanes);\n  lanes = !1;\n  var exitStatus = workInProgressRootExitStatus;\n  a: do\n    try {\n      if (0 !== workInProgressSuspendedReason && null !== workInProgress) {\n        var unitOfWork = workInProgress,\n          thrownValue = workInProgressThrownValue;\n        switch (workInProgressSuspendedReason) {\n          case 8:\n            resetWorkInProgressStack();\n            exitStatus = 6;\n            break a;\n          case 3:\n          case 2:\n          case 9:\n          case 6:\n            null === suspenseHandlerStackCursor.current && (lanes = !0);\n            var reason = workInProgressSuspendedReason;\n            workInProgressSuspendedReason = 0;\n            workInProgressThrownValue = null;\n            throwAndUnwindWorkLoop(root, unitOfWork, thrownValue, reason);\n            if (\n              shouldYieldForPrerendering &&\n              workInProgressRootIsPrerendering\n            ) {\n              exitStatus = 0;\n              break a;\n            }\n            break;\n          default:\n            (reason = workInProgressSuspendedReason),\n              (workInProgressSuspendedReason = 0),\n              (workInProgressThrownValue = null),\n              throwAndUnwindWorkLoop(root, unitOfWork, thrownValue, reason);\n        }\n      }\n      workLoopSync();\n      exitStatus = workInProgressRootExitStatus;\n      break;\n    } catch (thrownValue$167) {\n      handleThrow(root, thrownValue$167);\n    }\n  while (1);\n  lanes && root.shellSuspendCounter++;\n  lastContextDependency = currentlyRenderingFiber$1 = null;\n  executionContext = prevExecutionContext;\n  ReactSharedInternals.H = prevDispatcher;\n  ReactSharedInternals.A = prevAsyncDispatcher;\n  null === workInProgress &&\n    ((workInProgressRoot = null),\n    (workInProgressRootRenderLanes = 0),\n    finishQueueingConcurrentUpdates());\n  return exitStatus;\n}\nfunction workLoopSync() {\n  for (; null !== workInProgress; ) performUnitOfWork(workInProgress);\n}\nfunction renderRootConcurrent(root, lanes) {\n  var prevExecutionContext = executionContext;\n  executionContext |= 2;\n  var prevDispatcher = pushDispatcher(),\n    prevAsyncDispatcher = pushAsyncDispatcher();\n  workInProgressRoot !== root || workInProgressRootRenderLanes !== lanes\n    ? ((workInProgressTransitions = null),\n      (workInProgressRootRenderTargetTime = now() + 500),\n      prepareFreshStack(root, lanes))\n    : (workInProgressRootIsPrerendering = checkIfRootIsPrerendering(\n        root,\n        lanes\n      ));\n  a: do\n    try {\n      if (0 !== workInProgressSuspendedReason && null !== workInProgress) {\n        lanes = workInProgress;\n        var thrownValue = workInProgressThrownValue;\n        b: switch (workInProgressSuspendedReason) {\n          case 1:\n            workInProgressSuspendedReason = 0;\n            workInProgressThrownValue = null;\n            throwAndUnwindWorkLoop(root, lanes, thrownValue, 1);\n            break;\n          case 2:\n          case 9:\n            if (isThenableResolved(thrownValue)) {\n              workInProgressSuspendedReason = 0;\n              workInProgressThrownValue = null;\n              replaySuspendedUnitOfWork(lanes);\n              break;\n            }\n            lanes = function () {\n              (2 !== workInProgressSuspendedReason &&\n                9 !== workInProgressSuspendedReason) ||\n                workInProgressRoot !== root ||\n                (workInProgressSuspendedReason = 7);\n              ensureRootIsScheduled(root);\n            };\n            thrownValue.then(lanes, lanes);\n            break a;\n          case 3:\n            workInProgressSuspendedReason = 7;\n            break a;\n          case 4:\n            workInProgressSuspendedReason = 5;\n            break a;\n          case 7:\n            isThenableResolved(thrownValue)\n              ? ((workInProgressSuspendedReason = 0),\n                (workInProgressThrownValue = null),\n                replaySuspendedUnitOfWork(lanes))\n              : ((workInProgressSuspendedReason = 0),\n                (workInProgressThrownValue = null),\n                throwAndUnwindWorkLoop(root, lanes, thrownValue, 7));\n            break;\n          case 5:\n            var resource = null;\n            switch (workInProgress.tag) {\n              case 26:\n                resource = workInProgress.memoizedState;\n              case 5:\n              case 27:\n                var hostFiber = workInProgress;\n                if (resource ? preloadResource(resource) : 1) {\n                  workInProgressSuspendedReason = 0;\n                  workInProgressThrownValue = null;\n                  var sibling = hostFiber.sibling;\n                  if (null !== sibling) workInProgress = sibling;\n                  else {\n                    var returnFiber = hostFiber.return;\n                    null !== returnFiber\n                      ? ((workInProgress = returnFiber),\n                        completeUnitOfWork(returnFiber))\n                      : (workInProgress = null);\n                  }\n                  break b;\n                }\n            }\n            workInProgressSuspendedReason = 0;\n            workInProgressThrownValue = null;\n            throwAndUnwindWorkLoop(root, lanes, thrownValue, 5);\n            break;\n          case 6:\n            workInProgressSuspendedReason = 0;\n            workInProgressThrownValue = null;\n            throwAndUnwindWorkLoop(root, lanes, thrownValue, 6);\n            break;\n          case 8:\n            resetWorkInProgressStack();\n            workInProgressRootExitStatus = 6;\n            break a;\n          default:\n            throw Error(formatProdErrorMessage(462));\n        }\n      }\n      workLoopConcurrentByScheduler();\n      break;\n    } catch (thrownValue$169) {\n      handleThrow(root, thrownValue$169);\n    }\n  while (1);\n  lastContextDependency = currentlyRenderingFiber$1 = null;\n  ReactSharedInternals.H = prevDispatcher;\n  ReactSharedInternals.A = prevAsyncDispatcher;\n  executionContext = prevExecutionContext;\n  if (null !== workInProgress) return 0;\n  workInProgressRoot = null;\n  workInProgressRootRenderLanes = 0;\n  finishQueueingConcurrentUpdates();\n  return workInProgressRootExitStatus;\n}\nfunction workLoopConcurrentByScheduler() {\n  for (; null !== workInProgress && !shouldYield(); )\n    performUnitOfWork(workInProgress);\n}\nfunction performUnitOfWork(unitOfWork) {\n  var next = beginWork(unitOfWork.alternate, unitOfWork, entangledRenderLanes);\n  unitOfWork.memoizedProps = unitOfWork.pendingProps;\n  null === next ? completeUnitOfWork(unitOfWork) : (workInProgress = next);\n}\nfunction replaySuspendedUnitOfWork(unitOfWork) {\n  var next = unitOfWork;\n  var current = next.alternate;\n  switch (next.tag) {\n    case 15:\n    case 0:\n      next = replayFunctionComponent(\n        current,\n        next,\n        next.pendingProps,\n        next.type,\n        void 0,\n        workInProgressRootRenderLanes\n      );\n      break;\n    case 11:\n      next = replayFunctionComponent(\n        current,\n        next,\n        next.pendingProps,\n        next.type.render,\n        next.ref,\n        workInProgressRootRenderLanes\n      );\n      break;\n    case 5:\n      resetHooksOnUnwind(next);\n    default:\n      unwindInterruptedWork(current, next),\n        (next = workInProgress =\n          resetWorkInProgress(next, entangledRenderLanes)),\n        (next = beginWork(current, next, entangledRenderLanes));\n  }\n  unitOfWork.memoizedProps = unitOfWork.pendingProps;\n  null === next ? completeUnitOfWork(unitOfWork) : (workInProgress = next);\n}\nfunction throwAndUnwindWorkLoop(\n  root,\n  unitOfWork,\n  thrownValue,\n  suspendedReason\n) {\n  lastContextDependency = currentlyRenderingFiber$1 = null;\n  resetHooksOnUnwind(unitOfWork);\n  thenableState = null;\n  thenableIndexCounter = 0;\n  var returnFiber = unitOfWork.return;\n  try {\n    if (\n      throwException(\n        root,\n        returnFiber,\n        unitOfWork,\n        thrownValue,\n        workInProgressRootRenderLanes\n      )\n    ) {\n      workInProgressRootExitStatus = 1;\n      logUncaughtError(\n        root,\n        createCapturedValueAtFiber(thrownValue, root.current)\n      );\n      workInProgress = null;\n      return;\n    }\n  } catch (error) {\n    if (null !== returnFiber) throw ((workInProgress = returnFiber), error);\n    workInProgressRootExitStatus = 1;\n    logUncaughtError(\n      root,\n      createCapturedValueAtFiber(thrownValue, root.current)\n    );\n    workInProgress = null;\n    return;\n  }\n  if (unitOfWork.flags & 32768) {\n    if (isHydrating || 1 === suspendedReason) root = !0;\n    else if (\n      workInProgressRootIsPrerendering ||\n      0 !== (workInProgressRootRenderLanes & 536870912)\n    )\n      root = !1;\n    else if (\n      ((workInProgressRootDidSkipSuspendedSiblings = root = !0),\n      2 === suspendedReason ||\n        9 === suspendedReason ||\n        3 === suspendedReason ||\n        6 === suspendedReason)\n    )\n      (suspendedReason = suspenseHandlerStackCursor.current),\n        null !== suspendedReason &&\n          13 === suspendedReason.tag &&\n          (suspendedReason.flags |= 16384);\n    unwindUnitOfWork(unitOfWork, root);\n  } else completeUnitOfWork(unitOfWork);\n}\nfunction completeUnitOfWork(unitOfWork) {\n  var completedWork = unitOfWork;\n  do {\n    if (0 !== (completedWork.flags & 32768)) {\n      unwindUnitOfWork(\n        completedWork,\n        workInProgressRootDidSkipSuspendedSiblings\n      );\n      return;\n    }\n    unitOfWork = completedWork.return;\n    var next = completeWork(\n      completedWork.alternate,\n      completedWork,\n      entangledRenderLanes\n    );\n    if (null !== next) {\n      workInProgress = next;\n      return;\n    }\n    completedWork = completedWork.sibling;\n    if (null !== completedWork) {\n      workInProgress = completedWork;\n      return;\n    }\n    workInProgress = completedWork = unitOfWork;\n  } while (null !== completedWork);\n  0 === workInProgressRootExitStatus && (workInProgressRootExitStatus = 5);\n}\nfunction unwindUnitOfWork(unitOfWork, skipSiblings) {\n  do {\n    var next = unwindWork(unitOfWork.alternate, unitOfWork);\n    if (null !== next) {\n      next.flags &= 32767;\n      workInProgress = next;\n      return;\n    }\n    next = unitOfWork.return;\n    null !== next &&\n      ((next.flags |= 32768), (next.subtreeFlags = 0), (next.deletions = null));\n    if (\n      !skipSiblings &&\n      ((unitOfWork = unitOfWork.sibling), null !== unitOfWork)\n    ) {\n      workInProgress = unitOfWork;\n      return;\n    }\n    workInProgress = unitOfWork = next;\n  } while (null !== unitOfWork);\n  workInProgressRootExitStatus = 6;\n  workInProgress = null;\n}\nfunction commitRoot(\n  root,\n  finishedWork,\n  lanes,\n  recoverableErrors,\n  transitions,\n  didIncludeRenderPhaseUpdate,\n  spawnedLane,\n  updatedLanes,\n  suspendedRetryLanes\n) {\n  root.cancelPendingCommit = null;\n  do flushPendingEffects();\n  while (0 !== pendingEffectsStatus);\n  if (0 !== (executionContext & 6)) throw Error(formatProdErrorMessage(327));\n  if (null !== finishedWork) {\n    if (finishedWork === root.current) throw Error(formatProdErrorMessage(177));\n    didIncludeRenderPhaseUpdate = finishedWork.lanes | finishedWork.childLanes;\n    didIncludeRenderPhaseUpdate |= concurrentlyUpdatedLanes;\n    markRootFinished(\n      root,\n      lanes,\n      didIncludeRenderPhaseUpdate,\n      spawnedLane,\n      updatedLanes,\n      suspendedRetryLanes\n    );\n    root === workInProgressRoot &&\n      ((workInProgress = workInProgressRoot = null),\n      (workInProgressRootRenderLanes = 0));\n    pendingFinishedWork = finishedWork;\n    pendingEffectsRoot = root;\n    pendingEffectsLanes = lanes;\n    pendingEffectsRemainingLanes = didIncludeRenderPhaseUpdate;\n    pendingPassiveTransitions = transitions;\n    pendingRecoverableErrors = recoverableErrors;\n    0 !== (finishedWork.subtreeFlags & 10256) ||\n    0 !== (finishedWork.flags & 10256)\n      ? ((root.callbackNode = null),\n        (root.callbackPriority = 0),\n        scheduleCallback$1(NormalPriority$1, function () {\n          flushPassiveEffects(!0);\n          return null;\n        }))\n      : ((root.callbackNode = null), (root.callbackPriority = 0));\n    recoverableErrors = 0 !== (finishedWork.flags & 13878);\n    if (0 !== (finishedWork.subtreeFlags & 13878) || recoverableErrors) {\n      recoverableErrors = ReactSharedInternals.T;\n      ReactSharedInternals.T = null;\n      transitions = ReactDOMSharedInternals.p;\n      ReactDOMSharedInternals.p = 2;\n      spawnedLane = executionContext;\n      executionContext |= 4;\n      try {\n        commitBeforeMutationEffects(root, finishedWork, lanes);\n      } finally {\n        (executionContext = spawnedLane),\n          (ReactDOMSharedInternals.p = transitions),\n          (ReactSharedInternals.T = recoverableErrors);\n      }\n    }\n    pendingEffectsStatus = 1;\n    flushMutationEffects();\n    flushLayoutEffects();\n    flushSpawnedWork();\n  }\n}\nfunction flushMutationEffects() {\n  if (1 === pendingEffectsStatus) {\n    pendingEffectsStatus = 0;\n    var root = pendingEffectsRoot,\n      finishedWork = pendingFinishedWork,\n      rootMutationHasEffect = 0 !== (finishedWork.flags & 13878);\n    if (0 !== (finishedWork.subtreeFlags & 13878) || rootMutationHasEffect) {\n      rootMutationHasEffect = ReactSharedInternals.T;\n      ReactSharedInternals.T = null;\n      var previousPriority = ReactDOMSharedInternals.p;\n      ReactDOMSharedInternals.p = 2;\n      var prevExecutionContext = executionContext;\n      executionContext |= 4;\n      try {\n        commitMutationEffectsOnFiber(finishedWork, root);\n        var priorSelectionInformation = selectionInformation,\n          curFocusedElem = getActiveElementDeep(root.containerInfo),\n          priorFocusedElem = priorSelectionInformation.focusedElem,\n          priorSelectionRange = priorSelectionInformation.selectionRange;\n        if (\n          curFocusedElem !== priorFocusedElem &&\n          priorFocusedElem &&\n          priorFocusedElem.ownerDocument &&\n          containsNode(\n            priorFocusedElem.ownerDocument.documentElement,\n            priorFocusedElem\n          )\n        ) {\n          if (\n            null !== priorSelectionRange &&\n            hasSelectionCapabilities(priorFocusedElem)\n          ) {\n            var start = priorSelectionRange.start,\n              end = priorSelectionRange.end;\n            void 0 === end && (end = start);\n            if (\"selectionStart\" in priorFocusedElem)\n              (priorFocusedElem.selectionStart = start),\n                (priorFocusedElem.selectionEnd = Math.min(\n                  end,\n                  priorFocusedElem.value.length\n                ));\n            else {\n              var doc = priorFocusedElem.ownerDocument || document,\n                win = (doc && doc.defaultView) || window;\n              if (win.getSelection) {\n                var selection = win.getSelection(),\n                  length = priorFocusedElem.textContent.length,\n                  start$jscomp$0 = Math.min(priorSelectionRange.start, length),\n                  end$jscomp$0 =\n                    void 0 === priorSelectionRange.end\n                      ? start$jscomp$0\n                      : Math.min(priorSelectionRange.end, length);\n                !selection.extend &&\n                  start$jscomp$0 > end$jscomp$0 &&\n                  ((curFocusedElem = end$jscomp$0),\n                  (end$jscomp$0 = start$jscomp$0),\n                  (start$jscomp$0 = curFocusedElem));\n                var startMarker = getNodeForCharacterOffset(\n                    priorFocusedElem,\n                    start$jscomp$0\n                  ),\n                  endMarker = getNodeForCharacterOffset(\n                    priorFocusedElem,\n                    end$jscomp$0\n                  );\n                if (\n                  startMarker &&\n                  endMarker &&\n                  (1 !== selection.rangeCount ||\n                    selection.anchorNode !== startMarker.node ||\n                    selection.anchorOffset !== startMarker.offset ||\n                    selection.focusNode !== endMarker.node ||\n                    selection.focusOffset !== endMarker.offset)\n                ) {\n                  var range = doc.createRange();\n                  range.setStart(startMarker.node, startMarker.offset);\n                  selection.removeAllRanges();\n                  start$jscomp$0 > end$jscomp$0\n                    ? (selection.addRange(range),\n                      selection.extend(endMarker.node, endMarker.offset))\n                    : (range.setEnd(endMarker.node, endMarker.offset),\n                      selection.addRange(range));\n                }\n              }\n            }\n          }\n          doc = [];\n          for (\n            selection = priorFocusedElem;\n            (selection = selection.parentNode);\n\n          )\n            1 === selection.nodeType &&\n              doc.push({\n                element: selection,\n                left: selection.scrollLeft,\n                top: selection.scrollTop\n              });\n          \"function\" === typeof priorFocusedElem.focus &&\n            priorFocusedElem.focus();\n          for (\n            priorFocusedElem = 0;\n            priorFocusedElem < doc.length;\n            priorFocusedElem++\n          ) {\n            var info = doc[priorFocusedElem];\n            info.element.scrollLeft = info.left;\n            info.element.scrollTop = info.top;\n          }\n        }\n        _enabled = !!eventsEnabled;\n        selectionInformation = eventsEnabled = null;\n      } finally {\n        (executionContext = prevExecutionContext),\n          (ReactDOMSharedInternals.p = previousPriority),\n          (ReactSharedInternals.T = rootMutationHasEffect);\n      }\n    }\n    root.current = finishedWork;\n    pendingEffectsStatus = 2;\n  }\n}\nfunction flushLayoutEffects() {\n  if (2 === pendingEffectsStatus) {\n    pendingEffectsStatus = 0;\n    var root = pendingEffectsRoot,\n      finishedWork = pendingFinishedWork,\n      rootHasLayoutEffect = 0 !== (finishedWork.flags & 8772);\n    if (0 !== (finishedWork.subtreeFlags & 8772) || rootHasLayoutEffect) {\n      rootHasLayoutEffect = ReactSharedInternals.T;\n      ReactSharedInternals.T = null;\n      var previousPriority = ReactDOMSharedInternals.p;\n      ReactDOMSharedInternals.p = 2;\n      var prevExecutionContext = executionContext;\n      executionContext |= 4;\n      try {\n        commitLayoutEffectOnFiber(root, finishedWork.alternate, finishedWork);\n      } finally {\n        (executionContext = prevExecutionContext),\n          (ReactDOMSharedInternals.p = previousPriority),\n          (ReactSharedInternals.T = rootHasLayoutEffect);\n      }\n    }\n    pendingEffectsStatus = 3;\n  }\n}\nfunction flushSpawnedWork() {\n  if (4 === pendingEffectsStatus || 3 === pendingEffectsStatus) {\n    pendingEffectsStatus = 0;\n    requestPaint();\n    var root = pendingEffectsRoot,\n      finishedWork = pendingFinishedWork,\n      lanes = pendingEffectsLanes,\n      recoverableErrors = pendingRecoverableErrors;\n    0 !== (finishedWork.subtreeFlags & 10256) ||\n    0 !== (finishedWork.flags & 10256)\n      ? (pendingEffectsStatus = 5)\n      : ((pendingEffectsStatus = 0),\n        (pendingFinishedWork = pendingEffectsRoot = null),\n        releaseRootPooledCache(root, root.pendingLanes));\n    var remainingLanes = root.pendingLanes;\n    0 === remainingLanes && (legacyErrorBoundariesThatAlreadyFailed = null);\n    lanesToEventPriority(lanes);\n    finishedWork = finishedWork.stateNode;\n    if (injectedHook && \"function\" === typeof injectedHook.onCommitFiberRoot)\n      try {\n        injectedHook.onCommitFiberRoot(\n          rendererID,\n          finishedWork,\n          void 0,\n          128 === (finishedWork.current.flags & 128)\n        );\n      } catch (err) {}\n    if (null !== recoverableErrors) {\n      finishedWork = ReactSharedInternals.T;\n      remainingLanes = ReactDOMSharedInternals.p;\n      ReactDOMSharedInternals.p = 2;\n      ReactSharedInternals.T = null;\n      try {\n        for (\n          var onRecoverableError = root.onRecoverableError, i = 0;\n          i < recoverableErrors.length;\n          i++\n        ) {\n          var recoverableError = recoverableErrors[i];\n          onRecoverableError(recoverableError.value, {\n            componentStack: recoverableError.stack\n          });\n        }\n      } finally {\n        (ReactSharedInternals.T = finishedWork),\n          (ReactDOMSharedInternals.p = remainingLanes);\n      }\n    }\n    0 !== (pendingEffectsLanes & 3) && flushPendingEffects();\n    ensureRootIsScheduled(root);\n    remainingLanes = root.pendingLanes;\n    0 !== (lanes & 4194090) && 0 !== (remainingLanes & 42)\n      ? root === rootWithNestedUpdates\n        ? nestedUpdateCount++\n        : ((nestedUpdateCount = 0), (rootWithNestedUpdates = root))\n      : (nestedUpdateCount = 0);\n    flushSyncWorkAcrossRoots_impl(0, !1);\n  }\n}\nfunction releaseRootPooledCache(root, remainingLanes) {\n  0 === (root.pooledCacheLanes &= remainingLanes) &&\n    ((remainingLanes = root.pooledCache),\n    null != remainingLanes &&\n      ((root.pooledCache = null), releaseCache(remainingLanes)));\n}\nfunction flushPendingEffects(wasDelayedCommit) {\n  flushMutationEffects();\n  flushLayoutEffects();\n  flushSpawnedWork();\n  return flushPassiveEffects(wasDelayedCommit);\n}\nfunction flushPassiveEffects() {\n  if (5 !== pendingEffectsStatus) return !1;\n  var root = pendingEffectsRoot,\n    remainingLanes = pendingEffectsRemainingLanes;\n  pendingEffectsRemainingLanes = 0;\n  var renderPriority = lanesToEventPriority(pendingEffectsLanes),\n    prevTransition = ReactSharedInternals.T,\n    previousPriority = ReactDOMSharedInternals.p;\n  try {\n    ReactDOMSharedInternals.p = 32 > renderPriority ? 32 : renderPriority;\n    ReactSharedInternals.T = null;\n    renderPriority = pendingPassiveTransitions;\n    pendingPassiveTransitions = null;\n    var root$jscomp$0 = pendingEffectsRoot,\n      lanes = pendingEffectsLanes;\n    pendingEffectsStatus = 0;\n    pendingFinishedWork = pendingEffectsRoot = null;\n    pendingEffectsLanes = 0;\n    if (0 !== (executionContext & 6)) throw Error(formatProdErrorMessage(331));\n    var prevExecutionContext = executionContext;\n    executionContext |= 4;\n    commitPassiveUnmountOnFiber(root$jscomp$0.current);\n    commitPassiveMountOnFiber(\n      root$jscomp$0,\n      root$jscomp$0.current,\n      lanes,\n      renderPriority\n    );\n    executionContext = prevExecutionContext;\n    flushSyncWorkAcrossRoots_impl(0, !1);\n    if (\n      injectedHook &&\n      \"function\" === typeof injectedHook.onPostCommitFiberRoot\n    )\n      try {\n        injectedHook.onPostCommitFiberRoot(rendererID, root$jscomp$0);\n      } catch (err) {}\n    return !0;\n  } finally {\n    (ReactDOMSharedInternals.p = previousPriority),\n      (ReactSharedInternals.T = prevTransition),\n      releaseRootPooledCache(root, remainingLanes);\n  }\n}\nfunction captureCommitPhaseErrorOnRoot(rootFiber, sourceFiber, error) {\n  sourceFiber = createCapturedValueAtFiber(error, sourceFiber);\n  sourceFiber = createRootErrorUpdate(rootFiber.stateNode, sourceFiber, 2);\n  rootFiber = enqueueUpdate(rootFiber, sourceFiber, 2);\n  null !== rootFiber &&\n    (markRootUpdated$1(rootFiber, 2), ensureRootIsScheduled(rootFiber));\n}\nfunction captureCommitPhaseError(sourceFiber, nearestMountedAncestor, error) {\n  if (3 === sourceFiber.tag)\n    captureCommitPhaseErrorOnRoot(sourceFiber, sourceFiber, error);\n  else\n    for (; null !== nearestMountedAncestor; ) {\n      if (3 === nearestMountedAncestor.tag) {\n        captureCommitPhaseErrorOnRoot(\n          nearestMountedAncestor,\n          sourceFiber,\n          error\n        );\n        break;\n      } else if (1 === nearestMountedAncestor.tag) {\n        var instance = nearestMountedAncestor.stateNode;\n        if (\n          \"function\" ===\n            typeof nearestMountedAncestor.type.getDerivedStateFromError ||\n          (\"function\" === typeof instance.componentDidCatch &&\n            (null === legacyErrorBoundariesThatAlreadyFailed ||\n              !legacyErrorBoundariesThatAlreadyFailed.has(instance)))\n        ) {\n          sourceFiber = createCapturedValueAtFiber(error, sourceFiber);\n          error = createClassErrorUpdate(2);\n          instance = enqueueUpdate(nearestMountedAncestor, error, 2);\n          null !== instance &&\n            (initializeClassErrorUpdate(\n              error,\n              instance,\n              nearestMountedAncestor,\n              sourceFiber\n            ),\n            markRootUpdated$1(instance, 2),\n            ensureRootIsScheduled(instance));\n          break;\n        }\n      }\n      nearestMountedAncestor = nearestMountedAncestor.return;\n    }\n}\nfunction attachPingListener(root, wakeable, lanes) {\n  var pingCache = root.pingCache;\n  if (null === pingCache) {\n    pingCache = root.pingCache = new PossiblyWeakMap();\n    var threadIDs = new Set();\n    pingCache.set(wakeable, threadIDs);\n  } else\n    (threadIDs = pingCache.get(wakeable)),\n      void 0 === threadIDs &&\n        ((threadIDs = new Set()), pingCache.set(wakeable, threadIDs));\n  threadIDs.has(lanes) ||\n    ((workInProgressRootDidAttachPingListener = !0),\n    threadIDs.add(lanes),\n    (root = pingSuspendedRoot.bind(null, root, wakeable, lanes)),\n    wakeable.then(root, root));\n}\nfunction pingSuspendedRoot(root, wakeable, pingedLanes) {\n  var pingCache = root.pingCache;\n  null !== pingCache && pingCache.delete(wakeable);\n  root.pingedLanes |= root.suspendedLanes & pingedLanes;\n  root.warmLanes &= ~pingedLanes;\n  workInProgressRoot === root &&\n    (workInProgressRootRenderLanes & pingedLanes) === pingedLanes &&\n    (4 === workInProgressRootExitStatus ||\n    (3 === workInProgressRootExitStatus &&\n      (workInProgressRootRenderLanes & 62914560) ===\n        workInProgressRootRenderLanes &&\n      300 > now() - globalMostRecentFallbackTime)\n      ? 0 === (executionContext & 2) && prepareFreshStack(root, 0)\n      : (workInProgressRootPingedLanes |= pingedLanes),\n    workInProgressSuspendedRetryLanes === workInProgressRootRenderLanes &&\n      (workInProgressSuspendedRetryLanes = 0));\n  ensureRootIsScheduled(root);\n}\nfunction retryTimedOutBoundary(boundaryFiber, retryLane) {\n  0 === retryLane && (retryLane = claimNextRetryLane());\n  boundaryFiber = enqueueConcurrentRenderForLane(boundaryFiber, retryLane);\n  null !== boundaryFiber &&\n    (markRootUpdated$1(boundaryFiber, retryLane),\n    ensureRootIsScheduled(boundaryFiber));\n}\nfunction retryDehydratedSuspenseBoundary(boundaryFiber) {\n  var suspenseState = boundaryFiber.memoizedState,\n    retryLane = 0;\n  null !== suspenseState && (retryLane = suspenseState.retryLane);\n  retryTimedOutBoundary(boundaryFiber, retryLane);\n}\nfunction resolveRetryWakeable(boundaryFiber, wakeable) {\n  var retryLane = 0;\n  switch (boundaryFiber.tag) {\n    case 13:\n      var retryCache = boundaryFiber.stateNode;\n      var suspenseState = boundaryFiber.memoizedState;\n      null !== suspenseState && (retryLane = suspenseState.retryLane);\n      break;\n    case 19:\n      retryCache = boundaryFiber.stateNode;\n      break;\n    case 22:\n      retryCache = boundaryFiber.stateNode._retryCache;\n      break;\n    default:\n      throw Error(formatProdErrorMessage(314));\n  }\n  null !== retryCache && retryCache.delete(wakeable);\n  retryTimedOutBoundary(boundaryFiber, retryLane);\n}\nfunction scheduleCallback$1(priorityLevel, callback) {\n  return scheduleCallback$3(priorityLevel, callback);\n}\nvar firstScheduledRoot = null,\n  lastScheduledRoot = null,\n  didScheduleMicrotask = !1,\n  mightHavePendingSyncWork = !1,\n  isFlushingWork = !1,\n  currentEventTransitionLane = 0;\nfunction ensureRootIsScheduled(root) {\n  root !== lastScheduledRoot &&\n    null === root.next &&\n    (null === lastScheduledRoot\n      ? (firstScheduledRoot = lastScheduledRoot = root)\n      : (lastScheduledRoot = lastScheduledRoot.next = root));\n  mightHavePendingSyncWork = !0;\n  didScheduleMicrotask ||\n    ((didScheduleMicrotask = !0), scheduleImmediateRootScheduleTask());\n}\nfunction flushSyncWorkAcrossRoots_impl(syncTransitionLanes, onlyLegacy) {\n  if (!isFlushingWork && mightHavePendingSyncWork) {\n    isFlushingWork = !0;\n    do {\n      var didPerformSomeWork = !1;\n      for (var root$174 = firstScheduledRoot; null !== root$174; ) {\n        if (!onlyLegacy)\n          if (0 !== syncTransitionLanes) {\n            var pendingLanes = root$174.pendingLanes;\n            if (0 === pendingLanes) var JSCompiler_inline_result = 0;\n            else {\n              var suspendedLanes = root$174.suspendedLanes,\n                pingedLanes = root$174.pingedLanes;\n              JSCompiler_inline_result =\n                (1 << (31 - clz32(42 | syncTransitionLanes) + 1)) - 1;\n              JSCompiler_inline_result &=\n                pendingLanes & ~(suspendedLanes & ~pingedLanes);\n              JSCompiler_inline_result =\n                JSCompiler_inline_result & 201326741\n                  ? (JSCompiler_inline_result & 201326741) | 1\n                  : JSCompiler_inline_result\n                    ? JSCompiler_inline_result | 2\n                    : 0;\n            }\n            0 !== JSCompiler_inline_result &&\n              ((didPerformSomeWork = !0),\n              performSyncWorkOnRoot(root$174, JSCompiler_inline_result));\n          } else\n            (JSCompiler_inline_result = workInProgressRootRenderLanes),\n              (JSCompiler_inline_result = getNextLanes(\n                root$174,\n                root$174 === workInProgressRoot ? JSCompiler_inline_result : 0,\n                null !== root$174.cancelPendingCommit ||\n                  -1 !== root$174.timeoutHandle\n              )),\n              0 === (JSCompiler_inline_result & 3) ||\n                checkIfRootIsPrerendering(root$174, JSCompiler_inline_result) ||\n                ((didPerformSomeWork = !0),\n                performSyncWorkOnRoot(root$174, JSCompiler_inline_result));\n        root$174 = root$174.next;\n      }\n    } while (didPerformSomeWork);\n    isFlushingWork = !1;\n  }\n}\nfunction processRootScheduleInImmediateTask() {\n  processRootScheduleInMicrotask();\n}\nfunction processRootScheduleInMicrotask() {\n  mightHavePendingSyncWork = didScheduleMicrotask = !1;\n  var syncTransitionLanes = 0;\n  0 !== currentEventTransitionLane &&\n    (shouldAttemptEagerTransition() &&\n      (syncTransitionLanes = currentEventTransitionLane),\n    (currentEventTransitionLane = 0));\n  for (\n    var currentTime = now(), prev = null, root = firstScheduledRoot;\n    null !== root;\n\n  ) {\n    var next = root.next,\n      nextLanes = scheduleTaskForRootDuringMicrotask(root, currentTime);\n    if (0 === nextLanes)\n      (root.next = null),\n        null === prev ? (firstScheduledRoot = next) : (prev.next = next),\n        null === next && (lastScheduledRoot = prev);\n    else if (\n      ((prev = root), 0 !== syncTransitionLanes || 0 !== (nextLanes & 3))\n    )\n      mightHavePendingSyncWork = !0;\n    root = next;\n  }\n  flushSyncWorkAcrossRoots_impl(syncTransitionLanes, !1);\n}\nfunction scheduleTaskForRootDuringMicrotask(root, currentTime) {\n  for (\n    var suspendedLanes = root.suspendedLanes,\n      pingedLanes = root.pingedLanes,\n      expirationTimes = root.expirationTimes,\n      lanes = root.pendingLanes & -62914561;\n    0 < lanes;\n\n  ) {\n    var index$3 = 31 - clz32(lanes),\n      lane = 1 << index$3,\n      expirationTime = expirationTimes[index$3];\n    if (-1 === expirationTime) {\n      if (0 === (lane & suspendedLanes) || 0 !== (lane & pingedLanes))\n        expirationTimes[index$3] = computeExpirationTime(lane, currentTime);\n    } else expirationTime <= currentTime && (root.expiredLanes |= lane);\n    lanes &= ~lane;\n  }\n  currentTime = workInProgressRoot;\n  suspendedLanes = workInProgressRootRenderLanes;\n  suspendedLanes = getNextLanes(\n    root,\n    root === currentTime ? suspendedLanes : 0,\n    null !== root.cancelPendingCommit || -1 !== root.timeoutHandle\n  );\n  pingedLanes = root.callbackNode;\n  if (\n    0 === suspendedLanes ||\n    (root === currentTime &&\n      (2 === workInProgressSuspendedReason ||\n        9 === workInProgressSuspendedReason)) ||\n    null !== root.cancelPendingCommit\n  )\n    return (\n      null !== pingedLanes &&\n        null !== pingedLanes &&\n        cancelCallback$1(pingedLanes),\n      (root.callbackNode = null),\n      (root.callbackPriority = 0)\n    );\n  if (\n    0 === (suspendedLanes & 3) ||\n    checkIfRootIsPrerendering(root, suspendedLanes)\n  ) {\n    currentTime = suspendedLanes & -suspendedLanes;\n    if (currentTime === root.callbackPriority) return currentTime;\n    null !== pingedLanes && cancelCallback$1(pingedLanes);\n    switch (lanesToEventPriority(suspendedLanes)) {\n      case 2:\n      case 8:\n        suspendedLanes = UserBlockingPriority;\n        break;\n      case 32:\n        suspendedLanes = NormalPriority$1;\n        break;\n      case 268435456:\n        suspendedLanes = IdlePriority;\n        break;\n      default:\n        suspendedLanes = NormalPriority$1;\n    }\n    pingedLanes = performWorkOnRootViaSchedulerTask.bind(null, root);\n    suspendedLanes = scheduleCallback$3(suspendedLanes, pingedLanes);\n    root.callbackPriority = currentTime;\n    root.callbackNode = suspendedLanes;\n    return currentTime;\n  }\n  null !== pingedLanes && null !== pingedLanes && cancelCallback$1(pingedLanes);\n  root.callbackPriority = 2;\n  root.callbackNode = null;\n  return 2;\n}\nfunction performWorkOnRootViaSchedulerTask(root, didTimeout) {\n  if (0 !== pendingEffectsStatus && 5 !== pendingEffectsStatus)\n    return (root.callbackNode = null), (root.callbackPriority = 0), null;\n  var originalCallbackNode = root.callbackNode;\n  if (flushPendingEffects(!0) && root.callbackNode !== originalCallbackNode)\n    return null;\n  var workInProgressRootRenderLanes$jscomp$0 = workInProgressRootRenderLanes;\n  workInProgressRootRenderLanes$jscomp$0 = getNextLanes(\n    root,\n    root === workInProgressRoot ? workInProgressRootRenderLanes$jscomp$0 : 0,\n    null !== root.cancelPendingCommit || -1 !== root.timeoutHandle\n  );\n  if (0 === workInProgressRootRenderLanes$jscomp$0) return null;\n  performWorkOnRoot(root, workInProgressRootRenderLanes$jscomp$0, didTimeout);\n  scheduleTaskForRootDuringMicrotask(root, now());\n  return null != root.callbackNode && root.callbackNode === originalCallbackNode\n    ? performWorkOnRootViaSchedulerTask.bind(null, root)\n    : null;\n}\nfunction performSyncWorkOnRoot(root, lanes) {\n  if (flushPendingEffects()) return null;\n  performWorkOnRoot(root, lanes, !0);\n}\nfunction scheduleImmediateRootScheduleTask() {\n  scheduleMicrotask(function () {\n    0 !== (executionContext & 6)\n      ? scheduleCallback$3(\n          ImmediatePriority,\n          processRootScheduleInImmediateTask\n        )\n      : processRootScheduleInMicrotask();\n  });\n}\nfunction requestTransitionLane() {\n  0 === currentEventTransitionLane &&\n    (currentEventTransitionLane = claimNextTransitionLane());\n  return currentEventTransitionLane;\n}\nfunction coerceFormActionProp(actionProp) {\n  return null == actionProp ||\n    \"symbol\" === typeof actionProp ||\n    \"boolean\" === typeof actionProp\n    ? null\n    : \"function\" === typeof actionProp\n      ? actionProp\n      : sanitizeURL(\"\" + actionProp);\n}\nfunction createFormDataWithSubmitter(form, submitter) {\n  var temp = submitter.ownerDocument.createElement(\"input\");\n  temp.name = submitter.name;\n  temp.value = submitter.value;\n  form.id && temp.setAttribute(\"form\", form.id);\n  submitter.parentNode.insertBefore(temp, submitter);\n  form = new FormData(form);\n  temp.parentNode.removeChild(temp);\n  return form;\n}\nfunction extractEvents$1(\n  dispatchQueue,\n  domEventName,\n  maybeTargetInst,\n  nativeEvent,\n  nativeEventTarget\n) {\n  if (\n    \"submit\" === domEventName &&\n    maybeTargetInst &&\n    maybeTargetInst.stateNode === nativeEventTarget\n  ) {\n    var action = coerceFormActionProp(\n        (nativeEventTarget[internalPropsKey] || null).action\n      ),\n      submitter = nativeEvent.submitter;\n    submitter &&\n      ((domEventName = (domEventName = submitter[internalPropsKey] || null)\n        ? coerceFormActionProp(domEventName.formAction)\n        : submitter.getAttribute(\"formAction\")),\n      null !== domEventName && ((action = domEventName), (submitter = null)));\n    var event = new SyntheticEvent(\n      \"action\",\n      \"action\",\n      null,\n      nativeEvent,\n      nativeEventTarget\n    );\n    dispatchQueue.push({\n      event: event,\n      listeners: [\n        {\n          instance: null,\n          listener: function () {\n            if (nativeEvent.defaultPrevented) {\n              if (0 !== currentEventTransitionLane) {\n                var formData = submitter\n                  ? createFormDataWithSubmitter(nativeEventTarget, submitter)\n                  : new FormData(nativeEventTarget);\n                startHostTransition(\n                  maybeTargetInst,\n                  {\n                    pending: !0,\n                    data: formData,\n                    method: nativeEventTarget.method,\n                    action: action\n                  },\n                  null,\n                  formData\n                );\n              }\n            } else\n              \"function\" === typeof action &&\n                (event.preventDefault(),\n                (formData = submitter\n                  ? createFormDataWithSubmitter(nativeEventTarget, submitter)\n                  : new FormData(nativeEventTarget)),\n                startHostTransition(\n                  maybeTargetInst,\n                  {\n                    pending: !0,\n                    data: formData,\n                    method: nativeEventTarget.method,\n                    action: action\n                  },\n                  action,\n                  formData\n                ));\n          },\n          currentTarget: nativeEventTarget\n        }\n      ]\n    });\n  }\n}\nfor (\n  var i$jscomp$inline_1528 = 0;\n  i$jscomp$inline_1528 < simpleEventPluginEvents.length;\n  i$jscomp$inline_1528++\n) {\n  var eventName$jscomp$inline_1529 =\n      simpleEventPluginEvents[i$jscomp$inline_1528],\n    domEventName$jscomp$inline_1530 =\n      eventName$jscomp$inline_1529.toLowerCase(),\n    capitalizedEvent$jscomp$inline_1531 =\n      eventName$jscomp$inline_1529[0].toUpperCase() +\n      eventName$jscomp$inline_1529.slice(1);\n  registerSimpleEvent(\n    domEventName$jscomp$inline_1530,\n    \"on\" + capitalizedEvent$jscomp$inline_1531\n  );\n}\nregisterSimpleEvent(ANIMATION_END, \"onAnimationEnd\");\nregisterSimpleEvent(ANIMATION_ITERATION, \"onAnimationIteration\");\nregisterSimpleEvent(ANIMATION_START, \"onAnimationStart\");\nregisterSimpleEvent(\"dblclick\", \"onDoubleClick\");\nregisterSimpleEvent(\"focusin\", \"onFocus\");\nregisterSimpleEvent(\"focusout\", \"onBlur\");\nregisterSimpleEvent(TRANSITION_RUN, \"onTransitionRun\");\nregisterSimpleEvent(TRANSITION_START, \"onTransitionStart\");\nregisterSimpleEvent(TRANSITION_CANCEL, \"onTransitionCancel\");\nregisterSimpleEvent(TRANSITION_END, \"onTransitionEnd\");\nregisterDirectEvent(\"onMouseEnter\", [\"mouseout\", \"mouseover\"]);\nregisterDirectEvent(\"onMouseLeave\", [\"mouseout\", \"mouseover\"]);\nregisterDirectEvent(\"onPointerEnter\", [\"pointerout\", \"pointerover\"]);\nregisterDirectEvent(\"onPointerLeave\", [\"pointerout\", \"pointerover\"]);\nregisterTwoPhaseEvent(\n  \"onChange\",\n  \"change click focusin focusout input keydown keyup selectionchange\".split(\" \")\n);\nregisterTwoPhaseEvent(\n  \"onSelect\",\n  \"focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange\".split(\n    \" \"\n  )\n);\nregisterTwoPhaseEvent(\"onBeforeInput\", [\n  \"compositionend\",\n  \"keypress\",\n  \"textInput\",\n  \"paste\"\n]);\nregisterTwoPhaseEvent(\n  \"onCompositionEnd\",\n  \"compositionend focusout keydown keypress keyup mousedown\".split(\" \")\n);\nregisterTwoPhaseEvent(\n  \"onCompositionStart\",\n  \"compositionstart focusout keydown keypress keyup mousedown\".split(\" \")\n);\nregisterTwoPhaseEvent(\n  \"onCompositionUpdate\",\n  \"compositionupdate focusout keydown keypress keyup mousedown\".split(\" \")\n);\nvar mediaEventTypes =\n    \"abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting\".split(\n      \" \"\n    ),\n  nonDelegatedEvents = new Set(\n    \"beforetoggle cancel close invalid load scroll scrollend toggle\"\n      .split(\" \")\n      .concat(mediaEventTypes)\n  );\nfunction processDispatchQueue(dispatchQueue, eventSystemFlags) {\n  eventSystemFlags = 0 !== (eventSystemFlags & 4);\n  for (var i = 0; i < dispatchQueue.length; i++) {\n    var _dispatchQueue$i = dispatchQueue[i],\n      event = _dispatchQueue$i.event;\n    _dispatchQueue$i = _dispatchQueue$i.listeners;\n    a: {\n      var previousInstance = void 0;\n      if (eventSystemFlags)\n        for (\n          var i$jscomp$0 = _dispatchQueue$i.length - 1;\n          0 <= i$jscomp$0;\n          i$jscomp$0--\n        ) {\n          var _dispatchListeners$i = _dispatchQueue$i[i$jscomp$0],\n            instance = _dispatchListeners$i.instance,\n            currentTarget = _dispatchListeners$i.currentTarget;\n          _dispatchListeners$i = _dispatchListeners$i.listener;\n          if (instance !== previousInstance && event.isPropagationStopped())\n            break a;\n          previousInstance = _dispatchListeners$i;\n          event.currentTarget = currentTarget;\n          try {\n            previousInstance(event);\n          } catch (error) {\n            reportGlobalError(error);\n          }\n          event.currentTarget = null;\n          previousInstance = instance;\n        }\n      else\n        for (\n          i$jscomp$0 = 0;\n          i$jscomp$0 < _dispatchQueue$i.length;\n          i$jscomp$0++\n        ) {\n          _dispatchListeners$i = _dispatchQueue$i[i$jscomp$0];\n          instance = _dispatchListeners$i.instance;\n          currentTarget = _dispatchListeners$i.currentTarget;\n          _dispatchListeners$i = _dispatchListeners$i.listener;\n          if (instance !== previousInstance && event.isPropagationStopped())\n            break a;\n          previousInstance = _dispatchListeners$i;\n          event.currentTarget = currentTarget;\n          try {\n            previousInstance(event);\n          } catch (error) {\n            reportGlobalError(error);\n          }\n          event.currentTarget = null;\n          previousInstance = instance;\n        }\n    }\n  }\n}\nfunction listenToNonDelegatedEvent(domEventName, targetElement) {\n  var JSCompiler_inline_result = targetElement[internalEventHandlersKey];\n  void 0 === JSCompiler_inline_result &&\n    (JSCompiler_inline_result = targetElement[internalEventHandlersKey] =\n      new Set());\n  var listenerSetKey = domEventName + \"__bubble\";\n  JSCompiler_inline_result.has(listenerSetKey) ||\n    (addTrappedEventListener(targetElement, domEventName, 2, !1),\n    JSCompiler_inline_result.add(listenerSetKey));\n}\nfunction listenToNativeEvent(domEventName, isCapturePhaseListener, target) {\n  var eventSystemFlags = 0;\n  isCapturePhaseListener && (eventSystemFlags |= 4);\n  addTrappedEventListener(\n    target,\n    domEventName,\n    eventSystemFlags,\n    isCapturePhaseListener\n  );\n}\nvar listeningMarker = \"_reactListening\" + Math.random().toString(36).slice(2);\nfunction listenToAllSupportedEvents(rootContainerElement) {\n  if (!rootContainerElement[listeningMarker]) {\n    rootContainerElement[listeningMarker] = !0;\n    allNativeEvents.forEach(function (domEventName) {\n      \"selectionchange\" !== domEventName &&\n        (nonDelegatedEvents.has(domEventName) ||\n          listenToNativeEvent(domEventName, !1, rootContainerElement),\n        listenToNativeEvent(domEventName, !0, rootContainerElement));\n    });\n    var ownerDocument =\n      9 === rootContainerElement.nodeType\n        ? rootContainerElement\n        : rootContainerElement.ownerDocument;\n    null === ownerDocument ||\n      ownerDocument[listeningMarker] ||\n      ((ownerDocument[listeningMarker] = !0),\n      listenToNativeEvent(\"selectionchange\", !1, ownerDocument));\n  }\n}\nfunction addTrappedEventListener(\n  targetContainer,\n  domEventName,\n  eventSystemFlags,\n  isCapturePhaseListener\n) {\n  switch (getEventPriority(domEventName)) {\n    case 2:\n      var listenerWrapper = dispatchDiscreteEvent;\n      break;\n    case 8:\n      listenerWrapper = dispatchContinuousEvent;\n      break;\n    default:\n      listenerWrapper = dispatchEvent;\n  }\n  eventSystemFlags = listenerWrapper.bind(\n    null,\n    domEventName,\n    eventSystemFlags,\n    targetContainer\n  );\n  listenerWrapper = void 0;\n  !passiveBrowserEventsSupported ||\n    (\"touchstart\" !== domEventName &&\n      \"touchmove\" !== domEventName &&\n      \"wheel\" !== domEventName) ||\n    (listenerWrapper = !0);\n  isCapturePhaseListener\n    ? void 0 !== listenerWrapper\n      ? targetContainer.addEventListener(domEventName, eventSystemFlags, {\n          capture: !0,\n          passive: listenerWrapper\n        })\n      : targetContainer.addEventListener(domEventName, eventSystemFlags, !0)\n    : void 0 !== listenerWrapper\n      ? targetContainer.addEventListener(domEventName, eventSystemFlags, {\n          passive: listenerWrapper\n        })\n      : targetContainer.addEventListener(domEventName, eventSystemFlags, !1);\n}\nfunction dispatchEventForPluginEventSystem(\n  domEventName,\n  eventSystemFlags,\n  nativeEvent,\n  targetInst$jscomp$0,\n  targetContainer\n) {\n  var ancestorInst = targetInst$jscomp$0;\n  if (\n    0 === (eventSystemFlags & 1) &&\n    0 === (eventSystemFlags & 2) &&\n    null !== targetInst$jscomp$0\n  )\n    a: for (;;) {\n      if (null === targetInst$jscomp$0) return;\n      var nodeTag = targetInst$jscomp$0.tag;\n      if (3 === nodeTag || 4 === nodeTag) {\n        var container = targetInst$jscomp$0.stateNode.containerInfo;\n        if (container === targetContainer) break;\n        if (4 === nodeTag)\n          for (nodeTag = targetInst$jscomp$0.return; null !== nodeTag; ) {\n            var grandTag = nodeTag.tag;\n            if (\n              (3 === grandTag || 4 === grandTag) &&\n              nodeTag.stateNode.containerInfo === targetContainer\n            )\n              return;\n            nodeTag = nodeTag.return;\n          }\n        for (; null !== container; ) {\n          nodeTag = getClosestInstanceFromNode(container);\n          if (null === nodeTag) return;\n          grandTag = nodeTag.tag;\n          if (\n            5 === grandTag ||\n            6 === grandTag ||\n            26 === grandTag ||\n            27 === grandTag\n          ) {\n            targetInst$jscomp$0 = ancestorInst = nodeTag;\n            continue a;\n          }\n          container = container.parentNode;\n        }\n      }\n      targetInst$jscomp$0 = targetInst$jscomp$0.return;\n    }\n  batchedUpdates$1(function () {\n    var targetInst = ancestorInst,\n      nativeEventTarget = getEventTarget(nativeEvent),\n      dispatchQueue = [];\n    a: {\n      var reactName = topLevelEventsToReactNames.get(domEventName);\n      if (void 0 !== reactName) {\n        var SyntheticEventCtor = SyntheticEvent,\n          reactEventType = domEventName;\n        switch (domEventName) {\n          case \"keypress\":\n            if (0 === getEventCharCode(nativeEvent)) break a;\n          case \"keydown\":\n          case \"keyup\":\n            SyntheticEventCtor = SyntheticKeyboardEvent;\n            break;\n          case \"focusin\":\n            reactEventType = \"focus\";\n            SyntheticEventCtor = SyntheticFocusEvent;\n            break;\n          case \"focusout\":\n            reactEventType = \"blur\";\n            SyntheticEventCtor = SyntheticFocusEvent;\n            break;\n          case \"beforeblur\":\n          case \"afterblur\":\n            SyntheticEventCtor = SyntheticFocusEvent;\n            break;\n          case \"click\":\n            if (2 === nativeEvent.button) break a;\n          case \"auxclick\":\n          case \"dblclick\":\n          case \"mousedown\":\n          case \"mousemove\":\n          case \"mouseup\":\n          case \"mouseout\":\n          case \"mouseover\":\n          case \"contextmenu\":\n            SyntheticEventCtor = SyntheticMouseEvent;\n            break;\n          case \"drag\":\n          case \"dragend\":\n          case \"dragenter\":\n          case \"dragexit\":\n          case \"dragleave\":\n          case \"dragover\":\n          case \"dragstart\":\n          case \"drop\":\n            SyntheticEventCtor = SyntheticDragEvent;\n            break;\n          case \"touchcancel\":\n          case \"touchend\":\n          case \"touchmove\":\n          case \"touchstart\":\n            SyntheticEventCtor = SyntheticTouchEvent;\n            break;\n          case ANIMATION_END:\n          case ANIMATION_ITERATION:\n          case ANIMATION_START:\n            SyntheticEventCtor = SyntheticAnimationEvent;\n            break;\n          case TRANSITION_END:\n            SyntheticEventCtor = SyntheticTransitionEvent;\n            break;\n          case \"scroll\":\n          case \"scrollend\":\n            SyntheticEventCtor = SyntheticUIEvent;\n            break;\n          case \"wheel\":\n            SyntheticEventCtor = SyntheticWheelEvent;\n            break;\n          case \"copy\":\n          case \"cut\":\n          case \"paste\":\n            SyntheticEventCtor = SyntheticClipboardEvent;\n            break;\n          case \"gotpointercapture\":\n          case \"lostpointercapture\":\n          case \"pointercancel\":\n          case \"pointerdown\":\n          case \"pointermove\":\n          case \"pointerout\":\n          case \"pointerover\":\n          case \"pointerup\":\n            SyntheticEventCtor = SyntheticPointerEvent;\n            break;\n          case \"toggle\":\n          case \"beforetoggle\":\n            SyntheticEventCtor = SyntheticToggleEvent;\n        }\n        var inCapturePhase = 0 !== (eventSystemFlags & 4),\n          accumulateTargetOnly =\n            !inCapturePhase &&\n            (\"scroll\" === domEventName || \"scrollend\" === domEventName),\n          reactEventName = inCapturePhase\n            ? null !== reactName\n              ? reactName + \"Capture\"\n              : null\n            : reactName;\n        inCapturePhase = [];\n        for (\n          var instance = targetInst, lastHostComponent;\n          null !== instance;\n\n        ) {\n          var _instance = instance;\n          lastHostComponent = _instance.stateNode;\n          _instance = _instance.tag;\n          (5 !== _instance && 26 !== _instance && 27 !== _instance) ||\n            null === lastHostComponent ||\n            null === reactEventName ||\n            ((_instance = getListener(instance, reactEventName)),\n            null != _instance &&\n              inCapturePhase.push(\n                createDispatchListener(instance, _instance, lastHostComponent)\n              ));\n          if (accumulateTargetOnly) break;\n          instance = instance.return;\n        }\n        0 < inCapturePhase.length &&\n          ((reactName = new SyntheticEventCtor(\n            reactName,\n            reactEventType,\n            null,\n            nativeEvent,\n            nativeEventTarget\n          )),\n          dispatchQueue.push({ event: reactName, listeners: inCapturePhase }));\n      }\n    }\n    if (0 === (eventSystemFlags & 7)) {\n      a: {\n        reactName =\n          \"mouseover\" === domEventName || \"pointerover\" === domEventName;\n        SyntheticEventCtor =\n          \"mouseout\" === domEventName || \"pointerout\" === domEventName;\n        if (\n          reactName &&\n          nativeEvent !== currentReplayingEvent &&\n          (reactEventType =\n            nativeEvent.relatedTarget || nativeEvent.fromElement) &&\n          (getClosestInstanceFromNode(reactEventType) ||\n            reactEventType[internalContainerInstanceKey])\n        )\n          break a;\n        if (SyntheticEventCtor || reactName) {\n          reactName =\n            nativeEventTarget.window === nativeEventTarget\n              ? nativeEventTarget\n              : (reactName = nativeEventTarget.ownerDocument)\n                ? reactName.defaultView || reactName.parentWindow\n                : window;\n          if (SyntheticEventCtor) {\n            if (\n              ((reactEventType =\n                nativeEvent.relatedTarget || nativeEvent.toElement),\n              (SyntheticEventCtor = targetInst),\n              (reactEventType = reactEventType\n                ? getClosestInstanceFromNode(reactEventType)\n                : null),\n              null !== reactEventType &&\n                ((accumulateTargetOnly =\n                  getNearestMountedFiber(reactEventType)),\n                (inCapturePhase = reactEventType.tag),\n                reactEventType !== accumulateTargetOnly ||\n                  (5 !== inCapturePhase &&\n                    27 !== inCapturePhase &&\n                    6 !== inCapturePhase)))\n            )\n              reactEventType = null;\n          } else (SyntheticEventCtor = null), (reactEventType = targetInst);\n          if (SyntheticEventCtor !== reactEventType) {\n            inCapturePhase = SyntheticMouseEvent;\n            _instance = \"onMouseLeave\";\n            reactEventName = \"onMouseEnter\";\n            instance = \"mouse\";\n            if (\"pointerout\" === domEventName || \"pointerover\" === domEventName)\n              (inCapturePhase = SyntheticPointerEvent),\n                (_instance = \"onPointerLeave\"),\n                (reactEventName = \"onPointerEnter\"),\n                (instance = \"pointer\");\n            accumulateTargetOnly =\n              null == SyntheticEventCtor\n                ? reactName\n                : getNodeFromInstance(SyntheticEventCtor);\n            lastHostComponent =\n              null == reactEventType\n                ? reactName\n                : getNodeFromInstance(reactEventType);\n            reactName = new inCapturePhase(\n              _instance,\n              instance + \"leave\",\n              SyntheticEventCtor,\n              nativeEvent,\n              nativeEventTarget\n            );\n            reactName.target = accumulateTargetOnly;\n            reactName.relatedTarget = lastHostComponent;\n            _instance = null;\n            getClosestInstanceFromNode(nativeEventTarget) === targetInst &&\n              ((inCapturePhase = new inCapturePhase(\n                reactEventName,\n                instance + \"enter\",\n                reactEventType,\n                nativeEvent,\n                nativeEventTarget\n              )),\n              (inCapturePhase.target = lastHostComponent),\n              (inCapturePhase.relatedTarget = accumulateTargetOnly),\n              (_instance = inCapturePhase));\n            accumulateTargetOnly = _instance;\n            if (SyntheticEventCtor && reactEventType)\n              b: {\n                inCapturePhase = SyntheticEventCtor;\n                reactEventName = reactEventType;\n                instance = 0;\n                for (\n                  lastHostComponent = inCapturePhase;\n                  lastHostComponent;\n                  lastHostComponent = getParent(lastHostComponent)\n                )\n                  instance++;\n                lastHostComponent = 0;\n                for (\n                  _instance = reactEventName;\n                  _instance;\n                  _instance = getParent(_instance)\n                )\n                  lastHostComponent++;\n                for (; 0 < instance - lastHostComponent; )\n                  (inCapturePhase = getParent(inCapturePhase)), instance--;\n                for (; 0 < lastHostComponent - instance; )\n                  (reactEventName = getParent(reactEventName)),\n                    lastHostComponent--;\n                for (; instance--; ) {\n                  if (\n                    inCapturePhase === reactEventName ||\n                    (null !== reactEventName &&\n                      inCapturePhase === reactEventName.alternate)\n                  )\n                    break b;\n                  inCapturePhase = getParent(inCapturePhase);\n                  reactEventName = getParent(reactEventName);\n                }\n                inCapturePhase = null;\n              }\n            else inCapturePhase = null;\n            null !== SyntheticEventCtor &&\n              accumulateEnterLeaveListenersForEvent(\n                dispatchQueue,\n                reactName,\n                SyntheticEventCtor,\n                inCapturePhase,\n                !1\n              );\n            null !== reactEventType &&\n              null !== accumulateTargetOnly &&\n              accumulateEnterLeaveListenersForEvent(\n                dispatchQueue,\n                accumulateTargetOnly,\n                reactEventType,\n                inCapturePhase,\n                !0\n              );\n          }\n        }\n      }\n      a: {\n        reactName = targetInst ? getNodeFromInstance(targetInst) : window;\n        SyntheticEventCtor =\n          reactName.nodeName && reactName.nodeName.toLowerCase();\n        if (\n          \"select\" === SyntheticEventCtor ||\n          (\"input\" === SyntheticEventCtor && \"file\" === reactName.type)\n        )\n          var getTargetInstFunc = getTargetInstForChangeEvent;\n        else if (isTextInputElement(reactName))\n          if (isInputEventSupported)\n            getTargetInstFunc = getTargetInstForInputOrChangeEvent;\n          else {\n            getTargetInstFunc = getTargetInstForInputEventPolyfill;\n            var handleEventFunc = handleEventsForInputEventPolyfill;\n          }\n        else\n          (SyntheticEventCtor = reactName.nodeName),\n            !SyntheticEventCtor ||\n            \"input\" !== SyntheticEventCtor.toLowerCase() ||\n            (\"checkbox\" !== reactName.type && \"radio\" !== reactName.type)\n              ? targetInst &&\n                isCustomElement(targetInst.elementType) &&\n                (getTargetInstFunc = getTargetInstForChangeEvent)\n              : (getTargetInstFunc = getTargetInstForClickEvent);\n        if (\n          getTargetInstFunc &&\n          (getTargetInstFunc = getTargetInstFunc(domEventName, targetInst))\n        ) {\n          createAndAccumulateChangeEvent(\n            dispatchQueue,\n            getTargetInstFunc,\n            nativeEvent,\n            nativeEventTarget\n          );\n          break a;\n        }\n        handleEventFunc && handleEventFunc(domEventName, reactName, targetInst);\n        \"focusout\" === domEventName &&\n          targetInst &&\n          \"number\" === reactName.type &&\n          null != targetInst.memoizedProps.value &&\n          setDefaultValue(reactName, \"number\", reactName.value);\n      }\n      handleEventFunc = targetInst ? getNodeFromInstance(targetInst) : window;\n      switch (domEventName) {\n        case \"focusin\":\n          if (\n            isTextInputElement(handleEventFunc) ||\n            \"true\" === handleEventFunc.contentEditable\n          )\n            (activeElement = handleEventFunc),\n              (activeElementInst = targetInst),\n              (lastSelection = null);\n          break;\n        case \"focusout\":\n          lastSelection = activeElementInst = activeElement = null;\n          break;\n        case \"mousedown\":\n          mouseDown = !0;\n          break;\n        case \"contextmenu\":\n        case \"mouseup\":\n        case \"dragend\":\n          mouseDown = !1;\n          constructSelectEvent(dispatchQueue, nativeEvent, nativeEventTarget);\n          break;\n        case \"selectionchange\":\n          if (skipSelectionChangeEvent) break;\n        case \"keydown\":\n        case \"keyup\":\n          constructSelectEvent(dispatchQueue, nativeEvent, nativeEventTarget);\n      }\n      var fallbackData;\n      if (canUseCompositionEvent)\n        b: {\n          switch (domEventName) {\n            case \"compositionstart\":\n              var eventType = \"onCompositionStart\";\n              break b;\n            case \"compositionend\":\n              eventType = \"onCompositionEnd\";\n              break b;\n            case \"compositionupdate\":\n              eventType = \"onCompositionUpdate\";\n              break b;\n          }\n          eventType = void 0;\n        }\n      else\n        isComposing\n          ? isFallbackCompositionEnd(domEventName, nativeEvent) &&\n            (eventType = \"onCompositionEnd\")\n          : \"keydown\" === domEventName &&\n            229 === nativeEvent.keyCode &&\n            (eventType = \"onCompositionStart\");\n      eventType &&\n        (useFallbackCompositionData &&\n          \"ko\" !== nativeEvent.locale &&\n          (isComposing || \"onCompositionStart\" !== eventType\n            ? \"onCompositionEnd\" === eventType &&\n              isComposing &&\n              (fallbackData = getData())\n            : ((root = nativeEventTarget),\n              (startText = \"value\" in root ? root.value : root.textContent),\n              (isComposing = !0))),\n        (handleEventFunc = accumulateTwoPhaseListeners(targetInst, eventType)),\n        0 < handleEventFunc.length &&\n          ((eventType = new SyntheticCompositionEvent(\n            eventType,\n            domEventName,\n            null,\n            nativeEvent,\n            nativeEventTarget\n          )),\n          dispatchQueue.push({ event: eventType, listeners: handleEventFunc }),\n          fallbackData\n            ? (eventType.data = fallbackData)\n            : ((fallbackData = getDataFromCustomEvent(nativeEvent)),\n              null !== fallbackData && (eventType.data = fallbackData))));\n      if (\n        (fallbackData = canUseTextInputEvent\n          ? getNativeBeforeInputChars(domEventName, nativeEvent)\n          : getFallbackBeforeInputChars(domEventName, nativeEvent))\n      )\n        (eventType = accumulateTwoPhaseListeners(targetInst, \"onBeforeInput\")),\n          0 < eventType.length &&\n            ((handleEventFunc = new SyntheticCompositionEvent(\n              \"onBeforeInput\",\n              \"beforeinput\",\n              null,\n              nativeEvent,\n              nativeEventTarget\n            )),\n            dispatchQueue.push({\n              event: handleEventFunc,\n              listeners: eventType\n            }),\n            (handleEventFunc.data = fallbackData));\n      extractEvents$1(\n        dispatchQueue,\n        domEventName,\n        targetInst,\n        nativeEvent,\n        nativeEventTarget\n      );\n    }\n    processDispatchQueue(dispatchQueue, eventSystemFlags);\n  });\n}\nfunction createDispatchListener(instance, listener, currentTarget) {\n  return {\n    instance: instance,\n    listener: listener,\n    currentTarget: currentTarget\n  };\n}\nfunction accumulateTwoPhaseListeners(targetFiber, reactName) {\n  for (\n    var captureName = reactName + \"Capture\", listeners = [];\n    null !== targetFiber;\n\n  ) {\n    var _instance2 = targetFiber,\n      stateNode = _instance2.stateNode;\n    _instance2 = _instance2.tag;\n    (5 !== _instance2 && 26 !== _instance2 && 27 !== _instance2) ||\n      null === stateNode ||\n      ((_instance2 = getListener(targetFiber, captureName)),\n      null != _instance2 &&\n        listeners.unshift(\n          createDispatchListener(targetFiber, _instance2, stateNode)\n        ),\n      (_instance2 = getListener(targetFiber, reactName)),\n      null != _instance2 &&\n        listeners.push(\n          createDispatchListener(targetFiber, _instance2, stateNode)\n        ));\n    if (3 === targetFiber.tag) return listeners;\n    targetFiber = targetFiber.return;\n  }\n  return [];\n}\nfunction getParent(inst) {\n  if (null === inst) return null;\n  do inst = inst.return;\n  while (inst && 5 !== inst.tag && 27 !== inst.tag);\n  return inst ? inst : null;\n}\nfunction accumulateEnterLeaveListenersForEvent(\n  dispatchQueue,\n  event,\n  target,\n  common,\n  inCapturePhase\n) {\n  for (\n    var registrationName = event._reactName, listeners = [];\n    null !== target && target !== common;\n\n  ) {\n    var _instance3 = target,\n      alternate = _instance3.alternate,\n      stateNode = _instance3.stateNode;\n    _instance3 = _instance3.tag;\n    if (null !== alternate && alternate === common) break;\n    (5 !== _instance3 && 26 !== _instance3 && 27 !== _instance3) ||\n      null === stateNode ||\n      ((alternate = stateNode),\n      inCapturePhase\n        ? ((stateNode = getListener(target, registrationName)),\n          null != stateNode &&\n            listeners.unshift(\n              createDispatchListener(target, stateNode, alternate)\n            ))\n        : inCapturePhase ||\n          ((stateNode = getListener(target, registrationName)),\n          null != stateNode &&\n            listeners.push(\n              createDispatchListener(target, stateNode, alternate)\n            )));\n    target = target.return;\n  }\n  0 !== listeners.length &&\n    dispatchQueue.push({ event: event, listeners: listeners });\n}\nvar NORMALIZE_NEWLINES_REGEX = /\\r\\n?/g,\n  NORMALIZE_NULL_AND_REPLACEMENT_REGEX = /\\u0000|\\uFFFD/g;\nfunction normalizeMarkupForTextOrAttribute(markup) {\n  return (\"string\" === typeof markup ? markup : \"\" + markup)\n    .replace(NORMALIZE_NEWLINES_REGEX, \"\\n\")\n    .replace(NORMALIZE_NULL_AND_REPLACEMENT_REGEX, \"\");\n}\nfunction checkForUnmatchedText(serverText, clientText) {\n  clientText = normalizeMarkupForTextOrAttribute(clientText);\n  return normalizeMarkupForTextOrAttribute(serverText) === clientText ? !0 : !1;\n}\nfunction noop$1() {}\nfunction setProp(domElement, tag, key, value, props, prevValue) {\n  switch (key) {\n    case \"children\":\n      \"string\" === typeof value\n        ? \"body\" === tag ||\n          (\"textarea\" === tag && \"\" === value) ||\n          setTextContent(domElement, value)\n        : (\"number\" === typeof value || \"bigint\" === typeof value) &&\n          \"body\" !== tag &&\n          setTextContent(domElement, \"\" + value);\n      break;\n    case \"className\":\n      setValueForKnownAttribute(domElement, \"class\", value);\n      break;\n    case \"tabIndex\":\n      setValueForKnownAttribute(domElement, \"tabindex\", value);\n      break;\n    case \"dir\":\n    case \"role\":\n    case \"viewBox\":\n    case \"width\":\n    case \"height\":\n      setValueForKnownAttribute(domElement, key, value);\n      break;\n    case \"style\":\n      setValueForStyles(domElement, value, prevValue);\n      break;\n    case \"data\":\n      if (\"object\" !== tag) {\n        setValueForKnownAttribute(domElement, \"data\", value);\n        break;\n      }\n    case \"src\":\n    case \"href\":\n      if (\"\" === value && (\"a\" !== tag || \"href\" !== key)) {\n        domElement.removeAttribute(key);\n        break;\n      }\n      if (\n        null == value ||\n        \"function\" === typeof value ||\n        \"symbol\" === typeof value ||\n        \"boolean\" === typeof value\n      ) {\n        domElement.removeAttribute(key);\n        break;\n      }\n      value = sanitizeURL(\"\" + value);\n      domElement.setAttribute(key, value);\n      break;\n    case \"action\":\n    case \"formAction\":\n      if (\"function\" === typeof value) {\n        domElement.setAttribute(\n          key,\n          \"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')\"\n        );\n        break;\n      } else\n        \"function\" === typeof prevValue &&\n          (\"formAction\" === key\n            ? (\"input\" !== tag &&\n                setProp(domElement, tag, \"name\", props.name, props, null),\n              setProp(\n                domElement,\n                tag,\n                \"formEncType\",\n                props.formEncType,\n                props,\n                null\n              ),\n              setProp(\n                domElement,\n                tag,\n                \"formMethod\",\n                props.formMethod,\n                props,\n                null\n              ),\n              setProp(\n                domElement,\n                tag,\n                \"formTarget\",\n                props.formTarget,\n                props,\n                null\n              ))\n            : (setProp(domElement, tag, \"encType\", props.encType, props, null),\n              setProp(domElement, tag, \"method\", props.method, props, null),\n              setProp(domElement, tag, \"target\", props.target, props, null)));\n      if (\n        null == value ||\n        \"symbol\" === typeof value ||\n        \"boolean\" === typeof value\n      ) {\n        domElement.removeAttribute(key);\n        break;\n      }\n      value = sanitizeURL(\"\" + value);\n      domElement.setAttribute(key, value);\n      break;\n    case \"onClick\":\n      null != value && (domElement.onclick = noop$1);\n      break;\n    case \"onScroll\":\n      null != value && listenToNonDelegatedEvent(\"scroll\", domElement);\n      break;\n    case \"onScrollEnd\":\n      null != value && listenToNonDelegatedEvent(\"scrollend\", domElement);\n      break;\n    case \"dangerouslySetInnerHTML\":\n      if (null != value) {\n        if (\"object\" !== typeof value || !(\"__html\" in value))\n          throw Error(formatProdErrorMessage(61));\n        key = value.__html;\n        if (null != key) {\n          if (null != props.children) throw Error(formatProdErrorMessage(60));\n          domElement.innerHTML = key;\n        }\n      }\n      break;\n    case \"multiple\":\n      domElement.multiple =\n        value && \"function\" !== typeof value && \"symbol\" !== typeof value;\n      break;\n    case \"muted\":\n      domElement.muted =\n        value && \"function\" !== typeof value && \"symbol\" !== typeof value;\n      break;\n    case \"suppressContentEditableWarning\":\n    case \"suppressHydrationWarning\":\n    case \"defaultValue\":\n    case \"defaultChecked\":\n    case \"innerHTML\":\n    case \"ref\":\n      break;\n    case \"autoFocus\":\n      break;\n    case \"xlinkHref\":\n      if (\n        null == value ||\n        \"function\" === typeof value ||\n        \"boolean\" === typeof value ||\n        \"symbol\" === typeof value\n      ) {\n        domElement.removeAttribute(\"xlink:href\");\n        break;\n      }\n      key = sanitizeURL(\"\" + value);\n      domElement.setAttributeNS(\n        \"http://www.w3.org/1999/xlink\",\n        \"xlink:href\",\n        key\n      );\n      break;\n    case \"contentEditable\":\n    case \"spellCheck\":\n    case \"draggable\":\n    case \"value\":\n    case \"autoReverse\":\n    case \"externalResourcesRequired\":\n    case \"focusable\":\n    case \"preserveAlpha\":\n      null != value && \"function\" !== typeof value && \"symbol\" !== typeof value\n        ? domElement.setAttribute(key, \"\" + value)\n        : domElement.removeAttribute(key);\n      break;\n    case \"inert\":\n    case \"allowFullScreen\":\n    case \"async\":\n    case \"autoPlay\":\n    case \"controls\":\n    case \"default\":\n    case \"defer\":\n    case \"disabled\":\n    case \"disablePictureInPicture\":\n    case \"disableRemotePlayback\":\n    case \"formNoValidate\":\n    case \"hidden\":\n    case \"loop\":\n    case \"noModule\":\n    case \"noValidate\":\n    case \"open\":\n    case \"playsInline\":\n    case \"readOnly\":\n    case \"required\":\n    case \"reversed\":\n    case \"scoped\":\n    case \"seamless\":\n    case \"itemScope\":\n      value && \"function\" !== typeof value && \"symbol\" !== typeof value\n        ? domElement.setAttribute(key, \"\")\n        : domElement.removeAttribute(key);\n      break;\n    case \"capture\":\n    case \"download\":\n      !0 === value\n        ? domElement.setAttribute(key, \"\")\n        : !1 !== value &&\n            null != value &&\n            \"function\" !== typeof value &&\n            \"symbol\" !== typeof value\n          ? domElement.setAttribute(key, value)\n          : domElement.removeAttribute(key);\n      break;\n    case \"cols\":\n    case \"rows\":\n    case \"size\":\n    case \"span\":\n      null != value &&\n      \"function\" !== typeof value &&\n      \"symbol\" !== typeof value &&\n      !isNaN(value) &&\n      1 <= value\n        ? domElement.setAttribute(key, value)\n        : domElement.removeAttribute(key);\n      break;\n    case \"rowSpan\":\n    case \"start\":\n      null == value ||\n      \"function\" === typeof value ||\n      \"symbol\" === typeof value ||\n      isNaN(value)\n        ? domElement.removeAttribute(key)\n        : domElement.setAttribute(key, value);\n      break;\n    case \"popover\":\n      listenToNonDelegatedEvent(\"beforetoggle\", domElement);\n      listenToNonDelegatedEvent(\"toggle\", domElement);\n      setValueForAttribute(domElement, \"popover\", value);\n      break;\n    case \"xlinkActuate\":\n      setValueForNamespacedAttribute(\n        domElement,\n        \"http://www.w3.org/1999/xlink\",\n        \"xlink:actuate\",\n        value\n      );\n      break;\n    case \"xlinkArcrole\":\n      setValueForNamespacedAttribute(\n        domElement,\n        \"http://www.w3.org/1999/xlink\",\n        \"xlink:arcrole\",\n        value\n      );\n      break;\n    case \"xlinkRole\":\n      setValueForNamespacedAttribute(\n        domElement,\n        \"http://www.w3.org/1999/xlink\",\n        \"xlink:role\",\n        value\n      );\n      break;\n    case \"xlinkShow\":\n      setValueForNamespacedAttribute(\n        domElement,\n        \"http://www.w3.org/1999/xlink\",\n        \"xlink:show\",\n        value\n      );\n      break;\n    case \"xlinkTitle\":\n      setValueForNamespacedAttribute(\n        domElement,\n        \"http://www.w3.org/1999/xlink\",\n        \"xlink:title\",\n        value\n      );\n      break;\n    case \"xlinkType\":\n      setValueForNamespacedAttribute(\n        domElement,\n        \"http://www.w3.org/1999/xlink\",\n        \"xlink:type\",\n        value\n      );\n      break;\n    case \"xmlBase\":\n      setValueForNamespacedAttribute(\n        domElement,\n        \"http://www.w3.org/XML/1998/namespace\",\n        \"xml:base\",\n        value\n      );\n      break;\n    case \"xmlLang\":\n      setValueForNamespacedAttribute(\n        domElement,\n        \"http://www.w3.org/XML/1998/namespace\",\n        \"xml:lang\",\n        value\n      );\n      break;\n    case \"xmlSpace\":\n      setValueForNamespacedAttribute(\n        domElement,\n        \"http://www.w3.org/XML/1998/namespace\",\n        \"xml:space\",\n        value\n      );\n      break;\n    case \"is\":\n      setValueForAttribute(domElement, \"is\", value);\n      break;\n    case \"innerText\":\n    case \"textContent\":\n      break;\n    default:\n      if (\n        !(2 < key.length) ||\n        (\"o\" !== key[0] && \"O\" !== key[0]) ||\n        (\"n\" !== key[1] && \"N\" !== key[1])\n      )\n        (key = aliases.get(key) || key),\n          setValueForAttribute(domElement, key, value);\n  }\n}\nfunction setPropOnCustomElement(domElement, tag, key, value, props, prevValue) {\n  switch (key) {\n    case \"style\":\n      setValueForStyles(domElement, value, prevValue);\n      break;\n    case \"dangerouslySetInnerHTML\":\n      if (null != value) {\n        if (\"object\" !== typeof value || !(\"__html\" in value))\n          throw Error(formatProdErrorMessage(61));\n        key = value.__html;\n        if (null != key) {\n          if (null != props.children) throw Error(formatProdErrorMessage(60));\n          domElement.innerHTML = key;\n        }\n      }\n      break;\n    case \"children\":\n      \"string\" === typeof value\n        ? setTextContent(domElement, value)\n        : (\"number\" === typeof value || \"bigint\" === typeof value) &&\n          setTextContent(domElement, \"\" + value);\n      break;\n    case \"onScroll\":\n      null != value && listenToNonDelegatedEvent(\"scroll\", domElement);\n      break;\n    case \"onScrollEnd\":\n      null != value && listenToNonDelegatedEvent(\"scrollend\", domElement);\n      break;\n    case \"onClick\":\n      null != value && (domElement.onclick = noop$1);\n      break;\n    case \"suppressContentEditableWarning\":\n    case \"suppressHydrationWarning\":\n    case \"innerHTML\":\n    case \"ref\":\n      break;\n    case \"innerText\":\n    case \"textContent\":\n      break;\n    default:\n      if (!registrationNameDependencies.hasOwnProperty(key))\n        a: {\n          if (\n            \"o\" === key[0] &&\n            \"n\" === key[1] &&\n            ((props = key.endsWith(\"Capture\")),\n            (tag = key.slice(2, props ? key.length - 7 : void 0)),\n            (prevValue = domElement[internalPropsKey] || null),\n            (prevValue = null != prevValue ? prevValue[key] : null),\n            \"function\" === typeof prevValue &&\n              domElement.removeEventListener(tag, prevValue, props),\n            \"function\" === typeof value)\n          ) {\n            \"function\" !== typeof prevValue &&\n              null !== prevValue &&\n              (key in domElement\n                ? (domElement[key] = null)\n                : domElement.hasAttribute(key) &&\n                  domElement.removeAttribute(key));\n            domElement.addEventListener(tag, value, props);\n            break a;\n          }\n          key in domElement\n            ? (domElement[key] = value)\n            : !0 === value\n              ? domElement.setAttribute(key, \"\")\n              : setValueForAttribute(domElement, key, value);\n        }\n  }\n}\nfunction setInitialProperties(domElement, tag, props) {\n  switch (tag) {\n    case \"div\":\n    case \"span\":\n    case \"svg\":\n    case \"path\":\n    case \"a\":\n    case \"g\":\n    case \"p\":\n    case \"li\":\n      break;\n    case \"img\":\n      listenToNonDelegatedEvent(\"error\", domElement);\n      listenToNonDelegatedEvent(\"load\", domElement);\n      var hasSrc = !1,\n        hasSrcSet = !1,\n        propKey;\n      for (propKey in props)\n        if (props.hasOwnProperty(propKey)) {\n          var propValue = props[propKey];\n          if (null != propValue)\n            switch (propKey) {\n              case \"src\":\n                hasSrc = !0;\n                break;\n              case \"srcSet\":\n                hasSrcSet = !0;\n                break;\n              case \"children\":\n              case \"dangerouslySetInnerHTML\":\n                throw Error(formatProdErrorMessage(137, tag));\n              default:\n                setProp(domElement, tag, propKey, propValue, props, null);\n            }\n        }\n      hasSrcSet &&\n        setProp(domElement, tag, \"srcSet\", props.srcSet, props, null);\n      hasSrc && setProp(domElement, tag, \"src\", props.src, props, null);\n      return;\n    case \"input\":\n      listenToNonDelegatedEvent(\"invalid\", domElement);\n      var defaultValue = (propKey = propValue = hasSrcSet = null),\n        checked = null,\n        defaultChecked = null;\n      for (hasSrc in props)\n        if (props.hasOwnProperty(hasSrc)) {\n          var propValue$188 = props[hasSrc];\n          if (null != propValue$188)\n            switch (hasSrc) {\n              case \"name\":\n                hasSrcSet = propValue$188;\n                break;\n              case \"type\":\n                propValue = propValue$188;\n                break;\n              case \"checked\":\n                checked = propValue$188;\n                break;\n              case \"defaultChecked\":\n                defaultChecked = propValue$188;\n                break;\n              case \"value\":\n                propKey = propValue$188;\n                break;\n              case \"defaultValue\":\n                defaultValue = propValue$188;\n                break;\n              case \"children\":\n              case \"dangerouslySetInnerHTML\":\n                if (null != propValue$188)\n                  throw Error(formatProdErrorMessage(137, tag));\n                break;\n              default:\n                setProp(domElement, tag, hasSrc, propValue$188, props, null);\n            }\n        }\n      initInput(\n        domElement,\n        propKey,\n        defaultValue,\n        checked,\n        defaultChecked,\n        propValue,\n        hasSrcSet,\n        !1\n      );\n      track(domElement);\n      return;\n    case \"select\":\n      listenToNonDelegatedEvent(\"invalid\", domElement);\n      hasSrc = propValue = propKey = null;\n      for (hasSrcSet in props)\n        if (\n          props.hasOwnProperty(hasSrcSet) &&\n          ((defaultValue = props[hasSrcSet]), null != defaultValue)\n        )\n          switch (hasSrcSet) {\n            case \"value\":\n              propKey = defaultValue;\n              break;\n            case \"defaultValue\":\n              propValue = defaultValue;\n              break;\n            case \"multiple\":\n              hasSrc = defaultValue;\n            default:\n              setProp(domElement, tag, hasSrcSet, defaultValue, props, null);\n          }\n      tag = propKey;\n      props = propValue;\n      domElement.multiple = !!hasSrc;\n      null != tag\n        ? updateOptions(domElement, !!hasSrc, tag, !1)\n        : null != props && updateOptions(domElement, !!hasSrc, props, !0);\n      return;\n    case \"textarea\":\n      listenToNonDelegatedEvent(\"invalid\", domElement);\n      propKey = hasSrcSet = hasSrc = null;\n      for (propValue in props)\n        if (\n          props.hasOwnProperty(propValue) &&\n          ((defaultValue = props[propValue]), null != defaultValue)\n        )\n          switch (propValue) {\n            case \"value\":\n              hasSrc = defaultValue;\n              break;\n            case \"defaultValue\":\n              hasSrcSet = defaultValue;\n              break;\n            case \"children\":\n              propKey = defaultValue;\n              break;\n            case \"dangerouslySetInnerHTML\":\n              if (null != defaultValue) throw Error(formatProdErrorMessage(91));\n              break;\n            default:\n              setProp(domElement, tag, propValue, defaultValue, props, null);\n          }\n      initTextarea(domElement, hasSrc, hasSrcSet, propKey);\n      track(domElement);\n      return;\n    case \"option\":\n      for (checked in props)\n        if (\n          props.hasOwnProperty(checked) &&\n          ((hasSrc = props[checked]), null != hasSrc)\n        )\n          switch (checked) {\n            case \"selected\":\n              domElement.selected =\n                hasSrc &&\n                \"function\" !== typeof hasSrc &&\n                \"symbol\" !== typeof hasSrc;\n              break;\n            default:\n              setProp(domElement, tag, checked, hasSrc, props, null);\n          }\n      return;\n    case \"dialog\":\n      listenToNonDelegatedEvent(\"beforetoggle\", domElement);\n      listenToNonDelegatedEvent(\"toggle\", domElement);\n      listenToNonDelegatedEvent(\"cancel\", domElement);\n      listenToNonDelegatedEvent(\"close\", domElement);\n      break;\n    case \"iframe\":\n    case \"object\":\n      listenToNonDelegatedEvent(\"load\", domElement);\n      break;\n    case \"video\":\n    case \"audio\":\n      for (hasSrc = 0; hasSrc < mediaEventTypes.length; hasSrc++)\n        listenToNonDelegatedEvent(mediaEventTypes[hasSrc], domElement);\n      break;\n    case \"image\":\n      listenToNonDelegatedEvent(\"error\", domElement);\n      listenToNonDelegatedEvent(\"load\", domElement);\n      break;\n    case \"details\":\n      listenToNonDelegatedEvent(\"toggle\", domElement);\n      break;\n    case \"embed\":\n    case \"source\":\n    case \"link\":\n      listenToNonDelegatedEvent(\"error\", domElement),\n        listenToNonDelegatedEvent(\"load\", domElement);\n    case \"area\":\n    case \"base\":\n    case \"br\":\n    case \"col\":\n    case \"hr\":\n    case \"keygen\":\n    case \"meta\":\n    case \"param\":\n    case \"track\":\n    case \"wbr\":\n    case \"menuitem\":\n      for (defaultChecked in props)\n        if (\n          props.hasOwnProperty(defaultChecked) &&\n          ((hasSrc = props[defaultChecked]), null != hasSrc)\n        )\n          switch (defaultChecked) {\n            case \"children\":\n            case \"dangerouslySetInnerHTML\":\n              throw Error(formatProdErrorMessage(137, tag));\n            default:\n              setProp(domElement, tag, defaultChecked, hasSrc, props, null);\n          }\n      return;\n    default:\n      if (isCustomElement(tag)) {\n        for (propValue$188 in props)\n          props.hasOwnProperty(propValue$188) &&\n            ((hasSrc = props[propValue$188]),\n            void 0 !== hasSrc &&\n              setPropOnCustomElement(\n                domElement,\n                tag,\n                propValue$188,\n                hasSrc,\n                props,\n                void 0\n              ));\n        return;\n      }\n  }\n  for (defaultValue in props)\n    props.hasOwnProperty(defaultValue) &&\n      ((hasSrc = props[defaultValue]),\n      null != hasSrc &&\n        setProp(domElement, tag, defaultValue, hasSrc, props, null));\n}\nfunction updateProperties(domElement, tag, lastProps, nextProps) {\n  switch (tag) {\n    case \"div\":\n    case \"span\":\n    case \"svg\":\n    case \"path\":\n    case \"a\":\n    case \"g\":\n    case \"p\":\n    case \"li\":\n      break;\n    case \"input\":\n      var name = null,\n        type = null,\n        value = null,\n        defaultValue = null,\n        lastDefaultValue = null,\n        checked = null,\n        defaultChecked = null;\n      for (propKey in lastProps) {\n        var lastProp = lastProps[propKey];\n        if (lastProps.hasOwnProperty(propKey) && null != lastProp)\n          switch (propKey) {\n            case \"checked\":\n              break;\n            case \"value\":\n              break;\n            case \"defaultValue\":\n              lastDefaultValue = lastProp;\n            default:\n              nextProps.hasOwnProperty(propKey) ||\n                setProp(domElement, tag, propKey, null, nextProps, lastProp);\n          }\n      }\n      for (var propKey$205 in nextProps) {\n        var propKey = nextProps[propKey$205];\n        lastProp = lastProps[propKey$205];\n        if (\n          nextProps.hasOwnProperty(propKey$205) &&\n          (null != propKey || null != lastProp)\n        )\n          switch (propKey$205) {\n            case \"type\":\n              type = propKey;\n              break;\n            case \"name\":\n              name = propKey;\n              break;\n            case \"checked\":\n              checked = propKey;\n              break;\n            case \"defaultChecked\":\n              defaultChecked = propKey;\n              break;\n            case \"value\":\n              value = propKey;\n              break;\n            case \"defaultValue\":\n              defaultValue = propKey;\n              break;\n            case \"children\":\n            case \"dangerouslySetInnerHTML\":\n              if (null != propKey)\n                throw Error(formatProdErrorMessage(137, tag));\n              break;\n            default:\n              propKey !== lastProp &&\n                setProp(\n                  domElement,\n                  tag,\n                  propKey$205,\n                  propKey,\n                  nextProps,\n                  lastProp\n                );\n          }\n      }\n      updateInput(\n        domElement,\n        value,\n        defaultValue,\n        lastDefaultValue,\n        checked,\n        defaultChecked,\n        type,\n        name\n      );\n      return;\n    case \"select\":\n      propKey = value = defaultValue = propKey$205 = null;\n      for (type in lastProps)\n        if (\n          ((lastDefaultValue = lastProps[type]),\n          lastProps.hasOwnProperty(type) && null != lastDefaultValue)\n        )\n          switch (type) {\n            case \"value\":\n              break;\n            case \"multiple\":\n              propKey = lastDefaultValue;\n            default:\n              nextProps.hasOwnProperty(type) ||\n                setProp(\n                  domElement,\n                  tag,\n                  type,\n                  null,\n                  nextProps,\n                  lastDefaultValue\n                );\n          }\n      for (name in nextProps)\n        if (\n          ((type = nextProps[name]),\n          (lastDefaultValue = lastProps[name]),\n          nextProps.hasOwnProperty(name) &&\n            (null != type || null != lastDefaultValue))\n        )\n          switch (name) {\n            case \"value\":\n              propKey$205 = type;\n              break;\n            case \"defaultValue\":\n              defaultValue = type;\n              break;\n            case \"multiple\":\n              value = type;\n            default:\n              type !== lastDefaultValue &&\n                setProp(\n                  domElement,\n                  tag,\n                  name,\n                  type,\n                  nextProps,\n                  lastDefaultValue\n                );\n          }\n      tag = defaultValue;\n      lastProps = value;\n      nextProps = propKey;\n      null != propKey$205\n        ? updateOptions(domElement, !!lastProps, propKey$205, !1)\n        : !!nextProps !== !!lastProps &&\n          (null != tag\n            ? updateOptions(domElement, !!lastProps, tag, !0)\n            : updateOptions(domElement, !!lastProps, lastProps ? [] : \"\", !1));\n      return;\n    case \"textarea\":\n      propKey = propKey$205 = null;\n      for (defaultValue in lastProps)\n        if (\n          ((name = lastProps[defaultValue]),\n          lastProps.hasOwnProperty(defaultValue) &&\n            null != name &&\n            !nextProps.hasOwnProperty(defaultValue))\n        )\n          switch (defaultValue) {\n            case \"value\":\n              break;\n            case \"children\":\n              break;\n            default:\n              setProp(domElement, tag, defaultValue, null, nextProps, name);\n          }\n      for (value in nextProps)\n        if (\n          ((name = nextProps[value]),\n          (type = lastProps[value]),\n          nextProps.hasOwnProperty(value) && (null != name || null != type))\n        )\n          switch (value) {\n            case \"value\":\n              propKey$205 = name;\n              break;\n            case \"defaultValue\":\n              propKey = name;\n              break;\n            case \"children\":\n              break;\n            case \"dangerouslySetInnerHTML\":\n              if (null != name) throw Error(formatProdErrorMessage(91));\n              break;\n            default:\n              name !== type &&\n                setProp(domElement, tag, value, name, nextProps, type);\n          }\n      updateTextarea(domElement, propKey$205, propKey);\n      return;\n    case \"option\":\n      for (var propKey$221 in lastProps)\n        if (\n          ((propKey$205 = lastProps[propKey$221]),\n          lastProps.hasOwnProperty(propKey$221) &&\n            null != propKey$205 &&\n            !nextProps.hasOwnProperty(propKey$221))\n        )\n          switch (propKey$221) {\n            case \"selected\":\n              domElement.selected = !1;\n              break;\n            default:\n              setProp(\n                domElement,\n                tag,\n                propKey$221,\n                null,\n                nextProps,\n                propKey$205\n              );\n          }\n      for (lastDefaultValue in nextProps)\n        if (\n          ((propKey$205 = nextProps[lastDefaultValue]),\n          (propKey = lastProps[lastDefaultValue]),\n          nextProps.hasOwnProperty(lastDefaultValue) &&\n            propKey$205 !== propKey &&\n            (null != propKey$205 || null != propKey))\n        )\n          switch (lastDefaultValue) {\n            case \"selected\":\n              domElement.selected =\n                propKey$205 &&\n                \"function\" !== typeof propKey$205 &&\n                \"symbol\" !== typeof propKey$205;\n              break;\n            default:\n              setProp(\n                domElement,\n                tag,\n                lastDefaultValue,\n                propKey$205,\n                nextProps,\n                propKey\n              );\n          }\n      return;\n    case \"img\":\n    case \"link\":\n    case \"area\":\n    case \"base\":\n    case \"br\":\n    case \"col\":\n    case \"embed\":\n    case \"hr\":\n    case \"keygen\":\n    case \"meta\":\n    case \"param\":\n    case \"source\":\n    case \"track\":\n    case \"wbr\":\n    case \"menuitem\":\n      for (var propKey$226 in lastProps)\n        (propKey$205 = lastProps[propKey$226]),\n          lastProps.hasOwnProperty(propKey$226) &&\n            null != propKey$205 &&\n            !nextProps.hasOwnProperty(propKey$226) &&\n            setProp(domElement, tag, propKey$226, null, nextProps, propKey$205);\n      for (checked in nextProps)\n        if (\n          ((propKey$205 = nextProps[checked]),\n          (propKey = lastProps[checked]),\n          nextProps.hasOwnProperty(checked) &&\n            propKey$205 !== propKey &&\n            (null != propKey$205 || null != propKey))\n        )\n          switch (checked) {\n            case \"children\":\n            case \"dangerouslySetInnerHTML\":\n              if (null != propKey$205)\n                throw Error(formatProdErrorMessage(137, tag));\n              break;\n            default:\n              setProp(\n                domElement,\n                tag,\n                checked,\n                propKey$205,\n                nextProps,\n                propKey\n              );\n          }\n      return;\n    default:\n      if (isCustomElement(tag)) {\n        for (var propKey$231 in lastProps)\n          (propKey$205 = lastProps[propKey$231]),\n            lastProps.hasOwnProperty(propKey$231) &&\n              void 0 !== propKey$205 &&\n              !nextProps.hasOwnProperty(propKey$231) &&\n              setPropOnCustomElement(\n                domElement,\n                tag,\n                propKey$231,\n                void 0,\n                nextProps,\n                propKey$205\n              );\n        for (defaultChecked in nextProps)\n          (propKey$205 = nextProps[defaultChecked]),\n            (propKey = lastProps[defaultChecked]),\n            !nextProps.hasOwnProperty(defaultChecked) ||\n              propKey$205 === propKey ||\n              (void 0 === propKey$205 && void 0 === propKey) ||\n              setPropOnCustomElement(\n                domElement,\n                tag,\n                defaultChecked,\n                propKey$205,\n                nextProps,\n                propKey\n              );\n        return;\n      }\n  }\n  for (var propKey$236 in lastProps)\n    (propKey$205 = lastProps[propKey$236]),\n      lastProps.hasOwnProperty(propKey$236) &&\n        null != propKey$205 &&\n        !nextProps.hasOwnProperty(propKey$236) &&\n        setProp(domElement, tag, propKey$236, null, nextProps, propKey$205);\n  for (lastProp in nextProps)\n    (propKey$205 = nextProps[lastProp]),\n      (propKey = lastProps[lastProp]),\n      !nextProps.hasOwnProperty(lastProp) ||\n        propKey$205 === propKey ||\n        (null == propKey$205 && null == propKey) ||\n        setProp(domElement, tag, lastProp, propKey$205, nextProps, propKey);\n}\nvar eventsEnabled = null,\n  selectionInformation = null;\nfunction getOwnerDocumentFromRootContainer(rootContainerElement) {\n  return 9 === rootContainerElement.nodeType\n    ? rootContainerElement\n    : rootContainerElement.ownerDocument;\n}\nfunction getOwnHostContext(namespaceURI) {\n  switch (namespaceURI) {\n    case \"http://www.w3.org/2000/svg\":\n      return 1;\n    case \"http://www.w3.org/1998/Math/MathML\":\n      return 2;\n    default:\n      return 0;\n  }\n}\nfunction getChildHostContextProd(parentNamespace, type) {\n  if (0 === parentNamespace)\n    switch (type) {\n      case \"svg\":\n        return 1;\n      case \"math\":\n        return 2;\n      default:\n        return 0;\n    }\n  return 1 === parentNamespace && \"foreignObject\" === type\n    ? 0\n    : parentNamespace;\n}\nfunction shouldSetTextContent(type, props) {\n  return (\n    \"textarea\" === type ||\n    \"noscript\" === type ||\n    \"string\" === typeof props.children ||\n    \"number\" === typeof props.children ||\n    \"bigint\" === typeof props.children ||\n    (\"object\" === typeof props.dangerouslySetInnerHTML &&\n      null !== props.dangerouslySetInnerHTML &&\n      null != props.dangerouslySetInnerHTML.__html)\n  );\n}\nvar currentPopstateTransitionEvent = null;\nfunction shouldAttemptEagerTransition() {\n  var event = window.event;\n  if (event && \"popstate\" === event.type) {\n    if (event === currentPopstateTransitionEvent) return !1;\n    currentPopstateTransitionEvent = event;\n    return !0;\n  }\n  currentPopstateTransitionEvent = null;\n  return !1;\n}\nvar scheduleTimeout = \"function\" === typeof setTimeout ? setTimeout : void 0,\n  cancelTimeout = \"function\" === typeof clearTimeout ? clearTimeout : void 0,\n  localPromise = \"function\" === typeof Promise ? Promise : void 0,\n  scheduleMicrotask =\n    \"function\" === typeof queueMicrotask\n      ? queueMicrotask\n      : \"undefined\" !== typeof localPromise\n        ? function (callback) {\n            return localPromise\n              .resolve(null)\n              .then(callback)\n              .catch(handleErrorInNextTick);\n          }\n        : scheduleTimeout;\nfunction handleErrorInNextTick(error) {\n  setTimeout(function () {\n    throw error;\n  });\n}\nfunction isSingletonScope(type) {\n  return \"head\" === type;\n}\nfunction clearSuspenseBoundary(parentInstance, suspenseInstance) {\n  var node = suspenseInstance,\n    possiblePreambleContribution = 0,\n    depth = 0;\n  do {\n    var nextNode = node.nextSibling;\n    parentInstance.removeChild(node);\n    if (nextNode && 8 === nextNode.nodeType)\n      if (((node = nextNode.data), \"/$\" === node)) {\n        if (\n          0 < possiblePreambleContribution &&\n          8 > possiblePreambleContribution\n        ) {\n          node = possiblePreambleContribution;\n          var ownerDocument = parentInstance.ownerDocument;\n          node & 1 && releaseSingletonInstance(ownerDocument.documentElement);\n          node & 2 && releaseSingletonInstance(ownerDocument.body);\n          if (node & 4)\n            for (\n              node = ownerDocument.head,\n                releaseSingletonInstance(node),\n                ownerDocument = node.firstChild;\n              ownerDocument;\n\n            ) {\n              var nextNode$jscomp$0 = ownerDocument.nextSibling,\n                nodeName = ownerDocument.nodeName;\n              ownerDocument[internalHoistableMarker] ||\n                \"SCRIPT\" === nodeName ||\n                \"STYLE\" === nodeName ||\n                (\"LINK\" === nodeName &&\n                  \"stylesheet\" === ownerDocument.rel.toLowerCase()) ||\n                node.removeChild(ownerDocument);\n              ownerDocument = nextNode$jscomp$0;\n            }\n        }\n        if (0 === depth) {\n          parentInstance.removeChild(nextNode);\n          retryIfBlockedOn(suspenseInstance);\n          return;\n        }\n        depth--;\n      } else\n        \"$\" === node || \"$?\" === node || \"$!\" === node\n          ? depth++\n          : (possiblePreambleContribution = node.charCodeAt(0) - 48);\n    else possiblePreambleContribution = 0;\n    node = nextNode;\n  } while (node);\n  retryIfBlockedOn(suspenseInstance);\n}\nfunction clearContainerSparingly(container) {\n  var nextNode = container.firstChild;\n  nextNode && 10 === nextNode.nodeType && (nextNode = nextNode.nextSibling);\n  for (; nextNode; ) {\n    var node = nextNode;\n    nextNode = nextNode.nextSibling;\n    switch (node.nodeName) {\n      case \"HTML\":\n      case \"HEAD\":\n      case \"BODY\":\n        clearContainerSparingly(node);\n        detachDeletedInstance(node);\n        continue;\n      case \"SCRIPT\":\n      case \"STYLE\":\n        continue;\n      case \"LINK\":\n        if (\"stylesheet\" === node.rel.toLowerCase()) continue;\n    }\n    container.removeChild(node);\n  }\n}\nfunction canHydrateInstance(instance, type, props, inRootOrSingleton) {\n  for (; 1 === instance.nodeType; ) {\n    var anyProps = props;\n    if (instance.nodeName.toLowerCase() !== type.toLowerCase()) {\n      if (\n        !inRootOrSingleton &&\n        (\"INPUT\" !== instance.nodeName || \"hidden\" !== instance.type)\n      )\n        break;\n    } else if (!inRootOrSingleton)\n      if (\"input\" === type && \"hidden\" === instance.type) {\n        var name = null == anyProps.name ? null : \"\" + anyProps.name;\n        if (\n          \"hidden\" === anyProps.type &&\n          instance.getAttribute(\"name\") === name\n        )\n          return instance;\n      } else return instance;\n    else if (!instance[internalHoistableMarker])\n      switch (type) {\n        case \"meta\":\n          if (!instance.hasAttribute(\"itemprop\")) break;\n          return instance;\n        case \"link\":\n          name = instance.getAttribute(\"rel\");\n          if (\"stylesheet\" === name && instance.hasAttribute(\"data-precedence\"))\n            break;\n          else if (\n            name !== anyProps.rel ||\n            instance.getAttribute(\"href\") !==\n              (null == anyProps.href || \"\" === anyProps.href\n                ? null\n                : anyProps.href) ||\n            instance.getAttribute(\"crossorigin\") !==\n              (null == anyProps.crossOrigin ? null : anyProps.crossOrigin) ||\n            instance.getAttribute(\"title\") !==\n              (null == anyProps.title ? null : anyProps.title)\n          )\n            break;\n          return instance;\n        case \"style\":\n          if (instance.hasAttribute(\"data-precedence\")) break;\n          return instance;\n        case \"script\":\n          name = instance.getAttribute(\"src\");\n          if (\n            (name !== (null == anyProps.src ? null : anyProps.src) ||\n              instance.getAttribute(\"type\") !==\n                (null == anyProps.type ? null : anyProps.type) ||\n              instance.getAttribute(\"crossorigin\") !==\n                (null == anyProps.crossOrigin ? null : anyProps.crossOrigin)) &&\n            name &&\n            instance.hasAttribute(\"async\") &&\n            !instance.hasAttribute(\"itemprop\")\n          )\n            break;\n          return instance;\n        default:\n          return instance;\n      }\n    instance = getNextHydratable(instance.nextSibling);\n    if (null === instance) break;\n  }\n  return null;\n}\nfunction canHydrateTextInstance(instance, text, inRootOrSingleton) {\n  if (\"\" === text) return null;\n  for (; 3 !== instance.nodeType; ) {\n    if (\n      (1 !== instance.nodeType ||\n        \"INPUT\" !== instance.nodeName ||\n        \"hidden\" !== instance.type) &&\n      !inRootOrSingleton\n    )\n      return null;\n    instance = getNextHydratable(instance.nextSibling);\n    if (null === instance) return null;\n  }\n  return instance;\n}\nfunction isSuspenseInstanceFallback(instance) {\n  return (\n    \"$!\" === instance.data ||\n    (\"$?\" === instance.data && \"complete\" === instance.ownerDocument.readyState)\n  );\n}\nfunction registerSuspenseInstanceRetry(instance, callback) {\n  var ownerDocument = instance.ownerDocument;\n  if (\"$?\" !== instance.data || \"complete\" === ownerDocument.readyState)\n    callback();\n  else {\n    var listener = function () {\n      callback();\n      ownerDocument.removeEventListener(\"DOMContentLoaded\", listener);\n    };\n    ownerDocument.addEventListener(\"DOMContentLoaded\", listener);\n    instance._reactRetry = listener;\n  }\n}\nfunction getNextHydratable(node) {\n  for (; null != node; node = node.nextSibling) {\n    var nodeType = node.nodeType;\n    if (1 === nodeType || 3 === nodeType) break;\n    if (8 === nodeType) {\n      nodeType = node.data;\n      if (\n        \"$\" === nodeType ||\n        \"$!\" === nodeType ||\n        \"$?\" === nodeType ||\n        \"F!\" === nodeType ||\n        \"F\" === nodeType\n      )\n        break;\n      if (\"/$\" === nodeType) return null;\n    }\n  }\n  return node;\n}\nvar previousHydratableOnEnteringScopedSingleton = null;\nfunction getParentSuspenseInstance(targetInstance) {\n  targetInstance = targetInstance.previousSibling;\n  for (var depth = 0; targetInstance; ) {\n    if (8 === targetInstance.nodeType) {\n      var data = targetInstance.data;\n      if (\"$\" === data || \"$!\" === data || \"$?\" === data) {\n        if (0 === depth) return targetInstance;\n        depth--;\n      } else \"/$\" === data && depth++;\n    }\n    targetInstance = targetInstance.previousSibling;\n  }\n  return null;\n}\nfunction resolveSingletonInstance(type, props, rootContainerInstance) {\n  props = getOwnerDocumentFromRootContainer(rootContainerInstance);\n  switch (type) {\n    case \"html\":\n      type = props.documentElement;\n      if (!type) throw Error(formatProdErrorMessage(452));\n      return type;\n    case \"head\":\n      type = props.head;\n      if (!type) throw Error(formatProdErrorMessage(453));\n      return type;\n    case \"body\":\n      type = props.body;\n      if (!type) throw Error(formatProdErrorMessage(454));\n      return type;\n    default:\n      throw Error(formatProdErrorMessage(451));\n  }\n}\nfunction releaseSingletonInstance(instance) {\n  for (var attributes = instance.attributes; attributes.length; )\n    instance.removeAttributeNode(attributes[0]);\n  detachDeletedInstance(instance);\n}\nvar preloadPropsMap = new Map(),\n  preconnectsSet = new Set();\nfunction getHoistableRoot(container) {\n  return \"function\" === typeof container.getRootNode\n    ? container.getRootNode()\n    : 9 === container.nodeType\n      ? container\n      : container.ownerDocument;\n}\nvar previousDispatcher = ReactDOMSharedInternals.d;\nReactDOMSharedInternals.d = {\n  f: flushSyncWork,\n  r: requestFormReset,\n  D: prefetchDNS,\n  C: preconnect,\n  L: preload,\n  m: preloadModule,\n  X: preinitScript,\n  S: preinitStyle,\n  M: preinitModuleScript\n};\nfunction flushSyncWork() {\n  var previousWasRendering = previousDispatcher.f(),\n    wasRendering = flushSyncWork$1();\n  return previousWasRendering || wasRendering;\n}\nfunction requestFormReset(form) {\n  var formInst = getInstanceFromNode(form);\n  null !== formInst && 5 === formInst.tag && \"form\" === formInst.type\n    ? requestFormReset$1(formInst)\n    : previousDispatcher.r(form);\n}\nvar globalDocument = \"undefined\" === typeof document ? null : document;\nfunction preconnectAs(rel, href, crossOrigin) {\n  var ownerDocument = globalDocument;\n  if (ownerDocument && \"string\" === typeof href && href) {\n    var limitedEscapedHref =\n      escapeSelectorAttributeValueInsideDoubleQuotes(href);\n    limitedEscapedHref =\n      'link[rel=\"' + rel + '\"][href=\"' + limitedEscapedHref + '\"]';\n    \"string\" === typeof crossOrigin &&\n      (limitedEscapedHref += '[crossorigin=\"' + crossOrigin + '\"]');\n    preconnectsSet.has(limitedEscapedHref) ||\n      (preconnectsSet.add(limitedEscapedHref),\n      (rel = { rel: rel, crossOrigin: crossOrigin, href: href }),\n      null === ownerDocument.querySelector(limitedEscapedHref) &&\n        ((href = ownerDocument.createElement(\"link\")),\n        setInitialProperties(href, \"link\", rel),\n        markNodeAsHoistable(href),\n        ownerDocument.head.appendChild(href)));\n  }\n}\nfunction prefetchDNS(href) {\n  previousDispatcher.D(href);\n  preconnectAs(\"dns-prefetch\", href, null);\n}\nfunction preconnect(href, crossOrigin) {\n  previousDispatcher.C(href, crossOrigin);\n  preconnectAs(\"preconnect\", href, crossOrigin);\n}\nfunction preload(href, as, options) {\n  previousDispatcher.L(href, as, options);\n  var ownerDocument = globalDocument;\n  if (ownerDocument && href && as) {\n    var preloadSelector =\n      'link[rel=\"preload\"][as=\"' +\n      escapeSelectorAttributeValueInsideDoubleQuotes(as) +\n      '\"]';\n    \"image\" === as\n      ? options && options.imageSrcSet\n        ? ((preloadSelector +=\n            '[imagesrcset=\"' +\n            escapeSelectorAttributeValueInsideDoubleQuotes(\n              options.imageSrcSet\n            ) +\n            '\"]'),\n          \"string\" === typeof options.imageSizes &&\n            (preloadSelector +=\n              '[imagesizes=\"' +\n              escapeSelectorAttributeValueInsideDoubleQuotes(\n                options.imageSizes\n              ) +\n              '\"]'))\n        : (preloadSelector +=\n            '[href=\"' +\n            escapeSelectorAttributeValueInsideDoubleQuotes(href) +\n            '\"]')\n      : (preloadSelector +=\n          '[href=\"' +\n          escapeSelectorAttributeValueInsideDoubleQuotes(href) +\n          '\"]');\n    var key = preloadSelector;\n    switch (as) {\n      case \"style\":\n        key = getStyleKey(href);\n        break;\n      case \"script\":\n        key = getScriptKey(href);\n    }\n    preloadPropsMap.has(key) ||\n      ((href = assign(\n        {\n          rel: \"preload\",\n          href:\n            \"image\" === as && options && options.imageSrcSet ? void 0 : href,\n          as: as\n        },\n        options\n      )),\n      preloadPropsMap.set(key, href),\n      null !== ownerDocument.querySelector(preloadSelector) ||\n        (\"style\" === as &&\n          ownerDocument.querySelector(getStylesheetSelectorFromKey(key))) ||\n        (\"script\" === as &&\n          ownerDocument.querySelector(getScriptSelectorFromKey(key))) ||\n        ((as = ownerDocument.createElement(\"link\")),\n        setInitialProperties(as, \"link\", href),\n        markNodeAsHoistable(as),\n        ownerDocument.head.appendChild(as)));\n  }\n}\nfunction preloadModule(href, options) {\n  previousDispatcher.m(href, options);\n  var ownerDocument = globalDocument;\n  if (ownerDocument && href) {\n    var as = options && \"string\" === typeof options.as ? options.as : \"script\",\n      preloadSelector =\n        'link[rel=\"modulepreload\"][as=\"' +\n        escapeSelectorAttributeValueInsideDoubleQuotes(as) +\n        '\"][href=\"' +\n        escapeSelectorAttributeValueInsideDoubleQuotes(href) +\n        '\"]',\n      key = preloadSelector;\n    switch (as) {\n      case \"audioworklet\":\n      case \"paintworklet\":\n      case \"serviceworker\":\n      case \"sharedworker\":\n      case \"worker\":\n      case \"script\":\n        key = getScriptKey(href);\n    }\n    if (\n      !preloadPropsMap.has(key) &&\n      ((href = assign({ rel: \"modulepreload\", href: href }, options)),\n      preloadPropsMap.set(key, href),\n      null === ownerDocument.querySelector(preloadSelector))\n    ) {\n      switch (as) {\n        case \"audioworklet\":\n        case \"paintworklet\":\n        case \"serviceworker\":\n        case \"sharedworker\":\n        case \"worker\":\n        case \"script\":\n          if (ownerDocument.querySelector(getScriptSelectorFromKey(key)))\n            return;\n      }\n      as = ownerDocument.createElement(\"link\");\n      setInitialProperties(as, \"link\", href);\n      markNodeAsHoistable(as);\n      ownerDocument.head.appendChild(as);\n    }\n  }\n}\nfunction preinitStyle(href, precedence, options) {\n  previousDispatcher.S(href, precedence, options);\n  var ownerDocument = globalDocument;\n  if (ownerDocument && href) {\n    var styles = getResourcesFromRoot(ownerDocument).hoistableStyles,\n      key = getStyleKey(href);\n    precedence = precedence || \"default\";\n    var resource = styles.get(key);\n    if (!resource) {\n      var state = { loading: 0, preload: null };\n      if (\n        (resource = ownerDocument.querySelector(\n          getStylesheetSelectorFromKey(key)\n        ))\n      )\n        state.loading = 5;\n      else {\n        href = assign(\n          { rel: \"stylesheet\", href: href, \"data-precedence\": precedence },\n          options\n        );\n        (options = preloadPropsMap.get(key)) &&\n          adoptPreloadPropsForStylesheet(href, options);\n        var link = (resource = ownerDocument.createElement(\"link\"));\n        markNodeAsHoistable(link);\n        setInitialProperties(link, \"link\", href);\n        link._p = new Promise(function (resolve, reject) {\n          link.onload = resolve;\n          link.onerror = reject;\n        });\n        link.addEventListener(\"load\", function () {\n          state.loading |= 1;\n        });\n        link.addEventListener(\"error\", function () {\n          state.loading |= 2;\n        });\n        state.loading |= 4;\n        insertStylesheet(resource, precedence, ownerDocument);\n      }\n      resource = {\n        type: \"stylesheet\",\n        instance: resource,\n        count: 1,\n        state: state\n      };\n      styles.set(key, resource);\n    }\n  }\n}\nfunction preinitScript(src, options) {\n  previousDispatcher.X(src, options);\n  var ownerDocument = globalDocument;\n  if (ownerDocument && src) {\n    var scripts = getResourcesFromRoot(ownerDocument).hoistableScripts,\n      key = getScriptKey(src),\n      resource = scripts.get(key);\n    resource ||\n      ((resource = ownerDocument.querySelector(getScriptSelectorFromKey(key))),\n      resource ||\n        ((src = assign({ src: src, async: !0 }, options)),\n        (options = preloadPropsMap.get(key)) &&\n          adoptPreloadPropsForScript(src, options),\n        (resource = ownerDocument.createElement(\"script\")),\n        markNodeAsHoistable(resource),\n        setInitialProperties(resource, \"link\", src),\n        ownerDocument.head.appendChild(resource)),\n      (resource = {\n        type: \"script\",\n        instance: resource,\n        count: 1,\n        state: null\n      }),\n      scripts.set(key, resource));\n  }\n}\nfunction preinitModuleScript(src, options) {\n  previousDispatcher.M(src, options);\n  var ownerDocument = globalDocument;\n  if (ownerDocument && src) {\n    var scripts = getResourcesFromRoot(ownerDocument).hoistableScripts,\n      key = getScriptKey(src),\n      resource = scripts.get(key);\n    resource ||\n      ((resource = ownerDocument.querySelector(getScriptSelectorFromKey(key))),\n      resource ||\n        ((src = assign({ src: src, async: !0, type: \"module\" }, options)),\n        (options = preloadPropsMap.get(key)) &&\n          adoptPreloadPropsForScript(src, options),\n        (resource = ownerDocument.createElement(\"script\")),\n        markNodeAsHoistable(resource),\n        setInitialProperties(resource, \"link\", src),\n        ownerDocument.head.appendChild(resource)),\n      (resource = {\n        type: \"script\",\n        instance: resource,\n        count: 1,\n        state: null\n      }),\n      scripts.set(key, resource));\n  }\n}\nfunction getResource(type, currentProps, pendingProps, currentResource) {\n  var JSCompiler_inline_result = (JSCompiler_inline_result =\n    rootInstanceStackCursor.current)\n    ? getHoistableRoot(JSCompiler_inline_result)\n    : null;\n  if (!JSCompiler_inline_result) throw Error(formatProdErrorMessage(446));\n  switch (type) {\n    case \"meta\":\n    case \"title\":\n      return null;\n    case \"style\":\n      return \"string\" === typeof pendingProps.precedence &&\n        \"string\" === typeof pendingProps.href\n        ? ((currentProps = getStyleKey(pendingProps.href)),\n          (pendingProps = getResourcesFromRoot(\n            JSCompiler_inline_result\n          ).hoistableStyles),\n          (currentResource = pendingProps.get(currentProps)),\n          currentResource ||\n            ((currentResource = {\n              type: \"style\",\n              instance: null,\n              count: 0,\n              state: null\n            }),\n            pendingProps.set(currentProps, currentResource)),\n          currentResource)\n        : { type: \"void\", instance: null, count: 0, state: null };\n    case \"link\":\n      if (\n        \"stylesheet\" === pendingProps.rel &&\n        \"string\" === typeof pendingProps.href &&\n        \"string\" === typeof pendingProps.precedence\n      ) {\n        type = getStyleKey(pendingProps.href);\n        var styles$244 = getResourcesFromRoot(\n            JSCompiler_inline_result\n          ).hoistableStyles,\n          resource$245 = styles$244.get(type);\n        resource$245 ||\n          ((JSCompiler_inline_result =\n            JSCompiler_inline_result.ownerDocument || JSCompiler_inline_result),\n          (resource$245 = {\n            type: \"stylesheet\",\n            instance: null,\n            count: 0,\n            state: { loading: 0, preload: null }\n          }),\n          styles$244.set(type, resource$245),\n          (styles$244 = JSCompiler_inline_result.querySelector(\n            getStylesheetSelectorFromKey(type)\n          )) &&\n            !styles$244._p &&\n            ((resource$245.instance = styles$244),\n            (resource$245.state.loading = 5)),\n          preloadPropsMap.has(type) ||\n            ((pendingProps = {\n              rel: \"preload\",\n              as: \"style\",\n              href: pendingProps.href,\n              crossOrigin: pendingProps.crossOrigin,\n              integrity: pendingProps.integrity,\n              media: pendingProps.media,\n              hrefLang: pendingProps.hrefLang,\n              referrerPolicy: pendingProps.referrerPolicy\n            }),\n            preloadPropsMap.set(type, pendingProps),\n            styles$244 ||\n              preloadStylesheet(\n                JSCompiler_inline_result,\n                type,\n                pendingProps,\n                resource$245.state\n              )));\n        if (currentProps && null === currentResource)\n          throw Error(formatProdErrorMessage(528, \"\"));\n        return resource$245;\n      }\n      if (currentProps && null !== currentResource)\n        throw Error(formatProdErrorMessage(529, \"\"));\n      return null;\n    case \"script\":\n      return (\n        (currentProps = pendingProps.async),\n        (pendingProps = pendingProps.src),\n        \"string\" === typeof pendingProps &&\n        currentProps &&\n        \"function\" !== typeof currentProps &&\n        \"symbol\" !== typeof currentProps\n          ? ((currentProps = getScriptKey(pendingProps)),\n            (pendingProps = getResourcesFromRoot(\n              JSCompiler_inline_result\n            ).hoistableScripts),\n            (currentResource = pendingProps.get(currentProps)),\n            currentResource ||\n              ((currentResource = {\n                type: \"script\",\n                instance: null,\n                count: 0,\n                state: null\n              }),\n              pendingProps.set(currentProps, currentResource)),\n            currentResource)\n          : { type: \"void\", instance: null, count: 0, state: null }\n      );\n    default:\n      throw Error(formatProdErrorMessage(444, type));\n  }\n}\nfunction getStyleKey(href) {\n  return 'href=\"' + escapeSelectorAttributeValueInsideDoubleQuotes(href) + '\"';\n}\nfunction getStylesheetSelectorFromKey(key) {\n  return 'link[rel=\"stylesheet\"][' + key + \"]\";\n}\nfunction stylesheetPropsFromRawProps(rawProps) {\n  return assign({}, rawProps, {\n    \"data-precedence\": rawProps.precedence,\n    precedence: null\n  });\n}\nfunction preloadStylesheet(ownerDocument, key, preloadProps, state) {\n  ownerDocument.querySelector('link[rel=\"preload\"][as=\"style\"][' + key + \"]\")\n    ? (state.loading = 1)\n    : ((key = ownerDocument.createElement(\"link\")),\n      (state.preload = key),\n      key.addEventListener(\"load\", function () {\n        return (state.loading |= 1);\n      }),\n      key.addEventListener(\"error\", function () {\n        return (state.loading |= 2);\n      }),\n      setInitialProperties(key, \"link\", preloadProps),\n      markNodeAsHoistable(key),\n      ownerDocument.head.appendChild(key));\n}\nfunction getScriptKey(src) {\n  return '[src=\"' + escapeSelectorAttributeValueInsideDoubleQuotes(src) + '\"]';\n}\nfunction getScriptSelectorFromKey(key) {\n  return \"script[async]\" + key;\n}\nfunction acquireResource(hoistableRoot, resource, props) {\n  resource.count++;\n  if (null === resource.instance)\n    switch (resource.type) {\n      case \"style\":\n        var instance = hoistableRoot.querySelector(\n          'style[data-href~=\"' +\n            escapeSelectorAttributeValueInsideDoubleQuotes(props.href) +\n            '\"]'\n        );\n        if (instance)\n          return (\n            (resource.instance = instance),\n            markNodeAsHoistable(instance),\n            instance\n          );\n        var styleProps = assign({}, props, {\n          \"data-href\": props.href,\n          \"data-precedence\": props.precedence,\n          href: null,\n          precedence: null\n        });\n        instance = (hoistableRoot.ownerDocument || hoistableRoot).createElement(\n          \"style\"\n        );\n        markNodeAsHoistable(instance);\n        setInitialProperties(instance, \"style\", styleProps);\n        insertStylesheet(instance, props.precedence, hoistableRoot);\n        return (resource.instance = instance);\n      case \"stylesheet\":\n        styleProps = getStyleKey(props.href);\n        var instance$250 = hoistableRoot.querySelector(\n          getStylesheetSelectorFromKey(styleProps)\n        );\n        if (instance$250)\n          return (\n            (resource.state.loading |= 4),\n            (resource.instance = instance$250),\n            markNodeAsHoistable(instance$250),\n            instance$250\n          );\n        instance = stylesheetPropsFromRawProps(props);\n        (styleProps = preloadPropsMap.get(styleProps)) &&\n          adoptPreloadPropsForStylesheet(instance, styleProps);\n        instance$250 = (\n          hoistableRoot.ownerDocument || hoistableRoot\n        ).createElement(\"link\");\n        markNodeAsHoistable(instance$250);\n        var linkInstance = instance$250;\n        linkInstance._p = new Promise(function (resolve, reject) {\n          linkInstance.onload = resolve;\n          linkInstance.onerror = reject;\n        });\n        setInitialProperties(instance$250, \"link\", instance);\n        resource.state.loading |= 4;\n        insertStylesheet(instance$250, props.precedence, hoistableRoot);\n        return (resource.instance = instance$250);\n      case \"script\":\n        instance$250 = getScriptKey(props.src);\n        if (\n          (styleProps = hoistableRoot.querySelector(\n            getScriptSelectorFromKey(instance$250)\n          ))\n        )\n          return (\n            (resource.instance = styleProps),\n            markNodeAsHoistable(styleProps),\n            styleProps\n          );\n        instance = props;\n        if ((styleProps = preloadPropsMap.get(instance$250)))\n          (instance = assign({}, props)),\n            adoptPreloadPropsForScript(instance, styleProps);\n        hoistableRoot = hoistableRoot.ownerDocument || hoistableRoot;\n        styleProps = hoistableRoot.createElement(\"script\");\n        markNodeAsHoistable(styleProps);\n        setInitialProperties(styleProps, \"link\", instance);\n        hoistableRoot.head.appendChild(styleProps);\n        return (resource.instance = styleProps);\n      case \"void\":\n        return null;\n      default:\n        throw Error(formatProdErrorMessage(443, resource.type));\n    }\n  else\n    \"stylesheet\" === resource.type &&\n      0 === (resource.state.loading & 4) &&\n      ((instance = resource.instance),\n      (resource.state.loading |= 4),\n      insertStylesheet(instance, props.precedence, hoistableRoot));\n  return resource.instance;\n}\nfunction insertStylesheet(instance, precedence, root) {\n  for (\n    var nodes = root.querySelectorAll(\n        'link[rel=\"stylesheet\"][data-precedence],style[data-precedence]'\n      ),\n      last = nodes.length ? nodes[nodes.length - 1] : null,\n      prior = last,\n      i = 0;\n    i < nodes.length;\n    i++\n  ) {\n    var node = nodes[i];\n    if (node.dataset.precedence === precedence) prior = node;\n    else if (prior !== last) break;\n  }\n  prior\n    ? prior.parentNode.insertBefore(instance, prior.nextSibling)\n    : ((precedence = 9 === root.nodeType ? root.head : root),\n      precedence.insertBefore(instance, precedence.firstChild));\n}\nfunction adoptPreloadPropsForStylesheet(stylesheetProps, preloadProps) {\n  null == stylesheetProps.crossOrigin &&\n    (stylesheetProps.crossOrigin = preloadProps.crossOrigin);\n  null == stylesheetProps.referrerPolicy &&\n    (stylesheetProps.referrerPolicy = preloadProps.referrerPolicy);\n  null == stylesheetProps.title && (stylesheetProps.title = preloadProps.title);\n}\nfunction adoptPreloadPropsForScript(scriptProps, preloadProps) {\n  null == scriptProps.crossOrigin &&\n    (scriptProps.crossOrigin = preloadProps.crossOrigin);\n  null == scriptProps.referrerPolicy &&\n    (scriptProps.referrerPolicy = preloadProps.referrerPolicy);\n  null == scriptProps.integrity &&\n    (scriptProps.integrity = preloadProps.integrity);\n}\nvar tagCaches = null;\nfunction getHydratableHoistableCache(type, keyAttribute, ownerDocument) {\n  if (null === tagCaches) {\n    var cache = new Map();\n    var caches = (tagCaches = new Map());\n    caches.set(ownerDocument, cache);\n  } else\n    (caches = tagCaches),\n      (cache = caches.get(ownerDocument)),\n      cache || ((cache = new Map()), caches.set(ownerDocument, cache));\n  if (cache.has(type)) return cache;\n  cache.set(type, null);\n  ownerDocument = ownerDocument.getElementsByTagName(type);\n  for (caches = 0; caches < ownerDocument.length; caches++) {\n    var node = ownerDocument[caches];\n    if (\n      !(\n        node[internalHoistableMarker] ||\n        node[internalInstanceKey] ||\n        (\"link\" === type && \"stylesheet\" === node.getAttribute(\"rel\"))\n      ) &&\n      \"http://www.w3.org/2000/svg\" !== node.namespaceURI\n    ) {\n      var nodeKey = node.getAttribute(keyAttribute) || \"\";\n      nodeKey = type + nodeKey;\n      var existing = cache.get(nodeKey);\n      existing ? existing.push(node) : cache.set(nodeKey, [node]);\n    }\n  }\n  return cache;\n}\nfunction mountHoistable(hoistableRoot, type, instance) {\n  hoistableRoot = hoistableRoot.ownerDocument || hoistableRoot;\n  hoistableRoot.head.insertBefore(\n    instance,\n    \"title\" === type ? hoistableRoot.querySelector(\"head > title\") : null\n  );\n}\nfunction isHostHoistableType(type, props, hostContext) {\n  if (1 === hostContext || null != props.itemProp) return !1;\n  switch (type) {\n    case \"meta\":\n    case \"title\":\n      return !0;\n    case \"style\":\n      if (\n        \"string\" !== typeof props.precedence ||\n        \"string\" !== typeof props.href ||\n        \"\" === props.href\n      )\n        break;\n      return !0;\n    case \"link\":\n      if (\n        \"string\" !== typeof props.rel ||\n        \"string\" !== typeof props.href ||\n        \"\" === props.href ||\n        props.onLoad ||\n        props.onError\n      )\n        break;\n      switch (props.rel) {\n        case \"stylesheet\":\n          return (\n            (type = props.disabled),\n            \"string\" === typeof props.precedence && null == type\n          );\n        default:\n          return !0;\n      }\n    case \"script\":\n      if (\n        props.async &&\n        \"function\" !== typeof props.async &&\n        \"symbol\" !== typeof props.async &&\n        !props.onLoad &&\n        !props.onError &&\n        props.src &&\n        \"string\" === typeof props.src\n      )\n        return !0;\n  }\n  return !1;\n}\nfunction preloadResource(resource) {\n  return \"stylesheet\" === resource.type && 0 === (resource.state.loading & 3)\n    ? !1\n    : !0;\n}\nvar suspendedState = null;\nfunction noop() {}\nfunction suspendResource(hoistableRoot, resource, props) {\n  if (null === suspendedState) throw Error(formatProdErrorMessage(475));\n  var state = suspendedState;\n  if (\n    \"stylesheet\" === resource.type &&\n    (\"string\" !== typeof props.media ||\n      !1 !== matchMedia(props.media).matches) &&\n    0 === (resource.state.loading & 4)\n  ) {\n    if (null === resource.instance) {\n      var key = getStyleKey(props.href),\n        instance = hoistableRoot.querySelector(\n          getStylesheetSelectorFromKey(key)\n        );\n      if (instance) {\n        hoistableRoot = instance._p;\n        null !== hoistableRoot &&\n          \"object\" === typeof hoistableRoot &&\n          \"function\" === typeof hoistableRoot.then &&\n          (state.count++,\n          (state = onUnsuspend.bind(state)),\n          hoistableRoot.then(state, state));\n        resource.state.loading |= 4;\n        resource.instance = instance;\n        markNodeAsHoistable(instance);\n        return;\n      }\n      instance = hoistableRoot.ownerDocument || hoistableRoot;\n      props = stylesheetPropsFromRawProps(props);\n      (key = preloadPropsMap.get(key)) &&\n        adoptPreloadPropsForStylesheet(props, key);\n      instance = instance.createElement(\"link\");\n      markNodeAsHoistable(instance);\n      var linkInstance = instance;\n      linkInstance._p = new Promise(function (resolve, reject) {\n        linkInstance.onload = resolve;\n        linkInstance.onerror = reject;\n      });\n      setInitialProperties(instance, \"link\", props);\n      resource.instance = instance;\n    }\n    null === state.stylesheets && (state.stylesheets = new Map());\n    state.stylesheets.set(resource, hoistableRoot);\n    (hoistableRoot = resource.state.preload) &&\n      0 === (resource.state.loading & 3) &&\n      (state.count++,\n      (resource = onUnsuspend.bind(state)),\n      hoistableRoot.addEventListener(\"load\", resource),\n      hoistableRoot.addEventListener(\"error\", resource));\n  }\n}\nfunction waitForCommitToBeReady() {\n  if (null === suspendedState) throw Error(formatProdErrorMessage(475));\n  var state = suspendedState;\n  state.stylesheets &&\n    0 === state.count &&\n    insertSuspendedStylesheets(state, state.stylesheets);\n  return 0 < state.count\n    ? function (commit) {\n        var stylesheetTimer = setTimeout(function () {\n          state.stylesheets &&\n            insertSuspendedStylesheets(state, state.stylesheets);\n          if (state.unsuspend) {\n            var unsuspend = state.unsuspend;\n            state.unsuspend = null;\n            unsuspend();\n          }\n        }, 6e4);\n        state.unsuspend = commit;\n        return function () {\n          state.unsuspend = null;\n          clearTimeout(stylesheetTimer);\n        };\n      }\n    : null;\n}\nfunction onUnsuspend() {\n  this.count--;\n  if (0 === this.count)\n    if (this.stylesheets) insertSuspendedStylesheets(this, this.stylesheets);\n    else if (this.unsuspend) {\n      var unsuspend = this.unsuspend;\n      this.unsuspend = null;\n      unsuspend();\n    }\n}\nvar precedencesByRoot = null;\nfunction insertSuspendedStylesheets(state, resources) {\n  state.stylesheets = null;\n  null !== state.unsuspend &&\n    (state.count++,\n    (precedencesByRoot = new Map()),\n    resources.forEach(insertStylesheetIntoRoot, state),\n    (precedencesByRoot = null),\n    onUnsuspend.call(state));\n}\nfunction insertStylesheetIntoRoot(root, resource) {\n  if (!(resource.state.loading & 4)) {\n    var precedences = precedencesByRoot.get(root);\n    if (precedences) var last = precedences.get(null);\n    else {\n      precedences = new Map();\n      precedencesByRoot.set(root, precedences);\n      for (\n        var nodes = root.querySelectorAll(\n            \"link[data-precedence],style[data-precedence]\"\n          ),\n          i = 0;\n        i < nodes.length;\n        i++\n      ) {\n        var node = nodes[i];\n        if (\n          \"LINK\" === node.nodeName ||\n          \"not all\" !== node.getAttribute(\"media\")\n        )\n          precedences.set(node.dataset.precedence, node), (last = node);\n      }\n      last && precedences.set(null, last);\n    }\n    nodes = resource.instance;\n    node = nodes.getAttribute(\"data-precedence\");\n    i = precedences.get(node) || last;\n    i === last && precedences.set(null, nodes);\n    precedences.set(node, nodes);\n    this.count++;\n    last = onUnsuspend.bind(this);\n    nodes.addEventListener(\"load\", last);\n    nodes.addEventListener(\"error\", last);\n    i\n      ? i.parentNode.insertBefore(nodes, i.nextSibling)\n      : ((root = 9 === root.nodeType ? root.head : root),\n        root.insertBefore(nodes, root.firstChild));\n    resource.state.loading |= 4;\n  }\n}\nvar HostTransitionContext = {\n  $$typeof: REACT_CONTEXT_TYPE,\n  Provider: null,\n  Consumer: null,\n  _currentValue: sharedNotPendingObject,\n  _currentValue2: sharedNotPendingObject,\n  _threadCount: 0\n};\nfunction FiberRootNode(\n  containerInfo,\n  tag,\n  hydrate,\n  identifierPrefix,\n  onUncaughtError,\n  onCaughtError,\n  onRecoverableError,\n  formState\n) {\n  this.tag = 1;\n  this.containerInfo = containerInfo;\n  this.pingCache = this.current = this.pendingChildren = null;\n  this.timeoutHandle = -1;\n  this.callbackNode =\n    this.next =\n    this.pendingContext =\n    this.context =\n    this.cancelPendingCommit =\n      null;\n  this.callbackPriority = 0;\n  this.expirationTimes = createLaneMap(-1);\n  this.entangledLanes =\n    this.shellSuspendCounter =\n    this.errorRecoveryDisabledLanes =\n    this.expiredLanes =\n    this.warmLanes =\n    this.pingedLanes =\n    this.suspendedLanes =\n    this.pendingLanes =\n      0;\n  this.entanglements = createLaneMap(0);\n  this.hiddenUpdates = createLaneMap(null);\n  this.identifierPrefix = identifierPrefix;\n  this.onUncaughtError = onUncaughtError;\n  this.onCaughtError = onCaughtError;\n  this.onRecoverableError = onRecoverableError;\n  this.pooledCache = null;\n  this.pooledCacheLanes = 0;\n  this.formState = formState;\n  this.incompleteTransitions = new Map();\n}\nfunction createFiberRoot(\n  containerInfo,\n  tag,\n  hydrate,\n  initialChildren,\n  hydrationCallbacks,\n  isStrictMode,\n  identifierPrefix,\n  onUncaughtError,\n  onCaughtError,\n  onRecoverableError,\n  transitionCallbacks,\n  formState\n) {\n  containerInfo = new FiberRootNode(\n    containerInfo,\n    tag,\n    hydrate,\n    identifierPrefix,\n    onUncaughtError,\n    onCaughtError,\n    onRecoverableError,\n    formState\n  );\n  tag = 1;\n  !0 === isStrictMode && (tag |= 24);\n  isStrictMode = createFiberImplClass(3, null, null, tag);\n  containerInfo.current = isStrictMode;\n  isStrictMode.stateNode = containerInfo;\n  tag = createCache();\n  tag.refCount++;\n  containerInfo.pooledCache = tag;\n  tag.refCount++;\n  isStrictMode.memoizedState = {\n    element: initialChildren,\n    isDehydrated: hydrate,\n    cache: tag\n  };\n  initializeUpdateQueue(isStrictMode);\n  return containerInfo;\n}\nfunction getContextForSubtree(parentComponent) {\n  if (!parentComponent) return emptyContextObject;\n  parentComponent = emptyContextObject;\n  return parentComponent;\n}\nfunction updateContainerImpl(\n  rootFiber,\n  lane,\n  element,\n  container,\n  parentComponent,\n  callback\n) {\n  parentComponent = getContextForSubtree(parentComponent);\n  null === container.context\n    ? (container.context = parentComponent)\n    : (container.pendingContext = parentComponent);\n  container = createUpdate(lane);\n  container.payload = { element: element };\n  callback = void 0 === callback ? null : callback;\n  null !== callback && (container.callback = callback);\n  element = enqueueUpdate(rootFiber, container, lane);\n  null !== element &&\n    (scheduleUpdateOnFiber(element, rootFiber, lane),\n    entangleTransitions(element, rootFiber, lane));\n}\nfunction markRetryLaneImpl(fiber, retryLane) {\n  fiber = fiber.memoizedState;\n  if (null !== fiber && null !== fiber.dehydrated) {\n    var a = fiber.retryLane;\n    fiber.retryLane = 0 !== a && a < retryLane ? a : retryLane;\n  }\n}\nfunction markRetryLaneIfNotHydrated(fiber, retryLane) {\n  markRetryLaneImpl(fiber, retryLane);\n  (fiber = fiber.alternate) && markRetryLaneImpl(fiber, retryLane);\n}\nfunction attemptContinuousHydration(fiber) {\n  if (13 === fiber.tag) {\n    var root = enqueueConcurrentRenderForLane(fiber, 67108864);\n    null !== root && scheduleUpdateOnFiber(root, fiber, 67108864);\n    markRetryLaneIfNotHydrated(fiber, 67108864);\n  }\n}\nvar _enabled = !0;\nfunction dispatchDiscreteEvent(\n  domEventName,\n  eventSystemFlags,\n  container,\n  nativeEvent\n) {\n  var prevTransition = ReactSharedInternals.T;\n  ReactSharedInternals.T = null;\n  var previousPriority = ReactDOMSharedInternals.p;\n  try {\n    (ReactDOMSharedInternals.p = 2),\n      dispatchEvent(domEventName, eventSystemFlags, container, nativeEvent);\n  } finally {\n    (ReactDOMSharedInternals.p = previousPriority),\n      (ReactSharedInternals.T = prevTransition);\n  }\n}\nfunction dispatchContinuousEvent(\n  domEventName,\n  eventSystemFlags,\n  container,\n  nativeEvent\n) {\n  var prevTransition = ReactSharedInternals.T;\n  ReactSharedInternals.T = null;\n  var previousPriority = ReactDOMSharedInternals.p;\n  try {\n    (ReactDOMSharedInternals.p = 8),\n      dispatchEvent(domEventName, eventSystemFlags, container, nativeEvent);\n  } finally {\n    (ReactDOMSharedInternals.p = previousPriority),\n      (ReactSharedInternals.T = prevTransition);\n  }\n}\nfunction dispatchEvent(\n  domEventName,\n  eventSystemFlags,\n  targetContainer,\n  nativeEvent\n) {\n  if (_enabled) {\n    var blockedOn = findInstanceBlockingEvent(nativeEvent);\n    if (null === blockedOn)\n      dispatchEventForPluginEventSystem(\n        domEventName,\n        eventSystemFlags,\n        nativeEvent,\n        return_targetInst,\n        targetContainer\n      ),\n        clearIfContinuousEvent(domEventName, nativeEvent);\n    else if (\n      queueIfContinuousEvent(\n        blockedOn,\n        domEventName,\n        eventSystemFlags,\n        targetContainer,\n        nativeEvent\n      )\n    )\n      nativeEvent.stopPropagation();\n    else if (\n      (clearIfContinuousEvent(domEventName, nativeEvent),\n      eventSystemFlags & 4 &&\n        -1 < discreteReplayableEvents.indexOf(domEventName))\n    ) {\n      for (; null !== blockedOn; ) {\n        var fiber = getInstanceFromNode(blockedOn);\n        if (null !== fiber)\n          switch (fiber.tag) {\n            case 3:\n              fiber = fiber.stateNode;\n              if (fiber.current.memoizedState.isDehydrated) {\n                var lanes = getHighestPriorityLanes(fiber.pendingLanes);\n                if (0 !== lanes) {\n                  var root = fiber;\n                  root.pendingLanes |= 2;\n                  for (root.entangledLanes |= 2; lanes; ) {\n                    var lane = 1 << (31 - clz32(lanes));\n                    root.entanglements[1] |= lane;\n                    lanes &= ~lane;\n                  }\n                  ensureRootIsScheduled(fiber);\n                  0 === (executionContext & 6) &&\n                    ((workInProgressRootRenderTargetTime = now() + 500),\n                    flushSyncWorkAcrossRoots_impl(0, !1));\n                }\n              }\n              break;\n            case 13:\n              (root = enqueueConcurrentRenderForLane(fiber, 2)),\n                null !== root && scheduleUpdateOnFiber(root, fiber, 2),\n                flushSyncWork$1(),\n                markRetryLaneIfNotHydrated(fiber, 2);\n          }\n        fiber = findInstanceBlockingEvent(nativeEvent);\n        null === fiber &&\n          dispatchEventForPluginEventSystem(\n            domEventName,\n            eventSystemFlags,\n            nativeEvent,\n            return_targetInst,\n            targetContainer\n          );\n        if (fiber === blockedOn) break;\n        blockedOn = fiber;\n      }\n      null !== blockedOn && nativeEvent.stopPropagation();\n    } else\n      dispatchEventForPluginEventSystem(\n        domEventName,\n        eventSystemFlags,\n        nativeEvent,\n        null,\n        targetContainer\n      );\n  }\n}\nfunction findInstanceBlockingEvent(nativeEvent) {\n  nativeEvent = getEventTarget(nativeEvent);\n  return findInstanceBlockingTarget(nativeEvent);\n}\nvar return_targetInst = null;\nfunction findInstanceBlockingTarget(targetNode) {\n  return_targetInst = null;\n  targetNode = getClosestInstanceFromNode(targetNode);\n  if (null !== targetNode) {\n    var nearestMounted = getNearestMountedFiber(targetNode);\n    if (null === nearestMounted) targetNode = null;\n    else {\n      var tag = nearestMounted.tag;\n      if (13 === tag) {\n        targetNode = getSuspenseInstanceFromFiber(nearestMounted);\n        if (null !== targetNode) return targetNode;\n        targetNode = null;\n      } else if (3 === tag) {\n        if (nearestMounted.stateNode.current.memoizedState.isDehydrated)\n          return 3 === nearestMounted.tag\n            ? nearestMounted.stateNode.containerInfo\n            : null;\n        targetNode = null;\n      } else nearestMounted !== targetNode && (targetNode = null);\n    }\n  }\n  return_targetInst = targetNode;\n  return null;\n}\nfunction getEventPriority(domEventName) {\n  switch (domEventName) {\n    case \"beforetoggle\":\n    case \"cancel\":\n    case \"click\":\n    case \"close\":\n    case \"contextmenu\":\n    case \"copy\":\n    case \"cut\":\n    case \"auxclick\":\n    case \"dblclick\":\n    case \"dragend\":\n    case \"dragstart\":\n    case \"drop\":\n    case \"focusin\":\n    case \"focusout\":\n    case \"input\":\n    case \"invalid\":\n    case \"keydown\":\n    case \"keypress\":\n    case \"keyup\":\n    case \"mousedown\":\n    case \"mouseup\":\n    case \"paste\":\n    case \"pause\":\n    case \"play\":\n    case \"pointercancel\":\n    case \"pointerdown\":\n    case \"pointerup\":\n    case \"ratechange\":\n    case \"reset\":\n    case \"resize\":\n    case \"seeked\":\n    case \"submit\":\n    case \"toggle\":\n    case \"touchcancel\":\n    case \"touchend\":\n    case \"touchstart\":\n    case \"volumechange\":\n    case \"change\":\n    case \"selectionchange\":\n    case \"textInput\":\n    case \"compositionstart\":\n    case \"compositionend\":\n    case \"compositionupdate\":\n    case \"beforeblur\":\n    case \"afterblur\":\n    case \"beforeinput\":\n    case \"blur\":\n    case \"fullscreenchange\":\n    case \"focus\":\n    case \"hashchange\":\n    case \"popstate\":\n    case \"select\":\n    case \"selectstart\":\n      return 2;\n    case \"drag\":\n    case \"dragenter\":\n    case \"dragexit\":\n    case \"dragleave\":\n    case \"dragover\":\n    case \"mousemove\":\n    case \"mouseout\":\n    case \"mouseover\":\n    case \"pointermove\":\n    case \"pointerout\":\n    case \"pointerover\":\n    case \"scroll\":\n    case \"touchmove\":\n    case \"wheel\":\n    case \"mouseenter\":\n    case \"mouseleave\":\n    case \"pointerenter\":\n    case \"pointerleave\":\n      return 8;\n    case \"message\":\n      switch (getCurrentPriorityLevel()) {\n        case ImmediatePriority:\n          return 2;\n        case UserBlockingPriority:\n          return 8;\n        case NormalPriority$1:\n        case LowPriority:\n          return 32;\n        case IdlePriority:\n          return 268435456;\n        default:\n          return 32;\n      }\n    default:\n      return 32;\n  }\n}\nvar hasScheduledReplayAttempt = !1,\n  queuedFocus = null,\n  queuedDrag = null,\n  queuedMouse = null,\n  queuedPointers = new Map(),\n  queuedPointerCaptures = new Map(),\n  queuedExplicitHydrationTargets = [],\n  discreteReplayableEvents =\n    \"mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset\".split(\n      \" \"\n    );\nfunction clearIfContinuousEvent(domEventName, nativeEvent) {\n  switch (domEventName) {\n    case \"focusin\":\n    case \"focusout\":\n      queuedFocus = null;\n      break;\n    case \"dragenter\":\n    case \"dragleave\":\n      queuedDrag = null;\n      break;\n    case \"mouseover\":\n    case \"mouseout\":\n      queuedMouse = null;\n      break;\n    case \"pointerover\":\n    case \"pointerout\":\n      queuedPointers.delete(nativeEvent.pointerId);\n      break;\n    case \"gotpointercapture\":\n    case \"lostpointercapture\":\n      queuedPointerCaptures.delete(nativeEvent.pointerId);\n  }\n}\nfunction accumulateOrCreateContinuousQueuedReplayableEvent(\n  existingQueuedEvent,\n  blockedOn,\n  domEventName,\n  eventSystemFlags,\n  targetContainer,\n  nativeEvent\n) {\n  if (\n    null === existingQueuedEvent ||\n    existingQueuedEvent.nativeEvent !== nativeEvent\n  )\n    return (\n      (existingQueuedEvent = {\n        blockedOn: blockedOn,\n        domEventName: domEventName,\n        eventSystemFlags: eventSystemFlags,\n        nativeEvent: nativeEvent,\n        targetContainers: [targetContainer]\n      }),\n      null !== blockedOn &&\n        ((blockedOn = getInstanceFromNode(blockedOn)),\n        null !== blockedOn && attemptContinuousHydration(blockedOn)),\n      existingQueuedEvent\n    );\n  existingQueuedEvent.eventSystemFlags |= eventSystemFlags;\n  blockedOn = existingQueuedEvent.targetContainers;\n  null !== targetContainer &&\n    -1 === blockedOn.indexOf(targetContainer) &&\n    blockedOn.push(targetContainer);\n  return existingQueuedEvent;\n}\nfunction queueIfContinuousEvent(\n  blockedOn,\n  domEventName,\n  eventSystemFlags,\n  targetContainer,\n  nativeEvent\n) {\n  switch (domEventName) {\n    case \"focusin\":\n      return (\n        (queuedFocus = accumulateOrCreateContinuousQueuedReplayableEvent(\n          queuedFocus,\n          blockedOn,\n          domEventName,\n          eventSystemFlags,\n          targetContainer,\n          nativeEvent\n        )),\n        !0\n      );\n    case \"dragenter\":\n      return (\n        (queuedDrag = accumulateOrCreateContinuousQueuedReplayableEvent(\n          queuedDrag,\n          blockedOn,\n          domEventName,\n          eventSystemFlags,\n          targetContainer,\n          nativeEvent\n        )),\n        !0\n      );\n    case \"mouseover\":\n      return (\n        (queuedMouse = accumulateOrCreateContinuousQueuedReplayableEvent(\n          queuedMouse,\n          blockedOn,\n          domEventName,\n          eventSystemFlags,\n          targetContainer,\n          nativeEvent\n        )),\n        !0\n      );\n    case \"pointerover\":\n      var pointerId = nativeEvent.pointerId;\n      queuedPointers.set(\n        pointerId,\n        accumulateOrCreateContinuousQueuedReplayableEvent(\n          queuedPointers.get(pointerId) || null,\n          blockedOn,\n          domEventName,\n          eventSystemFlags,\n          targetContainer,\n          nativeEvent\n        )\n      );\n      return !0;\n    case \"gotpointercapture\":\n      return (\n        (pointerId = nativeEvent.pointerId),\n        queuedPointerCaptures.set(\n          pointerId,\n          accumulateOrCreateContinuousQueuedReplayableEvent(\n            queuedPointerCaptures.get(pointerId) || null,\n            blockedOn,\n            domEventName,\n            eventSystemFlags,\n            targetContainer,\n            nativeEvent\n          )\n        ),\n        !0\n      );\n  }\n  return !1;\n}\nfunction attemptExplicitHydrationTarget(queuedTarget) {\n  var targetInst = getClosestInstanceFromNode(queuedTarget.target);\n  if (null !== targetInst) {\n    var nearestMounted = getNearestMountedFiber(targetInst);\n    if (null !== nearestMounted)\n      if (((targetInst = nearestMounted.tag), 13 === targetInst)) {\n        if (\n          ((targetInst = getSuspenseInstanceFromFiber(nearestMounted)),\n          null !== targetInst)\n        ) {\n          queuedTarget.blockedOn = targetInst;\n          runWithPriority(queuedTarget.priority, function () {\n            if (13 === nearestMounted.tag) {\n              var lane = requestUpdateLane();\n              lane = getBumpedLaneForHydrationByLane(lane);\n              var root = enqueueConcurrentRenderForLane(nearestMounted, lane);\n              null !== root &&\n                scheduleUpdateOnFiber(root, nearestMounted, lane);\n              markRetryLaneIfNotHydrated(nearestMounted, lane);\n            }\n          });\n          return;\n        }\n      } else if (\n        3 === targetInst &&\n        nearestMounted.stateNode.current.memoizedState.isDehydrated\n      ) {\n        queuedTarget.blockedOn =\n          3 === nearestMounted.tag\n            ? nearestMounted.stateNode.containerInfo\n            : null;\n        return;\n      }\n  }\n  queuedTarget.blockedOn = null;\n}\nfunction attemptReplayContinuousQueuedEvent(queuedEvent) {\n  if (null !== queuedEvent.blockedOn) return !1;\n  for (\n    var targetContainers = queuedEvent.targetContainers;\n    0 < targetContainers.length;\n\n  ) {\n    var nextBlockedOn = findInstanceBlockingEvent(queuedEvent.nativeEvent);\n    if (null === nextBlockedOn) {\n      nextBlockedOn = queuedEvent.nativeEvent;\n      var nativeEventClone = new nextBlockedOn.constructor(\n        nextBlockedOn.type,\n        nextBlockedOn\n      );\n      currentReplayingEvent = nativeEventClone;\n      nextBlockedOn.target.dispatchEvent(nativeEventClone);\n      currentReplayingEvent = null;\n    } else\n      return (\n        (targetContainers = getInstanceFromNode(nextBlockedOn)),\n        null !== targetContainers &&\n          attemptContinuousHydration(targetContainers),\n        (queuedEvent.blockedOn = nextBlockedOn),\n        !1\n      );\n    targetContainers.shift();\n  }\n  return !0;\n}\nfunction attemptReplayContinuousQueuedEventInMap(queuedEvent, key, map) {\n  attemptReplayContinuousQueuedEvent(queuedEvent) && map.delete(key);\n}\nfunction replayUnblockedEvents() {\n  hasScheduledReplayAttempt = !1;\n  null !== queuedFocus &&\n    attemptReplayContinuousQueuedEvent(queuedFocus) &&\n    (queuedFocus = null);\n  null !== queuedDrag &&\n    attemptReplayContinuousQueuedEvent(queuedDrag) &&\n    (queuedDrag = null);\n  null !== queuedMouse &&\n    attemptReplayContinuousQueuedEvent(queuedMouse) &&\n    (queuedMouse = null);\n  queuedPointers.forEach(attemptReplayContinuousQueuedEventInMap);\n  queuedPointerCaptures.forEach(attemptReplayContinuousQueuedEventInMap);\n}\nfunction scheduleCallbackIfUnblocked(queuedEvent, unblocked) {\n  queuedEvent.blockedOn === unblocked &&\n    ((queuedEvent.blockedOn = null),\n    hasScheduledReplayAttempt ||\n      ((hasScheduledReplayAttempt = !0),\n      Scheduler.unstable_scheduleCallback(\n        Scheduler.unstable_NormalPriority,\n        replayUnblockedEvents\n      )));\n}\nvar lastScheduledReplayQueue = null;\nfunction scheduleReplayQueueIfNeeded(formReplayingQueue) {\n  lastScheduledReplayQueue !== formReplayingQueue &&\n    ((lastScheduledReplayQueue = formReplayingQueue),\n    Scheduler.unstable_scheduleCallback(\n      Scheduler.unstable_NormalPriority,\n      function () {\n        lastScheduledReplayQueue === formReplayingQueue &&\n          (lastScheduledReplayQueue = null);\n        for (var i = 0; i < formReplayingQueue.length; i += 3) {\n          var form = formReplayingQueue[i],\n            submitterOrAction = formReplayingQueue[i + 1],\n            formData = formReplayingQueue[i + 2];\n          if (\"function\" !== typeof submitterOrAction)\n            if (null === findInstanceBlockingTarget(submitterOrAction || form))\n              continue;\n            else break;\n          var formInst = getInstanceFromNode(form);\n          null !== formInst &&\n            (formReplayingQueue.splice(i, 3),\n            (i -= 3),\n            startHostTransition(\n              formInst,\n              {\n                pending: !0,\n                data: formData,\n                method: form.method,\n                action: submitterOrAction\n              },\n              submitterOrAction,\n              formData\n            ));\n        }\n      }\n    ));\n}\nfunction retryIfBlockedOn(unblocked) {\n  function unblock(queuedEvent) {\n    return scheduleCallbackIfUnblocked(queuedEvent, unblocked);\n  }\n  null !== queuedFocus && scheduleCallbackIfUnblocked(queuedFocus, unblocked);\n  null !== queuedDrag && scheduleCallbackIfUnblocked(queuedDrag, unblocked);\n  null !== queuedMouse && scheduleCallbackIfUnblocked(queuedMouse, unblocked);\n  queuedPointers.forEach(unblock);\n  queuedPointerCaptures.forEach(unblock);\n  for (var i = 0; i < queuedExplicitHydrationTargets.length; i++) {\n    var queuedTarget = queuedExplicitHydrationTargets[i];\n    queuedTarget.blockedOn === unblocked && (queuedTarget.blockedOn = null);\n  }\n  for (\n    ;\n    0 < queuedExplicitHydrationTargets.length &&\n    ((i = queuedExplicitHydrationTargets[0]), null === i.blockedOn);\n\n  )\n    attemptExplicitHydrationTarget(i),\n      null === i.blockedOn && queuedExplicitHydrationTargets.shift();\n  i = (unblocked.ownerDocument || unblocked).$$reactFormReplay;\n  if (null != i)\n    for (queuedTarget = 0; queuedTarget < i.length; queuedTarget += 3) {\n      var form = i[queuedTarget],\n        submitterOrAction = i[queuedTarget + 1],\n        formProps = form[internalPropsKey] || null;\n      if (\"function\" === typeof submitterOrAction)\n        formProps || scheduleReplayQueueIfNeeded(i);\n      else if (formProps) {\n        var action = null;\n        if (submitterOrAction && submitterOrAction.hasAttribute(\"formAction\"))\n          if (\n            ((form = submitterOrAction),\n            (formProps = submitterOrAction[internalPropsKey] || null))\n          )\n            action = formProps.formAction;\n          else {\n            if (null !== findInstanceBlockingTarget(form)) continue;\n          }\n        else action = formProps.action;\n        \"function\" === typeof action\n          ? (i[queuedTarget + 1] = action)\n          : (i.splice(queuedTarget, 3), (queuedTarget -= 3));\n        scheduleReplayQueueIfNeeded(i);\n      }\n    }\n}\nfunction ReactDOMRoot(internalRoot) {\n  this._internalRoot = internalRoot;\n}\nReactDOMHydrationRoot.prototype.render = ReactDOMRoot.prototype.render =\n  function (children) {\n    var root = this._internalRoot;\n    if (null === root) throw Error(formatProdErrorMessage(409));\n    var current = root.current,\n      lane = requestUpdateLane();\n    updateContainerImpl(current, lane, children, root, null, null);\n  };\nReactDOMHydrationRoot.prototype.unmount = ReactDOMRoot.prototype.unmount =\n  function () {\n    var root = this._internalRoot;\n    if (null !== root) {\n      this._internalRoot = null;\n      var container = root.containerInfo;\n      updateContainerImpl(root.current, 2, null, root, null, null);\n      flushSyncWork$1();\n      container[internalContainerInstanceKey] = null;\n    }\n  };\nfunction ReactDOMHydrationRoot(internalRoot) {\n  this._internalRoot = internalRoot;\n}\nReactDOMHydrationRoot.prototype.unstable_scheduleHydration = function (target) {\n  if (target) {\n    var updatePriority = resolveUpdatePriority();\n    target = { blockedOn: null, target: target, priority: updatePriority };\n    for (\n      var i = 0;\n      i < queuedExplicitHydrationTargets.length &&\n      0 !== updatePriority &&\n      updatePriority < queuedExplicitHydrationTargets[i].priority;\n      i++\n    );\n    queuedExplicitHydrationTargets.splice(i, 0, target);\n    0 === i && attemptExplicitHydrationTarget(target);\n  }\n};\nvar isomorphicReactPackageVersion$jscomp$inline_1785 = React.version;\nif (\n  \"19.1.0\" !==\n  isomorphicReactPackageVersion$jscomp$inline_1785\n)\n  throw Error(\n    formatProdErrorMessage(\n      527,\n      isomorphicReactPackageVersion$jscomp$inline_1785,\n      \"19.1.0\"\n    )\n  );\nReactDOMSharedInternals.findDOMNode = function (componentOrElement) {\n  var fiber = componentOrElement._reactInternals;\n  if (void 0 === fiber) {\n    if (\"function\" === typeof componentOrElement.render)\n      throw Error(formatProdErrorMessage(188));\n    componentOrElement = Object.keys(componentOrElement).join(\",\");\n    throw Error(formatProdErrorMessage(268, componentOrElement));\n  }\n  componentOrElement = findCurrentFiberUsingSlowPath(fiber);\n  componentOrElement =\n    null !== componentOrElement\n      ? findCurrentHostFiberImpl(componentOrElement)\n      : null;\n  componentOrElement =\n    null === componentOrElement ? null : componentOrElement.stateNode;\n  return componentOrElement;\n};\nvar internals$jscomp$inline_2256 = {\n  bundleType: 0,\n  version: \"19.1.0\",\n  rendererPackageName: \"react-dom\",\n  currentDispatcherRef: ReactSharedInternals,\n  reconcilerVersion: \"19.1.0\"\n};\nif (\"undefined\" !== typeof __REACT_DEVTOOLS_GLOBAL_HOOK__) {\n  var hook$jscomp$inline_2257 = __REACT_DEVTOOLS_GLOBAL_HOOK__;\n  if (\n    !hook$jscomp$inline_2257.isDisabled &&\n    hook$jscomp$inline_2257.supportsFiber\n  )\n    try {\n      (rendererID = hook$jscomp$inline_2257.inject(\n        internals$jscomp$inline_2256\n      )),\n        (injectedHook = hook$jscomp$inline_2257);\n    } catch (err) {}\n}\nexports.createRoot = function (container, options) {\n  if (!isValidContainer(container)) throw Error(formatProdErrorMessage(299));\n  var isStrictMode = !1,\n    identifierPrefix = \"\",\n    onUncaughtError = defaultOnUncaughtError,\n    onCaughtError = defaultOnCaughtError,\n    onRecoverableError = defaultOnRecoverableError,\n    transitionCallbacks = null;\n  null !== options &&\n    void 0 !== options &&\n    (!0 === options.unstable_strictMode && (isStrictMode = !0),\n    void 0 !== options.identifierPrefix &&\n      (identifierPrefix = options.identifierPrefix),\n    void 0 !== options.onUncaughtError &&\n      (onUncaughtError = options.onUncaughtError),\n    void 0 !== options.onCaughtError && (onCaughtError = options.onCaughtError),\n    void 0 !== options.onRecoverableError &&\n      (onRecoverableError = options.onRecoverableError),\n    void 0 !== options.unstable_transitionCallbacks &&\n      (transitionCallbacks = options.unstable_transitionCallbacks));\n  options = createFiberRoot(\n    container,\n    1,\n    !1,\n    null,\n    null,\n    isStrictMode,\n    identifierPrefix,\n    onUncaughtError,\n    onCaughtError,\n    onRecoverableError,\n    transitionCallbacks,\n    null\n  );\n  container[internalContainerInstanceKey] = options.current;\n  listenToAllSupportedEvents(container);\n  return new ReactDOMRoot(options);\n};\nexports.hydrateRoot = function (container, initialChildren, options) {\n  if (!isValidContainer(container)) throw Error(formatProdErrorMessage(299));\n  var isStrictMode = !1,\n    identifierPrefix = \"\",\n    onUncaughtError = defaultOnUncaughtError,\n    onCaughtError = defaultOnCaughtError,\n    onRecoverableError = defaultOnRecoverableError,\n    transitionCallbacks = null,\n    formState = null;\n  null !== options &&\n    void 0 !== options &&\n    (!0 === options.unstable_strictMode && (isStrictMode = !0),\n    void 0 !== options.identifierPrefix &&\n      (identifierPrefix = options.identifierPrefix),\n    void 0 !== options.onUncaughtError &&\n      (onUncaughtError = options.onUncaughtError),\n    void 0 !== options.onCaughtError && (onCaughtError = options.onCaughtError),\n    void 0 !== options.onRecoverableError &&\n      (onRecoverableError = options.onRecoverableError),\n    void 0 !== options.unstable_transitionCallbacks &&\n      (transitionCallbacks = options.unstable_transitionCallbacks),\n    void 0 !== options.formState && (formState = options.formState));\n  initialChildren = createFiberRoot(\n    container,\n    1,\n    !0,\n    initialChildren,\n    null != options ? options : null,\n    isStrictMode,\n    identifierPrefix,\n    onUncaughtError,\n    onCaughtError,\n    onRecoverableError,\n    transitionCallbacks,\n    formState\n  );\n  initialChildren.context = getContextForSubtree(null);\n  options = initialChildren.current;\n  isStrictMode = requestUpdateLane();\n  isStrictMode = getBumpedLaneForHydrationByLane(isStrictMode);\n  identifierPrefix = createUpdate(isStrictMode);\n  identifierPrefix.callback = null;\n  enqueueUpdate(options, identifierPrefix, isStrictMode);\n  options = isStrictMode;\n  initialChildren.current.lanes = options;\n  markRootUpdated$1(initialChildren, options);\n  ensureRootIsScheduled(initialChildren);\n  container[internalContainerInstanceKey] = initialChildren.current;\n  listenToAllSupportedEvents(container);\n  return new ReactDOMHydrationRoot(initialChildren);\n};\nexports.version = \"19.1.0\";\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react.production.js');\n} else {\n  module.exports = require('./cjs/react.development.js');\n}\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nif (process.env.NODE_ENV !== 'production') {\n  var ReactIs = require('react-is');\n\n  // By explicitly using `prop-types` you are opting into new development behavior.\n  // http://fb.me/prop-types-in-prod\n  var throwOnDirectAccess = true;\n  module.exports = require('./factoryWithTypeCheckers')(ReactIs.isElement, throwOnDirectAccess);\n} else {\n  // By explicitly using `prop-types` you are opting into new production behavior.\n  // http://fb.me/prop-types-in-prod\n  module.exports = require('./factoryWithThrowingShims')();\n}\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';\n\nmodule.exports = ReactPropTypesSecret;\n","/**\n * @license React\n * react.production.js\n *\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\"use strict\";\nvar REACT_ELEMENT_TYPE = Symbol.for(\"react.transitional.element\"),\n  REACT_PORTAL_TYPE = Symbol.for(\"react.portal\"),\n  REACT_FRAGMENT_TYPE = Symbol.for(\"react.fragment\"),\n  REACT_STRICT_MODE_TYPE = Symbol.for(\"react.strict_mode\"),\n  REACT_PROFILER_TYPE = Symbol.for(\"react.profiler\"),\n  REACT_CONSUMER_TYPE = Symbol.for(\"react.consumer\"),\n  REACT_CONTEXT_TYPE = Symbol.for(\"react.context\"),\n  REACT_FORWARD_REF_TYPE = Symbol.for(\"react.forward_ref\"),\n  REACT_SUSPENSE_TYPE = Symbol.for(\"react.suspense\"),\n  REACT_MEMO_TYPE = Symbol.for(\"react.memo\"),\n  REACT_LAZY_TYPE = Symbol.for(\"react.lazy\"),\n  MAYBE_ITERATOR_SYMBOL = Symbol.iterator;\nfunction getIteratorFn(maybeIterable) {\n  if (null === maybeIterable || \"object\" !== typeof maybeIterable) return null;\n  maybeIterable =\n    (MAYBE_ITERATOR_SYMBOL && maybeIterable[MAYBE_ITERATOR_SYMBOL]) ||\n    maybeIterable[\"@@iterator\"];\n  return \"function\" === typeof maybeIterable ? maybeIterable : null;\n}\nvar ReactNoopUpdateQueue = {\n    isMounted: function () {\n      return !1;\n    },\n    enqueueForceUpdate: function () {},\n    enqueueReplaceState: function () {},\n    enqueueSetState: function () {}\n  },\n  assign = Object.assign,\n  emptyObject = {};\nfunction Component(props, context, updater) {\n  this.props = props;\n  this.context = context;\n  this.refs = emptyObject;\n  this.updater = updater || ReactNoopUpdateQueue;\n}\nComponent.prototype.isReactComponent = {};\nComponent.prototype.setState = function (partialState, callback) {\n  if (\n    \"object\" !== typeof partialState &&\n    \"function\" !== typeof partialState &&\n    null != partialState\n  )\n    throw Error(\n      \"takes an object of state variables to update or a function which returns an object of state variables.\"\n    );\n  this.updater.enqueueSetState(this, partialState, callback, \"setState\");\n};\nComponent.prototype.forceUpdate = function (callback) {\n  this.updater.enqueueForceUpdate(this, callback, \"forceUpdate\");\n};\nfunction ComponentDummy() {}\nComponentDummy.prototype = Component.prototype;\nfunction PureComponent(props, context, updater) {\n  this.props = props;\n  this.context = context;\n  this.refs = emptyObject;\n  this.updater = updater || ReactNoopUpdateQueue;\n}\nvar pureComponentPrototype = (PureComponent.prototype = new ComponentDummy());\npureComponentPrototype.constructor = PureComponent;\nassign(pureComponentPrototype, Component.prototype);\npureComponentPrototype.isPureReactComponent = !0;\nvar isArrayImpl = Array.isArray,\n  ReactSharedInternals = { H: null, A: null, T: null, S: null, V: null },\n  hasOwnProperty = Object.prototype.hasOwnProperty;\nfunction ReactElement(type, key, self, source, owner, props) {\n  self = props.ref;\n  return {\n    $$typeof: REACT_ELEMENT_TYPE,\n    type: type,\n    key: key,\n    ref: void 0 !== self ? self : null,\n    props: props\n  };\n}\nfunction cloneAndReplaceKey(oldElement, newKey) {\n  return ReactElement(\n    oldElement.type,\n    newKey,\n    void 0,\n    void 0,\n    void 0,\n    oldElement.props\n  );\n}\nfunction isValidElement(object) {\n  return (\n    \"object\" === typeof object &&\n    null !== object &&\n    object.$$typeof === REACT_ELEMENT_TYPE\n  );\n}\nfunction escape(key) {\n  var escaperLookup = { \"=\": \"=0\", \":\": \"=2\" };\n  return (\n    \"$\" +\n    key.replace(/[=:]/g, function (match) {\n      return escaperLookup[match];\n    })\n  );\n}\nvar userProvidedKeyEscapeRegex = /\\/+/g;\nfunction getElementKey(element, index) {\n  return \"object\" === typeof element && null !== element && null != element.key\n    ? escape(\"\" + element.key)\n    : index.toString(36);\n}\nfunction noop$1() {}\nfunction resolveThenable(thenable) {\n  switch (thenable.status) {\n    case \"fulfilled\":\n      return thenable.value;\n    case \"rejected\":\n      throw thenable.reason;\n    default:\n      switch (\n        (\"string\" === typeof thenable.status\n          ? thenable.then(noop$1, noop$1)\n          : ((thenable.status = \"pending\"),\n            thenable.then(\n              function (fulfilledValue) {\n                \"pending\" === thenable.status &&\n                  ((thenable.status = \"fulfilled\"),\n                  (thenable.value = fulfilledValue));\n              },\n              function (error) {\n                \"pending\" === thenable.status &&\n                  ((thenable.status = \"rejected\"), (thenable.reason = error));\n              }\n            )),\n        thenable.status)\n      ) {\n        case \"fulfilled\":\n          return thenable.value;\n        case \"rejected\":\n          throw thenable.reason;\n      }\n  }\n  throw thenable;\n}\nfunction mapIntoArray(children, array, escapedPrefix, nameSoFar, callback) {\n  var type = typeof children;\n  if (\"undefined\" === type || \"boolean\" === type) children = null;\n  var invokeCallback = !1;\n  if (null === children) invokeCallback = !0;\n  else\n    switch (type) {\n      case \"bigint\":\n      case \"string\":\n      case \"number\":\n        invokeCallback = !0;\n        break;\n      case \"object\":\n        switch (children.$$typeof) {\n          case REACT_ELEMENT_TYPE:\n          case REACT_PORTAL_TYPE:\n            invokeCallback = !0;\n            break;\n          case REACT_LAZY_TYPE:\n            return (\n              (invokeCallback = children._init),\n              mapIntoArray(\n                invokeCallback(children._payload),\n                array,\n                escapedPrefix,\n                nameSoFar,\n                callback\n              )\n            );\n        }\n    }\n  if (invokeCallback)\n    return (\n      (callback = callback(children)),\n      (invokeCallback =\n        \"\" === nameSoFar ? \".\" + getElementKey(children, 0) : nameSoFar),\n      isArrayImpl(callback)\n        ? ((escapedPrefix = \"\"),\n          null != invokeCallback &&\n            (escapedPrefix =\n              invokeCallback.replace(userProvidedKeyEscapeRegex, \"$&/\") + \"/\"),\n          mapIntoArray(callback, array, escapedPrefix, \"\", function (c) {\n            return c;\n          }))\n        : null != callback &&\n          (isValidElement(callback) &&\n            (callback = cloneAndReplaceKey(\n              callback,\n              escapedPrefix +\n                (null == callback.key ||\n                (children && children.key === callback.key)\n                  ? \"\"\n                  : (\"\" + callback.key).replace(\n                      userProvidedKeyEscapeRegex,\n                      \"$&/\"\n                    ) + \"/\") +\n                invokeCallback\n            )),\n          array.push(callback)),\n      1\n    );\n  invokeCallback = 0;\n  var nextNamePrefix = \"\" === nameSoFar ? \".\" : nameSoFar + \":\";\n  if (isArrayImpl(children))\n    for (var i = 0; i < children.length; i++)\n      (nameSoFar = children[i]),\n        (type = nextNamePrefix + getElementKey(nameSoFar, i)),\n        (invokeCallback += mapIntoArray(\n          nameSoFar,\n          array,\n          escapedPrefix,\n          type,\n          callback\n        ));\n  else if (((i = getIteratorFn(children)), \"function\" === typeof i))\n    for (\n      children = i.call(children), i = 0;\n      !(nameSoFar = children.next()).done;\n\n    )\n      (nameSoFar = nameSoFar.value),\n        (type = nextNamePrefix + getElementKey(nameSoFar, i++)),\n        (invokeCallback += mapIntoArray(\n          nameSoFar,\n          array,\n          escapedPrefix,\n          type,\n          callback\n        ));\n  else if (\"object\" === type) {\n    if (\"function\" === typeof children.then)\n      return mapIntoArray(\n        resolveThenable(children),\n        array,\n        escapedPrefix,\n        nameSoFar,\n        callback\n      );\n    array = String(children);\n    throw Error(\n      \"Objects are not valid as a React child (found: \" +\n        (\"[object Object]\" === array\n          ? \"object with keys {\" + Object.keys(children).join(\", \") + \"}\"\n          : array) +\n        \"). If you meant to render a collection of children, use an array instead.\"\n    );\n  }\n  return invokeCallback;\n}\nfunction mapChildren(children, func, context) {\n  if (null == children) return children;\n  var result = [],\n    count = 0;\n  mapIntoArray(children, result, \"\", \"\", function (child) {\n    return func.call(context, child, count++);\n  });\n  return result;\n}\nfunction lazyInitializer(payload) {\n  if (-1 === payload._status) {\n    var ctor = payload._result;\n    ctor = ctor();\n    ctor.then(\n      function (moduleObject) {\n        if (0 === payload._status || -1 === payload._status)\n          (payload._status = 1), (payload._result = moduleObject);\n      },\n      function (error) {\n        if (0 === payload._status || -1 === payload._status)\n          (payload._status = 2), (payload._result = error);\n      }\n    );\n    -1 === payload._status && ((payload._status = 0), (payload._result = ctor));\n  }\n  if (1 === payload._status) return payload._result.default;\n  throw payload._result;\n}\nvar reportGlobalError =\n  \"function\" === typeof reportError\n    ? reportError\n    : function (error) {\n        if (\n          \"object\" === typeof window &&\n          \"function\" === typeof window.ErrorEvent\n        ) {\n          var event = new window.ErrorEvent(\"error\", {\n            bubbles: !0,\n            cancelable: !0,\n            message:\n              \"object\" === typeof error &&\n              null !== error &&\n              \"string\" === typeof error.message\n                ? String(error.message)\n                : String(error),\n            error: error\n          });\n          if (!window.dispatchEvent(event)) return;\n        } else if (\n          \"object\" === typeof process &&\n          \"function\" === typeof process.emit\n        ) {\n          process.emit(\"uncaughtException\", error);\n          return;\n        }\n        console.error(error);\n      };\nfunction noop() {}\nexports.Children = {\n  map: mapChildren,\n  forEach: function (children, forEachFunc, forEachContext) {\n    mapChildren(\n      children,\n      function () {\n        forEachFunc.apply(this, arguments);\n      },\n      forEachContext\n    );\n  },\n  count: function (children) {\n    var n = 0;\n    mapChildren(children, function () {\n      n++;\n    });\n    return n;\n  },\n  toArray: function (children) {\n    return (\n      mapChildren(children, function (child) {\n        return child;\n      }) || []\n    );\n  },\n  only: function (children) {\n    if (!isValidElement(children))\n      throw Error(\n        \"React.Children.only expected to receive a single React element child.\"\n      );\n    return children;\n  }\n};\nexports.Component = Component;\nexports.Fragment = REACT_FRAGMENT_TYPE;\nexports.Profiler = REACT_PROFILER_TYPE;\nexports.PureComponent = PureComponent;\nexports.StrictMode = REACT_STRICT_MODE_TYPE;\nexports.Suspense = REACT_SUSPENSE_TYPE;\nexports.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE =\n  ReactSharedInternals;\nexports.__COMPILER_RUNTIME = {\n  __proto__: null,\n  c: function (size) {\n    return ReactSharedInternals.H.useMemoCache(size);\n  }\n};\nexports.cache = function (fn) {\n  return function () {\n    return fn.apply(null, arguments);\n  };\n};\nexports.cloneElement = function (element, config, children) {\n  if (null === element || void 0 === element)\n    throw Error(\n      \"The argument must be a React element, but you passed \" + element + \".\"\n    );\n  var props = assign({}, element.props),\n    key = element.key,\n    owner = void 0;\n  if (null != config)\n    for (propName in (void 0 !== config.ref && (owner = void 0),\n    void 0 !== config.key && (key = \"\" + config.key),\n    config))\n      !hasOwnProperty.call(config, propName) ||\n        \"key\" === propName ||\n        \"__self\" === propName ||\n        \"__source\" === propName ||\n        (\"ref\" === propName && void 0 === config.ref) ||\n        (props[propName] = config[propName]);\n  var propName = arguments.length - 2;\n  if (1 === propName) props.children = children;\n  else if (1 < propName) {\n    for (var childArray = Array(propName), i = 0; i < propName; i++)\n      childArray[i] = arguments[i + 2];\n    props.children = childArray;\n  }\n  return ReactElement(element.type, key, void 0, void 0, owner, props);\n};\nexports.createContext = function (defaultValue) {\n  defaultValue = {\n    $$typeof: REACT_CONTEXT_TYPE,\n    _currentValue: defaultValue,\n    _currentValue2: defaultValue,\n    _threadCount: 0,\n    Provider: null,\n    Consumer: null\n  };\n  defaultValue.Provider = defaultValue;\n  defaultValue.Consumer = {\n    $$typeof: REACT_CONSUMER_TYPE,\n    _context: defaultValue\n  };\n  return defaultValue;\n};\nexports.createElement = function (type, config, children) {\n  var propName,\n    props = {},\n    key = null;\n  if (null != config)\n    for (propName in (void 0 !== config.key && (key = \"\" + config.key), config))\n      hasOwnProperty.call(config, propName) &&\n        \"key\" !== propName &&\n        \"__self\" !== propName &&\n        \"__source\" !== propName &&\n        (props[propName] = config[propName]);\n  var childrenLength = arguments.length - 2;\n  if (1 === childrenLength) props.children = children;\n  else if (1 < childrenLength) {\n    for (var childArray = Array(childrenLength), i = 0; i < childrenLength; i++)\n      childArray[i] = arguments[i + 2];\n    props.children = childArray;\n  }\n  if (type && type.defaultProps)\n    for (propName in ((childrenLength = type.defaultProps), childrenLength))\n      void 0 === props[propName] &&\n        (props[propName] = childrenLength[propName]);\n  return ReactElement(type, key, void 0, void 0, null, props);\n};\nexports.createRef = function () {\n  return { current: null };\n};\nexports.forwardRef = function (render) {\n  return { $$typeof: REACT_FORWARD_REF_TYPE, render: render };\n};\nexports.isValidElement = isValidElement;\nexports.lazy = function (ctor) {\n  return {\n    $$typeof: REACT_LAZY_TYPE,\n    _payload: { _status: -1, _result: ctor },\n    _init: lazyInitializer\n  };\n};\nexports.memo = function (type, compare) {\n  return {\n    $$typeof: REACT_MEMO_TYPE,\n    type: type,\n    compare: void 0 === compare ? null : compare\n  };\n};\nexports.startTransition = function (scope) {\n  var prevTransition = ReactSharedInternals.T,\n    currentTransition = {};\n  ReactSharedInternals.T = currentTransition;\n  try {\n    var returnValue = scope(),\n      onStartTransitionFinish = ReactSharedInternals.S;\n    null !== onStartTransitionFinish &&\n      onStartTransitionFinish(currentTransition, returnValue);\n    \"object\" === typeof returnValue &&\n      null !== returnValue &&\n      \"function\" === typeof returnValue.then &&\n      returnValue.then(noop, reportGlobalError);\n  } catch (error) {\n    reportGlobalError(error);\n  } finally {\n    ReactSharedInternals.T = prevTransition;\n  }\n};\nexports.unstable_useCacheRefresh = function () {\n  return ReactSharedInternals.H.useCacheRefresh();\n};\nexports.use = function (usable) {\n  return ReactSharedInternals.H.use(usable);\n};\nexports.useActionState = function (action, initialState, permalink) {\n  return ReactSharedInternals.H.useActionState(action, initialState, permalink);\n};\nexports.useCallback = function (callback, deps) {\n  return ReactSharedInternals.H.useCallback(callback, deps);\n};\nexports.useContext = function (Context) {\n  return ReactSharedInternals.H.useContext(Context);\n};\nexports.useDebugValue = function () {};\nexports.useDeferredValue = function (value, initialValue) {\n  return ReactSharedInternals.H.useDeferredValue(value, initialValue);\n};\nexports.useEffect = function (create, createDeps, update) {\n  var dispatcher = ReactSharedInternals.H;\n  if (\"function\" === typeof update)\n    throw Error(\n      \"useEffect CRUD overload is not enabled in this build of React.\"\n    );\n  return dispatcher.useEffect(create, createDeps);\n};\nexports.useId = function () {\n  return ReactSharedInternals.H.useId();\n};\nexports.useImperativeHandle = function (ref, create, deps) {\n  return ReactSharedInternals.H.useImperativeHandle(ref, create, deps);\n};\nexports.useInsertionEffect = function (create, deps) {\n  return ReactSharedInternals.H.useInsertionEffect(create, deps);\n};\nexports.useLayoutEffect = function (create, deps) {\n  return ReactSharedInternals.H.useLayoutEffect(create, deps);\n};\nexports.useMemo = function (create, deps) {\n  return ReactSharedInternals.H.useMemo(create, deps);\n};\nexports.useOptimistic = function (passthrough, reducer) {\n  return ReactSharedInternals.H.useOptimistic(passthrough, reducer);\n};\nexports.useReducer = function (reducer, initialArg, init) {\n  return ReactSharedInternals.H.useReducer(reducer, initialArg, init);\n};\nexports.useRef = function (initialValue) {\n  return ReactSharedInternals.H.useRef(initialValue);\n};\nexports.useState = function (initialState) {\n  return ReactSharedInternals.H.useState(initialState);\n};\nexports.useSyncExternalStore = function (\n  subscribe,\n  getSnapshot,\n  getServerSnapshot\n) {\n  return ReactSharedInternals.H.useSyncExternalStore(\n    subscribe,\n    getSnapshot,\n    getServerSnapshot\n  );\n};\nexports.useTransition = function () {\n  return ReactSharedInternals.H.useTransition();\n};\nexports.version = \"19.1.0\";\n","'use strict';\n\nfunction checkDCE() {\n  /* global __REACT_DEVTOOLS_GLOBAL_HOOK__ */\n  if (\n    typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ === 'undefined' ||\n    typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE !== 'function'\n  ) {\n    return;\n  }\n  if (process.env.NODE_ENV !== 'production') {\n    // This branch is unreachable because this function is only called\n    // in production, but the condition is true only in development.\n    // Therefore if the branch is still here, dead code elimination wasn't\n    // properly applied.\n    // Don't change the message. React DevTools relies on it. Also make sure\n    // this message doesn't occur elsewhere in this function, or it will cause\n    // a false positive.\n    throw new Error('^_^');\n  }\n  try {\n    // Verify that the code above has been dead code eliminated (DCE'd).\n    __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE);\n  } catch (err) {\n    // DevTools shouldn't crash React, no matter what.\n    // We should still report in case we break this code.\n    console.error(err);\n  }\n}\n\nif (process.env.NODE_ENV === 'production') {\n  // DCE check should happen before ReactDOM bundle executes so that\n  // DevTools can report bad minification during injection.\n  checkDCE();\n  module.exports = require('./cjs/react-dom-client.production.js');\n} else {\n  module.exports = require('./cjs/react-dom-client.development.js');\n}\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = require('./lib/ReactPropTypesSecret');\n\nfunction emptyFunction() {}\nfunction emptyFunctionWithReset() {}\nemptyFunctionWithReset.resetWarningCache = emptyFunction;\n\nmodule.exports = function() {\n  function shim(props, propName, componentName, location, propFullName, secret) {\n    if (secret === ReactPropTypesSecret) {\n      // It is still safe when called from React.\n      return;\n    }\n    var err = new Error(\n      'Calling PropTypes validators directly is not supported by the `prop-types` package. ' +\n      'Use PropTypes.checkPropTypes() to call them. ' +\n      'Read more at http://fb.me/use-check-prop-types'\n    );\n    err.name = 'Invariant Violation';\n    throw err;\n  };\n  shim.isRequired = shim;\n  function getShim() {\n    return shim;\n  };\n  // Important!\n  // Keep this list in sync with production version in `./factoryWithTypeCheckers.js`.\n  var ReactPropTypes = {\n    array: shim,\n    bigint: shim,\n    bool: shim,\n    func: shim,\n    number: shim,\n    object: shim,\n    string: shim,\n    symbol: shim,\n\n    any: shim,\n    arrayOf: getShim,\n    element: shim,\n    elementType: shim,\n    instanceOf: getShim,\n    node: shim,\n    objectOf: getShim,\n    oneOf: getShim,\n    oneOfType: getShim,\n    shape: getShim,\n    exact: getShim,\n\n    checkPropTypes: emptyFunctionWithReset,\n    resetWarningCache: emptyFunction\n  };\n\n  ReactPropTypes.PropTypes = ReactPropTypes;\n\n  return ReactPropTypes;\n};\n","!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define([],t):\"object\"==typeof exports?exports.trimCanvas=t():e.trimCanvas=t()}(this,function(){return function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var r={};return t.m=e,t.c=r,t.p=\"\",t(0)}([function(e,t){\"use strict\";function r(e){var t=e.getContext(\"2d\"),r=e.width,n=e.height,o=t.getImageData(0,0,r,n).data,f=a(!0,r,n,o),i=a(!1,r,n,o),c=u(!0,r,n,o),d=u(!1,r,n,o),p=d-c+1,l=i-f+1,s=t.getImageData(c,f,p,l);return e.width=p,e.height=l,t.clearRect(0,0,p,l),t.putImageData(s,0,0),e}function n(e,t,r,n){return{red:n[4*(r*t+e)],green:n[4*(r*t+e)+1],blue:n[4*(r*t+e)+2],alpha:n[4*(r*t+e)+3]}}function o(e,t,r,o){return n(e,t,r,o).alpha}function a(e,t,r,n){for(var a=e?1:-1,u=e?0:r-1,f=u;e?f<r:f>-1;f+=a)for(var i=0;i<t;i++)if(o(i,f,t,n))return f;return null}function u(e,t,r,n){for(var a=e?1:-1,u=e?0:t-1,f=u;e?f<t:f>-1;f+=a)for(var i=0;i<r;i++)if(o(f,i,t,n))return f;return null}Object.defineProperty(t,\"__esModule\",{value:!0}),t.default=r}])});","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-jsx-runtime.production.js');\n} else {\n  module.exports = require('./cjs/react-jsx-runtime.development.js');\n}\n","/**\n * @license React\n * react-dom.production.js\n *\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\"use strict\";\nvar React = require(\"react\");\nfunction formatProdErrorMessage(code) {\n  var url = \"https://react.dev/errors/\" + code;\n  if (1 < arguments.length) {\n    url += \"?args[]=\" + encodeURIComponent(arguments[1]);\n    for (var i = 2; i < arguments.length; i++)\n      url += \"&args[]=\" + encodeURIComponent(arguments[i]);\n  }\n  return (\n    \"Minified React error #\" +\n    code +\n    \"; visit \" +\n    url +\n    \" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.\"\n  );\n}\nfunction noop() {}\nvar Internals = {\n    d: {\n      f: noop,\n      r: function () {\n        throw Error(formatProdErrorMessage(522));\n      },\n      D: noop,\n      C: noop,\n      L: noop,\n      m: noop,\n      X: noop,\n      S: noop,\n      M: noop\n    },\n    p: 0,\n    findDOMNode: null\n  },\n  REACT_PORTAL_TYPE = Symbol.for(\"react.portal\");\nfunction createPortal$1(children, containerInfo, implementation) {\n  var key =\n    3 < arguments.length && void 0 !== arguments[3] ? arguments[3] : null;\n  return {\n    $$typeof: REACT_PORTAL_TYPE,\n    key: null == key ? null : \"\" + key,\n    children: children,\n    containerInfo: containerInfo,\n    implementation: implementation\n  };\n}\nvar ReactSharedInternals =\n  React.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;\nfunction getCrossOriginStringAs(as, input) {\n  if (\"font\" === as) return \"\";\n  if (\"string\" === typeof input)\n    return \"use-credentials\" === input ? input : \"\";\n}\nexports.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE =\n  Internals;\nexports.createPortal = function (children, container) {\n  var key =\n    2 < arguments.length && void 0 !== arguments[2] ? arguments[2] : null;\n  if (\n    !container ||\n    (1 !== container.nodeType &&\n      9 !== container.nodeType &&\n      11 !== container.nodeType)\n  )\n    throw Error(formatProdErrorMessage(299));\n  return createPortal$1(children, container, null, key);\n};\nexports.flushSync = function (fn) {\n  var previousTransition = ReactSharedInternals.T,\n    previousUpdatePriority = Internals.p;\n  try {\n    if (((ReactSharedInternals.T = null), (Internals.p = 2), fn)) return fn();\n  } finally {\n    (ReactSharedInternals.T = previousTransition),\n      (Internals.p = previousUpdatePriority),\n      Internals.d.f();\n  }\n};\nexports.preconnect = function (href, options) {\n  \"string\" === typeof href &&\n    (options\n      ? ((options = options.crossOrigin),\n        (options =\n          \"string\" === typeof options\n            ? \"use-credentials\" === options\n              ? options\n              : \"\"\n            : void 0))\n      : (options = null),\n    Internals.d.C(href, options));\n};\nexports.prefetchDNS = function (href) {\n  \"string\" === typeof href && Internals.d.D(href);\n};\nexports.preinit = function (href, options) {\n  if (\"string\" === typeof href && options && \"string\" === typeof options.as) {\n    var as = options.as,\n      crossOrigin = getCrossOriginStringAs(as, options.crossOrigin),\n      integrity =\n        \"string\" === typeof options.integrity ? options.integrity : void 0,\n      fetchPriority =\n        \"string\" === typeof options.fetchPriority\n          ? options.fetchPriority\n          : void 0;\n    \"style\" === as\n      ? Internals.d.S(\n          href,\n          \"string\" === typeof options.precedence ? options.precedence : void 0,\n          {\n            crossOrigin: crossOrigin,\n            integrity: integrity,\n            fetchPriority: fetchPriority\n          }\n        )\n      : \"script\" === as &&\n        Internals.d.X(href, {\n          crossOrigin: crossOrigin,\n          integrity: integrity,\n          fetchPriority: fetchPriority,\n          nonce: \"string\" === typeof options.nonce ? options.nonce : void 0\n        });\n  }\n};\nexports.preinitModule = function (href, options) {\n  if (\"string\" === typeof href)\n    if (\"object\" === typeof options && null !== options) {\n      if (null == options.as || \"script\" === options.as) {\n        var crossOrigin = getCrossOriginStringAs(\n          options.as,\n          options.crossOrigin\n        );\n        Internals.d.M(href, {\n          crossOrigin: crossOrigin,\n          integrity:\n            \"string\" === typeof options.integrity ? options.integrity : void 0,\n          nonce: \"string\" === typeof options.nonce ? options.nonce : void 0\n        });\n      }\n    } else null == options && Internals.d.M(href);\n};\nexports.preload = function (href, options) {\n  if (\n    \"string\" === typeof href &&\n    \"object\" === typeof options &&\n    null !== options &&\n    \"string\" === typeof options.as\n  ) {\n    var as = options.as,\n      crossOrigin = getCrossOriginStringAs(as, options.crossOrigin);\n    Internals.d.L(href, as, {\n      crossOrigin: crossOrigin,\n      integrity:\n        \"string\" === typeof options.integrity ? options.integrity : void 0,\n      nonce: \"string\" === typeof options.nonce ? options.nonce : void 0,\n      type: \"string\" === typeof options.type ? options.type : void 0,\n      fetchPriority:\n        \"string\" === typeof options.fetchPriority\n          ? options.fetchPriority\n          : void 0,\n      referrerPolicy:\n        \"string\" === typeof options.referrerPolicy\n          ? options.referrerPolicy\n          : void 0,\n      imageSrcSet:\n        \"string\" === typeof options.imageSrcSet ? options.imageSrcSet : void 0,\n      imageSizes:\n        \"string\" === typeof options.imageSizes ? options.imageSizes : void 0,\n      media: \"string\" === typeof options.media ? options.media : void 0\n    });\n  }\n};\nexports.preloadModule = function (href, options) {\n  if (\"string\" === typeof href)\n    if (options) {\n      var crossOrigin = getCrossOriginStringAs(options.as, options.crossOrigin);\n      Internals.d.m(href, {\n        as:\n          \"string\" === typeof options.as && \"script\" !== options.as\n            ? options.as\n            : void 0,\n        crossOrigin: crossOrigin,\n        integrity:\n          \"string\" === typeof options.integrity ? options.integrity : void 0\n      });\n    } else Internals.d.m(href);\n};\nexports.requestFormReset = function (form) {\n  Internals.d.r(form);\n};\nexports.unstable_batchedUpdates = function (fn, a) {\n  return fn(a);\n};\nexports.useFormState = function (action, initialState, permalink) {\n  return ReactSharedInternals.H.useFormState(action, initialState, permalink);\n};\nexports.useFormStatus = function () {\n  return ReactSharedInternals.H.useHostTransitionStatus();\n};\nexports.version = \"19.1.0\";\n","/**\n * @license React\n * react-jsx-runtime.production.js\n *\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\"use strict\";\nvar REACT_ELEMENT_TYPE = Symbol.for(\"react.transitional.element\"),\n  REACT_FRAGMENT_TYPE = Symbol.for(\"react.fragment\");\nfunction jsxProd(type, config, maybeKey) {\n  var key = null;\n  void 0 !== maybeKey && (key = \"\" + maybeKey);\n  void 0 !== config.key && (key = \"\" + config.key);\n  if (\"key\" in config) {\n    maybeKey = {};\n    for (var propName in config)\n      \"key\" !== propName && (maybeKey[propName] = config[propName]);\n  } else maybeKey = config;\n  config = maybeKey.ref;\n  return {\n    $$typeof: REACT_ELEMENT_TYPE,\n    type: type,\n    key: key,\n    ref: void 0 !== config ? config : null,\n    props: maybeKey\n  };\n}\nexports.Fragment = REACT_FRAGMENT_TYPE;\nexports.jsx = jsxProd;\nexports.jsxs = jsxProd;\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/scheduler.production.js');\n} else {\n  module.exports = require('./cjs/scheduler.development.js');\n}\n","/**\n * @license React\n * scheduler.production.js\n *\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\"use strict\";\nfunction push(heap, node) {\n  var index = heap.length;\n  heap.push(node);\n  a: for (; 0 < index; ) {\n    var parentIndex = (index - 1) >>> 1,\n      parent = heap[parentIndex];\n    if (0 < compare(parent, node))\n      (heap[parentIndex] = node), (heap[index] = parent), (index = parentIndex);\n    else break a;\n  }\n}\nfunction peek(heap) {\n  return 0 === heap.length ? null : heap[0];\n}\nfunction pop(heap) {\n  if (0 === heap.length) return null;\n  var first = heap[0],\n    last = heap.pop();\n  if (last !== first) {\n    heap[0] = last;\n    a: for (\n      var index = 0, length = heap.length, halfLength = length >>> 1;\n      index < halfLength;\n\n    ) {\n      var leftIndex = 2 * (index + 1) - 1,\n        left = heap[leftIndex],\n        rightIndex = leftIndex + 1,\n        right = heap[rightIndex];\n      if (0 > compare(left, last))\n        rightIndex < length && 0 > compare(right, left)\n          ? ((heap[index] = right),\n            (heap[rightIndex] = last),\n            (index = rightIndex))\n          : ((heap[index] = left),\n            (heap[leftIndex] = last),\n            (index = leftIndex));\n      else if (rightIndex < length && 0 > compare(right, last))\n        (heap[index] = right), (heap[rightIndex] = last), (index = rightIndex);\n      else break a;\n    }\n  }\n  return first;\n}\nfunction compare(a, b) {\n  var diff = a.sortIndex - b.sortIndex;\n  return 0 !== diff ? diff : a.id - b.id;\n}\nexports.unstable_now = void 0;\nif (\"object\" === typeof performance && \"function\" === typeof performance.now) {\n  var localPerformance = performance;\n  exports.unstable_now = function () {\n    return localPerformance.now();\n  };\n} else {\n  var localDate = Date,\n    initialTime = localDate.now();\n  exports.unstable_now = function () {\n    return localDate.now() - initialTime;\n  };\n}\nvar taskQueue = [],\n  timerQueue = [],\n  taskIdCounter = 1,\n  currentTask = null,\n  currentPriorityLevel = 3,\n  isPerformingWork = !1,\n  isHostCallbackScheduled = !1,\n  isHostTimeoutScheduled = !1,\n  needsPaint = !1,\n  localSetTimeout = \"function\" === typeof setTimeout ? setTimeout : null,\n  localClearTimeout = \"function\" === typeof clearTimeout ? clearTimeout : null,\n  localSetImmediate = \"undefined\" !== typeof setImmediate ? setImmediate : null;\nfunction advanceTimers(currentTime) {\n  for (var timer = peek(timerQueue); null !== timer; ) {\n    if (null === timer.callback) pop(timerQueue);\n    else if (timer.startTime <= currentTime)\n      pop(timerQueue),\n        (timer.sortIndex = timer.expirationTime),\n        push(taskQueue, timer);\n    else break;\n    timer = peek(timerQueue);\n  }\n}\nfunction handleTimeout(currentTime) {\n  isHostTimeoutScheduled = !1;\n  advanceTimers(currentTime);\n  if (!isHostCallbackScheduled)\n    if (null !== peek(taskQueue))\n      (isHostCallbackScheduled = !0),\n        isMessageLoopRunning ||\n          ((isMessageLoopRunning = !0), schedulePerformWorkUntilDeadline());\n    else {\n      var firstTimer = peek(timerQueue);\n      null !== firstTimer &&\n        requestHostTimeout(handleTimeout, firstTimer.startTime - currentTime);\n    }\n}\nvar isMessageLoopRunning = !1,\n  taskTimeoutID = -1,\n  frameInterval = 5,\n  startTime = -1;\nfunction shouldYieldToHost() {\n  return needsPaint\n    ? !0\n    : exports.unstable_now() - startTime < frameInterval\n      ? !1\n      : !0;\n}\nfunction performWorkUntilDeadline() {\n  needsPaint = !1;\n  if (isMessageLoopRunning) {\n    var currentTime = exports.unstable_now();\n    startTime = currentTime;\n    var hasMoreWork = !0;\n    try {\n      a: {\n        isHostCallbackScheduled = !1;\n        isHostTimeoutScheduled &&\n          ((isHostTimeoutScheduled = !1),\n          localClearTimeout(taskTimeoutID),\n          (taskTimeoutID = -1));\n        isPerformingWork = !0;\n        var previousPriorityLevel = currentPriorityLevel;\n        try {\n          b: {\n            advanceTimers(currentTime);\n            for (\n              currentTask = peek(taskQueue);\n              null !== currentTask &&\n              !(\n                currentTask.expirationTime > currentTime && shouldYieldToHost()\n              );\n\n            ) {\n              var callback = currentTask.callback;\n              if (\"function\" === typeof callback) {\n                currentTask.callback = null;\n                currentPriorityLevel = currentTask.priorityLevel;\n                var continuationCallback = callback(\n                  currentTask.expirationTime <= currentTime\n                );\n                currentTime = exports.unstable_now();\n                if (\"function\" === typeof continuationCallback) {\n                  currentTask.callback = continuationCallback;\n                  advanceTimers(currentTime);\n                  hasMoreWork = !0;\n                  break b;\n                }\n                currentTask === peek(taskQueue) && pop(taskQueue);\n                advanceTimers(currentTime);\n              } else pop(taskQueue);\n              currentTask = peek(taskQueue);\n            }\n            if (null !== currentTask) hasMoreWork = !0;\n            else {\n              var firstTimer = peek(timerQueue);\n              null !== firstTimer &&\n                requestHostTimeout(\n                  handleTimeout,\n                  firstTimer.startTime - currentTime\n                );\n              hasMoreWork = !1;\n            }\n          }\n          break a;\n        } finally {\n          (currentTask = null),\n            (currentPriorityLevel = previousPriorityLevel),\n            (isPerformingWork = !1);\n        }\n        hasMoreWork = void 0;\n      }\n    } finally {\n      hasMoreWork\n        ? schedulePerformWorkUntilDeadline()\n        : (isMessageLoopRunning = !1);\n    }\n  }\n}\nvar schedulePerformWorkUntilDeadline;\nif (\"function\" === typeof localSetImmediate)\n  schedulePerformWorkUntilDeadline = function () {\n    localSetImmediate(performWorkUntilDeadline);\n  };\nelse if (\"undefined\" !== typeof MessageChannel) {\n  var channel = new MessageChannel(),\n    port = channel.port2;\n  channel.port1.onmessage = performWorkUntilDeadline;\n  schedulePerformWorkUntilDeadline = function () {\n    port.postMessage(null);\n  };\n} else\n  schedulePerformWorkUntilDeadline = function () {\n    localSetTimeout(performWorkUntilDeadline, 0);\n  };\nfunction requestHostTimeout(callback, ms) {\n  taskTimeoutID = localSetTimeout(function () {\n    callback(exports.unstable_now());\n  }, ms);\n}\nexports.unstable_IdlePriority = 5;\nexports.unstable_ImmediatePriority = 1;\nexports.unstable_LowPriority = 4;\nexports.unstable_NormalPriority = 3;\nexports.unstable_Profiling = null;\nexports.unstable_UserBlockingPriority = 2;\nexports.unstable_cancelCallback = function (task) {\n  task.callback = null;\n};\nexports.unstable_forceFrameRate = function (fps) {\n  0 > fps || 125 < fps\n    ? console.error(\n        \"forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported\"\n      )\n    : (frameInterval = 0 < fps ? Math.floor(1e3 / fps) : 5);\n};\nexports.unstable_getCurrentPriorityLevel = function () {\n  return currentPriorityLevel;\n};\nexports.unstable_next = function (eventHandler) {\n  switch (currentPriorityLevel) {\n    case 1:\n    case 2:\n    case 3:\n      var priorityLevel = 3;\n      break;\n    default:\n      priorityLevel = currentPriorityLevel;\n  }\n  var previousPriorityLevel = currentPriorityLevel;\n  currentPriorityLevel = priorityLevel;\n  try {\n    return eventHandler();\n  } finally {\n    currentPriorityLevel = previousPriorityLevel;\n  }\n};\nexports.unstable_requestPaint = function () {\n  needsPaint = !0;\n};\nexports.unstable_runWithPriority = function (priorityLevel, eventHandler) {\n  switch (priorityLevel) {\n    case 1:\n    case 2:\n    case 3:\n    case 4:\n    case 5:\n      break;\n    default:\n      priorityLevel = 3;\n  }\n  var previousPriorityLevel = currentPriorityLevel;\n  currentPriorityLevel = priorityLevel;\n  try {\n    return eventHandler();\n  } finally {\n    currentPriorityLevel = previousPriorityLevel;\n  }\n};\nexports.unstable_scheduleCallback = function (\n  priorityLevel,\n  callback,\n  options\n) {\n  var currentTime = exports.unstable_now();\n  \"object\" === typeof options && null !== options\n    ? ((options = options.delay),\n      (options =\n        \"number\" === typeof options && 0 < options\n          ? currentTime + options\n          : currentTime))\n    : (options = currentTime);\n  switch (priorityLevel) {\n    case 1:\n      var timeout = -1;\n      break;\n    case 2:\n      timeout = 250;\n      break;\n    case 5:\n      timeout = 1073741823;\n      break;\n    case 4:\n      timeout = 1e4;\n      break;\n    default:\n      timeout = 5e3;\n  }\n  timeout = options + timeout;\n  priorityLevel = {\n    id: taskIdCounter++,\n    callback: callback,\n    priorityLevel: priorityLevel,\n    startTime: options,\n    expirationTime: timeout,\n    sortIndex: -1\n  };\n  options > currentTime\n    ? ((priorityLevel.sortIndex = options),\n      push(timerQueue, priorityLevel),\n      null === peek(taskQueue) &&\n        priorityLevel === peek(timerQueue) &&\n        (isHostTimeoutScheduled\n          ? (localClearTimeout(taskTimeoutID), (taskTimeoutID = -1))\n          : (isHostTimeoutScheduled = !0),\n        requestHostTimeout(handleTimeout, options - currentTime)))\n    : ((priorityLevel.sortIndex = timeout),\n      push(taskQueue, priorityLevel),\n      isHostCallbackScheduled ||\n        isPerformingWork ||\n        ((isHostCallbackScheduled = !0),\n        isMessageLoopRunning ||\n          ((isMessageLoopRunning = !0), schedulePerformWorkUntilDeadline())));\n  return priorityLevel;\n};\nexports.unstable_shouldYield = shouldYieldToHost;\nexports.unstable_wrapCallback = function (callback) {\n  var parentPriorityLevel = currentPriorityLevel;\n  return function () {\n    var previousPriorityLevel = currentPriorityLevel;\n    currentPriorityLevel = parentPriorityLevel;\n    try {\n      return callback.apply(this, arguments);\n    } finally {\n      currentPriorityLevel = previousPriorityLevel;\n    }\n  };\n};\n","'use strict';\n\nfunction checkDCE() {\n  /* global __REACT_DEVTOOLS_GLOBAL_HOOK__ */\n  if (\n    typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ === 'undefined' ||\n    typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE !== 'function'\n  ) {\n    return;\n  }\n  if (process.env.NODE_ENV !== 'production') {\n    // This branch is unreachable because this function is only called\n    // in production, but the condition is true only in development.\n    // Therefore if the branch is still here, dead code elimination wasn't\n    // properly applied.\n    // Don't change the message. React DevTools relies on it. Also make sure\n    // this message doesn't occur elsewhere in this function, or it will cause\n    // a false positive.\n    throw new Error('^_^');\n  }\n  try {\n    // Verify that the code above has been dead code eliminated (DCE'd).\n    __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE);\n  } catch (err) {\n    // DevTools shouldn't crash React, no matter what.\n    // We should still report in case we break this code.\n    console.error(err);\n  }\n}\n\nif (process.env.NODE_ENV === 'production') {\n  // DCE check should happen before ReactDOM bundle executes so that\n  // DevTools can report bad minification during injection.\n  checkDCE();\n  module.exports = require('./cjs/react-dom.production.js');\n} else {\n  module.exports = require('./cjs/react-dom.development.js');\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import React, { useState, useEffect } from 'react';\r\nimport './Layout.css';\r\n\r\ninterface LayoutProps {\r\n  children: React.ReactNode;\r\n  sidebar?: React.ReactNode;\r\n  topHeader?: React.ReactNode;\r\n}\r\n\r\nconst Layout: React.FC<LayoutProps> = ({ children, sidebar, topHeader }) => {\r\n  const [isMobileMenuOpen, setIsMobileMenuOpen] = useState(false);\r\n  const [isMobile, setIsMobile] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const checkMobile = () => {\r\n      const mobile = window.innerWidth <= 768;\r\n      setIsMobile(mobile);\r\n      if (!mobile) {\r\n        setIsMobileMenuOpen(false);\r\n      }\r\n    };\r\n\r\n    checkMobile();\r\n    window.addEventListener('resize', checkMobile);\r\n    return () => window.removeEventListener('resize', checkMobile);\r\n  }, []);\r\n\r\n  const toggleMobileMenu = () => {\r\n    setIsMobileMenuOpen(!isMobileMenuOpen);\r\n  };\r\n\r\n  const closeMobileMenu = () => {\r\n    setIsMobileMenuOpen(false);\r\n  };\r\n\r\n  // Clone the sidebar element to pass mobile menu props\r\n  const enhancedSidebar = sidebar && React.isValidElement(sidebar) \r\n    ? React.cloneElement(sidebar as React.ReactElement<any>, {\r\n        isMobileOpen: isMobileMenuOpen,\r\n        onMobileClose: closeMobileMenu\r\n      })\r\n    : sidebar;\r\n\r\n  return (\r\n    <div className=\"layout\">\r\n      {/* Top Header */}\r\n      {topHeader && (\r\n        <header className=\"layout-top-header\">\r\n          {isMobile && (\r\n            <button \r\n              className=\"mobile-menu-toggle\"\r\n              onClick={toggleMobileMenu}\r\n              aria-label=\"פתח תפריט ניווט\"\r\n            >\r\n              <svg viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n                <path d=\"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z\"/>\r\n              </svg>\r\n            </button>\r\n          )}\r\n          {topHeader}\r\n        </header>\r\n      )}\r\n      \r\n      {/* Mobile Overlay */}\r\n      {isMobile && isMobileMenuOpen && (\r\n        <div \r\n          className=\"mobile-overlay\"\r\n          onClick={closeMobileMenu}\r\n        />\r\n      )}\r\n      \r\n      {/* Sidebar */}\r\n      {enhancedSidebar && (\r\n        <aside className={`layout-sidebar ${isMobileMenuOpen ? 'mobile-open' : ''}`}>\r\n          {enhancedSidebar}\r\n        </aside>\r\n      )}\r\n      \r\n      {/* Main Content Area */}\r\n      <div className=\"layout-main\">\r\n        {/* Content */}\r\n        <main className=\"layout-content\">\r\n          <div className=\"content-container\">\r\n            {children}\r\n          </div>\r\n        </main>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Layout;\r\n","import React, { useState } from 'react';\r\nimport { User as FirebaseUser } from 'firebase/auth';\r\nimport { User } from '../../types';\r\nimport './Navigation.css';\r\n\r\ninterface NavigationProps {\r\n  activeTab: string;\r\n  availableTabs: string[];\r\n  onTabChange: (tab: string) => void;\r\n  user?: FirebaseUser;\r\n  userProfile?: User | null;\r\n  isAdmin?: boolean;\r\n  onLogout?: () => void;\r\n  isMobileOpen?: boolean;\r\n  onMobileClose?: () => void;\r\n}\r\n\r\nconst Navigation: React.FC<NavigationProps> = ({ \r\n  activeTab, \r\n  availableTabs,\r\n  onTabChange, \r\n  user, \r\n  userProfile,\r\n  isAdmin,\r\n  onLogout,\r\n  isMobileOpen = false,\r\n  onMobileClose\r\n}) => {\r\n  // Use mobile state from Layout component if provided, otherwise use local state\r\n  const [localMobileOpen, setLocalMobileOpen] = useState(false);\r\n  const isMobileMenuOpen = isMobileOpen || localMobileOpen;\r\n  \r\n  const handleMobileClose = () => {\r\n    if (onMobileClose) {\r\n      onMobileClose();\r\n    } else {\r\n      setLocalMobileOpen(false);\r\n    }\r\n  };\r\n\r\n  const allTabs = [\r\n    { \r\n      key: 'dashboard', \r\n      label: 'לוח בקרה', \r\n      icon: (\r\n        <svg className=\"nav-icon\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n          <path d=\"M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z\"/>\r\n        </svg>\r\n      )\r\n    },\r\n    { \r\n      key: 'dailyReport', \r\n      label: 'דו\"ח יומי', \r\n      icon: (\r\n        <svg className=\"nav-icon\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n          <path d=\"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z\"/>\r\n        </svg>\r\n      )\r\n    },\r\n    { \r\n      key: 'receipts', \r\n      label: 'קבלות', \r\n      icon: (\r\n        <svg className=\"nav-icon\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n          <path d=\"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 2 2h8c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z\"/>\r\n        </svg>\r\n      )\r\n    },\r\n    { \r\n      key: 'users', \r\n      label: 'משתמשים', \r\n      icon: (\r\n        <svg className=\"nav-icon\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n          <path d=\"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z\"/>\r\n        </svg>\r\n      )\r\n    },\r\n    { \r\n      key: 'items', \r\n      label: 'ציוד', \r\n      icon: (\r\n        <svg className=\"nav-icon\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n          <path d=\"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z\"/>\r\n        </svg>\r\n      )\r\n    },\r\n    { \r\n      key: 'management', \r\n      label: 'ניהול מערכת', \r\n      icon: (\r\n        <svg className=\"nav-icon\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n          <path d=\"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z\"/>\r\n        </svg>\r\n      )\r\n    },\r\n  ];\r\n\r\n  // Filter tabs based on available tabs\r\n  const visibleTabs = allTabs.filter(tab => availableTabs.includes(tab.key));\r\n\r\n  const handleTabClick = (tab: string) => {\r\n    onTabChange(tab);\r\n    handleMobileClose();\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {/* Sidebar Navigation */}\r\n      <nav className={`navigation ${isMobileMenuOpen ? 'mobile-open' : ''}`}>\r\n        {/* Navigation Menu */}\r\n        <div className=\"nav-menu\">\r\n          <ul className=\"nav-list\">\r\n            {visibleTabs.map((tab) => (\r\n              <li key={tab.key} className=\"nav-item\">\r\n                <button\r\n                  className={`nav-link ${activeTab === tab.key ? 'nav-link-active' : ''}`}\r\n                  onClick={() => handleTabClick(tab.key)}\r\n                  title={tab.label}\r\n                >\r\n                  {tab.icon}\r\n                  <span className=\"nav-label\">{tab.label}</span>\r\n                  {activeTab === tab.key && (\r\n                    <div className=\"nav-indicator\" />\r\n                  )}\r\n                </button>\r\n              </li>\r\n            ))}\r\n          </ul>\r\n        </div>\r\n\r\n        {/* Footer */}\r\n        <div className=\"nav-footer\">\r\n          <div className=\"footer-separator\"></div>\r\n          <div className=\"footer-text\">\r\n            פותח ע\"י סק\"ש\r\n          </div>\r\n        </div>\r\n\r\n        {/* Mobile overlay - only show if not controlled by Layout */}\r\n        {!onMobileClose && isMobileMenuOpen && (\r\n          <div \r\n            className=\"mobile-overlay\"\r\n            onClick={handleMobileClose}\r\n          />\r\n        )}\r\n      </nav>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Navigation;\r\n","'use strict';\n\nexport default function bind(fn, thisArg) {\n  return function wrap() {\n    return fn.apply(thisArg, arguments);\n  };\n}\n","'use strict';\n\nimport bind from './helpers/bind.js';\n\n// utils is a library of generic helper functions non-specific to axios\n\nconst {toString} = Object.prototype;\nconst {getPrototypeOf} = Object;\nconst {iterator, toStringTag} = Symbol;\n\nconst kindOf = (cache => thing => {\n    const str = toString.call(thing);\n    return cache[str] || (cache[str] = str.slice(8, -1).toLowerCase());\n})(Object.create(null));\n\nconst kindOfTest = (type) => {\n  type = type.toLowerCase();\n  return (thing) => kindOf(thing) === type\n}\n\nconst typeOfTest = type => thing => typeof thing === type;\n\n/**\n * Determine if a value is an Array\n *\n * @param {Object} val The value to test\n *\n * @returns {boolean} True if value is an Array, otherwise false\n */\nconst {isArray} = Array;\n\n/**\n * Determine if a value is undefined\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if the value is undefined, otherwise false\n */\nconst isUndefined = typeOfTest('undefined');\n\n/**\n * Determine if a value is a Buffer\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a Buffer, otherwise false\n */\nfunction isBuffer(val) {\n  return val !== null && !isUndefined(val) && val.constructor !== null && !isUndefined(val.constructor)\n    && isFunction(val.constructor.isBuffer) && val.constructor.isBuffer(val);\n}\n\n/**\n * Determine if a value is an ArrayBuffer\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is an ArrayBuffer, otherwise false\n */\nconst isArrayBuffer = kindOfTest('ArrayBuffer');\n\n\n/**\n * Determine if a value is a view on an ArrayBuffer\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a view on an ArrayBuffer, otherwise false\n */\nfunction isArrayBufferView(val) {\n  let result;\n  if ((typeof ArrayBuffer !== 'undefined') && (ArrayBuffer.isView)) {\n    result = ArrayBuffer.isView(val);\n  } else {\n    result = (val) && (val.buffer) && (isArrayBuffer(val.buffer));\n  }\n  return result;\n}\n\n/**\n * Determine if a value is a String\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a String, otherwise false\n */\nconst isString = typeOfTest('string');\n\n/**\n * Determine if a value is a Function\n *\n * @param {*} val The value to test\n * @returns {boolean} True if value is a Function, otherwise false\n */\nconst isFunction = typeOfTest('function');\n\n/**\n * Determine if a value is a Number\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a Number, otherwise false\n */\nconst isNumber = typeOfTest('number');\n\n/**\n * Determine if a value is an Object\n *\n * @param {*} thing The value to test\n *\n * @returns {boolean} True if value is an Object, otherwise false\n */\nconst isObject = (thing) => thing !== null && typeof thing === 'object';\n\n/**\n * Determine if a value is a Boolean\n *\n * @param {*} thing The value to test\n * @returns {boolean} True if value is a Boolean, otherwise false\n */\nconst isBoolean = thing => thing === true || thing === false;\n\n/**\n * Determine if a value is a plain Object\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a plain Object, otherwise false\n */\nconst isPlainObject = (val) => {\n  if (kindOf(val) !== 'object') {\n    return false;\n  }\n\n  const prototype = getPrototypeOf(val);\n  return (prototype === null || prototype === Object.prototype || Object.getPrototypeOf(prototype) === null) && !(toStringTag in val) && !(iterator in val);\n}\n\n/**\n * Determine if a value is a Date\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a Date, otherwise false\n */\nconst isDate = kindOfTest('Date');\n\n/**\n * Determine if a value is a File\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a File, otherwise false\n */\nconst isFile = kindOfTest('File');\n\n/**\n * Determine if a value is a Blob\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a Blob, otherwise false\n */\nconst isBlob = kindOfTest('Blob');\n\n/**\n * Determine if a value is a FileList\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a File, otherwise false\n */\nconst isFileList = kindOfTest('FileList');\n\n/**\n * Determine if a value is a Stream\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a Stream, otherwise false\n */\nconst isStream = (val) => isObject(val) && isFunction(val.pipe);\n\n/**\n * Determine if a value is a FormData\n *\n * @param {*} thing The value to test\n *\n * @returns {boolean} True if value is an FormData, otherwise false\n */\nconst isFormData = (thing) => {\n  let kind;\n  return thing && (\n    (typeof FormData === 'function' && thing instanceof FormData) || (\n      isFunction(thing.append) && (\n        (kind = kindOf(thing)) === 'formdata' ||\n        // detect form-data instance\n        (kind === 'object' && isFunction(thing.toString) && thing.toString() === '[object FormData]')\n      )\n    )\n  )\n}\n\n/**\n * Determine if a value is a URLSearchParams object\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a URLSearchParams object, otherwise false\n */\nconst isURLSearchParams = kindOfTest('URLSearchParams');\n\nconst [isReadableStream, isRequest, isResponse, isHeaders] = ['ReadableStream', 'Request', 'Response', 'Headers'].map(kindOfTest);\n\n/**\n * Trim excess whitespace off the beginning and end of a string\n *\n * @param {String} str The String to trim\n *\n * @returns {String} The String freed of excess whitespace\n */\nconst trim = (str) => str.trim ?\n  str.trim() : str.replace(/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g, '');\n\n/**\n * Iterate over an Array or an Object invoking a function for each item.\n *\n * If `obj` is an Array callback will be called passing\n * the value, index, and complete array for each item.\n *\n * If 'obj' is an Object callback will be called passing\n * the value, key, and complete object for each property.\n *\n * @param {Object|Array} obj The object to iterate\n * @param {Function} fn The callback to invoke for each item\n *\n * @param {Boolean} [allOwnKeys = false]\n * @returns {any}\n */\nfunction forEach(obj, fn, {allOwnKeys = false} = {}) {\n  // Don't bother if no value provided\n  if (obj === null || typeof obj === 'undefined') {\n    return;\n  }\n\n  let i;\n  let l;\n\n  // Force an array if not already something iterable\n  if (typeof obj !== 'object') {\n    /*eslint no-param-reassign:0*/\n    obj = [obj];\n  }\n\n  if (isArray(obj)) {\n    // Iterate over array values\n    for (i = 0, l = obj.length; i < l; i++) {\n      fn.call(null, obj[i], i, obj);\n    }\n  } else {\n    // Iterate over object keys\n    const keys = allOwnKeys ? Object.getOwnPropertyNames(obj) : Object.keys(obj);\n    const len = keys.length;\n    let key;\n\n    for (i = 0; i < len; i++) {\n      key = keys[i];\n      fn.call(null, obj[key], key, obj);\n    }\n  }\n}\n\nfunction findKey(obj, key) {\n  key = key.toLowerCase();\n  const keys = Object.keys(obj);\n  let i = keys.length;\n  let _key;\n  while (i-- > 0) {\n    _key = keys[i];\n    if (key === _key.toLowerCase()) {\n      return _key;\n    }\n  }\n  return null;\n}\n\nconst _global = (() => {\n  /*eslint no-undef:0*/\n  if (typeof globalThis !== \"undefined\") return globalThis;\n  return typeof self !== \"undefined\" ? self : (typeof window !== 'undefined' ? window : global)\n})();\n\nconst isContextDefined = (context) => !isUndefined(context) && context !== _global;\n\n/**\n * Accepts varargs expecting each argument to be an object, then\n * immutably merges the properties of each object and returns result.\n *\n * When multiple objects contain the same key the later object in\n * the arguments list will take precedence.\n *\n * Example:\n *\n * ```js\n * var result = merge({foo: 123}, {foo: 456});\n * console.log(result.foo); // outputs 456\n * ```\n *\n * @param {Object} obj1 Object to merge\n *\n * @returns {Object} Result of all merge properties\n */\nfunction merge(/* obj1, obj2, obj3, ... */) {\n  const {caseless} = isContextDefined(this) && this || {};\n  const result = {};\n  const assignValue = (val, key) => {\n    const targetKey = caseless && findKey(result, key) || key;\n    if (isPlainObject(result[targetKey]) && isPlainObject(val)) {\n      result[targetKey] = merge(result[targetKey], val);\n    } else if (isPlainObject(val)) {\n      result[targetKey] = merge({}, val);\n    } else if (isArray(val)) {\n      result[targetKey] = val.slice();\n    } else {\n      result[targetKey] = val;\n    }\n  }\n\n  for (let i = 0, l = arguments.length; i < l; i++) {\n    arguments[i] && forEach(arguments[i], assignValue);\n  }\n  return result;\n}\n\n/**\n * Extends object a by mutably adding to it the properties of object b.\n *\n * @param {Object} a The object to be extended\n * @param {Object} b The object to copy properties from\n * @param {Object} thisArg The object to bind function to\n *\n * @param {Boolean} [allOwnKeys]\n * @returns {Object} The resulting value of object a\n */\nconst extend = (a, b, thisArg, {allOwnKeys}= {}) => {\n  forEach(b, (val, key) => {\n    if (thisArg && isFunction(val)) {\n      a[key] = bind(val, thisArg);\n    } else {\n      a[key] = val;\n    }\n  }, {allOwnKeys});\n  return a;\n}\n\n/**\n * Remove byte order marker. This catches EF BB BF (the UTF-8 BOM)\n *\n * @param {string} content with BOM\n *\n * @returns {string} content value without BOM\n */\nconst stripBOM = (content) => {\n  if (content.charCodeAt(0) === 0xFEFF) {\n    content = content.slice(1);\n  }\n  return content;\n}\n\n/**\n * Inherit the prototype methods from one constructor into another\n * @param {function} constructor\n * @param {function} superConstructor\n * @param {object} [props]\n * @param {object} [descriptors]\n *\n * @returns {void}\n */\nconst inherits = (constructor, superConstructor, props, descriptors) => {\n  constructor.prototype = Object.create(superConstructor.prototype, descriptors);\n  constructor.prototype.constructor = constructor;\n  Object.defineProperty(constructor, 'super', {\n    value: superConstructor.prototype\n  });\n  props && Object.assign(constructor.prototype, props);\n}\n\n/**\n * Resolve object with deep prototype chain to a flat object\n * @param {Object} sourceObj source object\n * @param {Object} [destObj]\n * @param {Function|Boolean} [filter]\n * @param {Function} [propFilter]\n *\n * @returns {Object}\n */\nconst toFlatObject = (sourceObj, destObj, filter, propFilter) => {\n  let props;\n  let i;\n  let prop;\n  const merged = {};\n\n  destObj = destObj || {};\n  // eslint-disable-next-line no-eq-null,eqeqeq\n  if (sourceObj == null) return destObj;\n\n  do {\n    props = Object.getOwnPropertyNames(sourceObj);\n    i = props.length;\n    while (i-- > 0) {\n      prop = props[i];\n      if ((!propFilter || propFilter(prop, sourceObj, destObj)) && !merged[prop]) {\n        destObj[prop] = sourceObj[prop];\n        merged[prop] = true;\n      }\n    }\n    sourceObj = filter !== false && getPrototypeOf(sourceObj);\n  } while (sourceObj && (!filter || filter(sourceObj, destObj)) && sourceObj !== Object.prototype);\n\n  return destObj;\n}\n\n/**\n * Determines whether a string ends with the characters of a specified string\n *\n * @param {String} str\n * @param {String} searchString\n * @param {Number} [position= 0]\n *\n * @returns {boolean}\n */\nconst endsWith = (str, searchString, position) => {\n  str = String(str);\n  if (position === undefined || position > str.length) {\n    position = str.length;\n  }\n  position -= searchString.length;\n  const lastIndex = str.indexOf(searchString, position);\n  return lastIndex !== -1 && lastIndex === position;\n}\n\n\n/**\n * Returns new array from array like object or null if failed\n *\n * @param {*} [thing]\n *\n * @returns {?Array}\n */\nconst toArray = (thing) => {\n  if (!thing) return null;\n  if (isArray(thing)) return thing;\n  let i = thing.length;\n  if (!isNumber(i)) return null;\n  const arr = new Array(i);\n  while (i-- > 0) {\n    arr[i] = thing[i];\n  }\n  return arr;\n}\n\n/**\n * Checking if the Uint8Array exists and if it does, it returns a function that checks if the\n * thing passed in is an instance of Uint8Array\n *\n * @param {TypedArray}\n *\n * @returns {Array}\n */\n// eslint-disable-next-line func-names\nconst isTypedArray = (TypedArray => {\n  // eslint-disable-next-line func-names\n  return thing => {\n    return TypedArray && thing instanceof TypedArray;\n  };\n})(typeof Uint8Array !== 'undefined' && getPrototypeOf(Uint8Array));\n\n/**\n * For each entry in the object, call the function with the key and value.\n *\n * @param {Object<any, any>} obj - The object to iterate over.\n * @param {Function} fn - The function to call for each entry.\n *\n * @returns {void}\n */\nconst forEachEntry = (obj, fn) => {\n  const generator = obj && obj[iterator];\n\n  const _iterator = generator.call(obj);\n\n  let result;\n\n  while ((result = _iterator.next()) && !result.done) {\n    const pair = result.value;\n    fn.call(obj, pair[0], pair[1]);\n  }\n}\n\n/**\n * It takes a regular expression and a string, and returns an array of all the matches\n *\n * @param {string} regExp - The regular expression to match against.\n * @param {string} str - The string to search.\n *\n * @returns {Array<boolean>}\n */\nconst matchAll = (regExp, str) => {\n  let matches;\n  const arr = [];\n\n  while ((matches = regExp.exec(str)) !== null) {\n    arr.push(matches);\n  }\n\n  return arr;\n}\n\n/* Checking if the kindOfTest function returns true when passed an HTMLFormElement. */\nconst isHTMLForm = kindOfTest('HTMLFormElement');\n\nconst toCamelCase = str => {\n  return str.toLowerCase().replace(/[-_\\s]([a-z\\d])(\\w*)/g,\n    function replacer(m, p1, p2) {\n      return p1.toUpperCase() + p2;\n    }\n  );\n};\n\n/* Creating a function that will check if an object has a property. */\nconst hasOwnProperty = (({hasOwnProperty}) => (obj, prop) => hasOwnProperty.call(obj, prop))(Object.prototype);\n\n/**\n * Determine if a value is a RegExp object\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a RegExp object, otherwise false\n */\nconst isRegExp = kindOfTest('RegExp');\n\nconst reduceDescriptors = (obj, reducer) => {\n  const descriptors = Object.getOwnPropertyDescriptors(obj);\n  const reducedDescriptors = {};\n\n  forEach(descriptors, (descriptor, name) => {\n    let ret;\n    if ((ret = reducer(descriptor, name, obj)) !== false) {\n      reducedDescriptors[name] = ret || descriptor;\n    }\n  });\n\n  Object.defineProperties(obj, reducedDescriptors);\n}\n\n/**\n * Makes all methods read-only\n * @param {Object} obj\n */\n\nconst freezeMethods = (obj) => {\n  reduceDescriptors(obj, (descriptor, name) => {\n    // skip restricted props in strict mode\n    if (isFunction(obj) && ['arguments', 'caller', 'callee'].indexOf(name) !== -1) {\n      return false;\n    }\n\n    const value = obj[name];\n\n    if (!isFunction(value)) return;\n\n    descriptor.enumerable = false;\n\n    if ('writable' in descriptor) {\n      descriptor.writable = false;\n      return;\n    }\n\n    if (!descriptor.set) {\n      descriptor.set = () => {\n        throw Error('Can not rewrite read-only method \\'' + name + '\\'');\n      };\n    }\n  });\n}\n\nconst toObjectSet = (arrayOrString, delimiter) => {\n  const obj = {};\n\n  const define = (arr) => {\n    arr.forEach(value => {\n      obj[value] = true;\n    });\n  }\n\n  isArray(arrayOrString) ? define(arrayOrString) : define(String(arrayOrString).split(delimiter));\n\n  return obj;\n}\n\nconst noop = () => {}\n\nconst toFiniteNumber = (value, defaultValue) => {\n  return value != null && Number.isFinite(value = +value) ? value : defaultValue;\n}\n\n/**\n * If the thing is a FormData object, return true, otherwise return false.\n *\n * @param {unknown} thing - The thing to check.\n *\n * @returns {boolean}\n */\nfunction isSpecCompliantForm(thing) {\n  return !!(thing && isFunction(thing.append) && thing[toStringTag] === 'FormData' && thing[iterator]);\n}\n\nconst toJSONObject = (obj) => {\n  const stack = new Array(10);\n\n  const visit = (source, i) => {\n\n    if (isObject(source)) {\n      if (stack.indexOf(source) >= 0) {\n        return;\n      }\n\n      if(!('toJSON' in source)) {\n        stack[i] = source;\n        const target = isArray(source) ? [] : {};\n\n        forEach(source, (value, key) => {\n          const reducedValue = visit(value, i + 1);\n          !isUndefined(reducedValue) && (target[key] = reducedValue);\n        });\n\n        stack[i] = undefined;\n\n        return target;\n      }\n    }\n\n    return source;\n  }\n\n  return visit(obj, 0);\n}\n\nconst isAsyncFn = kindOfTest('AsyncFunction');\n\nconst isThenable = (thing) =>\n  thing && (isObject(thing) || isFunction(thing)) && isFunction(thing.then) && isFunction(thing.catch);\n\n// original code\n// https://github.com/DigitalBrainJS/AxiosPromise/blob/16deab13710ec09779922131f3fa5954320f83ab/lib/utils.js#L11-L34\n\nconst _setImmediate = ((setImmediateSupported, postMessageSupported) => {\n  if (setImmediateSupported) {\n    return setImmediate;\n  }\n\n  return postMessageSupported ? ((token, callbacks) => {\n    _global.addEventListener(\"message\", ({source, data}) => {\n      if (source === _global && data === token) {\n        callbacks.length && callbacks.shift()();\n      }\n    }, false);\n\n    return (cb) => {\n      callbacks.push(cb);\n      _global.postMessage(token, \"*\");\n    }\n  })(`axios@${Math.random()}`, []) : (cb) => setTimeout(cb);\n})(\n  typeof setImmediate === 'function',\n  isFunction(_global.postMessage)\n);\n\nconst asap = typeof queueMicrotask !== 'undefined' ?\n  queueMicrotask.bind(_global) : ( typeof process !== 'undefined' && process.nextTick || _setImmediate);\n\n// *********************\n\n\nconst isIterable = (thing) => thing != null && isFunction(thing[iterator]);\n\n\nexport default {\n  isArray,\n  isArrayBuffer,\n  isBuffer,\n  isFormData,\n  isArrayBufferView,\n  isString,\n  isNumber,\n  isBoolean,\n  isObject,\n  isPlainObject,\n  isReadableStream,\n  isRequest,\n  isResponse,\n  isHeaders,\n  isUndefined,\n  isDate,\n  isFile,\n  isBlob,\n  isRegExp,\n  isFunction,\n  isStream,\n  isURLSearchParams,\n  isTypedArray,\n  isFileList,\n  forEach,\n  merge,\n  extend,\n  trim,\n  stripBOM,\n  inherits,\n  toFlatObject,\n  kindOf,\n  kindOfTest,\n  endsWith,\n  toArray,\n  forEachEntry,\n  matchAll,\n  isHTMLForm,\n  hasOwnProperty,\n  hasOwnProp: hasOwnProperty, // an alias to avoid ESLint no-prototype-builtins detection\n  reduceDescriptors,\n  freezeMethods,\n  toObjectSet,\n  toCamelCase,\n  noop,\n  toFiniteNumber,\n  findKey,\n  global: _global,\n  isContextDefined,\n  isSpecCompliantForm,\n  toJSONObject,\n  isAsyncFn,\n  isThenable,\n  setImmediate: _setImmediate,\n  asap,\n  isIterable\n};\n","'use strict';\n\nimport utils from '../utils.js';\n\n/**\n * Create an Error with the specified message, config, error code, request and response.\n *\n * @param {string} message The error message.\n * @param {string} [code] The error code (for example, 'ECONNABORTED').\n * @param {Object} [config] The config.\n * @param {Object} [request] The request.\n * @param {Object} [response] The response.\n *\n * @returns {Error} The created error.\n */\nfunction AxiosError(message, code, config, request, response) {\n  Error.call(this);\n\n  if (Error.captureStackTrace) {\n    Error.captureStackTrace(this, this.constructor);\n  } else {\n    this.stack = (new Error()).stack;\n  }\n\n  this.message = message;\n  this.name = 'AxiosError';\n  code && (this.code = code);\n  config && (this.config = config);\n  request && (this.request = request);\n  if (response) {\n    this.response = response;\n    this.status = response.status ? response.status : null;\n  }\n}\n\nutils.inherits(AxiosError, Error, {\n  toJSON: function toJSON() {\n    return {\n      // Standard\n      message: this.message,\n      name: this.name,\n      // Microsoft\n      description: this.description,\n      number: this.number,\n      // Mozilla\n      fileName: this.fileName,\n      lineNumber: this.lineNumber,\n      columnNumber: this.columnNumber,\n      stack: this.stack,\n      // Axios\n      config: utils.toJSONObject(this.config),\n      code: this.code,\n      status: this.status\n    };\n  }\n});\n\nconst prototype = AxiosError.prototype;\nconst descriptors = {};\n\n[\n  'ERR_BAD_OPTION_VALUE',\n  'ERR_BAD_OPTION',\n  'ECONNABORTED',\n  'ETIMEDOUT',\n  'ERR_NETWORK',\n  'ERR_FR_TOO_MANY_REDIRECTS',\n  'ERR_DEPRECATED',\n  'ERR_BAD_RESPONSE',\n  'ERR_BAD_REQUEST',\n  'ERR_CANCELED',\n  'ERR_NOT_SUPPORT',\n  'ERR_INVALID_URL'\n// eslint-disable-next-line func-names\n].forEach(code => {\n  descriptors[code] = {value: code};\n});\n\nObject.defineProperties(AxiosError, descriptors);\nObject.defineProperty(prototype, 'isAxiosError', {value: true});\n\n// eslint-disable-next-line func-names\nAxiosError.from = (error, code, config, request, response, customProps) => {\n  const axiosError = Object.create(prototype);\n\n  utils.toFlatObject(error, axiosError, function filter(obj) {\n    return obj !== Error.prototype;\n  }, prop => {\n    return prop !== 'isAxiosError';\n  });\n\n  AxiosError.call(axiosError, error.message, code, config, request, response);\n\n  axiosError.cause = error;\n\n  axiosError.name = error.name;\n\n  customProps && Object.assign(axiosError, customProps);\n\n  return axiosError;\n};\n\nexport default AxiosError;\n","'use strict';\n\nimport utils from '../utils.js';\nimport AxiosError from '../core/AxiosError.js';\n// temporary hotfix to avoid circular references until AxiosURLSearchParams is refactored\nimport PlatformFormData from '../platform/node/classes/FormData.js';\n\n/**\n * Determines if the given thing is a array or js object.\n *\n * @param {string} thing - The object or array to be visited.\n *\n * @returns {boolean}\n */\nfunction isVisitable(thing) {\n  return utils.isPlainObject(thing) || utils.isArray(thing);\n}\n\n/**\n * It removes the brackets from the end of a string\n *\n * @param {string} key - The key of the parameter.\n *\n * @returns {string} the key without the brackets.\n */\nfunction removeBrackets(key) {\n  return utils.endsWith(key, '[]') ? key.slice(0, -2) : key;\n}\n\n/**\n * It takes a path, a key, and a boolean, and returns a string\n *\n * @param {string} path - The path to the current key.\n * @param {string} key - The key of the current object being iterated over.\n * @param {string} dots - If true, the key will be rendered with dots instead of brackets.\n *\n * @returns {string} The path to the current key.\n */\nfunction renderKey(path, key, dots) {\n  if (!path) return key;\n  return path.concat(key).map(function each(token, i) {\n    // eslint-disable-next-line no-param-reassign\n    token = removeBrackets(token);\n    return !dots && i ? '[' + token + ']' : token;\n  }).join(dots ? '.' : '');\n}\n\n/**\n * If the array is an array and none of its elements are visitable, then it's a flat array.\n *\n * @param {Array<any>} arr - The array to check\n *\n * @returns {boolean}\n */\nfunction isFlatArray(arr) {\n  return utils.isArray(arr) && !arr.some(isVisitable);\n}\n\nconst predicates = utils.toFlatObject(utils, {}, null, function filter(prop) {\n  return /^is[A-Z]/.test(prop);\n});\n\n/**\n * Convert a data object to FormData\n *\n * @param {Object} obj\n * @param {?Object} [formData]\n * @param {?Object} [options]\n * @param {Function} [options.visitor]\n * @param {Boolean} [options.metaTokens = true]\n * @param {Boolean} [options.dots = false]\n * @param {?Boolean} [options.indexes = false]\n *\n * @returns {Object}\n **/\n\n/**\n * It converts an object into a FormData object\n *\n * @param {Object<any, any>} obj - The object to convert to form data.\n * @param {string} formData - The FormData object to append to.\n * @param {Object<string, any>} options\n *\n * @returns\n */\nfunction toFormData(obj, formData, options) {\n  if (!utils.isObject(obj)) {\n    throw new TypeError('target must be an object');\n  }\n\n  // eslint-disable-next-line no-param-reassign\n  formData = formData || new (PlatformFormData || FormData)();\n\n  // eslint-disable-next-line no-param-reassign\n  options = utils.toFlatObject(options, {\n    metaTokens: true,\n    dots: false,\n    indexes: false\n  }, false, function defined(option, source) {\n    // eslint-disable-next-line no-eq-null,eqeqeq\n    return !utils.isUndefined(source[option]);\n  });\n\n  const metaTokens = options.metaTokens;\n  // eslint-disable-next-line no-use-before-define\n  const visitor = options.visitor || defaultVisitor;\n  const dots = options.dots;\n  const indexes = options.indexes;\n  const _Blob = options.Blob || typeof Blob !== 'undefined' && Blob;\n  const useBlob = _Blob && utils.isSpecCompliantForm(formData);\n\n  if (!utils.isFunction(visitor)) {\n    throw new TypeError('visitor must be a function');\n  }\n\n  function convertValue(value) {\n    if (value === null) return '';\n\n    if (utils.isDate(value)) {\n      return value.toISOString();\n    }\n\n    if (!useBlob && utils.isBlob(value)) {\n      throw new AxiosError('Blob is not supported. Use a Buffer instead.');\n    }\n\n    if (utils.isArrayBuffer(value) || utils.isTypedArray(value)) {\n      return useBlob && typeof Blob === 'function' ? new Blob([value]) : Buffer.from(value);\n    }\n\n    return value;\n  }\n\n  /**\n   * Default visitor.\n   *\n   * @param {*} value\n   * @param {String|Number} key\n   * @param {Array<String|Number>} path\n   * @this {FormData}\n   *\n   * @returns {boolean} return true to visit the each prop of the value recursively\n   */\n  function defaultVisitor(value, key, path) {\n    let arr = value;\n\n    if (value && !path && typeof value === 'object') {\n      if (utils.endsWith(key, '{}')) {\n        // eslint-disable-next-line no-param-reassign\n        key = metaTokens ? key : key.slice(0, -2);\n        // eslint-disable-next-line no-param-reassign\n        value = JSON.stringify(value);\n      } else if (\n        (utils.isArray(value) && isFlatArray(value)) ||\n        ((utils.isFileList(value) || utils.endsWith(key, '[]')) && (arr = utils.toArray(value))\n        )) {\n        // eslint-disable-next-line no-param-reassign\n        key = removeBrackets(key);\n\n        arr.forEach(function each(el, index) {\n          !(utils.isUndefined(el) || el === null) && formData.append(\n            // eslint-disable-next-line no-nested-ternary\n            indexes === true ? renderKey([key], index, dots) : (indexes === null ? key : key + '[]'),\n            convertValue(el)\n          );\n        });\n        return false;\n      }\n    }\n\n    if (isVisitable(value)) {\n      return true;\n    }\n\n    formData.append(renderKey(path, key, dots), convertValue(value));\n\n    return false;\n  }\n\n  const stack = [];\n\n  const exposedHelpers = Object.assign(predicates, {\n    defaultVisitor,\n    convertValue,\n    isVisitable\n  });\n\n  function build(value, path) {\n    if (utils.isUndefined(value)) return;\n\n    if (stack.indexOf(value) !== -1) {\n      throw Error('Circular reference detected in ' + path.join('.'));\n    }\n\n    stack.push(value);\n\n    utils.forEach(value, function each(el, key) {\n      const result = !(utils.isUndefined(el) || el === null) && visitor.call(\n        formData, el, utils.isString(key) ? key.trim() : key, path, exposedHelpers\n      );\n\n      if (result === true) {\n        build(el, path ? path.concat(key) : [key]);\n      }\n    });\n\n    stack.pop();\n  }\n\n  if (!utils.isObject(obj)) {\n    throw new TypeError('data must be an object');\n  }\n\n  build(obj);\n\n  return formData;\n}\n\nexport default toFormData;\n","'use strict';\n\nimport toFormData from './toFormData.js';\n\n/**\n * It encodes a string by replacing all characters that are not in the unreserved set with\n * their percent-encoded equivalents\n *\n * @param {string} str - The string to encode.\n *\n * @returns {string} The encoded string.\n */\nfunction encode(str) {\n  const charMap = {\n    '!': '%21',\n    \"'\": '%27',\n    '(': '%28',\n    ')': '%29',\n    '~': '%7E',\n    '%20': '+',\n    '%00': '\\x00'\n  };\n  return encodeURIComponent(str).replace(/[!'()~]|%20|%00/g, function replacer(match) {\n    return charMap[match];\n  });\n}\n\n/**\n * It takes a params object and converts it to a FormData object\n *\n * @param {Object<string, any>} params - The parameters to be converted to a FormData object.\n * @param {Object<string, any>} options - The options object passed to the Axios constructor.\n *\n * @returns {void}\n */\nfunction AxiosURLSearchParams(params, options) {\n  this._pairs = [];\n\n  params && toFormData(params, this, options);\n}\n\nconst prototype = AxiosURLSearchParams.prototype;\n\nprototype.append = function append(name, value) {\n  this._pairs.push([name, value]);\n};\n\nprototype.toString = function toString(encoder) {\n  const _encode = encoder ? function(value) {\n    return encoder.call(this, value, encode);\n  } : encode;\n\n  return this._pairs.map(function each(pair) {\n    return _encode(pair[0]) + '=' + _encode(pair[1]);\n  }, '').join('&');\n};\n\nexport default AxiosURLSearchParams;\n","'use strict';\n\nimport utils from '../utils.js';\nimport AxiosURLSearchParams from '../helpers/AxiosURLSearchParams.js';\n\n/**\n * It replaces all instances of the characters `:`, `$`, `,`, `+`, `[`, and `]` with their\n * URI encoded counterparts\n *\n * @param {string} val The value to be encoded.\n *\n * @returns {string} The encoded value.\n */\nfunction encode(val) {\n  return encodeURIComponent(val).\n    replace(/%3A/gi, ':').\n    replace(/%24/g, '$').\n    replace(/%2C/gi, ',').\n    replace(/%20/g, '+').\n    replace(/%5B/gi, '[').\n    replace(/%5D/gi, ']');\n}\n\n/**\n * Build a URL by appending params to the end\n *\n * @param {string} url The base of the url (e.g., http://www.google.com)\n * @param {object} [params] The params to be appended\n * @param {?(object|Function)} options\n *\n * @returns {string} The formatted url\n */\nexport default function buildURL(url, params, options) {\n  /*eslint no-param-reassign:0*/\n  if (!params) {\n    return url;\n  }\n  \n  const _encode = options && options.encode || encode;\n\n  if (utils.isFunction(options)) {\n    options = {\n      serialize: options\n    };\n  } \n\n  const serializeFn = options && options.serialize;\n\n  let serializedParams;\n\n  if (serializeFn) {\n    serializedParams = serializeFn(params, options);\n  } else {\n    serializedParams = utils.isURLSearchParams(params) ?\n      params.toString() :\n      new AxiosURLSearchParams(params, options).toString(_encode);\n  }\n\n  if (serializedParams) {\n    const hashmarkIndex = url.indexOf(\"#\");\n\n    if (hashmarkIndex !== -1) {\n      url = url.slice(0, hashmarkIndex);\n    }\n    url += (url.indexOf('?') === -1 ? '?' : '&') + serializedParams;\n  }\n\n  return url;\n}\n","'use strict';\n\nimport utils from './../utils.js';\n\nclass InterceptorManager {\n  constructor() {\n    this.handlers = [];\n  }\n\n  /**\n   * Add a new interceptor to the stack\n   *\n   * @param {Function} fulfilled The function to handle `then` for a `Promise`\n   * @param {Function} rejected The function to handle `reject` for a `Promise`\n   *\n   * @return {Number} An ID used to remove interceptor later\n   */\n  use(fulfilled, rejected, options) {\n    this.handlers.push({\n      fulfilled,\n      rejected,\n      synchronous: options ? options.synchronous : false,\n      runWhen: options ? options.runWhen : null\n    });\n    return this.handlers.length - 1;\n  }\n\n  /**\n   * Remove an interceptor from the stack\n   *\n   * @param {Number} id The ID that was returned by `use`\n   *\n   * @returns {Boolean} `true` if the interceptor was removed, `false` otherwise\n   */\n  eject(id) {\n    if (this.handlers[id]) {\n      this.handlers[id] = null;\n    }\n  }\n\n  /**\n   * Clear all interceptors from the stack\n   *\n   * @returns {void}\n   */\n  clear() {\n    if (this.handlers) {\n      this.handlers = [];\n    }\n  }\n\n  /**\n   * Iterate over all the registered interceptors\n   *\n   * This method is particularly useful for skipping over any\n   * interceptors that may have become `null` calling `eject`.\n   *\n   * @param {Function} fn The function to call for each interceptor\n   *\n   * @returns {void}\n   */\n  forEach(fn) {\n    utils.forEach(this.handlers, function forEachHandler(h) {\n      if (h !== null) {\n        fn(h);\n      }\n    });\n  }\n}\n\nexport default InterceptorManager;\n","'use strict';\n\nexport default {\n  silentJSONParsing: true,\n  forcedJSONParsing: true,\n  clarifyTimeoutError: false\n};\n","import URLSearchParams from './classes/URLSearchParams.js'\nimport FormData from './classes/FormData.js'\nimport Blob from './classes/Blob.js'\n\nexport default {\n  isBrowser: true,\n  classes: {\n    URLSearchParams,\n    FormData,\n    Blob\n  },\n  protocols: ['http', 'https', 'file', 'blob', 'url', 'data']\n};\n","'use strict';\n\nimport AxiosURLSearchParams from '../../../helpers/AxiosURLSearchParams.js';\nexport default typeof URLSearchParams !== 'undefined' ? URLSearchParams : AxiosURLSearchParams;\n","'use strict';\n\nexport default typeof FormData !== 'undefined' ? FormData : null;\n","'use strict'\n\nexport default typeof Blob !== 'undefined' ? Blob : null\n","const hasBrowserEnv = typeof window !== 'undefined' && typeof document !== 'undefined';\n\nconst _navigator = typeof navigator === 'object' && navigator || undefined;\n\n/**\n * Determine if we're running in a standard browser environment\n *\n * This allows axios to run in a web worker, and react-native.\n * Both environments support XMLHttpRequest, but not fully standard globals.\n *\n * web workers:\n *  typeof window -> undefined\n *  typeof document -> undefined\n *\n * react-native:\n *  navigator.product -> 'ReactNative'\n * nativescript\n *  navigator.product -> 'NativeScript' or 'NS'\n *\n * @returns {boolean}\n */\nconst hasStandardBrowserEnv = hasBrowserEnv &&\n  (!_navigator || ['ReactNative', 'NativeScript', 'NS'].indexOf(_navigator.product) < 0);\n\n/**\n * Determine if we're running in a standard browser webWorker environment\n *\n * Although the `isStandardBrowserEnv` method indicates that\n * `allows axios to run in a web worker`, the WebWorker will still be\n * filtered out due to its judgment standard\n * `typeof window !== 'undefined' && typeof document !== 'undefined'`.\n * This leads to a problem when axios post `FormData` in webWorker\n */\nconst hasStandardBrowserWebWorkerEnv = (() => {\n  return (\n    typeof WorkerGlobalScope !== 'undefined' &&\n    // eslint-disable-next-line no-undef\n    self instanceof WorkerGlobalScope &&\n    typeof self.importScripts === 'function'\n  );\n})();\n\nconst origin = hasBrowserEnv && window.location.href || 'http://localhost';\n\nexport {\n  hasBrowserEnv,\n  hasStandardBrowserWebWorkerEnv,\n  hasStandardBrowserEnv,\n  _navigator as navigator,\n  origin\n}\n","import platform from './node/index.js';\nimport * as utils from './common/utils.js';\n\nexport default {\n  ...utils,\n  ...platform\n}\n","'use strict';\n\nimport utils from '../utils.js';\n\n/**\n * It takes a string like `foo[x][y][z]` and returns an array like `['foo', 'x', 'y', 'z']\n *\n * @param {string} name - The name of the property to get.\n *\n * @returns An array of strings.\n */\nfunction parsePropPath(name) {\n  // foo[x][y][z]\n  // foo.x.y.z\n  // foo-x-y-z\n  // foo x y z\n  return utils.matchAll(/\\w+|\\[(\\w*)]/g, name).map(match => {\n    return match[0] === '[]' ? '' : match[1] || match[0];\n  });\n}\n\n/**\n * Convert an array to an object.\n *\n * @param {Array<any>} arr - The array to convert to an object.\n *\n * @returns An object with the same keys and values as the array.\n */\nfunction arrayToObject(arr) {\n  const obj = {};\n  const keys = Object.keys(arr);\n  let i;\n  const len = keys.length;\n  let key;\n  for (i = 0; i < len; i++) {\n    key = keys[i];\n    obj[key] = arr[key];\n  }\n  return obj;\n}\n\n/**\n * It takes a FormData object and returns a JavaScript object\n *\n * @param {string} formData The FormData object to convert to JSON.\n *\n * @returns {Object<string, any> | null} The converted object.\n */\nfunction formDataToJSON(formData) {\n  function buildPath(path, value, target, index) {\n    let name = path[index++];\n\n    if (name === '__proto__') return true;\n\n    const isNumericKey = Number.isFinite(+name);\n    const isLast = index >= path.length;\n    name = !name && utils.isArray(target) ? target.length : name;\n\n    if (isLast) {\n      if (utils.hasOwnProp(target, name)) {\n        target[name] = [target[name], value];\n      } else {\n        target[name] = value;\n      }\n\n      return !isNumericKey;\n    }\n\n    if (!target[name] || !utils.isObject(target[name])) {\n      target[name] = [];\n    }\n\n    const result = buildPath(path, value, target[name], index);\n\n    if (result && utils.isArray(target[name])) {\n      target[name] = arrayToObject(target[name]);\n    }\n\n    return !isNumericKey;\n  }\n\n  if (utils.isFormData(formData) && utils.isFunction(formData.entries)) {\n    const obj = {};\n\n    utils.forEachEntry(formData, (name, value) => {\n      buildPath(parsePropPath(name), value, obj, 0);\n    });\n\n    return obj;\n  }\n\n  return null;\n}\n\nexport default formDataToJSON;\n","'use strict';\n\nimport utils from '../utils.js';\nimport AxiosError from '../core/AxiosError.js';\nimport transitionalDefaults from './transitional.js';\nimport toFormData from '../helpers/toFormData.js';\nimport toURLEncodedForm from '../helpers/toURLEncodedForm.js';\nimport platform from '../platform/index.js';\nimport formDataToJSON from '../helpers/formDataToJSON.js';\n\n/**\n * It takes a string, tries to parse it, and if it fails, it returns the stringified version\n * of the input\n *\n * @param {any} rawValue - The value to be stringified.\n * @param {Function} parser - A function that parses a string into a JavaScript object.\n * @param {Function} encoder - A function that takes a value and returns a string.\n *\n * @returns {string} A stringified version of the rawValue.\n */\nfunction stringifySafely(rawValue, parser, encoder) {\n  if (utils.isString(rawValue)) {\n    try {\n      (parser || JSON.parse)(rawValue);\n      return utils.trim(rawValue);\n    } catch (e) {\n      if (e.name !== 'SyntaxError') {\n        throw e;\n      }\n    }\n  }\n\n  return (encoder || JSON.stringify)(rawValue);\n}\n\nconst defaults = {\n\n  transitional: transitionalDefaults,\n\n  adapter: ['xhr', 'http', 'fetch'],\n\n  transformRequest: [function transformRequest(data, headers) {\n    const contentType = headers.getContentType() || '';\n    const hasJSONContentType = contentType.indexOf('application/json') > -1;\n    const isObjectPayload = utils.isObject(data);\n\n    if (isObjectPayload && utils.isHTMLForm(data)) {\n      data = new FormData(data);\n    }\n\n    const isFormData = utils.isFormData(data);\n\n    if (isFormData) {\n      return hasJSONContentType ? JSON.stringify(formDataToJSON(data)) : data;\n    }\n\n    if (utils.isArrayBuffer(data) ||\n      utils.isBuffer(data) ||\n      utils.isStream(data) ||\n      utils.isFile(data) ||\n      utils.isBlob(data) ||\n      utils.isReadableStream(data)\n    ) {\n      return data;\n    }\n    if (utils.isArrayBufferView(data)) {\n      return data.buffer;\n    }\n    if (utils.isURLSearchParams(data)) {\n      headers.setContentType('application/x-www-form-urlencoded;charset=utf-8', false);\n      return data.toString();\n    }\n\n    let isFileList;\n\n    if (isObjectPayload) {\n      if (contentType.indexOf('application/x-www-form-urlencoded') > -1) {\n        return toURLEncodedForm(data, this.formSerializer).toString();\n      }\n\n      if ((isFileList = utils.isFileList(data)) || contentType.indexOf('multipart/form-data') > -1) {\n        const _FormData = this.env && this.env.FormData;\n\n        return toFormData(\n          isFileList ? {'files[]': data} : data,\n          _FormData && new _FormData(),\n          this.formSerializer\n        );\n      }\n    }\n\n    if (isObjectPayload || hasJSONContentType ) {\n      headers.setContentType('application/json', false);\n      return stringifySafely(data);\n    }\n\n    return data;\n  }],\n\n  transformResponse: [function transformResponse(data) {\n    const transitional = this.transitional || defaults.transitional;\n    const forcedJSONParsing = transitional && transitional.forcedJSONParsing;\n    const JSONRequested = this.responseType === 'json';\n\n    if (utils.isResponse(data) || utils.isReadableStream(data)) {\n      return data;\n    }\n\n    if (data && utils.isString(data) && ((forcedJSONParsing && !this.responseType) || JSONRequested)) {\n      const silentJSONParsing = transitional && transitional.silentJSONParsing;\n      const strictJSONParsing = !silentJSONParsing && JSONRequested;\n\n      try {\n        return JSON.parse(data);\n      } catch (e) {\n        if (strictJSONParsing) {\n          if (e.name === 'SyntaxError') {\n            throw AxiosError.from(e, AxiosError.ERR_BAD_RESPONSE, this, null, this.response);\n          }\n          throw e;\n        }\n      }\n    }\n\n    return data;\n  }],\n\n  /**\n   * A timeout in milliseconds to abort a request. If set to 0 (default) a\n   * timeout is not created.\n   */\n  timeout: 0,\n\n  xsrfCookieName: 'XSRF-TOKEN',\n  xsrfHeaderName: 'X-XSRF-TOKEN',\n\n  maxContentLength: -1,\n  maxBodyLength: -1,\n\n  env: {\n    FormData: platform.classes.FormData,\n    Blob: platform.classes.Blob\n  },\n\n  validateStatus: function validateStatus(status) {\n    return status >= 200 && status < 300;\n  },\n\n  headers: {\n    common: {\n      'Accept': 'application/json, text/plain, */*',\n      'Content-Type': undefined\n    }\n  }\n};\n\nutils.forEach(['delete', 'get', 'head', 'post', 'put', 'patch'], (method) => {\n  defaults.headers[method] = {};\n});\n\nexport default defaults;\n","'use strict';\n\nimport utils from '../utils.js';\nimport toFormData from './toFormData.js';\nimport platform from '../platform/index.js';\n\nexport default function toURLEncodedForm(data, options) {\n  return toFormData(data, new platform.classes.URLSearchParams(), Object.assign({\n    visitor: function(value, key, path, helpers) {\n      if (platform.isNode && utils.isBuffer(value)) {\n        this.append(key, value.toString('base64'));\n        return false;\n      }\n\n      return helpers.defaultVisitor.apply(this, arguments);\n    }\n  }, options));\n}\n","'use strict';\n\nimport utils from './../utils.js';\n\n// RawAxiosHeaders whose duplicates are ignored by node\n// c.f. https://nodejs.org/api/http.html#http_message_headers\nconst ignoreDuplicateOf = utils.toObjectSet([\n  'age', 'authorization', 'content-length', 'content-type', 'etag',\n  'expires', 'from', 'host', 'if-modified-since', 'if-unmodified-since',\n  'last-modified', 'location', 'max-forwards', 'proxy-authorization',\n  'referer', 'retry-after', 'user-agent'\n]);\n\n/**\n * Parse headers into an object\n *\n * ```\n * Date: Wed, 27 Aug 2014 08:58:49 GMT\n * Content-Type: application/json\n * Connection: keep-alive\n * Transfer-Encoding: chunked\n * ```\n *\n * @param {String} rawHeaders Headers needing to be parsed\n *\n * @returns {Object} Headers parsed into an object\n */\nexport default rawHeaders => {\n  const parsed = {};\n  let key;\n  let val;\n  let i;\n\n  rawHeaders && rawHeaders.split('\\n').forEach(function parser(line) {\n    i = line.indexOf(':');\n    key = line.substring(0, i).trim().toLowerCase();\n    val = line.substring(i + 1).trim();\n\n    if (!key || (parsed[key] && ignoreDuplicateOf[key])) {\n      return;\n    }\n\n    if (key === 'set-cookie') {\n      if (parsed[key]) {\n        parsed[key].push(val);\n      } else {\n        parsed[key] = [val];\n      }\n    } else {\n      parsed[key] = parsed[key] ? parsed[key] + ', ' + val : val;\n    }\n  });\n\n  return parsed;\n};\n","'use strict';\n\nimport utils from '../utils.js';\nimport parseHeaders from '../helpers/parseHeaders.js';\n\nconst $internals = Symbol('internals');\n\nfunction normalizeHeader(header) {\n  return header && String(header).trim().toLowerCase();\n}\n\nfunction normalizeValue(value) {\n  if (value === false || value == null) {\n    return value;\n  }\n\n  return utils.isArray(value) ? value.map(normalizeValue) : String(value);\n}\n\nfunction parseTokens(str) {\n  const tokens = Object.create(null);\n  const tokensRE = /([^\\s,;=]+)\\s*(?:=\\s*([^,;]+))?/g;\n  let match;\n\n  while ((match = tokensRE.exec(str))) {\n    tokens[match[1]] = match[2];\n  }\n\n  return tokens;\n}\n\nconst isValidHeaderName = (str) => /^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(str.trim());\n\nfunction matchHeaderValue(context, value, header, filter, isHeaderNameFilter) {\n  if (utils.isFunction(filter)) {\n    return filter.call(this, value, header);\n  }\n\n  if (isHeaderNameFilter) {\n    value = header;\n  }\n\n  if (!utils.isString(value)) return;\n\n  if (utils.isString(filter)) {\n    return value.indexOf(filter) !== -1;\n  }\n\n  if (utils.isRegExp(filter)) {\n    return filter.test(value);\n  }\n}\n\nfunction formatHeader(header) {\n  return header.trim()\n    .toLowerCase().replace(/([a-z\\d])(\\w*)/g, (w, char, str) => {\n      return char.toUpperCase() + str;\n    });\n}\n\nfunction buildAccessors(obj, header) {\n  const accessorName = utils.toCamelCase(' ' + header);\n\n  ['get', 'set', 'has'].forEach(methodName => {\n    Object.defineProperty(obj, methodName + accessorName, {\n      value: function(arg1, arg2, arg3) {\n        return this[methodName].call(this, header, arg1, arg2, arg3);\n      },\n      configurable: true\n    });\n  });\n}\n\nclass AxiosHeaders {\n  constructor(headers) {\n    headers && this.set(headers);\n  }\n\n  set(header, valueOrRewrite, rewrite) {\n    const self = this;\n\n    function setHeader(_value, _header, _rewrite) {\n      const lHeader = normalizeHeader(_header);\n\n      if (!lHeader) {\n        throw new Error('header name must be a non-empty string');\n      }\n\n      const key = utils.findKey(self, lHeader);\n\n      if(!key || self[key] === undefined || _rewrite === true || (_rewrite === undefined && self[key] !== false)) {\n        self[key || _header] = normalizeValue(_value);\n      }\n    }\n\n    const setHeaders = (headers, _rewrite) =>\n      utils.forEach(headers, (_value, _header) => setHeader(_value, _header, _rewrite));\n\n    if (utils.isPlainObject(header) || header instanceof this.constructor) {\n      setHeaders(header, valueOrRewrite)\n    } else if(utils.isString(header) && (header = header.trim()) && !isValidHeaderName(header)) {\n      setHeaders(parseHeaders(header), valueOrRewrite);\n    } else if (utils.isObject(header) && utils.isIterable(header)) {\n      let obj = {}, dest, key;\n      for (const entry of header) {\n        if (!utils.isArray(entry)) {\n          throw TypeError('Object iterator must return a key-value pair');\n        }\n\n        obj[key = entry[0]] = (dest = obj[key]) ?\n          (utils.isArray(dest) ? [...dest, entry[1]] : [dest, entry[1]]) : entry[1];\n      }\n\n      setHeaders(obj, valueOrRewrite)\n    } else {\n      header != null && setHeader(valueOrRewrite, header, rewrite);\n    }\n\n    return this;\n  }\n\n  get(header, parser) {\n    header = normalizeHeader(header);\n\n    if (header) {\n      const key = utils.findKey(this, header);\n\n      if (key) {\n        const value = this[key];\n\n        if (!parser) {\n          return value;\n        }\n\n        if (parser === true) {\n          return parseTokens(value);\n        }\n\n        if (utils.isFunction(parser)) {\n          return parser.call(this, value, key);\n        }\n\n        if (utils.isRegExp(parser)) {\n          return parser.exec(value);\n        }\n\n        throw new TypeError('parser must be boolean|regexp|function');\n      }\n    }\n  }\n\n  has(header, matcher) {\n    header = normalizeHeader(header);\n\n    if (header) {\n      const key = utils.findKey(this, header);\n\n      return !!(key && this[key] !== undefined && (!matcher || matchHeaderValue(this, this[key], key, matcher)));\n    }\n\n    return false;\n  }\n\n  delete(header, matcher) {\n    const self = this;\n    let deleted = false;\n\n    function deleteHeader(_header) {\n      _header = normalizeHeader(_header);\n\n      if (_header) {\n        const key = utils.findKey(self, _header);\n\n        if (key && (!matcher || matchHeaderValue(self, self[key], key, matcher))) {\n          delete self[key];\n\n          deleted = true;\n        }\n      }\n    }\n\n    if (utils.isArray(header)) {\n      header.forEach(deleteHeader);\n    } else {\n      deleteHeader(header);\n    }\n\n    return deleted;\n  }\n\n  clear(matcher) {\n    const keys = Object.keys(this);\n    let i = keys.length;\n    let deleted = false;\n\n    while (i--) {\n      const key = keys[i];\n      if(!matcher || matchHeaderValue(this, this[key], key, matcher, true)) {\n        delete this[key];\n        deleted = true;\n      }\n    }\n\n    return deleted;\n  }\n\n  normalize(format) {\n    const self = this;\n    const headers = {};\n\n    utils.forEach(this, (value, header) => {\n      const key = utils.findKey(headers, header);\n\n      if (key) {\n        self[key] = normalizeValue(value);\n        delete self[header];\n        return;\n      }\n\n      const normalized = format ? formatHeader(header) : String(header).trim();\n\n      if (normalized !== header) {\n        delete self[header];\n      }\n\n      self[normalized] = normalizeValue(value);\n\n      headers[normalized] = true;\n    });\n\n    return this;\n  }\n\n  concat(...targets) {\n    return this.constructor.concat(this, ...targets);\n  }\n\n  toJSON(asStrings) {\n    const obj = Object.create(null);\n\n    utils.forEach(this, (value, header) => {\n      value != null && value !== false && (obj[header] = asStrings && utils.isArray(value) ? value.join(', ') : value);\n    });\n\n    return obj;\n  }\n\n  [Symbol.iterator]() {\n    return Object.entries(this.toJSON())[Symbol.iterator]();\n  }\n\n  toString() {\n    return Object.entries(this.toJSON()).map(([header, value]) => header + ': ' + value).join('\\n');\n  }\n\n  getSetCookie() {\n    return this.get(\"set-cookie\") || [];\n  }\n\n  get [Symbol.toStringTag]() {\n    return 'AxiosHeaders';\n  }\n\n  static from(thing) {\n    return thing instanceof this ? thing : new this(thing);\n  }\n\n  static concat(first, ...targets) {\n    const computed = new this(first);\n\n    targets.forEach((target) => computed.set(target));\n\n    return computed;\n  }\n\n  static accessor(header) {\n    const internals = this[$internals] = (this[$internals] = {\n      accessors: {}\n    });\n\n    const accessors = internals.accessors;\n    const prototype = this.prototype;\n\n    function defineAccessor(_header) {\n      const lHeader = normalizeHeader(_header);\n\n      if (!accessors[lHeader]) {\n        buildAccessors(prototype, _header);\n        accessors[lHeader] = true;\n      }\n    }\n\n    utils.isArray(header) ? header.forEach(defineAccessor) : defineAccessor(header);\n\n    return this;\n  }\n}\n\nAxiosHeaders.accessor(['Content-Type', 'Content-Length', 'Accept', 'Accept-Encoding', 'User-Agent', 'Authorization']);\n\n// reserved names hotfix\nutils.reduceDescriptors(AxiosHeaders.prototype, ({value}, key) => {\n  let mapped = key[0].toUpperCase() + key.slice(1); // map `set` => `Set`\n  return {\n    get: () => value,\n    set(headerValue) {\n      this[mapped] = headerValue;\n    }\n  }\n});\n\nutils.freezeMethods(AxiosHeaders);\n\nexport default AxiosHeaders;\n","'use strict';\n\nimport utils from './../utils.js';\nimport defaults from '../defaults/index.js';\nimport AxiosHeaders from '../core/AxiosHeaders.js';\n\n/**\n * Transform the data for a request or a response\n *\n * @param {Array|Function} fns A single function or Array of functions\n * @param {?Object} response The response object\n *\n * @returns {*} The resulting transformed data\n */\nexport default function transformData(fns, response) {\n  const config = this || defaults;\n  const context = response || config;\n  const headers = AxiosHeaders.from(context.headers);\n  let data = context.data;\n\n  utils.forEach(fns, function transform(fn) {\n    data = fn.call(config, data, headers.normalize(), response ? response.status : undefined);\n  });\n\n  headers.normalize();\n\n  return data;\n}\n","'use strict';\n\nexport default function isCancel(value) {\n  return !!(value && value.__CANCEL__);\n}\n","'use strict';\n\nimport AxiosError from '../core/AxiosError.js';\nimport utils from '../utils.js';\n\n/**\n * A `CanceledError` is an object that is thrown when an operation is canceled.\n *\n * @param {string=} message The message.\n * @param {Object=} config The config.\n * @param {Object=} request The request.\n *\n * @returns {CanceledError} The created error.\n */\nfunction CanceledError(message, config, request) {\n  // eslint-disable-next-line no-eq-null,eqeqeq\n  AxiosError.call(this, message == null ? 'canceled' : message, AxiosError.ERR_CANCELED, config, request);\n  this.name = 'CanceledError';\n}\n\nutils.inherits(CanceledError, AxiosError, {\n  __CANCEL__: true\n});\n\nexport default CanceledError;\n","'use strict';\n\nimport AxiosError from './AxiosError.js';\n\n/**\n * Resolve or reject a Promise based on response status.\n *\n * @param {Function} resolve A function that resolves the promise.\n * @param {Function} reject A function that rejects the promise.\n * @param {object} response The response.\n *\n * @returns {object} The response.\n */\nexport default function settle(resolve, reject, response) {\n  const validateStatus = response.config.validateStatus;\n  if (!response.status || !validateStatus || validateStatus(response.status)) {\n    resolve(response);\n  } else {\n    reject(new AxiosError(\n      'Request failed with status code ' + response.status,\n      [AxiosError.ERR_BAD_REQUEST, AxiosError.ERR_BAD_RESPONSE][Math.floor(response.status / 100) - 4],\n      response.config,\n      response.request,\n      response\n    ));\n  }\n}\n","'use strict';\n\n/**\n * Calculate data maxRate\n * @param {Number} [samplesCount= 10]\n * @param {Number} [min= 1000]\n * @returns {Function}\n */\nfunction speedometer(samplesCount, min) {\n  samplesCount = samplesCount || 10;\n  const bytes = new Array(samplesCount);\n  const timestamps = new Array(samplesCount);\n  let head = 0;\n  let tail = 0;\n  let firstSampleTS;\n\n  min = min !== undefined ? min : 1000;\n\n  return function push(chunkLength) {\n    const now = Date.now();\n\n    const startedAt = timestamps[tail];\n\n    if (!firstSampleTS) {\n      firstSampleTS = now;\n    }\n\n    bytes[head] = chunkLength;\n    timestamps[head] = now;\n\n    let i = tail;\n    let bytesCount = 0;\n\n    while (i !== head) {\n      bytesCount += bytes[i++];\n      i = i % samplesCount;\n    }\n\n    head = (head + 1) % samplesCount;\n\n    if (head === tail) {\n      tail = (tail + 1) % samplesCount;\n    }\n\n    if (now - firstSampleTS < min) {\n      return;\n    }\n\n    const passed = startedAt && now - startedAt;\n\n    return passed ? Math.round(bytesCount * 1000 / passed) : undefined;\n  };\n}\n\nexport default speedometer;\n","/**\n * Throttle decorator\n * @param {Function} fn\n * @param {Number} freq\n * @return {Function}\n */\nfunction throttle(fn, freq) {\n  let timestamp = 0;\n  let threshold = 1000 / freq;\n  let lastArgs;\n  let timer;\n\n  const invoke = (args, now = Date.now()) => {\n    timestamp = now;\n    lastArgs = null;\n    if (timer) {\n      clearTimeout(timer);\n      timer = null;\n    }\n    fn.apply(null, args);\n  }\n\n  const throttled = (...args) => {\n    const now = Date.now();\n    const passed = now - timestamp;\n    if ( passed >= threshold) {\n      invoke(args, now);\n    } else {\n      lastArgs = args;\n      if (!timer) {\n        timer = setTimeout(() => {\n          timer = null;\n          invoke(lastArgs)\n        }, threshold - passed);\n      }\n    }\n  }\n\n  const flush = () => lastArgs && invoke(lastArgs);\n\n  return [throttled, flush];\n}\n\nexport default throttle;\n","import speedometer from \"./speedometer.js\";\nimport throttle from \"./throttle.js\";\nimport utils from \"../utils.js\";\n\nexport const progressEventReducer = (listener, isDownloadStream, freq = 3) => {\n  let bytesNotified = 0;\n  const _speedometer = speedometer(50, 250);\n\n  return throttle(e => {\n    const loaded = e.loaded;\n    const total = e.lengthComputable ? e.total : undefined;\n    const progressBytes = loaded - bytesNotified;\n    const rate = _speedometer(progressBytes);\n    const inRange = loaded <= total;\n\n    bytesNotified = loaded;\n\n    const data = {\n      loaded,\n      total,\n      progress: total ? (loaded / total) : undefined,\n      bytes: progressBytes,\n      rate: rate ? rate : undefined,\n      estimated: rate && total && inRange ? (total - loaded) / rate : undefined,\n      event: e,\n      lengthComputable: total != null,\n      [isDownloadStream ? 'download' : 'upload']: true\n    };\n\n    listener(data);\n  }, freq);\n}\n\nexport const progressEventDecorator = (total, throttled) => {\n  const lengthComputable = total != null;\n\n  return [(loaded) => throttled[0]({\n    lengthComputable,\n    total,\n    loaded\n  }), throttled[1]];\n}\n\nexport const asyncDecorator = (fn) => (...args) => utils.asap(() => fn(...args));\n","import platform from '../platform/index.js';\n\nexport default platform.hasStandardBrowserEnv ? ((origin, isMSIE) => (url) => {\n  url = new URL(url, platform.origin);\n\n  return (\n    origin.protocol === url.protocol &&\n    origin.host === url.host &&\n    (isMSIE || origin.port === url.port)\n  );\n})(\n  new URL(platform.origin),\n  platform.navigator && /(msie|trident)/i.test(platform.navigator.userAgent)\n) : () => true;\n","import utils from './../utils.js';\nimport platform from '../platform/index.js';\n\nexport default platform.hasStandardBrowserEnv ?\n\n  // Standard browser envs support document.cookie\n  {\n    write(name, value, expires, path, domain, secure) {\n      const cookie = [name + '=' + encodeURIComponent(value)];\n\n      utils.isNumber(expires) && cookie.push('expires=' + new Date(expires).toGMTString());\n\n      utils.isString(path) && cookie.push('path=' + path);\n\n      utils.isString(domain) && cookie.push('domain=' + domain);\n\n      secure === true && cookie.push('secure');\n\n      document.cookie = cookie.join('; ');\n    },\n\n    read(name) {\n      const match = document.cookie.match(new RegExp('(^|;\\\\s*)(' + name + ')=([^;]*)'));\n      return (match ? decodeURIComponent(match[3]) : null);\n    },\n\n    remove(name) {\n      this.write(name, '', Date.now() - 86400000);\n    }\n  }\n\n  :\n\n  // Non-standard browser env (web workers, react-native) lack needed support.\n  {\n    write() {},\n    read() {\n      return null;\n    },\n    remove() {}\n  };\n\n","'use strict';\n\nimport isAbsoluteURL from '../helpers/isAbsoluteURL.js';\nimport combineURLs from '../helpers/combineURLs.js';\n\n/**\n * Creates a new URL by combining the baseURL with the requestedURL,\n * only when the requestedURL is not already an absolute URL.\n * If the requestURL is absolute, this function returns the requestedURL untouched.\n *\n * @param {string} baseURL The base URL\n * @param {string} requestedURL Absolute or relative URL to combine\n *\n * @returns {string} The combined full path\n */\nexport default function buildFullPath(baseURL, requestedURL, allowAbsoluteUrls) {\n  let isRelativeUrl = !isAbsoluteURL(requestedURL);\n  if (baseURL && (isRelativeUrl || allowAbsoluteUrls == false)) {\n    return combineURLs(baseURL, requestedURL);\n  }\n  return requestedURL;\n}\n","'use strict';\n\n/**\n * Determines whether the specified URL is absolute\n *\n * @param {string} url The URL to test\n *\n * @returns {boolean} True if the specified URL is absolute, otherwise false\n */\nexport default function isAbsoluteURL(url) {\n  // A URL is considered absolute if it begins with \"<scheme>://\" or \"//\" (protocol-relative URL).\n  // RFC 3986 defines scheme name as a sequence of characters beginning with a letter and followed\n  // by any combination of letters, digits, plus, period, or hyphen.\n  return /^([a-z][a-z\\d+\\-.]*:)?\\/\\//i.test(url);\n}\n","'use strict';\n\n/**\n * Creates a new URL by combining the specified URLs\n *\n * @param {string} baseURL The base URL\n * @param {string} relativeURL The relative URL\n *\n * @returns {string} The combined URL\n */\nexport default function combineURLs(baseURL, relativeURL) {\n  return relativeURL\n    ? baseURL.replace(/\\/?\\/$/, '') + '/' + relativeURL.replace(/^\\/+/, '')\n    : baseURL;\n}\n","'use strict';\n\nimport utils from '../utils.js';\nimport AxiosHeaders from \"./AxiosHeaders.js\";\n\nconst headersToObject = (thing) => thing instanceof AxiosHeaders ? { ...thing } : thing;\n\n/**\n * Config-specific merge-function which creates a new config-object\n * by merging two configuration objects together.\n *\n * @param {Object} config1\n * @param {Object} config2\n *\n * @returns {Object} New object resulting from merging config2 to config1\n */\nexport default function mergeConfig(config1, config2) {\n  // eslint-disable-next-line no-param-reassign\n  config2 = config2 || {};\n  const config = {};\n\n  function getMergedValue(target, source, prop, caseless) {\n    if (utils.isPlainObject(target) && utils.isPlainObject(source)) {\n      return utils.merge.call({caseless}, target, source);\n    } else if (utils.isPlainObject(source)) {\n      return utils.merge({}, source);\n    } else if (utils.isArray(source)) {\n      return source.slice();\n    }\n    return source;\n  }\n\n  // eslint-disable-next-line consistent-return\n  function mergeDeepProperties(a, b, prop , caseless) {\n    if (!utils.isUndefined(b)) {\n      return getMergedValue(a, b, prop , caseless);\n    } else if (!utils.isUndefined(a)) {\n      return getMergedValue(undefined, a, prop , caseless);\n    }\n  }\n\n  // eslint-disable-next-line consistent-return\n  function valueFromConfig2(a, b) {\n    if (!utils.isUndefined(b)) {\n      return getMergedValue(undefined, b);\n    }\n  }\n\n  // eslint-disable-next-line consistent-return\n  function defaultToConfig2(a, b) {\n    if (!utils.isUndefined(b)) {\n      return getMergedValue(undefined, b);\n    } else if (!utils.isUndefined(a)) {\n      return getMergedValue(undefined, a);\n    }\n  }\n\n  // eslint-disable-next-line consistent-return\n  function mergeDirectKeys(a, b, prop) {\n    if (prop in config2) {\n      return getMergedValue(a, b);\n    } else if (prop in config1) {\n      return getMergedValue(undefined, a);\n    }\n  }\n\n  const mergeMap = {\n    url: valueFromConfig2,\n    method: valueFromConfig2,\n    data: valueFromConfig2,\n    baseURL: defaultToConfig2,\n    transformRequest: defaultToConfig2,\n    transformResponse: defaultToConfig2,\n    paramsSerializer: defaultToConfig2,\n    timeout: defaultToConfig2,\n    timeoutMessage: defaultToConfig2,\n    withCredentials: defaultToConfig2,\n    withXSRFToken: defaultToConfig2,\n    adapter: defaultToConfig2,\n    responseType: defaultToConfig2,\n    xsrfCookieName: defaultToConfig2,\n    xsrfHeaderName: defaultToConfig2,\n    onUploadProgress: defaultToConfig2,\n    onDownloadProgress: defaultToConfig2,\n    decompress: defaultToConfig2,\n    maxContentLength: defaultToConfig2,\n    maxBodyLength: defaultToConfig2,\n    beforeRedirect: defaultToConfig2,\n    transport: defaultToConfig2,\n    httpAgent: defaultToConfig2,\n    httpsAgent: defaultToConfig2,\n    cancelToken: defaultToConfig2,\n    socketPath: defaultToConfig2,\n    responseEncoding: defaultToConfig2,\n    validateStatus: mergeDirectKeys,\n    headers: (a, b , prop) => mergeDeepProperties(headersToObject(a), headersToObject(b),prop, true)\n  };\n\n  utils.forEach(Object.keys(Object.assign({}, config1, config2)), function computeConfigValue(prop) {\n    const merge = mergeMap[prop] || mergeDeepProperties;\n    const configValue = merge(config1[prop], config2[prop], prop);\n    (utils.isUndefined(configValue) && merge !== mergeDirectKeys) || (config[prop] = configValue);\n  });\n\n  return config;\n}\n","import platform from \"../platform/index.js\";\nimport utils from \"../utils.js\";\nimport isURLSameOrigin from \"./isURLSameOrigin.js\";\nimport cookies from \"./cookies.js\";\nimport buildFullPath from \"../core/buildFullPath.js\";\nimport mergeConfig from \"../core/mergeConfig.js\";\nimport AxiosHeaders from \"../core/AxiosHeaders.js\";\nimport buildURL from \"./buildURL.js\";\n\nexport default (config) => {\n  const newConfig = mergeConfig({}, config);\n\n  let {data, withXSRFToken, xsrfHeaderName, xsrfCookieName, headers, auth} = newConfig;\n\n  newConfig.headers = headers = AxiosHeaders.from(headers);\n\n  newConfig.url = buildURL(buildFullPath(newConfig.baseURL, newConfig.url, newConfig.allowAbsoluteUrls), config.params, config.paramsSerializer);\n\n  // HTTP basic authentication\n  if (auth) {\n    headers.set('Authorization', 'Basic ' +\n      btoa((auth.username || '') + ':' + (auth.password ? unescape(encodeURIComponent(auth.password)) : ''))\n    );\n  }\n\n  let contentType;\n\n  if (utils.isFormData(data)) {\n    if (platform.hasStandardBrowserEnv || platform.hasStandardBrowserWebWorkerEnv) {\n      headers.setContentType(undefined); // Let the browser set it\n    } else if ((contentType = headers.getContentType()) !== false) {\n      // fix semicolon duplication issue for ReactNative FormData implementation\n      const [type, ...tokens] = contentType ? contentType.split(';').map(token => token.trim()).filter(Boolean) : [];\n      headers.setContentType([type || 'multipart/form-data', ...tokens].join('; '));\n    }\n  }\n\n  // Add xsrf header\n  // This is only done if running in a standard browser environment.\n  // Specifically not if we're in a web worker, or react-native.\n\n  if (platform.hasStandardBrowserEnv) {\n    withXSRFToken && utils.isFunction(withXSRFToken) && (withXSRFToken = withXSRFToken(newConfig));\n\n    if (withXSRFToken || (withXSRFToken !== false && isURLSameOrigin(newConfig.url))) {\n      // Add xsrf header\n      const xsrfValue = xsrfHeaderName && xsrfCookieName && cookies.read(xsrfCookieName);\n\n      if (xsrfValue) {\n        headers.set(xsrfHeaderName, xsrfValue);\n      }\n    }\n  }\n\n  return newConfig;\n}\n\n","import utils from './../utils.js';\nimport settle from './../core/settle.js';\nimport transitionalDefaults from '../defaults/transitional.js';\nimport AxiosError from '../core/AxiosError.js';\nimport CanceledError from '../cancel/CanceledError.js';\nimport parseProtocol from '../helpers/parseProtocol.js';\nimport platform from '../platform/index.js';\nimport AxiosHeaders from '../core/AxiosHeaders.js';\nimport {progressEventReducer} from '../helpers/progressEventReducer.js';\nimport resolveConfig from \"../helpers/resolveConfig.js\";\n\nconst isXHRAdapterSupported = typeof XMLHttpRequest !== 'undefined';\n\nexport default isXHRAdapterSupported && function (config) {\n  return new Promise(function dispatchXhrRequest(resolve, reject) {\n    const _config = resolveConfig(config);\n    let requestData = _config.data;\n    const requestHeaders = AxiosHeaders.from(_config.headers).normalize();\n    let {responseType, onUploadProgress, onDownloadProgress} = _config;\n    let onCanceled;\n    let uploadThrottled, downloadThrottled;\n    let flushUpload, flushDownload;\n\n    function done() {\n      flushUpload && flushUpload(); // flush events\n      flushDownload && flushDownload(); // flush events\n\n      _config.cancelToken && _config.cancelToken.unsubscribe(onCanceled);\n\n      _config.signal && _config.signal.removeEventListener('abort', onCanceled);\n    }\n\n    let request = new XMLHttpRequest();\n\n    request.open(_config.method.toUpperCase(), _config.url, true);\n\n    // Set the request timeout in MS\n    request.timeout = _config.timeout;\n\n    function onloadend() {\n      if (!request) {\n        return;\n      }\n      // Prepare the response\n      const responseHeaders = AxiosHeaders.from(\n        'getAllResponseHeaders' in request && request.getAllResponseHeaders()\n      );\n      const responseData = !responseType || responseType === 'text' || responseType === 'json' ?\n        request.responseText : request.response;\n      const response = {\n        data: responseData,\n        status: request.status,\n        statusText: request.statusText,\n        headers: responseHeaders,\n        config,\n        request\n      };\n\n      settle(function _resolve(value) {\n        resolve(value);\n        done();\n      }, function _reject(err) {\n        reject(err);\n        done();\n      }, response);\n\n      // Clean up request\n      request = null;\n    }\n\n    if ('onloadend' in request) {\n      // Use onloadend if available\n      request.onloadend = onloadend;\n    } else {\n      // Listen for ready state to emulate onloadend\n      request.onreadystatechange = function handleLoad() {\n        if (!request || request.readyState !== 4) {\n          return;\n        }\n\n        // The request errored out and we didn't get a response, this will be\n        // handled by onerror instead\n        // With one exception: request that using file: protocol, most browsers\n        // will return status as 0 even though it's a successful request\n        if (request.status === 0 && !(request.responseURL && request.responseURL.indexOf('file:') === 0)) {\n          return;\n        }\n        // readystate handler is calling before onerror or ontimeout handlers,\n        // so we should call onloadend on the next 'tick'\n        setTimeout(onloadend);\n      };\n    }\n\n    // Handle browser request cancellation (as opposed to a manual cancellation)\n    request.onabort = function handleAbort() {\n      if (!request) {\n        return;\n      }\n\n      reject(new AxiosError('Request aborted', AxiosError.ECONNABORTED, config, request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Handle low level network errors\n    request.onerror = function handleError() {\n      // Real errors are hidden from us by the browser\n      // onerror should only fire if it's a network error\n      reject(new AxiosError('Network Error', AxiosError.ERR_NETWORK, config, request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Handle timeout\n    request.ontimeout = function handleTimeout() {\n      let timeoutErrorMessage = _config.timeout ? 'timeout of ' + _config.timeout + 'ms exceeded' : 'timeout exceeded';\n      const transitional = _config.transitional || transitionalDefaults;\n      if (_config.timeoutErrorMessage) {\n        timeoutErrorMessage = _config.timeoutErrorMessage;\n      }\n      reject(new AxiosError(\n        timeoutErrorMessage,\n        transitional.clarifyTimeoutError ? AxiosError.ETIMEDOUT : AxiosError.ECONNABORTED,\n        config,\n        request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Remove Content-Type if data is undefined\n    requestData === undefined && requestHeaders.setContentType(null);\n\n    // Add headers to the request\n    if ('setRequestHeader' in request) {\n      utils.forEach(requestHeaders.toJSON(), function setRequestHeader(val, key) {\n        request.setRequestHeader(key, val);\n      });\n    }\n\n    // Add withCredentials to request if needed\n    if (!utils.isUndefined(_config.withCredentials)) {\n      request.withCredentials = !!_config.withCredentials;\n    }\n\n    // Add responseType to request if needed\n    if (responseType && responseType !== 'json') {\n      request.responseType = _config.responseType;\n    }\n\n    // Handle progress if needed\n    if (onDownloadProgress) {\n      ([downloadThrottled, flushDownload] = progressEventReducer(onDownloadProgress, true));\n      request.addEventListener('progress', downloadThrottled);\n    }\n\n    // Not all browsers support upload events\n    if (onUploadProgress && request.upload) {\n      ([uploadThrottled, flushUpload] = progressEventReducer(onUploadProgress));\n\n      request.upload.addEventListener('progress', uploadThrottled);\n\n      request.upload.addEventListener('loadend', flushUpload);\n    }\n\n    if (_config.cancelToken || _config.signal) {\n      // Handle cancellation\n      // eslint-disable-next-line func-names\n      onCanceled = cancel => {\n        if (!request) {\n          return;\n        }\n        reject(!cancel || cancel.type ? new CanceledError(null, config, request) : cancel);\n        request.abort();\n        request = null;\n      };\n\n      _config.cancelToken && _config.cancelToken.subscribe(onCanceled);\n      if (_config.signal) {\n        _config.signal.aborted ? onCanceled() : _config.signal.addEventListener('abort', onCanceled);\n      }\n    }\n\n    const protocol = parseProtocol(_config.url);\n\n    if (protocol && platform.protocols.indexOf(protocol) === -1) {\n      reject(new AxiosError('Unsupported protocol ' + protocol + ':', AxiosError.ERR_BAD_REQUEST, config));\n      return;\n    }\n\n\n    // Send the request\n    request.send(requestData || null);\n  });\n}\n","'use strict';\n\nexport default function parseProtocol(url) {\n  const match = /^([-+\\w]{1,25})(:?\\/\\/|:)/.exec(url);\n  return match && match[1] || '';\n}\n","import CanceledError from \"../cancel/CanceledError.js\";\nimport AxiosError from \"../core/AxiosError.js\";\nimport utils from '../utils.js';\n\nconst composeSignals = (signals, timeout) => {\n  const {length} = (signals = signals ? signals.filter(Boolean) : []);\n\n  if (timeout || length) {\n    let controller = new AbortController();\n\n    let aborted;\n\n    const onabort = function (reason) {\n      if (!aborted) {\n        aborted = true;\n        unsubscribe();\n        const err = reason instanceof Error ? reason : this.reason;\n        controller.abort(err instanceof AxiosError ? err : new CanceledError(err instanceof Error ? err.message : err));\n      }\n    }\n\n    let timer = timeout && setTimeout(() => {\n      timer = null;\n      onabort(new AxiosError(`timeout ${timeout} of ms exceeded`, AxiosError.ETIMEDOUT))\n    }, timeout)\n\n    const unsubscribe = () => {\n      if (signals) {\n        timer && clearTimeout(timer);\n        timer = null;\n        signals.forEach(signal => {\n          signal.unsubscribe ? signal.unsubscribe(onabort) : signal.removeEventListener('abort', onabort);\n        });\n        signals = null;\n      }\n    }\n\n    signals.forEach((signal) => signal.addEventListener('abort', onabort));\n\n    const {signal} = controller;\n\n    signal.unsubscribe = () => utils.asap(unsubscribe);\n\n    return signal;\n  }\n}\n\nexport default composeSignals;\n","\nexport const streamChunk = function* (chunk, chunkSize) {\n  let len = chunk.byteLength;\n\n  if (!chunkSize || len < chunkSize) {\n    yield chunk;\n    return;\n  }\n\n  let pos = 0;\n  let end;\n\n  while (pos < len) {\n    end = pos + chunkSize;\n    yield chunk.slice(pos, end);\n    pos = end;\n  }\n}\n\nexport const readBytes = async function* (iterable, chunkSize) {\n  for await (const chunk of readStream(iterable)) {\n    yield* streamChunk(chunk, chunkSize);\n  }\n}\n\nconst readStream = async function* (stream) {\n  if (stream[Symbol.asyncIterator]) {\n    yield* stream;\n    return;\n  }\n\n  const reader = stream.getReader();\n  try {\n    for (;;) {\n      const {done, value} = await reader.read();\n      if (done) {\n        break;\n      }\n      yield value;\n    }\n  } finally {\n    await reader.cancel();\n  }\n}\n\nexport const trackStream = (stream, chunkSize, onProgress, onFinish) => {\n  const iterator = readBytes(stream, chunkSize);\n\n  let bytes = 0;\n  let done;\n  let _onFinish = (e) => {\n    if (!done) {\n      done = true;\n      onFinish && onFinish(e);\n    }\n  }\n\n  return new ReadableStream({\n    async pull(controller) {\n      try {\n        const {done, value} = await iterator.next();\n\n        if (done) {\n         _onFinish();\n          controller.close();\n          return;\n        }\n\n        let len = value.byteLength;\n        if (onProgress) {\n          let loadedBytes = bytes += len;\n          onProgress(loadedBytes);\n        }\n        controller.enqueue(new Uint8Array(value));\n      } catch (err) {\n        _onFinish(err);\n        throw err;\n      }\n    },\n    cancel(reason) {\n      _onFinish(reason);\n      return iterator.return();\n    }\n  }, {\n    highWaterMark: 2\n  })\n}\n","import platform from \"../platform/index.js\";\nimport utils from \"../utils.js\";\nimport AxiosError from \"../core/AxiosError.js\";\nimport composeSignals from \"../helpers/composeSignals.js\";\nimport {trackStream} from \"../helpers/trackStream.js\";\nimport AxiosHeaders from \"../core/AxiosHeaders.js\";\nimport {progressEventReducer, progressEventDecorator, asyncDecorator} from \"../helpers/progressEventReducer.js\";\nimport resolveConfig from \"../helpers/resolveConfig.js\";\nimport settle from \"../core/settle.js\";\n\nconst isFetchSupported = typeof fetch === 'function' && typeof Request === 'function' && typeof Response === 'function';\nconst isReadableStreamSupported = isFetchSupported && typeof ReadableStream === 'function';\n\n// used only inside the fetch adapter\nconst encodeText = isFetchSupported && (typeof TextEncoder === 'function' ?\n    ((encoder) => (str) => encoder.encode(str))(new TextEncoder()) :\n    async (str) => new Uint8Array(await new Response(str).arrayBuffer())\n);\n\nconst test = (fn, ...args) => {\n  try {\n    return !!fn(...args);\n  } catch (e) {\n    return false\n  }\n}\n\nconst supportsRequestStream = isReadableStreamSupported && test(() => {\n  let duplexAccessed = false;\n\n  const hasContentType = new Request(platform.origin, {\n    body: new ReadableStream(),\n    method: 'POST',\n    get duplex() {\n      duplexAccessed = true;\n      return 'half';\n    },\n  }).headers.has('Content-Type');\n\n  return duplexAccessed && !hasContentType;\n});\n\nconst DEFAULT_CHUNK_SIZE = 64 * 1024;\n\nconst supportsResponseStream = isReadableStreamSupported &&\n  test(() => utils.isReadableStream(new Response('').body));\n\n\nconst resolvers = {\n  stream: supportsResponseStream && ((res) => res.body)\n};\n\nisFetchSupported && (((res) => {\n  ['text', 'arrayBuffer', 'blob', 'formData', 'stream'].forEach(type => {\n    !resolvers[type] && (resolvers[type] = utils.isFunction(res[type]) ? (res) => res[type]() :\n      (_, config) => {\n        throw new AxiosError(`Response type '${type}' is not supported`, AxiosError.ERR_NOT_SUPPORT, config);\n      })\n  });\n})(new Response));\n\nconst getBodyLength = async (body) => {\n  if (body == null) {\n    return 0;\n  }\n\n  if(utils.isBlob(body)) {\n    return body.size;\n  }\n\n  if(utils.isSpecCompliantForm(body)) {\n    const _request = new Request(platform.origin, {\n      method: 'POST',\n      body,\n    });\n    return (await _request.arrayBuffer()).byteLength;\n  }\n\n  if(utils.isArrayBufferView(body) || utils.isArrayBuffer(body)) {\n    return body.byteLength;\n  }\n\n  if(utils.isURLSearchParams(body)) {\n    body = body + '';\n  }\n\n  if(utils.isString(body)) {\n    return (await encodeText(body)).byteLength;\n  }\n}\n\nconst resolveBodyLength = async (headers, body) => {\n  const length = utils.toFiniteNumber(headers.getContentLength());\n\n  return length == null ? getBodyLength(body) : length;\n}\n\nexport default isFetchSupported && (async (config) => {\n  let {\n    url,\n    method,\n    data,\n    signal,\n    cancelToken,\n    timeout,\n    onDownloadProgress,\n    onUploadProgress,\n    responseType,\n    headers,\n    withCredentials = 'same-origin',\n    fetchOptions\n  } = resolveConfig(config);\n\n  responseType = responseType ? (responseType + '').toLowerCase() : 'text';\n\n  let composedSignal = composeSignals([signal, cancelToken && cancelToken.toAbortSignal()], timeout);\n\n  let request;\n\n  const unsubscribe = composedSignal && composedSignal.unsubscribe && (() => {\n      composedSignal.unsubscribe();\n  });\n\n  let requestContentLength;\n\n  try {\n    if (\n      onUploadProgress && supportsRequestStream && method !== 'get' && method !== 'head' &&\n      (requestContentLength = await resolveBodyLength(headers, data)) !== 0\n    ) {\n      let _request = new Request(url, {\n        method: 'POST',\n        body: data,\n        duplex: \"half\"\n      });\n\n      let contentTypeHeader;\n\n      if (utils.isFormData(data) && (contentTypeHeader = _request.headers.get('content-type'))) {\n        headers.setContentType(contentTypeHeader)\n      }\n\n      if (_request.body) {\n        const [onProgress, flush] = progressEventDecorator(\n          requestContentLength,\n          progressEventReducer(asyncDecorator(onUploadProgress))\n        );\n\n        data = trackStream(_request.body, DEFAULT_CHUNK_SIZE, onProgress, flush);\n      }\n    }\n\n    if (!utils.isString(withCredentials)) {\n      withCredentials = withCredentials ? 'include' : 'omit';\n    }\n\n    // Cloudflare Workers throws when credentials are defined\n    // see https://github.com/cloudflare/workerd/issues/902\n    const isCredentialsSupported = \"credentials\" in Request.prototype;\n    request = new Request(url, {\n      ...fetchOptions,\n      signal: composedSignal,\n      method: method.toUpperCase(),\n      headers: headers.normalize().toJSON(),\n      body: data,\n      duplex: \"half\",\n      credentials: isCredentialsSupported ? withCredentials : undefined\n    });\n\n    let response = await fetch(request);\n\n    const isStreamResponse = supportsResponseStream && (responseType === 'stream' || responseType === 'response');\n\n    if (supportsResponseStream && (onDownloadProgress || (isStreamResponse && unsubscribe))) {\n      const options = {};\n\n      ['status', 'statusText', 'headers'].forEach(prop => {\n        options[prop] = response[prop];\n      });\n\n      const responseContentLength = utils.toFiniteNumber(response.headers.get('content-length'));\n\n      const [onProgress, flush] = onDownloadProgress && progressEventDecorator(\n        responseContentLength,\n        progressEventReducer(asyncDecorator(onDownloadProgress), true)\n      ) || [];\n\n      response = new Response(\n        trackStream(response.body, DEFAULT_CHUNK_SIZE, onProgress, () => {\n          flush && flush();\n          unsubscribe && unsubscribe();\n        }),\n        options\n      );\n    }\n\n    responseType = responseType || 'text';\n\n    let responseData = await resolvers[utils.findKey(resolvers, responseType) || 'text'](response, config);\n\n    !isStreamResponse && unsubscribe && unsubscribe();\n\n    return await new Promise((resolve, reject) => {\n      settle(resolve, reject, {\n        data: responseData,\n        headers: AxiosHeaders.from(response.headers),\n        status: response.status,\n        statusText: response.statusText,\n        config,\n        request\n      })\n    })\n  } catch (err) {\n    unsubscribe && unsubscribe();\n\n    if (err && err.name === 'TypeError' && /Load failed|fetch/i.test(err.message)) {\n      throw Object.assign(\n        new AxiosError('Network Error', AxiosError.ERR_NETWORK, config, request),\n        {\n          cause: err.cause || err\n        }\n      )\n    }\n\n    throw AxiosError.from(err, err && err.code, config, request);\n  }\n});\n\n\n","import utils from '../utils.js';\nimport httpAdapter from './http.js';\nimport xhrAdapter from './xhr.js';\nimport fetchAdapter from './fetch.js';\nimport AxiosError from \"../core/AxiosError.js\";\n\nconst knownAdapters = {\n  http: httpAdapter,\n  xhr: xhrAdapter,\n  fetch: fetchAdapter\n}\n\nutils.forEach(knownAdapters, (fn, value) => {\n  if (fn) {\n    try {\n      Object.defineProperty(fn, 'name', {value});\n    } catch (e) {\n      // eslint-disable-next-line no-empty\n    }\n    Object.defineProperty(fn, 'adapterName', {value});\n  }\n});\n\nconst renderReason = (reason) => `- ${reason}`;\n\nconst isResolvedHandle = (adapter) => utils.isFunction(adapter) || adapter === null || adapter === false;\n\nexport default {\n  getAdapter: (adapters) => {\n    adapters = utils.isArray(adapters) ? adapters : [adapters];\n\n    const {length} = adapters;\n    let nameOrAdapter;\n    let adapter;\n\n    const rejectedReasons = {};\n\n    for (let i = 0; i < length; i++) {\n      nameOrAdapter = adapters[i];\n      let id;\n\n      adapter = nameOrAdapter;\n\n      if (!isResolvedHandle(nameOrAdapter)) {\n        adapter = knownAdapters[(id = String(nameOrAdapter)).toLowerCase()];\n\n        if (adapter === undefined) {\n          throw new AxiosError(`Unknown adapter '${id}'`);\n        }\n      }\n\n      if (adapter) {\n        break;\n      }\n\n      rejectedReasons[id || '#' + i] = adapter;\n    }\n\n    if (!adapter) {\n\n      const reasons = Object.entries(rejectedReasons)\n        .map(([id, state]) => `adapter ${id} ` +\n          (state === false ? 'is not supported by the environment' : 'is not available in the build')\n        );\n\n      let s = length ?\n        (reasons.length > 1 ? 'since :\\n' + reasons.map(renderReason).join('\\n') : ' ' + renderReason(reasons[0])) :\n        'as no adapter specified';\n\n      throw new AxiosError(\n        `There is no suitable adapter to dispatch the request ` + s,\n        'ERR_NOT_SUPPORT'\n      );\n    }\n\n    return adapter;\n  },\n  adapters: knownAdapters\n}\n","// eslint-disable-next-line strict\nexport default null;\n","'use strict';\n\nimport transformData from './transformData.js';\nimport isCancel from '../cancel/isCancel.js';\nimport defaults from '../defaults/index.js';\nimport CanceledError from '../cancel/CanceledError.js';\nimport AxiosHeaders from '../core/AxiosHeaders.js';\nimport adapters from \"../adapters/adapters.js\";\n\n/**\n * Throws a `CanceledError` if cancellation has been requested.\n *\n * @param {Object} config The config that is to be used for the request\n *\n * @returns {void}\n */\nfunction throwIfCancellationRequested(config) {\n  if (config.cancelToken) {\n    config.cancelToken.throwIfRequested();\n  }\n\n  if (config.signal && config.signal.aborted) {\n    throw new CanceledError(null, config);\n  }\n}\n\n/**\n * Dispatch a request to the server using the configured adapter.\n *\n * @param {object} config The config that is to be used for the request\n *\n * @returns {Promise} The Promise to be fulfilled\n */\nexport default function dispatchRequest(config) {\n  throwIfCancellationRequested(config);\n\n  config.headers = AxiosHeaders.from(config.headers);\n\n  // Transform request data\n  config.data = transformData.call(\n    config,\n    config.transformRequest\n  );\n\n  if (['post', 'put', 'patch'].indexOf(config.method) !== -1) {\n    config.headers.setContentType('application/x-www-form-urlencoded', false);\n  }\n\n  const adapter = adapters.getAdapter(config.adapter || defaults.adapter);\n\n  return adapter(config).then(function onAdapterResolution(response) {\n    throwIfCancellationRequested(config);\n\n    // Transform response data\n    response.data = transformData.call(\n      config,\n      config.transformResponse,\n      response\n    );\n\n    response.headers = AxiosHeaders.from(response.headers);\n\n    return response;\n  }, function onAdapterRejection(reason) {\n    if (!isCancel(reason)) {\n      throwIfCancellationRequested(config);\n\n      // Transform response data\n      if (reason && reason.response) {\n        reason.response.data = transformData.call(\n          config,\n          config.transformResponse,\n          reason.response\n        );\n        reason.response.headers = AxiosHeaders.from(reason.response.headers);\n      }\n    }\n\n    return Promise.reject(reason);\n  });\n}\n","export const VERSION = \"1.9.0\";","'use strict';\n\nimport {VERSION} from '../env/data.js';\nimport AxiosError from '../core/AxiosError.js';\n\nconst validators = {};\n\n// eslint-disable-next-line func-names\n['object', 'boolean', 'number', 'function', 'string', 'symbol'].forEach((type, i) => {\n  validators[type] = function validator(thing) {\n    return typeof thing === type || 'a' + (i < 1 ? 'n ' : ' ') + type;\n  };\n});\n\nconst deprecatedWarnings = {};\n\n/**\n * Transitional option validator\n *\n * @param {function|boolean?} validator - set to false if the transitional option has been removed\n * @param {string?} version - deprecated version / removed since version\n * @param {string?} message - some message with additional info\n *\n * @returns {function}\n */\nvalidators.transitional = function transitional(validator, version, message) {\n  function formatMessage(opt, desc) {\n    return '[Axios v' + VERSION + '] Transitional option \\'' + opt + '\\'' + desc + (message ? '. ' + message : '');\n  }\n\n  // eslint-disable-next-line func-names\n  return (value, opt, opts) => {\n    if (validator === false) {\n      throw new AxiosError(\n        formatMessage(opt, ' has been removed' + (version ? ' in ' + version : '')),\n        AxiosError.ERR_DEPRECATED\n      );\n    }\n\n    if (version && !deprecatedWarnings[opt]) {\n      deprecatedWarnings[opt] = true;\n      // eslint-disable-next-line no-console\n      console.warn(\n        formatMessage(\n          opt,\n          ' has been deprecated since v' + version + ' and will be removed in the near future'\n        )\n      );\n    }\n\n    return validator ? validator(value, opt, opts) : true;\n  };\n};\n\nvalidators.spelling = function spelling(correctSpelling) {\n  return (value, opt) => {\n    // eslint-disable-next-line no-console\n    console.warn(`${opt} is likely a misspelling of ${correctSpelling}`);\n    return true;\n  }\n};\n\n/**\n * Assert object's properties type\n *\n * @param {object} options\n * @param {object} schema\n * @param {boolean?} allowUnknown\n *\n * @returns {object}\n */\n\nfunction assertOptions(options, schema, allowUnknown) {\n  if (typeof options !== 'object') {\n    throw new AxiosError('options must be an object', AxiosError.ERR_BAD_OPTION_VALUE);\n  }\n  const keys = Object.keys(options);\n  let i = keys.length;\n  while (i-- > 0) {\n    const opt = keys[i];\n    const validator = schema[opt];\n    if (validator) {\n      const value = options[opt];\n      const result = value === undefined || validator(value, opt, options);\n      if (result !== true) {\n        throw new AxiosError('option ' + opt + ' must be ' + result, AxiosError.ERR_BAD_OPTION_VALUE);\n      }\n      continue;\n    }\n    if (allowUnknown !== true) {\n      throw new AxiosError('Unknown option ' + opt, AxiosError.ERR_BAD_OPTION);\n    }\n  }\n}\n\nexport default {\n  assertOptions,\n  validators\n};\n","'use strict';\n\nimport utils from './../utils.js';\nimport buildURL from '../helpers/buildURL.js';\nimport InterceptorManager from './InterceptorManager.js';\nimport dispatchRequest from './dispatchRequest.js';\nimport mergeConfig from './mergeConfig.js';\nimport buildFullPath from './buildFullPath.js';\nimport validator from '../helpers/validator.js';\nimport AxiosHeaders from './AxiosHeaders.js';\n\nconst validators = validator.validators;\n\n/**\n * Create a new instance of Axios\n *\n * @param {Object} instanceConfig The default config for the instance\n *\n * @return {Axios} A new instance of Axios\n */\nclass Axios {\n  constructor(instanceConfig) {\n    this.defaults = instanceConfig || {};\n    this.interceptors = {\n      request: new InterceptorManager(),\n      response: new InterceptorManager()\n    };\n  }\n\n  /**\n   * Dispatch a request\n   *\n   * @param {String|Object} configOrUrl The config specific for this request (merged with this.defaults)\n   * @param {?Object} config\n   *\n   * @returns {Promise} The Promise to be fulfilled\n   */\n  async request(configOrUrl, config) {\n    try {\n      return await this._request(configOrUrl, config);\n    } catch (err) {\n      if (err instanceof Error) {\n        let dummy = {};\n\n        Error.captureStackTrace ? Error.captureStackTrace(dummy) : (dummy = new Error());\n\n        // slice off the Error: ... line\n        const stack = dummy.stack ? dummy.stack.replace(/^.+\\n/, '') : '';\n        try {\n          if (!err.stack) {\n            err.stack = stack;\n            // match without the 2 top stack lines\n          } else if (stack && !String(err.stack).endsWith(stack.replace(/^.+\\n.+\\n/, ''))) {\n            err.stack += '\\n' + stack\n          }\n        } catch (e) {\n          // ignore the case where \"stack\" is an un-writable property\n        }\n      }\n\n      throw err;\n    }\n  }\n\n  _request(configOrUrl, config) {\n    /*eslint no-param-reassign:0*/\n    // Allow for axios('example/url'[, config]) a la fetch API\n    if (typeof configOrUrl === 'string') {\n      config = config || {};\n      config.url = configOrUrl;\n    } else {\n      config = configOrUrl || {};\n    }\n\n    config = mergeConfig(this.defaults, config);\n\n    const {transitional, paramsSerializer, headers} = config;\n\n    if (transitional !== undefined) {\n      validator.assertOptions(transitional, {\n        silentJSONParsing: validators.transitional(validators.boolean),\n        forcedJSONParsing: validators.transitional(validators.boolean),\n        clarifyTimeoutError: validators.transitional(validators.boolean)\n      }, false);\n    }\n\n    if (paramsSerializer != null) {\n      if (utils.isFunction(paramsSerializer)) {\n        config.paramsSerializer = {\n          serialize: paramsSerializer\n        }\n      } else {\n        validator.assertOptions(paramsSerializer, {\n          encode: validators.function,\n          serialize: validators.function\n        }, true);\n      }\n    }\n\n    // Set config.allowAbsoluteUrls\n    if (config.allowAbsoluteUrls !== undefined) {\n      // do nothing\n    } else if (this.defaults.allowAbsoluteUrls !== undefined) {\n      config.allowAbsoluteUrls = this.defaults.allowAbsoluteUrls;\n    } else {\n      config.allowAbsoluteUrls = true;\n    }\n\n    validator.assertOptions(config, {\n      baseUrl: validators.spelling('baseURL'),\n      withXsrfToken: validators.spelling('withXSRFToken')\n    }, true);\n\n    // Set config.method\n    config.method = (config.method || this.defaults.method || 'get').toLowerCase();\n\n    // Flatten headers\n    let contextHeaders = headers && utils.merge(\n      headers.common,\n      headers[config.method]\n    );\n\n    headers && utils.forEach(\n      ['delete', 'get', 'head', 'post', 'put', 'patch', 'common'],\n      (method) => {\n        delete headers[method];\n      }\n    );\n\n    config.headers = AxiosHeaders.concat(contextHeaders, headers);\n\n    // filter out skipped interceptors\n    const requestInterceptorChain = [];\n    let synchronousRequestInterceptors = true;\n    this.interceptors.request.forEach(function unshiftRequestInterceptors(interceptor) {\n      if (typeof interceptor.runWhen === 'function' && interceptor.runWhen(config) === false) {\n        return;\n      }\n\n      synchronousRequestInterceptors = synchronousRequestInterceptors && interceptor.synchronous;\n\n      requestInterceptorChain.unshift(interceptor.fulfilled, interceptor.rejected);\n    });\n\n    const responseInterceptorChain = [];\n    this.interceptors.response.forEach(function pushResponseInterceptors(interceptor) {\n      responseInterceptorChain.push(interceptor.fulfilled, interceptor.rejected);\n    });\n\n    let promise;\n    let i = 0;\n    let len;\n\n    if (!synchronousRequestInterceptors) {\n      const chain = [dispatchRequest.bind(this), undefined];\n      chain.unshift.apply(chain, requestInterceptorChain);\n      chain.push.apply(chain, responseInterceptorChain);\n      len = chain.length;\n\n      promise = Promise.resolve(config);\n\n      while (i < len) {\n        promise = promise.then(chain[i++], chain[i++]);\n      }\n\n      return promise;\n    }\n\n    len = requestInterceptorChain.length;\n\n    let newConfig = config;\n\n    i = 0;\n\n    while (i < len) {\n      const onFulfilled = requestInterceptorChain[i++];\n      const onRejected = requestInterceptorChain[i++];\n      try {\n        newConfig = onFulfilled(newConfig);\n      } catch (error) {\n        onRejected.call(this, error);\n        break;\n      }\n    }\n\n    try {\n      promise = dispatchRequest.call(this, newConfig);\n    } catch (error) {\n      return Promise.reject(error);\n    }\n\n    i = 0;\n    len = responseInterceptorChain.length;\n\n    while (i < len) {\n      promise = promise.then(responseInterceptorChain[i++], responseInterceptorChain[i++]);\n    }\n\n    return promise;\n  }\n\n  getUri(config) {\n    config = mergeConfig(this.defaults, config);\n    const fullPath = buildFullPath(config.baseURL, config.url, config.allowAbsoluteUrls);\n    return buildURL(fullPath, config.params, config.paramsSerializer);\n  }\n}\n\n// Provide aliases for supported request methods\nutils.forEach(['delete', 'get', 'head', 'options'], function forEachMethodNoData(method) {\n  /*eslint func-names:0*/\n  Axios.prototype[method] = function(url, config) {\n    return this.request(mergeConfig(config || {}, {\n      method,\n      url,\n      data: (config || {}).data\n    }));\n  };\n});\n\nutils.forEach(['post', 'put', 'patch'], function forEachMethodWithData(method) {\n  /*eslint func-names:0*/\n\n  function generateHTTPMethod(isForm) {\n    return function httpMethod(url, data, config) {\n      return this.request(mergeConfig(config || {}, {\n        method,\n        headers: isForm ? {\n          'Content-Type': 'multipart/form-data'\n        } : {},\n        url,\n        data\n      }));\n    };\n  }\n\n  Axios.prototype[method] = generateHTTPMethod();\n\n  Axios.prototype[method + 'Form'] = generateHTTPMethod(true);\n});\n\nexport default Axios;\n","'use strict';\n\nimport CanceledError from './CanceledError.js';\n\n/**\n * A `CancelToken` is an object that can be used to request cancellation of an operation.\n *\n * @param {Function} executor The executor function.\n *\n * @returns {CancelToken}\n */\nclass CancelToken {\n  constructor(executor) {\n    if (typeof executor !== 'function') {\n      throw new TypeError('executor must be a function.');\n    }\n\n    let resolvePromise;\n\n    this.promise = new Promise(function promiseExecutor(resolve) {\n      resolvePromise = resolve;\n    });\n\n    const token = this;\n\n    // eslint-disable-next-line func-names\n    this.promise.then(cancel => {\n      if (!token._listeners) return;\n\n      let i = token._listeners.length;\n\n      while (i-- > 0) {\n        token._listeners[i](cancel);\n      }\n      token._listeners = null;\n    });\n\n    // eslint-disable-next-line func-names\n    this.promise.then = onfulfilled => {\n      let _resolve;\n      // eslint-disable-next-line func-names\n      const promise = new Promise(resolve => {\n        token.subscribe(resolve);\n        _resolve = resolve;\n      }).then(onfulfilled);\n\n      promise.cancel = function reject() {\n        token.unsubscribe(_resolve);\n      };\n\n      return promise;\n    };\n\n    executor(function cancel(message, config, request) {\n      if (token.reason) {\n        // Cancellation has already been requested\n        return;\n      }\n\n      token.reason = new CanceledError(message, config, request);\n      resolvePromise(token.reason);\n    });\n  }\n\n  /**\n   * Throws a `CanceledError` if cancellation has been requested.\n   */\n  throwIfRequested() {\n    if (this.reason) {\n      throw this.reason;\n    }\n  }\n\n  /**\n   * Subscribe to the cancel signal\n   */\n\n  subscribe(listener) {\n    if (this.reason) {\n      listener(this.reason);\n      return;\n    }\n\n    if (this._listeners) {\n      this._listeners.push(listener);\n    } else {\n      this._listeners = [listener];\n    }\n  }\n\n  /**\n   * Unsubscribe from the cancel signal\n   */\n\n  unsubscribe(listener) {\n    if (!this._listeners) {\n      return;\n    }\n    const index = this._listeners.indexOf(listener);\n    if (index !== -1) {\n      this._listeners.splice(index, 1);\n    }\n  }\n\n  toAbortSignal() {\n    const controller = new AbortController();\n\n    const abort = (err) => {\n      controller.abort(err);\n    };\n\n    this.subscribe(abort);\n\n    controller.signal.unsubscribe = () => this.unsubscribe(abort);\n\n    return controller.signal;\n  }\n\n  /**\n   * Returns an object that contains a new `CancelToken` and a function that, when called,\n   * cancels the `CancelToken`.\n   */\n  static source() {\n    let cancel;\n    const token = new CancelToken(function executor(c) {\n      cancel = c;\n    });\n    return {\n      token,\n      cancel\n    };\n  }\n}\n\nexport default CancelToken;\n","const HttpStatusCode = {\n  Continue: 100,\n  SwitchingProtocols: 101,\n  Processing: 102,\n  EarlyHints: 103,\n  Ok: 200,\n  Created: 201,\n  Accepted: 202,\n  NonAuthoritativeInformation: 203,\n  NoContent: 204,\n  ResetContent: 205,\n  PartialContent: 206,\n  MultiStatus: 207,\n  AlreadyReported: 208,\n  ImUsed: 226,\n  MultipleChoices: 300,\n  MovedPermanently: 301,\n  Found: 302,\n  SeeOther: 303,\n  NotModified: 304,\n  UseProxy: 305,\n  Unused: 306,\n  TemporaryRedirect: 307,\n  PermanentRedirect: 308,\n  BadRequest: 400,\n  Unauthorized: 401,\n  PaymentRequired: 402,\n  Forbidden: 403,\n  NotFound: 404,\n  MethodNotAllowed: 405,\n  NotAcceptable: 406,\n  ProxyAuthenticationRequired: 407,\n  RequestTimeout: 408,\n  Conflict: 409,\n  Gone: 410,\n  LengthRequired: 411,\n  PreconditionFailed: 412,\n  PayloadTooLarge: 413,\n  UriTooLong: 414,\n  UnsupportedMediaType: 415,\n  RangeNotSatisfiable: 416,\n  ExpectationFailed: 417,\n  ImATeapot: 418,\n  MisdirectedRequest: 421,\n  UnprocessableEntity: 422,\n  Locked: 423,\n  FailedDependency: 424,\n  TooEarly: 425,\n  UpgradeRequired: 426,\n  PreconditionRequired: 428,\n  TooManyRequests: 429,\n  RequestHeaderFieldsTooLarge: 431,\n  UnavailableForLegalReasons: 451,\n  InternalServerError: 500,\n  NotImplemented: 501,\n  BadGateway: 502,\n  ServiceUnavailable: 503,\n  GatewayTimeout: 504,\n  HttpVersionNotSupported: 505,\n  VariantAlsoNegotiates: 506,\n  InsufficientStorage: 507,\n  LoopDetected: 508,\n  NotExtended: 510,\n  NetworkAuthenticationRequired: 511,\n};\n\nObject.entries(HttpStatusCode).forEach(([key, value]) => {\n  HttpStatusCode[value] = key;\n});\n\nexport default HttpStatusCode;\n","'use strict';\n\nimport utils from './utils.js';\nimport bind from './helpers/bind.js';\nimport Axios from './core/Axios.js';\nimport mergeConfig from './core/mergeConfig.js';\nimport defaults from './defaults/index.js';\nimport formDataToJSON from './helpers/formDataToJSON.js';\nimport CanceledError from './cancel/CanceledError.js';\nimport CancelToken from './cancel/CancelToken.js';\nimport isCancel from './cancel/isCancel.js';\nimport {VERSION} from './env/data.js';\nimport toFormData from './helpers/toFormData.js';\nimport AxiosError from './core/AxiosError.js';\nimport spread from './helpers/spread.js';\nimport isAxiosError from './helpers/isAxiosError.js';\nimport AxiosHeaders from \"./core/AxiosHeaders.js\";\nimport adapters from './adapters/adapters.js';\nimport HttpStatusCode from './helpers/HttpStatusCode.js';\n\n/**\n * Create an instance of Axios\n *\n * @param {Object} defaultConfig The default config for the instance\n *\n * @returns {Axios} A new instance of Axios\n */\nfunction createInstance(defaultConfig) {\n  const context = new Axios(defaultConfig);\n  const instance = bind(Axios.prototype.request, context);\n\n  // Copy axios.prototype to instance\n  utils.extend(instance, Axios.prototype, context, {allOwnKeys: true});\n\n  // Copy context to instance\n  utils.extend(instance, context, null, {allOwnKeys: true});\n\n  // Factory for creating new instances\n  instance.create = function create(instanceConfig) {\n    return createInstance(mergeConfig(defaultConfig, instanceConfig));\n  };\n\n  return instance;\n}\n\n// Create the default instance to be exported\nconst axios = createInstance(defaults);\n\n// Expose Axios class to allow class inheritance\naxios.Axios = Axios;\n\n// Expose Cancel & CancelToken\naxios.CanceledError = CanceledError;\naxios.CancelToken = CancelToken;\naxios.isCancel = isCancel;\naxios.VERSION = VERSION;\naxios.toFormData = toFormData;\n\n// Expose AxiosError class\naxios.AxiosError = AxiosError;\n\n// alias for CanceledError for backward compatibility\naxios.Cancel = axios.CanceledError;\n\n// Expose all/spread\naxios.all = function all(promises) {\n  return Promise.all(promises);\n};\n\naxios.spread = spread;\n\n// Expose isAxiosError\naxios.isAxiosError = isAxiosError;\n\n// Expose mergeConfig\naxios.mergeConfig = mergeConfig;\n\naxios.AxiosHeaders = AxiosHeaders;\n\naxios.formToJSON = thing => formDataToJSON(utils.isHTMLForm(thing) ? new FormData(thing) : thing);\n\naxios.getAdapter = adapters.getAdapter;\n\naxios.HttpStatusCode = HttpStatusCode;\n\naxios.default = axios;\n\n// this module should only have a default export\nexport default axios\n","'use strict';\n\n/**\n * Syntactic sugar for invoking a function and expanding an array for arguments.\n *\n * Common use case would be to use `Function.prototype.apply`.\n *\n *  ```js\n *  function f(x, y, z) {}\n *  var args = [1, 2, 3];\n *  f.apply(null, args);\n *  ```\n *\n * With `spread` this example can be re-written.\n *\n *  ```js\n *  spread(function(x, y, z) {})([1, 2, 3]);\n *  ```\n *\n * @param {Function} callback\n *\n * @returns {Function}\n */\nexport default function spread(callback) {\n  return function wrap(arr) {\n    return callback.apply(null, arr);\n  };\n}\n","'use strict';\n\nimport utils from './../utils.js';\n\n/**\n * Determines whether the payload is an error thrown by Axios\n *\n * @param {*} payload The value to test\n *\n * @returns {boolean} True if the payload is an error thrown by Axios, otherwise false\n */\nexport default function isAxiosError(payload) {\n  return utils.isObject(payload) && (payload.isAxiosError === true);\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nconst stringToByteArray = function (str: string): number[] {\n  // TODO(user): Use native implementations if/when available\n  const out: number[] = [];\n  let p = 0;\n  for (let i = 0; i < str.length; i++) {\n    let c = str.charCodeAt(i);\n    if (c < 128) {\n      out[p++] = c;\n    } else if (c < 2048) {\n      out[p++] = (c >> 6) | 192;\n      out[p++] = (c & 63) | 128;\n    } else if (\n      (c & 0xfc00) === 0xd800 &&\n      i + 1 < str.length &&\n      (str.charCodeAt(i + 1) & 0xfc00) === 0xdc00\n    ) {\n      // Surrogate Pair\n      c = 0x10000 + ((c & 0x03ff) << 10) + (str.charCodeAt(++i) & 0x03ff);\n      out[p++] = (c >> 18) | 240;\n      out[p++] = ((c >> 12) & 63) | 128;\n      out[p++] = ((c >> 6) & 63) | 128;\n      out[p++] = (c & 63) | 128;\n    } else {\n      out[p++] = (c >> 12) | 224;\n      out[p++] = ((c >> 6) & 63) | 128;\n      out[p++] = (c & 63) | 128;\n    }\n  }\n  return out;\n};\n\n/**\n * Turns an array of numbers into the string given by the concatenation of the\n * characters to which the numbers correspond.\n * @param bytes Array of numbers representing characters.\n * @return Stringification of the array.\n */\nconst byteArrayToString = function (bytes: number[]): string {\n  // TODO(user): Use native implementations if/when available\n  const out: string[] = [];\n  let pos = 0,\n    c = 0;\n  while (pos < bytes.length) {\n    const c1 = bytes[pos++];\n    if (c1 < 128) {\n      out[c++] = String.fromCharCode(c1);\n    } else if (c1 > 191 && c1 < 224) {\n      const c2 = bytes[pos++];\n      out[c++] = String.fromCharCode(((c1 & 31) << 6) | (c2 & 63));\n    } else if (c1 > 239 && c1 < 365) {\n      // Surrogate Pair\n      const c2 = bytes[pos++];\n      const c3 = bytes[pos++];\n      const c4 = bytes[pos++];\n      const u =\n        (((c1 & 7) << 18) | ((c2 & 63) << 12) | ((c3 & 63) << 6) | (c4 & 63)) -\n        0x10000;\n      out[c++] = String.fromCharCode(0xd800 + (u >> 10));\n      out[c++] = String.fromCharCode(0xdc00 + (u & 1023));\n    } else {\n      const c2 = bytes[pos++];\n      const c3 = bytes[pos++];\n      out[c++] = String.fromCharCode(\n        ((c1 & 15) << 12) | ((c2 & 63) << 6) | (c3 & 63)\n      );\n    }\n  }\n  return out.join('');\n};\n\ninterface Base64 {\n  byteToCharMap_: { [key: number]: string } | null;\n  charToByteMap_: { [key: string]: number } | null;\n  byteToCharMapWebSafe_: { [key: number]: string } | null;\n  charToByteMapWebSafe_: { [key: string]: number } | null;\n  ENCODED_VALS_BASE: string;\n  readonly ENCODED_VALS: string;\n  readonly ENCODED_VALS_WEBSAFE: string;\n  HAS_NATIVE_SUPPORT: boolean;\n  encodeByteArray(input: number[] | Uint8Array, webSafe?: boolean): string;\n  encodeString(input: string, webSafe?: boolean): string;\n  decodeString(input: string, webSafe: boolean): string;\n  decodeStringToByteArray(input: string, webSafe: boolean): number[];\n  init_(): void;\n}\n\n// We define it as an object literal instead of a class because a class compiled down to es5 can't\n// be treeshaked. https://github.com/rollup/rollup/issues/1691\n// Static lookup maps, lazily populated by init_()\n// TODO(dlarocque): Define this as a class, since we no longer target ES5.\nexport const base64: Base64 = {\n  /**\n   * Maps bytes to characters.\n   */\n  byteToCharMap_: null,\n\n  /**\n   * Maps characters to bytes.\n   */\n  charToByteMap_: null,\n\n  /**\n   * Maps bytes to websafe characters.\n   * @private\n   */\n  byteToCharMapWebSafe_: null,\n\n  /**\n   * Maps websafe characters to bytes.\n   * @private\n   */\n  charToByteMapWebSafe_: null,\n\n  /**\n   * Our default alphabet, shared between\n   * ENCODED_VALS and ENCODED_VALS_WEBSAFE\n   */\n  ENCODED_VALS_BASE:\n    'ABCDEFGHIJKLMNOPQRSTUVWXYZ' + 'abcdefghijklmnopqrstuvwxyz' + '0123456789',\n\n  /**\n   * Our default alphabet. Value 64 (=) is special; it means \"nothing.\"\n   */\n  get ENCODED_VALS() {\n    return this.ENCODED_VALS_BASE + '+/=';\n  },\n\n  /**\n   * Our websafe alphabet.\n   */\n  get ENCODED_VALS_WEBSAFE() {\n    return this.ENCODED_VALS_BASE + '-_.';\n  },\n\n  /**\n   * Whether this browser supports the atob and btoa functions. This extension\n   * started at Mozilla but is now implemented by many browsers. We use the\n   * ASSUME_* variables to avoid pulling in the full useragent detection library\n   * but still allowing the standard per-browser compilations.\n   *\n   */\n  HAS_NATIVE_SUPPORT: typeof atob === 'function',\n\n  /**\n   * Base64-encode an array of bytes.\n   *\n   * @param input An array of bytes (numbers with\n   *     value in [0, 255]) to encode.\n   * @param webSafe Boolean indicating we should use the\n   *     alternative alphabet.\n   * @return The base64 encoded string.\n   */\n  encodeByteArray(input: number[] | Uint8Array, webSafe?: boolean): string {\n    if (!Array.isArray(input)) {\n      throw Error('encodeByteArray takes an array as a parameter');\n    }\n\n    this.init_();\n\n    const byteToCharMap = webSafe\n      ? this.byteToCharMapWebSafe_!\n      : this.byteToCharMap_!;\n\n    const output = [];\n\n    for (let i = 0; i < input.length; i += 3) {\n      const byte1 = input[i];\n      const haveByte2 = i + 1 < input.length;\n      const byte2 = haveByte2 ? input[i + 1] : 0;\n      const haveByte3 = i + 2 < input.length;\n      const byte3 = haveByte3 ? input[i + 2] : 0;\n\n      const outByte1 = byte1 >> 2;\n      const outByte2 = ((byte1 & 0x03) << 4) | (byte2 >> 4);\n      let outByte3 = ((byte2 & 0x0f) << 2) | (byte3 >> 6);\n      let outByte4 = byte3 & 0x3f;\n\n      if (!haveByte3) {\n        outByte4 = 64;\n\n        if (!haveByte2) {\n          outByte3 = 64;\n        }\n      }\n\n      output.push(\n        byteToCharMap[outByte1],\n        byteToCharMap[outByte2],\n        byteToCharMap[outByte3],\n        byteToCharMap[outByte4]\n      );\n    }\n\n    return output.join('');\n  },\n\n  /**\n   * Base64-encode a string.\n   *\n   * @param input A string to encode.\n   * @param webSafe If true, we should use the\n   *     alternative alphabet.\n   * @return The base64 encoded string.\n   */\n  encodeString(input: string, webSafe?: boolean): string {\n    // Shortcut for Mozilla browsers that implement\n    // a native base64 encoder in the form of \"btoa/atob\"\n    if (this.HAS_NATIVE_SUPPORT && !webSafe) {\n      return btoa(input);\n    }\n    return this.encodeByteArray(stringToByteArray(input), webSafe);\n  },\n\n  /**\n   * Base64-decode a string.\n   *\n   * @param input to decode.\n   * @param webSafe True if we should use the\n   *     alternative alphabet.\n   * @return string representing the decoded value.\n   */\n  decodeString(input: string, webSafe: boolean): string {\n    // Shortcut for Mozilla browsers that implement\n    // a native base64 encoder in the form of \"btoa/atob\"\n    if (this.HAS_NATIVE_SUPPORT && !webSafe) {\n      return atob(input);\n    }\n    return byteArrayToString(this.decodeStringToByteArray(input, webSafe));\n  },\n\n  /**\n   * Base64-decode a string.\n   *\n   * In base-64 decoding, groups of four characters are converted into three\n   * bytes.  If the encoder did not apply padding, the input length may not\n   * be a multiple of 4.\n   *\n   * In this case, the last group will have fewer than 4 characters, and\n   * padding will be inferred.  If the group has one or two characters, it decodes\n   * to one byte.  If the group has three characters, it decodes to two bytes.\n   *\n   * @param input Input to decode.\n   * @param webSafe True if we should use the web-safe alphabet.\n   * @return bytes representing the decoded value.\n   */\n  decodeStringToByteArray(input: string, webSafe: boolean): number[] {\n    this.init_();\n\n    const charToByteMap = webSafe\n      ? this.charToByteMapWebSafe_!\n      : this.charToByteMap_!;\n\n    const output: number[] = [];\n\n    for (let i = 0; i < input.length; ) {\n      const byte1 = charToByteMap[input.charAt(i++)];\n\n      const haveByte2 = i < input.length;\n      const byte2 = haveByte2 ? charToByteMap[input.charAt(i)] : 0;\n      ++i;\n\n      const haveByte3 = i < input.length;\n      const byte3 = haveByte3 ? charToByteMap[input.charAt(i)] : 64;\n      ++i;\n\n      const haveByte4 = i < input.length;\n      const byte4 = haveByte4 ? charToByteMap[input.charAt(i)] : 64;\n      ++i;\n\n      if (byte1 == null || byte2 == null || byte3 == null || byte4 == null) {\n        throw new DecodeBase64StringError();\n      }\n\n      const outByte1 = (byte1 << 2) | (byte2 >> 4);\n      output.push(outByte1);\n\n      if (byte3 !== 64) {\n        const outByte2 = ((byte2 << 4) & 0xf0) | (byte3 >> 2);\n        output.push(outByte2);\n\n        if (byte4 !== 64) {\n          const outByte3 = ((byte3 << 6) & 0xc0) | byte4;\n          output.push(outByte3);\n        }\n      }\n    }\n\n    return output;\n  },\n\n  /**\n   * Lazy static initialization function. Called before\n   * accessing any of the static map variables.\n   * @private\n   */\n  init_() {\n    if (!this.byteToCharMap_) {\n      this.byteToCharMap_ = {};\n      this.charToByteMap_ = {};\n      this.byteToCharMapWebSafe_ = {};\n      this.charToByteMapWebSafe_ = {};\n\n      // We want quick mappings back and forth, so we precompute two maps.\n      for (let i = 0; i < this.ENCODED_VALS.length; i++) {\n        this.byteToCharMap_[i] = this.ENCODED_VALS.charAt(i);\n        this.charToByteMap_[this.byteToCharMap_[i]] = i;\n        this.byteToCharMapWebSafe_[i] = this.ENCODED_VALS_WEBSAFE.charAt(i);\n        this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]] = i;\n\n        // Be forgiving when decoding and correctly decode both encodings.\n        if (i >= this.ENCODED_VALS_BASE.length) {\n          this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)] = i;\n          this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)] = i;\n        }\n      }\n    }\n  }\n};\n\n/**\n * An error encountered while decoding base64 string.\n */\nexport class DecodeBase64StringError extends Error {\n  readonly name = 'DecodeBase64StringError';\n}\n\n/**\n * URL-safe base64 encoding\n */\nexport const base64Encode = function (str: string): string {\n  const utf8Bytes = stringToByteArray(str);\n  return base64.encodeByteArray(utf8Bytes, true);\n};\n\n/**\n * URL-safe base64 encoding (without \".\" padding in the end).\n * e.g. Used in JSON Web Token (JWT) parts.\n */\nexport const base64urlEncodeWithoutPadding = function (str: string): string {\n  // Use base64url encoding and remove padding in the end (dot characters).\n  return base64Encode(str).replace(/\\./g, '');\n};\n\n/**\n * URL-safe base64 decoding\n *\n * NOTE: DO NOT use the global atob() function - it does NOT support the\n * base64Url variant encoding.\n *\n * @param str To be decoded\n * @return Decoded result, if possible\n */\nexport const base64Decode = function (str: string): string | null {\n  try {\n    return base64.decodeString(str, true);\n  } catch (e) {\n    console.error('base64Decode failed: ', e);\n  }\n  return null;\n};\n","/**\n * @license\n * Copyright 2022 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { base64Decode } from './crypt';\nimport { getGlobal } from './global';\nimport { getDefaultsFromPostinstall } from './postinstall';\n\n/**\n * Keys for experimental properties on the `FirebaseDefaults` object.\n * @public\n */\nexport type ExperimentalKey = 'authTokenSyncURL' | 'authIdTokenMaxAge';\n\n/**\n * An object that can be injected into the environment as __FIREBASE_DEFAULTS__,\n * either as a property of globalThis, a shell environment variable, or a\n * cookie.\n *\n * This object can be used to automatically configure and initialize\n * a Firebase app as well as any emulators.\n *\n * @public\n */\nexport interface FirebaseDefaults {\n  config?: Record<string, string>;\n  emulatorHosts?: Record<string, string>;\n  _authTokenSyncURL?: string;\n  _authIdTokenMaxAge?: number;\n  /**\n   * Override Firebase's runtime environment detection and\n   * force the SDK to act as if it were in the specified environment.\n   */\n  forceEnvironment?: 'browser' | 'node';\n  [key: string]: unknown;\n}\n\ndeclare global {\n  // Need `var` for this to work.\n  // eslint-disable-next-line no-var\n  var __FIREBASE_DEFAULTS__: FirebaseDefaults | undefined;\n}\n\nconst getDefaultsFromGlobal = (): FirebaseDefaults | undefined =>\n  getGlobal().__FIREBASE_DEFAULTS__;\n\n/**\n * Attempt to read defaults from a JSON string provided to\n * process(.)env(.)__FIREBASE_DEFAULTS__ or a JSON file whose path is in\n * process(.)env(.)__FIREBASE_DEFAULTS_PATH__\n * The dots are in parens because certain compilers (Vite?) cannot\n * handle seeing that variable in comments.\n * See https://github.com/firebase/firebase-js-sdk/issues/6838\n */\nconst getDefaultsFromEnvVariable = (): FirebaseDefaults | undefined => {\n  if (typeof process === 'undefined' || typeof process.env === 'undefined') {\n    return;\n  }\n  const defaultsJsonString = process.env.__FIREBASE_DEFAULTS__;\n  if (defaultsJsonString) {\n    return JSON.parse(defaultsJsonString);\n  }\n};\n\nconst getDefaultsFromCookie = (): FirebaseDefaults | undefined => {\n  if (typeof document === 'undefined') {\n    return;\n  }\n  let match;\n  try {\n    match = document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/);\n  } catch (e) {\n    // Some environments such as Angular Universal SSR have a\n    // `document` object but error on accessing `document.cookie`.\n    return;\n  }\n  const decoded = match && base64Decode(match[1]);\n  return decoded && JSON.parse(decoded);\n};\n\n/**\n * Get the __FIREBASE_DEFAULTS__ object. It checks in order:\n * (1) if such an object exists as a property of `globalThis`\n * (2) if such an object was provided on a shell environment variable\n * (3) if such an object exists in a cookie\n * @public\n */\nexport const getDefaults = (): FirebaseDefaults | undefined => {\n  try {\n    return (\n      getDefaultsFromPostinstall() ||\n      getDefaultsFromGlobal() ||\n      getDefaultsFromEnvVariable() ||\n      getDefaultsFromCookie()\n    );\n  } catch (e) {\n    /**\n     * Catch-all for being unable to get __FIREBASE_DEFAULTS__ due\n     * to any environment case we have not accounted for. Log to\n     * info instead of swallowing so we can find these unknown cases\n     * and add paths for them if needed.\n     */\n    console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);\n    return;\n  }\n};\n\n/**\n * Returns emulator host stored in the __FIREBASE_DEFAULTS__ object\n * for the given product.\n * @returns a URL host formatted like `127.0.0.1:9999` or `[::1]:4000` if available\n * @public\n */\nexport const getDefaultEmulatorHost = (\n  productName: string\n): string | undefined => getDefaults()?.emulatorHosts?.[productName];\n\n/**\n * Returns emulator hostname and port stored in the __FIREBASE_DEFAULTS__ object\n * for the given product.\n * @returns a pair of hostname and port like `[\"::1\", 4000]` if available\n * @public\n */\nexport const getDefaultEmulatorHostnameAndPort = (\n  productName: string\n): [hostname: string, port: number] | undefined => {\n  const host = getDefaultEmulatorHost(productName);\n  if (!host) {\n    return undefined;\n  }\n  const separatorIndex = host.lastIndexOf(':'); // Finding the last since IPv6 addr also has colons.\n  if (separatorIndex <= 0 || separatorIndex + 1 === host.length) {\n    throw new Error(`Invalid host ${host} with no separate hostname and port!`);\n  }\n  // eslint-disable-next-line no-restricted-globals\n  const port = parseInt(host.substring(separatorIndex + 1), 10);\n  if (host[0] === '[') {\n    // Bracket-quoted `[ipv6addr]:port` => return \"ipv6addr\" (without brackets).\n    return [host.substring(1, separatorIndex - 1), port];\n  } else {\n    return [host.substring(0, separatorIndex), port];\n  }\n};\n\n/**\n * Returns Firebase app config stored in the __FIREBASE_DEFAULTS__ object.\n * @public\n */\nexport const getDefaultAppConfig = (): Record<string, string> | undefined =>\n  getDefaults()?.config;\n\n/**\n * Returns an experimental setting on the __FIREBASE_DEFAULTS__ object (properties\n * prefixed by \"_\")\n * @public\n */\nexport const getExperimentalSetting = <T extends ExperimentalKey>(\n  name: T\n): FirebaseDefaults[`_${T}`] =>\n  getDefaults()?.[`_${name}`] as FirebaseDefaults[`_${T}`];\n","/**\n * @license\n * Copyright 2022 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Polyfill for `globalThis` object.\n * @returns the `globalThis` object for the given environment.\n * @public\n */\nexport function getGlobal(): typeof globalThis {\n  if (typeof self !== 'undefined') {\n    return self;\n  }\n  if (typeof window !== 'undefined') {\n    return window;\n  }\n  if (typeof global !== 'undefined') {\n    return global;\n  }\n  throw new Error('Unable to locate global object.');\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport class Deferred<R> {\n  promise: Promise<R>;\n  reject: (value?: unknown) => void = () => {};\n  resolve: (value?: unknown) => void = () => {};\n  constructor() {\n    this.promise = new Promise((resolve, reject) => {\n      this.resolve = resolve as (value?: unknown) => void;\n      this.reject = reject as (value?: unknown) => void;\n    });\n  }\n\n  /**\n   * Our API internals are not promisified and cannot because our callback APIs have subtle expectations around\n   * invoking promises inline, which Promises are forbidden to do. This method accepts an optional node-style callback\n   * and returns a node-style callback which will resolve or reject the Deferred's promise.\n   */\n  wrapCallback(\n    callback?: (error?: unknown, value?: unknown) => void\n  ): (error: unknown, value?: unknown) => void {\n    return (error, value?) => {\n      if (error) {\n        this.reject(error);\n      } else {\n        this.resolve(value);\n      }\n      if (typeof callback === 'function') {\n        // Attaching noop handler just in case developer wasn't expecting\n        // promises\n        this.promise.catch(() => {});\n\n        // Some of our callbacks don't expect a value and our own tests\n        // assert that the parameter length is 1\n        if (callback.length === 1) {\n          callback(error);\n        } else {\n          callback(error, value);\n        }\n      }\n    };\n  }\n}\n","/**\n * @license\n * Copyright 2025 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Checks whether host is a cloud workstation or not.\n * @public\n */\nexport function isCloudWorkstation(url: string): boolean {\n  // `isCloudWorkstation` is called without protocol in certain connect*Emulator functions\n  // In HTTP request builders, it's called with the protocol.\n  // If called with protocol prefix, it's a valid URL, so we extract the hostname\n  // If called without, we assume the string is the hostname.\n  try {\n    const host =\n      url.startsWith('http://') || url.startsWith('https://')\n        ? new URL(url).hostname\n        : url;\n    return host.endsWith('.cloudworkstations.dev');\n  } catch {\n    return false;\n  }\n}\n\n/**\n * Makes a fetch request to the given server.\n * Mostly used for forwarding cookies in Firebase Studio.\n * @public\n */\nexport async function pingServer(endpoint: string): Promise<boolean> {\n  const result = await fetch(endpoint, {\n    credentials: 'include'\n  });\n  return result.ok;\n}\n","/**\n * @license\n * Copyright 2021 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { base64urlEncodeWithoutPadding } from './crypt';\nimport { isCloudWorkstation } from './url';\n\n// Firebase Auth tokens contain snake_case claims following the JWT standard / convention.\n/* eslint-disable camelcase */\n\nexport type FirebaseSignInProvider =\n  | 'custom'\n  | 'email'\n  | 'password'\n  | 'phone'\n  | 'anonymous'\n  | 'google.com'\n  | 'facebook.com'\n  | 'github.com'\n  | 'twitter.com'\n  | 'microsoft.com'\n  | 'apple.com';\n\ninterface FirebaseIdToken {\n  // Always set to https://securetoken.google.com/PROJECT_ID\n  iss: string;\n\n  // Always set to PROJECT_ID\n  aud: string;\n\n  // The user's unique ID\n  sub: string;\n\n  // The token issue time, in seconds since epoch\n  iat: number;\n\n  // The token expiry time, normally 'iat' + 3600\n  exp: number;\n\n  // The user's unique ID. Must be equal to 'sub'\n  user_id: string;\n\n  // The time the user authenticated, normally 'iat'\n  auth_time: number;\n\n  // The sign in provider, only set when the provider is 'anonymous'\n  provider_id?: 'anonymous';\n\n  // The user's primary email\n  email?: string;\n\n  // The user's email verification status\n  email_verified?: boolean;\n\n  // The user's primary phone number\n  phone_number?: string;\n\n  // The user's display name\n  name?: string;\n\n  // The user's profile photo URL\n  picture?: string;\n\n  // Information on all identities linked to this user\n  firebase: {\n    // The primary sign-in provider\n    sign_in_provider: FirebaseSignInProvider;\n\n    // A map of providers to the user's list of unique identifiers from\n    // each provider\n    identities?: { [provider in FirebaseSignInProvider]?: string[] };\n  };\n\n  // Custom claims set by the developer\n  [claim: string]: unknown;\n\n  uid?: never; // Try to catch a common mistake of \"uid\" (should be \"sub\" instead).\n}\n\nexport type EmulatorMockTokenOptions = ({ user_id: string } | { sub: string }) &\n  Partial<FirebaseIdToken>;\n\nexport function createMockUserToken(\n  token: EmulatorMockTokenOptions,\n  projectId?: string\n): string {\n  if (token.uid) {\n    throw new Error(\n      'The \"uid\" field is no longer supported by mockUserToken. Please use \"sub\" instead for Firebase Auth User ID.'\n    );\n  }\n  // Unsecured JWTs use \"none\" as the algorithm.\n  const header = {\n    alg: 'none',\n    type: 'JWT'\n  };\n\n  const project = projectId || 'demo-project';\n  const iat = token.iat || 0;\n  const sub = token.sub || token.user_id;\n  if (!sub) {\n    throw new Error(\"mockUserToken must contain 'sub' or 'user_id' field!\");\n  }\n\n  const payload: FirebaseIdToken = {\n    // Set all required fields to decent defaults\n    iss: `https://securetoken.google.com/${project}`,\n    aud: project,\n    iat,\n    exp: iat + 3600,\n    auth_time: iat,\n    sub,\n    user_id: sub,\n    firebase: {\n      sign_in_provider: 'custom',\n      identities: {}\n    },\n\n    // Override with user options\n    ...token\n  };\n\n  // Unsecured JWTs use the empty string as a signature.\n  const signature = '';\n  return [\n    base64urlEncodeWithoutPadding(JSON.stringify(header)),\n    base64urlEncodeWithoutPadding(JSON.stringify(payload)),\n    signature\n  ].join('.');\n}\n\ninterface EmulatorStatusMap {\n  [name: string]: boolean;\n}\nconst emulatorStatus: EmulatorStatusMap = {};\n\ninterface EmulatorSummary {\n  prod: string[];\n  emulator: string[];\n}\n\n// Checks whether any products are running on an emulator\nfunction getEmulatorSummary(): EmulatorSummary {\n  const summary: EmulatorSummary = {\n    prod: [],\n    emulator: []\n  };\n  for (const key of Object.keys(emulatorStatus)) {\n    if (emulatorStatus[key]) {\n      summary.emulator.push(key);\n    } else {\n      summary.prod.push(key);\n    }\n  }\n  return summary;\n}\n\nfunction getOrCreateEl(id: string): { created: boolean; element: HTMLElement } {\n  let parentDiv = document.getElementById(id);\n  let created = false;\n  if (!parentDiv) {\n    parentDiv = document.createElement('div');\n    parentDiv.setAttribute('id', id);\n    created = true;\n  }\n  return { created, element: parentDiv };\n}\n\nlet previouslyDismissed = false;\n/**\n * Updates Emulator Banner. Primarily used for Firebase Studio\n * @param name\n * @param isRunningEmulator\n * @public\n */\nexport function updateEmulatorBanner(\n  name: string,\n  isRunningEmulator: boolean\n): void {\n  if (\n    typeof window === 'undefined' ||\n    typeof document === 'undefined' ||\n    !isCloudWorkstation(window.location.host) ||\n    emulatorStatus[name] === isRunningEmulator ||\n    emulatorStatus[name] || // If already set to use emulator, can't go back to prod.\n    previouslyDismissed\n  ) {\n    return;\n  }\n\n  emulatorStatus[name] = isRunningEmulator;\n\n  function prefixedId(id: string): string {\n    return `__firebase__banner__${id}`;\n  }\n  const bannerId = '__firebase__banner';\n  const summary = getEmulatorSummary();\n  const showError = summary.prod.length > 0;\n\n  function tearDown(): void {\n    const element = document.getElementById(bannerId);\n    if (element) {\n      element.remove();\n    }\n  }\n\n  function setupBannerStyles(bannerEl: HTMLElement): void {\n    bannerEl.style.display = 'flex';\n    bannerEl.style.background = '#7faaf0';\n    bannerEl.style.position = 'fixed';\n    bannerEl.style.bottom = '5px';\n    bannerEl.style.left = '5px';\n    bannerEl.style.padding = '.5em';\n    bannerEl.style.borderRadius = '5px';\n    bannerEl.style.alignItems = 'center';\n  }\n\n  function setupIconStyles(prependIcon: SVGElement, iconId: string): void {\n    prependIcon.setAttribute('width', '24');\n    prependIcon.setAttribute('id', iconId);\n    prependIcon.setAttribute('height', '24');\n    prependIcon.setAttribute('viewBox', '0 0 24 24');\n    prependIcon.setAttribute('fill', 'none');\n    prependIcon.style.marginLeft = '-6px';\n  }\n\n  function setupCloseBtn(): HTMLSpanElement {\n    const closeBtn = document.createElement('span');\n    closeBtn.style.cursor = 'pointer';\n    closeBtn.style.marginLeft = '16px';\n    closeBtn.style.fontSize = '24px';\n    closeBtn.innerHTML = ' &times;';\n    closeBtn.onclick = () => {\n      previouslyDismissed = true;\n      tearDown();\n    };\n    return closeBtn;\n  }\n\n  function setupLinkStyles(\n    learnMoreLink: HTMLAnchorElement,\n    learnMoreId: string\n  ): void {\n    learnMoreLink.setAttribute('id', learnMoreId);\n    learnMoreLink.innerText = 'Learn more';\n    learnMoreLink.href =\n      'https://firebase.google.com/docs/studio/preview-apps#preview-backend';\n    learnMoreLink.setAttribute('target', '__blank');\n    learnMoreLink.style.paddingLeft = '5px';\n    learnMoreLink.style.textDecoration = 'underline';\n  }\n\n  function setupDom(): void {\n    const banner = getOrCreateEl(bannerId);\n    const firebaseTextId = prefixedId('text');\n    const firebaseText: HTMLSpanElement =\n      document.getElementById(firebaseTextId) || document.createElement('span');\n    const learnMoreId = prefixedId('learnmore');\n    const learnMoreLink: HTMLAnchorElement =\n      (document.getElementById(learnMoreId) as HTMLAnchorElement) ||\n      document.createElement('a');\n    const prependIconId = prefixedId('preprendIcon');\n    const prependIcon: SVGElement =\n      (document.getElementById(\n        prependIconId\n      ) as HTMLOrSVGElement as SVGElement) ||\n      document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n    if (banner.created) {\n      // update styles\n      const bannerEl = banner.element;\n      setupBannerStyles(bannerEl);\n      setupLinkStyles(learnMoreLink, learnMoreId);\n      const closeBtn = setupCloseBtn();\n      setupIconStyles(prependIcon, prependIconId);\n      bannerEl.append(prependIcon, firebaseText, learnMoreLink, closeBtn);\n      document.body.appendChild(bannerEl);\n    }\n\n    if (showError) {\n      firebaseText.innerText = `Preview backend disconnected.`;\n      prependIcon.innerHTML = `<g clip-path=\"url(#clip0_6013_33858)\">\n<path d=\"M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z\" fill=\"#212121\"/>\n</g>\n<defs>\n<clipPath id=\"clip0_6013_33858\">\n<rect width=\"24\" height=\"24\" fill=\"white\"/>\n</clipPath>\n</defs>`;\n    } else {\n      prependIcon.innerHTML = `<g clip-path=\"url(#clip0_6083_34804)\">\n<path d=\"M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z\" fill=\"#212121\"/>\n</g>\n<defs>\n<clipPath id=\"clip0_6083_34804\">\n<rect width=\"24\" height=\"24\" fill=\"white\"/>\n</clipPath>\n</defs>`;\n      firebaseText.innerText = 'Preview backend running in this workspace.';\n    }\n    firebaseText.setAttribute('id', firebaseTextId);\n  }\n  if (document.readyState === 'loading') {\n    window.addEventListener('DOMContentLoaded', setupDom);\n  } else {\n    setupDom();\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { CONSTANTS } from './constants';\nimport { getDefaults } from './defaults';\n\n/**\n * Type placeholder for `WorkerGlobalScope` from `webworker`\n */\ndeclare class WorkerGlobalScope {}\n\n/**\n * Returns navigator.userAgent string or '' if it's not defined.\n * @return user agent string\n */\nexport function getUA(): string {\n  if (\n    typeof navigator !== 'undefined' &&\n    typeof navigator['userAgent'] === 'string'\n  ) {\n    return navigator['userAgent'];\n  } else {\n    return '';\n  }\n}\n\n/**\n * Detect Cordova / PhoneGap / Ionic frameworks on a mobile device.\n *\n * Deliberately does not rely on checking `file://` URLs (as this fails PhoneGap\n * in the Ripple emulator) nor Cordova `onDeviceReady`, which would normally\n * wait for a callback.\n */\nexport function isMobileCordova(): boolean {\n  return (\n    typeof window !== 'undefined' &&\n    // @ts-ignore Setting up an broadly applicable index signature for Window\n    // just to deal with this case would probably be a bad idea.\n    !!(window['cordova'] || window['phonegap'] || window['PhoneGap']) &&\n    /ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(getUA())\n  );\n}\n\n/**\n * Detect Node.js.\n *\n * @return true if Node.js environment is detected or specified.\n */\n// Node detection logic from: https://github.com/iliakan/detect-node/\nexport function isNode(): boolean {\n  const forceEnvironment = getDefaults()?.forceEnvironment;\n  if (forceEnvironment === 'node') {\n    return true;\n  } else if (forceEnvironment === 'browser') {\n    return false;\n  }\n\n  try {\n    return (\n      Object.prototype.toString.call(global.process) === '[object process]'\n    );\n  } catch (e) {\n    return false;\n  }\n}\n\n/**\n * Detect Browser Environment.\n * Note: This will return true for certain test frameworks that are incompletely\n * mimicking a browser, and should not lead to assuming all browser APIs are\n * available.\n */\nexport function isBrowser(): boolean {\n  return typeof window !== 'undefined' || isWebWorker();\n}\n\n/**\n * Detect Web Worker context.\n */\nexport function isWebWorker(): boolean {\n  return (\n    typeof WorkerGlobalScope !== 'undefined' &&\n    typeof self !== 'undefined' &&\n    self instanceof WorkerGlobalScope\n  );\n}\n\n/**\n * Detect Cloudflare Worker context.\n */\nexport function isCloudflareWorker(): boolean {\n  return (\n    typeof navigator !== 'undefined' &&\n    navigator.userAgent === 'Cloudflare-Workers'\n  );\n}\n\n/**\n * Detect browser extensions (Chrome and Firefox at least).\n */\ninterface BrowserRuntime {\n  id?: unknown;\n}\ndeclare const chrome: { runtime?: BrowserRuntime };\ndeclare const browser: { runtime?: BrowserRuntime };\nexport function isBrowserExtension(): boolean {\n  const runtime =\n    typeof chrome === 'object'\n      ? chrome.runtime\n      : typeof browser === 'object'\n      ? browser.runtime\n      : undefined;\n  return typeof runtime === 'object' && runtime.id !== undefined;\n}\n\n/**\n * Detect React Native.\n *\n * @return true if ReactNative environment is detected.\n */\nexport function isReactNative(): boolean {\n  return (\n    typeof navigator === 'object' && navigator['product'] === 'ReactNative'\n  );\n}\n\n/** Detects Electron apps. */\nexport function isElectron(): boolean {\n  return getUA().indexOf('Electron/') >= 0;\n}\n\n/** Detects Internet Explorer. */\nexport function isIE(): boolean {\n  const ua = getUA();\n  return ua.indexOf('MSIE ') >= 0 || ua.indexOf('Trident/') >= 0;\n}\n\n/** Detects Universal Windows Platform apps. */\nexport function isUWP(): boolean {\n  return getUA().indexOf('MSAppHost/') >= 0;\n}\n\n/**\n * Detect whether the current SDK build is the Node version.\n *\n * @return true if it's the Node SDK build.\n */\nexport function isNodeSdk(): boolean {\n  return CONSTANTS.NODE_CLIENT === true || CONSTANTS.NODE_ADMIN === true;\n}\n\n/** Returns true if we are running in Safari. */\nexport function isSafari(): boolean {\n  return (\n    !isNode() &&\n    !!navigator.userAgent &&\n    navigator.userAgent.includes('Safari') &&\n    !navigator.userAgent.includes('Chrome')\n  );\n}\n\n/** Returns true if we are running in Safari or WebKit */\nexport function isSafariOrWebkit(): boolean {\n  return (\n    !isNode() &&\n    !!navigator.userAgent &&\n    (navigator.userAgent.includes('Safari') ||\n      navigator.userAgent.includes('WebKit')) &&\n    !navigator.userAgent.includes('Chrome')\n  );\n}\n\n/**\n * This method checks if indexedDB is supported by current browser/service worker context\n * @return true if indexedDB is supported by current browser/service worker context\n */\nexport function isIndexedDBAvailable(): boolean {\n  try {\n    return typeof indexedDB === 'object';\n  } catch (e) {\n    return false;\n  }\n}\n\n/**\n * This method validates browser/sw context for indexedDB by opening a dummy indexedDB database and reject\n * if errors occur during the database open operation.\n *\n * @throws exception if current browser/sw context can't run idb.open (ex: Safari iframe, Firefox\n * private browsing)\n */\nexport function validateIndexedDBOpenable(): Promise<boolean> {\n  return new Promise((resolve, reject) => {\n    try {\n      let preExist: boolean = true;\n      const DB_CHECK_NAME =\n        'validate-browser-context-for-indexeddb-analytics-module';\n      const request = self.indexedDB.open(DB_CHECK_NAME);\n      request.onsuccess = () => {\n        request.result.close();\n        // delete database only when it doesn't pre-exist\n        if (!preExist) {\n          self.indexedDB.deleteDatabase(DB_CHECK_NAME);\n        }\n        resolve(true);\n      };\n      request.onupgradeneeded = () => {\n        preExist = false;\n      };\n\n      request.onerror = () => {\n        reject(request.error?.message || '');\n      };\n    } catch (error) {\n      reject(error);\n    }\n  });\n}\n\n/**\n *\n * This method checks whether cookie is enabled within current browser\n * @return true if cookie is enabled within current browser\n */\nexport function areCookiesEnabled(): boolean {\n  if (typeof navigator === 'undefined' || !navigator.cookieEnabled) {\n    return false;\n  }\n  return true;\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * @fileoverview Standardized Firebase Error.\n *\n * Usage:\n *\n *   // TypeScript string literals for type-safe codes\n *   type Err =\n *     'unknown' |\n *     'object-not-found'\n *     ;\n *\n *   // Closure enum for type-safe error codes\n *   // at-enum {string}\n *   var Err = {\n *     UNKNOWN: 'unknown',\n *     OBJECT_NOT_FOUND: 'object-not-found',\n *   }\n *\n *   let errors: Map<Err, string> = {\n *     'generic-error': \"Unknown error\",\n *     'file-not-found': \"Could not find file: {$file}\",\n *   };\n *\n *   // Type-safe function - must pass a valid error code as param.\n *   let error = new ErrorFactory<Err>('service', 'Service', errors);\n *\n *   ...\n *   throw error.create(Err.GENERIC);\n *   ...\n *   throw error.create(Err.FILE_NOT_FOUND, {'file': fileName});\n *   ...\n *   // Service: Could not file file: foo.txt (service/file-not-found).\n *\n *   catch (e) {\n *     assert(e.message === \"Could not find file: foo.txt.\");\n *     if ((e as FirebaseError)?.code === 'service/file-not-found') {\n *       console.log(\"Could not read file: \" + e['file']);\n *     }\n *   }\n */\n\nexport type ErrorMap<ErrorCode extends string> = {\n  readonly [K in ErrorCode]: string;\n};\n\nconst ERROR_NAME = 'FirebaseError';\n\nexport interface StringLike {\n  toString(): string;\n}\n\nexport interface ErrorData {\n  [key: string]: unknown;\n}\n\n// Based on code from:\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error#Custom_Error_Types\nexport class FirebaseError extends Error {\n  /** The custom name for all FirebaseErrors. */\n  readonly name: string = ERROR_NAME;\n\n  constructor(\n    /** The error code for this error. */\n    readonly code: string,\n    message: string,\n    /** Custom data for this error. */\n    public customData?: Record<string, unknown>\n  ) {\n    super(message);\n\n    // Fix For ES5\n    // https://github.com/Microsoft/TypeScript-wiki/blob/master/Breaking-Changes.md#extending-built-ins-like-error-array-and-map-may-no-longer-work\n    // TODO(dlarocque): Replace this with `new.target`: https://www.typescriptlang.org/docs/handbook/release-notes/typescript-2-2.html#support-for-newtarget\n    //                   which we can now use since we no longer target ES5.\n    Object.setPrototypeOf(this, FirebaseError.prototype);\n\n    // Maintains proper stack trace for where our error was thrown.\n    // Only available on V8.\n    if (Error.captureStackTrace) {\n      Error.captureStackTrace(this, ErrorFactory.prototype.create);\n    }\n  }\n}\n\nexport class ErrorFactory<\n  ErrorCode extends string,\n  ErrorParams extends { readonly [K in ErrorCode]?: ErrorData } = {}\n> {\n  constructor(\n    private readonly service: string,\n    private readonly serviceName: string,\n    private readonly errors: ErrorMap<ErrorCode>\n  ) {}\n\n  create<K extends ErrorCode>(\n    code: K,\n    ...data: K extends keyof ErrorParams ? [ErrorParams[K]] : []\n  ): FirebaseError {\n    const customData = (data[0] as ErrorData) || {};\n    const fullCode = `${this.service}/${code}`;\n    const template = this.errors[code];\n\n    const message = template ? replaceTemplate(template, customData) : 'Error';\n    // Service Name: Error message (service/code).\n    const fullMessage = `${this.serviceName}: ${message} (${fullCode}).`;\n\n    const error = new FirebaseError(fullCode, fullMessage, customData);\n\n    return error;\n  }\n}\n\nfunction replaceTemplate(template: string, data: ErrorData): string {\n  return template.replace(PATTERN, (_, key) => {\n    const value = data[key];\n    return value != null ? String(value) : `<${key}?>`;\n  });\n}\n\nconst PATTERN = /\\{\\$([^}]+)}/g;\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport function contains<T extends object>(obj: T, key: string): boolean {\n  return Object.prototype.hasOwnProperty.call(obj, key);\n}\n\nexport function safeGet<T extends object, K extends keyof T>(\n  obj: T,\n  key: K\n): T[K] | undefined {\n  if (Object.prototype.hasOwnProperty.call(obj, key)) {\n    return obj[key];\n  } else {\n    return undefined;\n  }\n}\n\nexport function isEmpty(obj: object): obj is {} {\n  for (const key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) {\n      return false;\n    }\n  }\n  return true;\n}\n\nexport function map<K extends string, V, U>(\n  obj: { [key in K]: V },\n  fn: (value: V, key: K, obj: { [key in K]: V }) => U,\n  contextObj?: unknown\n): { [key in K]: U } {\n  const res: Partial<{ [key in K]: U }> = {};\n  for (const key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) {\n      res[key] = fn.call(contextObj, obj[key], key, obj);\n    }\n  }\n  return res as { [key in K]: U };\n}\n\n/**\n * Deep equal two objects. Support Arrays and Objects.\n */\nexport function deepEqual(a: object, b: object): boolean {\n  if (a === b) {\n    return true;\n  }\n\n  const aKeys = Object.keys(a);\n  const bKeys = Object.keys(b);\n  for (const k of aKeys) {\n    if (!bKeys.includes(k)) {\n      return false;\n    }\n\n    const aProp = (a as Record<string, unknown>)[k];\n    const bProp = (b as Record<string, unknown>)[k];\n    if (isObject(aProp) && isObject(bProp)) {\n      if (!deepEqual(aProp, bProp)) {\n        return false;\n      }\n    } else if (aProp !== bProp) {\n      return false;\n    }\n  }\n\n  for (const k of bKeys) {\n    if (!aKeys.includes(k)) {\n      return false;\n    }\n  }\n  return true;\n}\n\nfunction isObject(thing: unknown): thing is object {\n  return thing !== null && typeof thing === 'object';\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Returns a querystring-formatted string (e.g. &arg=val&arg2=val2) from a\n * params object (e.g. {arg: 'val', arg2: 'val2'})\n * Note: You must prepend it with ? when adding it to a URL.\n */\nexport function querystring(querystringParams: {\n  [key: string]: string | number;\n}): string {\n  const params = [];\n  for (const [key, value] of Object.entries(querystringParams)) {\n    if (Array.isArray(value)) {\n      value.forEach(arrayVal => {\n        params.push(\n          encodeURIComponent(key) + '=' + encodeURIComponent(arrayVal)\n        );\n      });\n    } else {\n      params.push(encodeURIComponent(key) + '=' + encodeURIComponent(value));\n    }\n  }\n  return params.length ? '&' + params.join('&') : '';\n}\n\n/**\n * Decodes a querystring (e.g. ?arg=val&arg2=val2) into a params object\n * (e.g. {arg: 'val', arg2: 'val2'})\n */\nexport function querystringDecode(querystring: string): Record<string, string> {\n  const obj: Record<string, string> = {};\n  const tokens = querystring.replace(/^\\?/, '').split('&');\n\n  tokens.forEach(token => {\n    if (token) {\n      const [key, value] = token.split('=');\n      obj[decodeURIComponent(key)] = decodeURIComponent(value);\n    }\n  });\n  return obj;\n}\n\n/**\n * Extract the query string part of a URL, including the leading question mark (if present).\n */\nexport function extractQuerystring(url: string): string {\n  const queryStart = url.indexOf('?');\n  if (!queryStart) {\n    return '';\n  }\n  const fragmentStart = url.indexOf('#', queryStart);\n  return url.substring(\n    queryStart,\n    fragmentStart > 0 ? fragmentStart : undefined\n  );\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nexport type NextFn<T> = (value: T) => void;\nexport type ErrorFn = (error: Error) => void;\nexport type CompleteFn = () => void;\n\nexport interface Observer<T> {\n  // Called once for each value in a stream of values.\n  next: NextFn<T>;\n\n  // A stream terminates by a single call to EITHER error() or complete().\n  error: ErrorFn;\n\n  // No events will be sent to next() once complete() is called.\n  complete: CompleteFn;\n}\n\nexport type PartialObserver<T> = Partial<Observer<T>>;\n\n// TODO: Support also Unsubscribe.unsubscribe?\nexport type Unsubscribe = () => void;\n\n/**\n * The Subscribe interface has two forms - passing the inline function\n * callbacks, or a object interface with callback properties.\n */\nexport interface Subscribe<T> {\n  (next?: NextFn<T>, error?: ErrorFn, complete?: CompleteFn): Unsubscribe;\n  (observer: PartialObserver<T>): Unsubscribe;\n}\n\nexport interface Observable<T> {\n  // Subscribe method\n  subscribe: Subscribe<T>;\n}\n\nexport type Executor<T> = (observer: Observer<T>) => void;\n\n/**\n * Helper to make a Subscribe function (just like Promise helps make a\n * Thenable).\n *\n * @param executor Function which can make calls to a single Observer\n *     as a proxy.\n * @param onNoObservers Callback when count of Observers goes to zero.\n */\nexport function createSubscribe<T>(\n  executor: Executor<T>,\n  onNoObservers?: Executor<T>\n): Subscribe<T> {\n  const proxy = new ObserverProxy<T>(executor, onNoObservers);\n  return proxy.subscribe.bind(proxy);\n}\n\n/**\n * Implement fan-out for any number of Observers attached via a subscribe\n * function.\n */\nclass ObserverProxy<T> implements Observer<T> {\n  private observers: Array<Observer<T>> | undefined = [];\n  private unsubscribes: Unsubscribe[] = [];\n  private onNoObservers: Executor<T> | undefined;\n  private observerCount = 0;\n  // Micro-task scheduling by calling task.then().\n  private task = Promise.resolve();\n  private finalized = false;\n  private finalError?: Error;\n\n  /**\n   * @param executor Function which can make calls to a single Observer\n   *     as a proxy.\n   * @param onNoObservers Callback when count of Observers goes to zero.\n   */\n  constructor(executor: Executor<T>, onNoObservers?: Executor<T>) {\n    this.onNoObservers = onNoObservers;\n    // Call the executor asynchronously so subscribers that are called\n    // synchronously after the creation of the subscribe function\n    // can still receive the very first value generated in the executor.\n    this.task\n      .then(() => {\n        executor(this);\n      })\n      .catch(e => {\n        this.error(e);\n      });\n  }\n\n  next(value: T): void {\n    this.forEachObserver((observer: Observer<T>) => {\n      observer.next(value);\n    });\n  }\n\n  error(error: Error): void {\n    this.forEachObserver((observer: Observer<T>) => {\n      observer.error(error);\n    });\n    this.close(error);\n  }\n\n  complete(): void {\n    this.forEachObserver((observer: Observer<T>) => {\n      observer.complete();\n    });\n    this.close();\n  }\n\n  /**\n   * Subscribe function that can be used to add an Observer to the fan-out list.\n   *\n   * - We require that no event is sent to a subscriber synchronously to their\n   *   call to subscribe().\n   */\n  subscribe(\n    nextOrObserver?: NextFn<T> | PartialObserver<T>,\n    error?: ErrorFn,\n    complete?: CompleteFn\n  ): Unsubscribe {\n    let observer: Observer<T>;\n\n    if (\n      nextOrObserver === undefined &&\n      error === undefined &&\n      complete === undefined\n    ) {\n      throw new Error('Missing Observer.');\n    }\n\n    // Assemble an Observer object when passed as callback functions.\n    if (\n      implementsAnyMethods(nextOrObserver as { [key: string]: unknown }, [\n        'next',\n        'error',\n        'complete'\n      ])\n    ) {\n      observer = nextOrObserver as Observer<T>;\n    } else {\n      observer = {\n        next: nextOrObserver as NextFn<T>,\n        error,\n        complete\n      } as Observer<T>;\n    }\n\n    if (observer.next === undefined) {\n      observer.next = noop as NextFn<T>;\n    }\n    if (observer.error === undefined) {\n      observer.error = noop as ErrorFn;\n    }\n    if (observer.complete === undefined) {\n      observer.complete = noop as CompleteFn;\n    }\n\n    const unsub = this.unsubscribeOne.bind(this, this.observers!.length);\n\n    // Attempt to subscribe to a terminated Observable - we\n    // just respond to the Observer with the final error or complete\n    // event.\n    if (this.finalized) {\n      // eslint-disable-next-line @typescript-eslint/no-floating-promises\n      this.task.then(() => {\n        try {\n          if (this.finalError) {\n            observer.error(this.finalError);\n          } else {\n            observer.complete();\n          }\n        } catch (e) {\n          // nothing\n        }\n        return;\n      });\n    }\n\n    this.observers!.push(observer as Observer<T>);\n\n    return unsub;\n  }\n\n  // Unsubscribe is synchronous - we guarantee that no events are sent to\n  // any unsubscribed Observer.\n  private unsubscribeOne(i: number): void {\n    if (this.observers === undefined || this.observers[i] === undefined) {\n      return;\n    }\n\n    delete this.observers[i];\n\n    this.observerCount -= 1;\n    if (this.observerCount === 0 && this.onNoObservers !== undefined) {\n      this.onNoObservers(this);\n    }\n  }\n\n  private forEachObserver(fn: (observer: Observer<T>) => void): void {\n    if (this.finalized) {\n      // Already closed by previous event....just eat the additional values.\n      return;\n    }\n\n    // Since sendOne calls asynchronously - there is no chance that\n    // this.observers will become undefined.\n    for (let i = 0; i < this.observers!.length; i++) {\n      this.sendOne(i, fn);\n    }\n  }\n\n  // Call the Observer via one of it's callback function. We are careful to\n  // confirm that the observe has not been unsubscribed since this asynchronous\n  // function had been queued.\n  private sendOne(i: number, fn: (observer: Observer<T>) => void): void {\n    // Execute the callback asynchronously\n    // eslint-disable-next-line @typescript-eslint/no-floating-promises\n    this.task.then(() => {\n      if (this.observers !== undefined && this.observers[i] !== undefined) {\n        try {\n          fn(this.observers[i]);\n        } catch (e) {\n          // Ignore exceptions raised in Observers or missing methods of an\n          // Observer.\n          // Log error to console. b/31404806\n          if (typeof console !== 'undefined' && console.error) {\n            console.error(e);\n          }\n        }\n      }\n    });\n  }\n\n  private close(err?: Error): void {\n    if (this.finalized) {\n      return;\n    }\n    this.finalized = true;\n    if (err !== undefined) {\n      this.finalError = err;\n    }\n    // Proxy is no longer needed - garbage collect references\n    // eslint-disable-next-line @typescript-eslint/no-floating-promises\n    this.task.then(() => {\n      this.observers = undefined;\n      this.onNoObservers = undefined;\n    });\n  }\n}\n\n/** Turn synchronous function into one called asynchronously. */\n// eslint-disable-next-line @typescript-eslint/ban-types\nexport function async(fn: Function, onError?: ErrorFn): Function {\n  return (...args: unknown[]) => {\n    Promise.resolve(true)\n      .then(() => {\n        fn(...args);\n      })\n      .catch((error: Error) => {\n        if (onError) {\n          onError(error);\n        }\n      });\n  };\n}\n\n/**\n * Return true if the object passed in implements any of the named methods.\n */\nfunction implementsAnyMethods(\n  obj: { [key: string]: unknown },\n  methods: string[]\n): boolean {\n  if (typeof obj !== 'object' || obj === null) {\n    return false;\n  }\n\n  for (const method of methods) {\n    if (method in obj && typeof obj[method] === 'function') {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nfunction noop(): void {\n  // do nothing\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * The amount of milliseconds to exponentially increase.\n */\nconst DEFAULT_INTERVAL_MILLIS = 1000;\n\n/**\n * The factor to backoff by.\n * Should be a number greater than 1.\n */\nconst DEFAULT_BACKOFF_FACTOR = 2;\n\n/**\n * The maximum milliseconds to increase to.\n *\n * <p>Visible for testing\n */\nexport const MAX_VALUE_MILLIS = 4 * 60 * 60 * 1000; // Four hours, like iOS and Android.\n\n/**\n * The percentage of backoff time to randomize by.\n * See\n * http://go/safe-client-behavior#step-1-determine-the-appropriate-retry-interval-to-handle-spike-traffic\n * for context.\n *\n * <p>Visible for testing\n */\nexport const RANDOM_FACTOR = 0.5;\n\n/**\n * Based on the backoff method from\n * https://github.com/google/closure-library/blob/master/closure/goog/math/exponentialbackoff.js.\n * Extracted here so we don't need to pass metadata and a stateful ExponentialBackoff object around.\n */\nexport function calculateBackoffMillis(\n  backoffCount: number,\n  intervalMillis: number = DEFAULT_INTERVAL_MILLIS,\n  backoffFactor: number = DEFAULT_BACKOFF_FACTOR\n): number {\n  // Calculates an exponentially increasing value.\n  // Deviation: calculates value from count and a constant interval, so we only need to save value\n  // and count to restore state.\n  const currBaseValue = intervalMillis * Math.pow(backoffFactor, backoffCount);\n\n  // A random \"fuzz\" to avoid waves of retries.\n  // Deviation: randomFactor is required.\n  const randomWait = Math.round(\n    // A fraction of the backoff value to add/subtract.\n    // Deviation: changes multiplication order to improve readability.\n    RANDOM_FACTOR *\n      currBaseValue *\n      // A random float (rounded to int by Math.round above) in the range [-1, 1]. Determines\n      // if we add or subtract.\n      (Math.random() - 0.5) *\n      2\n  );\n\n  // Limits backoff to max to avoid effectively permanent backoff.\n  return Math.min(MAX_VALUE_MILLIS, currBaseValue + randomWait);\n}\n","/**\n * @license\n * Copyright 2021 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport interface Compat<T> {\n  _delegate: T;\n}\n\nexport function getModularInstance<ExpService>(\n  service: Compat<ExpService> | ExpService\n): ExpService {\n  if (service && (service as Compat<ExpService>)._delegate) {\n    return (service as Compat<ExpService>)._delegate;\n  } else {\n    return service as ExpService;\n  }\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport {\n  InstantiationMode,\n  InstanceFactory,\n  ComponentType,\n  Dictionary,\n  Name,\n  onInstanceCreatedCallback\n} from './types';\n\n/**\n * Component for service name T, e.g. `auth`, `auth-internal`\n */\nexport class Component<T extends Name = Name> {\n  multipleInstances = false;\n  /**\n   * Properties to be added to the service namespace\n   */\n  serviceProps: Dictionary = {};\n\n  instantiationMode = InstantiationMode.LAZY;\n\n  onInstanceCreated: onInstanceCreatedCallback<T> | null = null;\n\n  /**\n   *\n   * @param name The public service name, e.g. app, auth, firestore, database\n   * @param instanceFactory Service factory responsible for creating the public interface\n   * @param type whether the service provided by the component is public or private\n   */\n  constructor(\n    readonly name: T,\n    readonly instanceFactory: InstanceFactory<T>,\n    readonly type: ComponentType\n  ) {}\n\n  setInstantiationMode(mode: InstantiationMode): this {\n    this.instantiationMode = mode;\n    return this;\n  }\n\n  setMultipleInstances(multipleInstances: boolean): this {\n    this.multipleInstances = multipleInstances;\n    return this;\n  }\n\n  setServiceProps(props: Dictionary): this {\n    this.serviceProps = props;\n    return this;\n  }\n\n  setInstanceCreatedCallback(callback: onInstanceCreatedCallback<T>): this {\n    this.onInstanceCreated = callback;\n    return this;\n  }\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport const DEFAULT_ENTRY_NAME = '[DEFAULT]';\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Deferred } from '@firebase/util';\nimport { ComponentContainer } from './component_container';\nimport { DEFAULT_ENTRY_NAME } from './constants';\nimport {\n  InitializeOptions,\n  InstantiationMode,\n  Name,\n  NameServiceMapping,\n  OnInitCallBack\n} from './types';\nimport { Component } from './component';\n\n/**\n * Provider for instance for service name T, e.g. 'auth', 'auth-internal'\n * NameServiceMapping[T] is an alias for the type of the instance\n */\nexport class Provider<T extends Name> {\n  private component: Component<T> | null = null;\n  private readonly instances: Map<string, NameServiceMapping[T]> = new Map();\n  private readonly instancesDeferred: Map<\n    string,\n    Deferred<NameServiceMapping[T]>\n  > = new Map();\n  private readonly instancesOptions: Map<string, Record<string, unknown>> =\n    new Map();\n  private onInitCallbacks: Map<string, Set<OnInitCallBack<T>>> = new Map();\n\n  constructor(\n    private readonly name: T,\n    private readonly container: ComponentContainer\n  ) {}\n\n  /**\n   * @param identifier A provider can provide multiple instances of a service\n   * if this.component.multipleInstances is true.\n   */\n  get(identifier?: string): Promise<NameServiceMapping[T]> {\n    // if multipleInstances is not supported, use the default name\n    const normalizedIdentifier = this.normalizeInstanceIdentifier(identifier);\n\n    if (!this.instancesDeferred.has(normalizedIdentifier)) {\n      const deferred = new Deferred<NameServiceMapping[T]>();\n      this.instancesDeferred.set(normalizedIdentifier, deferred);\n\n      if (\n        this.isInitialized(normalizedIdentifier) ||\n        this.shouldAutoInitialize()\n      ) {\n        // initialize the service if it can be auto-initialized\n        try {\n          const instance = this.getOrInitializeService({\n            instanceIdentifier: normalizedIdentifier\n          });\n          if (instance) {\n            deferred.resolve(instance);\n          }\n        } catch (e) {\n          // when the instance factory throws an exception during get(), it should not cause\n          // a fatal error. We just return the unresolved promise in this case.\n        }\n      }\n    }\n\n    return this.instancesDeferred.get(normalizedIdentifier)!.promise;\n  }\n\n  /**\n   *\n   * @param options.identifier A provider can provide multiple instances of a service\n   * if this.component.multipleInstances is true.\n   * @param options.optional If optional is false or not provided, the method throws an error when\n   * the service is not immediately available.\n   * If optional is true, the method returns null if the service is not immediately available.\n   */\n  getImmediate(options: {\n    identifier?: string;\n    optional: true;\n  }): NameServiceMapping[T] | null;\n  getImmediate(options?: {\n    identifier?: string;\n    optional?: false;\n  }): NameServiceMapping[T];\n  getImmediate(options?: {\n    identifier?: string;\n    optional?: boolean;\n  }): NameServiceMapping[T] | null {\n    // if multipleInstances is not supported, use the default name\n    const normalizedIdentifier = this.normalizeInstanceIdentifier(\n      options?.identifier\n    );\n    const optional = options?.optional ?? false;\n\n    if (\n      this.isInitialized(normalizedIdentifier) ||\n      this.shouldAutoInitialize()\n    ) {\n      try {\n        return this.getOrInitializeService({\n          instanceIdentifier: normalizedIdentifier\n        });\n      } catch (e) {\n        if (optional) {\n          return null;\n        } else {\n          throw e;\n        }\n      }\n    } else {\n      // In case a component is not initialized and should/cannot be auto-initialized at the moment, return null if the optional flag is set, or throw\n      if (optional) {\n        return null;\n      } else {\n        throw Error(`Service ${this.name} is not available`);\n      }\n    }\n  }\n\n  getComponent(): Component<T> | null {\n    return this.component;\n  }\n\n  setComponent(component: Component<T>): void {\n    if (component.name !== this.name) {\n      throw Error(\n        `Mismatching Component ${component.name} for Provider ${this.name}.`\n      );\n    }\n\n    if (this.component) {\n      throw Error(`Component for ${this.name} has already been provided`);\n    }\n\n    this.component = component;\n\n    // return early without attempting to initialize the component if the component requires explicit initialization (calling `Provider.initialize()`)\n    if (!this.shouldAutoInitialize()) {\n      return;\n    }\n\n    // if the service is eager, initialize the default instance\n    if (isComponentEager(component)) {\n      try {\n        this.getOrInitializeService({ instanceIdentifier: DEFAULT_ENTRY_NAME });\n      } catch (e) {\n        // when the instance factory for an eager Component throws an exception during the eager\n        // initialization, it should not cause a fatal error.\n        // TODO: Investigate if we need to make it configurable, because some component may want to cause\n        // a fatal error in this case?\n      }\n    }\n\n    // Create service instances for the pending promises and resolve them\n    // NOTE: if this.multipleInstances is false, only the default instance will be created\n    // and all promises with resolve with it regardless of the identifier.\n    for (const [\n      instanceIdentifier,\n      instanceDeferred\n    ] of this.instancesDeferred.entries()) {\n      const normalizedIdentifier =\n        this.normalizeInstanceIdentifier(instanceIdentifier);\n\n      try {\n        // `getOrInitializeService()` should always return a valid instance since a component is guaranteed. use ! to make typescript happy.\n        const instance = this.getOrInitializeService({\n          instanceIdentifier: normalizedIdentifier\n        })!;\n        instanceDeferred.resolve(instance);\n      } catch (e) {\n        // when the instance factory throws an exception, it should not cause\n        // a fatal error. We just leave the promise unresolved.\n      }\n    }\n  }\n\n  clearInstance(identifier: string = DEFAULT_ENTRY_NAME): void {\n    this.instancesDeferred.delete(identifier);\n    this.instancesOptions.delete(identifier);\n    this.instances.delete(identifier);\n  }\n\n  // app.delete() will call this method on every provider to delete the services\n  // TODO: should we mark the provider as deleted?\n  async delete(): Promise<void> {\n    const services = Array.from(this.instances.values());\n\n    await Promise.all([\n      ...services\n        .filter(service => 'INTERNAL' in service) // legacy services\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        .map(service => (service as any).INTERNAL!.delete()),\n      ...services\n        .filter(service => '_delete' in service) // modularized services\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        .map(service => (service as any)._delete())\n    ]);\n  }\n\n  isComponentSet(): boolean {\n    return this.component != null;\n  }\n\n  isInitialized(identifier: string = DEFAULT_ENTRY_NAME): boolean {\n    return this.instances.has(identifier);\n  }\n\n  getOptions(identifier: string = DEFAULT_ENTRY_NAME): Record<string, unknown> {\n    return this.instancesOptions.get(identifier) || {};\n  }\n\n  initialize(opts: InitializeOptions = {}): NameServiceMapping[T] {\n    const { options = {} } = opts;\n    const normalizedIdentifier = this.normalizeInstanceIdentifier(\n      opts.instanceIdentifier\n    );\n    if (this.isInitialized(normalizedIdentifier)) {\n      throw Error(\n        `${this.name}(${normalizedIdentifier}) has already been initialized`\n      );\n    }\n\n    if (!this.isComponentSet()) {\n      throw Error(`Component ${this.name} has not been registered yet`);\n    }\n\n    const instance = this.getOrInitializeService({\n      instanceIdentifier: normalizedIdentifier,\n      options\n    })!;\n\n    // resolve any pending promise waiting for the service instance\n    for (const [\n      instanceIdentifier,\n      instanceDeferred\n    ] of this.instancesDeferred.entries()) {\n      const normalizedDeferredIdentifier =\n        this.normalizeInstanceIdentifier(instanceIdentifier);\n      if (normalizedIdentifier === normalizedDeferredIdentifier) {\n        instanceDeferred.resolve(instance);\n      }\n    }\n\n    return instance;\n  }\n\n  /**\n   *\n   * @param callback - a function that will be invoked  after the provider has been initialized by calling provider.initialize().\n   * The function is invoked SYNCHRONOUSLY, so it should not execute any longrunning tasks in order to not block the program.\n   *\n   * @param identifier An optional instance identifier\n   * @returns a function to unregister the callback\n   */\n  onInit(callback: OnInitCallBack<T>, identifier?: string): () => void {\n    const normalizedIdentifier = this.normalizeInstanceIdentifier(identifier);\n    const existingCallbacks =\n      this.onInitCallbacks.get(normalizedIdentifier) ??\n      new Set<OnInitCallBack<T>>();\n    existingCallbacks.add(callback);\n    this.onInitCallbacks.set(normalizedIdentifier, existingCallbacks);\n\n    const existingInstance = this.instances.get(normalizedIdentifier);\n    if (existingInstance) {\n      callback(existingInstance, normalizedIdentifier);\n    }\n\n    return () => {\n      existingCallbacks.delete(callback);\n    };\n  }\n\n  /**\n   * Invoke onInit callbacks synchronously\n   * @param instance the service instance`\n   */\n  private invokeOnInitCallbacks(\n    instance: NameServiceMapping[T],\n    identifier: string\n  ): void {\n    const callbacks = this.onInitCallbacks.get(identifier);\n    if (!callbacks) {\n      return;\n    }\n    for (const callback of callbacks) {\n      try {\n        callback(instance, identifier);\n      } catch {\n        // ignore errors in the onInit callback\n      }\n    }\n  }\n\n  private getOrInitializeService({\n    instanceIdentifier,\n    options = {}\n  }: {\n    instanceIdentifier: string;\n    options?: Record<string, unknown>;\n  }): NameServiceMapping[T] | null {\n    let instance = this.instances.get(instanceIdentifier);\n    if (!instance && this.component) {\n      instance = this.component.instanceFactory(this.container, {\n        instanceIdentifier: normalizeIdentifierForFactory(instanceIdentifier),\n        options\n      });\n      this.instances.set(instanceIdentifier, instance!);\n      this.instancesOptions.set(instanceIdentifier, options);\n\n      /**\n       * Invoke onInit listeners.\n       * Note this.component.onInstanceCreated is different, which is used by the component creator,\n       * while onInit listeners are registered by consumers of the provider.\n       */\n      this.invokeOnInitCallbacks(instance!, instanceIdentifier);\n\n      /**\n       * Order is important\n       * onInstanceCreated() should be called after this.instances.set(instanceIdentifier, instance); which\n       * makes `isInitialized()` return true.\n       */\n      if (this.component.onInstanceCreated) {\n        try {\n          this.component.onInstanceCreated(\n            this.container,\n            instanceIdentifier,\n            instance!\n          );\n        } catch {\n          // ignore errors in the onInstanceCreatedCallback\n        }\n      }\n    }\n\n    return instance || null;\n  }\n\n  private normalizeInstanceIdentifier(\n    identifier: string = DEFAULT_ENTRY_NAME\n  ): string {\n    if (this.component) {\n      return this.component.multipleInstances ? identifier : DEFAULT_ENTRY_NAME;\n    } else {\n      return identifier; // assume multiple instances are supported before the component is provided.\n    }\n  }\n\n  private shouldAutoInitialize(): boolean {\n    return (\n      !!this.component &&\n      this.component.instantiationMode !== InstantiationMode.EXPLICIT\n    );\n  }\n}\n\n// undefined should be passed to the service factory for the default instance\nfunction normalizeIdentifierForFactory(identifier: string): string | undefined {\n  return identifier === DEFAULT_ENTRY_NAME ? undefined : identifier;\n}\n\nfunction isComponentEager<T extends Name>(component: Component<T>): boolean {\n  return component.instantiationMode === InstantiationMode.EAGER;\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Provider } from './provider';\nimport { Component } from './component';\nimport { Name } from './types';\n\n/**\n * ComponentContainer that provides Providers for service name T, e.g. `auth`, `auth-internal`\n */\nexport class ComponentContainer {\n  private readonly providers = new Map<string, Provider<Name>>();\n\n  constructor(private readonly name: string) {}\n\n  /**\n   *\n   * @param component Component being added\n   * @param overwrite When a component with the same name has already been registered,\n   * if overwrite is true: overwrite the existing component with the new component and create a new\n   * provider with the new component. It can be useful in tests where you want to use different mocks\n   * for different tests.\n   * if overwrite is false: throw an exception\n   */\n  addComponent<T extends Name>(component: Component<T>): void {\n    const provider = this.getProvider(component.name);\n    if (provider.isComponentSet()) {\n      throw new Error(\n        `Component ${component.name} has already been registered with ${this.name}`\n      );\n    }\n\n    provider.setComponent(component);\n  }\n\n  addOrOverwriteComponent<T extends Name>(component: Component<T>): void {\n    const provider = this.getProvider(component.name);\n    if (provider.isComponentSet()) {\n      // delete the existing provider from the container, so we can register the new component\n      this.providers.delete(component.name);\n    }\n\n    this.addComponent(component);\n  }\n\n  /**\n   * getProvider provides a type safe interface where it can only be called with a field name\n   * present in NameServiceMapping interface.\n   *\n   * Firebase SDKs providing services should extend NameServiceMapping interface to register\n   * themselves.\n   */\n  getProvider<T extends Name>(name: T): Provider<T> {\n    if (this.providers.has(name)) {\n      return this.providers.get(name) as unknown as Provider<T>;\n    }\n\n    // create a Provider for a service that hasn't registered with Firebase\n    const provider = new Provider<T>(name, this);\n    this.providers.set(name, provider as unknown as Provider<Name>);\n\n    return provider as Provider<T>;\n  }\n\n  getProviders(): Array<Provider<Name>> {\n    return Array.from(this.providers.values());\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport type LogLevelString =\n  | 'debug'\n  | 'verbose'\n  | 'info'\n  | 'warn'\n  | 'error'\n  | 'silent';\n\nexport interface LogOptions {\n  level: LogLevelString;\n}\n\nexport type LogCallback = (callbackParams: LogCallbackParams) => void;\n\nexport interface LogCallbackParams {\n  level: LogLevelString;\n  message: string;\n  args: unknown[];\n  type: string;\n}\n\n/**\n * A container for all of the Logger instances\n */\nexport const instances: Logger[] = [];\n\n/**\n * The JS SDK supports 5 log levels and also allows a user the ability to\n * silence the logs altogether.\n *\n * The order is a follows:\n * DEBUG < VERBOSE < INFO < WARN < ERROR\n *\n * All of the log types above the current log level will be captured (i.e. if\n * you set the log level to `INFO`, errors will still be logged, but `DEBUG` and\n * `VERBOSE` logs will not)\n */\nexport enum LogLevel {\n  DEBUG,\n  VERBOSE,\n  INFO,\n  WARN,\n  ERROR,\n  SILENT\n}\n\nconst levelStringToEnum: { [key in LogLevelString]: LogLevel } = {\n  'debug': LogLevel.DEBUG,\n  'verbose': LogLevel.VERBOSE,\n  'info': LogLevel.INFO,\n  'warn': LogLevel.WARN,\n  'error': LogLevel.ERROR,\n  'silent': LogLevel.SILENT\n};\n\n/**\n * The default log level\n */\nconst defaultLogLevel: LogLevel = LogLevel.INFO;\n\n/**\n * We allow users the ability to pass their own log handler. We will pass the\n * type of log, the current log level, and any other arguments passed (i.e. the\n * messages that the user wants to log) to this function.\n */\nexport type LogHandler = (\n  loggerInstance: Logger,\n  logType: LogLevel,\n  ...args: unknown[]\n) => void;\n\n/**\n * By default, `console.debug` is not displayed in the developer console (in\n * chrome). To avoid forcing users to have to opt-in to these logs twice\n * (i.e. once for firebase, and once in the console), we are sending `DEBUG`\n * logs to the `console.log` function.\n */\nconst ConsoleMethod = {\n  [LogLevel.DEBUG]: 'log',\n  [LogLevel.VERBOSE]: 'log',\n  [LogLevel.INFO]: 'info',\n  [LogLevel.WARN]: 'warn',\n  [LogLevel.ERROR]: 'error'\n};\n\n/**\n * The default log handler will forward DEBUG, VERBOSE, INFO, WARN, and ERROR\n * messages on to their corresponding console counterparts (if the log method\n * is supported by the current log level)\n */\nconst defaultLogHandler: LogHandler = (instance, logType, ...args): void => {\n  if (logType < instance.logLevel) {\n    return;\n  }\n  const now = new Date().toISOString();\n  const method = ConsoleMethod[logType as keyof typeof ConsoleMethod];\n  if (method) {\n    console[method as 'log' | 'info' | 'warn' | 'error'](\n      `[${now}]  ${instance.name}:`,\n      ...args\n    );\n  } else {\n    throw new Error(\n      `Attempted to log a message with an invalid logType (value: ${logType})`\n    );\n  }\n};\n\nexport class Logger {\n  /**\n   * Gives you an instance of a Logger to capture messages according to\n   * Firebase's logging scheme.\n   *\n   * @param name The name that the logs will be associated with\n   */\n  constructor(public name: string) {\n    /**\n     * Capture the current instance for later use\n     */\n    instances.push(this);\n  }\n\n  /**\n   * The log level of the given Logger instance.\n   */\n  private _logLevel = defaultLogLevel;\n\n  get logLevel(): LogLevel {\n    return this._logLevel;\n  }\n\n  set logLevel(val: LogLevel) {\n    if (!(val in LogLevel)) {\n      throw new TypeError(`Invalid value \"${val}\" assigned to \\`logLevel\\``);\n    }\n    this._logLevel = val;\n  }\n\n  // Workaround for setter/getter having to be the same type.\n  setLogLevel(val: LogLevel | LogLevelString): void {\n    this._logLevel = typeof val === 'string' ? levelStringToEnum[val] : val;\n  }\n\n  /**\n   * The main (internal) log handler for the Logger instance.\n   * Can be set to a new function in internal package code but not by user.\n   */\n  private _logHandler: LogHandler = defaultLogHandler;\n  get logHandler(): LogHandler {\n    return this._logHandler;\n  }\n  set logHandler(val: LogHandler) {\n    if (typeof val !== 'function') {\n      throw new TypeError('Value assigned to `logHandler` must be a function');\n    }\n    this._logHandler = val;\n  }\n\n  /**\n   * The optional, additional, user-defined log handler for the Logger instance.\n   */\n  private _userLogHandler: LogHandler | null = null;\n  get userLogHandler(): LogHandler | null {\n    return this._userLogHandler;\n  }\n  set userLogHandler(val: LogHandler | null) {\n    this._userLogHandler = val;\n  }\n\n  /**\n   * The functions below are all based on the `console` interface\n   */\n\n  debug(...args: unknown[]): void {\n    this._userLogHandler && this._userLogHandler(this, LogLevel.DEBUG, ...args);\n    this._logHandler(this, LogLevel.DEBUG, ...args);\n  }\n  log(...args: unknown[]): void {\n    this._userLogHandler &&\n      this._userLogHandler(this, LogLevel.VERBOSE, ...args);\n    this._logHandler(this, LogLevel.VERBOSE, ...args);\n  }\n  info(...args: unknown[]): void {\n    this._userLogHandler && this._userLogHandler(this, LogLevel.INFO, ...args);\n    this._logHandler(this, LogLevel.INFO, ...args);\n  }\n  warn(...args: unknown[]): void {\n    this._userLogHandler && this._userLogHandler(this, LogLevel.WARN, ...args);\n    this._logHandler(this, LogLevel.WARN, ...args);\n  }\n  error(...args: unknown[]): void {\n    this._userLogHandler && this._userLogHandler(this, LogLevel.ERROR, ...args);\n    this._logHandler(this, LogLevel.ERROR, ...args);\n  }\n}\n\nexport function setLogLevel(level: LogLevelString | LogLevel): void {\n  instances.forEach(inst => {\n    inst.setLogLevel(level);\n  });\n}\n\nexport function setUserLogHandler(\n  logCallback: LogCallback | null,\n  options?: LogOptions\n): void {\n  for (const instance of instances) {\n    let customLogLevel: LogLevel | null = null;\n    if (options && options.level) {\n      customLogLevel = levelStringToEnum[options.level];\n    }\n    if (logCallback === null) {\n      instance.userLogHandler = null;\n    } else {\n      instance.userLogHandler = (\n        instance: Logger,\n        level: LogLevel,\n        ...args: unknown[]\n      ) => {\n        const message = args\n          .map(arg => {\n            if (arg == null) {\n              return null;\n            } else if (typeof arg === 'string') {\n              return arg;\n            } else if (typeof arg === 'number' || typeof arg === 'boolean') {\n              return arg.toString();\n            } else if (arg instanceof Error) {\n              return arg.message;\n            } else {\n              try {\n                return JSON.stringify(arg);\n              } catch (ignored) {\n                return null;\n              }\n            }\n          })\n          .filter(arg => arg)\n          .join(' ');\n        if (level >= (customLogLevel ?? instance.logLevel)) {\n          logCallback({\n            level: LogLevel[level].toLowerCase() as LogLevelString,\n            message,\n            args,\n            type: instance.name\n          });\n        }\n      };\n    }\n  }\n}\n","const instanceOfAny = (object, constructors) => constructors.some((c) => object instanceof c);\n\nlet idbProxyableTypes;\nlet cursorAdvanceMethods;\n// This is a function to prevent it throwing up in node environments.\nfunction getIdbProxyableTypes() {\n    return (idbProxyableTypes ||\n        (idbProxyableTypes = [\n            IDBDatabase,\n            IDBObjectStore,\n            IDBIndex,\n            IDBCursor,\n            IDBTransaction,\n        ]));\n}\n// This is a function to prevent it throwing up in node environments.\nfunction getCursorAdvanceMethods() {\n    return (cursorAdvanceMethods ||\n        (cursorAdvanceMethods = [\n            IDBCursor.prototype.advance,\n            IDBCursor.prototype.continue,\n            IDBCursor.prototype.continuePrimaryKey,\n        ]));\n}\nconst cursorRequestMap = new WeakMap();\nconst transactionDoneMap = new WeakMap();\nconst transactionStoreNamesMap = new WeakMap();\nconst transformCache = new WeakMap();\nconst reverseTransformCache = new WeakMap();\nfunction promisifyRequest(request) {\n    const promise = new Promise((resolve, reject) => {\n        const unlisten = () => {\n            request.removeEventListener('success', success);\n            request.removeEventListener('error', error);\n        };\n        const success = () => {\n            resolve(wrap(request.result));\n            unlisten();\n        };\n        const error = () => {\n            reject(request.error);\n            unlisten();\n        };\n        request.addEventListener('success', success);\n        request.addEventListener('error', error);\n    });\n    promise\n        .then((value) => {\n        // Since cursoring reuses the IDBRequest (*sigh*), we cache it for later retrieval\n        // (see wrapFunction).\n        if (value instanceof IDBCursor) {\n            cursorRequestMap.set(value, request);\n        }\n        // Catching to avoid \"Uncaught Promise exceptions\"\n    })\n        .catch(() => { });\n    // This mapping exists in reverseTransformCache but doesn't doesn't exist in transformCache. This\n    // is because we create many promises from a single IDBRequest.\n    reverseTransformCache.set(promise, request);\n    return promise;\n}\nfunction cacheDonePromiseForTransaction(tx) {\n    // Early bail if we've already created a done promise for this transaction.\n    if (transactionDoneMap.has(tx))\n        return;\n    const done = new Promise((resolve, reject) => {\n        const unlisten = () => {\n            tx.removeEventListener('complete', complete);\n            tx.removeEventListener('error', error);\n            tx.removeEventListener('abort', error);\n        };\n        const complete = () => {\n            resolve();\n            unlisten();\n        };\n        const error = () => {\n            reject(tx.error || new DOMException('AbortError', 'AbortError'));\n            unlisten();\n        };\n        tx.addEventListener('complete', complete);\n        tx.addEventListener('error', error);\n        tx.addEventListener('abort', error);\n    });\n    // Cache it for later retrieval.\n    transactionDoneMap.set(tx, done);\n}\nlet idbProxyTraps = {\n    get(target, prop, receiver) {\n        if (target instanceof IDBTransaction) {\n            // Special handling for transaction.done.\n            if (prop === 'done')\n                return transactionDoneMap.get(target);\n            // Polyfill for objectStoreNames because of Edge.\n            if (prop === 'objectStoreNames') {\n                return target.objectStoreNames || transactionStoreNamesMap.get(target);\n            }\n            // Make tx.store return the only store in the transaction, or undefined if there are many.\n            if (prop === 'store') {\n                return receiver.objectStoreNames[1]\n                    ? undefined\n                    : receiver.objectStore(receiver.objectStoreNames[0]);\n            }\n        }\n        // Else transform whatever we get back.\n        return wrap(target[prop]);\n    },\n    set(target, prop, value) {\n        target[prop] = value;\n        return true;\n    },\n    has(target, prop) {\n        if (target instanceof IDBTransaction &&\n            (prop === 'done' || prop === 'store')) {\n            return true;\n        }\n        return prop in target;\n    },\n};\nfunction replaceTraps(callback) {\n    idbProxyTraps = callback(idbProxyTraps);\n}\nfunction wrapFunction(func) {\n    // Due to expected object equality (which is enforced by the caching in `wrap`), we\n    // only create one new func per func.\n    // Edge doesn't support objectStoreNames (booo), so we polyfill it here.\n    if (func === IDBDatabase.prototype.transaction &&\n        !('objectStoreNames' in IDBTransaction.prototype)) {\n        return function (storeNames, ...args) {\n            const tx = func.call(unwrap(this), storeNames, ...args);\n            transactionStoreNamesMap.set(tx, storeNames.sort ? storeNames.sort() : [storeNames]);\n            return wrap(tx);\n        };\n    }\n    // Cursor methods are special, as the behaviour is a little more different to standard IDB. In\n    // IDB, you advance the cursor and wait for a new 'success' on the IDBRequest that gave you the\n    // cursor. It's kinda like a promise that can resolve with many values. That doesn't make sense\n    // with real promises, so each advance methods returns a new promise for the cursor object, or\n    // undefined if the end of the cursor has been reached.\n    if (getCursorAdvanceMethods().includes(func)) {\n        return function (...args) {\n            // Calling the original function with the proxy as 'this' causes ILLEGAL INVOCATION, so we use\n            // the original object.\n            func.apply(unwrap(this), args);\n            return wrap(cursorRequestMap.get(this));\n        };\n    }\n    return function (...args) {\n        // Calling the original function with the proxy as 'this' causes ILLEGAL INVOCATION, so we use\n        // the original object.\n        return wrap(func.apply(unwrap(this), args));\n    };\n}\nfunction transformCachableValue(value) {\n    if (typeof value === 'function')\n        return wrapFunction(value);\n    // This doesn't return, it just creates a 'done' promise for the transaction,\n    // which is later returned for transaction.done (see idbObjectHandler).\n    if (value instanceof IDBTransaction)\n        cacheDonePromiseForTransaction(value);\n    if (instanceOfAny(value, getIdbProxyableTypes()))\n        return new Proxy(value, idbProxyTraps);\n    // Return the same value back if we're not going to transform it.\n    return value;\n}\nfunction wrap(value) {\n    // We sometimes generate multiple promises from a single IDBRequest (eg when cursoring), because\n    // IDB is weird and a single IDBRequest can yield many responses, so these can't be cached.\n    if (value instanceof IDBRequest)\n        return promisifyRequest(value);\n    // If we've already transformed this value before, reuse the transformed value.\n    // This is faster, but it also provides object equality.\n    if (transformCache.has(value))\n        return transformCache.get(value);\n    const newValue = transformCachableValue(value);\n    // Not all types are transformed.\n    // These may be primitive types, so they can't be WeakMap keys.\n    if (newValue !== value) {\n        transformCache.set(value, newValue);\n        reverseTransformCache.set(newValue, value);\n    }\n    return newValue;\n}\nconst unwrap = (value) => reverseTransformCache.get(value);\n\nexport { reverseTransformCache as a, instanceOfAny as i, replaceTraps as r, unwrap as u, wrap as w };\n","import { w as wrap, r as replaceTraps } from './wrap-idb-value.js';\nexport { u as unwrap, w as wrap } from './wrap-idb-value.js';\n\n/**\n * Open a database.\n *\n * @param name Name of the database.\n * @param version Schema version.\n * @param callbacks Additional callbacks.\n */\nfunction openDB(name, version, { blocked, upgrade, blocking, terminated } = {}) {\n    const request = indexedDB.open(name, version);\n    const openPromise = wrap(request);\n    if (upgrade) {\n        request.addEventListener('upgradeneeded', (event) => {\n            upgrade(wrap(request.result), event.oldVersion, event.newVersion, wrap(request.transaction), event);\n        });\n    }\n    if (blocked) {\n        request.addEventListener('blocked', (event) => blocked(\n        // Casting due to https://github.com/microsoft/TypeScript-DOM-lib-generator/pull/1405\n        event.oldVersion, event.newVersion, event));\n    }\n    openPromise\n        .then((db) => {\n        if (terminated)\n            db.addEventListener('close', () => terminated());\n        if (blocking) {\n            db.addEventListener('versionchange', (event) => blocking(event.oldVersion, event.newVersion, event));\n        }\n    })\n        .catch(() => { });\n    return openPromise;\n}\n/**\n * Delete a database.\n *\n * @param name Name of the database.\n */\nfunction deleteDB(name, { blocked } = {}) {\n    const request = indexedDB.deleteDatabase(name);\n    if (blocked) {\n        request.addEventListener('blocked', (event) => blocked(\n        // Casting due to https://github.com/microsoft/TypeScript-DOM-lib-generator/pull/1405\n        event.oldVersion, event));\n    }\n    return wrap(request).then(() => undefined);\n}\n\nconst readMethods = ['get', 'getKey', 'getAll', 'getAllKeys', 'count'];\nconst writeMethods = ['put', 'add', 'delete', 'clear'];\nconst cachedMethods = new Map();\nfunction getMethod(target, prop) {\n    if (!(target instanceof IDBDatabase &&\n        !(prop in target) &&\n        typeof prop === 'string')) {\n        return;\n    }\n    if (cachedMethods.get(prop))\n        return cachedMethods.get(prop);\n    const targetFuncName = prop.replace(/FromIndex$/, '');\n    const useIndex = prop !== targetFuncName;\n    const isWrite = writeMethods.includes(targetFuncName);\n    if (\n    // Bail if the target doesn't exist on the target. Eg, getAll isn't in Edge.\n    !(targetFuncName in (useIndex ? IDBIndex : IDBObjectStore).prototype) ||\n        !(isWrite || readMethods.includes(targetFuncName))) {\n        return;\n    }\n    const method = async function (storeName, ...args) {\n        // isWrite ? 'readwrite' : undefined gzipps better, but fails in Edge :(\n        const tx = this.transaction(storeName, isWrite ? 'readwrite' : 'readonly');\n        let target = tx.store;\n        if (useIndex)\n            target = target.index(args.shift());\n        // Must reject if op rejects.\n        // If it's a write operation, must reject if tx.done rejects.\n        // Must reject with op rejection first.\n        // Must resolve with op value.\n        // Must handle both promises (no unhandled rejections)\n        return (await Promise.all([\n            target[targetFuncName](...args),\n            isWrite && tx.done,\n        ]))[0];\n    };\n    cachedMethods.set(prop, method);\n    return method;\n}\nreplaceTraps((oldTraps) => ({\n    ...oldTraps,\n    get: (target, prop, receiver) => getMethod(target, prop) || oldTraps.get(target, prop, receiver),\n    has: (target, prop) => !!getMethod(target, prop) || oldTraps.has(target, prop),\n}));\n\nexport { deleteDB, openDB };\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  ComponentContainer,\n  ComponentType,\n  Provider,\n  Name\n} from '@firebase/component';\nimport { PlatformLoggerService, VersionService } from './types';\n\nexport class PlatformLoggerServiceImpl implements PlatformLoggerService {\n  constructor(private readonly container: ComponentContainer) {}\n  // In initial implementation, this will be called by installations on\n  // auth token refresh, and installations will send this string.\n  getPlatformInfoString(): string {\n    const providers = this.container.getProviders();\n    // Loop through providers and get library/version pairs from any that are\n    // version components.\n    return providers\n      .map(provider => {\n        if (isVersionServiceProvider(provider)) {\n          const service = provider.getImmediate() as VersionService;\n          return `${service.library}/${service.version}`;\n        } else {\n          return null;\n        }\n      })\n      .filter(logString => logString)\n      .join(' ');\n  }\n}\n/**\n *\n * @param provider check if this provider provides a VersionService\n *\n * NOTE: Using Provider<'app-version'> is a hack to indicate that the provider\n * provides VersionService. The provider is not necessarily a 'app-version'\n * provider.\n */\nfunction isVersionServiceProvider(provider: Provider<Name>): boolean {\n  const component = provider.getComponent();\n  return component?.type === ComponentType.VERSION;\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Logger } from '@firebase/logger';\n\nexport const logger = new Logger('@firebase/app');\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { name as appName } from '../package.json';\nimport { name as appCompatName } from '../../app-compat/package.json';\nimport { name as analyticsCompatName } from '../../../packages/analytics-compat/package.json';\nimport { name as analyticsName } from '../../../packages/analytics/package.json';\nimport { name as appCheckCompatName } from '../../../packages/app-check-compat/package.json';\nimport { name as appCheckName } from '../../../packages/app-check/package.json';\nimport { name as authName } from '../../../packages/auth/package.json';\nimport { name as authCompatName } from '../../../packages/auth-compat/package.json';\nimport { name as databaseName } from '../../../packages/database/package.json';\nimport { name as dataconnectName } from '../../../packages/data-connect/package.json';\nimport { name as databaseCompatName } from '../../../packages/database-compat/package.json';\nimport { name as functionsName } from '../../../packages/functions/package.json';\nimport { name as functionsCompatName } from '../../../packages/functions-compat/package.json';\nimport { name as installationsName } from '../../../packages/installations/package.json';\nimport { name as installationsCompatName } from '../../../packages/installations-compat/package.json';\nimport { name as messagingName } from '../../../packages/messaging/package.json';\nimport { name as messagingCompatName } from '../../../packages/messaging-compat/package.json';\nimport { name as performanceName } from '../../../packages/performance/package.json';\nimport { name as performanceCompatName } from '../../../packages/performance-compat/package.json';\nimport { name as remoteConfigName } from '../../../packages/remote-config/package.json';\nimport { name as remoteConfigCompatName } from '../../../packages/remote-config-compat/package.json';\nimport { name as storageName } from '../../../packages/storage/package.json';\nimport { name as storageCompatName } from '../../../packages/storage-compat/package.json';\nimport { name as firestoreName } from '../../../packages/firestore/package.json';\nimport { name as aiName } from '../../../packages/ai/package.json';\nimport { name as firestoreCompatName } from '../../../packages/firestore-compat/package.json';\nimport { name as packageName } from '../../../packages/firebase/package.json';\n\n/**\n * The default app name\n *\n * @internal\n */\nexport const DEFAULT_ENTRY_NAME = '[DEFAULT]';\n\nexport const PLATFORM_LOG_STRING = {\n  [appName]: 'fire-core',\n  [appCompatName]: 'fire-core-compat',\n  [analyticsName]: 'fire-analytics',\n  [analyticsCompatName]: 'fire-analytics-compat',\n  [appCheckName]: 'fire-app-check',\n  [appCheckCompatName]: 'fire-app-check-compat',\n  [authName]: 'fire-auth',\n  [authCompatName]: 'fire-auth-compat',\n  [databaseName]: 'fire-rtdb',\n  [dataconnectName]: 'fire-data-connect',\n  [databaseCompatName]: 'fire-rtdb-compat',\n  [functionsName]: 'fire-fn',\n  [functionsCompatName]: 'fire-fn-compat',\n  [installationsName]: 'fire-iid',\n  [installationsCompatName]: 'fire-iid-compat',\n  [messagingName]: 'fire-fcm',\n  [messagingCompatName]: 'fire-fcm-compat',\n  [performanceName]: 'fire-perf',\n  [performanceCompatName]: 'fire-perf-compat',\n  [remoteConfigName]: 'fire-rc',\n  [remoteConfigCompatName]: 'fire-rc-compat',\n  [storageName]: 'fire-gcs',\n  [storageCompatName]: 'fire-gcs-compat',\n  [firestoreName]: 'fire-fst',\n  [firestoreCompatName]: 'fire-fst-compat',\n  [aiName]: 'fire-vertex',\n  'fire-js': 'fire-js', // Platform identifier for JS SDK.\n  [packageName]: 'fire-js-all'\n} as const;\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  FirebaseApp,\n  FirebaseAppSettings,\n  FirebaseServerAppSettings,\n  FirebaseOptions,\n  FirebaseServerApp\n} from './public-types';\nimport { Component, Provider, Name } from '@firebase/component';\nimport { logger } from './logger';\nimport { DEFAULT_ENTRY_NAME } from './constants';\nimport { FirebaseAppImpl } from './firebaseApp';\nimport { FirebaseServerAppImpl } from './firebaseServerApp';\n\n/**\n * @internal\n */\nexport const _apps = new Map<string, FirebaseApp>();\n\n/**\n * @internal\n */\nexport const _serverApps = new Map<string, FirebaseServerApp>();\n\n/**\n * Registered components.\n *\n * @internal\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport const _components = new Map<string, Component<any>>();\n\n/**\n * @param component - the component being added to this app's container\n *\n * @internal\n */\nexport function _addComponent<T extends Name>(\n  app: FirebaseApp,\n  component: Component<T>\n): void {\n  try {\n    (app as FirebaseAppImpl).container.addComponent(component);\n  } catch (e) {\n    logger.debug(\n      `Component ${component.name} failed to register with FirebaseApp ${app.name}`,\n      e\n    );\n  }\n}\n\n/**\n *\n * @internal\n */\nexport function _addOrOverwriteComponent(\n  app: FirebaseApp,\n  component: Component\n): void {\n  (app as FirebaseAppImpl).container.addOrOverwriteComponent(component);\n}\n\n/**\n *\n * @param component - the component to register\n * @returns whether or not the component is registered successfully\n *\n * @internal\n */\nexport function _registerComponent<T extends Name>(\n  component: Component<T>\n): boolean {\n  const componentName = component.name;\n  if (_components.has(componentName)) {\n    logger.debug(\n      `There were multiple attempts to register component ${componentName}.`\n    );\n\n    return false;\n  }\n\n  _components.set(componentName, component);\n\n  // add the component to existing app instances\n  for (const app of _apps.values()) {\n    _addComponent(app as FirebaseAppImpl, component);\n  }\n\n  for (const serverApp of _serverApps.values()) {\n    _addComponent(serverApp as FirebaseServerAppImpl, component);\n  }\n\n  return true;\n}\n\n/**\n *\n * @param app - FirebaseApp instance\n * @param name - service name\n *\n * @returns the provider for the service with the matching name\n *\n * @internal\n */\nexport function _getProvider<T extends Name>(\n  app: FirebaseApp,\n  name: T\n): Provider<T> {\n  const heartbeatController = (app as FirebaseAppImpl).container\n    .getProvider('heartbeat')\n    .getImmediate({ optional: true });\n  if (heartbeatController) {\n    void heartbeatController.triggerHeartbeat();\n  }\n  return (app as FirebaseAppImpl).container.getProvider(name);\n}\n\n/**\n *\n * @param app - FirebaseApp instance\n * @param name - service name\n * @param instanceIdentifier - service instance identifier in case the service supports multiple instances\n *\n * @internal\n */\nexport function _removeServiceInstance<T extends Name>(\n  app: FirebaseApp,\n  name: T,\n  instanceIdentifier: string = DEFAULT_ENTRY_NAME\n): void {\n  _getProvider(app, name).clearInstance(instanceIdentifier);\n}\n\n/**\n *\n * @param obj - an object of type FirebaseApp, FirebaseOptions or FirebaseAppSettings.\n *\n * @returns true if the provide object is of type FirebaseApp.\n *\n * @internal\n */\nexport function _isFirebaseApp(\n  obj: FirebaseApp | FirebaseOptions | FirebaseAppSettings\n): obj is FirebaseApp {\n  return (obj as FirebaseApp).options !== undefined;\n}\n\n/**\n *\n * @param obj - an object of type FirebaseApp, FirebaseOptions or FirebaseAppSettings.\n *\n * @returns true if the provided object is of type FirebaseServerAppImpl.\n *\n * @internal\n */\nexport function _isFirebaseServerAppSettings(\n  obj: FirebaseApp | FirebaseOptions | FirebaseAppSettings\n): obj is FirebaseServerAppSettings {\n  if (_isFirebaseApp(obj)) {\n    return false;\n  }\n  return (\n    'authIdToken' in obj ||\n    'appCheckToken' in obj ||\n    'releaseOnDeref' in obj ||\n    'automaticDataCollectionEnabled' in obj\n  );\n}\n\n/**\n *\n * @param obj - an object of type FirebaseApp.\n *\n * @returns true if the provided object is of type FirebaseServerAppImpl.\n *\n * @internal\n */\nexport function _isFirebaseServerApp(\n  obj: FirebaseApp | FirebaseServerApp | null | undefined\n): obj is FirebaseServerApp {\n  if (obj === null || obj === undefined) {\n    return false;\n  }\n  return (obj as FirebaseServerApp).settings !== undefined;\n}\n\n/**\n * Test only\n *\n * @internal\n */\nexport function _clearComponents(): void {\n  _components.clear();\n}\n\n/**\n * Exported in order to be used in app-compat package\n */\nexport { DEFAULT_ENTRY_NAME as _DEFAULT_ENTRY_NAME };\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { ErrorFactory, ErrorMap } from '@firebase/util';\n\nexport const enum AppError {\n  NO_APP = 'no-app',\n  BAD_APP_NAME = 'bad-app-name',\n  DUPLICATE_APP = 'duplicate-app',\n  APP_DELETED = 'app-deleted',\n  SERVER_APP_DELETED = 'server-app-deleted',\n  NO_OPTIONS = 'no-options',\n  INVALID_APP_ARGUMENT = 'invalid-app-argument',\n  INVALID_LOG_ARGUMENT = 'invalid-log-argument',\n  IDB_OPEN = 'idb-open',\n  IDB_GET = 'idb-get',\n  IDB_WRITE = 'idb-set',\n  IDB_DELETE = 'idb-delete',\n  FINALIZATION_REGISTRY_NOT_SUPPORTED = 'finalization-registry-not-supported',\n  INVALID_SERVER_APP_ENVIRONMENT = 'invalid-server-app-environment'\n}\n\nconst ERRORS: ErrorMap<AppError> = {\n  [AppError.NO_APP]:\n    \"No Firebase App '{$appName}' has been created - \" +\n    'call initializeApp() first',\n  [AppError.BAD_APP_NAME]: \"Illegal App name: '{$appName}'\",\n  [AppError.DUPLICATE_APP]:\n    \"Firebase App named '{$appName}' already exists with different options or config\",\n  [AppError.APP_DELETED]: \"Firebase App named '{$appName}' already deleted\",\n  [AppError.SERVER_APP_DELETED]: 'Firebase Server App has been deleted',\n  [AppError.NO_OPTIONS]:\n    'Need to provide options, when not being deployed to hosting via source.',\n  [AppError.INVALID_APP_ARGUMENT]:\n    'firebase.{$appName}() takes either no argument or a ' +\n    'Firebase App instance.',\n  [AppError.INVALID_LOG_ARGUMENT]:\n    'First argument to `onLog` must be null or a function.',\n  [AppError.IDB_OPEN]:\n    'Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.',\n  [AppError.IDB_GET]:\n    'Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.',\n  [AppError.IDB_WRITE]:\n    'Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.',\n  [AppError.IDB_DELETE]:\n    'Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.',\n  [AppError.FINALIZATION_REGISTRY_NOT_SUPPORTED]:\n    'FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.',\n  [AppError.INVALID_SERVER_APP_ENVIRONMENT]:\n    'FirebaseServerApp is not for use in browser environments.'\n};\n\ninterface ErrorParams {\n  [AppError.NO_APP]: { appName: string };\n  [AppError.BAD_APP_NAME]: { appName: string };\n  [AppError.DUPLICATE_APP]: { appName: string };\n  [AppError.APP_DELETED]: { appName: string };\n  [AppError.INVALID_APP_ARGUMENT]: { appName: string };\n  [AppError.IDB_OPEN]: { originalErrorMessage?: string };\n  [AppError.IDB_GET]: { originalErrorMessage?: string };\n  [AppError.IDB_WRITE]: { originalErrorMessage?: string };\n  [AppError.IDB_DELETE]: { originalErrorMessage?: string };\n  [AppError.FINALIZATION_REGISTRY_NOT_SUPPORTED]: { appName?: string };\n}\n\nexport const ERROR_FACTORY = new ErrorFactory<AppError, ErrorParams>(\n  'app',\n  'Firebase',\n  ERRORS\n);\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  FirebaseApp,\n  FirebaseOptions,\n  FirebaseAppSettings\n} from './public-types';\nimport {\n  ComponentContainer,\n  Component,\n  ComponentType\n} from '@firebase/component';\nimport { ERROR_FACTORY, AppError } from './errors';\n\nexport class FirebaseAppImpl implements FirebaseApp {\n  protected readonly _options: FirebaseOptions;\n  protected readonly _name: string;\n  /**\n   * Original config values passed in as a constructor parameter.\n   * It is only used to compare with another config object to support idempotent initializeApp().\n   *\n   * Updating automaticDataCollectionEnabled on the App instance will not change its value in _config.\n   */\n  private readonly _config: Required<FirebaseAppSettings>;\n  private _automaticDataCollectionEnabled: boolean;\n  protected _isDeleted = false;\n  private readonly _container: ComponentContainer;\n\n  constructor(\n    options: FirebaseOptions,\n    config: Required<FirebaseAppSettings>,\n    container: ComponentContainer\n  ) {\n    this._options = { ...options };\n    this._config = { ...config };\n    this._name = config.name;\n    this._automaticDataCollectionEnabled =\n      config.automaticDataCollectionEnabled;\n    this._container = container;\n    this.container.addComponent(\n      new Component('app', () => this, ComponentType.PUBLIC)\n    );\n  }\n\n  get automaticDataCollectionEnabled(): boolean {\n    this.checkDestroyed();\n    return this._automaticDataCollectionEnabled;\n  }\n\n  set automaticDataCollectionEnabled(val: boolean) {\n    this.checkDestroyed();\n    this._automaticDataCollectionEnabled = val;\n  }\n\n  get name(): string {\n    this.checkDestroyed();\n    return this._name;\n  }\n\n  get options(): FirebaseOptions {\n    this.checkDestroyed();\n    return this._options;\n  }\n\n  get config(): Required<FirebaseAppSettings> {\n    this.checkDestroyed();\n    return this._config;\n  }\n\n  get container(): ComponentContainer {\n    return this._container;\n  }\n\n  get isDeleted(): boolean {\n    return this._isDeleted;\n  }\n\n  set isDeleted(val: boolean) {\n    this._isDeleted = val;\n  }\n\n  /**\n   * This function will throw an Error if the App has already been deleted -\n   * use before performing API actions on the App.\n   */\n  protected checkDestroyed(): void {\n    if (this.isDeleted) {\n      throw ERROR_FACTORY.create(AppError.APP_DELETED, { appName: this._name });\n    }\n  }\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  FirebaseApp,\n  FirebaseServerApp,\n  FirebaseOptions,\n  FirebaseAppSettings,\n  FirebaseServerAppSettings\n} from './public-types';\nimport { DEFAULT_ENTRY_NAME, PLATFORM_LOG_STRING } from './constants';\nimport { ERROR_FACTORY, AppError } from './errors';\nimport {\n  ComponentContainer,\n  Component,\n  Name,\n  ComponentType\n} from '@firebase/component';\nimport { version } from '../../firebase/package.json';\nimport { FirebaseAppImpl } from './firebaseApp';\nimport { FirebaseServerAppImpl } from './firebaseServerApp';\nimport {\n  _apps,\n  _components,\n  _isFirebaseApp,\n  _isFirebaseServerAppSettings,\n  _registerComponent,\n  _serverApps\n} from './internal';\nimport { logger } from './logger';\nimport {\n  LogLevelString,\n  setLogLevel as setLogLevelImpl,\n  LogCallback,\n  LogOptions,\n  setUserLogHandler\n} from '@firebase/logger';\nimport {\n  deepEqual,\n  getDefaultAppConfig,\n  isBrowser,\n  isWebWorker\n} from '@firebase/util';\n\nexport { FirebaseError } from '@firebase/util';\n\n/**\n * The current SDK version.\n *\n * @public\n */\nexport const SDK_VERSION = version;\n\n/**\n * Creates and initializes a {@link @firebase/app#FirebaseApp} instance.\n *\n * See\n * {@link\n *   https://firebase.google.com/docs/web/setup#add_firebase_to_your_app\n *   | Add Firebase to your app} and\n * {@link\n *   https://firebase.google.com/docs/web/setup#multiple-projects\n *   | Initialize multiple projects} for detailed documentation.\n *\n * @example\n * ```javascript\n *\n * // Initialize default app\n * // Retrieve your own options values by adding a web app on\n * // https://console.firebase.google.com\n * initializeApp({\n *   apiKey: \"AIza....\",                             // Auth / General Use\n *   authDomain: \"YOUR_APP.firebaseapp.com\",         // Auth with popup/redirect\n *   databaseURL: \"https://YOUR_APP.firebaseio.com\", // Realtime Database\n *   storageBucket: \"YOUR_APP.appspot.com\",          // Storage\n *   messagingSenderId: \"123456789\"                  // Cloud Messaging\n * });\n * ```\n *\n * @example\n * ```javascript\n *\n * // Initialize another app\n * const otherApp = initializeApp({\n *   databaseURL: \"https://<OTHER_DATABASE_NAME>.firebaseio.com\",\n *   storageBucket: \"<OTHER_STORAGE_BUCKET>.appspot.com\"\n * }, \"otherApp\");\n * ```\n *\n * @param options - Options to configure the app's services.\n * @param name - Optional name of the app to initialize. If no name\n *   is provided, the default is `\"[DEFAULT]\"`.\n *\n * @returns The initialized app.\n *\n * @throws If the optional `name` parameter is malformed or empty.\n *\n * @throws If a `FirebaseApp` already exists with the same name but with a different configuration.\n *\n * @public\n */\nexport function initializeApp(\n  options: FirebaseOptions,\n  name?: string\n): FirebaseApp;\n/**\n * Creates and initializes a FirebaseApp instance.\n *\n * @param options - Options to configure the app's services.\n * @param config - FirebaseApp Configuration\n *\n * @throws If {@link FirebaseAppSettings.name} is defined but the value is malformed or empty.\n *\n * @throws If a `FirebaseApp` already exists with the same name but with a different configuration.\n * @public\n */\nexport function initializeApp(\n  options: FirebaseOptions,\n  config?: FirebaseAppSettings\n): FirebaseApp;\n/**\n * Creates and initializes a FirebaseApp instance.\n *\n * @public\n */\nexport function initializeApp(): FirebaseApp;\nexport function initializeApp(\n  _options?: FirebaseOptions,\n  rawConfig = {}\n): FirebaseApp {\n  let options = _options;\n\n  if (typeof rawConfig !== 'object') {\n    const name = rawConfig;\n    rawConfig = { name };\n  }\n\n  const config: Required<FirebaseAppSettings> = {\n    name: DEFAULT_ENTRY_NAME,\n    automaticDataCollectionEnabled: true,\n    ...rawConfig\n  };\n  const name = config.name;\n\n  if (typeof name !== 'string' || !name) {\n    throw ERROR_FACTORY.create(AppError.BAD_APP_NAME, {\n      appName: String(name)\n    });\n  }\n\n  options ||= getDefaultAppConfig();\n\n  if (!options) {\n    throw ERROR_FACTORY.create(AppError.NO_OPTIONS);\n  }\n\n  const existingApp = _apps.get(name) as FirebaseAppImpl;\n  if (existingApp) {\n    // return the existing app if options and config deep equal the ones in the existing app.\n    if (\n      deepEqual(options, existingApp.options) &&\n      deepEqual(config, existingApp.config)\n    ) {\n      return existingApp;\n    } else {\n      throw ERROR_FACTORY.create(AppError.DUPLICATE_APP, { appName: name });\n    }\n  }\n\n  const container = new ComponentContainer(name);\n  for (const component of _components.values()) {\n    container.addComponent(component);\n  }\n\n  const newApp = new FirebaseAppImpl(options, config, container);\n\n  _apps.set(name, newApp);\n\n  return newApp;\n}\n\n/**\n * Creates and initializes a {@link @firebase/app#FirebaseServerApp} instance.\n *\n * The `FirebaseServerApp` is similar to `FirebaseApp`, but is intended for execution in\n * server side rendering environments only. Initialization will fail if invoked from a\n * browser environment.\n *\n * See\n * {@link\n *   https://firebase.google.com/docs/web/setup#add_firebase_to_your_app\n *   | Add Firebase to your app} and\n * {@link\n *   https://firebase.google.com/docs/web/setup#multiple-projects\n *   | Initialize multiple projects} for detailed documentation.\n *\n * @example\n * ```javascript\n *\n * // Initialize an instance of `FirebaseServerApp`.\n * // Retrieve your own options values by adding a web app on\n * // https://console.firebase.google.com\n * initializeServerApp({\n *     apiKey: \"AIza....\",                             // Auth / General Use\n *     authDomain: \"YOUR_APP.firebaseapp.com\",         // Auth with popup/redirect\n *     databaseURL: \"https://YOUR_APP.firebaseio.com\", // Realtime Database\n *     storageBucket: \"YOUR_APP.appspot.com\",          // Storage\n *     messagingSenderId: \"123456789\"                  // Cloud Messaging\n *   },\n *   {\n *    authIdToken: \"Your Auth ID Token\"\n *   });\n * ```\n *\n * @param options - `Firebase.AppOptions` to configure the app's services, or a\n *   a `FirebaseApp` instance which contains the `AppOptions` within.\n * @param config - Optional `FirebaseServerApp` settings.\n *\n * @returns The initialized `FirebaseServerApp`.\n *\n * @throws If invoked in an unsupported non-server environment such as a browser.\n *\n * @throws If {@link FirebaseServerAppSettings.releaseOnDeref} is defined but the runtime doesn't\n *   provide Finalization Registry support.\n *\n * @public\n */\nexport function initializeServerApp(\n  options: FirebaseOptions | FirebaseApp,\n  config?: FirebaseServerAppSettings\n): FirebaseServerApp;\n\n/**\n * Creates and initializes a {@link @firebase/app#FirebaseServerApp} instance.\n *\n * @param config - Optional `FirebaseServerApp` settings.\n *\n * @returns The initialized `FirebaseServerApp`.\n *\n * @throws If invoked in an unsupported non-server environment such as a browser.\n * @throws If {@link FirebaseServerAppSettings.releaseOnDeref} is defined but the runtime doesn't\n *   provide Finalization Registry support.\n * @throws If the `FIREBASE_OPTIONS` enviornment variable does not contain a valid project\n *   configuration required for auto-initialization.\n *\n * @public\n */\nexport function initializeServerApp(\n  config?: FirebaseServerAppSettings\n): FirebaseServerApp;\nexport function initializeServerApp(\n  _options?: FirebaseApp | FirebaseServerAppSettings | FirebaseOptions,\n  _serverAppConfig: FirebaseServerAppSettings = {}\n): FirebaseServerApp {\n  if (isBrowser() && !isWebWorker()) {\n    // FirebaseServerApp isn't designed to be run in browsers.\n    throw ERROR_FACTORY.create(AppError.INVALID_SERVER_APP_ENVIRONMENT);\n  }\n\n  let firebaseOptions: FirebaseOptions | undefined;\n  let serverAppSettings: FirebaseServerAppSettings = _serverAppConfig || {};\n\n  if (_options) {\n    if (_isFirebaseApp(_options)) {\n      firebaseOptions = _options.options;\n    } else if (_isFirebaseServerAppSettings(_options)) {\n      serverAppSettings = _options;\n    } else {\n      firebaseOptions = _options;\n    }\n  }\n\n  if (serverAppSettings.automaticDataCollectionEnabled === undefined) {\n    serverAppSettings.automaticDataCollectionEnabled = true;\n  }\n\n  firebaseOptions ||= getDefaultAppConfig();\n  if (!firebaseOptions) {\n    throw ERROR_FACTORY.create(AppError.NO_OPTIONS);\n  }\n\n  // Build an app name based on a hash of the configuration options.\n  const nameObj = {\n    ...serverAppSettings,\n    ...firebaseOptions\n  };\n\n  // However, Do not mangle the name based on releaseOnDeref, since it will vary between the\n  // construction of FirebaseServerApp instances. For example, if the object is the request headers.\n  if (nameObj.releaseOnDeref !== undefined) {\n    delete nameObj.releaseOnDeref;\n  }\n\n  const hashCode = (s: string): number => {\n    return [...s].reduce(\n      (hash, c) => (Math.imul(31, hash) + c.charCodeAt(0)) | 0,\n      0\n    );\n  };\n\n  if (serverAppSettings.releaseOnDeref !== undefined) {\n    if (typeof FinalizationRegistry === 'undefined') {\n      throw ERROR_FACTORY.create(\n        AppError.FINALIZATION_REGISTRY_NOT_SUPPORTED,\n        {}\n      );\n    }\n  }\n\n  const nameString = '' + hashCode(JSON.stringify(nameObj));\n  const existingApp = _serverApps.get(nameString) as FirebaseServerApp;\n  if (existingApp) {\n    (existingApp as FirebaseServerAppImpl).incRefCount(\n      serverAppSettings.releaseOnDeref\n    );\n    return existingApp;\n  }\n\n  const container = new ComponentContainer(nameString);\n  for (const component of _components.values()) {\n    container.addComponent(component);\n  }\n\n  const newApp = new FirebaseServerAppImpl(\n    firebaseOptions,\n    serverAppSettings,\n    nameString,\n    container\n  );\n\n  _serverApps.set(nameString, newApp);\n\n  return newApp;\n}\n\n/**\n * Retrieves a {@link @firebase/app#FirebaseApp} instance.\n *\n * When called with no arguments, the default app is returned. When an app name\n * is provided, the app corresponding to that name is returned.\n *\n * An exception is thrown if the app being retrieved has not yet been\n * initialized.\n *\n * @example\n * ```javascript\n * // Return the default app\n * const app = getApp();\n * ```\n *\n * @example\n * ```javascript\n * // Return a named app\n * const otherApp = getApp(\"otherApp\");\n * ```\n *\n * @param name - Optional name of the app to return. If no name is\n *   provided, the default is `\"[DEFAULT]\"`.\n *\n * @returns The app corresponding to the provided app name.\n *   If no app name is provided, the default app is returned.\n *\n * @public\n */\nexport function getApp(name: string = DEFAULT_ENTRY_NAME): FirebaseApp {\n  const app = _apps.get(name);\n  if (!app && name === DEFAULT_ENTRY_NAME && getDefaultAppConfig()) {\n    return initializeApp();\n  }\n  if (!app) {\n    throw ERROR_FACTORY.create(AppError.NO_APP, { appName: name });\n  }\n\n  return app;\n}\n\n/**\n * A (read-only) array of all initialized apps.\n * @public\n */\nexport function getApps(): FirebaseApp[] {\n  return Array.from(_apps.values());\n}\n\n/**\n * Renders this app unusable and frees the resources of all associated\n * services.\n *\n * @example\n * ```javascript\n * deleteApp(app)\n *   .then(function() {\n *     console.log(\"App deleted successfully\");\n *   })\n *   .catch(function(error) {\n *     console.log(\"Error deleting app:\", error);\n *   });\n * ```\n *\n * @public\n */\nexport async function deleteApp(app: FirebaseApp): Promise<void> {\n  let cleanupProviders = false;\n  const name = app.name;\n  if (_apps.has(name)) {\n    cleanupProviders = true;\n    _apps.delete(name);\n  } else if (_serverApps.has(name)) {\n    const firebaseServerApp = app as FirebaseServerAppImpl;\n    if (firebaseServerApp.decRefCount() <= 0) {\n      _serverApps.delete(name);\n      cleanupProviders = true;\n    }\n  }\n\n  if (cleanupProviders) {\n    await Promise.all(\n      (app as FirebaseAppImpl).container\n        .getProviders()\n        .map(provider => provider.delete())\n    );\n    (app as FirebaseAppImpl).isDeleted = true;\n  }\n}\n\n/**\n * Registers a library's name and version for platform logging purposes.\n * @param library - Name of 1p or 3p library (e.g. firestore, angularfire)\n * @param version - Current version of that library.\n * @param variant - Bundle variant, e.g., node, rn, etc.\n *\n * @public\n */\nexport function registerVersion(\n  libraryKeyOrName: string,\n  version: string,\n  variant?: string\n): void {\n  // TODO: We can use this check to whitelist strings when/if we set up\n  // a good whitelist system.\n  let library = PLATFORM_LOG_STRING[libraryKeyOrName] ?? libraryKeyOrName;\n  if (variant) {\n    library += `-${variant}`;\n  }\n  const libraryMismatch = library.match(/\\s|\\//);\n  const versionMismatch = version.match(/\\s|\\//);\n  if (libraryMismatch || versionMismatch) {\n    const warning = [\n      `Unable to register library \"${library}\" with version \"${version}\":`\n    ];\n    if (libraryMismatch) {\n      warning.push(\n        `library name \"${library}\" contains illegal characters (whitespace or \"/\")`\n      );\n    }\n    if (libraryMismatch && versionMismatch) {\n      warning.push('and');\n    }\n    if (versionMismatch) {\n      warning.push(\n        `version name \"${version}\" contains illegal characters (whitespace or \"/\")`\n      );\n    }\n    logger.warn(warning.join(' '));\n    return;\n  }\n  _registerComponent(\n    new Component(\n      `${library}-version` as Name,\n      () => ({ library, version }),\n      ComponentType.VERSION\n    )\n  );\n}\n\n/**\n * Sets log handler for all Firebase SDKs.\n * @param logCallback - An optional custom log handler that executes user code whenever\n * the Firebase SDK makes a logging call.\n *\n * @public\n */\nexport function onLog(\n  logCallback: LogCallback | null,\n  options?: LogOptions\n): void {\n  if (logCallback !== null && typeof logCallback !== 'function') {\n    throw ERROR_FACTORY.create(AppError.INVALID_LOG_ARGUMENT);\n  }\n  setUserLogHandler(logCallback, options);\n}\n\n/**\n * Sets log level for all Firebase SDKs.\n *\n * All of the log types above the current log level are captured (i.e. if\n * you set the log level to `info`, errors are logged, but `debug` and\n * `verbose` logs are not).\n *\n * @public\n */\nexport function setLogLevel(logLevel: LogLevelString): void {\n  setLogLevelImpl(logLevel);\n}\n","/**\n * @license\n * Copyright 2021 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { FirebaseError } from '@firebase/util';\nimport { DBSchema, openDB, IDBPDatabase } from 'idb';\nimport { AppError, ERROR_FACTORY } from './errors';\nimport { FirebaseApp } from './public-types';\nimport { HeartbeatsInIndexedDB } from './types';\nimport { logger } from './logger';\n\nconst DB_NAME = 'firebase-heartbeat-database';\nconst DB_VERSION = 1;\nconst STORE_NAME = 'firebase-heartbeat-store';\n\ninterface AppDB extends DBSchema {\n  'firebase-heartbeat-store': {\n    key: string;\n    value: HeartbeatsInIndexedDB;\n  };\n}\n\nlet dbPromise: Promise<IDBPDatabase<AppDB>> | null = null;\nfunction getDbPromise(): Promise<IDBPDatabase<AppDB>> {\n  if (!dbPromise) {\n    dbPromise = openDB<AppDB>(DB_NAME, DB_VERSION, {\n      upgrade: (db, oldVersion) => {\n        // We don't use 'break' in this switch statement, the fall-through\n        // behavior is what we want, because if there are multiple versions between\n        // the old version and the current version, we want ALL the migrations\n        // that correspond to those versions to run, not only the last one.\n        // eslint-disable-next-line default-case\n        switch (oldVersion) {\n          case 0:\n            try {\n              db.createObjectStore(STORE_NAME);\n            } catch (e) {\n              // Safari/iOS browsers throw occasional exceptions on\n              // db.createObjectStore() that may be a bug. Avoid blocking\n              // the rest of the app functionality.\n              console.warn(e);\n            }\n        }\n      }\n    }).catch(e => {\n      throw ERROR_FACTORY.create(AppError.IDB_OPEN, {\n        originalErrorMessage: e.message\n      });\n    });\n  }\n  return dbPromise;\n}\n\nexport async function readHeartbeatsFromIndexedDB(\n  app: FirebaseApp\n): Promise<HeartbeatsInIndexedDB | undefined> {\n  try {\n    const db = await getDbPromise();\n    const tx = db.transaction(STORE_NAME);\n    const result = await tx.objectStore(STORE_NAME).get(computeKey(app));\n    // We already have the value but tx.done can throw,\n    // so we need to await it here to catch errors\n    await tx.done;\n    return result;\n  } catch (e) {\n    if (e instanceof FirebaseError) {\n      logger.warn(e.message);\n    } else {\n      const idbGetError = ERROR_FACTORY.create(AppError.IDB_GET, {\n        originalErrorMessage: (e as Error)?.message\n      });\n      logger.warn(idbGetError.message);\n    }\n  }\n}\n\nexport async function writeHeartbeatsToIndexedDB(\n  app: FirebaseApp,\n  heartbeatObject: HeartbeatsInIndexedDB\n): Promise<void> {\n  try {\n    const db = await getDbPromise();\n    const tx = db.transaction(STORE_NAME, 'readwrite');\n    const objectStore = tx.objectStore(STORE_NAME);\n    await objectStore.put(heartbeatObject, computeKey(app));\n    await tx.done;\n  } catch (e) {\n    if (e instanceof FirebaseError) {\n      logger.warn(e.message);\n    } else {\n      const idbGetError = ERROR_FACTORY.create(AppError.IDB_WRITE, {\n        originalErrorMessage: (e as Error)?.message\n      });\n      logger.warn(idbGetError.message);\n    }\n  }\n}\n\nfunction computeKey(app: FirebaseApp): string {\n  return `${app.name}!${app.options.appId}`;\n}\n","/**\n * @license\n * Copyright 2021 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { ComponentContainer } from '@firebase/component';\nimport {\n  base64urlEncodeWithoutPadding,\n  isIndexedDBAvailable,\n  validateIndexedDBOpenable\n} from '@firebase/util';\nimport {\n  readHeartbeatsFromIndexedDB,\n  writeHeartbeatsToIndexedDB\n} from './indexeddb';\nimport { FirebaseApp } from './public-types';\nimport {\n  HeartbeatsByUserAgent,\n  HeartbeatService,\n  HeartbeatsInIndexedDB,\n  HeartbeatStorage,\n  SingleDateHeartbeat\n} from './types';\nimport { logger } from './logger';\n\nconst MAX_HEADER_BYTES = 1024;\nexport const MAX_NUM_STORED_HEARTBEATS = 30;\n\nexport class HeartbeatServiceImpl implements HeartbeatService {\n  /**\n   * The persistence layer for heartbeats\n   * Leave public for easier testing.\n   */\n  _storage: HeartbeatStorageImpl;\n\n  /**\n   * In-memory cache for heartbeats, used by getHeartbeatsHeader() to generate\n   * the header string.\n   * Stores one record per date. This will be consolidated into the standard\n   * format of one record per user agent string before being sent as a header.\n   * Populated from indexedDB when the controller is instantiated and should\n   * be kept in sync with indexedDB.\n   * Leave public for easier testing.\n   */\n  _heartbeatsCache: HeartbeatsInIndexedDB | null = null;\n\n  /**\n   * the initialization promise for populating heartbeatCache.\n   * If getHeartbeatsHeader() is called before the promise resolves\n   * (heartbeatsCache == null), it should wait for this promise\n   * Leave public for easier testing.\n   */\n  _heartbeatsCachePromise: Promise<HeartbeatsInIndexedDB>;\n  constructor(private readonly container: ComponentContainer) {\n    const app = this.container.getProvider('app').getImmediate();\n    this._storage = new HeartbeatStorageImpl(app);\n    this._heartbeatsCachePromise = this._storage.read().then(result => {\n      this._heartbeatsCache = result;\n      return result;\n    });\n  }\n\n  /**\n   * Called to report a heartbeat. The function will generate\n   * a HeartbeatsByUserAgent object, update heartbeatsCache, and persist it\n   * to IndexedDB.\n   * Note that we only store one heartbeat per day. So if a heartbeat for today is\n   * already logged, subsequent calls to this function in the same day will be ignored.\n   */\n  async triggerHeartbeat(): Promise<void> {\n    try {\n      const platformLogger = this.container\n        .getProvider('platform-logger')\n        .getImmediate();\n\n      // This is the \"Firebase user agent\" string from the platform logger\n      // service, not the browser user agent.\n      const agent = platformLogger.getPlatformInfoString();\n      const date = getUTCDateString();\n      if (this._heartbeatsCache?.heartbeats == null) {\n        this._heartbeatsCache = await this._heartbeatsCachePromise;\n        // If we failed to construct a heartbeats cache, then return immediately.\n        if (this._heartbeatsCache?.heartbeats == null) {\n          return;\n        }\n      }\n      // Do not store a heartbeat if one is already stored for this day\n      // or if a header has already been sent today.\n      if (\n        this._heartbeatsCache.lastSentHeartbeatDate === date ||\n        this._heartbeatsCache.heartbeats.some(\n          singleDateHeartbeat => singleDateHeartbeat.date === date\n        )\n      ) {\n        return;\n      } else {\n        // There is no entry for this date. Create one.\n        this._heartbeatsCache.heartbeats.push({ date, agent });\n\n        // If the number of stored heartbeats exceeds the maximum number of stored heartbeats, remove the heartbeat with the earliest date.\n        // Since this is executed each time a heartbeat is pushed, the limit can only be exceeded by one, so only one needs to be removed.\n        if (\n          this._heartbeatsCache.heartbeats.length > MAX_NUM_STORED_HEARTBEATS\n        ) {\n          const earliestHeartbeatIdx = getEarliestHeartbeatIdx(\n            this._heartbeatsCache.heartbeats\n          );\n          this._heartbeatsCache.heartbeats.splice(earliestHeartbeatIdx, 1);\n        }\n      }\n\n      return this._storage.overwrite(this._heartbeatsCache);\n    } catch (e) {\n      logger.warn(e);\n    }\n  }\n\n  /**\n   * Returns a base64 encoded string which can be attached to the heartbeat-specific header directly.\n   * It also clears all heartbeats from memory as well as in IndexedDB.\n   *\n   * NOTE: Consuming product SDKs should not send the header if this method\n   * returns an empty string.\n   */\n  async getHeartbeatsHeader(): Promise<string> {\n    try {\n      if (this._heartbeatsCache === null) {\n        await this._heartbeatsCachePromise;\n      }\n      // If it's still null or the array is empty, there is no data to send.\n      if (\n        this._heartbeatsCache?.heartbeats == null ||\n        this._heartbeatsCache.heartbeats.length === 0\n      ) {\n        return '';\n      }\n      const date = getUTCDateString();\n      // Extract as many heartbeats from the cache as will fit under the size limit.\n      const { heartbeatsToSend, unsentEntries } = extractHeartbeatsForHeader(\n        this._heartbeatsCache.heartbeats\n      );\n      const headerString = base64urlEncodeWithoutPadding(\n        JSON.stringify({ version: 2, heartbeats: heartbeatsToSend })\n      );\n      // Store last sent date to prevent another being logged/sent for the same day.\n      this._heartbeatsCache.lastSentHeartbeatDate = date;\n      if (unsentEntries.length > 0) {\n        // Store any unsent entries if they exist.\n        this._heartbeatsCache.heartbeats = unsentEntries;\n        // This seems more likely than emptying the array (below) to lead to some odd state\n        // since the cache isn't empty and this will be called again on the next request,\n        // and is probably safest if we await it.\n        await this._storage.overwrite(this._heartbeatsCache);\n      } else {\n        this._heartbeatsCache.heartbeats = [];\n        // Do not wait for this, to reduce latency.\n        void this._storage.overwrite(this._heartbeatsCache);\n      }\n      return headerString;\n    } catch (e) {\n      logger.warn(e);\n      return '';\n    }\n  }\n}\n\nfunction getUTCDateString(): string {\n  const today = new Date();\n  // Returns date format 'YYYY-MM-DD'\n  return today.toISOString().substring(0, 10);\n}\n\nexport function extractHeartbeatsForHeader(\n  heartbeatsCache: SingleDateHeartbeat[],\n  maxSize = MAX_HEADER_BYTES\n): {\n  heartbeatsToSend: HeartbeatsByUserAgent[];\n  unsentEntries: SingleDateHeartbeat[];\n} {\n  // Heartbeats grouped by user agent in the standard format to be sent in\n  // the header.\n  const heartbeatsToSend: HeartbeatsByUserAgent[] = [];\n  // Single date format heartbeats that are not sent.\n  let unsentEntries = heartbeatsCache.slice();\n  for (const singleDateHeartbeat of heartbeatsCache) {\n    // Look for an existing entry with the same user agent.\n    const heartbeatEntry = heartbeatsToSend.find(\n      hb => hb.agent === singleDateHeartbeat.agent\n    );\n    if (!heartbeatEntry) {\n      // If no entry for this user agent exists, create one.\n      heartbeatsToSend.push({\n        agent: singleDateHeartbeat.agent,\n        dates: [singleDateHeartbeat.date]\n      });\n      if (countBytes(heartbeatsToSend) > maxSize) {\n        // If the header would exceed max size, remove the added heartbeat\n        // entry and stop adding to the header.\n        heartbeatsToSend.pop();\n        break;\n      }\n    } else {\n      heartbeatEntry.dates.push(singleDateHeartbeat.date);\n      // If the header would exceed max size, remove the added date\n      // and stop adding to the header.\n      if (countBytes(heartbeatsToSend) > maxSize) {\n        heartbeatEntry.dates.pop();\n        break;\n      }\n    }\n    // Pop unsent entry from queue. (Skipped if adding the entry exceeded\n    // quota and the loop breaks early.)\n    unsentEntries = unsentEntries.slice(1);\n  }\n  return {\n    heartbeatsToSend,\n    unsentEntries\n  };\n}\n\nexport class HeartbeatStorageImpl implements HeartbeatStorage {\n  private _canUseIndexedDBPromise: Promise<boolean>;\n  constructor(public app: FirebaseApp) {\n    this._canUseIndexedDBPromise = this.runIndexedDBEnvironmentCheck();\n  }\n  async runIndexedDBEnvironmentCheck(): Promise<boolean> {\n    if (!isIndexedDBAvailable()) {\n      return false;\n    } else {\n      return validateIndexedDBOpenable()\n        .then(() => true)\n        .catch(() => false);\n    }\n  }\n  /**\n   * Read all heartbeats.\n   */\n  async read(): Promise<HeartbeatsInIndexedDB> {\n    const canUseIndexedDB = await this._canUseIndexedDBPromise;\n    if (!canUseIndexedDB) {\n      return { heartbeats: [] };\n    } else {\n      const idbHeartbeatObject = await readHeartbeatsFromIndexedDB(this.app);\n      if (idbHeartbeatObject?.heartbeats) {\n        return idbHeartbeatObject;\n      } else {\n        return { heartbeats: [] };\n      }\n    }\n  }\n  // overwrite the storage with the provided heartbeats\n  async overwrite(heartbeatsObject: HeartbeatsInIndexedDB): Promise<void> {\n    const canUseIndexedDB = await this._canUseIndexedDBPromise;\n    if (!canUseIndexedDB) {\n      return;\n    } else {\n      const existingHeartbeatsObject = await this.read();\n      return writeHeartbeatsToIndexedDB(this.app, {\n        lastSentHeartbeatDate:\n          heartbeatsObject.lastSentHeartbeatDate ??\n          existingHeartbeatsObject.lastSentHeartbeatDate,\n        heartbeats: heartbeatsObject.heartbeats\n      });\n    }\n  }\n  // add heartbeats\n  async add(heartbeatsObject: HeartbeatsInIndexedDB): Promise<void> {\n    const canUseIndexedDB = await this._canUseIndexedDBPromise;\n    if (!canUseIndexedDB) {\n      return;\n    } else {\n      const existingHeartbeatsObject = await this.read();\n      return writeHeartbeatsToIndexedDB(this.app, {\n        lastSentHeartbeatDate:\n          heartbeatsObject.lastSentHeartbeatDate ??\n          existingHeartbeatsObject.lastSentHeartbeatDate,\n        heartbeats: [\n          ...existingHeartbeatsObject.heartbeats,\n          ...heartbeatsObject.heartbeats\n        ]\n      });\n    }\n  }\n}\n\n/**\n * Calculate bytes of a HeartbeatsByUserAgent array after being wrapped\n * in a platform logging header JSON object, stringified, and converted\n * to base 64.\n */\nexport function countBytes(heartbeatsCache: HeartbeatsByUserAgent[]): number {\n  // base64 has a restricted set of characters, all of which should be 1 byte.\n  return base64urlEncodeWithoutPadding(\n    // heartbeatsCache wrapper properties\n    JSON.stringify({ version: 2, heartbeats: heartbeatsCache })\n  ).length;\n}\n\n/**\n * Returns the index of the heartbeat with the earliest date.\n * If the heartbeats array is empty, -1 is returned.\n */\nexport function getEarliestHeartbeatIdx(\n  heartbeats: SingleDateHeartbeat[]\n): number {\n  if (heartbeats.length === 0) {\n    return -1;\n  }\n\n  let earliestHeartbeatIdx = 0;\n  let earliestHeartbeatDate = heartbeats[0].date;\n\n  for (let i = 1; i < heartbeats.length; i++) {\n    if (heartbeats[i].date < earliestHeartbeatDate) {\n      earliestHeartbeatDate = heartbeats[i].date;\n      earliestHeartbeatIdx = i;\n    }\n  }\n\n  return earliestHeartbeatIdx;\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Component, ComponentType } from '@firebase/component';\nimport { PlatformLoggerServiceImpl } from './platformLoggerService';\nimport { name, version } from '../package.json';\nimport { _registerComponent } from './internal';\nimport { registerVersion } from './api';\nimport { HeartbeatServiceImpl } from './heartbeatService';\n\nexport function registerCoreComponents(variant?: string): void {\n  _registerComponent(\n    new Component(\n      'platform-logger',\n      container => new PlatformLoggerServiceImpl(container),\n      ComponentType.PRIVATE\n    )\n  );\n  _registerComponent(\n    new Component(\n      'heartbeat',\n      container => new HeartbeatServiceImpl(container),\n      ComponentType.PRIVATE\n    )\n  );\n\n  // Register `app` package.\n  registerVersion(name, version, variant);\n  // BUILD_TARGET will be replaced by values like esm, cjs, etc during the compilation\n  registerVersion(name, version, '__BUILD_TARGET__');\n  // Register platform SDK identifier (no version).\n  registerVersion('fire-js', '');\n}\n","/**\n * Firebase App\n *\n * @remarks This package coordinates the communication between the different Firebase components\n * @packageDocumentation\n */\n\n/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { registerCoreComponents } from './registerCoreComponents';\n\nexport * from './api';\nexport * from './internal';\nexport * from './public-types';\n\nregisterCoreComponents('__RUNTIME_ENV__');\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { AuthErrorMap, User } from '../model/public_types';\nimport { ErrorFactory, ErrorMap } from '@firebase/util';\n\nimport { IdTokenMfaResponse } from '../api/authentication/mfa';\nimport { AppName } from '../model/auth';\nimport { AuthCredential } from './credentials';\n\n/**\n * Enumeration of Firebase Auth error codes.\n *\n * @internal\n */\nexport const enum AuthErrorCode {\n  ADMIN_ONLY_OPERATION = 'admin-restricted-operation',\n  ARGUMENT_ERROR = 'argument-error',\n  APP_NOT_AUTHORIZED = 'app-not-authorized',\n  APP_NOT_INSTALLED = 'app-not-installed',\n  CAPTCHA_CHECK_FAILED = 'captcha-check-failed',\n  CODE_EXPIRED = 'code-expired',\n  CORDOVA_NOT_READY = 'cordova-not-ready',\n  CORS_UNSUPPORTED = 'cors-unsupported',\n  CREDENTIAL_ALREADY_IN_USE = 'credential-already-in-use',\n  CREDENTIAL_MISMATCH = 'custom-token-mismatch',\n  CREDENTIAL_TOO_OLD_LOGIN_AGAIN = 'requires-recent-login',\n  DEPENDENT_SDK_INIT_BEFORE_AUTH = 'dependent-sdk-initialized-before-auth',\n  DYNAMIC_LINK_NOT_ACTIVATED = 'dynamic-link-not-activated',\n  EMAIL_CHANGE_NEEDS_VERIFICATION = 'email-change-needs-verification',\n  EMAIL_EXISTS = 'email-already-in-use',\n  EMULATOR_CONFIG_FAILED = 'emulator-config-failed',\n  EXPIRED_OOB_CODE = 'expired-action-code',\n  EXPIRED_POPUP_REQUEST = 'cancelled-popup-request',\n  INTERNAL_ERROR = 'internal-error',\n  INVALID_API_KEY = 'invalid-api-key',\n  INVALID_APP_CREDENTIAL = 'invalid-app-credential',\n  INVALID_APP_ID = 'invalid-app-id',\n  INVALID_AUTH = 'invalid-user-token',\n  INVALID_AUTH_EVENT = 'invalid-auth-event',\n  INVALID_CERT_HASH = 'invalid-cert-hash',\n  INVALID_CODE = 'invalid-verification-code',\n  INVALID_CONTINUE_URI = 'invalid-continue-uri',\n  INVALID_CORDOVA_CONFIGURATION = 'invalid-cordova-configuration',\n  INVALID_CUSTOM_TOKEN = 'invalid-custom-token',\n  INVALID_DYNAMIC_LINK_DOMAIN = 'invalid-dynamic-link-domain',\n  INVALID_EMAIL = 'invalid-email',\n  INVALID_EMULATOR_SCHEME = 'invalid-emulator-scheme',\n  INVALID_CREDENTIAL = 'invalid-credential',\n  INVALID_MESSAGE_PAYLOAD = 'invalid-message-payload',\n  INVALID_MFA_SESSION = 'invalid-multi-factor-session',\n  INVALID_OAUTH_CLIENT_ID = 'invalid-oauth-client-id',\n  INVALID_OAUTH_PROVIDER = 'invalid-oauth-provider',\n  INVALID_OOB_CODE = 'invalid-action-code',\n  INVALID_ORIGIN = 'unauthorized-domain',\n  INVALID_PASSWORD = 'wrong-password',\n  INVALID_PERSISTENCE = 'invalid-persistence-type',\n  INVALID_PHONE_NUMBER = 'invalid-phone-number',\n  INVALID_PROVIDER_ID = 'invalid-provider-id',\n  INVALID_RECIPIENT_EMAIL = 'invalid-recipient-email',\n  INVALID_SENDER = 'invalid-sender',\n  INVALID_SESSION_INFO = 'invalid-verification-id',\n  INVALID_TENANT_ID = 'invalid-tenant-id',\n  LOGIN_BLOCKED = 'login-blocked',\n  MFA_INFO_NOT_FOUND = 'multi-factor-info-not-found',\n  MFA_REQUIRED = 'multi-factor-auth-required',\n  MISSING_ANDROID_PACKAGE_NAME = 'missing-android-pkg-name',\n  MISSING_APP_CREDENTIAL = 'missing-app-credential',\n  MISSING_AUTH_DOMAIN = 'auth-domain-config-required',\n  MISSING_CODE = 'missing-verification-code',\n  MISSING_CONTINUE_URI = 'missing-continue-uri',\n  MISSING_IFRAME_START = 'missing-iframe-start',\n  MISSING_IOS_BUNDLE_ID = 'missing-ios-bundle-id',\n  MISSING_OR_INVALID_NONCE = 'missing-or-invalid-nonce',\n  MISSING_MFA_INFO = 'missing-multi-factor-info',\n  MISSING_MFA_SESSION = 'missing-multi-factor-session',\n  MISSING_PHONE_NUMBER = 'missing-phone-number',\n  MISSING_PASSWORD = 'missing-password',\n  MISSING_SESSION_INFO = 'missing-verification-id',\n  MODULE_DESTROYED = 'app-deleted',\n  NEED_CONFIRMATION = 'account-exists-with-different-credential',\n  NETWORK_REQUEST_FAILED = 'network-request-failed',\n  NULL_USER = 'null-user',\n  NO_AUTH_EVENT = 'no-auth-event',\n  NO_SUCH_PROVIDER = 'no-such-provider',\n  OPERATION_NOT_ALLOWED = 'operation-not-allowed',\n  OPERATION_NOT_SUPPORTED = 'operation-not-supported-in-this-environment',\n  POPUP_BLOCKED = 'popup-blocked',\n  POPUP_CLOSED_BY_USER = 'popup-closed-by-user',\n  PROVIDER_ALREADY_LINKED = 'provider-already-linked',\n  QUOTA_EXCEEDED = 'quota-exceeded',\n  REDIRECT_CANCELLED_BY_USER = 'redirect-cancelled-by-user',\n  REDIRECT_OPERATION_PENDING = 'redirect-operation-pending',\n  REJECTED_CREDENTIAL = 'rejected-credential',\n  SECOND_FACTOR_ALREADY_ENROLLED = 'second-factor-already-in-use',\n  SECOND_FACTOR_LIMIT_EXCEEDED = 'maximum-second-factor-count-exceeded',\n  TENANT_ID_MISMATCH = 'tenant-id-mismatch',\n  TIMEOUT = 'timeout',\n  TOKEN_EXPIRED = 'user-token-expired',\n  TOO_MANY_ATTEMPTS_TRY_LATER = 'too-many-requests',\n  UNAUTHORIZED_DOMAIN = 'unauthorized-continue-uri',\n  UNSUPPORTED_FIRST_FACTOR = 'unsupported-first-factor',\n  UNSUPPORTED_PERSISTENCE = 'unsupported-persistence-type',\n  UNSUPPORTED_TENANT_OPERATION = 'unsupported-tenant-operation',\n  UNVERIFIED_EMAIL = 'unverified-email',\n  USER_CANCELLED = 'user-cancelled',\n  USER_DELETED = 'user-not-found',\n  USER_DISABLED = 'user-disabled',\n  USER_MISMATCH = 'user-mismatch',\n  USER_SIGNED_OUT = 'user-signed-out',\n  WEAK_PASSWORD = 'weak-password',\n  WEB_STORAGE_UNSUPPORTED = 'web-storage-unsupported',\n  ALREADY_INITIALIZED = 'already-initialized',\n  RECAPTCHA_NOT_ENABLED = 'recaptcha-not-enabled',\n  MISSING_RECAPTCHA_TOKEN = 'missing-recaptcha-token',\n  INVALID_RECAPTCHA_TOKEN = 'invalid-recaptcha-token',\n  INVALID_RECAPTCHA_ACTION = 'invalid-recaptcha-action',\n  MISSING_CLIENT_TYPE = 'missing-client-type',\n  MISSING_RECAPTCHA_VERSION = 'missing-recaptcha-version',\n  INVALID_RECAPTCHA_VERSION = 'invalid-recaptcha-version',\n  INVALID_REQ_TYPE = 'invalid-req-type',\n  UNSUPPORTED_PASSWORD_POLICY_SCHEMA_VERSION = 'unsupported-password-policy-schema-version',\n  PASSWORD_DOES_NOT_MEET_REQUIREMENTS = 'password-does-not-meet-requirements',\n  INVALID_HOSTING_LINK_DOMAIN = 'invalid-hosting-link-domain'\n}\n\nfunction _debugErrorMap(): ErrorMap<AuthErrorCode> {\n  return {\n    [AuthErrorCode.ADMIN_ONLY_OPERATION]:\n      'This operation is restricted to administrators only.',\n    [AuthErrorCode.ARGUMENT_ERROR]: '',\n    [AuthErrorCode.APP_NOT_AUTHORIZED]:\n      \"This app, identified by the domain where it's hosted, is not \" +\n      'authorized to use Firebase Authentication with the provided API key. ' +\n      'Review your key configuration in the Google API console.',\n    [AuthErrorCode.APP_NOT_INSTALLED]:\n      'The requested mobile application corresponding to the identifier (' +\n      'Android package name or iOS bundle ID) provided is not installed on ' +\n      'this device.',\n    [AuthErrorCode.CAPTCHA_CHECK_FAILED]:\n      'The reCAPTCHA response token provided is either invalid, expired, ' +\n      'already used or the domain associated with it does not match the list ' +\n      'of whitelisted domains.',\n    [AuthErrorCode.CODE_EXPIRED]:\n      'The SMS code has expired. Please re-send the verification code to try ' +\n      'again.',\n    [AuthErrorCode.CORDOVA_NOT_READY]: 'Cordova framework is not ready.',\n    [AuthErrorCode.CORS_UNSUPPORTED]: 'This browser is not supported.',\n    [AuthErrorCode.CREDENTIAL_ALREADY_IN_USE]:\n      'This credential is already associated with a different user account.',\n    [AuthErrorCode.CREDENTIAL_MISMATCH]:\n      'The custom token corresponds to a different audience.',\n    [AuthErrorCode.CREDENTIAL_TOO_OLD_LOGIN_AGAIN]:\n      'This operation is sensitive and requires recent authentication. Log in ' +\n      'again before retrying this request.',\n    [AuthErrorCode.DEPENDENT_SDK_INIT_BEFORE_AUTH]:\n      'Another Firebase SDK was initialized and is trying to use Auth before Auth is ' +\n      'initialized. Please be sure to call `initializeAuth` or `getAuth` before ' +\n      'starting any other Firebase SDK.',\n    [AuthErrorCode.DYNAMIC_LINK_NOT_ACTIVATED]:\n      'Please activate Dynamic Links in the Firebase Console and agree to the terms and ' +\n      'conditions.',\n    [AuthErrorCode.EMAIL_CHANGE_NEEDS_VERIFICATION]:\n      'Multi-factor users must always have a verified email.',\n    [AuthErrorCode.EMAIL_EXISTS]:\n      'The email address is already in use by another account.',\n    [AuthErrorCode.EMULATOR_CONFIG_FAILED]:\n      'Auth instance has already been used to make a network call. Auth can ' +\n      'no longer be configured to use the emulator. Try calling ' +\n      '\"connectAuthEmulator()\" sooner.',\n    [AuthErrorCode.EXPIRED_OOB_CODE]: 'The action code has expired.',\n    [AuthErrorCode.EXPIRED_POPUP_REQUEST]:\n      'This operation has been cancelled due to another conflicting popup being opened.',\n    [AuthErrorCode.INTERNAL_ERROR]: 'An internal AuthError has occurred.',\n    [AuthErrorCode.INVALID_APP_CREDENTIAL]:\n      'The phone verification request contains an invalid application verifier.' +\n      ' The reCAPTCHA token response is either invalid or expired.',\n    [AuthErrorCode.INVALID_APP_ID]:\n      'The mobile app identifier is not registered for the current project.',\n    [AuthErrorCode.INVALID_AUTH]:\n      \"This user's credential isn't valid for this project. This can happen \" +\n      \"if the user's token has been tampered with, or if the user isn't for \" +\n      'the project associated with this API key.',\n    [AuthErrorCode.INVALID_AUTH_EVENT]: 'An internal AuthError has occurred.',\n    [AuthErrorCode.INVALID_CODE]:\n      'The SMS verification code used to create the phone auth credential is ' +\n      'invalid. Please resend the verification code sms and be sure to use the ' +\n      'verification code provided by the user.',\n    [AuthErrorCode.INVALID_CONTINUE_URI]:\n      'The continue URL provided in the request is invalid.',\n    [AuthErrorCode.INVALID_CORDOVA_CONFIGURATION]:\n      'The following Cordova plugins must be installed to enable OAuth sign-in: ' +\n      'cordova-plugin-buildinfo, cordova-universal-links-plugin, ' +\n      'cordova-plugin-browsertab, cordova-plugin-inappbrowser and ' +\n      'cordova-plugin-customurlscheme.',\n    [AuthErrorCode.INVALID_CUSTOM_TOKEN]:\n      'The custom token format is incorrect. Please check the documentation.',\n    [AuthErrorCode.INVALID_DYNAMIC_LINK_DOMAIN]:\n      'The provided dynamic link domain is not configured or authorized for the current project.',\n    [AuthErrorCode.INVALID_EMAIL]: 'The email address is badly formatted.',\n    [AuthErrorCode.INVALID_EMULATOR_SCHEME]:\n      'Emulator URL must start with a valid scheme (http:// or https://).',\n    [AuthErrorCode.INVALID_API_KEY]:\n      'Your API key is invalid, please check you have copied it correctly.',\n    [AuthErrorCode.INVALID_CERT_HASH]:\n      'The SHA-1 certificate hash provided is invalid.',\n    [AuthErrorCode.INVALID_CREDENTIAL]:\n      'The supplied auth credential is incorrect, malformed or has expired.',\n    [AuthErrorCode.INVALID_MESSAGE_PAYLOAD]:\n      'The email template corresponding to this action contains invalid characters in its message. ' +\n      'Please fix by going to the Auth email templates section in the Firebase Console.',\n    [AuthErrorCode.INVALID_MFA_SESSION]:\n      'The request does not contain a valid proof of first factor successful sign-in.',\n    [AuthErrorCode.INVALID_OAUTH_PROVIDER]:\n      'EmailAuthProvider is not supported for this operation. This operation ' +\n      'only supports OAuth providers.',\n    [AuthErrorCode.INVALID_OAUTH_CLIENT_ID]:\n      'The OAuth client ID provided is either invalid or does not match the ' +\n      'specified API key.',\n    [AuthErrorCode.INVALID_ORIGIN]:\n      'This domain is not authorized for OAuth operations for your Firebase ' +\n      'project. Edit the list of authorized domains from the Firebase console.',\n    [AuthErrorCode.INVALID_OOB_CODE]:\n      'The action code is invalid. This can happen if the code is malformed, ' +\n      'expired, or has already been used.',\n    [AuthErrorCode.INVALID_PASSWORD]:\n      'The password is invalid or the user does not have a password.',\n    [AuthErrorCode.INVALID_PERSISTENCE]:\n      'The specified persistence type is invalid. It can only be local, session or none.',\n    [AuthErrorCode.INVALID_PHONE_NUMBER]:\n      'The format of the phone number provided is incorrect. Please enter the ' +\n      'phone number in a format that can be parsed into E.164 format. E.164 ' +\n      'phone numbers are written in the format [+][country code][subscriber ' +\n      'number including area code].',\n    [AuthErrorCode.INVALID_PROVIDER_ID]:\n      'The specified provider ID is invalid.',\n    [AuthErrorCode.INVALID_RECIPIENT_EMAIL]:\n      'The email corresponding to this action failed to send as the provided ' +\n      'recipient email address is invalid.',\n    [AuthErrorCode.INVALID_SENDER]:\n      'The email template corresponding to this action contains an invalid sender email or name. ' +\n      'Please fix by going to the Auth email templates section in the Firebase Console.',\n    [AuthErrorCode.INVALID_SESSION_INFO]:\n      'The verification ID used to create the phone auth credential is invalid.',\n    [AuthErrorCode.INVALID_TENANT_ID]:\n      \"The Auth instance's tenant ID is invalid.\",\n    [AuthErrorCode.LOGIN_BLOCKED]:\n      'Login blocked by user-provided method: {$originalMessage}',\n    [AuthErrorCode.MISSING_ANDROID_PACKAGE_NAME]:\n      'An Android Package Name must be provided if the Android App is required to be installed.',\n    [AuthErrorCode.MISSING_AUTH_DOMAIN]:\n      'Be sure to include authDomain when calling firebase.initializeApp(), ' +\n      'by following the instructions in the Firebase console.',\n    [AuthErrorCode.MISSING_APP_CREDENTIAL]:\n      'The phone verification request is missing an application verifier ' +\n      'assertion. A reCAPTCHA response token needs to be provided.',\n    [AuthErrorCode.MISSING_CODE]:\n      'The phone auth credential was created with an empty SMS verification code.',\n    [AuthErrorCode.MISSING_CONTINUE_URI]:\n      'A continue URL must be provided in the request.',\n    [AuthErrorCode.MISSING_IFRAME_START]: 'An internal AuthError has occurred.',\n    [AuthErrorCode.MISSING_IOS_BUNDLE_ID]:\n      'An iOS Bundle ID must be provided if an App Store ID is provided.',\n    [AuthErrorCode.MISSING_OR_INVALID_NONCE]:\n      'The request does not contain a valid nonce. This can occur if the ' +\n      'SHA-256 hash of the provided raw nonce does not match the hashed nonce ' +\n      'in the ID token payload.',\n    [AuthErrorCode.MISSING_PASSWORD]: 'A non-empty password must be provided',\n    [AuthErrorCode.MISSING_MFA_INFO]:\n      'No second factor identifier is provided.',\n    [AuthErrorCode.MISSING_MFA_SESSION]:\n      'The request is missing proof of first factor successful sign-in.',\n    [AuthErrorCode.MISSING_PHONE_NUMBER]:\n      'To send verification codes, provide a phone number for the recipient.',\n    [AuthErrorCode.MISSING_SESSION_INFO]:\n      'The phone auth credential was created with an empty verification ID.',\n    [AuthErrorCode.MODULE_DESTROYED]:\n      'This instance of FirebaseApp has been deleted.',\n    [AuthErrorCode.MFA_INFO_NOT_FOUND]:\n      'The user does not have a second factor matching the identifier provided.',\n    [AuthErrorCode.MFA_REQUIRED]:\n      'Proof of ownership of a second factor is required to complete sign-in.',\n    [AuthErrorCode.NEED_CONFIRMATION]:\n      'An account already exists with the same email address but different ' +\n      'sign-in credentials. Sign in using a provider associated with this ' +\n      'email address.',\n    [AuthErrorCode.NETWORK_REQUEST_FAILED]:\n      'A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.',\n    [AuthErrorCode.NO_AUTH_EVENT]: 'An internal AuthError has occurred.',\n    [AuthErrorCode.NO_SUCH_PROVIDER]:\n      'User was not linked to an account with the given provider.',\n    [AuthErrorCode.NULL_USER]:\n      'A null user object was provided as the argument for an operation which ' +\n      'requires a non-null user object.',\n    [AuthErrorCode.OPERATION_NOT_ALLOWED]:\n      'The given sign-in provider is disabled for this Firebase project. ' +\n      'Enable it in the Firebase console, under the sign-in method tab of the ' +\n      'Auth section.',\n    [AuthErrorCode.OPERATION_NOT_SUPPORTED]:\n      'This operation is not supported in the environment this application is ' +\n      'running on. \"location.protocol\" must be http, https or chrome-extension' +\n      ' and web storage must be enabled.',\n    [AuthErrorCode.POPUP_BLOCKED]:\n      'Unable to establish a connection with the popup. It may have been blocked by the browser.',\n    [AuthErrorCode.POPUP_CLOSED_BY_USER]:\n      'The popup has been closed by the user before finalizing the operation.',\n    [AuthErrorCode.PROVIDER_ALREADY_LINKED]:\n      'User can only be linked to one identity for the given provider.',\n    [AuthErrorCode.QUOTA_EXCEEDED]:\n      \"The project's quota for this operation has been exceeded.\",\n    [AuthErrorCode.REDIRECT_CANCELLED_BY_USER]:\n      'The redirect operation has been cancelled by the user before finalizing.',\n    [AuthErrorCode.REDIRECT_OPERATION_PENDING]:\n      'A redirect sign-in operation is already pending.',\n    [AuthErrorCode.REJECTED_CREDENTIAL]:\n      'The request contains malformed or mismatching credentials.',\n    [AuthErrorCode.SECOND_FACTOR_ALREADY_ENROLLED]:\n      'The second factor is already enrolled on this account.',\n    [AuthErrorCode.SECOND_FACTOR_LIMIT_EXCEEDED]:\n      'The maximum allowed number of second factors on a user has been exceeded.',\n    [AuthErrorCode.TENANT_ID_MISMATCH]:\n      \"The provided tenant ID does not match the Auth instance's tenant ID\",\n    [AuthErrorCode.TIMEOUT]: 'The operation has timed out.',\n    [AuthErrorCode.TOKEN_EXPIRED]:\n      \"The user's credential is no longer valid. The user must sign in again.\",\n    [AuthErrorCode.TOO_MANY_ATTEMPTS_TRY_LATER]:\n      'We have blocked all requests from this device due to unusual activity. ' +\n      'Try again later.',\n    [AuthErrorCode.UNAUTHORIZED_DOMAIN]:\n      'The domain of the continue URL is not whitelisted.  Please whitelist ' +\n      'the domain in the Firebase console.',\n    [AuthErrorCode.UNSUPPORTED_FIRST_FACTOR]:\n      'Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.',\n    [AuthErrorCode.UNSUPPORTED_PERSISTENCE]:\n      'The current environment does not support the specified persistence type.',\n    [AuthErrorCode.UNSUPPORTED_TENANT_OPERATION]:\n      'This operation is not supported in a multi-tenant context.',\n    [AuthErrorCode.UNVERIFIED_EMAIL]:\n      'The operation requires a verified email.',\n    [AuthErrorCode.USER_CANCELLED]:\n      'The user did not grant your application the permissions it requested.',\n    [AuthErrorCode.USER_DELETED]:\n      'There is no user record corresponding to this identifier. The user may ' +\n      'have been deleted.',\n    [AuthErrorCode.USER_DISABLED]:\n      'The user account has been disabled by an administrator.',\n    [AuthErrorCode.USER_MISMATCH]:\n      'The supplied credentials do not correspond to the previously signed in user.',\n    [AuthErrorCode.USER_SIGNED_OUT]: '',\n    [AuthErrorCode.WEAK_PASSWORD]:\n      'The password must be 6 characters long or more.',\n    [AuthErrorCode.WEB_STORAGE_UNSUPPORTED]:\n      'This browser is not supported or 3rd party cookies and data may be disabled.',\n    [AuthErrorCode.ALREADY_INITIALIZED]:\n      'initializeAuth() has already been called with ' +\n      'different options. To avoid this error, call initializeAuth() with the ' +\n      'same options as when it was originally called, or call getAuth() to return the' +\n      ' already initialized instance.',\n    [AuthErrorCode.MISSING_RECAPTCHA_TOKEN]:\n      'The reCAPTCHA token is missing when sending request to the backend.',\n    [AuthErrorCode.INVALID_RECAPTCHA_TOKEN]:\n      'The reCAPTCHA token is invalid when sending request to the backend.',\n    [AuthErrorCode.INVALID_RECAPTCHA_ACTION]:\n      'The reCAPTCHA action is invalid when sending request to the backend.',\n    [AuthErrorCode.RECAPTCHA_NOT_ENABLED]:\n      'reCAPTCHA Enterprise integration is not enabled for this project.',\n    [AuthErrorCode.MISSING_CLIENT_TYPE]:\n      'The reCAPTCHA client type is missing when sending request to the backend.',\n    [AuthErrorCode.MISSING_RECAPTCHA_VERSION]:\n      'The reCAPTCHA version is missing when sending request to the backend.',\n    [AuthErrorCode.INVALID_REQ_TYPE]: 'Invalid request parameters.',\n    [AuthErrorCode.INVALID_RECAPTCHA_VERSION]:\n      'The reCAPTCHA version is invalid when sending request to the backend.',\n    [AuthErrorCode.UNSUPPORTED_PASSWORD_POLICY_SCHEMA_VERSION]:\n      'The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.',\n    [AuthErrorCode.PASSWORD_DOES_NOT_MEET_REQUIREMENTS]:\n      'The password does not meet the requirements.',\n    [AuthErrorCode.INVALID_HOSTING_LINK_DOMAIN]:\n      'The provided Hosting link domain is not configured in Firebase Hosting or is not owned by ' +\n      'the current project. This cannot be a default Hosting domain (`web.app` or `firebaseapp.com`).'\n  };\n}\n\nexport interface ErrorMapRetriever extends AuthErrorMap {\n  (): ErrorMap<AuthErrorCode>;\n}\n\nfunction _prodErrorMap(): ErrorMap<AuthErrorCode> {\n  // We will include this one message in the prod error map since by the very\n  // nature of this error, developers will never be able to see the message\n  // using the debugErrorMap (which is installed during auth initialization).\n  return {\n    [AuthErrorCode.DEPENDENT_SDK_INIT_BEFORE_AUTH]:\n      'Another Firebase SDK was initialized and is trying to use Auth before Auth is ' +\n      'initialized. Please be sure to call `initializeAuth` or `getAuth` before ' +\n      'starting any other Firebase SDK.'\n  } as ErrorMap<AuthErrorCode>;\n}\n\n/**\n * A verbose error map with detailed descriptions for most error codes.\n *\n * See discussion at {@link AuthErrorMap}\n *\n * @public\n */\nexport const debugErrorMap: AuthErrorMap = _debugErrorMap;\n\n/**\n * A minimal error map with all verbose error messages stripped.\n *\n * See discussion at {@link AuthErrorMap}\n *\n * @public\n */\nexport const prodErrorMap: AuthErrorMap = _prodErrorMap;\n\nexport interface NamedErrorParams {\n  appName: AppName;\n  credential?: AuthCredential;\n  email?: string;\n  phoneNumber?: string;\n  tenantId?: string;\n  user?: User;\n  _serverResponse?: object;\n}\n\n/**\n * @internal\n */\ntype GenericAuthErrorParams = {\n  [key in Exclude<\n    AuthErrorCode,\n    | AuthErrorCode.ARGUMENT_ERROR\n    | AuthErrorCode.DEPENDENT_SDK_INIT_BEFORE_AUTH\n    | AuthErrorCode.INTERNAL_ERROR\n    | AuthErrorCode.MFA_REQUIRED\n    | AuthErrorCode.NO_AUTH_EVENT\n    | AuthErrorCode.OPERATION_NOT_SUPPORTED\n  >]: {\n    appName?: AppName;\n    email?: string;\n    phoneNumber?: string;\n    message?: string;\n  };\n};\n\n/**\n * @internal\n */\nexport interface AuthErrorParams extends GenericAuthErrorParams {\n  [AuthErrorCode.ARGUMENT_ERROR]: { appName?: AppName };\n  [AuthErrorCode.DEPENDENT_SDK_INIT_BEFORE_AUTH]: { appName?: AppName };\n  [AuthErrorCode.INTERNAL_ERROR]: { appName?: AppName };\n  [AuthErrorCode.LOGIN_BLOCKED]: {\n    appName?: AppName;\n    originalMessage?: string;\n  };\n  [AuthErrorCode.OPERATION_NOT_SUPPORTED]: { appName?: AppName };\n  [AuthErrorCode.NO_AUTH_EVENT]: { appName?: AppName };\n  [AuthErrorCode.MFA_REQUIRED]: {\n    appName: AppName;\n    _serverResponse: IdTokenMfaResponse;\n  };\n  [AuthErrorCode.INVALID_CORDOVA_CONFIGURATION]: {\n    appName: AppName;\n    missingPlugin?: string;\n  };\n}\n\nexport const _DEFAULT_AUTH_ERROR_FACTORY = new ErrorFactory<\n  AuthErrorCode,\n  AuthErrorParams\n>('auth', 'Firebase', _prodErrorMap());\n\n/**\n * A map of potential `Auth` error codes, for easier comparison with errors\n * thrown by the SDK.\n *\n * @remarks\n * Note that you can't tree-shake individual keys\n * in the map, so by using the map you might substantially increase your\n * bundle size.\n *\n * @public\n */\nexport const AUTH_ERROR_CODES_MAP_DO_NOT_USE_INTERNALLY = {\n  ADMIN_ONLY_OPERATION: 'auth/admin-restricted-operation',\n  ARGUMENT_ERROR: 'auth/argument-error',\n  APP_NOT_AUTHORIZED: 'auth/app-not-authorized',\n  APP_NOT_INSTALLED: 'auth/app-not-installed',\n  CAPTCHA_CHECK_FAILED: 'auth/captcha-check-failed',\n  CODE_EXPIRED: 'auth/code-expired',\n  CORDOVA_NOT_READY: 'auth/cordova-not-ready',\n  CORS_UNSUPPORTED: 'auth/cors-unsupported',\n  CREDENTIAL_ALREADY_IN_USE: 'auth/credential-already-in-use',\n  CREDENTIAL_MISMATCH: 'auth/custom-token-mismatch',\n  CREDENTIAL_TOO_OLD_LOGIN_AGAIN: 'auth/requires-recent-login',\n  DEPENDENT_SDK_INIT_BEFORE_AUTH: 'auth/dependent-sdk-initialized-before-auth',\n  DYNAMIC_LINK_NOT_ACTIVATED: 'auth/dynamic-link-not-activated',\n  EMAIL_CHANGE_NEEDS_VERIFICATION: 'auth/email-change-needs-verification',\n  EMAIL_EXISTS: 'auth/email-already-in-use',\n  EMULATOR_CONFIG_FAILED: 'auth/emulator-config-failed',\n  EXPIRED_OOB_CODE: 'auth/expired-action-code',\n  EXPIRED_POPUP_REQUEST: 'auth/cancelled-popup-request',\n  INTERNAL_ERROR: 'auth/internal-error',\n  INVALID_API_KEY: 'auth/invalid-api-key',\n  INVALID_APP_CREDENTIAL: 'auth/invalid-app-credential',\n  INVALID_APP_ID: 'auth/invalid-app-id',\n  INVALID_AUTH: 'auth/invalid-user-token',\n  INVALID_AUTH_EVENT: 'auth/invalid-auth-event',\n  INVALID_CERT_HASH: 'auth/invalid-cert-hash',\n  INVALID_CODE: 'auth/invalid-verification-code',\n  INVALID_CONTINUE_URI: 'auth/invalid-continue-uri',\n  INVALID_CORDOVA_CONFIGURATION: 'auth/invalid-cordova-configuration',\n  INVALID_CUSTOM_TOKEN: 'auth/invalid-custom-token',\n  INVALID_DYNAMIC_LINK_DOMAIN: 'auth/invalid-dynamic-link-domain',\n  INVALID_EMAIL: 'auth/invalid-email',\n  INVALID_EMULATOR_SCHEME: 'auth/invalid-emulator-scheme',\n  INVALID_IDP_RESPONSE: 'auth/invalid-credential',\n  INVALID_LOGIN_CREDENTIALS: 'auth/invalid-credential',\n  INVALID_MESSAGE_PAYLOAD: 'auth/invalid-message-payload',\n  INVALID_MFA_SESSION: 'auth/invalid-multi-factor-session',\n  INVALID_OAUTH_CLIENT_ID: 'auth/invalid-oauth-client-id',\n  INVALID_OAUTH_PROVIDER: 'auth/invalid-oauth-provider',\n  INVALID_OOB_CODE: 'auth/invalid-action-code',\n  INVALID_ORIGIN: 'auth/unauthorized-domain',\n  INVALID_PASSWORD: 'auth/wrong-password',\n  INVALID_PERSISTENCE: 'auth/invalid-persistence-type',\n  INVALID_PHONE_NUMBER: 'auth/invalid-phone-number',\n  INVALID_PROVIDER_ID: 'auth/invalid-provider-id',\n  INVALID_RECIPIENT_EMAIL: 'auth/invalid-recipient-email',\n  INVALID_SENDER: 'auth/invalid-sender',\n  INVALID_SESSION_INFO: 'auth/invalid-verification-id',\n  INVALID_TENANT_ID: 'auth/invalid-tenant-id',\n  MFA_INFO_NOT_FOUND: 'auth/multi-factor-info-not-found',\n  MFA_REQUIRED: 'auth/multi-factor-auth-required',\n  MISSING_ANDROID_PACKAGE_NAME: 'auth/missing-android-pkg-name',\n  MISSING_APP_CREDENTIAL: 'auth/missing-app-credential',\n  MISSING_AUTH_DOMAIN: 'auth/auth-domain-config-required',\n  MISSING_CODE: 'auth/missing-verification-code',\n  MISSING_CONTINUE_URI: 'auth/missing-continue-uri',\n  MISSING_IFRAME_START: 'auth/missing-iframe-start',\n  MISSING_IOS_BUNDLE_ID: 'auth/missing-ios-bundle-id',\n  MISSING_OR_INVALID_NONCE: 'auth/missing-or-invalid-nonce',\n  MISSING_MFA_INFO: 'auth/missing-multi-factor-info',\n  MISSING_MFA_SESSION: 'auth/missing-multi-factor-session',\n  MISSING_PHONE_NUMBER: 'auth/missing-phone-number',\n  MISSING_SESSION_INFO: 'auth/missing-verification-id',\n  MODULE_DESTROYED: 'auth/app-deleted',\n  NEED_CONFIRMATION: 'auth/account-exists-with-different-credential',\n  NETWORK_REQUEST_FAILED: 'auth/network-request-failed',\n  NULL_USER: 'auth/null-user',\n  NO_AUTH_EVENT: 'auth/no-auth-event',\n  NO_SUCH_PROVIDER: 'auth/no-such-provider',\n  OPERATION_NOT_ALLOWED: 'auth/operation-not-allowed',\n  OPERATION_NOT_SUPPORTED: 'auth/operation-not-supported-in-this-environment',\n  POPUP_BLOCKED: 'auth/popup-blocked',\n  POPUP_CLOSED_BY_USER: 'auth/popup-closed-by-user',\n  PROVIDER_ALREADY_LINKED: 'auth/provider-already-linked',\n  QUOTA_EXCEEDED: 'auth/quota-exceeded',\n  REDIRECT_CANCELLED_BY_USER: 'auth/redirect-cancelled-by-user',\n  REDIRECT_OPERATION_PENDING: 'auth/redirect-operation-pending',\n  REJECTED_CREDENTIAL: 'auth/rejected-credential',\n  SECOND_FACTOR_ALREADY_ENROLLED: 'auth/second-factor-already-in-use',\n  SECOND_FACTOR_LIMIT_EXCEEDED: 'auth/maximum-second-factor-count-exceeded',\n  TENANT_ID_MISMATCH: 'auth/tenant-id-mismatch',\n  TIMEOUT: 'auth/timeout',\n  TOKEN_EXPIRED: 'auth/user-token-expired',\n  TOO_MANY_ATTEMPTS_TRY_LATER: 'auth/too-many-requests',\n  UNAUTHORIZED_DOMAIN: 'auth/unauthorized-continue-uri',\n  UNSUPPORTED_FIRST_FACTOR: 'auth/unsupported-first-factor',\n  UNSUPPORTED_PERSISTENCE: 'auth/unsupported-persistence-type',\n  UNSUPPORTED_TENANT_OPERATION: 'auth/unsupported-tenant-operation',\n  UNVERIFIED_EMAIL: 'auth/unverified-email',\n  USER_CANCELLED: 'auth/user-cancelled',\n  USER_DELETED: 'auth/user-not-found',\n  USER_DISABLED: 'auth/user-disabled',\n  USER_MISMATCH: 'auth/user-mismatch',\n  USER_SIGNED_OUT: 'auth/user-signed-out',\n  WEAK_PASSWORD: 'auth/weak-password',\n  WEB_STORAGE_UNSUPPORTED: 'auth/web-storage-unsupported',\n  ALREADY_INITIALIZED: 'auth/already-initialized',\n  RECAPTCHA_NOT_ENABLED: 'auth/recaptcha-not-enabled',\n  MISSING_RECAPTCHA_TOKEN: 'auth/missing-recaptcha-token',\n  INVALID_RECAPTCHA_TOKEN: 'auth/invalid-recaptcha-token',\n  INVALID_RECAPTCHA_ACTION: 'auth/invalid-recaptcha-action',\n  MISSING_CLIENT_TYPE: 'auth/missing-client-type',\n  MISSING_RECAPTCHA_VERSION: 'auth/missing-recaptcha-version',\n  INVALID_RECAPTCHA_VERSION: 'auth/invalid-recaptcha-version',\n  INVALID_REQ_TYPE: 'auth/invalid-req-type',\n  INVALID_HOSTING_LINK_DOMAIN: 'auth/invalid-hosting-link-domain'\n} as const;\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Logger, LogLevel } from '@firebase/logger';\nimport { SDK_VERSION } from '@firebase/app';\n\nexport { LogLevel };\n\nconst logClient = new Logger('@firebase/auth');\n\n// Helper methods are needed because variables can't be exported as read/write\nexport function _getLogLevel(): LogLevel {\n  return logClient.logLevel;\n}\n\nexport function _setLogLevel(newLevel: LogLevel): void {\n  logClient.logLevel = newLevel;\n}\n\nexport function _logDebug(msg: string, ...args: string[]): void {\n  if (logClient.logLevel <= LogLevel.DEBUG) {\n    logClient.debug(`Auth (${SDK_VERSION}): ${msg}`, ...args);\n  }\n}\n\nexport function _logWarn(msg: string, ...args: string[]): void {\n  if (logClient.logLevel <= LogLevel.WARN) {\n    logClient.warn(`Auth (${SDK_VERSION}): ${msg}`, ...args);\n  }\n}\n\nexport function _logError(msg: string, ...args: string[]): void {\n  if (logClient.logLevel <= LogLevel.ERROR) {\n    logClient.error(`Auth (${SDK_VERSION}): ${msg}`, ...args);\n  }\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Auth } from '../../model/public_types';\nimport { ErrorFactory, FirebaseError } from '@firebase/util';\nimport { AuthInternal } from '../../model/auth';\nimport {\n  _DEFAULT_AUTH_ERROR_FACTORY,\n  AuthErrorCode,\n  AuthErrorParams,\n  prodErrorMap,\n  ErrorMapRetriever\n} from '../errors';\nimport { _logError } from './log';\n\ntype AuthErrorListParams<K> = K extends keyof AuthErrorParams\n  ? [AuthErrorParams[K]]\n  : [];\ntype LessAppName<K extends AuthErrorCode> = Omit<AuthErrorParams[K], 'appName'>;\n\n/**\n * Unconditionally fails, throwing a developer facing INTERNAL_ERROR\n *\n * @example\n * ```javascript\n * fail(auth, AuthErrorCode.MFA_REQUIRED);  // Error: the MFA_REQUIRED error needs more params than appName\n * fail(auth, AuthErrorCode.MFA_REQUIRED, {serverResponse});  // Compiles\n * fail(AuthErrorCode.INTERNAL_ERROR);  // Compiles; internal error does not need appName\n * fail(AuthErrorCode.USER_DELETED);  // Error: USER_DELETED requires app name\n * fail(auth, AuthErrorCode.USER_DELETED);  // Compiles; USER_DELETED _only_ needs app name\n * ```\n *\n * @param appName App name for tagging the error\n * @throws FirebaseError\n */\nexport function _fail<K extends AuthErrorCode>(\n  code: K,\n  ...data: {} extends AuthErrorParams[K]\n    ? [AuthErrorParams[K]?]\n    : [AuthErrorParams[K]]\n): never;\nexport function _fail<K extends AuthErrorCode>(\n  auth: Auth,\n  code: K,\n  ...data: {} extends LessAppName<K> ? [LessAppName<K>?] : [LessAppName<K>]\n): never;\nexport function _fail<K extends AuthErrorCode>(\n  authOrCode: Auth | K,\n  ...rest: unknown[]\n): never {\n  throw createErrorInternal(authOrCode, ...rest);\n}\n\nexport function _createError<K extends AuthErrorCode>(\n  code: K,\n  ...data: {} extends AuthErrorParams[K]\n    ? [AuthErrorParams[K]?]\n    : [AuthErrorParams[K]]\n): FirebaseError;\nexport function _createError<K extends AuthErrorCode>(\n  auth: Auth,\n  code: K,\n  ...data: {} extends LessAppName<K> ? [LessAppName<K>?] : [LessAppName<K>]\n): FirebaseError;\nexport function _createError<K extends AuthErrorCode>(\n  authOrCode: Auth | K,\n  ...rest: unknown[]\n): FirebaseError {\n  return createErrorInternal(authOrCode, ...rest);\n}\n\nexport function _errorWithCustomMessage(\n  auth: Auth,\n  code: AuthErrorCode,\n  message: string\n): FirebaseError {\n  const errorMap = {\n    ...(prodErrorMap as ErrorMapRetriever)(),\n    [code]: message\n  };\n  const factory = new ErrorFactory<AuthErrorCode, AuthErrorParams>(\n    'auth',\n    'Firebase',\n    errorMap\n  );\n  return factory.create(code, {\n    appName: auth.name\n  });\n}\n\nexport function _serverAppCurrentUserOperationNotSupportedError(\n  auth: Auth\n): FirebaseError {\n  return _errorWithCustomMessage(\n    auth,\n    AuthErrorCode.OPERATION_NOT_SUPPORTED,\n    'Operations that alter the current user are not supported in conjunction with FirebaseServerApp'\n  );\n}\n\nexport function _assertInstanceOf(\n  auth: Auth,\n  object: object,\n  instance: unknown\n): void {\n  const constructorInstance = instance as { new (...args: unknown[]): unknown };\n  if (!(object instanceof constructorInstance)) {\n    if (constructorInstance.name !== object.constructor.name) {\n      _fail(auth, AuthErrorCode.ARGUMENT_ERROR);\n    }\n\n    throw _errorWithCustomMessage(\n      auth,\n      AuthErrorCode.ARGUMENT_ERROR,\n      `Type of ${object.constructor.name} does not match expected instance.` +\n        `Did you pass a reference from a different Auth SDK?`\n    );\n  }\n}\n\nfunction createErrorInternal<K extends AuthErrorCode>(\n  authOrCode: Auth | K,\n  ...rest: unknown[]\n): FirebaseError {\n  if (typeof authOrCode !== 'string') {\n    const code = rest[0] as K;\n    const fullParams = [...rest.slice(1)] as AuthErrorListParams<K>;\n    if (fullParams[0]) {\n      fullParams[0].appName = authOrCode.name;\n    }\n\n    return (authOrCode as AuthInternal)._errorFactory.create(\n      code,\n      ...fullParams\n    );\n  }\n\n  return _DEFAULT_AUTH_ERROR_FACTORY.create(\n    authOrCode,\n    ...(rest as AuthErrorListParams<K>)\n  );\n}\n\nexport function _assert<K extends AuthErrorCode>(\n  assertion: unknown,\n  code: K,\n  ...data: {} extends AuthErrorParams[K]\n    ? [AuthErrorParams[K]?]\n    : [AuthErrorParams[K]]\n): asserts assertion;\nexport function _assert<K extends AuthErrorCode>(\n  assertion: unknown,\n  auth: Auth,\n  code: K,\n  ...data: {} extends LessAppName<K> ? [LessAppName<K>?] : [LessAppName<K>]\n): asserts assertion;\nexport function _assert<K extends AuthErrorCode>(\n  assertion: unknown,\n  authOrCode: Auth | K,\n  ...rest: unknown[]\n): asserts assertion {\n  if (!assertion) {\n    throw createErrorInternal(authOrCode, ...rest);\n  }\n}\n\n// We really do want to accept literally any function type here\n// eslint-disable-next-line @typescript-eslint/ban-types\ntype TypeExpectation = Function | string | MapType;\n\ninterface MapType extends Record<string, TypeExpectation | Optional> {}\n\nclass Optional {\n  constructor(readonly type: TypeExpectation) {}\n}\n\nexport function opt(type: TypeExpectation): Optional {\n  return new Optional(type);\n}\n\n/**\n * Asserts the runtime types of arguments. The 'expected' field can be one of\n * a class, a string (representing a \"typeof\" call), or a record map of name\n * to type. Furthermore, the opt() function can be used to mark a field as\n * optional. For example:\n *\n * function foo(auth: Auth, profile: {displayName?: string}, update = false) {\n *   assertTypes(arguments, [AuthImpl, {displayName: opt('string')}, opt('boolean')]);\n * }\n *\n * opt() can be used for any type:\n * function foo(auth?: Auth) {\n *   assertTypes(arguments, [opt(AuthImpl)]);\n * }\n *\n * The string types can be or'd together, and you can use \"null\" as well (note\n * that typeof null === 'object'; this is an edge case). For example:\n *\n * function foo(profile: {displayName?: string | null}) {\n *   assertTypes(arguments, [{displayName: opt('string|null')}]);\n * }\n *\n * @param args\n * @param expected\n */\nexport function assertTypes(\n  args: Omit<IArguments, 'callee'>,\n  ...expected: Array<TypeExpectation | Optional>\n): void {\n  if (args.length > expected.length) {\n    _fail(AuthErrorCode.ARGUMENT_ERROR, {});\n  }\n\n  for (let i = 0; i < expected.length; i++) {\n    let expect = expected[i];\n    const arg = args[i];\n\n    if (expect instanceof Optional) {\n      // If the arg is undefined, then it matches \"optional\" and we can move to\n      // the next arg\n      if (typeof arg === 'undefined') {\n        continue;\n      }\n      expect = expect.type;\n    }\n\n    if (typeof expect === 'string') {\n      // Handle the edge case for null because typeof null === 'object'\n      if (expect.includes('null') && arg === null) {\n        continue;\n      }\n\n      const required = expect.split('|');\n      _assert(required.includes(typeof arg), AuthErrorCode.ARGUMENT_ERROR, {});\n    } else if (typeof expect === 'object') {\n      // Recursively check record arguments\n      const record = arg as Record<string, unknown>;\n      const map = expect as MapType;\n      const keys = Object.keys(expect);\n\n      assertTypes(\n        keys.map(k => record[k]),\n        ...keys.map(k => map[k])\n      );\n    } else {\n      _assert(arg instanceof expect, AuthErrorCode.ARGUMENT_ERROR, {});\n    }\n  }\n}\n\n/**\n * Unconditionally fails, throwing an internal error with the given message.\n *\n * @param failure type of failure encountered\n * @throws Error\n */\nexport function debugFail(failure: string): never {\n  // Log the failure in addition to throw an exception, just in case the\n  // exception is swallowed.\n  const message = `INTERNAL ASSERTION FAILED: ` + failure;\n  _logError(message);\n\n  // NOTE: We don't use FirebaseError here because these are internal failures\n  // that cannot be handled by the user. (Also it would create a circular\n  // dependency between the error and assert modules which doesn't work.)\n  throw new Error(message);\n}\n\n/**\n * Fails if the given assertion condition is false, throwing an Error with the\n * given message if it did.\n *\n * @param assertion\n * @param message\n */\nexport function debugAssert(\n  assertion: unknown,\n  message: string\n): asserts assertion {\n  if (!assertion) {\n    debugFail(message);\n  }\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport function _getCurrentUrl(): string {\n  return (typeof self !== 'undefined' && self.location?.href) || '';\n}\n\nexport function _isHttpOrHttps(): boolean {\n  return _getCurrentScheme() === 'http:' || _getCurrentScheme() === 'https:';\n}\n\nexport function _getCurrentScheme(): string | null {\n  return (typeof self !== 'undefined' && self.location?.protocol) || null;\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { isMobileCordova, isReactNative } from '@firebase/util';\nimport { _isOnline } from './navigator';\nimport { debugAssert } from './assert';\n\nexport const enum DelayMin {\n  OFFLINE = 5000\n}\n\n/**\n * A structure to help pick between a range of long and short delay durations\n * depending on the current environment. In general, the long delay is used for\n * mobile environments whereas short delays are used for desktop environments.\n */\nexport class Delay {\n  // The default value for the offline delay timeout in ms.\n\n  private readonly isMobile: boolean;\n  constructor(\n    private readonly shortDelay: number,\n    private readonly longDelay: number\n  ) {\n    // Internal error when improperly initialized.\n    debugAssert(\n      longDelay > shortDelay,\n      'Short delay should be less than long delay!'\n    );\n    this.isMobile = isMobileCordova() || isReactNative();\n  }\n\n  get(): number {\n    if (!_isOnline()) {\n      // Pick the shorter timeout.\n      return Math.min(DelayMin.OFFLINE, this.shortDelay);\n    }\n    // If running in a mobile environment, return the long delay, otherwise\n    // return the short delay.\n    // This could be improved in the future to dynamically change based on other\n    // variables instead of just reading the current environment.\n    return this.isMobile ? this.longDelay : this.shortDelay;\n  }\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { isBrowserExtension } from '@firebase/util';\nimport { _isHttpOrHttps } from './location';\n\n/**\n * Determine whether the browser is working online\n */\nexport function _isOnline(): boolean {\n  if (\n    typeof navigator !== 'undefined' &&\n    navigator &&\n    'onLine' in navigator &&\n    typeof navigator.onLine === 'boolean' &&\n    // Apply only for traditional web apps and Chrome extensions.\n    // This is especially true for Cordova apps which have unreliable\n    // navigator.onLine behavior unless cordova-plugin-network-information is\n    // installed which overwrites the native navigator.onLine value and\n    // defines navigator.connection.\n    (_isHttpOrHttps() || isBrowserExtension() || 'connection' in navigator)\n  ) {\n    return navigator.onLine;\n  }\n  // If we can't determine the state, assume it is online.\n  return true;\n}\n\nexport function _getUserLanguage(): string | null {\n  if (typeof navigator === 'undefined') {\n    return null;\n  }\n  const navigatorLanguage: NavigatorLanguage = navigator;\n  return (\n    // Most reliable, but only supported in Chrome/Firefox.\n    (navigatorLanguage.languages && navigatorLanguage.languages[0]) ||\n    // Supported in most browsers, but returns the language of the browser\n    // UI, not the language set in browser settings.\n    navigatorLanguage.language ||\n    // Couldn't determine language.\n    null\n  );\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { ConfigInternal } from '../../model/auth';\nimport { debugAssert } from './assert';\n\nexport function _emulatorUrl(config: ConfigInternal, path?: string): string {\n  debugAssert(config.emulator, 'Emulator should always be set here');\n  const { url } = config.emulator;\n\n  if (!path) {\n    return url;\n  }\n\n  return `${url}${path.startsWith('/') ? path.slice(1) : path}`;\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { debugFail } from './assert';\n\nexport class FetchProvider {\n  private static fetchImpl: typeof fetch | null;\n  private static headersImpl: typeof Headers | null;\n  private static responseImpl: typeof Response | null;\n\n  static initialize(\n    fetchImpl: typeof fetch,\n    headersImpl?: typeof Headers,\n    responseImpl?: typeof Response\n  ): void {\n    this.fetchImpl = fetchImpl;\n    if (headersImpl) {\n      this.headersImpl = headersImpl;\n    }\n    if (responseImpl) {\n      this.responseImpl = responseImpl;\n    }\n  }\n\n  static fetch(): typeof fetch {\n    if (this.fetchImpl) {\n      return this.fetchImpl;\n    }\n    if (typeof self !== 'undefined' && 'fetch' in self) {\n      return self.fetch;\n    }\n    if (typeof globalThis !== 'undefined' && globalThis.fetch) {\n      return globalThis.fetch;\n    }\n    if (typeof fetch !== 'undefined') {\n      return fetch;\n    }\n    debugFail(\n      'Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill'\n    );\n  }\n\n  static headers(): typeof Headers {\n    if (this.headersImpl) {\n      return this.headersImpl;\n    }\n    if (typeof self !== 'undefined' && 'Headers' in self) {\n      return self.Headers;\n    }\n    if (typeof globalThis !== 'undefined' && globalThis.Headers) {\n      return globalThis.Headers;\n    }\n    if (typeof Headers !== 'undefined') {\n      return Headers;\n    }\n    debugFail(\n      'Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill'\n    );\n  }\n\n  static response(): typeof Response {\n    if (this.responseImpl) {\n      return this.responseImpl;\n    }\n    if (typeof self !== 'undefined' && 'Response' in self) {\n      return self.Response;\n    }\n    if (typeof globalThis !== 'undefined' && globalThis.Response) {\n      return globalThis.Response;\n    }\n    if (typeof Response !== 'undefined') {\n      return Response;\n    }\n    debugFail(\n      'Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill'\n    );\n  }\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { AuthErrorCode } from '../core/errors';\n\n/**\n * Errors that can be returned by the backend\n */\nexport const enum ServerError {\n  ADMIN_ONLY_OPERATION = 'ADMIN_ONLY_OPERATION',\n  BLOCKING_FUNCTION_ERROR_RESPONSE = 'BLOCKING_FUNCTION_ERROR_RESPONSE',\n  CAPTCHA_CHECK_FAILED = 'CAPTCHA_CHECK_FAILED',\n  CORS_UNSUPPORTED = 'CORS_UNSUPPORTED',\n  CREDENTIAL_MISMATCH = 'CREDENTIAL_MISMATCH',\n  CREDENTIAL_TOO_OLD_LOGIN_AGAIN = 'CREDENTIAL_TOO_OLD_LOGIN_AGAIN',\n  DYNAMIC_LINK_NOT_ACTIVATED = 'DYNAMIC_LINK_NOT_ACTIVATED',\n  EMAIL_CHANGE_NEEDS_VERIFICATION = 'EMAIL_CHANGE_NEEDS_VERIFICATION',\n  EMAIL_EXISTS = 'EMAIL_EXISTS',\n  EMAIL_NOT_FOUND = 'EMAIL_NOT_FOUND',\n  EXPIRED_OOB_CODE = 'EXPIRED_OOB_CODE',\n  FEDERATED_USER_ID_ALREADY_LINKED = 'FEDERATED_USER_ID_ALREADY_LINKED',\n  INVALID_APP_CREDENTIAL = 'INVALID_APP_CREDENTIAL',\n  INVALID_APP_ID = 'INVALID_APP_ID',\n  INVALID_CERT_HASH = 'INVALID_CERT_HASH',\n  INVALID_CODE = 'INVALID_CODE',\n  INVALID_CONTINUE_URI = 'INVALID_CONTINUE_URI',\n  INVALID_CUSTOM_TOKEN = 'INVALID_CUSTOM_TOKEN',\n  INVALID_DYNAMIC_LINK_DOMAIN = 'INVALID_DYNAMIC_LINK_DOMAIN',\n  INVALID_EMAIL = 'INVALID_EMAIL',\n  INVALID_ID_TOKEN = 'INVALID_ID_TOKEN',\n  INVALID_IDP_RESPONSE = 'INVALID_IDP_RESPONSE',\n  INVALID_IDENTIFIER = 'INVALID_IDENTIFIER',\n  INVALID_LOGIN_CREDENTIALS = 'INVALID_LOGIN_CREDENTIALS',\n  INVALID_MESSAGE_PAYLOAD = 'INVALID_MESSAGE_PAYLOAD',\n  INVALID_MFA_PENDING_CREDENTIAL = 'INVALID_MFA_PENDING_CREDENTIAL',\n  INVALID_OAUTH_CLIENT_ID = 'INVALID_OAUTH_CLIENT_ID',\n  INVALID_OOB_CODE = 'INVALID_OOB_CODE',\n  INVALID_PASSWORD = 'INVALID_PASSWORD',\n  INVALID_PENDING_TOKEN = 'INVALID_PENDING_TOKEN',\n  INVALID_PHONE_NUMBER = 'INVALID_PHONE_NUMBER',\n  INVALID_PROVIDER_ID = 'INVALID_PROVIDER_ID',\n  INVALID_RECIPIENT_EMAIL = 'INVALID_RECIPIENT_EMAIL',\n  INVALID_SENDER = 'INVALID_SENDER',\n  INVALID_SESSION_INFO = 'INVALID_SESSION_INFO',\n  INVALID_TEMPORARY_PROOF = 'INVALID_TEMPORARY_PROOF',\n  INVALID_TENANT_ID = 'INVALID_TENANT_ID',\n  MFA_ENROLLMENT_NOT_FOUND = 'MFA_ENROLLMENT_NOT_FOUND',\n  MISSING_ANDROID_PACKAGE_NAME = 'MISSING_ANDROID_PACKAGE_NAME',\n  MISSING_APP_CREDENTIAL = 'MISSING_APP_CREDENTIAL',\n  MISSING_CODE = 'MISSING_CODE',\n  MISSING_CONTINUE_URI = 'MISSING_CONTINUE_URI',\n  MISSING_CUSTOM_TOKEN = 'MISSING_CUSTOM_TOKEN',\n  MISSING_IOS_BUNDLE_ID = 'MISSING_IOS_BUNDLE_ID',\n  MISSING_MFA_ENROLLMENT_ID = 'MISSING_MFA_ENROLLMENT_ID',\n  MISSING_MFA_PENDING_CREDENTIAL = 'MISSING_MFA_PENDING_CREDENTIAL',\n  MISSING_OOB_CODE = 'MISSING_OOB_CODE',\n  MISSING_OR_INVALID_NONCE = 'MISSING_OR_INVALID_NONCE',\n  MISSING_PASSWORD = 'MISSING_PASSWORD',\n  MISSING_REQ_TYPE = 'MISSING_REQ_TYPE',\n  MISSING_PHONE_NUMBER = 'MISSING_PHONE_NUMBER',\n  MISSING_SESSION_INFO = 'MISSING_SESSION_INFO',\n  OPERATION_NOT_ALLOWED = 'OPERATION_NOT_ALLOWED',\n  PASSWORD_LOGIN_DISABLED = 'PASSWORD_LOGIN_DISABLED',\n  QUOTA_EXCEEDED = 'QUOTA_EXCEEDED',\n  RESET_PASSWORD_EXCEED_LIMIT = 'RESET_PASSWORD_EXCEED_LIMIT',\n  REJECTED_CREDENTIAL = 'REJECTED_CREDENTIAL',\n  SECOND_FACTOR_EXISTS = 'SECOND_FACTOR_EXISTS',\n  SECOND_FACTOR_LIMIT_EXCEEDED = 'SECOND_FACTOR_LIMIT_EXCEEDED',\n  SESSION_EXPIRED = 'SESSION_EXPIRED',\n  TENANT_ID_MISMATCH = 'TENANT_ID_MISMATCH',\n  TOKEN_EXPIRED = 'TOKEN_EXPIRED',\n  TOO_MANY_ATTEMPTS_TRY_LATER = 'TOO_MANY_ATTEMPTS_TRY_LATER',\n  UNSUPPORTED_FIRST_FACTOR = 'UNSUPPORTED_FIRST_FACTOR',\n  UNSUPPORTED_TENANT_OPERATION = 'UNSUPPORTED_TENANT_OPERATION',\n  UNAUTHORIZED_DOMAIN = 'UNAUTHORIZED_DOMAIN',\n  UNVERIFIED_EMAIL = 'UNVERIFIED_EMAIL',\n  USER_CANCELLED = 'USER_CANCELLED',\n  USER_DISABLED = 'USER_DISABLED',\n  USER_NOT_FOUND = 'USER_NOT_FOUND',\n  WEAK_PASSWORD = 'WEAK_PASSWORD',\n  RECAPTCHA_NOT_ENABLED = 'RECAPTCHA_NOT_ENABLED',\n  MISSING_RECAPTCHA_TOKEN = 'MISSING_RECAPTCHA_TOKEN',\n  INVALID_RECAPTCHA_TOKEN = 'INVALID_RECAPTCHA_TOKEN',\n  INVALID_RECAPTCHA_ACTION = 'INVALID_RECAPTCHA_ACTION',\n  MISSING_CLIENT_TYPE = 'MISSING_CLIENT_TYPE',\n  MISSING_RECAPTCHA_VERSION = 'MISSING_RECAPTCHA_VERSION',\n  INVALID_RECAPTCHA_VERSION = 'INVALID_RECAPTCHA_VERSION',\n  INVALID_REQ_TYPE = 'INVALID_REQ_TYPE',\n  PASSWORD_DOES_NOT_MEET_REQUIREMENTS = 'PASSWORD_DOES_NOT_MEET_REQUIREMENTS',\n  INVALID_HOSTING_LINK_DOMAIN = 'INVALID_HOSTING_LINK_DOMAIN'\n}\n\n/**\n * API Response in the event of an error\n */\nexport interface JsonError {\n  error: {\n    code: number;\n    message: string;\n    errors?: [\n      {\n        message: ServerError;\n        domain: string;\n        reason: string;\n      }\n    ];\n  };\n}\n\n/**\n * Type definition for a map from server errors to developer visible errors\n */\nexport declare type ServerErrorMap<ApiError extends string> = {\n  readonly [K in ApiError]: AuthErrorCode;\n};\n\n/**\n * Map from errors returned by the server to errors to developer visible errors\n */\nexport const SERVER_ERROR_MAP: Partial<ServerErrorMap<ServerError>> = {\n  // Custom token errors.\n  [ServerError.CREDENTIAL_MISMATCH]: AuthErrorCode.CREDENTIAL_MISMATCH,\n  // This can only happen if the SDK sends a bad request.\n  [ServerError.MISSING_CUSTOM_TOKEN]: AuthErrorCode.INTERNAL_ERROR,\n\n  // Create Auth URI errors.\n  [ServerError.INVALID_IDENTIFIER]: AuthErrorCode.INVALID_EMAIL,\n  // This can only happen if the SDK sends a bad request.\n  [ServerError.MISSING_CONTINUE_URI]: AuthErrorCode.INTERNAL_ERROR,\n\n  // Sign in with email and password errors (some apply to sign up too).\n  [ServerError.INVALID_PASSWORD]: AuthErrorCode.INVALID_PASSWORD,\n  // This can only happen if the SDK sends a bad request.\n  [ServerError.MISSING_PASSWORD]: AuthErrorCode.MISSING_PASSWORD,\n  // Thrown if Email Enumeration Protection is enabled in the project and the email or password is\n  // invalid.\n  [ServerError.INVALID_LOGIN_CREDENTIALS]: AuthErrorCode.INVALID_CREDENTIAL,\n\n  // Sign up with email and password errors.\n  [ServerError.EMAIL_EXISTS]: AuthErrorCode.EMAIL_EXISTS,\n  [ServerError.PASSWORD_LOGIN_DISABLED]: AuthErrorCode.OPERATION_NOT_ALLOWED,\n\n  // Verify assertion for sign in with credential errors:\n  [ServerError.INVALID_IDP_RESPONSE]: AuthErrorCode.INVALID_CREDENTIAL,\n  [ServerError.INVALID_PENDING_TOKEN]: AuthErrorCode.INVALID_CREDENTIAL,\n  [ServerError.FEDERATED_USER_ID_ALREADY_LINKED]:\n    AuthErrorCode.CREDENTIAL_ALREADY_IN_USE,\n\n  // This can only happen if the SDK sends a bad request.\n  [ServerError.MISSING_REQ_TYPE]: AuthErrorCode.INTERNAL_ERROR,\n\n  // Send Password reset email errors:\n  [ServerError.EMAIL_NOT_FOUND]: AuthErrorCode.USER_DELETED,\n  [ServerError.RESET_PASSWORD_EXCEED_LIMIT]:\n    AuthErrorCode.TOO_MANY_ATTEMPTS_TRY_LATER,\n\n  [ServerError.EXPIRED_OOB_CODE]: AuthErrorCode.EXPIRED_OOB_CODE,\n  [ServerError.INVALID_OOB_CODE]: AuthErrorCode.INVALID_OOB_CODE,\n  // This can only happen if the SDK sends a bad request.\n  [ServerError.MISSING_OOB_CODE]: AuthErrorCode.INTERNAL_ERROR,\n\n  // Operations that require ID token in request:\n  [ServerError.CREDENTIAL_TOO_OLD_LOGIN_AGAIN]:\n    AuthErrorCode.CREDENTIAL_TOO_OLD_LOGIN_AGAIN,\n  [ServerError.INVALID_ID_TOKEN]: AuthErrorCode.INVALID_AUTH,\n  [ServerError.TOKEN_EXPIRED]: AuthErrorCode.TOKEN_EXPIRED,\n  [ServerError.USER_NOT_FOUND]: AuthErrorCode.TOKEN_EXPIRED,\n\n  // Other errors.\n  [ServerError.TOO_MANY_ATTEMPTS_TRY_LATER]:\n    AuthErrorCode.TOO_MANY_ATTEMPTS_TRY_LATER,\n  [ServerError.PASSWORD_DOES_NOT_MEET_REQUIREMENTS]:\n    AuthErrorCode.PASSWORD_DOES_NOT_MEET_REQUIREMENTS,\n\n  // Phone Auth related errors.\n  [ServerError.INVALID_CODE]: AuthErrorCode.INVALID_CODE,\n  [ServerError.INVALID_SESSION_INFO]: AuthErrorCode.INVALID_SESSION_INFO,\n  [ServerError.INVALID_TEMPORARY_PROOF]: AuthErrorCode.INVALID_CREDENTIAL,\n  [ServerError.MISSING_SESSION_INFO]: AuthErrorCode.MISSING_SESSION_INFO,\n  [ServerError.SESSION_EXPIRED]: AuthErrorCode.CODE_EXPIRED,\n\n  // Other action code errors when additional settings passed.\n  // MISSING_CONTINUE_URI is getting mapped to INTERNAL_ERROR above.\n  // This is OK as this error will be caught by client side validation.\n  [ServerError.MISSING_ANDROID_PACKAGE_NAME]:\n    AuthErrorCode.MISSING_ANDROID_PACKAGE_NAME,\n  [ServerError.UNAUTHORIZED_DOMAIN]: AuthErrorCode.UNAUTHORIZED_DOMAIN,\n\n  // getProjectConfig errors when clientId is passed.\n  [ServerError.INVALID_OAUTH_CLIENT_ID]: AuthErrorCode.INVALID_OAUTH_CLIENT_ID,\n\n  // User actions (sign-up or deletion) disabled errors.\n  [ServerError.ADMIN_ONLY_OPERATION]: AuthErrorCode.ADMIN_ONLY_OPERATION,\n\n  // Multi factor related errors.\n  [ServerError.INVALID_MFA_PENDING_CREDENTIAL]:\n    AuthErrorCode.INVALID_MFA_SESSION,\n  [ServerError.MFA_ENROLLMENT_NOT_FOUND]: AuthErrorCode.MFA_INFO_NOT_FOUND,\n  [ServerError.MISSING_MFA_ENROLLMENT_ID]: AuthErrorCode.MISSING_MFA_INFO,\n  [ServerError.MISSING_MFA_PENDING_CREDENTIAL]:\n    AuthErrorCode.MISSING_MFA_SESSION,\n  [ServerError.SECOND_FACTOR_EXISTS]:\n    AuthErrorCode.SECOND_FACTOR_ALREADY_ENROLLED,\n  [ServerError.SECOND_FACTOR_LIMIT_EXCEEDED]:\n    AuthErrorCode.SECOND_FACTOR_LIMIT_EXCEEDED,\n\n  // Blocking functions related errors.\n  [ServerError.BLOCKING_FUNCTION_ERROR_RESPONSE]: AuthErrorCode.INTERNAL_ERROR,\n\n  // Recaptcha related errors.\n  [ServerError.RECAPTCHA_NOT_ENABLED]: AuthErrorCode.RECAPTCHA_NOT_ENABLED,\n  [ServerError.MISSING_RECAPTCHA_TOKEN]: AuthErrorCode.MISSING_RECAPTCHA_TOKEN,\n  [ServerError.INVALID_RECAPTCHA_TOKEN]: AuthErrorCode.INVALID_RECAPTCHA_TOKEN,\n  [ServerError.INVALID_RECAPTCHA_ACTION]:\n    AuthErrorCode.INVALID_RECAPTCHA_ACTION,\n  [ServerError.MISSING_CLIENT_TYPE]: AuthErrorCode.MISSING_CLIENT_TYPE,\n  [ServerError.MISSING_RECAPTCHA_VERSION]:\n    AuthErrorCode.MISSING_RECAPTCHA_VERSION,\n  [ServerError.INVALID_RECAPTCHA_VERSION]:\n    AuthErrorCode.INVALID_RECAPTCHA_VERSION,\n  [ServerError.INVALID_REQ_TYPE]: AuthErrorCode.INVALID_REQ_TYPE\n};\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  FirebaseError,\n  isCloudflareWorker,\n  isCloudWorkstation,\n  querystring\n} from '@firebase/util';\n\nimport { AuthErrorCode, NamedErrorParams } from '../core/errors';\nimport {\n  _createError,\n  _errorWithCustomMessage,\n  _fail\n} from '../core/util/assert';\nimport { Delay } from '../core/util/delay';\nimport { _emulatorUrl } from '../core/util/emulator';\nimport { FetchProvider } from '../core/util/fetch_provider';\nimport { Auth } from '../model/public_types';\nimport { AuthInternal, ConfigInternal } from '../model/auth';\nimport { IdTokenResponse, TaggedWithTokenResponse } from '../model/id_token';\nimport { IdTokenMfaResponse } from './authentication/mfa';\nimport { SERVER_ERROR_MAP, ServerError, ServerErrorMap } from './errors';\nimport { PersistenceType } from '../core/persistence';\nimport { CookiePersistence } from '../platform_browser/persistence/cookie_storage';\n\nexport const enum HttpMethod {\n  POST = 'POST',\n  GET = 'GET'\n}\n\nexport const enum HttpHeader {\n  CONTENT_TYPE = 'Content-Type',\n  X_FIREBASE_LOCALE = 'X-Firebase-Locale',\n  X_CLIENT_VERSION = 'X-Client-Version',\n  X_FIREBASE_GMPID = 'X-Firebase-gmpid',\n  X_FIREBASE_CLIENT = 'X-Firebase-Client',\n  X_FIREBASE_APP_CHECK = 'X-Firebase-AppCheck'\n}\n\nexport const enum Endpoint {\n  CREATE_AUTH_URI = '/v1/accounts:createAuthUri',\n  DELETE_ACCOUNT = '/v1/accounts:delete',\n  RESET_PASSWORD = '/v1/accounts:resetPassword',\n  SIGN_UP = '/v1/accounts:signUp',\n  SIGN_IN_WITH_CUSTOM_TOKEN = '/v1/accounts:signInWithCustomToken',\n  SIGN_IN_WITH_EMAIL_LINK = '/v1/accounts:signInWithEmailLink',\n  SIGN_IN_WITH_IDP = '/v1/accounts:signInWithIdp',\n  SIGN_IN_WITH_PASSWORD = '/v1/accounts:signInWithPassword',\n  SIGN_IN_WITH_PHONE_NUMBER = '/v1/accounts:signInWithPhoneNumber',\n  SEND_VERIFICATION_CODE = '/v1/accounts:sendVerificationCode',\n  SEND_OOB_CODE = '/v1/accounts:sendOobCode',\n  SET_ACCOUNT_INFO = '/v1/accounts:update',\n  GET_ACCOUNT_INFO = '/v1/accounts:lookup',\n  GET_RECAPTCHA_PARAM = '/v1/recaptchaParams',\n  START_MFA_ENROLLMENT = '/v2/accounts/mfaEnrollment:start',\n  FINALIZE_MFA_ENROLLMENT = '/v2/accounts/mfaEnrollment:finalize',\n  START_MFA_SIGN_IN = '/v2/accounts/mfaSignIn:start',\n  FINALIZE_MFA_SIGN_IN = '/v2/accounts/mfaSignIn:finalize',\n  WITHDRAW_MFA = '/v2/accounts/mfaEnrollment:withdraw',\n  GET_PROJECT_CONFIG = '/v1/projects',\n  GET_RECAPTCHA_CONFIG = '/v2/recaptchaConfig',\n  GET_PASSWORD_POLICY = '/v2/passwordPolicy',\n  TOKEN = '/v1/token',\n  REVOKE_TOKEN = '/v2/accounts:revokeToken'\n}\n\nconst CookieAuthProxiedEndpoints: string[] = [\n  Endpoint.SIGN_IN_WITH_CUSTOM_TOKEN,\n  Endpoint.SIGN_IN_WITH_EMAIL_LINK,\n  Endpoint.SIGN_IN_WITH_IDP,\n  Endpoint.SIGN_IN_WITH_PASSWORD,\n  Endpoint.SIGN_IN_WITH_PHONE_NUMBER,\n  Endpoint.TOKEN\n];\n\nexport const enum RecaptchaClientType {\n  WEB = 'CLIENT_TYPE_WEB',\n  ANDROID = 'CLIENT_TYPE_ANDROID',\n  IOS = 'CLIENT_TYPE_IOS'\n}\n\nexport const enum RecaptchaVersion {\n  ENTERPRISE = 'RECAPTCHA_ENTERPRISE'\n}\n\nexport const enum RecaptchaActionName {\n  SIGN_IN_WITH_PASSWORD = 'signInWithPassword',\n  GET_OOB_CODE = 'getOobCode',\n  SIGN_UP_PASSWORD = 'signUpPassword',\n  SEND_VERIFICATION_CODE = 'sendVerificationCode',\n  MFA_SMS_ENROLLMENT = 'mfaSmsEnrollment',\n  MFA_SMS_SIGNIN = 'mfaSmsSignIn'\n}\n\nexport const enum EnforcementState {\n  ENFORCE = 'ENFORCE',\n  AUDIT = 'AUDIT',\n  OFF = 'OFF',\n  ENFORCEMENT_STATE_UNSPECIFIED = 'ENFORCEMENT_STATE_UNSPECIFIED'\n}\n\n// Providers that have reCAPTCHA Enterprise support.\nexport const enum RecaptchaAuthProvider {\n  EMAIL_PASSWORD_PROVIDER = 'EMAIL_PASSWORD_PROVIDER',\n  PHONE_PROVIDER = 'PHONE_PROVIDER'\n}\n\nexport const DEFAULT_API_TIMEOUT_MS = new Delay(30_000, 60_000);\n\nexport function _addTidIfNecessary<T extends { tenantId?: string }>(\n  auth: Auth,\n  request: T\n): T {\n  if (auth.tenantId && !request.tenantId) {\n    return {\n      ...request,\n      tenantId: auth.tenantId\n    };\n  }\n  return request;\n}\n\nexport async function _performApiRequest<T, V>(\n  auth: Auth,\n  method: HttpMethod,\n  path: Endpoint,\n  request?: T,\n  customErrorMap: Partial<ServerErrorMap<ServerError>> = {}\n): Promise<V> {\n  return _performFetchWithErrorHandling(auth, customErrorMap, async () => {\n    let body = {};\n    let params = {};\n    if (request) {\n      if (method === HttpMethod.GET) {\n        params = request;\n      } else {\n        body = {\n          body: JSON.stringify(request)\n        };\n      }\n    }\n\n    const query = querystring({\n      key: auth.config.apiKey,\n      ...params\n    }).slice(1);\n\n    const headers = await (auth as AuthInternal)._getAdditionalHeaders();\n    headers[HttpHeader.CONTENT_TYPE] = 'application/json';\n\n    if (auth.languageCode) {\n      headers[HttpHeader.X_FIREBASE_LOCALE] = auth.languageCode;\n    }\n\n    const fetchArgs: RequestInit = {\n      method,\n      headers,\n      ...body\n    };\n\n    /* Security-conscious server-side frameworks tend to have built in mitigations for referrer\n       problems\". See the Cloudflare GitHub issue #487: Error: The 'referrerPolicy' field on\n       'RequestInitializerDict' is not implemented.\"\n       https://github.com/cloudflare/next-on-pages/issues/487 */\n    if (!isCloudflareWorker()) {\n      fetchArgs.referrerPolicy = 'no-referrer';\n    }\n\n    if (auth.emulatorConfig && isCloudWorkstation(auth.emulatorConfig.host)) {\n      fetchArgs.credentials = 'include';\n    }\n\n    return FetchProvider.fetch()(\n      await _getFinalTarget(auth, auth.config.apiHost, path, query),\n      fetchArgs\n    );\n  });\n}\n\nexport async function _performFetchWithErrorHandling<V>(\n  auth: Auth,\n  customErrorMap: Partial<ServerErrorMap<ServerError>>,\n  fetchFn: () => Promise<Response>\n): Promise<V> {\n  (auth as AuthInternal)._canInitEmulator = false;\n  const errorMap = { ...SERVER_ERROR_MAP, ...customErrorMap };\n  try {\n    const networkTimeout = new NetworkTimeout<Response>(auth);\n    const response: Response = await Promise.race<Promise<Response>>([\n      fetchFn(),\n      networkTimeout.promise\n    ]);\n\n    // If we've reached this point, the fetch succeeded and the networkTimeout\n    // didn't throw; clear the network timeout delay so that Node won't hang\n    networkTimeout.clearNetworkTimeout();\n\n    const json = await response.json();\n    if ('needConfirmation' in json) {\n      throw _makeTaggedError(auth, AuthErrorCode.NEED_CONFIRMATION, json);\n    }\n\n    if (response.ok && !('errorMessage' in json)) {\n      return json;\n    } else {\n      const errorMessage = response.ok ? json.errorMessage : json.error.message;\n      const [serverErrorCode, serverErrorMessage] = errorMessage.split(' : ');\n      if (serverErrorCode === ServerError.FEDERATED_USER_ID_ALREADY_LINKED) {\n        throw _makeTaggedError(\n          auth,\n          AuthErrorCode.CREDENTIAL_ALREADY_IN_USE,\n          json\n        );\n      } else if (serverErrorCode === ServerError.EMAIL_EXISTS) {\n        throw _makeTaggedError(auth, AuthErrorCode.EMAIL_EXISTS, json);\n      } else if (serverErrorCode === ServerError.USER_DISABLED) {\n        throw _makeTaggedError(auth, AuthErrorCode.USER_DISABLED, json);\n      }\n      const authError =\n        errorMap[serverErrorCode as ServerError] ||\n        (serverErrorCode\n          .toLowerCase()\n          .replace(/[_\\s]+/g, '-') as unknown as AuthErrorCode);\n      if (serverErrorMessage) {\n        throw _errorWithCustomMessage(auth, authError, serverErrorMessage);\n      } else {\n        _fail(auth, authError);\n      }\n    }\n  } catch (e) {\n    if (e instanceof FirebaseError) {\n      throw e;\n    }\n    // Changing this to a different error code will log user out when there is a network error\n    // because we treat any error other than NETWORK_REQUEST_FAILED as token is invalid.\n    // https://github.com/firebase/firebase-js-sdk/blob/4fbc73610d70be4e0852e7de63a39cb7897e8546/packages/auth/src/core/auth/auth_impl.ts#L309-L316\n    _fail(auth, AuthErrorCode.NETWORK_REQUEST_FAILED, { 'message': String(e) });\n  }\n}\n\nexport async function _performSignInRequest<T, V extends IdTokenResponse>(\n  auth: Auth,\n  method: HttpMethod,\n  path: Endpoint,\n  request?: T,\n  customErrorMap: Partial<ServerErrorMap<ServerError>> = {}\n): Promise<V> {\n  const serverResponse = await _performApiRequest<T, V | IdTokenMfaResponse>(\n    auth,\n    method,\n    path,\n    request,\n    customErrorMap\n  );\n  if ('mfaPendingCredential' in serverResponse) {\n    _fail(auth, AuthErrorCode.MFA_REQUIRED, {\n      _serverResponse: serverResponse\n    });\n  }\n\n  return serverResponse as V;\n}\n\nexport async function _getFinalTarget(\n  auth: Auth,\n  host: string,\n  path: string,\n  query: string\n): Promise<string> {\n  const base = `${host}${path}?${query}`;\n\n  const authInternal = auth as AuthInternal;\n  const finalTarget = authInternal.config.emulator\n    ? _emulatorUrl(auth.config as ConfigInternal, base)\n    : `${auth.config.apiScheme}://${base}`;\n\n  // Cookie auth works by MiTMing the signIn and token endpoints from the developer's backend,\n  // saving the idToken and refreshToken into cookies, and then redacting the refreshToken\n  // from the response\n  if (CookieAuthProxiedEndpoints.includes(path)) {\n    // Persistence manager is async, we need to await it. We can't just wait for auth initialized\n    // here since auth initialization calls this function.\n    await authInternal._persistenceManagerAvailable;\n    if (authInternal._getPersistenceType() === PersistenceType.COOKIE) {\n      const cookiePersistence =\n        authInternal._getPersistence() as CookiePersistence;\n      return cookiePersistence._getFinalTarget(finalTarget).toString();\n    }\n  }\n\n  return finalTarget;\n}\n\nexport function _parseEnforcementState(\n  enforcementStateStr: string\n): EnforcementState {\n  switch (enforcementStateStr) {\n    case 'ENFORCE':\n      return EnforcementState.ENFORCE;\n    case 'AUDIT':\n      return EnforcementState.AUDIT;\n    case 'OFF':\n      return EnforcementState.OFF;\n    default:\n      return EnforcementState.ENFORCEMENT_STATE_UNSPECIFIED;\n  }\n}\n\nclass NetworkTimeout<T> {\n  // Node timers and browser timers are fundamentally incompatible, but we\n  // don't care about the value here\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  private timer: any | null = null;\n  readonly promise = new Promise<T>((_, reject) => {\n    this.timer = setTimeout(() => {\n      return reject(\n        _createError(this.auth, AuthErrorCode.NETWORK_REQUEST_FAILED)\n      );\n    }, DEFAULT_API_TIMEOUT_MS.get());\n  });\n\n  clearNetworkTimeout(): void {\n    clearTimeout(this.timer);\n  }\n\n  constructor(private readonly auth: Auth) {}\n}\n\ninterface PotentialResponse extends IdTokenResponse {\n  email?: string;\n  phoneNumber?: string;\n}\n\nexport function _makeTaggedError(\n  auth: Auth,\n  code: AuthErrorCode,\n  response: PotentialResponse\n): FirebaseError {\n  const errorParams: NamedErrorParams = {\n    appName: auth.name\n  };\n\n  if (response.email) {\n    errorParams.email = response.email;\n  }\n  if (response.phoneNumber) {\n    errorParams.phoneNumber = response.phoneNumber;\n  }\n\n  const error = _createError(auth, code, errorParams);\n\n  // We know customData is defined on error because errorParams is defined\n  (error.customData! as TaggedWithTokenResponse)._tokenResponse = response;\n  return error;\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { RecaptchaParameters } from '../../model/public_types';\nimport {\n  GetRecaptchaConfigResponse,\n  RecaptchaEnforcementProviderState\n} from '../../api/authentication/recaptcha';\nimport {\n  EnforcementState,\n  RecaptchaAuthProvider,\n  _parseEnforcementState\n} from '../../api/index';\n\n// reCAPTCHA v2 interface\nexport interface Recaptcha {\n  render: (container: HTMLElement, parameters: RecaptchaParameters) => number;\n  getResponse: (id: number) => string;\n  execute: (id: number) => unknown;\n  reset: (id: number) => unknown;\n}\n\nexport function isV2(\n  grecaptcha: Recaptcha | GreCAPTCHA | undefined\n): grecaptcha is Recaptcha {\n  return (\n    grecaptcha !== undefined &&\n    (grecaptcha as Recaptcha).getResponse !== undefined\n  );\n}\n\n// reCAPTCHA Enterprise & v3 shared interface\nexport interface GreCAPTCHATopLevel extends GreCAPTCHA {\n  enterprise: GreCAPTCHA;\n}\n\n// reCAPTCHA Enterprise interface\nexport interface GreCAPTCHA {\n  ready: (callback: () => void) => void;\n  execute: (siteKey: string, options: { action: string }) => Promise<string>;\n  render: (\n    container: string | HTMLElement,\n    parameters: GreCAPTCHARenderOption\n  ) => string;\n}\n\nexport interface GreCAPTCHARenderOption {\n  sitekey: string;\n  size: 'invisible';\n}\n\nexport function isEnterprise(\n  grecaptcha: Recaptcha | GreCAPTCHA | undefined\n): grecaptcha is GreCAPTCHATopLevel {\n  return (\n    grecaptcha !== undefined &&\n    (grecaptcha as GreCAPTCHATopLevel).enterprise !== undefined\n  );\n}\n\n// TODO(chuanr): Replace this with the AuthWindow after resolving the dependency issue in Node.js env.\ndeclare global {\n  interface Window {\n    grecaptcha?: Recaptcha | GreCAPTCHATopLevel;\n  }\n}\n\nexport class RecaptchaConfig {\n  /**\n   * The reCAPTCHA site key.\n   */\n  siteKey: string = '';\n\n  /**\n   * The list of providers and their enablement status for reCAPTCHA Enterprise.\n   */\n  recaptchaEnforcementState: RecaptchaEnforcementProviderState[] = [];\n\n  constructor(response: GetRecaptchaConfigResponse) {\n    if (response.recaptchaKey === undefined) {\n      throw new Error('recaptchaKey undefined');\n    }\n    // Example response.recaptchaKey: \"projects/proj123/keys/sitekey123\"\n    this.siteKey = response.recaptchaKey.split('/')[3];\n    this.recaptchaEnforcementState = response.recaptchaEnforcementState;\n  }\n\n  /**\n   * Returns the reCAPTCHA Enterprise enforcement state for the given provider.\n   *\n   * @param providerStr - The provider whose enforcement state is to be returned.\n   * @returns The reCAPTCHA Enterprise enforcement state for the given provider.\n   */\n  getProviderEnforcementState(providerStr: string): EnforcementState | null {\n    if (\n      !this.recaptchaEnforcementState ||\n      this.recaptchaEnforcementState.length === 0\n    ) {\n      return null;\n    }\n\n    for (const recaptchaEnforcementState of this.recaptchaEnforcementState) {\n      if (\n        recaptchaEnforcementState.provider &&\n        recaptchaEnforcementState.provider === providerStr\n      ) {\n        return _parseEnforcementState(\n          recaptchaEnforcementState.enforcementState\n        );\n      }\n    }\n    return null;\n  }\n\n  /**\n   * Returns true if the reCAPTCHA Enterprise enforcement state for the provider is set to ENFORCE or AUDIT.\n   *\n   * @param providerStr - The provider whose enablement state is to be returned.\n   * @returns Whether or not reCAPTCHA Enterprise protection is enabled for the given provider.\n   */\n  isProviderEnabled(providerStr: string): boolean {\n    return (\n      this.getProviderEnforcementState(providerStr) ===\n        EnforcementState.ENFORCE ||\n      this.getProviderEnforcementState(providerStr) === EnforcementState.AUDIT\n    );\n  }\n\n  /**\n   * Returns true if reCAPTCHA Enterprise protection is enabled in at least one provider, otherwise\n   * returns false.\n   *\n   * @returns Whether or not reCAPTCHA Enterprise protection is enabled for at least one provider.\n   */\n  isAnyProviderEnabled(): boolean {\n    return (\n      this.isProviderEnabled(RecaptchaAuthProvider.EMAIL_PASSWORD_PROVIDER) ||\n      this.isProviderEnabled(RecaptchaAuthProvider.PHONE_PROVIDER)\n    );\n  }\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  Endpoint,\n  HttpMethod,\n  RecaptchaClientType,\n  RecaptchaVersion,\n  _performApiRequest,\n  _addTidIfNecessary\n} from '../index';\nimport { Auth } from '../../model/public_types';\n\ninterface GetRecaptchaParamResponse {\n  recaptchaSiteKey?: string;\n}\n\nexport async function getRecaptchaParams(auth: Auth): Promise<string> {\n  return (\n    (\n      await _performApiRequest<void, GetRecaptchaParamResponse>(\n        auth,\n        HttpMethod.GET,\n        Endpoint.GET_RECAPTCHA_PARAM\n      )\n    ).recaptchaSiteKey || ''\n  );\n}\n\n// The following functions are for reCAPTCHA enterprise integration.\ninterface GetRecaptchaConfigRequest {\n  tenantId?: string;\n  clientType?: RecaptchaClientType;\n  version?: RecaptchaVersion;\n}\n\nexport interface RecaptchaEnforcementProviderState {\n  provider: string;\n  enforcementState: string;\n}\n\nexport interface GetRecaptchaConfigResponse {\n  recaptchaKey: string;\n  recaptchaEnforcementState: RecaptchaEnforcementProviderState[];\n}\n\nexport async function getRecaptchaConfig(\n  auth: Auth,\n  request: GetRecaptchaConfigRequest\n): Promise<GetRecaptchaConfigResponse> {\n  return _performApiRequest<\n    GetRecaptchaConfigRequest,\n    GetRecaptchaConfigResponse\n  >(\n    auth,\n    HttpMethod.GET,\n    Endpoint.GET_RECAPTCHA_CONFIG,\n    _addTidIfNecessary(auth, request)\n  );\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Endpoint, HttpMethod, _performApiRequest } from '../index';\nimport { MfaEnrollment } from './mfa';\nimport { Auth } from '../../model/public_types';\n\nexport interface DeleteAccountRequest {\n  idToken: string;\n}\n\nexport async function deleteAccount(\n  auth: Auth,\n  request: DeleteAccountRequest\n): Promise<void> {\n  return _performApiRequest<DeleteAccountRequest, void>(\n    auth,\n    HttpMethod.POST,\n    Endpoint.DELETE_ACCOUNT,\n    request\n  );\n}\n\nexport interface ProviderUserInfo {\n  providerId: string;\n  rawId?: string;\n  email?: string;\n  displayName?: string;\n  photoUrl?: string;\n  phoneNumber?: string;\n}\n\nexport interface DeleteLinkedAccountsRequest {\n  idToken: string;\n  deleteProvider: string[];\n}\n\nexport interface DeleteLinkedAccountsResponse {\n  providerUserInfo: ProviderUserInfo[];\n}\n\nexport async function deleteLinkedAccounts(\n  auth: Auth,\n  request: DeleteLinkedAccountsRequest\n): Promise<DeleteLinkedAccountsResponse> {\n  return _performApiRequest<\n    DeleteLinkedAccountsRequest,\n    DeleteLinkedAccountsResponse\n  >(auth, HttpMethod.POST, Endpoint.SET_ACCOUNT_INFO, request);\n}\n\nexport interface APIUserInfo {\n  localId?: string;\n  displayName?: string;\n  photoUrl?: string;\n  email?: string;\n  emailVerified?: boolean;\n  phoneNumber?: string;\n  lastLoginAt?: number;\n  createdAt?: number;\n  tenantId?: string;\n  passwordHash?: string;\n  providerUserInfo?: ProviderUserInfo[];\n  mfaInfo?: MfaEnrollment[];\n}\n\nexport interface GetAccountInfoRequest {\n  idToken: string;\n}\n\nexport interface GetAccountInfoResponse {\n  users: APIUserInfo[];\n}\n\nexport async function getAccountInfo(\n  auth: Auth,\n  request: GetAccountInfoRequest\n): Promise<GetAccountInfoResponse> {\n  return _performApiRequest<GetAccountInfoRequest, GetAccountInfoResponse>(\n    auth,\n    HttpMethod.POST,\n    Endpoint.GET_ACCOUNT_INFO,\n    request\n  );\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport function utcTimestampToDateString(\n  utcTimestamp?: string | number\n): string | undefined {\n  if (!utcTimestamp) {\n    return undefined;\n  }\n  try {\n    // Convert to date object.\n    const date = new Date(Number(utcTimestamp));\n    // Test date is valid.\n    if (!isNaN(date.getTime())) {\n      // Convert to UTC date string.\n      return date.toUTCString();\n    }\n  } catch (e) {\n    // Do nothing. undefined will be returned.\n  }\n  return undefined;\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { IdTokenResult, ParsedToken, User } from '../../model/public_types';\nimport { base64Decode, getModularInstance } from '@firebase/util';\n\nimport { UserInternal } from '../../model/user';\nimport { _assert } from '../util/assert';\nimport { _logError } from '../util/log';\nimport { utcTimestampToDateString } from '../util/time';\nimport { AuthErrorCode } from '../errors';\n\n/**\n * Returns a JSON Web Token (JWT) used to identify the user to a Firebase service.\n *\n * @remarks\n * Returns the current token if it has not expired or if it will not expire in the next five\n * minutes. Otherwise, this will refresh the token and return a new one.\n *\n * @param user - The user.\n * @param forceRefresh - Force refresh regardless of token expiration.\n *\n * @public\n */\nexport function getIdToken(user: User, forceRefresh = false): Promise<string> {\n  return getModularInstance(user).getIdToken(forceRefresh);\n}\n\n/**\n * Returns a deserialized JSON Web Token (JWT) used to identify the user to a Firebase service.\n *\n * @remarks\n * Returns the current token if it has not expired or if it will not expire in the next five\n * minutes. Otherwise, this will refresh the token and return a new one.\n *\n * @param user - The user.\n * @param forceRefresh - Force refresh regardless of token expiration.\n *\n * @public\n */\nexport async function getIdTokenResult(\n  user: User,\n  forceRefresh = false\n): Promise<IdTokenResult> {\n  const userInternal = getModularInstance(user) as UserInternal;\n  const token = await userInternal.getIdToken(forceRefresh);\n  const claims = _parseToken(token);\n\n  _assert(\n    claims && claims.exp && claims.auth_time && claims.iat,\n    userInternal.auth,\n    AuthErrorCode.INTERNAL_ERROR\n  );\n  const firebase =\n    typeof claims.firebase === 'object' ? claims.firebase : undefined;\n\n  const signInProvider: string | undefined = firebase?.['sign_in_provider'];\n\n  return {\n    claims,\n    token,\n    authTime: utcTimestampToDateString(\n      secondsStringToMilliseconds(claims.auth_time)\n    )!,\n    issuedAtTime: utcTimestampToDateString(\n      secondsStringToMilliseconds(claims.iat)\n    )!,\n    expirationTime: utcTimestampToDateString(\n      secondsStringToMilliseconds(claims.exp)\n    )!,\n    signInProvider: signInProvider || null,\n    signInSecondFactor: firebase?.['sign_in_second_factor'] || null\n  };\n}\n\nfunction secondsStringToMilliseconds(seconds: string): number {\n  return Number(seconds) * 1000;\n}\n\nexport function _parseToken(token: string): ParsedToken | null {\n  const [algorithm, payload, signature] = token.split('.');\n  if (\n    algorithm === undefined ||\n    payload === undefined ||\n    signature === undefined\n  ) {\n    _logError('JWT malformed, contained fewer than 3 sections');\n    return null;\n  }\n\n  try {\n    const decoded = base64Decode(payload);\n    if (!decoded) {\n      _logError('Failed to decode base64 JWT payload');\n      return null;\n    }\n    return JSON.parse(decoded);\n  } catch (e) {\n    _logError(\n      'Caught error parsing JWT payload as JSON',\n      (e as Error)?.toString()\n    );\n    return null;\n  }\n}\n\n/**\n * Extract expiresIn TTL from a token by subtracting the expiration from the issuance.\n */\nexport function _tokenExpiresIn(token: string): number {\n  const parsedToken = _parseToken(token);\n  _assert(parsedToken, AuthErrorCode.INTERNAL_ERROR);\n  _assert(typeof parsedToken.exp !== 'undefined', AuthErrorCode.INTERNAL_ERROR);\n  _assert(typeof parsedToken.iat !== 'undefined', AuthErrorCode.INTERNAL_ERROR);\n  return Number(parsedToken.exp) - Number(parsedToken.iat);\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { FirebaseError } from '@firebase/util';\n\nimport { UserInternal } from '../../model/user';\nimport { AuthErrorCode } from '../errors';\n\nexport async function _logoutIfInvalidated<T>(\n  user: UserInternal,\n  promise: Promise<T>,\n  bypassAuthState = false\n): Promise<T> {\n  if (bypassAuthState) {\n    return promise;\n  }\n  try {\n    return await promise;\n  } catch (e) {\n    if (e instanceof FirebaseError && isUserInvalidated(e)) {\n      if (user.auth.currentUser === user) {\n        await user.auth.signOut();\n      }\n    }\n\n    throw e;\n  }\n}\n\nfunction isUserInvalidated({ code }: FirebaseError): boolean {\n  return (\n    code === `auth/${AuthErrorCode.USER_DISABLED}` ||\n    code === `auth/${AuthErrorCode.TOKEN_EXPIRED}`\n  );\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { FirebaseError } from '@firebase/util';\nimport { UserInternal } from '../../model/user';\nimport { AuthErrorCode } from '../errors';\n\n// Refresh the token five minutes before expiration\nexport const enum Duration {\n  OFFSET = 5 * 1000 * 60,\n  RETRY_BACKOFF_MIN = 30 * 1000,\n  RETRY_BACKOFF_MAX = 16 * 60 * 1000\n}\n\nexport class ProactiveRefresh {\n  private isRunning = false;\n\n  // Node timers and browser timers return fundamentally different types.\n  // We don't actually care what the value is but TS won't accept unknown and\n  // we can't cast properly in both environments.\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  private timerId: any | null = null;\n  private errorBackoff = Duration.RETRY_BACKOFF_MIN;\n\n  constructor(private readonly user: UserInternal) {}\n\n  _start(): void {\n    if (this.isRunning) {\n      return;\n    }\n\n    this.isRunning = true;\n    this.schedule();\n  }\n\n  _stop(): void {\n    if (!this.isRunning) {\n      return;\n    }\n\n    this.isRunning = false;\n    if (this.timerId !== null) {\n      clearTimeout(this.timerId);\n    }\n  }\n\n  private getInterval(wasError: boolean): number {\n    if (wasError) {\n      const interval = this.errorBackoff;\n      this.errorBackoff = Math.min(\n        this.errorBackoff * 2,\n        Duration.RETRY_BACKOFF_MAX\n      );\n      return interval;\n    } else {\n      // Reset the error backoff\n      this.errorBackoff = Duration.RETRY_BACKOFF_MIN;\n      const expTime = this.user.stsTokenManager.expirationTime ?? 0;\n      const interval = expTime - Date.now() - Duration.OFFSET;\n\n      return Math.max(0, interval);\n    }\n  }\n\n  private schedule(wasError = false): void {\n    if (!this.isRunning) {\n      // Just in case...\n      return;\n    }\n\n    const interval = this.getInterval(wasError);\n    this.timerId = setTimeout(async () => {\n      await this.iteration();\n    }, interval);\n  }\n\n  private async iteration(): Promise<void> {\n    try {\n      await this.user.getIdToken(true);\n    } catch (e) {\n      // Only retry on network errors\n      if (\n        (e as FirebaseError)?.code ===\n        `auth/${AuthErrorCode.NETWORK_REQUEST_FAILED}`\n      ) {\n        this.schedule(/* wasError */ true);\n      }\n\n      return;\n    }\n    this.schedule();\n  }\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { UserMetadata as UserMetadataType } from '../../model/public_types';\n\nimport { utcTimestampToDateString } from '../util/time';\n\nexport class UserMetadata implements UserMetadataType {\n  creationTime?: string;\n  lastSignInTime?: string;\n\n  constructor(\n    private createdAt?: string | number,\n    private lastLoginAt?: string | number\n  ) {\n    this._initializeTime();\n  }\n\n  private _initializeTime(): void {\n    this.lastSignInTime = utcTimestampToDateString(this.lastLoginAt);\n    this.creationTime = utcTimestampToDateString(this.createdAt);\n  }\n\n  _copy(metadata: UserMetadata): void {\n    this.createdAt = metadata.createdAt;\n    this.lastLoginAt = metadata.lastLoginAt;\n    this._initializeTime();\n  }\n\n  toJSON(): object {\n    return {\n      createdAt: this.createdAt,\n      lastLoginAt: this.lastLoginAt\n    };\n  }\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { User, UserInfo } from '../../model/public_types';\n\nimport {\n  getAccountInfo,\n  ProviderUserInfo\n} from '../../api/account_management/account';\nimport { UserInternal } from '../../model/user';\nimport { AuthErrorCode } from '../errors';\nimport { _assert } from '../util/assert';\nimport { _logoutIfInvalidated } from './invalidation';\nimport { UserMetadata } from './user_metadata';\nimport { getModularInstance } from '@firebase/util';\n\nexport async function _reloadWithoutSaving(user: UserInternal): Promise<void> {\n  const auth = user.auth;\n  const idToken = await user.getIdToken();\n  const response = await _logoutIfInvalidated(\n    user,\n    getAccountInfo(auth, { idToken })\n  );\n\n  _assert(response?.users.length, auth, AuthErrorCode.INTERNAL_ERROR);\n\n  const coreAccount = response.users[0];\n\n  user._notifyReloadListener(coreAccount);\n\n  const newProviderData = coreAccount.providerUserInfo?.length\n    ? extractProviderData(coreAccount.providerUserInfo)\n    : [];\n\n  const providerData = mergeProviderData(user.providerData, newProviderData);\n\n  // Preserves the non-nonymous status of the stored user, even if no more\n  // credentials (federated or email/password) are linked to the user. If\n  // the user was previously anonymous, then use provider data to update.\n  // On the other hand, if it was not anonymous before, it should never be\n  // considered anonymous now.\n  const oldIsAnonymous = user.isAnonymous;\n  const newIsAnonymous =\n    !(user.email && coreAccount.passwordHash) && !providerData?.length;\n  const isAnonymous = !oldIsAnonymous ? false : newIsAnonymous;\n\n  const updates: Partial<UserInternal> = {\n    uid: coreAccount.localId,\n    displayName: coreAccount.displayName || null,\n    photoURL: coreAccount.photoUrl || null,\n    email: coreAccount.email || null,\n    emailVerified: coreAccount.emailVerified || false,\n    phoneNumber: coreAccount.phoneNumber || null,\n    tenantId: coreAccount.tenantId || null,\n    providerData,\n    metadata: new UserMetadata(coreAccount.createdAt, coreAccount.lastLoginAt),\n    isAnonymous\n  };\n\n  Object.assign(user, updates);\n}\n\n/**\n * Reloads user account data, if signed in.\n *\n * @param user - The user.\n *\n * @public\n */\nexport async function reload(user: User): Promise<void> {\n  const userInternal: UserInternal = getModularInstance(user) as UserInternal;\n  await _reloadWithoutSaving(userInternal);\n\n  // Even though the current user hasn't changed, update\n  // current user will trigger a persistence update w/ the\n  // new info.\n  await userInternal.auth._persistUserIfCurrent(userInternal);\n  userInternal.auth._notifyListenersIfCurrent(userInternal);\n}\n\nfunction mergeProviderData(\n  original: UserInfo[],\n  newData: UserInfo[]\n): UserInfo[] {\n  const deduped = original.filter(\n    o => !newData.some(n => n.providerId === o.providerId)\n  );\n  return [...deduped, ...newData];\n}\n\nexport function extractProviderData(providers: ProviderUserInfo[]): UserInfo[] {\n  return providers.map(({ providerId, ...provider }) => {\n    return {\n      providerId,\n      uid: provider.rawId || '',\n      displayName: provider.displayName || null,\n      email: provider.email || null,\n      phoneNumber: provider.phoneNumber || null,\n      photoURL: provider.photoUrl || null\n    };\n  });\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { FinalizeMfaResponse } from '../../api/authentication/mfa';\nimport { requestStsToken } from '../../api/authentication/token';\nimport { AuthInternal } from '../../model/auth';\nimport { IdTokenResponse } from '../../model/id_token';\nimport { AuthErrorCode } from '../errors';\nimport { PersistedBlob } from '../persistence';\nimport { _assert, debugFail } from '../util/assert';\nimport { _tokenExpiresIn } from './id_token_result';\n\n/**\n * The number of milliseconds before the official expiration time of a token\n * to refresh that token, to provide a buffer for RPCs to complete.\n */\nexport const enum Buffer {\n  TOKEN_REFRESH = 30_000\n}\n\n/**\n * We need to mark this class as internal explicitly to exclude it in the public typings, because\n * it references AuthInternal which has a circular dependency with UserInternal.\n *\n * @internal\n */\nexport class StsTokenManager {\n  refreshToken: string | null = null;\n  accessToken: string | null = null;\n  expirationTime: number | null = null;\n\n  get isExpired(): boolean {\n    return (\n      !this.expirationTime ||\n      Date.now() > this.expirationTime - Buffer.TOKEN_REFRESH\n    );\n  }\n\n  updateFromServerResponse(\n    response: IdTokenResponse | FinalizeMfaResponse\n  ): void {\n    _assert(response.idToken, AuthErrorCode.INTERNAL_ERROR);\n    _assert(\n      typeof response.idToken !== 'undefined',\n      AuthErrorCode.INTERNAL_ERROR\n    );\n    _assert(\n      typeof response.refreshToken !== 'undefined',\n      AuthErrorCode.INTERNAL_ERROR\n    );\n    const expiresIn =\n      'expiresIn' in response && typeof response.expiresIn !== 'undefined'\n        ? Number(response.expiresIn)\n        : _tokenExpiresIn(response.idToken);\n    this.updateTokensAndExpiration(\n      response.idToken,\n      response.refreshToken,\n      expiresIn\n    );\n  }\n\n  updateFromIdToken(idToken: string): void {\n    _assert(idToken.length !== 0, AuthErrorCode.INTERNAL_ERROR);\n    const expiresIn = _tokenExpiresIn(idToken);\n    this.updateTokensAndExpiration(idToken, null, expiresIn);\n  }\n\n  async getToken(\n    auth: AuthInternal,\n    forceRefresh = false\n  ): Promise<string | null> {\n    if (!forceRefresh && this.accessToken && !this.isExpired) {\n      return this.accessToken;\n    }\n\n    _assert(this.refreshToken, auth, AuthErrorCode.TOKEN_EXPIRED);\n\n    if (this.refreshToken) {\n      await this.refresh(auth, this.refreshToken!);\n      return this.accessToken;\n    }\n\n    return null;\n  }\n\n  clearRefreshToken(): void {\n    this.refreshToken = null;\n  }\n\n  private async refresh(auth: AuthInternal, oldToken: string): Promise<void> {\n    const { accessToken, refreshToken, expiresIn } = await requestStsToken(\n      auth,\n      oldToken\n    );\n    this.updateTokensAndExpiration(\n      accessToken,\n      refreshToken,\n      Number(expiresIn)\n    );\n  }\n\n  private updateTokensAndExpiration(\n    accessToken: string,\n    refreshToken: string | null,\n    expiresInSec: number\n  ): void {\n    this.refreshToken = refreshToken || null;\n    this.accessToken = accessToken || null;\n    this.expirationTime = Date.now() + expiresInSec * 1000;\n  }\n\n  static fromJSON(appName: string, object: PersistedBlob): StsTokenManager {\n    const { refreshToken, accessToken, expirationTime } = object;\n\n    const manager = new StsTokenManager();\n    if (refreshToken) {\n      _assert(typeof refreshToken === 'string', AuthErrorCode.INTERNAL_ERROR, {\n        appName\n      });\n      manager.refreshToken = refreshToken;\n    }\n    if (accessToken) {\n      _assert(typeof accessToken === 'string', AuthErrorCode.INTERNAL_ERROR, {\n        appName\n      });\n      manager.accessToken = accessToken;\n    }\n    if (expirationTime) {\n      _assert(\n        typeof expirationTime === 'number',\n        AuthErrorCode.INTERNAL_ERROR,\n        {\n          appName\n        }\n      );\n      manager.expirationTime = expirationTime;\n    }\n    return manager;\n  }\n\n  toJSON(): object {\n    return {\n      refreshToken: this.refreshToken,\n      accessToken: this.accessToken,\n      expirationTime: this.expirationTime\n    };\n  }\n\n  _assign(stsTokenManager: StsTokenManager): void {\n    this.accessToken = stsTokenManager.accessToken;\n    this.refreshToken = stsTokenManager.refreshToken;\n    this.expirationTime = stsTokenManager.expirationTime;\n  }\n\n  _clone(): StsTokenManager {\n    return Object.assign(new StsTokenManager(), this.toJSON());\n  }\n\n  _performRefresh(): never {\n    return debugFail('not implemented');\n  }\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/* eslint-disable camelcase */\n\nimport { isCloudWorkstation, querystring } from '@firebase/util';\n\nimport {\n  _getFinalTarget,\n  _performFetchWithErrorHandling,\n  _performApiRequest,\n  _addTidIfNecessary,\n  HttpMethod,\n  HttpHeader,\n  Endpoint\n} from '../index';\nimport { FetchProvider } from '../../core/util/fetch_provider';\nimport { Auth } from '../../model/public_types';\nimport { AuthInternal } from '../../model/auth';\n\nexport const enum TokenType {\n  REFRESH_TOKEN = 'REFRESH_TOKEN',\n  ACCESS_TOKEN = 'ACCESS_TOKEN'\n}\n\n/** The server responses with snake_case; we convert to camelCase */\ninterface RequestStsTokenServerResponse {\n  access_token: string;\n  expires_in: string;\n  refresh_token: string;\n}\n\nexport interface RequestStsTokenResponse {\n  accessToken: string;\n  expiresIn: string;\n  refreshToken: string;\n}\n\nexport interface RevokeTokenRequest {\n  providerId: string;\n  tokenType: TokenType;\n  token: string;\n  idToken: string;\n  tenantId?: string;\n}\n\nexport interface RevokeTokenResponse {}\n\nexport async function requestStsToken(\n  auth: Auth,\n  refreshToken: string\n): Promise<RequestStsTokenResponse> {\n  const response =\n    await _performFetchWithErrorHandling<RequestStsTokenServerResponse>(\n      auth,\n      {},\n      async () => {\n        const body = querystring({\n          'grant_type': 'refresh_token',\n          'refresh_token': refreshToken\n        }).slice(1);\n        const { tokenApiHost, apiKey } = auth.config;\n        const url = await _getFinalTarget(\n          auth,\n          tokenApiHost,\n          Endpoint.TOKEN,\n          `key=${apiKey}`\n        );\n\n        const headers = await (auth as AuthInternal)._getAdditionalHeaders();\n        headers[HttpHeader.CONTENT_TYPE] = 'application/x-www-form-urlencoded';\n\n        const options: RequestInit = {\n          method: HttpMethod.POST,\n          headers,\n          body\n        };\n        if (\n          auth.emulatorConfig &&\n          isCloudWorkstation(auth.emulatorConfig.host)\n        ) {\n          options.credentials = 'include';\n        }\n        return FetchProvider.fetch()(url, options);\n      }\n    );\n\n  // The response comes back in snake_case. Convert to camel:\n  return {\n    accessToken: response.access_token,\n    expiresIn: response.expires_in,\n    refreshToken: response.refresh_token\n  };\n}\n\nexport async function revokeToken(\n  auth: Auth,\n  request: RevokeTokenRequest\n): Promise<RevokeTokenResponse> {\n  return _performApiRequest<RevokeTokenRequest, RevokeTokenResponse>(\n    auth,\n    HttpMethod.POST,\n    Endpoint.REVOKE_TOKEN,\n    _addTidIfNecessary(auth, request)\n  );\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { IdTokenResult, UserInfo } from '../../model/public_types';\nimport { NextFn } from '@firebase/util';\nimport {\n  APIUserInfo,\n  GetAccountInfoResponse,\n  deleteAccount\n} from '../../api/account_management/account';\nimport { FinalizeMfaResponse } from '../../api/authentication/mfa';\nimport { AuthInternal } from '../../model/auth';\nimport { IdTokenResponse } from '../../model/id_token';\nimport {\n  MutableUserInfo,\n  UserInternal,\n  UserParameters\n} from '../../model/user';\nimport { AuthErrorCode } from '../errors';\nimport { PersistedBlob } from '../persistence';\nimport {\n  _assert,\n  _serverAppCurrentUserOperationNotSupportedError\n} from '../util/assert';\nimport { getIdTokenResult } from './id_token_result';\nimport { _logoutIfInvalidated } from './invalidation';\nimport { ProactiveRefresh } from './proactive_refresh';\nimport { extractProviderData, _reloadWithoutSaving, reload } from './reload';\nimport { StsTokenManager } from './token_manager';\nimport { UserMetadata } from './user_metadata';\nimport { ProviderId } from '../../model/enums';\nimport { _isFirebaseServerApp } from '@firebase/app';\n\nfunction assertStringOrUndefined(\n  assertion: unknown,\n  appName: string\n): asserts assertion is string | undefined {\n  _assert(\n    typeof assertion === 'string' || typeof assertion === 'undefined',\n    AuthErrorCode.INTERNAL_ERROR,\n    { appName }\n  );\n}\n\nexport class UserImpl implements UserInternal {\n  // For the user object, provider is always Firebase.\n  readonly providerId = ProviderId.FIREBASE;\n  stsTokenManager: StsTokenManager;\n  // Last known accessToken so we know when it changes\n  private accessToken: string | null;\n\n  uid: string;\n  auth: AuthInternal;\n  emailVerified: boolean;\n  isAnonymous: boolean;\n  tenantId: string | null;\n  readonly metadata: UserMetadata;\n  providerData: MutableUserInfo[];\n\n  // Optional fields from UserInfo\n  displayName: string | null;\n  email: string | null;\n  phoneNumber: string | null;\n  photoURL: string | null;\n\n  _redirectEventId?: string;\n  private readonly proactiveRefresh = new ProactiveRefresh(this);\n\n  constructor({ uid, auth, stsTokenManager, ...opt }: UserParameters) {\n    this.uid = uid;\n    this.auth = auth;\n    this.stsTokenManager = stsTokenManager;\n    this.accessToken = stsTokenManager.accessToken;\n    this.displayName = opt.displayName || null;\n    this.email = opt.email || null;\n    this.emailVerified = opt.emailVerified || false;\n    this.phoneNumber = opt.phoneNumber || null;\n    this.photoURL = opt.photoURL || null;\n    this.isAnonymous = opt.isAnonymous || false;\n    this.tenantId = opt.tenantId || null;\n    this.providerData = opt.providerData ? [...opt.providerData] : [];\n    this.metadata = new UserMetadata(\n      opt.createdAt || undefined,\n      opt.lastLoginAt || undefined\n    );\n  }\n\n  async getIdToken(forceRefresh?: boolean): Promise<string> {\n    const accessToken = await _logoutIfInvalidated(\n      this,\n      this.stsTokenManager.getToken(this.auth, forceRefresh)\n    );\n    _assert(accessToken, this.auth, AuthErrorCode.INTERNAL_ERROR);\n\n    if (this.accessToken !== accessToken) {\n      this.accessToken = accessToken;\n      await this.auth._persistUserIfCurrent(this);\n      this.auth._notifyListenersIfCurrent(this);\n    }\n\n    return accessToken;\n  }\n\n  getIdTokenResult(forceRefresh?: boolean): Promise<IdTokenResult> {\n    return getIdTokenResult(this, forceRefresh);\n  }\n\n  reload(): Promise<void> {\n    return reload(this);\n  }\n\n  private reloadUserInfo: APIUserInfo | null = null;\n  private reloadListener: NextFn<APIUserInfo> | null = null;\n\n  _assign(user: UserInternal): void {\n    if (this === user) {\n      return;\n    }\n    _assert(this.uid === user.uid, this.auth, AuthErrorCode.INTERNAL_ERROR);\n    this.displayName = user.displayName;\n    this.photoURL = user.photoURL;\n    this.email = user.email;\n    this.emailVerified = user.emailVerified;\n    this.phoneNumber = user.phoneNumber;\n    this.isAnonymous = user.isAnonymous;\n    this.tenantId = user.tenantId;\n    this.providerData = user.providerData.map(userInfo => ({ ...userInfo }));\n    this.metadata._copy(user.metadata);\n    this.stsTokenManager._assign(user.stsTokenManager);\n  }\n\n  _clone(auth: AuthInternal): UserInternal {\n    const newUser = new UserImpl({\n      ...this,\n      auth,\n      stsTokenManager: this.stsTokenManager._clone()\n    });\n    newUser.metadata._copy(this.metadata);\n    return newUser;\n  }\n\n  _onReload(callback: NextFn<APIUserInfo>): void {\n    // There should only ever be one listener, and that is a single instance of MultiFactorUser\n    _assert(!this.reloadListener, this.auth, AuthErrorCode.INTERNAL_ERROR);\n    this.reloadListener = callback;\n    if (this.reloadUserInfo) {\n      this._notifyReloadListener(this.reloadUserInfo);\n      this.reloadUserInfo = null;\n    }\n  }\n\n  _notifyReloadListener(userInfo: APIUserInfo): void {\n    if (this.reloadListener) {\n      this.reloadListener(userInfo);\n    } else {\n      // If no listener is subscribed yet, save the result so it's available when they do subscribe\n      this.reloadUserInfo = userInfo;\n    }\n  }\n\n  _startProactiveRefresh(): void {\n    this.proactiveRefresh._start();\n  }\n\n  _stopProactiveRefresh(): void {\n    this.proactiveRefresh._stop();\n  }\n\n  async _updateTokensIfNecessary(\n    response: IdTokenResponse | FinalizeMfaResponse,\n    reload = false\n  ): Promise<void> {\n    let tokensRefreshed = false;\n    if (\n      response.idToken &&\n      response.idToken !== this.stsTokenManager.accessToken\n    ) {\n      this.stsTokenManager.updateFromServerResponse(response);\n      tokensRefreshed = true;\n    }\n\n    if (reload) {\n      await _reloadWithoutSaving(this);\n    }\n\n    await this.auth._persistUserIfCurrent(this);\n    if (tokensRefreshed) {\n      this.auth._notifyListenersIfCurrent(this);\n    }\n  }\n\n  async delete(): Promise<void> {\n    if (_isFirebaseServerApp(this.auth.app)) {\n      return Promise.reject(\n        _serverAppCurrentUserOperationNotSupportedError(this.auth)\n      );\n    }\n    const idToken = await this.getIdToken();\n    await _logoutIfInvalidated(this, deleteAccount(this.auth, { idToken }));\n    this.stsTokenManager.clearRefreshToken();\n\n    // TODO: Determine if cancellable-promises are necessary to use in this class so that delete()\n    //       cancels pending actions...\n\n    return this.auth.signOut();\n  }\n\n  toJSON(): PersistedBlob {\n    return {\n      uid: this.uid,\n      email: this.email || undefined,\n      emailVerified: this.emailVerified,\n      displayName: this.displayName || undefined,\n      isAnonymous: this.isAnonymous,\n      photoURL: this.photoURL || undefined,\n      phoneNumber: this.phoneNumber || undefined,\n      tenantId: this.tenantId || undefined,\n      providerData: this.providerData.map(userInfo => ({ ...userInfo })),\n      stsTokenManager: this.stsTokenManager.toJSON(),\n      // Redirect event ID must be maintained in case there is a pending\n      // redirect event.\n      _redirectEventId: this._redirectEventId,\n      ...this.metadata.toJSON(),\n\n      // Required for compatibility with the legacy SDK (go/firebase-auth-sdk-persistence-parsing):\n      apiKey: this.auth.config.apiKey,\n      appName: this.auth.name\n      // Missing authDomain will be tolerated by the legacy SDK.\n      // stsTokenManager.apiKey isn't actually required (despite the legacy SDK persisting it).\n    };\n  }\n\n  get refreshToken(): string {\n    return this.stsTokenManager.refreshToken || '';\n  }\n\n  static _fromJSON(auth: AuthInternal, object: PersistedBlob): UserInternal {\n    const displayName = object.displayName ?? undefined;\n    const email = object.email ?? undefined;\n    const phoneNumber = object.phoneNumber ?? undefined;\n    const photoURL = object.photoURL ?? undefined;\n    const tenantId = object.tenantId ?? undefined;\n    const _redirectEventId = object._redirectEventId ?? undefined;\n    const createdAt = object.createdAt ?? undefined;\n    const lastLoginAt = object.lastLoginAt ?? undefined;\n    const {\n      uid,\n      emailVerified,\n      isAnonymous,\n      providerData,\n      stsTokenManager: plainObjectTokenManager\n    } = object;\n\n    _assert(uid && plainObjectTokenManager, auth, AuthErrorCode.INTERNAL_ERROR);\n\n    const stsTokenManager = StsTokenManager.fromJSON(\n      this.name,\n      plainObjectTokenManager as PersistedBlob\n    );\n\n    _assert(typeof uid === 'string', auth, AuthErrorCode.INTERNAL_ERROR);\n    assertStringOrUndefined(displayName, auth.name);\n    assertStringOrUndefined(email, auth.name);\n    _assert(\n      typeof emailVerified === 'boolean',\n      auth,\n      AuthErrorCode.INTERNAL_ERROR\n    );\n    _assert(\n      typeof isAnonymous === 'boolean',\n      auth,\n      AuthErrorCode.INTERNAL_ERROR\n    );\n    assertStringOrUndefined(phoneNumber, auth.name);\n    assertStringOrUndefined(photoURL, auth.name);\n    assertStringOrUndefined(tenantId, auth.name);\n    assertStringOrUndefined(_redirectEventId, auth.name);\n    assertStringOrUndefined(createdAt, auth.name);\n    assertStringOrUndefined(lastLoginAt, auth.name);\n    const user = new UserImpl({\n      uid,\n      auth,\n      email,\n      emailVerified,\n      displayName,\n      isAnonymous,\n      photoURL,\n      phoneNumber,\n      tenantId,\n      stsTokenManager,\n      createdAt,\n      lastLoginAt\n    });\n\n    if (providerData && Array.isArray(providerData)) {\n      user.providerData = providerData.map(userInfo => ({ ...userInfo }));\n    }\n\n    if (_redirectEventId) {\n      user._redirectEventId = _redirectEventId;\n    }\n\n    return user;\n  }\n\n  /**\n   * Initialize a User from an idToken server response\n   * @param auth\n   * @param idTokenResponse\n   */\n  static async _fromIdTokenResponse(\n    auth: AuthInternal,\n    idTokenResponse: IdTokenResponse,\n    isAnonymous: boolean = false\n  ): Promise<UserInternal> {\n    const stsTokenManager = new StsTokenManager();\n    stsTokenManager.updateFromServerResponse(idTokenResponse);\n\n    // Initialize the Firebase Auth user.\n    const user = new UserImpl({\n      uid: idTokenResponse.localId,\n      auth,\n      stsTokenManager,\n      isAnonymous\n    });\n\n    // Updates the user info and data and resolves with a user instance.\n    await _reloadWithoutSaving(user);\n    return user;\n  }\n\n  /**\n   * Initialize a User from an idToken server response\n   * @param auth\n   * @param idTokenResponse\n   */\n  static async _fromGetAccountInfoResponse(\n    auth: AuthInternal,\n    response: GetAccountInfoResponse,\n    idToken: string\n  ): Promise<UserInternal> {\n    const coreAccount = response.users[0];\n    _assert(coreAccount.localId !== undefined, AuthErrorCode.INTERNAL_ERROR);\n\n    const providerData: UserInfo[] =\n      coreAccount.providerUserInfo !== undefined\n        ? extractProviderData(coreAccount.providerUserInfo)\n        : [];\n\n    const isAnonymous =\n      !(coreAccount.email && coreAccount.passwordHash) && !providerData?.length;\n\n    const stsTokenManager = new StsTokenManager();\n    stsTokenManager.updateFromIdToken(idToken);\n\n    // Initialize the Firebase Auth user.\n    const user = new UserImpl({\n      uid: coreAccount.localId,\n      auth,\n      stsTokenManager,\n      isAnonymous\n    });\n\n    // update the user with data from the GetAccountInfo response.\n    const updates: Partial<UserInternal> = {\n      uid: coreAccount.localId,\n      displayName: coreAccount.displayName || null,\n      photoURL: coreAccount.photoUrl || null,\n      email: coreAccount.email || null,\n      emailVerified: coreAccount.emailVerified || false,\n      phoneNumber: coreAccount.phoneNumber || null,\n      tenantId: coreAccount.tenantId || null,\n      providerData,\n      metadata: new UserMetadata(\n        coreAccount.createdAt,\n        coreAccount.lastLoginAt\n      ),\n      isAnonymous:\n        !(coreAccount.email && coreAccount.passwordHash) &&\n        !providerData?.length\n    };\n\n    Object.assign(user, updates);\n    return user;\n  }\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { debugAssert } from './assert';\n\n/**\n * Our API has a lot of one-off constants that are used to do things.\n * Unfortunately we can't export these as classes instantiated directly since\n * the constructor may side effect and therefore can't be proven to be safely\n * culled. Instead, we export these classes themselves as a lowerCamelCase\n * constant, and instantiate them under the hood.\n */\nexport interface SingletonInstantiator<T> {\n  new (): T;\n}\n\nconst instanceCache: Map<unknown, unknown> = new Map();\n\nexport function _getInstance<T>(cls: unknown): T {\n  debugAssert(cls instanceof Function, 'Expected a class definition');\n  let instance = instanceCache.get(cls) as T | undefined;\n\n  if (instance) {\n    debugAssert(\n      instance instanceof cls,\n      'Instance stored in cache mismatched with class'\n    );\n    return instance;\n  }\n\n  instance = new (cls as SingletonInstantiator<T>)();\n  instanceCache.set(cls, instance);\n  return instance;\n}\n\nexport function _clearInstanceMap(): void {\n  instanceCache.clear();\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Persistence } from '../../model/public_types';\n\nimport {\n  PersistenceInternal,\n  PersistenceType,\n  PersistenceValue,\n  StorageEventListener\n} from '../persistence';\n\nexport class InMemoryPersistence implements PersistenceInternal {\n  static type: 'NONE' = 'NONE';\n  readonly type = PersistenceType.NONE;\n  storage: Record<string, PersistenceValue> = {};\n\n  async _isAvailable(): Promise<boolean> {\n    return true;\n  }\n\n  async _set(key: string, value: PersistenceValue): Promise<void> {\n    this.storage[key] = value;\n  }\n\n  async _get<T extends PersistenceValue>(key: string): Promise<T | null> {\n    const value = this.storage[key];\n    return value === undefined ? null : (value as T);\n  }\n\n  async _remove(key: string): Promise<void> {\n    delete this.storage[key];\n  }\n\n  _addListener(_key: string, _listener: StorageEventListener): void {\n    // Listeners are not supported for in-memory storage since it cannot be shared across windows/workers\n    return;\n  }\n\n  _removeListener(_key: string, _listener: StorageEventListener): void {\n    // Listeners are not supported for in-memory storage since it cannot be shared across windows/workers\n    return;\n  }\n}\n\n/**\n * An implementation of {@link Persistence} of type 'NONE'.\n *\n * @public\n */\nexport const inMemoryPersistence: Persistence = InMemoryPersistence;\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { getAccountInfo } from '../../api/account_management/account';\nimport { ApiKey, AppName, AuthInternal } from '../../model/auth';\nimport { UserInternal } from '../../model/user';\nimport { PersistedBlob, PersistenceInternal } from '../persistence';\nimport { UserImpl } from '../user/user_impl';\nimport { _getInstance } from '../util/instantiator';\nimport { inMemoryPersistence } from './in_memory';\n\nexport const enum KeyName {\n  AUTH_USER = 'authUser',\n  AUTH_EVENT = 'authEvent',\n  REDIRECT_USER = 'redirectUser',\n  PERSISTENCE_USER = 'persistence'\n}\nexport const enum Namespace {\n  PERSISTENCE = 'firebase'\n}\n\nexport function _persistenceKeyName(\n  key: string,\n  apiKey: ApiKey,\n  appName: AppName\n): string {\n  return `${Namespace.PERSISTENCE}:${key}:${apiKey}:${appName}`;\n}\n\nexport class PersistenceUserManager {\n  private readonly fullUserKey: string;\n  private readonly fullPersistenceKey: string;\n  private readonly boundEventHandler: () => void;\n\n  private constructor(\n    public persistence: PersistenceInternal,\n    private readonly auth: AuthInternal,\n    private readonly userKey: string\n  ) {\n    const { config, name } = this.auth;\n    this.fullUserKey = _persistenceKeyName(this.userKey, config.apiKey, name);\n    this.fullPersistenceKey = _persistenceKeyName(\n      KeyName.PERSISTENCE_USER,\n      config.apiKey,\n      name\n    );\n    this.boundEventHandler = auth._onStorageEvent.bind(auth);\n    this.persistence._addListener(this.fullUserKey, this.boundEventHandler);\n  }\n\n  setCurrentUser(user: UserInternal): Promise<void> {\n    return this.persistence._set(this.fullUserKey, user.toJSON());\n  }\n\n  async getCurrentUser(): Promise<UserInternal | null> {\n    const blob = await this.persistence._get<PersistedBlob | string>(\n      this.fullUserKey\n    );\n    if (!blob) {\n      return null;\n    }\n    if (typeof blob === 'string') {\n      const response = await getAccountInfo(this.auth, { idToken: blob }).catch(\n        () => undefined\n      );\n      if (!response) {\n        return null;\n      }\n      return UserImpl._fromGetAccountInfoResponse(this.auth, response, blob);\n    }\n    return UserImpl._fromJSON(this.auth, blob);\n  }\n\n  removeCurrentUser(): Promise<void> {\n    return this.persistence._remove(this.fullUserKey);\n  }\n\n  savePersistenceForRedirect(): Promise<void> {\n    return this.persistence._set(\n      this.fullPersistenceKey,\n      this.persistence.type\n    );\n  }\n\n  async setPersistence(newPersistence: PersistenceInternal): Promise<void> {\n    if (this.persistence === newPersistence) {\n      return;\n    }\n\n    const currentUser = await this.getCurrentUser();\n    await this.removeCurrentUser();\n\n    this.persistence = newPersistence;\n\n    if (currentUser) {\n      return this.setCurrentUser(currentUser);\n    }\n  }\n\n  delete(): void {\n    this.persistence._removeListener(this.fullUserKey, this.boundEventHandler);\n  }\n\n  static async create(\n    auth: AuthInternal,\n    persistenceHierarchy: PersistenceInternal[],\n    userKey = KeyName.AUTH_USER\n  ): Promise<PersistenceUserManager> {\n    if (!persistenceHierarchy.length) {\n      return new PersistenceUserManager(\n        _getInstance(inMemoryPersistence),\n        auth,\n        userKey\n      );\n    }\n\n    // Eliminate any persistences that are not available\n    const availablePersistences = (\n      await Promise.all(\n        persistenceHierarchy.map(async persistence => {\n          if (await persistence._isAvailable()) {\n            return persistence;\n          }\n          return undefined;\n        })\n      )\n    ).filter(persistence => persistence) as PersistenceInternal[];\n\n    // Fall back to the first persistence listed, or in memory if none available\n    let selectedPersistence =\n      availablePersistences[0] ||\n      _getInstance<PersistenceInternal>(inMemoryPersistence);\n\n    const key = _persistenceKeyName(userKey, auth.config.apiKey, auth.name);\n\n    // Pull out the existing user, setting the chosen persistence to that\n    // persistence if the user exists.\n    let userToMigrate: UserInternal | null = null;\n    // Note, here we check for a user in _all_ persistences, not just the\n    // ones deemed available. If we can migrate a user out of a broken\n    // persistence, we will (but only if that persistence supports migration).\n    for (const persistence of persistenceHierarchy) {\n      try {\n        const blob = await persistence._get<PersistedBlob | string>(key);\n        if (blob) {\n          let user: UserInternal;\n          if (typeof blob === 'string') {\n            const response = await getAccountInfo(auth, {\n              idToken: blob\n            }).catch(() => undefined);\n            if (!response) {\n              break;\n            }\n            user = await UserImpl._fromGetAccountInfoResponse(\n              auth,\n              response,\n              blob\n            );\n          } else {\n            user = UserImpl._fromJSON(auth, blob); // throws for unparsable blob (wrong format)\n          }\n          if (persistence !== selectedPersistence) {\n            userToMigrate = user;\n          }\n          selectedPersistence = persistence;\n          break;\n        }\n      } catch {}\n    }\n\n    // If we find the user in a persistence that does support migration, use\n    // that migration path (of only persistences that support migration)\n    const migrationHierarchy = availablePersistences.filter(\n      p => p._shouldAllowMigration\n    );\n\n    // If the persistence does _not_ allow migration, just finish off here\n    if (\n      !selectedPersistence._shouldAllowMigration ||\n      !migrationHierarchy.length\n    ) {\n      return new PersistenceUserManager(selectedPersistence, auth, userKey);\n    }\n\n    selectedPersistence = migrationHierarchy[0];\n    if (userToMigrate) {\n      // This normally shouldn't throw since chosenPersistence.isAvailable() is true, but if it does\n      // we'll just let it bubble to surface the error.\n      await selectedPersistence._set(key, userToMigrate.toJSON());\n    }\n\n    // Attempt to clear the key in other persistences but ignore errors. This helps prevent issues\n    // such as users getting stuck with a previous account after signing out and refreshing the tab.\n    await Promise.all(\n      persistenceHierarchy.map(async persistence => {\n        if (persistence !== selectedPersistence) {\n          try {\n            await persistence._remove(key);\n          } catch {}\n        }\n      })\n    );\n    return new PersistenceUserManager(selectedPersistence, auth, userKey);\n  }\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { isIE, getUA } from '@firebase/util';\n\ninterface NavigatorStandalone extends Navigator {\n  standalone?: unknown;\n}\n\ninterface Document {\n  documentMode?: number;\n}\n\n/**\n * Enums for Browser name.\n */\nexport const enum BrowserName {\n  ANDROID = 'Android',\n  BLACKBERRY = 'Blackberry',\n  EDGE = 'Edge',\n  FIREFOX = 'Firefox',\n  IE = 'IE',\n  IEMOBILE = 'IEMobile',\n  OPERA = 'Opera',\n  OTHER = 'Other',\n  CHROME = 'Chrome',\n  SAFARI = 'Safari',\n  SILK = 'Silk',\n  WEBOS = 'Webos'\n}\n\n/**\n * Determine the browser for the purposes of reporting usage to the API\n */\nexport function _getBrowserName(userAgent: string): BrowserName | string {\n  const ua = userAgent.toLowerCase();\n  if (ua.includes('opera/') || ua.includes('opr/') || ua.includes('opios/')) {\n    return BrowserName.OPERA;\n  } else if (_isIEMobile(ua)) {\n    // Windows phone IEMobile browser.\n    return BrowserName.IEMOBILE;\n  } else if (ua.includes('msie') || ua.includes('trident/')) {\n    return BrowserName.IE;\n  } else if (ua.includes('edge/')) {\n    return BrowserName.EDGE;\n  } else if (_isFirefox(ua)) {\n    return BrowserName.FIREFOX;\n  } else if (ua.includes('silk/')) {\n    return BrowserName.SILK;\n  } else if (_isBlackBerry(ua)) {\n    // Blackberry browser.\n    return BrowserName.BLACKBERRY;\n  } else if (_isWebOS(ua)) {\n    // WebOS default browser.\n    return BrowserName.WEBOS;\n  } else if (_isSafari(ua)) {\n    return BrowserName.SAFARI;\n  } else if (\n    (ua.includes('chrome/') || _isChromeIOS(ua)) &&\n    !ua.includes('edge/')\n  ) {\n    return BrowserName.CHROME;\n  } else if (_isAndroid(ua)) {\n    // Android stock browser.\n    return BrowserName.ANDROID;\n  } else {\n    // Most modern browsers have name/version at end of user agent string.\n    const re = /([a-zA-Z\\d\\.]+)\\/[a-zA-Z\\d\\.]*$/;\n    const matches = userAgent.match(re);\n    if (matches?.length === 2) {\n      return matches[1];\n    }\n  }\n  return BrowserName.OTHER;\n}\n\nexport function _isFirefox(ua = getUA()): boolean {\n  return /firefox\\//i.test(ua);\n}\n\nexport function _isSafari(userAgent = getUA()): boolean {\n  const ua = userAgent.toLowerCase();\n  return (\n    ua.includes('safari/') &&\n    !ua.includes('chrome/') &&\n    !ua.includes('crios/') &&\n    !ua.includes('android')\n  );\n}\n\nexport function _isChromeIOS(ua = getUA()): boolean {\n  return /crios\\//i.test(ua);\n}\n\nexport function _isIEMobile(ua = getUA()): boolean {\n  return /iemobile/i.test(ua);\n}\n\nexport function _isAndroid(ua = getUA()): boolean {\n  return /android/i.test(ua);\n}\n\nexport function _isBlackBerry(ua = getUA()): boolean {\n  return /blackberry/i.test(ua);\n}\n\nexport function _isWebOS(ua = getUA()): boolean {\n  return /webos/i.test(ua);\n}\n\nexport function _isIOS(ua = getUA()): boolean {\n  return (\n    /iphone|ipad|ipod/i.test(ua) ||\n    (/macintosh/i.test(ua) && /mobile/i.test(ua))\n  );\n}\n\nexport function _isIOS7Or8(ua = getUA()): boolean {\n  return (\n    /(iPad|iPhone|iPod).*OS 7_\\d/i.test(ua) ||\n    /(iPad|iPhone|iPod).*OS 8_\\d/i.test(ua)\n  );\n}\n\nexport function _isIOSStandalone(ua = getUA()): boolean {\n  return _isIOS(ua) && !!(window.navigator as NavigatorStandalone)?.standalone;\n}\n\nexport function _isIE10(): boolean {\n  return isIE() && (document as Document).documentMode === 10;\n}\n\nexport function _isMobileBrowser(ua: string = getUA()): boolean {\n  // TODO: implement getBrowserName equivalent for OS.\n  return (\n    _isIOS(ua) ||\n    _isAndroid(ua) ||\n    _isWebOS(ua) ||\n    _isBlackBerry(ua) ||\n    /windows phone/i.test(ua) ||\n    _isIEMobile(ua)\n  );\n}\n\nexport function _isIframe(): boolean {\n  try {\n    // Check that the current window is not the top window.\n    // If so, return true.\n    return !!(window && window !== window.top);\n  } catch (e) {\n    return false;\n  }\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { SDK_VERSION } from '@firebase/app';\nimport { _getBrowserName } from './browser';\nimport { getUA } from '@firebase/util';\n\nexport const enum ClientImplementation {\n  CORE = 'JsCore'\n}\n\n/**\n * @internal\n */\nexport const enum ClientPlatform {\n  BROWSER = 'Browser',\n  NODE = 'Node',\n  REACT_NATIVE = 'ReactNative',\n  CORDOVA = 'Cordova',\n  WORKER = 'Worker',\n  WEB_EXTENSION = 'WebExtension'\n}\n\n/*\n * Determine the SDK version string\n */\nexport function _getClientVersion(\n  clientPlatform: ClientPlatform,\n  frameworks: readonly string[] = []\n): string {\n  let reportedPlatform: string;\n  switch (clientPlatform) {\n    case ClientPlatform.BROWSER:\n      // In a browser environment, report the browser name.\n      reportedPlatform = _getBrowserName(getUA());\n      break;\n    case ClientPlatform.WORKER:\n      // Technically a worker runs from a browser but we need to differentiate a\n      // worker from a browser.\n      // For example: Chrome-Worker/JsCore/4.9.1/FirebaseCore-web.\n      reportedPlatform = `${_getBrowserName(getUA())}-${clientPlatform}`;\n      break;\n    default:\n      reportedPlatform = clientPlatform;\n  }\n  const reportedFrameworks = frameworks.length\n    ? frameworks.join(',')\n    : 'FirebaseCore-web'; /* default value if no other framework is used */\n  return `${reportedPlatform}/${ClientImplementation.CORE}/${SDK_VERSION}/${reportedFrameworks}`;\n}\n","/**\n * @license\n * Copyright 2022 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { AuthInternal } from '../../model/auth';\nimport { Unsubscribe, User } from '../../model/public_types';\nimport { AuthErrorCode } from '../errors';\n\ninterface MiddlewareEntry {\n  (user: User | null): Promise<void>;\n  onAbort?: () => void;\n}\n\nexport class AuthMiddlewareQueue {\n  private readonly queue: MiddlewareEntry[] = [];\n\n  constructor(private readonly auth: AuthInternal) {}\n\n  pushCallback(\n    callback: (user: User | null) => void | Promise<void>,\n    onAbort?: () => void\n  ): Unsubscribe {\n    // The callback could be sync or async. Wrap it into a\n    // function that is always async.\n    const wrappedCallback: MiddlewareEntry = (\n      user: User | null\n    ): Promise<void> =>\n      new Promise((resolve, reject) => {\n        try {\n          const result = callback(user);\n          // Either resolve with existing promise or wrap a non-promise\n          // return value into a promise.\n          resolve(result);\n        } catch (e) {\n          // Sync callback throws.\n          reject(e);\n        }\n      });\n    // Attach the onAbort if present\n    wrappedCallback.onAbort = onAbort;\n    this.queue.push(wrappedCallback);\n\n    const index = this.queue.length - 1;\n    return () => {\n      // Unsubscribe. Replace with no-op. Do not remove from array, or it will disturb\n      // indexing of other elements.\n      this.queue[index] = () => Promise.resolve();\n    };\n  }\n\n  async runMiddleware(nextUser: User | null): Promise<void> {\n    if (this.auth.currentUser === nextUser) {\n      return;\n    }\n\n    // While running the middleware, build a temporary stack of onAbort\n    // callbacks to call if one middleware callback rejects.\n\n    const onAbortStack: Array<() => void> = [];\n    try {\n      for (const beforeStateCallback of this.queue) {\n        await beforeStateCallback(nextUser);\n\n        // Only push the onAbort if the callback succeeds\n        if (beforeStateCallback.onAbort) {\n          onAbortStack.push(beforeStateCallback.onAbort);\n        }\n      }\n    } catch (e) {\n      // Run all onAbort, with separate try/catch to ignore any errors and\n      // continue\n      onAbortStack.reverse();\n      for (const onAbort of onAbortStack) {\n        try {\n          onAbort();\n        } catch (_) {\n          /* swallow error */\n        }\n      }\n\n      throw this.auth._errorFactory.create(AuthErrorCode.LOGIN_BLOCKED, {\n        originalMessage: (e as Error)?.message\n      });\n    }\n  }\n}\n","/**\n * @license\n * Copyright 2023 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { GetPasswordPolicyResponse } from '../../api/password_policy/get_password_policy';\nimport {\n  PasswordPolicyCustomStrengthOptions,\n  PasswordPolicyInternal,\n  PasswordValidationStatusInternal\n} from '../../model/password_policy';\nimport { PasswordValidationStatus } from '../../model/public_types';\n\n// Minimum min password length enforced by the backend, even if no minimum length is set.\nconst MINIMUM_MIN_PASSWORD_LENGTH = 6;\n\n/**\n * Stores password policy requirements and provides password validation against the policy.\n *\n * @internal\n */\nexport class PasswordPolicyImpl implements PasswordPolicyInternal {\n  readonly customStrengthOptions: PasswordPolicyCustomStrengthOptions;\n  readonly allowedNonAlphanumericCharacters: string;\n  readonly enforcementState: string;\n  readonly forceUpgradeOnSignin: boolean;\n  readonly schemaVersion: number;\n\n  constructor(response: GetPasswordPolicyResponse) {\n    // Only include custom strength options defined in the response.\n    const responseOptions = response.customStrengthOptions;\n    this.customStrengthOptions = {};\n    // TODO: Remove once the backend is updated to include the minimum min password length instead of undefined when there is no minimum length set.\n    this.customStrengthOptions.minPasswordLength =\n      responseOptions.minPasswordLength ?? MINIMUM_MIN_PASSWORD_LENGTH;\n    if (responseOptions.maxPasswordLength) {\n      this.customStrengthOptions.maxPasswordLength =\n        responseOptions.maxPasswordLength;\n    }\n    if (responseOptions.containsLowercaseCharacter !== undefined) {\n      this.customStrengthOptions.containsLowercaseLetter =\n        responseOptions.containsLowercaseCharacter;\n    }\n    if (responseOptions.containsUppercaseCharacter !== undefined) {\n      this.customStrengthOptions.containsUppercaseLetter =\n        responseOptions.containsUppercaseCharacter;\n    }\n    if (responseOptions.containsNumericCharacter !== undefined) {\n      this.customStrengthOptions.containsNumericCharacter =\n        responseOptions.containsNumericCharacter;\n    }\n    if (responseOptions.containsNonAlphanumericCharacter !== undefined) {\n      this.customStrengthOptions.containsNonAlphanumericCharacter =\n        responseOptions.containsNonAlphanumericCharacter;\n    }\n\n    this.enforcementState = response.enforcementState;\n    if (this.enforcementState === 'ENFORCEMENT_STATE_UNSPECIFIED') {\n      this.enforcementState = 'OFF';\n    }\n\n    // Use an empty string if no non-alphanumeric characters are specified in the response.\n    this.allowedNonAlphanumericCharacters =\n      response.allowedNonAlphanumericCharacters?.join('') ?? '';\n\n    this.forceUpgradeOnSignin = response.forceUpgradeOnSignin ?? false;\n    this.schemaVersion = response.schemaVersion;\n  }\n\n  validatePassword(password: string): PasswordValidationStatus {\n    const status: PasswordValidationStatusInternal = {\n      isValid: true,\n      passwordPolicy: this\n    };\n\n    // Check the password length and character options.\n    this.validatePasswordLengthOptions(password, status);\n    this.validatePasswordCharacterOptions(password, status);\n\n    // Combine the status into single isValid property.\n    status.isValid &&= status.meetsMinPasswordLength ?? true;\n    status.isValid &&= status.meetsMaxPasswordLength ?? true;\n    status.isValid &&= status.containsLowercaseLetter ?? true;\n    status.isValid &&= status.containsUppercaseLetter ?? true;\n    status.isValid &&= status.containsNumericCharacter ?? true;\n    status.isValid &&= status.containsNonAlphanumericCharacter ?? true;\n\n    return status;\n  }\n\n  /**\n   * Validates that the password meets the length options for the policy.\n   *\n   * @param password Password to validate.\n   * @param status Validation status.\n   */\n  private validatePasswordLengthOptions(\n    password: string,\n    status: PasswordValidationStatusInternal\n  ): void {\n    const minPasswordLength = this.customStrengthOptions.minPasswordLength;\n    const maxPasswordLength = this.customStrengthOptions.maxPasswordLength;\n    if (minPasswordLength) {\n      status.meetsMinPasswordLength = password.length >= minPasswordLength;\n    }\n    if (maxPasswordLength) {\n      status.meetsMaxPasswordLength = password.length <= maxPasswordLength;\n    }\n  }\n\n  /**\n   * Validates that the password meets the character options for the policy.\n   *\n   * @param password Password to validate.\n   * @param status Validation status.\n   */\n  private validatePasswordCharacterOptions(\n    password: string,\n    status: PasswordValidationStatusInternal\n  ): void {\n    // Assign statuses for requirements even if the password is an empty string.\n    this.updatePasswordCharacterOptionsStatuses(\n      status,\n      /* containsLowercaseCharacter= */ false,\n      /* containsUppercaseCharacter= */ false,\n      /* containsNumericCharacter= */ false,\n      /* containsNonAlphanumericCharacter= */ false\n    );\n\n    let passwordChar;\n    for (let i = 0; i < password.length; i++) {\n      passwordChar = password.charAt(i);\n      this.updatePasswordCharacterOptionsStatuses(\n        status,\n        /* containsLowercaseCharacter= */ passwordChar >= 'a' &&\n          passwordChar <= 'z',\n        /* containsUppercaseCharacter= */ passwordChar >= 'A' &&\n          passwordChar <= 'Z',\n        /* containsNumericCharacter= */ passwordChar >= '0' &&\n          passwordChar <= '9',\n        /* containsNonAlphanumericCharacter= */ this.allowedNonAlphanumericCharacters.includes(\n          passwordChar\n        )\n      );\n    }\n  }\n\n  /**\n   * Updates the running validation status with the statuses for the character options.\n   * Expected to be called each time a character is processed to update each option status\n   * based on the current character.\n   *\n   * @param status Validation status.\n   * @param containsLowercaseCharacter Whether the character is a lowercase letter.\n   * @param containsUppercaseCharacter Whether the character is an uppercase letter.\n   * @param containsNumericCharacter Whether the character is a numeric character.\n   * @param containsNonAlphanumericCharacter Whether the character is a non-alphanumeric character.\n   */\n  private updatePasswordCharacterOptionsStatuses(\n    status: PasswordValidationStatusInternal,\n    containsLowercaseCharacter: boolean,\n    containsUppercaseCharacter: boolean,\n    containsNumericCharacter: boolean,\n    containsNonAlphanumericCharacter: boolean\n  ): void {\n    if (this.customStrengthOptions.containsLowercaseLetter) {\n      status.containsLowercaseLetter ||= containsLowercaseCharacter;\n    }\n    if (this.customStrengthOptions.containsUppercaseLetter) {\n      status.containsUppercaseLetter ||= containsUppercaseCharacter;\n    }\n    if (this.customStrengthOptions.containsNumericCharacter) {\n      status.containsNumericCharacter ||= containsNumericCharacter;\n    }\n    if (this.customStrengthOptions.containsNonAlphanumericCharacter) {\n      status.containsNonAlphanumericCharacter ||=\n        containsNonAlphanumericCharacter;\n    }\n  }\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  _isFirebaseServerApp,\n  _FirebaseService,\n  FirebaseApp\n} from '@firebase/app';\nimport { Provider } from '@firebase/component';\nimport { AppCheckInternalComponentName } from '@firebase/app-check-interop-types';\nimport {\n  Auth,\n  AuthErrorMap,\n  AuthSettings,\n  EmulatorConfig,\n  NextOrObserver,\n  Persistence,\n  PopupRedirectResolver,\n  User,\n  UserCredential,\n  CompleteFn,\n  ErrorFn,\n  NextFn,\n  Unsubscribe,\n  PasswordValidationStatus\n} from '../../model/public_types';\nimport {\n  createSubscribe,\n  ErrorFactory,\n  FirebaseError,\n  getModularInstance,\n  Observer,\n  Subscribe\n} from '@firebase/util';\n\nimport { AuthInternal, ConfigInternal } from '../../model/auth';\nimport { PopupRedirectResolverInternal } from '../../model/popup_redirect';\nimport { UserInternal } from '../../model/user';\nimport {\n  AuthErrorCode,\n  AuthErrorParams,\n  ErrorMapRetriever,\n  _DEFAULT_AUTH_ERROR_FACTORY\n} from '../errors';\nimport { PersistenceInternal } from '../persistence';\nimport {\n  KeyName,\n  PersistenceUserManager\n} from '../persistence/persistence_user_manager';\nimport { _reloadWithoutSaving } from '../user/reload';\nimport {\n  _assert,\n  _serverAppCurrentUserOperationNotSupportedError\n} from '../util/assert';\nimport { _getInstance } from '../util/instantiator';\nimport { _getUserLanguage } from '../util/navigator';\nimport { _getClientVersion } from '../util/version';\nimport { HttpHeader } from '../../api';\nimport {\n  RevokeTokenRequest,\n  TokenType,\n  revokeToken\n} from '../../api/authentication/token';\nimport { AuthMiddlewareQueue } from './middleware';\nimport { RecaptchaConfig } from '../../platform_browser/recaptcha/recaptcha';\nimport { _logWarn } from '../util/log';\nimport { _getPasswordPolicy } from '../../api/password_policy/get_password_policy';\nimport { PasswordPolicyInternal } from '../../model/password_policy';\nimport { PasswordPolicyImpl } from './password_policy_impl';\nimport { getAccountInfo } from '../../api/account_management/account';\nimport { UserImpl } from '../user/user_impl';\n\ninterface AsyncAction {\n  (): Promise<void>;\n}\n\nexport const enum DefaultConfig {\n  TOKEN_API_HOST = 'securetoken.googleapis.com',\n  API_HOST = 'identitytoolkit.googleapis.com',\n  API_SCHEME = 'https'\n}\n\nexport class AuthImpl implements AuthInternal, _FirebaseService {\n  currentUser: User | null = null;\n  emulatorConfig: EmulatorConfig | null = null;\n  private operations = Promise.resolve();\n  private persistenceManager?: PersistenceUserManager;\n  private redirectPersistenceManager?: PersistenceUserManager;\n  private authStateSubscription = new Subscription<User>(this);\n  private idTokenSubscription = new Subscription<User>(this);\n  private readonly beforeStateQueue = new AuthMiddlewareQueue(this);\n  private redirectUser: UserInternal | null = null;\n  private isProactiveRefreshEnabled = false;\n  private readonly EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION: number = 1;\n\n  // Any network calls will set this to true and prevent subsequent emulator\n  // initialization\n  _canInitEmulator = true;\n  _isInitialized = false;\n  _deleted = false;\n  _initializationPromise: Promise<void> | null = null;\n  _popupRedirectResolver: PopupRedirectResolverInternal | null = null;\n  _errorFactory: ErrorFactory<AuthErrorCode, AuthErrorParams> =\n    _DEFAULT_AUTH_ERROR_FACTORY;\n  _agentRecaptchaConfig: RecaptchaConfig | null = null;\n  _tenantRecaptchaConfigs: Record<string, RecaptchaConfig> = {};\n  _projectPasswordPolicy: PasswordPolicyInternal | null = null;\n  _tenantPasswordPolicies: Record<string, PasswordPolicyInternal> = {};\n  _resolvePersistenceManagerAvailable:\n    | ((value: void | PromiseLike<void>) => void)\n    | undefined = undefined;\n  _persistenceManagerAvailable: Promise<void>;\n  readonly name: string;\n\n  // Tracks the last notified UID for state change listeners to prevent\n  // repeated calls to the callbacks. Undefined means it's never been\n  // called, whereas null means it's been called with a signed out user\n  private lastNotifiedUid: string | null | undefined = undefined;\n\n  languageCode: string | null = null;\n  tenantId: string | null = null;\n  settings: AuthSettings = { appVerificationDisabledForTesting: false };\n\n  constructor(\n    public readonly app: FirebaseApp,\n    private readonly heartbeatServiceProvider: Provider<'heartbeat'>,\n    private readonly appCheckServiceProvider: Provider<AppCheckInternalComponentName>,\n    public readonly config: ConfigInternal\n  ) {\n    this.name = app.name;\n    this.clientVersion = config.sdkClientVersion;\n    // TODO(jamesdaniels) explore less hacky way to do this, cookie authentication needs\n    // persistenceMananger to be available. see _getFinalTarget for more context\n    this._persistenceManagerAvailable = new Promise<void>(\n      resolve => (this._resolvePersistenceManagerAvailable = resolve)\n    );\n  }\n\n  _initializeWithPersistence(\n    persistenceHierarchy: PersistenceInternal[],\n    popupRedirectResolver?: PopupRedirectResolver\n  ): Promise<void> {\n    if (popupRedirectResolver) {\n      this._popupRedirectResolver = _getInstance(popupRedirectResolver);\n    }\n\n    // Have to check for app deletion throughout initialization (after each\n    // promise resolution)\n    this._initializationPromise = this.queue(async () => {\n      if (this._deleted) {\n        return;\n      }\n\n      this.persistenceManager = await PersistenceUserManager.create(\n        this,\n        persistenceHierarchy\n      );\n      this._resolvePersistenceManagerAvailable?.();\n\n      if (this._deleted) {\n        return;\n      }\n\n      // Initialize the resolver early if necessary (only applicable to web:\n      // this will cause the iframe to load immediately in certain cases)\n      if (this._popupRedirectResolver?._shouldInitProactively) {\n        // If this fails, don't halt auth loading\n        try {\n          await this._popupRedirectResolver._initialize(this);\n        } catch (e) {\n          /* Ignore the error */\n        }\n      }\n\n      await this.initializeCurrentUser(popupRedirectResolver);\n\n      this.lastNotifiedUid = this.currentUser?.uid || null;\n\n      if (this._deleted) {\n        return;\n      }\n\n      this._isInitialized = true;\n    });\n\n    return this._initializationPromise;\n  }\n\n  /**\n   * If the persistence is changed in another window, the user manager will let us know\n   */\n  async _onStorageEvent(): Promise<void> {\n    if (this._deleted) {\n      return;\n    }\n\n    const user = await this.assertedPersistence.getCurrentUser();\n\n    if (!this.currentUser && !user) {\n      // No change, do nothing (was signed out and remained signed out).\n      return;\n    }\n\n    // If the same user is to be synchronized.\n    if (this.currentUser && user && this.currentUser.uid === user.uid) {\n      // Data update, simply copy data changes.\n      this._currentUser._assign(user);\n      // If tokens changed from previous user tokens, this will trigger\n      // notifyAuthListeners_.\n      await this.currentUser.getIdToken();\n      return;\n    }\n\n    // Update current Auth state. Either a new login or logout.\n    // Skip blocking callbacks, they should not apply to a change in another tab.\n    await this._updateCurrentUser(user, /* skipBeforeStateCallbacks */ true);\n  }\n\n  private async initializeCurrentUserFromIdToken(\n    idToken: string\n  ): Promise<void> {\n    try {\n      const response = await getAccountInfo(this, { idToken });\n      const user = await UserImpl._fromGetAccountInfoResponse(\n        this,\n        response,\n        idToken\n      );\n      await this.directlySetCurrentUser(user);\n    } catch (err) {\n      console.warn(\n        'FirebaseServerApp could not login user with provided authIdToken: ',\n        err\n      );\n      await this.directlySetCurrentUser(null);\n    }\n  }\n\n  private async initializeCurrentUser(\n    popupRedirectResolver?: PopupRedirectResolver\n  ): Promise<void> {\n    if (_isFirebaseServerApp(this.app)) {\n      const idToken = this.app.settings.authIdToken;\n      if (idToken) {\n        // Start the auth operation in the next tick to allow a moment for the customer's app to\n        // attach an emulator, if desired.\n        return new Promise<void>(resolve => {\n          setTimeout(() =>\n            this.initializeCurrentUserFromIdToken(idToken).then(\n              resolve,\n              resolve\n            )\n          );\n        });\n      } else {\n        return this.directlySetCurrentUser(null);\n      }\n    }\n\n    // First check to see if we have a pending redirect event.\n    const previouslyStoredUser =\n      (await this.assertedPersistence.getCurrentUser()) as UserInternal | null;\n    let futureCurrentUser = previouslyStoredUser;\n    let needsTocheckMiddleware = false;\n    if (popupRedirectResolver && this.config.authDomain) {\n      await this.getOrInitRedirectPersistenceManager();\n      const redirectUserEventId = this.redirectUser?._redirectEventId;\n      const storedUserEventId = futureCurrentUser?._redirectEventId;\n      const result = await this.tryRedirectSignIn(popupRedirectResolver);\n\n      // If the stored user (i.e. the old \"currentUser\") has a redirectId that\n      // matches the redirect user, then we want to initially sign in with the\n      // new user object from result.\n      // TODO(samgho): More thoroughly test all of this\n      if (\n        (!redirectUserEventId || redirectUserEventId === storedUserEventId) &&\n        result?.user\n      ) {\n        futureCurrentUser = result.user as UserInternal;\n        needsTocheckMiddleware = true;\n      }\n    }\n\n    // If no user in persistence, there is no current user. Set to null.\n    if (!futureCurrentUser) {\n      return this.directlySetCurrentUser(null);\n    }\n\n    if (!futureCurrentUser._redirectEventId) {\n      // This isn't a redirect link operation, we can reload and bail.\n      // First though, ensure that we check the middleware is happy.\n      if (needsTocheckMiddleware) {\n        try {\n          await this.beforeStateQueue.runMiddleware(futureCurrentUser);\n        } catch (e) {\n          futureCurrentUser = previouslyStoredUser;\n          // We know this is available since the bit is only set when the\n          // resolver is available\n          this._popupRedirectResolver!._overrideRedirectResult(this, () =>\n            Promise.reject(e)\n          );\n        }\n      }\n\n      if (futureCurrentUser) {\n        return this.reloadAndSetCurrentUserOrClear(futureCurrentUser);\n      } else {\n        return this.directlySetCurrentUser(null);\n      }\n    }\n\n    _assert(this._popupRedirectResolver, this, AuthErrorCode.ARGUMENT_ERROR);\n    await this.getOrInitRedirectPersistenceManager();\n\n    // If the redirect user's event ID matches the current user's event ID,\n    // DO NOT reload the current user, otherwise they'll be cleared from storage.\n    // This is important for the reauthenticateWithRedirect() flow.\n    if (\n      this.redirectUser &&\n      this.redirectUser._redirectEventId === futureCurrentUser._redirectEventId\n    ) {\n      return this.directlySetCurrentUser(futureCurrentUser);\n    }\n\n    return this.reloadAndSetCurrentUserOrClear(futureCurrentUser);\n  }\n\n  private async tryRedirectSignIn(\n    redirectResolver: PopupRedirectResolver\n  ): Promise<UserCredential | null> {\n    // The redirect user needs to be checked (and signed in if available)\n    // during auth initialization. All of the normal sign in and link/reauth\n    // flows call back into auth and push things onto the promise queue. We\n    // need to await the result of the redirect sign in *inside the promise\n    // queue*. This presents a problem: we run into deadlock. See:\n    //    ┌> [Initialization] ─────┐\n    //    ┌> [<other queue tasks>] │\n    //    └─ [getRedirectResult] <─┘\n    //    where [] are tasks on the queue and arrows denote awaits\n    // Initialization will never complete because it's waiting on something\n    // that's waiting for initialization to complete!\n    //\n    // Instead, this method calls getRedirectResult() (stored in\n    // _completeRedirectFn) with an optional parameter that instructs all of\n    // the underlying auth operations to skip anything that mutates auth state.\n\n    let result: UserCredential | null = null;\n    try {\n      // We know this._popupRedirectResolver is set since redirectResolver\n      // is passed in. The _completeRedirectFn expects the unwrapped extern.\n      result = await this._popupRedirectResolver!._completeRedirectFn(\n        this,\n        redirectResolver,\n        true\n      );\n    } catch (e) {\n      // Swallow any errors here; the code can retrieve them in\n      // getRedirectResult().\n      await this._setRedirectUser(null);\n    }\n\n    return result;\n  }\n\n  private async reloadAndSetCurrentUserOrClear(\n    user: UserInternal\n  ): Promise<void> {\n    try {\n      await _reloadWithoutSaving(user);\n    } catch (e) {\n      if (\n        (e as FirebaseError)?.code !==\n        `auth/${AuthErrorCode.NETWORK_REQUEST_FAILED}`\n      ) {\n        // Something's wrong with the user's token. Log them out and remove\n        // them from storage\n        return this.directlySetCurrentUser(null);\n      }\n    }\n\n    return this.directlySetCurrentUser(user);\n  }\n\n  useDeviceLanguage(): void {\n    this.languageCode = _getUserLanguage();\n  }\n\n  async _delete(): Promise<void> {\n    this._deleted = true;\n  }\n\n  async updateCurrentUser(userExtern: User | null): Promise<void> {\n    if (_isFirebaseServerApp(this.app)) {\n      return Promise.reject(\n        _serverAppCurrentUserOperationNotSupportedError(this)\n      );\n    }\n    // The public updateCurrentUser method needs to make a copy of the user,\n    // and also check that the project matches\n    const user = userExtern\n      ? (getModularInstance(userExtern) as UserInternal)\n      : null;\n    if (user) {\n      _assert(\n        user.auth.config.apiKey === this.config.apiKey,\n        this,\n        AuthErrorCode.INVALID_AUTH\n      );\n    }\n    return this._updateCurrentUser(user && user._clone(this));\n  }\n\n  async _updateCurrentUser(\n    user: User | null,\n    skipBeforeStateCallbacks: boolean = false\n  ): Promise<void> {\n    if (this._deleted) {\n      return;\n    }\n    if (user) {\n      _assert(\n        this.tenantId === user.tenantId,\n        this,\n        AuthErrorCode.TENANT_ID_MISMATCH\n      );\n    }\n\n    if (!skipBeforeStateCallbacks) {\n      await this.beforeStateQueue.runMiddleware(user);\n    }\n\n    return this.queue(async () => {\n      await this.directlySetCurrentUser(user as UserInternal | null);\n      this.notifyAuthListeners();\n    });\n  }\n\n  async signOut(): Promise<void> {\n    if (_isFirebaseServerApp(this.app)) {\n      return Promise.reject(\n        _serverAppCurrentUserOperationNotSupportedError(this)\n      );\n    }\n    // Run first, to block _setRedirectUser() if any callbacks fail.\n    await this.beforeStateQueue.runMiddleware(null);\n    // Clear the redirect user when signOut is called\n    if (this.redirectPersistenceManager || this._popupRedirectResolver) {\n      await this._setRedirectUser(null);\n    }\n\n    // Prevent callbacks from being called again in _updateCurrentUser, as\n    // they were already called in the first line.\n    return this._updateCurrentUser(null, /* skipBeforeStateCallbacks */ true);\n  }\n\n  setPersistence(persistence: Persistence): Promise<void> {\n    if (_isFirebaseServerApp(this.app)) {\n      return Promise.reject(\n        _serverAppCurrentUserOperationNotSupportedError(this)\n      );\n    }\n    return this.queue(async () => {\n      await this.assertedPersistence.setPersistence(_getInstance(persistence));\n    });\n  }\n\n  _getRecaptchaConfig(): RecaptchaConfig | null {\n    if (this.tenantId == null) {\n      return this._agentRecaptchaConfig;\n    } else {\n      return this._tenantRecaptchaConfigs[this.tenantId];\n    }\n  }\n\n  async validatePassword(password: string): Promise<PasswordValidationStatus> {\n    if (!this._getPasswordPolicyInternal()) {\n      await this._updatePasswordPolicy();\n    }\n\n    // Password policy will be defined after fetching.\n    const passwordPolicy: PasswordPolicyInternal =\n      this._getPasswordPolicyInternal()!;\n\n    // Check that the policy schema version is supported by the SDK.\n    // TODO: Update this logic to use a max supported policy schema version once we have multiple schema versions.\n    if (\n      passwordPolicy.schemaVersion !==\n      this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION\n    ) {\n      return Promise.reject(\n        this._errorFactory.create(\n          AuthErrorCode.UNSUPPORTED_PASSWORD_POLICY_SCHEMA_VERSION,\n          {}\n        )\n      );\n    }\n\n    return passwordPolicy.validatePassword(password);\n  }\n\n  _getPasswordPolicyInternal(): PasswordPolicyInternal | null {\n    if (this.tenantId === null) {\n      return this._projectPasswordPolicy;\n    } else {\n      return this._tenantPasswordPolicies[this.tenantId];\n    }\n  }\n\n  async _updatePasswordPolicy(): Promise<void> {\n    const response = await _getPasswordPolicy(this);\n\n    const passwordPolicy: PasswordPolicyInternal = new PasswordPolicyImpl(\n      response\n    );\n\n    if (this.tenantId === null) {\n      this._projectPasswordPolicy = passwordPolicy;\n    } else {\n      this._tenantPasswordPolicies[this.tenantId] = passwordPolicy;\n    }\n  }\n\n  _getPersistenceType(): string {\n    return this.assertedPersistence.persistence.type;\n  }\n\n  _getPersistence(): PersistenceInternal {\n    return this.assertedPersistence.persistence;\n  }\n\n  _updateErrorMap(errorMap: AuthErrorMap): void {\n    this._errorFactory = new ErrorFactory<AuthErrorCode, AuthErrorParams>(\n      'auth',\n      'Firebase',\n      (errorMap as ErrorMapRetriever)()\n    );\n  }\n\n  onAuthStateChanged(\n    nextOrObserver: NextOrObserver<User>,\n    error?: ErrorFn,\n    completed?: CompleteFn\n  ): Unsubscribe {\n    return this.registerStateListener(\n      this.authStateSubscription,\n      nextOrObserver,\n      error,\n      completed\n    );\n  }\n\n  beforeAuthStateChanged(\n    callback: (user: User | null) => void | Promise<void>,\n    onAbort?: () => void\n  ): Unsubscribe {\n    return this.beforeStateQueue.pushCallback(callback, onAbort);\n  }\n\n  onIdTokenChanged(\n    nextOrObserver: NextOrObserver<User>,\n    error?: ErrorFn,\n    completed?: CompleteFn\n  ): Unsubscribe {\n    return this.registerStateListener(\n      this.idTokenSubscription,\n      nextOrObserver,\n      error,\n      completed\n    );\n  }\n\n  authStateReady(): Promise<void> {\n    return new Promise((resolve, reject) => {\n      if (this.currentUser) {\n        resolve();\n      } else {\n        const unsubscribe = this.onAuthStateChanged(() => {\n          unsubscribe();\n          resolve();\n        }, reject);\n      }\n    });\n  }\n\n  /**\n   * Revokes the given access token. Currently only supports Apple OAuth access tokens.\n   */\n  async revokeAccessToken(token: string): Promise<void> {\n    if (this.currentUser) {\n      const idToken = await this.currentUser.getIdToken();\n      // Generalize this to accept other providers once supported.\n      const request: RevokeTokenRequest = {\n        providerId: 'apple.com',\n        tokenType: TokenType.ACCESS_TOKEN,\n        token,\n        idToken\n      };\n      if (this.tenantId != null) {\n        request.tenantId = this.tenantId;\n      }\n      await revokeToken(this, request);\n    }\n  }\n\n  toJSON(): object {\n    return {\n      apiKey: this.config.apiKey,\n      authDomain: this.config.authDomain,\n      appName: this.name,\n      currentUser: this._currentUser?.toJSON()\n    };\n  }\n\n  async _setRedirectUser(\n    user: UserInternal | null,\n    popupRedirectResolver?: PopupRedirectResolver\n  ): Promise<void> {\n    const redirectManager = await this.getOrInitRedirectPersistenceManager(\n      popupRedirectResolver\n    );\n    return user === null\n      ? redirectManager.removeCurrentUser()\n      : redirectManager.setCurrentUser(user);\n  }\n\n  private async getOrInitRedirectPersistenceManager(\n    popupRedirectResolver?: PopupRedirectResolver\n  ): Promise<PersistenceUserManager> {\n    if (!this.redirectPersistenceManager) {\n      const resolver: PopupRedirectResolverInternal | null =\n        (popupRedirectResolver && _getInstance(popupRedirectResolver)) ||\n        this._popupRedirectResolver;\n      _assert(resolver, this, AuthErrorCode.ARGUMENT_ERROR);\n      this.redirectPersistenceManager = await PersistenceUserManager.create(\n        this,\n        [_getInstance(resolver._redirectPersistence)],\n        KeyName.REDIRECT_USER\n      );\n      this.redirectUser =\n        await this.redirectPersistenceManager.getCurrentUser();\n    }\n\n    return this.redirectPersistenceManager;\n  }\n\n  async _redirectUserForId(id: string): Promise<UserInternal | null> {\n    // Make sure we've cleared any pending persistence actions if we're not in\n    // the initializer\n    if (this._isInitialized) {\n      await this.queue(async () => {});\n    }\n\n    if (this._currentUser?._redirectEventId === id) {\n      return this._currentUser;\n    }\n\n    if (this.redirectUser?._redirectEventId === id) {\n      return this.redirectUser;\n    }\n\n    return null;\n  }\n\n  async _persistUserIfCurrent(user: UserInternal): Promise<void> {\n    if (user === this.currentUser) {\n      return this.queue(async () => this.directlySetCurrentUser(user));\n    }\n  }\n\n  /** Notifies listeners only if the user is current */\n  _notifyListenersIfCurrent(user: UserInternal): void {\n    if (user === this.currentUser) {\n      this.notifyAuthListeners();\n    }\n  }\n\n  _key(): string {\n    return `${this.config.authDomain}:${this.config.apiKey}:${this.name}`;\n  }\n\n  _startProactiveRefresh(): void {\n    this.isProactiveRefreshEnabled = true;\n    if (this.currentUser) {\n      this._currentUser._startProactiveRefresh();\n    }\n  }\n\n  _stopProactiveRefresh(): void {\n    this.isProactiveRefreshEnabled = false;\n    if (this.currentUser) {\n      this._currentUser._stopProactiveRefresh();\n    }\n  }\n\n  /** Returns the current user cast as the internal type */\n  get _currentUser(): UserInternal {\n    return this.currentUser as UserInternal;\n  }\n\n  private notifyAuthListeners(): void {\n    if (!this._isInitialized) {\n      return;\n    }\n\n    this.idTokenSubscription.next(this.currentUser);\n\n    const currentUid = this.currentUser?.uid ?? null;\n    if (this.lastNotifiedUid !== currentUid) {\n      this.lastNotifiedUid = currentUid;\n      this.authStateSubscription.next(this.currentUser);\n    }\n  }\n\n  private registerStateListener(\n    subscription: Subscription<User>,\n    nextOrObserver: NextOrObserver<User>,\n    error?: ErrorFn,\n    completed?: CompleteFn\n  ): Unsubscribe {\n    if (this._deleted) {\n      return () => {};\n    }\n\n    const cb =\n      typeof nextOrObserver === 'function'\n        ? nextOrObserver\n        : nextOrObserver.next.bind(nextOrObserver);\n\n    let isUnsubscribed = false;\n\n    const promise = this._isInitialized\n      ? Promise.resolve()\n      : this._initializationPromise;\n    _assert(promise, this, AuthErrorCode.INTERNAL_ERROR);\n    // The callback needs to be called asynchronously per the spec.\n    // eslint-disable-next-line @typescript-eslint/no-floating-promises\n    promise.then(() => {\n      if (isUnsubscribed) {\n        return;\n      }\n      cb(this.currentUser);\n    });\n\n    if (typeof nextOrObserver === 'function') {\n      const unsubscribe = subscription.addObserver(\n        nextOrObserver,\n        error,\n        completed\n      );\n      return () => {\n        isUnsubscribed = true;\n        unsubscribe();\n      };\n    } else {\n      const unsubscribe = subscription.addObserver(nextOrObserver);\n      return () => {\n        isUnsubscribed = true;\n        unsubscribe();\n      };\n    }\n  }\n\n  /**\n   * Unprotected (from race conditions) method to set the current user. This\n   * should only be called from within a queued callback. This is necessary\n   * because the queue shouldn't rely on another queued callback.\n   */\n  private async directlySetCurrentUser(\n    user: UserInternal | null\n  ): Promise<void> {\n    if (this.currentUser && this.currentUser !== user) {\n      this._currentUser._stopProactiveRefresh();\n    }\n    if (user && this.isProactiveRefreshEnabled) {\n      user._startProactiveRefresh();\n    }\n\n    this.currentUser = user;\n\n    if (user) {\n      await this.assertedPersistence.setCurrentUser(user);\n    } else {\n      await this.assertedPersistence.removeCurrentUser();\n    }\n  }\n\n  private queue(action: AsyncAction): Promise<void> {\n    // In case something errors, the callback still should be called in order\n    // to keep the promise chain alive\n    this.operations = this.operations.then(action, action);\n    return this.operations;\n  }\n\n  private get assertedPersistence(): PersistenceUserManager {\n    _assert(this.persistenceManager, this, AuthErrorCode.INTERNAL_ERROR);\n    return this.persistenceManager;\n  }\n\n  private frameworks: string[] = [];\n  private clientVersion: string;\n  _logFramework(framework: string): void {\n    if (!framework || this.frameworks.includes(framework)) {\n      return;\n    }\n    this.frameworks.push(framework);\n\n    // Sort alphabetically so that \"FirebaseCore-web,FirebaseUI-web\" and\n    // \"FirebaseUI-web,FirebaseCore-web\" aren't viewed as different.\n    this.frameworks.sort();\n    this.clientVersion = _getClientVersion(\n      this.config.clientPlatform,\n      this._getFrameworks()\n    );\n  }\n  _getFrameworks(): readonly string[] {\n    return this.frameworks;\n  }\n  async _getAdditionalHeaders(): Promise<Record<string, string>> {\n    // Additional headers on every request\n    const headers: Record<string, string> = {\n      [HttpHeader.X_CLIENT_VERSION]: this.clientVersion\n    };\n\n    if (this.app.options.appId) {\n      headers[HttpHeader.X_FIREBASE_GMPID] = this.app.options.appId;\n    }\n\n    // If the heartbeat service exists, add the heartbeat string\n    const heartbeatsHeader = await this.heartbeatServiceProvider\n      .getImmediate({\n        optional: true\n      })\n      ?.getHeartbeatsHeader();\n    if (heartbeatsHeader) {\n      headers[HttpHeader.X_FIREBASE_CLIENT] = heartbeatsHeader;\n    }\n\n    // If the App Check service exists, add the App Check token in the headers\n    const appCheckToken = await this._getAppCheckToken();\n    if (appCheckToken) {\n      headers[HttpHeader.X_FIREBASE_APP_CHECK] = appCheckToken;\n    }\n\n    return headers;\n  }\n\n  async _getAppCheckToken(): Promise<string | undefined> {\n    if (_isFirebaseServerApp(this.app) && this.app.settings.appCheckToken) {\n      return this.app.settings.appCheckToken;\n    }\n    const appCheckTokenResult = await this.appCheckServiceProvider\n      .getImmediate({ optional: true })\n      ?.getToken();\n    if (appCheckTokenResult?.error) {\n      // Context: appCheck.getToken() will never throw even if an error happened.\n      // In the error case, a dummy token will be returned along with an error field describing\n      // the error. In general, we shouldn't care about the error condition and just use\n      // the token (actual or dummy) to send requests.\n      _logWarn(\n        `Error while retrieving App Check token: ${appCheckTokenResult.error}`\n      );\n    }\n    return appCheckTokenResult?.token;\n  }\n}\n\n/**\n * Method to be used to cast down to our private implementation of Auth.\n * It will also handle unwrapping from the compat type if necessary\n *\n * @param auth Auth object passed in from developer\n */\nexport function _castAuth(auth: Auth): AuthInternal {\n  return getModularInstance(auth) as AuthInternal;\n}\n\n/** Helper class to wrap subscriber logic */\nclass Subscription<T> {\n  private observer: Observer<T | null> | null = null;\n  readonly addObserver: Subscribe<T | null> = createSubscribe(\n    observer => (this.observer = observer)\n  );\n\n  constructor(readonly auth: AuthInternal) {}\n\n  get next(): NextFn<T | null> {\n    _assert(this.observer, this.auth, AuthErrorCode.INTERNAL_ERROR);\n    return this.observer.next.bind(this.observer);\n  }\n}\n","/**\n * @license\n * Copyright 2023 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  _performApiRequest,\n  Endpoint,\n  HttpMethod,\n  _addTidIfNecessary\n} from '../index';\nimport { Auth } from '../../model/public_types';\n\n/**\n * Request object for fetching the password policy.\n */\nexport interface GetPasswordPolicyRequest {\n  tenantId?: string;\n}\n\n/**\n * Response object for fetching the password policy.\n */\nexport interface GetPasswordPolicyResponse {\n  customStrengthOptions: {\n    minPasswordLength?: number;\n    maxPasswordLength?: number;\n    containsLowercaseCharacter?: boolean;\n    containsUppercaseCharacter?: boolean;\n    containsNumericCharacter?: boolean;\n    containsNonAlphanumericCharacter?: boolean;\n  };\n  allowedNonAlphanumericCharacters?: string[];\n  enforcementState: string;\n  forceUpgradeOnSignin?: boolean;\n  schemaVersion: number;\n}\n\n/**\n * Fetches the password policy for the currently set tenant or the project if no tenant is set.\n *\n * @param auth Auth object.\n * @param request Password policy request.\n * @returns Password policy response.\n */\nexport async function _getPasswordPolicy(\n  auth: Auth,\n  request: GetPasswordPolicyRequest = {}\n): Promise<GetPasswordPolicyResponse> {\n  return _performApiRequest<\n    GetPasswordPolicyRequest,\n    GetPasswordPolicyResponse\n  >(\n    auth,\n    HttpMethod.GET,\n    Endpoint.GET_PASSWORD_POLICY,\n    _addTidIfNecessary(auth, request)\n  );\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\ninterface ExternalJSProvider {\n  loadJS(url: string): Promise<Event>;\n  recaptchaV2Script: string;\n  recaptchaEnterpriseScript: string;\n  gapiScript: string;\n}\n\nlet externalJSProvider: ExternalJSProvider = {\n  async loadJS() {\n    throw new Error('Unable to load external scripts');\n  },\n\n  recaptchaV2Script: '',\n  recaptchaEnterpriseScript: '',\n  gapiScript: ''\n};\n\nexport function _setExternalJSProvider(p: ExternalJSProvider): void {\n  externalJSProvider = p;\n}\n\nexport function _loadJS(url: string): Promise<Event> {\n  return externalJSProvider.loadJS(url);\n}\n\nexport function _recaptchaV2ScriptUrl(): string {\n  return externalJSProvider.recaptchaV2Script;\n}\n\nexport function _recaptchaEnterpriseScriptUrl(): string {\n  return externalJSProvider.recaptchaEnterpriseScript;\n}\n\nexport function _gapiScriptUrl(): string {\n  return externalJSProvider.gapiScript;\n}\n\nexport function _generateCallbackName(prefix: string): string {\n  return `__${prefix}${Math.floor(Math.random() * 1000000)}`;\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { AuthErrorCode } from '../../core/errors';\nimport { _assert } from '../../core/util/assert';\nimport { AuthInternal } from '../../model/auth';\nimport { RecaptchaParameters } from '../../model/public_types';\nimport {\n  Recaptcha,\n  GreCAPTCHATopLevel,\n  GreCAPTCHARenderOption,\n  GreCAPTCHA\n} from './recaptcha';\n\nexport const _SOLVE_TIME_MS = 500;\nexport const _EXPIRATION_TIME_MS = 60_000;\nexport const _WIDGET_ID_START = 1_000_000_000_000;\n\nexport interface Widget {\n  getResponse: () => string | null;\n  delete: () => void;\n  execute: () => void;\n}\n\nexport class MockReCaptcha implements Recaptcha {\n  private counter = _WIDGET_ID_START;\n  _widgets = new Map<number, Widget>();\n\n  constructor(private readonly auth: AuthInternal) {}\n\n  render(\n    container: string | HTMLElement,\n    parameters?: RecaptchaParameters\n  ): number {\n    const id = this.counter;\n    this._widgets.set(\n      id,\n      new MockWidget(container, this.auth.name, parameters || {})\n    );\n    this.counter++;\n    return id;\n  }\n\n  reset(optWidgetId?: number): void {\n    const id = optWidgetId || _WIDGET_ID_START;\n    void this._widgets.get(id)?.delete();\n    this._widgets.delete(id);\n  }\n\n  getResponse(optWidgetId?: number): string {\n    const id = optWidgetId || _WIDGET_ID_START;\n    return this._widgets.get(id)?.getResponse() || '';\n  }\n\n  async execute(optWidgetId?: number | string): Promise<string> {\n    const id: number = (optWidgetId as number) || _WIDGET_ID_START;\n    void this._widgets.get(id)?.execute();\n    return '';\n  }\n}\n\nexport class MockGreCAPTCHATopLevel implements GreCAPTCHATopLevel {\n  enterprise: GreCAPTCHA = new MockGreCAPTCHA();\n  ready(callback: () => void): void {\n    callback();\n  }\n\n  execute(\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    _siteKey: string,\n    _options: { action: string }\n  ): Promise<string> {\n    return Promise.resolve('token');\n  }\n  render(\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    _container: string | HTMLElement,\n    _parameters: GreCAPTCHARenderOption\n  ): string {\n    return '';\n  }\n}\n\nexport class MockGreCAPTCHA implements GreCAPTCHA {\n  ready(callback: () => void): void {\n    callback();\n  }\n\n  execute(\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    _siteKey: string,\n    _options: { action: string }\n  ): Promise<string> {\n    return Promise.resolve('token');\n  }\n  render(\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    _container: string | HTMLElement,\n    _parameters: GreCAPTCHARenderOption\n  ): string {\n    return '';\n  }\n}\n\nexport class MockWidget {\n  private readonly container: HTMLElement;\n  private readonly isVisible: boolean;\n  private timerId: number | null = null;\n  private deleted = false;\n  private responseToken: string | null = null;\n  private readonly clickHandler = (): void => {\n    this.execute();\n  };\n\n  constructor(\n    containerOrId: string | HTMLElement,\n    appName: string,\n    private readonly params: RecaptchaParameters\n  ) {\n    const container =\n      typeof containerOrId === 'string'\n        ? document.getElementById(containerOrId)\n        : containerOrId;\n    _assert(container, AuthErrorCode.ARGUMENT_ERROR, { appName });\n\n    this.container = container;\n    this.isVisible = this.params.size !== 'invisible';\n    if (this.isVisible) {\n      this.execute();\n    } else {\n      this.container.addEventListener('click', this.clickHandler);\n    }\n  }\n\n  getResponse(): string | null {\n    this.checkIfDeleted();\n    return this.responseToken;\n  }\n\n  delete(): void {\n    this.checkIfDeleted();\n    this.deleted = true;\n    if (this.timerId) {\n      clearTimeout(this.timerId);\n      this.timerId = null;\n    }\n    this.container.removeEventListener('click', this.clickHandler);\n  }\n\n  execute(): void {\n    this.checkIfDeleted();\n    if (this.timerId) {\n      return;\n    }\n\n    this.timerId = window.setTimeout(() => {\n      this.responseToken = generateRandomAlphaNumericString(50);\n      const { callback, 'expired-callback': expiredCallback } = this.params;\n      if (callback) {\n        try {\n          callback(this.responseToken);\n        } catch (e) {}\n      }\n\n      this.timerId = window.setTimeout(() => {\n        this.timerId = null;\n        this.responseToken = null;\n        if (expiredCallback) {\n          try {\n            expiredCallback();\n          } catch (e) {}\n        }\n\n        if (this.isVisible) {\n          this.execute();\n        }\n      }, _EXPIRATION_TIME_MS);\n    }, _SOLVE_TIME_MS);\n  }\n\n  private checkIfDeleted(): void {\n    if (this.deleted) {\n      throw new Error('reCAPTCHA mock was already deleted!');\n    }\n  }\n}\n\nfunction generateRandomAlphaNumericString(len: number): string {\n  const chars = [];\n  const allowedChars =\n    '1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';\n  for (let i = 0; i < len; i++) {\n    chars.push(\n      allowedChars.charAt(Math.floor(Math.random() * allowedChars.length))\n    );\n  }\n  return chars.join('');\n}\n","/* eslint-disable @typescript-eslint/no-require-imports */\n/**\n * @license\n * Copyright 2022 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { isEnterprise, RecaptchaConfig } from './recaptcha';\nimport { getRecaptchaConfig } from '../../api/authentication/recaptcha';\nimport {\n  RecaptchaClientType,\n  RecaptchaVersion,\n  RecaptchaActionName,\n  RecaptchaAuthProvider,\n  EnforcementState\n} from '../../api';\n\nimport { Auth } from '../../model/public_types';\nimport { AuthInternal } from '../../model/auth';\nimport { _castAuth } from '../../core/auth/auth_impl';\nimport * as jsHelpers from '../load_js';\nimport { AuthErrorCode } from '../../core/errors';\nimport { StartPhoneMfaEnrollmentRequest } from '../../api/account_management/mfa';\nimport { StartPhoneMfaSignInRequest } from '../../api/authentication/mfa';\nimport { MockGreCAPTCHATopLevel } from './recaptcha_mock';\n\nexport const RECAPTCHA_ENTERPRISE_VERIFIER_TYPE = 'recaptcha-enterprise';\nexport const FAKE_TOKEN = 'NO_RECAPTCHA';\n\nexport class RecaptchaEnterpriseVerifier {\n  /**\n   * Identifies the type of application verifier (e.g. \"recaptcha-enterprise\").\n   */\n  readonly type = RECAPTCHA_ENTERPRISE_VERIFIER_TYPE;\n\n  private readonly auth: AuthInternal;\n\n  /**\n   *\n   * @param authExtern - The corresponding Firebase {@link Auth} instance.\n   *\n   */\n  constructor(authExtern: Auth) {\n    this.auth = _castAuth(authExtern);\n  }\n\n  /**\n   * Executes the verification process.\n   *\n   * @returns A Promise for a token that can be used to assert the validity of a request.\n   */\n  async verify(\n    action: string = 'verify',\n    forceRefresh = false\n  ): Promise<string> {\n    async function retrieveSiteKey(auth: AuthInternal): Promise<string> {\n      if (!forceRefresh) {\n        if (auth.tenantId == null && auth._agentRecaptchaConfig != null) {\n          return auth._agentRecaptchaConfig.siteKey;\n        }\n        if (\n          auth.tenantId != null &&\n          auth._tenantRecaptchaConfigs[auth.tenantId] !== undefined\n        ) {\n          return auth._tenantRecaptchaConfigs[auth.tenantId].siteKey;\n        }\n      }\n\n      return new Promise<string>(async (resolve, reject) => {\n        getRecaptchaConfig(auth, {\n          clientType: RecaptchaClientType.WEB,\n          version: RecaptchaVersion.ENTERPRISE\n        })\n          .then(response => {\n            if (response.recaptchaKey === undefined) {\n              reject(new Error('recaptcha Enterprise site key undefined'));\n            } else {\n              const config = new RecaptchaConfig(response);\n              if (auth.tenantId == null) {\n                auth._agentRecaptchaConfig = config;\n              } else {\n                auth._tenantRecaptchaConfigs[auth.tenantId] = config;\n              }\n              return resolve(config.siteKey);\n            }\n          })\n          .catch(error => {\n            reject(error);\n          });\n      });\n    }\n\n    function retrieveRecaptchaToken(\n      siteKey: string,\n      resolve: (value: string | PromiseLike<string>) => void,\n      reject: (reason?: unknown) => void\n    ): void {\n      const grecaptcha = window.grecaptcha;\n      if (isEnterprise(grecaptcha)) {\n        grecaptcha.enterprise.ready(() => {\n          grecaptcha.enterprise\n            .execute(siteKey, { action })\n            .then(token => {\n              resolve(token);\n            })\n            .catch(() => {\n              resolve(FAKE_TOKEN);\n            });\n        });\n      } else {\n        reject(Error('No reCAPTCHA enterprise script loaded.'));\n      }\n    }\n\n    // Returns Promise for a mock token when appVerificationDisabledForTesting is true.\n    if (this.auth.settings.appVerificationDisabledForTesting) {\n      const mockRecaptcha = new MockGreCAPTCHATopLevel();\n      return mockRecaptcha.execute('siteKey', { action: 'verify' });\n    }\n\n    return new Promise<string>((resolve, reject) => {\n      retrieveSiteKey(this.auth)\n        .then(siteKey => {\n          if (!forceRefresh && isEnterprise(window.grecaptcha)) {\n            retrieveRecaptchaToken(siteKey, resolve, reject);\n          } else {\n            if (typeof window === 'undefined') {\n              reject(\n                new Error('RecaptchaVerifier is only supported in browser')\n              );\n              return;\n            }\n            let url = jsHelpers._recaptchaEnterpriseScriptUrl();\n            if (url.length !== 0) {\n              url += siteKey;\n            }\n            jsHelpers\n              ._loadJS(url)\n              .then(() => {\n                retrieveRecaptchaToken(siteKey, resolve, reject);\n              })\n              .catch(error => {\n                reject(error);\n              });\n          }\n        })\n        .catch(error => {\n          reject(error);\n        });\n    });\n  }\n}\n\nexport async function injectRecaptchaFields<T extends object>(\n  auth: AuthInternal,\n  request: T,\n  action: RecaptchaActionName,\n  isCaptchaResp = false,\n  isFakeToken = false\n): Promise<T> {\n  const verifier = new RecaptchaEnterpriseVerifier(auth);\n  let captchaResponse;\n\n  if (isFakeToken) {\n    captchaResponse = FAKE_TOKEN;\n  } else {\n    try {\n      captchaResponse = await verifier.verify(action);\n    } catch (error) {\n      captchaResponse = await verifier.verify(action, true);\n    }\n  }\n\n  const newRequest = { ...request };\n  if (\n    action === RecaptchaActionName.MFA_SMS_ENROLLMENT ||\n    action === RecaptchaActionName.MFA_SMS_SIGNIN\n  ) {\n    if ('phoneEnrollmentInfo' in newRequest) {\n      const phoneNumber = (\n        newRequest as unknown as StartPhoneMfaEnrollmentRequest\n      ).phoneEnrollmentInfo.phoneNumber;\n      const recaptchaToken = (\n        newRequest as unknown as StartPhoneMfaEnrollmentRequest\n      ).phoneEnrollmentInfo.recaptchaToken;\n\n      Object.assign(newRequest, {\n        'phoneEnrollmentInfo': {\n          phoneNumber,\n          recaptchaToken,\n          captchaResponse,\n          'clientType': RecaptchaClientType.WEB,\n          'recaptchaVersion': RecaptchaVersion.ENTERPRISE\n        }\n      });\n    } else if ('phoneSignInInfo' in newRequest) {\n      const recaptchaToken = (\n        newRequest as unknown as StartPhoneMfaSignInRequest\n      ).phoneSignInInfo.recaptchaToken;\n\n      Object.assign(newRequest, {\n        'phoneSignInInfo': {\n          recaptchaToken,\n          captchaResponse,\n          'clientType': RecaptchaClientType.WEB,\n          'recaptchaVersion': RecaptchaVersion.ENTERPRISE\n        }\n      });\n    }\n    return newRequest;\n  }\n\n  if (!isCaptchaResp) {\n    Object.assign(newRequest, { captchaResponse });\n  } else {\n    Object.assign(newRequest, { 'captchaResp': captchaResponse });\n  }\n  Object.assign(newRequest, { 'clientType': RecaptchaClientType.WEB });\n  Object.assign(newRequest, {\n    'recaptchaVersion': RecaptchaVersion.ENTERPRISE\n  });\n  return newRequest;\n}\n\ntype ActionMethod<TRequest, TResponse> = (\n  auth: AuthInternal,\n  request: TRequest\n) => Promise<TResponse>;\n\nexport async function handleRecaptchaFlow<TRequest extends object, TResponse>(\n  authInstance: AuthInternal,\n  request: TRequest,\n  actionName: RecaptchaActionName,\n  actionMethod: ActionMethod<TRequest, TResponse>,\n  recaptchaAuthProvider: RecaptchaAuthProvider\n): Promise<TResponse> {\n  if (recaptchaAuthProvider === RecaptchaAuthProvider.EMAIL_PASSWORD_PROVIDER) {\n    if (\n      authInstance\n        ._getRecaptchaConfig()\n        ?.isProviderEnabled(RecaptchaAuthProvider.EMAIL_PASSWORD_PROVIDER)\n    ) {\n      const requestWithRecaptcha = await injectRecaptchaFields(\n        authInstance,\n        request,\n        actionName,\n        actionName === RecaptchaActionName.GET_OOB_CODE\n      );\n      return actionMethod(authInstance, requestWithRecaptcha);\n    } else {\n      return actionMethod(authInstance, request).catch(async error => {\n        if (error.code === `auth/${AuthErrorCode.MISSING_RECAPTCHA_TOKEN}`) {\n          console.log(\n            `${actionName} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`\n          );\n          const requestWithRecaptcha = await injectRecaptchaFields(\n            authInstance,\n            request,\n            actionName,\n            actionName === RecaptchaActionName.GET_OOB_CODE\n          );\n          return actionMethod(authInstance, requestWithRecaptcha);\n        } else {\n          return Promise.reject(error);\n        }\n      });\n    }\n  } else if (recaptchaAuthProvider === RecaptchaAuthProvider.PHONE_PROVIDER) {\n    if (\n      authInstance\n        ._getRecaptchaConfig()\n        ?.isProviderEnabled(RecaptchaAuthProvider.PHONE_PROVIDER)\n    ) {\n      const requestWithRecaptcha = await injectRecaptchaFields(\n        authInstance,\n        request,\n        actionName\n      );\n\n      return actionMethod(authInstance, requestWithRecaptcha).catch(\n        async error => {\n          if (\n            authInstance\n              ._getRecaptchaConfig()\n              ?.getProviderEnforcementState(\n                RecaptchaAuthProvider.PHONE_PROVIDER\n              ) === EnforcementState.AUDIT\n          ) {\n            // AUDIT mode\n            if (\n              error.code === `auth/${AuthErrorCode.MISSING_RECAPTCHA_TOKEN}` ||\n              error.code === `auth/${AuthErrorCode.INVALID_APP_CREDENTIAL}`\n            ) {\n              console.log(\n                `Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${actionName} flow.`\n              );\n              // reCAPTCHA Enterprise token is missing or reCAPTCHA Enterprise token\n              // check fails.\n              // Fallback to reCAPTCHA v2 flow.\n              const requestWithRecaptchaFields = await injectRecaptchaFields(\n                authInstance,\n                request,\n                actionName,\n                false, // isCaptchaResp\n                true // isFakeToken\n              );\n              // This will call the PhoneApiCaller to fetch and inject reCAPTCHA v2 token.\n              return actionMethod(authInstance, requestWithRecaptchaFields);\n            }\n          }\n          // ENFORCE mode or AUDIT mode with any other error.\n          return Promise.reject(error);\n        }\n      );\n    } else {\n      // Do reCAPTCHA v2 flow.\n      const requestWithRecaptchaFields = await injectRecaptchaFields(\n        authInstance,\n        request,\n        actionName,\n        false, // isCaptchaResp\n        true // isFakeToken\n      );\n\n      // This will call the PhoneApiCaller to fetch and inject v2 token.\n      return actionMethod(authInstance, requestWithRecaptchaFields);\n    }\n  } else {\n    return Promise.reject(\n      recaptchaAuthProvider + ' provider is not supported.'\n    );\n  }\n}\n\nexport async function _initializeRecaptchaConfig(auth: Auth): Promise<void> {\n  const authInternal = _castAuth(auth);\n\n  const response = await getRecaptchaConfig(authInternal, {\n    clientType: RecaptchaClientType.WEB,\n    version: RecaptchaVersion.ENTERPRISE\n  });\n\n  const config = new RecaptchaConfig(response);\n  if (authInternal.tenantId == null) {\n    authInternal._agentRecaptchaConfig = config;\n  } else {\n    authInternal._tenantRecaptchaConfigs[authInternal.tenantId] = config;\n  }\n\n  if (config.isAnyProviderEnabled()) {\n    const verifier = new RecaptchaEnterpriseVerifier(authInternal);\n    void verifier.verify();\n  }\n}\n","/**\n * @license\n * Copyright 2021 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { Auth } from '../../model/public_types';\nimport { AuthErrorCode } from '../errors';\nimport { _assert } from '../util/assert';\nimport { _castAuth } from './auth_impl';\nimport {\n  deepEqual,\n  isCloudWorkstation,\n  pingServer,\n  updateEmulatorBanner\n} from '@firebase/util';\n\n/**\n * Changes the {@link Auth} instance to communicate with the Firebase Auth Emulator, instead of production\n * Firebase Auth services.\n *\n * @remarks\n * This must be called synchronously immediately following the first call to\n * {@link initializeAuth}.  Do not use with production credentials as emulator\n * traffic is not encrypted.\n *\n *\n * @example\n * ```javascript\n * connectAuthEmulator(auth, 'http://127.0.0.1:9099', { disableWarnings: true });\n * ```\n *\n * @param auth - The {@link Auth} instance.\n * @param url - The URL at which the emulator is running (eg, 'http://localhost:9099').\n * @param options - Optional. `options.disableWarnings` defaults to `false`. Set it to\n * `true` to disable the warning banner attached to the DOM.\n *\n * @public\n */\nexport function connectAuthEmulator(\n  auth: Auth,\n  url: string,\n  options?: { disableWarnings: boolean }\n): void {\n  const authInternal = _castAuth(auth);\n  _assert(\n    /^https?:\\/\\//.test(url),\n    authInternal,\n    AuthErrorCode.INVALID_EMULATOR_SCHEME\n  );\n\n  const disableWarnings = !!options?.disableWarnings;\n\n  const protocol = extractProtocol(url);\n  const { host, port } = extractHostAndPort(url);\n  const portStr = port === null ? '' : `:${port}`;\n\n  // Always replace path with \"/\" (even if input url had no path at all, or had a different one).\n  const emulator = { url: `${protocol}//${host}${portStr}/` };\n  const emulatorConfig = Object.freeze({\n    host,\n    port,\n    protocol: protocol.replace(':', ''),\n    options: Object.freeze({ disableWarnings })\n  });\n\n  // There are a few scenarios to guard against if the Auth instance has already started:\n  if (!authInternal._canInitEmulator) {\n    // Applications may not initialize the emulator for the first time if Auth has already started\n    // to make network requests.\n    _assert(\n      authInternal.config.emulator && authInternal.emulatorConfig,\n      authInternal,\n      AuthErrorCode.EMULATOR_CONFIG_FAILED\n    );\n\n    // Applications may not alter the configuration of the emulator (aka pass a different config)\n    // once Auth has started to make network requests.\n    _assert(\n      deepEqual(emulator, authInternal.config.emulator) &&\n        deepEqual(emulatorConfig, authInternal.emulatorConfig),\n      authInternal,\n      AuthErrorCode.EMULATOR_CONFIG_FAILED\n    );\n\n    // It's valid, however, to invoke connectAuthEmulator() after Auth has started making\n    // connections, so long as the config matches the existing config. This results in a no-op.\n    return;\n  }\n\n  authInternal.config.emulator = emulator;\n  authInternal.emulatorConfig = emulatorConfig;\n  authInternal.settings.appVerificationDisabledForTesting = true;\n\n  // Workaround to get cookies in Firebase Studio\n  if (isCloudWorkstation(host)) {\n    void pingServer(`${protocol}//${host}${portStr}`);\n    updateEmulatorBanner('Auth', true);\n  } else if (!disableWarnings) {\n    emitEmulatorWarning();\n  }\n}\n\nfunction extractProtocol(url: string): string {\n  const protocolEnd = url.indexOf(':');\n  return protocolEnd < 0 ? '' : url.substr(0, protocolEnd + 1);\n}\n\nfunction extractHostAndPort(url: string): {\n  host: string;\n  port: number | null;\n} {\n  const protocol = extractProtocol(url);\n  const authority = /(\\/\\/)?([^?#/]+)/.exec(url.substr(protocol.length)); // Between // and /, ? or #.\n  if (!authority) {\n    return { host: '', port: null };\n  }\n  const hostAndPort = authority[2].split('@').pop() || ''; // Strip out \"username:password@\".\n  const bracketedIPv6 = /^(\\[[^\\]]+\\])(:|$)/.exec(hostAndPort);\n  if (bracketedIPv6) {\n    const host = bracketedIPv6[1];\n    return { host, port: parsePort(hostAndPort.substr(host.length + 1)) };\n  } else {\n    const [host, port] = hostAndPort.split(':');\n    return { host, port: parsePort(port) };\n  }\n}\n\nfunction parsePort(portStr: string): number | null {\n  if (!portStr) {\n    return null;\n  }\n  const port = Number(portStr);\n  if (isNaN(port)) {\n    return null;\n  }\n  return port;\n}\n\nfunction emitEmulatorWarning(): void {\n  function attachBanner(): void {\n    const el = document.createElement('p');\n    const sty = el.style;\n    el.innerText =\n      'Running in emulator mode. Do not use with production credentials.';\n    sty.position = 'fixed';\n    sty.width = '100%';\n    sty.backgroundColor = '#ffffff';\n    sty.border = '.1em solid #000000';\n    sty.color = '#b50000';\n    sty.bottom = '0px';\n    sty.left = '0px';\n    sty.margin = '0px';\n    sty.zIndex = '10000';\n    sty.textAlign = 'center';\n    el.classList.add('firebase-emulator-warning');\n    document.body.appendChild(el);\n  }\n\n  if (typeof console !== 'undefined' && typeof console.info === 'function') {\n    console.info(\n      'WARNING: You are using the Auth Emulator,' +\n        ' which is intended for local testing only.  Do not use with' +\n        ' production credentials.'\n    );\n  }\n  if (typeof window !== 'undefined' && typeof document !== 'undefined') {\n    if (document.readyState === 'loading') {\n      window.addEventListener('DOMContentLoaded', attachBanner);\n    } else {\n      attachBanner();\n    }\n  }\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { PhoneOrOauthTokenResponse } from '../../api/authentication/mfa';\nimport { AuthInternal } from '../../model/auth';\nimport { IdTokenResponse } from '../../model/id_token';\nimport { debugFail } from '../util/assert';\n\n/**\n * Interface that represents the credentials returned by an {@link AuthProvider}.\n *\n * @remarks\n * Implementations specify the details about each auth provider's credential requirements.\n *\n * @public\n */\nexport class AuthCredential {\n  /** @internal */\n  protected constructor(\n    /**\n     * The authentication provider ID for the credential.\n     *\n     * @remarks\n     * For example, 'facebook.com', or 'google.com'.\n     */\n    readonly providerId: string,\n    /**\n     * The authentication sign in method for the credential.\n     *\n     * @remarks\n     * For example, {@link SignInMethod}.EMAIL_PASSWORD, or\n     * {@link SignInMethod}.EMAIL_LINK. This corresponds to the sign-in method\n     * identifier as returned in {@link fetchSignInMethodsForEmail}.\n     */\n    readonly signInMethod: string\n  ) {}\n\n  /**\n   * Returns a JSON-serializable representation of this object.\n   *\n   * @returns a JSON-serializable representation of this object.\n   */\n  toJSON(): object {\n    return debugFail('not implemented');\n  }\n\n  /** @internal */\n  _getIdTokenResponse(_auth: AuthInternal): Promise<PhoneOrOauthTokenResponse> {\n    return debugFail('not implemented');\n  }\n  /** @internal */\n  _linkToIdToken(\n    _auth: AuthInternal,\n    _idToken: string\n  ): Promise<IdTokenResponse> {\n    return debugFail('not implemented');\n  }\n  /** @internal */\n  _getReauthenticationResolver(_auth: AuthInternal): Promise<IdTokenResponse> {\n    return debugFail('not implemented');\n  }\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { ActionCodeOperation, Auth } from '../../model/public_types';\n\nimport {\n  Endpoint,\n  HttpMethod,\n  _addTidIfNecessary,\n  _performApiRequest\n} from '../index';\nimport { IdTokenResponse } from '../../model/id_token';\nimport { MfaEnrollment } from './mfa';\nimport { SignUpRequest, SignUpResponse } from '../authentication/sign_up';\n\nexport interface ResetPasswordRequest {\n  oobCode: string;\n  newPassword?: string;\n  tenantId?: string;\n}\n\nexport interface ResetPasswordResponse {\n  email: string;\n  newEmail?: string;\n  requestType?: ActionCodeOperation;\n  mfaInfo?: MfaEnrollment;\n}\n\nexport async function resetPassword(\n  auth: Auth,\n  request: ResetPasswordRequest\n): Promise<ResetPasswordResponse> {\n  return _performApiRequest<ResetPasswordRequest, ResetPasswordResponse>(\n    auth,\n    HttpMethod.POST,\n    Endpoint.RESET_PASSWORD,\n    _addTidIfNecessary(auth, request)\n  );\n}\nexport interface UpdateEmailPasswordRequest {\n  idToken: string;\n  returnSecureToken?: boolean;\n  email?: string;\n  password?: string;\n}\n\nexport interface UpdateEmailPasswordResponse extends IdTokenResponse {}\n\nexport async function updateEmailPassword(\n  auth: Auth,\n  request: UpdateEmailPasswordRequest\n): Promise<UpdateEmailPasswordResponse> {\n  return _performApiRequest<\n    UpdateEmailPasswordRequest,\n    UpdateEmailPasswordResponse\n  >(auth, HttpMethod.POST, Endpoint.SET_ACCOUNT_INFO, request);\n}\n\n// Used for linking an email/password account to an existing idToken. Uses the same request/response\n// format as updateEmailPassword.\nexport async function linkEmailPassword(\n  auth: Auth,\n  request: SignUpRequest\n): Promise<SignUpResponse> {\n  return _performApiRequest<SignUpRequest, SignUpResponse>(\n    auth,\n    HttpMethod.POST,\n    Endpoint.SIGN_UP,\n    request\n  );\n}\n\nexport interface ApplyActionCodeRequest {\n  oobCode: string;\n  tenantId?: string;\n}\n\nexport interface ApplyActionCodeResponse {}\n\nexport async function applyActionCode(\n  auth: Auth,\n  request: ApplyActionCodeRequest\n): Promise<ApplyActionCodeResponse> {\n  return _performApiRequest<ApplyActionCodeRequest, ApplyActionCodeResponse>(\n    auth,\n    HttpMethod.POST,\n    Endpoint.SET_ACCOUNT_INFO,\n    _addTidIfNecessary(auth, request)\n  );\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { ActionCodeOperation, Auth } from '../../model/public_types';\n\nimport {\n  Endpoint,\n  HttpMethod,\n  RecaptchaClientType,\n  RecaptchaVersion,\n  _addTidIfNecessary,\n  _performApiRequest,\n  _performSignInRequest\n} from '../index';\nimport { IdToken, IdTokenResponse } from '../../model/id_token';\n\nexport interface SignInWithPasswordRequest {\n  returnSecureToken?: boolean;\n  email: string;\n  password: string;\n  tenantId?: string;\n  captchaResponse?: string;\n  clientType?: RecaptchaClientType;\n  recaptchaVersion?: RecaptchaVersion;\n}\n\nexport interface SignInWithPasswordResponse extends IdTokenResponse {\n  email: string;\n  displayName: string;\n}\n\nexport async function signInWithPassword(\n  auth: Auth,\n  request: SignInWithPasswordRequest\n): Promise<SignInWithPasswordResponse> {\n  return _performSignInRequest<\n    SignInWithPasswordRequest,\n    SignInWithPasswordResponse\n  >(\n    auth,\n    HttpMethod.POST,\n    Endpoint.SIGN_IN_WITH_PASSWORD,\n    _addTidIfNecessary(auth, request)\n  );\n}\n\nexport interface GetOobCodeRequest {\n  email?: string; // Everything except VERIFY_AND_CHANGE_EMAIL\n  continueUrl?: string;\n  iOSBundleId?: string;\n  iosAppStoreId?: string;\n  androidPackageName?: string;\n  androidInstallApp?: boolean;\n  androidMinimumVersionCode?: string;\n  canHandleCodeInApp?: boolean;\n  dynamicLinkDomain?: string;\n  tenantId?: string;\n  targetProjectid?: string;\n  linkDomain?: string;\n}\n\nexport interface VerifyEmailRequest extends GetOobCodeRequest {\n  requestType: ActionCodeOperation.VERIFY_EMAIL;\n  idToken: IdToken;\n}\n\nexport interface PasswordResetRequest extends GetOobCodeRequest {\n  requestType: ActionCodeOperation.PASSWORD_RESET;\n  email: string;\n  captchaResp?: string;\n  clientType?: RecaptchaClientType;\n  recaptchaVersion?: RecaptchaVersion;\n}\n\nexport interface EmailSignInRequest extends GetOobCodeRequest {\n  requestType: ActionCodeOperation.EMAIL_SIGNIN;\n  email: string;\n  captchaResp?: string;\n  clientType?: RecaptchaClientType;\n  recaptchaVersion?: RecaptchaVersion;\n}\n\nexport interface VerifyAndChangeEmailRequest extends GetOobCodeRequest {\n  requestType: ActionCodeOperation.VERIFY_AND_CHANGE_EMAIL;\n  idToken: IdToken;\n  newEmail: string;\n}\n\ninterface GetOobCodeResponse {\n  email: string;\n}\n\nexport interface VerifyEmailResponse extends GetOobCodeResponse {}\nexport interface PasswordResetResponse extends GetOobCodeResponse {}\nexport interface EmailSignInResponse extends GetOobCodeResponse {}\nexport interface VerifyAndChangeEmailResponse extends GetOobCodeRequest {}\n\nasync function sendOobCode(\n  auth: Auth,\n  request: GetOobCodeRequest\n): Promise<GetOobCodeResponse> {\n  return _performApiRequest<GetOobCodeRequest, GetOobCodeResponse>(\n    auth,\n    HttpMethod.POST,\n    Endpoint.SEND_OOB_CODE,\n    _addTidIfNecessary(auth, request)\n  );\n}\n\nexport async function sendEmailVerification(\n  auth: Auth,\n  request: VerifyEmailRequest\n): Promise<VerifyEmailResponse> {\n  return sendOobCode(auth, request);\n}\n\nexport async function sendPasswordResetEmail(\n  auth: Auth,\n  request: PasswordResetRequest\n): Promise<PasswordResetResponse> {\n  return sendOobCode(auth, request);\n}\n\nexport async function sendSignInLinkToEmail(\n  auth: Auth,\n  request: EmailSignInRequest\n): Promise<EmailSignInResponse> {\n  return sendOobCode(auth, request);\n}\n\nexport async function verifyAndChangeEmail(\n  auth: Auth,\n  request: VerifyAndChangeEmailRequest\n): Promise<VerifyAndChangeEmailResponse> {\n  return sendOobCode(auth, request);\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { ProviderId, SignInMethod } from '../../model/enums';\n\nimport { linkEmailPassword } from '../../api/account_management/email_and_password';\nimport {\n  signInWithPassword,\n  SignInWithPasswordRequest\n} from '../../api/authentication/email_and_password';\nimport {\n  signInWithEmailLink,\n  signInWithEmailLinkForLinking\n} from '../../api/authentication/email_link';\nimport { AuthInternal } from '../../model/auth';\nimport { IdTokenResponse } from '../../model/id_token';\nimport { AuthErrorCode } from '../errors';\nimport { _fail } from '../util/assert';\nimport { AuthCredential } from './auth_credential';\nimport { handleRecaptchaFlow } from '../../platform_browser/recaptcha/recaptcha_enterprise_verifier';\nimport {\n  RecaptchaActionName,\n  RecaptchaClientType,\n  RecaptchaAuthProvider\n} from '../../api';\nimport { SignUpRequest } from '../../api/authentication/sign_up';\n/**\n * Interface that represents the credentials returned by {@link EmailAuthProvider} for\n * {@link ProviderId}.PASSWORD\n *\n * @remarks\n * Covers both {@link SignInMethod}.EMAIL_PASSWORD and\n * {@link SignInMethod}.EMAIL_LINK.\n *\n * @public\n */\nexport class EmailAuthCredential extends AuthCredential {\n  /** @internal */\n  private constructor(\n    /** @internal */\n    readonly _email: string,\n    /** @internal */\n    readonly _password: string,\n    signInMethod: SignInMethod,\n    /** @internal */\n    readonly _tenantId: string | null = null\n  ) {\n    super(ProviderId.PASSWORD, signInMethod);\n  }\n\n  /** @internal */\n  static _fromEmailAndPassword(\n    email: string,\n    password: string\n  ): EmailAuthCredential {\n    return new EmailAuthCredential(\n      email,\n      password,\n      SignInMethod.EMAIL_PASSWORD\n    );\n  }\n\n  /** @internal */\n  static _fromEmailAndCode(\n    email: string,\n    oobCode: string,\n    tenantId: string | null = null\n  ): EmailAuthCredential {\n    return new EmailAuthCredential(\n      email,\n      oobCode,\n      SignInMethod.EMAIL_LINK,\n      tenantId\n    );\n  }\n\n  /** {@inheritdoc AuthCredential.toJSON} */\n  toJSON(): object {\n    return {\n      email: this._email,\n      password: this._password,\n      signInMethod: this.signInMethod,\n      tenantId: this._tenantId\n    };\n  }\n\n  /**\n   * Static method to deserialize a JSON representation of an object into an {@link  AuthCredential}.\n   *\n   * @param json - Either `object` or the stringified representation of the object. When string is\n   * provided, `JSON.parse` would be called first.\n   *\n   * @returns If the JSON input does not represent an {@link AuthCredential}, null is returned.\n   */\n  static fromJSON(json: object | string): EmailAuthCredential | null {\n    const obj = typeof json === 'string' ? JSON.parse(json) : json;\n    if (obj?.email && obj?.password) {\n      if (obj.signInMethod === SignInMethod.EMAIL_PASSWORD) {\n        return this._fromEmailAndPassword(obj.email, obj.password);\n      } else if (obj.signInMethod === SignInMethod.EMAIL_LINK) {\n        return this._fromEmailAndCode(obj.email, obj.password, obj.tenantId);\n      }\n    }\n    return null;\n  }\n\n  /** @internal */\n  async _getIdTokenResponse(auth: AuthInternal): Promise<IdTokenResponse> {\n    switch (this.signInMethod) {\n      case SignInMethod.EMAIL_PASSWORD:\n        const request: SignInWithPasswordRequest = {\n          returnSecureToken: true,\n          email: this._email,\n          password: this._password,\n          clientType: RecaptchaClientType.WEB\n        };\n        return handleRecaptchaFlow(\n          auth,\n          request,\n          RecaptchaActionName.SIGN_IN_WITH_PASSWORD,\n          signInWithPassword,\n          RecaptchaAuthProvider.EMAIL_PASSWORD_PROVIDER\n        );\n      case SignInMethod.EMAIL_LINK:\n        return signInWithEmailLink(auth, {\n          email: this._email,\n          oobCode: this._password\n        });\n      default:\n        _fail(auth, AuthErrorCode.INTERNAL_ERROR);\n    }\n  }\n\n  /** @internal */\n  async _linkToIdToken(\n    auth: AuthInternal,\n    idToken: string\n  ): Promise<IdTokenResponse> {\n    switch (this.signInMethod) {\n      case SignInMethod.EMAIL_PASSWORD:\n        const request: SignUpRequest = {\n          idToken,\n          returnSecureToken: true,\n          email: this._email,\n          password: this._password,\n          clientType: RecaptchaClientType.WEB\n        };\n        return handleRecaptchaFlow(\n          auth,\n          request,\n          RecaptchaActionName.SIGN_UP_PASSWORD,\n          linkEmailPassword,\n          RecaptchaAuthProvider.EMAIL_PASSWORD_PROVIDER\n        );\n      case SignInMethod.EMAIL_LINK:\n        return signInWithEmailLinkForLinking(auth, {\n          idToken,\n          email: this._email,\n          oobCode: this._password\n        });\n      default:\n        _fail(auth, AuthErrorCode.INTERNAL_ERROR);\n    }\n  }\n\n  /** @internal */\n  _getReauthenticationResolver(auth: AuthInternal): Promise<IdTokenResponse> {\n    return this._getIdTokenResponse(auth);\n  }\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  _performSignInRequest,\n  Endpoint,\n  HttpMethod,\n  _addTidIfNecessary\n} from '../index';\nimport { IdTokenResponse } from '../../model/id_token';\nimport { Auth } from '../../model/public_types';\n\nexport interface SignInWithEmailLinkRequest {\n  email: string;\n  oobCode: string;\n  tenantId?: string;\n}\n\nexport interface SignInWithEmailLinkResponse extends IdTokenResponse {\n  email: string;\n  isNewUser: boolean;\n}\n\nexport async function signInWithEmailLink(\n  auth: Auth,\n  request: SignInWithEmailLinkRequest\n): Promise<SignInWithEmailLinkResponse> {\n  return _performSignInRequest<\n    SignInWithEmailLinkRequest,\n    SignInWithEmailLinkResponse\n  >(\n    auth,\n    HttpMethod.POST,\n    Endpoint.SIGN_IN_WITH_EMAIL_LINK,\n    _addTidIfNecessary(auth, request)\n  );\n}\n\nexport interface SignInWithEmailLinkForLinkingRequest\n  extends SignInWithEmailLinkRequest {\n  idToken: string;\n}\n\nexport async function signInWithEmailLinkForLinking(\n  auth: Auth,\n  request: SignInWithEmailLinkForLinkingRequest\n): Promise<SignInWithEmailLinkResponse> {\n  return _performSignInRequest<\n    SignInWithEmailLinkForLinkingRequest,\n    SignInWithEmailLinkResponse\n  >(\n    auth,\n    HttpMethod.POST,\n    Endpoint.SIGN_IN_WITH_EMAIL_LINK,\n    _addTidIfNecessary(auth, request)\n  );\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  Endpoint,\n  HttpMethod,\n  _addTidIfNecessary,\n  _performSignInRequest\n} from '../index';\nimport { IdToken, IdTokenResponse } from '../../model/id_token';\nimport { Auth } from '../../model/public_types';\n\nexport interface SignInWithIdpRequest {\n  requestUri: string;\n  postBody?: string;\n  sessionId?: string;\n  tenantId?: string;\n  returnSecureToken: boolean;\n  returnIdpCredential?: boolean;\n  idToken?: IdToken;\n  autoCreate?: boolean;\n  pendingToken?: string;\n}\n\n/**\n * @internal\n */\nexport interface SignInWithIdpResponse extends IdTokenResponse {\n  oauthAccessToken?: string;\n  oauthTokenSecret?: string;\n  nonce?: string;\n  oauthIdToken?: string;\n  pendingToken?: string;\n}\n\nexport async function signInWithIdp(\n  auth: Auth,\n  request: SignInWithIdpRequest\n): Promise<SignInWithIdpResponse> {\n  return _performSignInRequest<SignInWithIdpRequest, SignInWithIdpResponse>(\n    auth,\n    HttpMethod.POST,\n    Endpoint.SIGN_IN_WITH_IDP,\n    _addTidIfNecessary(auth, request)\n  );\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { querystring } from '@firebase/util';\n\nimport {\n  signInWithIdp,\n  SignInWithIdpRequest\n} from '../../api/authentication/idp';\nimport { AuthInternal } from '../../model/auth';\nimport { IdTokenResponse } from '../../model/id_token';\nimport { AuthErrorCode } from '../errors';\nimport { _fail } from '../util/assert';\nimport { AuthCredential } from './auth_credential';\n\nconst IDP_REQUEST_URI = 'http://localhost';\n\nexport interface OAuthCredentialParams {\n  // OAuth 2 uses either id token or access token\n  idToken?: string | null;\n  accessToken?: string | null;\n\n  // These fields are used with OAuth 1\n  oauthToken?: string;\n  secret?: string;\n  oauthTokenSecret?: string;\n\n  // Nonce is only set if pendingToken is not present\n  nonce?: string;\n  pendingToken?: string;\n\n  // Utilities\n  providerId: string;\n  signInMethod: string;\n}\n\n/**\n * Represents the OAuth credentials returned by an {@link OAuthProvider}.\n *\n * @remarks\n * Implementations specify the details about each auth provider's credential requirements.\n *\n * @public\n */\nexport class OAuthCredential extends AuthCredential {\n  /**\n   * The OAuth ID token associated with the credential if it belongs to an OIDC provider,\n   * such as `google.com`.\n   * @readonly\n   */\n  idToken?: string;\n  /**\n   * The OAuth access token associated with the credential if it belongs to an\n   * {@link OAuthProvider}, such as `facebook.com`, `twitter.com`, etc.\n   * @readonly\n   */\n  accessToken?: string;\n  /**\n   * The OAuth access token secret associated with the credential if it belongs to an OAuth 1.0\n   * provider, such as `twitter.com`.\n   * @readonly\n   */\n  secret?: string;\n\n  private nonce?: string;\n  private pendingToken: string | null = null;\n\n  /** @internal */\n  static _fromParams(params: OAuthCredentialParams): OAuthCredential {\n    const cred = new OAuthCredential(params.providerId, params.signInMethod);\n\n    if (params.idToken || params.accessToken) {\n      // OAuth 2 and either ID token or access token.\n      if (params.idToken) {\n        cred.idToken = params.idToken;\n      }\n\n      if (params.accessToken) {\n        cred.accessToken = params.accessToken;\n      }\n\n      // Add nonce if available and no pendingToken is present.\n      if (params.nonce && !params.pendingToken) {\n        cred.nonce = params.nonce;\n      }\n\n      if (params.pendingToken) {\n        cred.pendingToken = params.pendingToken;\n      }\n    } else if (params.oauthToken && params.oauthTokenSecret) {\n      // OAuth 1 and OAuth token with token secret\n      cred.accessToken = params.oauthToken;\n      cred.secret = params.oauthTokenSecret;\n    } else {\n      _fail(AuthErrorCode.ARGUMENT_ERROR);\n    }\n\n    return cred;\n  }\n\n  /** {@inheritdoc AuthCredential.toJSON}  */\n  toJSON(): object {\n    return {\n      idToken: this.idToken,\n      accessToken: this.accessToken,\n      secret: this.secret,\n      nonce: this.nonce,\n      pendingToken: this.pendingToken,\n      providerId: this.providerId,\n      signInMethod: this.signInMethod\n    };\n  }\n\n  /**\n   * Static method to deserialize a JSON representation of an object into an\n   * {@link  AuthCredential}.\n   *\n   * @param json - Input can be either Object or the stringified representation of the object.\n   * When string is provided, JSON.parse would be called first.\n   *\n   * @returns If the JSON input does not represent an {@link  AuthCredential}, null is returned.\n   */\n  static fromJSON(json: string | object): OAuthCredential | null {\n    const obj = typeof json === 'string' ? JSON.parse(json) : json;\n    const { providerId, signInMethod, ...rest }: OAuthCredentialParams = obj;\n    if (!providerId || !signInMethod) {\n      return null;\n    }\n\n    const cred = new OAuthCredential(providerId, signInMethod);\n    cred.idToken = rest.idToken || undefined;\n    cred.accessToken = rest.accessToken || undefined;\n    cred.secret = rest.secret;\n    cred.nonce = rest.nonce;\n    cred.pendingToken = rest.pendingToken || null;\n    return cred;\n  }\n\n  /** @internal */\n  _getIdTokenResponse(auth: AuthInternal): Promise<IdTokenResponse> {\n    const request = this.buildRequest();\n    return signInWithIdp(auth, request);\n  }\n\n  /** @internal */\n  _linkToIdToken(\n    auth: AuthInternal,\n    idToken: string\n  ): Promise<IdTokenResponse> {\n    const request = this.buildRequest();\n    request.idToken = idToken;\n    return signInWithIdp(auth, request);\n  }\n\n  /** @internal */\n  _getReauthenticationResolver(auth: AuthInternal): Promise<IdTokenResponse> {\n    const request = this.buildRequest();\n    request.autoCreate = false;\n    return signInWithIdp(auth, request);\n  }\n\n  private buildRequest(): SignInWithIdpRequest {\n    const request: SignInWithIdpRequest = {\n      requestUri: IDP_REQUEST_URI,\n      returnSecureToken: true\n    };\n\n    if (this.pendingToken) {\n      request.pendingToken = this.pendingToken;\n    } else {\n      const postBody: Record<string, string> = {};\n      if (this.idToken) {\n        postBody['id_token'] = this.idToken;\n      }\n      if (this.accessToken) {\n        postBody['access_token'] = this.accessToken;\n      }\n      if (this.secret) {\n        postBody['oauth_token_secret'] = this.secret;\n      }\n\n      postBody['providerId'] = this.providerId;\n      if (this.nonce && !this.pendingToken) {\n        postBody['nonce'] = this.nonce;\n      }\n\n      request.postBody = querystring(postBody);\n    }\n\n    return request;\n  }\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  Endpoint,\n  HttpMethod,\n  RecaptchaClientType,\n  RecaptchaVersion,\n  _addTidIfNecessary,\n  _makeTaggedError,\n  _performApiRequest,\n  _performSignInRequest\n} from '../index';\nimport { AuthErrorCode } from '../../core/errors';\nimport { IdTokenResponse } from '../../model/id_token';\nimport { ServerError, ServerErrorMap } from '../errors';\nimport { Auth } from '../../model/public_types';\n\nexport interface SendPhoneVerificationCodeRequest {\n  phoneNumber: string;\n  // reCAPTCHA v2 token\n  recaptchaToken?: string;\n  tenantId?: string;\n  // reCAPTCHA Enterprise token\n  captchaResponse?: string;\n  clientType?: RecaptchaClientType;\n  recaptchaVersion?: RecaptchaVersion;\n}\n\nexport interface SendPhoneVerificationCodeResponse {\n  sessionInfo: string;\n}\n\nexport async function sendPhoneVerificationCode(\n  auth: Auth,\n  request: SendPhoneVerificationCodeRequest\n): Promise<SendPhoneVerificationCodeResponse> {\n  return _performApiRequest<\n    SendPhoneVerificationCodeRequest,\n    SendPhoneVerificationCodeResponse\n  >(\n    auth,\n    HttpMethod.POST,\n    Endpoint.SEND_VERIFICATION_CODE,\n    _addTidIfNecessary(auth, request)\n  );\n}\n\n/**\n * @internal\n */\nexport interface SignInWithPhoneNumberRequest {\n  temporaryProof?: string;\n  phoneNumber?: string;\n  sessionInfo?: string;\n  code?: string;\n  tenantId?: string;\n}\n\nexport interface LinkWithPhoneNumberRequest\n  extends SignInWithPhoneNumberRequest {\n  idToken: string;\n}\n\n/**\n * @internal\n */\nexport interface SignInWithPhoneNumberResponse extends IdTokenResponse {\n  temporaryProof?: string;\n  phoneNumber?: string;\n}\n\nexport async function signInWithPhoneNumber(\n  auth: Auth,\n  request: SignInWithPhoneNumberRequest\n): Promise<SignInWithPhoneNumberResponse> {\n  return _performSignInRequest<\n    SignInWithPhoneNumberRequest,\n    SignInWithPhoneNumberResponse\n  >(\n    auth,\n    HttpMethod.POST,\n    Endpoint.SIGN_IN_WITH_PHONE_NUMBER,\n    _addTidIfNecessary(auth, request)\n  );\n}\n\nexport async function linkWithPhoneNumber(\n  auth: Auth,\n  request: LinkWithPhoneNumberRequest\n): Promise<SignInWithPhoneNumberResponse> {\n  const response = await _performSignInRequest<\n    LinkWithPhoneNumberRequest,\n    SignInWithPhoneNumberResponse\n  >(\n    auth,\n    HttpMethod.POST,\n    Endpoint.SIGN_IN_WITH_PHONE_NUMBER,\n    _addTidIfNecessary(auth, request)\n  );\n  if (response.temporaryProof) {\n    throw _makeTaggedError(auth, AuthErrorCode.NEED_CONFIRMATION, response);\n  }\n  return response;\n}\n\ninterface VerifyPhoneNumberForExistingRequest\n  extends SignInWithPhoneNumberRequest {\n  operation: 'REAUTH';\n}\n\nconst VERIFY_PHONE_NUMBER_FOR_EXISTING_ERROR_MAP_: Partial<\n  ServerErrorMap<ServerError>\n> = {\n  [ServerError.USER_NOT_FOUND]: AuthErrorCode.USER_DELETED\n};\n\nexport async function verifyPhoneNumberForExisting(\n  auth: Auth,\n  request: SignInWithPhoneNumberRequest\n): Promise<SignInWithPhoneNumberResponse> {\n  const apiRequest: VerifyPhoneNumberForExistingRequest = {\n    ...request,\n    operation: 'REAUTH'\n  };\n  return _performSignInRequest<\n    VerifyPhoneNumberForExistingRequest,\n    SignInWithPhoneNumberResponse\n  >(\n    auth,\n    HttpMethod.POST,\n    Endpoint.SIGN_IN_WITH_PHONE_NUMBER,\n    _addTidIfNecessary(auth, apiRequest),\n    VERIFY_PHONE_NUMBER_FOR_EXISTING_ERROR_MAP_\n  );\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { ProviderId, SignInMethod } from '../../model/enums';\n\nimport { PhoneOrOauthTokenResponse } from '../../api/authentication/mfa';\nimport {\n  linkWithPhoneNumber,\n  signInWithPhoneNumber,\n  SignInWithPhoneNumberRequest,\n  verifyPhoneNumberForExisting\n} from '../../api/authentication/sms';\nimport { AuthInternal } from '../../model/auth';\nimport { IdTokenResponse } from '../../model/id_token';\nimport { AuthCredential } from './auth_credential';\n\nexport interface PhoneAuthCredentialParameters {\n  verificationId?: string;\n  verificationCode?: string;\n  phoneNumber?: string;\n  temporaryProof?: string;\n}\n\n/**\n * Represents the credentials returned by {@link PhoneAuthProvider}.\n *\n * @public\n */\nexport class PhoneAuthCredential extends AuthCredential {\n  private constructor(private readonly params: PhoneAuthCredentialParameters) {\n    super(ProviderId.PHONE, SignInMethod.PHONE);\n  }\n\n  /** @internal */\n  static _fromVerification(\n    verificationId: string,\n    verificationCode: string\n  ): PhoneAuthCredential {\n    return new PhoneAuthCredential({ verificationId, verificationCode });\n  }\n\n  /** @internal */\n  static _fromTokenResponse(\n    phoneNumber: string,\n    temporaryProof: string\n  ): PhoneAuthCredential {\n    return new PhoneAuthCredential({ phoneNumber, temporaryProof });\n  }\n\n  /** @internal */\n  _getIdTokenResponse(auth: AuthInternal): Promise<PhoneOrOauthTokenResponse> {\n    return signInWithPhoneNumber(auth, this._makeVerificationRequest());\n  }\n\n  /** @internal */\n  _linkToIdToken(\n    auth: AuthInternal,\n    idToken: string\n  ): Promise<IdTokenResponse> {\n    return linkWithPhoneNumber(auth, {\n      idToken,\n      ...this._makeVerificationRequest()\n    });\n  }\n\n  /** @internal */\n  _getReauthenticationResolver(auth: AuthInternal): Promise<IdTokenResponse> {\n    return verifyPhoneNumberForExisting(auth, this._makeVerificationRequest());\n  }\n\n  /** @internal */\n  _makeVerificationRequest(): SignInWithPhoneNumberRequest {\n    const { temporaryProof, phoneNumber, verificationId, verificationCode } =\n      this.params;\n    if (temporaryProof && phoneNumber) {\n      return { temporaryProof, phoneNumber };\n    }\n\n    return {\n      sessionInfo: verificationId,\n      code: verificationCode\n    };\n  }\n\n  /** {@inheritdoc AuthCredential.toJSON} */\n  toJSON(): object {\n    const obj: Record<string, string> = {\n      providerId: this.providerId\n    };\n    if (this.params.phoneNumber) {\n      obj.phoneNumber = this.params.phoneNumber;\n    }\n    if (this.params.temporaryProof) {\n      obj.temporaryProof = this.params.temporaryProof;\n    }\n    if (this.params.verificationCode) {\n      obj.verificationCode = this.params.verificationCode;\n    }\n    if (this.params.verificationId) {\n      obj.verificationId = this.params.verificationId;\n    }\n\n    return obj;\n  }\n\n  /** Generates a phone credential based on a plain object or a JSON string. */\n  static fromJSON(json: object | string): PhoneAuthCredential | null {\n    if (typeof json === 'string') {\n      json = JSON.parse(json);\n    }\n\n    const { verificationId, verificationCode, phoneNumber, temporaryProof } =\n      json as { [key: string]: string };\n    if (\n      !verificationCode &&\n      !verificationId &&\n      !phoneNumber &&\n      !temporaryProof\n    ) {\n      return null;\n    }\n\n    return new PhoneAuthCredential({\n      verificationId,\n      verificationCode,\n      phoneNumber,\n      temporaryProof\n    });\n  }\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { extractQuerystring, querystringDecode } from '@firebase/util';\nimport { ActionCodeOperation } from '../model/public_types';\nimport { AuthErrorCode } from './errors';\nimport { _assert } from './util/assert';\n\n/**\n * Enums for fields in URL query string.\n *\n * @enum {string}\n */\nconst enum QueryField {\n  API_KEY = 'apiKey',\n  CODE = 'oobCode',\n  CONTINUE_URL = 'continueUrl',\n  LANGUAGE_CODE = 'lang',\n  MODE = 'mode',\n  TENANT_ID = 'tenantId'\n}\n\n/**\n * Maps the mode string in action code URL to Action Code Info operation.\n *\n * @param mode\n */\nfunction parseMode(mode: string | null): ActionCodeOperation | null {\n  switch (mode) {\n    case 'recoverEmail':\n      return ActionCodeOperation.RECOVER_EMAIL;\n    case 'resetPassword':\n      return ActionCodeOperation.PASSWORD_RESET;\n    case 'signIn':\n      return ActionCodeOperation.EMAIL_SIGNIN;\n    case 'verifyEmail':\n      return ActionCodeOperation.VERIFY_EMAIL;\n    case 'verifyAndChangeEmail':\n      return ActionCodeOperation.VERIFY_AND_CHANGE_EMAIL;\n    case 'revertSecondFactorAddition':\n      return ActionCodeOperation.REVERT_SECOND_FACTOR_ADDITION;\n    default:\n      return null;\n  }\n}\n\n/**\n * Helper to parse FDL links\n *\n * @param url\n */\nfunction parseDeepLink(url: string): string {\n  const link = querystringDecode(extractQuerystring(url))['link'];\n\n  // Double link case (automatic redirect).\n  const doubleDeepLink = link\n    ? querystringDecode(extractQuerystring(link))['deep_link_id']\n    : null;\n  // iOS custom scheme links.\n  const iOSDeepLink = querystringDecode(extractQuerystring(url))[\n    'deep_link_id'\n  ];\n  const iOSDoubleDeepLink = iOSDeepLink\n    ? querystringDecode(extractQuerystring(iOSDeepLink))['link']\n    : null;\n  return iOSDoubleDeepLink || iOSDeepLink || doubleDeepLink || link || url;\n}\n\n/**\n * A utility class to parse email action URLs such as password reset, email verification,\n * email link sign in, etc.\n *\n * @public\n */\nexport class ActionCodeURL {\n  /**\n   * The API key of the email action link.\n   */\n  readonly apiKey: string;\n  /**\n   * The action code of the email action link.\n   */\n  readonly code: string;\n  /**\n   * The continue URL of the email action link. Null if not provided.\n   */\n  readonly continueUrl: string | null;\n  /**\n   * The language code of the email action link. Null if not provided.\n   */\n  readonly languageCode: string | null;\n  /**\n   * The action performed by the email action link. It returns from one of the types from\n   * {@link ActionCodeInfo}\n   */\n  readonly operation: string;\n  /**\n   * The tenant ID of the email action link. Null if the email action is from the parent project.\n   */\n  readonly tenantId: string | null;\n\n  /**\n   * @param actionLink - The link from which to extract the URL.\n   * @returns The {@link ActionCodeURL} object, or null if the link is invalid.\n   *\n   * @internal\n   */\n  constructor(actionLink: string) {\n    const searchParams = querystringDecode(extractQuerystring(actionLink));\n    const apiKey = searchParams[QueryField.API_KEY] ?? null;\n    const code = searchParams[QueryField.CODE] ?? null;\n    const operation = parseMode(searchParams[QueryField.MODE] ?? null);\n    // Validate API key, code and mode.\n    _assert(apiKey && code && operation, AuthErrorCode.ARGUMENT_ERROR);\n    this.apiKey = apiKey;\n    this.operation = operation;\n    this.code = code;\n    this.continueUrl = searchParams[QueryField.CONTINUE_URL] ?? null;\n    this.languageCode = searchParams[QueryField.LANGUAGE_CODE] ?? null;\n    this.tenantId = searchParams[QueryField.TENANT_ID] ?? null;\n  }\n\n  /**\n   * Parses the email action link string and returns an {@link ActionCodeURL} if the link is valid,\n   * otherwise returns null.\n   *\n   * @param link  - The email action link string.\n   * @returns The {@link ActionCodeURL} object, or null if the link is invalid.\n   *\n   * @public\n   */\n  static parseLink(link: string): ActionCodeURL | null {\n    const actionLink = parseDeepLink(link);\n    try {\n      return new ActionCodeURL(actionLink);\n    } catch {\n      return null;\n    }\n  }\n}\n\n/**\n * Parses the email action link string and returns an {@link ActionCodeURL} if\n * the link is valid, otherwise returns null.\n *\n * @public\n */\nexport function parseActionCodeURL(link: string): ActionCodeURL | null {\n  return ActionCodeURL.parseLink(link);\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { ProviderId, SignInMethod } from '../../model/enums';\nimport { AuthProvider } from '../../model/public_types';\n\nimport { ActionCodeURL } from '../action_code_url';\nimport { EmailAuthCredential } from '../credentials/email';\nimport { AuthErrorCode } from '../errors';\nimport { _assert } from '../util/assert';\n\n/**\n * Provider for generating {@link EmailAuthCredential}.\n *\n * @public\n */\nexport class EmailAuthProvider implements AuthProvider {\n  /**\n   * Always set to {@link ProviderId}.PASSWORD, even for email link.\n   */\n  static readonly PROVIDER_ID: 'password' = ProviderId.PASSWORD;\n  /**\n   * Always set to {@link SignInMethod}.EMAIL_PASSWORD.\n   */\n  static readonly EMAIL_PASSWORD_SIGN_IN_METHOD: 'password' =\n    SignInMethod.EMAIL_PASSWORD;\n  /**\n   * Always set to {@link SignInMethod}.EMAIL_LINK.\n   */\n  static readonly EMAIL_LINK_SIGN_IN_METHOD: 'emailLink' =\n    SignInMethod.EMAIL_LINK;\n  /**\n   * Always set to {@link ProviderId}.PASSWORD, even for email link.\n   */\n  readonly providerId = EmailAuthProvider.PROVIDER_ID;\n\n  /**\n   * Initialize an {@link AuthCredential} using an email and password.\n   *\n   * @example\n   * ```javascript\n   * const authCredential = EmailAuthProvider.credential(email, password);\n   * const userCredential = await signInWithCredential(auth, authCredential);\n   * ```\n   *\n   * @example\n   * ```javascript\n   * const userCredential = await signInWithEmailAndPassword(auth, email, password);\n   * ```\n   *\n   * @param email - Email address.\n   * @param password - User account password.\n   * @returns The auth provider credential.\n   */\n  static credential(email: string, password: string): EmailAuthCredential {\n    return EmailAuthCredential._fromEmailAndPassword(email, password);\n  }\n\n  /**\n   * Initialize an {@link AuthCredential} using an email and an email link after a sign in with\n   * email link operation.\n   *\n   * @example\n   * ```javascript\n   * const authCredential = EmailAuthProvider.credentialWithLink(auth, email, emailLink);\n   * const userCredential = await signInWithCredential(auth, authCredential);\n   * ```\n   *\n   * @example\n   * ```javascript\n   * await sendSignInLinkToEmail(auth, email);\n   * // Obtain emailLink from user.\n   * const userCredential = await signInWithEmailLink(auth, email, emailLink);\n   * ```\n   *\n   * @param auth - The {@link Auth} instance used to verify the link.\n   * @param email - Email address.\n   * @param emailLink - Sign-in email link.\n   * @returns - The auth provider credential.\n   */\n  static credentialWithLink(\n    email: string,\n    emailLink: string\n  ): EmailAuthCredential {\n    const actionCodeUrl = ActionCodeURL.parseLink(emailLink);\n    _assert(actionCodeUrl, AuthErrorCode.ARGUMENT_ERROR);\n\n    return EmailAuthCredential._fromEmailAndCode(\n      email,\n      actionCodeUrl.code,\n      actionCodeUrl.tenantId\n    );\n  }\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { AuthProvider } from '../../model/public_types';\n\n/**\n * Map of OAuth Custom Parameters.\n *\n * @public\n */\nexport type CustomParameters = Record<string, string>;\n\n/**\n * The base class for all Federated providers (OAuth (including OIDC), SAML).\n *\n * This class is not meant to be instantiated directly.\n *\n * @public\n */\nexport abstract class FederatedAuthProvider implements AuthProvider {\n  /** @internal */\n  defaultLanguageCode: string | null = null;\n  /** @internal */\n  private customParameters: CustomParameters = {};\n\n  /**\n   * Constructor for generic OAuth providers.\n   *\n   * @param providerId - Provider for which credentials should be generated.\n   */\n  constructor(readonly providerId: string) {}\n\n  /**\n   * Set the language gode.\n   *\n   * @param languageCode - language code\n   */\n  setDefaultLanguage(languageCode: string | null): void {\n    this.defaultLanguageCode = languageCode;\n  }\n\n  /**\n   * Sets the OAuth custom parameters to pass in an OAuth request for popup and redirect sign-in\n   * operations.\n   *\n   * @remarks\n   * For a detailed list, check the reserved required OAuth 2.0 parameters such as `client_id`,\n   * `redirect_uri`, `scope`, `response_type`, and `state` are not allowed and will be ignored.\n   *\n   * @param customOAuthParameters - The custom OAuth parameters to pass in the OAuth request.\n   */\n  setCustomParameters(customOAuthParameters: CustomParameters): AuthProvider {\n    this.customParameters = customOAuthParameters;\n    return this;\n  }\n\n  /**\n   * Retrieve the current list of {@link CustomParameters}.\n   */\n  getCustomParameters(): CustomParameters {\n    return this.customParameters;\n  }\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { AuthProvider, UserCredential } from '../../model/public_types';\n\nimport { _assert } from '../util/assert';\nimport { AuthErrorCode } from '../errors';\n\nimport { OAuthCredential, OAuthCredentialParams } from '../credentials/oauth';\nimport { UserCredentialInternal } from '../../model/user';\nimport { FirebaseError } from '@firebase/util';\nimport { TaggedWithTokenResponse } from '../../model/id_token';\nimport { SignInWithIdpResponse } from '../../../internal';\nimport { FederatedAuthProvider } from './federated';\n\n/**\n * Defines the options for initializing an {@link OAuthCredential}.\n *\n * @remarks\n * For ID tokens with nonce claim, the raw nonce has to also be provided.\n *\n * @public\n */\nexport interface OAuthCredentialOptions {\n  /**\n   * The OAuth ID token used to initialize the {@link OAuthCredential}.\n   */\n  idToken?: string;\n  /**\n   * The OAuth access token used to initialize the {@link OAuthCredential}.\n   */\n  accessToken?: string;\n  /**\n   * The raw nonce associated with the ID token.\n   *\n   * @remarks\n   * It is required when an ID token with a nonce field is provided. The SHA-256 hash of the\n   * raw nonce must match the nonce field in the ID token.\n   */\n  rawNonce?: string;\n}\n\n/**\n * Common code to all OAuth providers. This is separate from the\n * {@link OAuthProvider} so that child providers (like\n * {@link GoogleAuthProvider}) don't inherit the `credential` instance method.\n * Instead, they rely on a static `credential` method.\n */\nexport abstract class BaseOAuthProvider\n  extends FederatedAuthProvider\n  implements AuthProvider\n{\n  /** @internal */\n  private scopes: string[] = [];\n\n  /**\n   * Add an OAuth scope to the credential.\n   *\n   * @param scope - Provider OAuth scope to add.\n   */\n  addScope(scope: string): AuthProvider {\n    // If not already added, add scope to list.\n    if (!this.scopes.includes(scope)) {\n      this.scopes.push(scope);\n    }\n    return this;\n  }\n\n  /**\n   * Retrieve the current list of OAuth scopes.\n   */\n  getScopes(): string[] {\n    return [...this.scopes];\n  }\n}\n\n/**\n * Provider for generating generic {@link OAuthCredential}.\n *\n * @example\n * ```javascript\n * // Sign in using a redirect.\n * const provider = new OAuthProvider('google.com');\n * // Start a sign in process for an unauthenticated user.\n * provider.addScope('profile');\n * provider.addScope('email');\n * await signInWithRedirect(auth, provider);\n * // This will trigger a full page redirect away from your app\n *\n * // After returning from the redirect when your app initializes you can obtain the result\n * const result = await getRedirectResult(auth);\n * if (result) {\n *   // This is the signed-in user\n *   const user = result.user;\n *   // This gives you a OAuth Access Token for the provider.\n *   const credential = provider.credentialFromResult(auth, result);\n *   const token = credential.accessToken;\n * }\n * ```\n *\n * @example\n * ```javascript\n * // Sign in using a popup.\n * const provider = new OAuthProvider('google.com');\n * provider.addScope('profile');\n * provider.addScope('email');\n * const result = await signInWithPopup(auth, provider);\n *\n * // The signed-in user info.\n * const user = result.user;\n * // This gives you a OAuth Access Token for the provider.\n * const credential = provider.credentialFromResult(auth, result);\n * const token = credential.accessToken;\n * ```\n * @public\n */\nexport class OAuthProvider extends BaseOAuthProvider {\n  /**\n   * Creates an {@link OAuthCredential} from a JSON string or a plain object.\n   * @param json - A plain object or a JSON string\n   */\n  static credentialFromJSON(json: object | string): OAuthCredential {\n    const obj = typeof json === 'string' ? JSON.parse(json) : json;\n    _assert(\n      'providerId' in obj && 'signInMethod' in obj,\n      AuthErrorCode.ARGUMENT_ERROR\n    );\n    return OAuthCredential._fromParams(obj);\n  }\n\n  /**\n   * Creates a {@link OAuthCredential} from a generic OAuth provider's access token or ID token.\n   *\n   * @remarks\n   * The raw nonce is required when an ID token with a nonce field is provided. The SHA-256 hash of\n   * the raw nonce must match the nonce field in the ID token.\n   *\n   * @example\n   * ```javascript\n   * // `googleUser` from the onsuccess Google Sign In callback.\n   * // Initialize a generate OAuth provider with a `google.com` providerId.\n   * const provider = new OAuthProvider('google.com');\n   * const credential = provider.credential({\n   *   idToken: googleUser.getAuthResponse().id_token,\n   * });\n   * const result = await signInWithCredential(credential);\n   * ```\n   *\n   * @param params - Either the options object containing the ID token, access token and raw nonce\n   * or the ID token string.\n   */\n  credential(params: OAuthCredentialOptions): OAuthCredential {\n    return this._credential({ ...params, nonce: params.rawNonce });\n  }\n\n  /** An internal credential method that accepts more permissive options */\n  private _credential(\n    params: Omit<OAuthCredentialParams, 'signInMethod' | 'providerId'>\n  ): OAuthCredential {\n    _assert(params.idToken || params.accessToken, AuthErrorCode.ARGUMENT_ERROR);\n    // For OAuthCredential, sign in method is same as providerId.\n    return OAuthCredential._fromParams({\n      ...params,\n      providerId: this.providerId,\n      signInMethod: this.providerId\n    });\n  }\n\n  /**\n   * Used to extract the underlying {@link OAuthCredential} from a {@link UserCredential}.\n   *\n   * @param userCredential - The user credential.\n   */\n  static credentialFromResult(\n    userCredential: UserCredential\n  ): OAuthCredential | null {\n    return OAuthProvider.oauthCredentialFromTaggedObject(\n      userCredential as UserCredentialInternal\n    );\n  }\n  /**\n   * Used to extract the underlying {@link OAuthCredential} from a {@link AuthError} which was\n   * thrown during a sign-in, link, or reauthenticate operation.\n   *\n   * @param userCredential - The user credential.\n   */\n  static credentialFromError(error: FirebaseError): OAuthCredential | null {\n    return OAuthProvider.oauthCredentialFromTaggedObject(\n      (error.customData || {}) as TaggedWithTokenResponse\n    );\n  }\n\n  private static oauthCredentialFromTaggedObject({\n    _tokenResponse: tokenResponse\n  }: TaggedWithTokenResponse): OAuthCredential | null {\n    if (!tokenResponse) {\n      return null;\n    }\n\n    const {\n      oauthIdToken,\n      oauthAccessToken,\n      oauthTokenSecret,\n      pendingToken,\n      nonce,\n      providerId\n    } = tokenResponse as SignInWithIdpResponse;\n    if (\n      !oauthAccessToken &&\n      !oauthTokenSecret &&\n      !oauthIdToken &&\n      !pendingToken\n    ) {\n      return null;\n    }\n\n    if (!providerId) {\n      return null;\n    }\n\n    try {\n      return new OAuthProvider(providerId)._credential({\n        idToken: oauthIdToken,\n        accessToken: oauthAccessToken,\n        nonce,\n        pendingToken\n      });\n    } catch (e) {\n      return null;\n    }\n  }\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { UserCredential } from '../../model/public_types';\nimport { FirebaseError } from '@firebase/util';\n\nimport { TaggedWithTokenResponse } from '../../model/id_token';\nimport { UserCredentialInternal } from '../../model/user';\nimport { OAuthCredential } from '../credentials/oauth';\nimport { BaseOAuthProvider } from './oauth';\nimport { ProviderId, SignInMethod } from '../../model/enums';\n\n/**\n * Provider for generating an {@link OAuthCredential} for {@link ProviderId}.FACEBOOK.\n *\n * @example\n * ```javascript\n * // Sign in using a redirect.\n * const provider = new FacebookAuthProvider();\n * // Start a sign in process for an unauthenticated user.\n * provider.addScope('user_birthday');\n * await signInWithRedirect(auth, provider);\n * // This will trigger a full page redirect away from your app\n *\n * // After returning from the redirect when your app initializes you can obtain the result\n * const result = await getRedirectResult(auth);\n * if (result) {\n *   // This is the signed-in user\n *   const user = result.user;\n *   // This gives you a Facebook Access Token.\n *   const credential = FacebookAuthProvider.credentialFromResult(result);\n *   const token = credential.accessToken;\n * }\n * ```\n *\n * @example\n * ```javascript\n * // Sign in using a popup.\n * const provider = new FacebookAuthProvider();\n * provider.addScope('user_birthday');\n * const result = await signInWithPopup(auth, provider);\n *\n * // The signed-in user info.\n * const user = result.user;\n * // This gives you a Facebook Access Token.\n * const credential = FacebookAuthProvider.credentialFromResult(result);\n * const token = credential.accessToken;\n * ```\n *\n * @public\n */\nexport class FacebookAuthProvider extends BaseOAuthProvider {\n  /** Always set to {@link SignInMethod}.FACEBOOK. */\n  static readonly FACEBOOK_SIGN_IN_METHOD: 'facebook.com' =\n    SignInMethod.FACEBOOK;\n  /** Always set to {@link ProviderId}.FACEBOOK. */\n  static readonly PROVIDER_ID: 'facebook.com' = ProviderId.FACEBOOK;\n\n  constructor() {\n    super(ProviderId.FACEBOOK);\n  }\n\n  /**\n   * Creates a credential for Facebook.\n   *\n   * @example\n   * ```javascript\n   * // `event` from the Facebook auth.authResponseChange callback.\n   * const credential = FacebookAuthProvider.credential(event.authResponse.accessToken);\n   * const result = await signInWithCredential(credential);\n   * ```\n   *\n   * @param accessToken - Facebook access token.\n   */\n  static credential(accessToken: string): OAuthCredential {\n    return OAuthCredential._fromParams({\n      providerId: FacebookAuthProvider.PROVIDER_ID,\n      signInMethod: FacebookAuthProvider.FACEBOOK_SIGN_IN_METHOD,\n      accessToken\n    });\n  }\n\n  /**\n   * Used to extract the underlying {@link OAuthCredential} from a {@link UserCredential}.\n   *\n   * @param userCredential - The user credential.\n   */\n  static credentialFromResult(\n    userCredential: UserCredential\n  ): OAuthCredential | null {\n    return FacebookAuthProvider.credentialFromTaggedObject(\n      userCredential as UserCredentialInternal\n    );\n  }\n\n  /**\n   * Used to extract the underlying {@link OAuthCredential} from a {@link AuthError} which was\n   * thrown during a sign-in, link, or reauthenticate operation.\n   *\n   * @param userCredential - The user credential.\n   */\n  static credentialFromError(error: FirebaseError): OAuthCredential | null {\n    return FacebookAuthProvider.credentialFromTaggedObject(\n      (error.customData || {}) as TaggedWithTokenResponse\n    );\n  }\n\n  private static credentialFromTaggedObject({\n    _tokenResponse: tokenResponse\n  }: TaggedWithTokenResponse): OAuthCredential | null {\n    if (!tokenResponse || !('oauthAccessToken' in tokenResponse)) {\n      return null;\n    }\n\n    if (!tokenResponse.oauthAccessToken) {\n      return null;\n    }\n\n    try {\n      return FacebookAuthProvider.credential(tokenResponse.oauthAccessToken);\n    } catch {\n      return null;\n    }\n  }\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { UserCredential } from '../../model/public_types';\nimport { FirebaseError } from '@firebase/util';\n\nimport { SignInWithIdpResponse } from '../../api/authentication/idp';\nimport { TaggedWithTokenResponse } from '../../model/id_token';\nimport { UserCredentialInternal } from '../../model/user';\nimport { OAuthCredential } from '../credentials/oauth';\nimport { BaseOAuthProvider } from './oauth';\nimport { ProviderId, SignInMethod } from '../../model/enums';\n\n/**\n * Provider for generating an {@link OAuthCredential} for {@link ProviderId}.GOOGLE.\n *\n * @example\n * ```javascript\n * // Sign in using a redirect.\n * const provider = new GoogleAuthProvider();\n * // Start a sign in process for an unauthenticated user.\n * provider.addScope('profile');\n * provider.addScope('email');\n * await signInWithRedirect(auth, provider);\n * // This will trigger a full page redirect away from your app\n *\n * // After returning from the redirect when your app initializes you can obtain the result\n * const result = await getRedirectResult(auth);\n * if (result) {\n *   // This is the signed-in user\n *   const user = result.user;\n *   // This gives you a Google Access Token.\n *   const credential = GoogleAuthProvider.credentialFromResult(result);\n *   const token = credential.accessToken;\n * }\n * ```\n *\n * @example\n * ```javascript\n * // Sign in using a popup.\n * const provider = new GoogleAuthProvider();\n * provider.addScope('profile');\n * provider.addScope('email');\n * const result = await signInWithPopup(auth, provider);\n *\n * // The signed-in user info.\n * const user = result.user;\n * // This gives you a Google Access Token.\n * const credential = GoogleAuthProvider.credentialFromResult(result);\n * const token = credential.accessToken;\n * ```\n *\n * @public\n */\nexport class GoogleAuthProvider extends BaseOAuthProvider {\n  /** Always set to {@link SignInMethod}.GOOGLE. */\n  static readonly GOOGLE_SIGN_IN_METHOD: 'google.com' = SignInMethod.GOOGLE;\n  /** Always set to {@link ProviderId}.GOOGLE. */\n  static readonly PROVIDER_ID: 'google.com' = ProviderId.GOOGLE;\n\n  constructor() {\n    super(ProviderId.GOOGLE);\n    this.addScope('profile');\n  }\n\n  /**\n   * Creates a credential for Google. At least one of ID token and access token is required.\n   *\n   * @example\n   * ```javascript\n   * // \\`googleUser\\` from the onsuccess Google Sign In callback.\n   * const credential = GoogleAuthProvider.credential(googleUser.getAuthResponse().id_token);\n   * const result = await signInWithCredential(credential);\n   * ```\n   *\n   * @param idToken - Google ID token.\n   * @param accessToken - Google access token.\n   */\n  static credential(\n    idToken?: string | null,\n    accessToken?: string | null\n  ): OAuthCredential {\n    return OAuthCredential._fromParams({\n      providerId: GoogleAuthProvider.PROVIDER_ID,\n      signInMethod: GoogleAuthProvider.GOOGLE_SIGN_IN_METHOD,\n      idToken,\n      accessToken\n    });\n  }\n\n  /**\n   * Used to extract the underlying {@link OAuthCredential} from a {@link UserCredential}.\n   *\n   * @param userCredential - The user credential.\n   */\n  static credentialFromResult(\n    userCredential: UserCredential\n  ): OAuthCredential | null {\n    return GoogleAuthProvider.credentialFromTaggedObject(\n      userCredential as UserCredentialInternal\n    );\n  }\n  /**\n   * Used to extract the underlying {@link OAuthCredential} from a {@link AuthError} which was\n   * thrown during a sign-in, link, or reauthenticate operation.\n   *\n   * @param userCredential - The user credential.\n   */\n  static credentialFromError(error: FirebaseError): OAuthCredential | null {\n    return GoogleAuthProvider.credentialFromTaggedObject(\n      (error.customData || {}) as TaggedWithTokenResponse\n    );\n  }\n\n  private static credentialFromTaggedObject({\n    _tokenResponse: tokenResponse\n  }: TaggedWithTokenResponse): OAuthCredential | null {\n    if (!tokenResponse) {\n      return null;\n    }\n\n    const { oauthIdToken, oauthAccessToken } =\n      tokenResponse as SignInWithIdpResponse;\n    if (!oauthIdToken && !oauthAccessToken) {\n      // This could be an oauth 1 credential or a phone credential\n      return null;\n    }\n\n    try {\n      return GoogleAuthProvider.credential(oauthIdToken, oauthAccessToken);\n    } catch {\n      return null;\n    }\n  }\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { UserCredential } from '../../model/public_types';\nimport { FirebaseError } from '@firebase/util';\n\nimport { TaggedWithTokenResponse } from '../../model/id_token';\nimport { UserCredentialInternal } from '../../model/user';\nimport { OAuthCredential } from '../credentials/oauth';\nimport { BaseOAuthProvider } from './oauth';\nimport { ProviderId, SignInMethod } from '../../model/enums';\n\n/**\n * Provider for generating an {@link OAuthCredential} for {@link ProviderId}.GITHUB.\n *\n * @remarks\n * GitHub requires an OAuth 2.0 redirect, so you can either handle the redirect directly, or use\n * the {@link signInWithPopup} handler:\n *\n * @example\n * ```javascript\n * // Sign in using a redirect.\n * const provider = new GithubAuthProvider();\n * // Start a sign in process for an unauthenticated user.\n * provider.addScope('repo');\n * await signInWithRedirect(auth, provider);\n * // This will trigger a full page redirect away from your app\n *\n * // After returning from the redirect when your app initializes you can obtain the result\n * const result = await getRedirectResult(auth);\n * if (result) {\n *   // This is the signed-in user\n *   const user = result.user;\n *   // This gives you a GitHub Access Token.\n *   const credential = GithubAuthProvider.credentialFromResult(result);\n *   const token = credential.accessToken;\n * }\n * ```\n *\n * @example\n * ```javascript\n * // Sign in using a popup.\n * const provider = new GithubAuthProvider();\n * provider.addScope('repo');\n * const result = await signInWithPopup(auth, provider);\n *\n * // The signed-in user info.\n * const user = result.user;\n * // This gives you a GitHub Access Token.\n * const credential = GithubAuthProvider.credentialFromResult(result);\n * const token = credential.accessToken;\n * ```\n * @public\n */\nexport class GithubAuthProvider extends BaseOAuthProvider {\n  /** Always set to {@link SignInMethod}.GITHUB. */\n  static readonly GITHUB_SIGN_IN_METHOD: 'github.com' = SignInMethod.GITHUB;\n  /** Always set to {@link ProviderId}.GITHUB. */\n  static readonly PROVIDER_ID: 'github.com' = ProviderId.GITHUB;\n\n  constructor() {\n    super(ProviderId.GITHUB);\n  }\n\n  /**\n   * Creates a credential for GitHub.\n   *\n   * @param accessToken - GitHub access token.\n   */\n  static credential(accessToken: string): OAuthCredential {\n    return OAuthCredential._fromParams({\n      providerId: GithubAuthProvider.PROVIDER_ID,\n      signInMethod: GithubAuthProvider.GITHUB_SIGN_IN_METHOD,\n      accessToken\n    });\n  }\n\n  /**\n   * Used to extract the underlying {@link OAuthCredential} from a {@link UserCredential}.\n   *\n   * @param userCredential - The user credential.\n   */\n  static credentialFromResult(\n    userCredential: UserCredential\n  ): OAuthCredential | null {\n    return GithubAuthProvider.credentialFromTaggedObject(\n      userCredential as UserCredentialInternal\n    );\n  }\n\n  /**\n   * Used to extract the underlying {@link OAuthCredential} from a {@link AuthError} which was\n   * thrown during a sign-in, link, or reauthenticate operation.\n   *\n   * @param userCredential - The user credential.\n   */\n  static credentialFromError(error: FirebaseError): OAuthCredential | null {\n    return GithubAuthProvider.credentialFromTaggedObject(\n      (error.customData || {}) as TaggedWithTokenResponse\n    );\n  }\n\n  private static credentialFromTaggedObject({\n    _tokenResponse: tokenResponse\n  }: TaggedWithTokenResponse): OAuthCredential | null {\n    if (!tokenResponse || !('oauthAccessToken' in tokenResponse)) {\n      return null;\n    }\n\n    if (!tokenResponse.oauthAccessToken) {\n      return null;\n    }\n\n    try {\n      return GithubAuthProvider.credential(tokenResponse.oauthAccessToken);\n    } catch {\n      return null;\n    }\n  }\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @license\n * Copyright 2020 Twitter LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { UserCredential } from '../../model/public_types';\nimport { FirebaseError } from '@firebase/util';\n\nimport { SignInWithIdpResponse } from '../../api/authentication/idp';\nimport { TaggedWithTokenResponse } from '../../model/id_token';\nimport { UserCredentialInternal } from '../../model/user';\nimport { OAuthCredential } from '../credentials/oauth';\nimport { BaseOAuthProvider } from './oauth';\nimport { ProviderId, SignInMethod } from '../../model/enums';\n\n/**\n * Provider for generating an {@link OAuthCredential} for {@link ProviderId}.TWITTER.\n *\n * @example\n * ```javascript\n * // Sign in using a redirect.\n * const provider = new TwitterAuthProvider();\n * // Start a sign in process for an unauthenticated user.\n * await signInWithRedirect(auth, provider);\n * // This will trigger a full page redirect away from your app\n *\n * // After returning from the redirect when your app initializes you can obtain the result\n * const result = await getRedirectResult(auth);\n * if (result) {\n *   // This is the signed-in user\n *   const user = result.user;\n *   // This gives you a Twitter Access Token and Secret.\n *   const credential = TwitterAuthProvider.credentialFromResult(result);\n *   const token = credential.accessToken;\n *   const secret = credential.secret;\n * }\n * ```\n *\n * @example\n * ```javascript\n * // Sign in using a popup.\n * const provider = new TwitterAuthProvider();\n * const result = await signInWithPopup(auth, provider);\n *\n * // The signed-in user info.\n * const user = result.user;\n * // This gives you a Twitter Access Token and Secret.\n * const credential = TwitterAuthProvider.credentialFromResult(result);\n * const token = credential.accessToken;\n * const secret = credential.secret;\n * ```\n *\n * @public\n */\nexport class TwitterAuthProvider extends BaseOAuthProvider {\n  /** Always set to {@link SignInMethod}.TWITTER. */\n  static readonly TWITTER_SIGN_IN_METHOD: 'twitter.com' = SignInMethod.TWITTER;\n  /** Always set to {@link ProviderId}.TWITTER. */\n  static readonly PROVIDER_ID: 'twitter.com' = ProviderId.TWITTER;\n\n  constructor() {\n    super(ProviderId.TWITTER);\n  }\n\n  /**\n   * Creates a credential for Twitter.\n   *\n   * @param token - Twitter access token.\n   * @param secret - Twitter secret.\n   */\n  static credential(token: string, secret: string): OAuthCredential {\n    return OAuthCredential._fromParams({\n      providerId: TwitterAuthProvider.PROVIDER_ID,\n      signInMethod: TwitterAuthProvider.TWITTER_SIGN_IN_METHOD,\n      oauthToken: token,\n      oauthTokenSecret: secret\n    });\n  }\n\n  /**\n   * Used to extract the underlying {@link OAuthCredential} from a {@link UserCredential}.\n   *\n   * @param userCredential - The user credential.\n   */\n  static credentialFromResult(\n    userCredential: UserCredential\n  ): OAuthCredential | null {\n    return TwitterAuthProvider.credentialFromTaggedObject(\n      userCredential as UserCredentialInternal\n    );\n  }\n\n  /**\n   * Used to extract the underlying {@link OAuthCredential} from a {@link AuthError} which was\n   * thrown during a sign-in, link, or reauthenticate operation.\n   *\n   * @param userCredential - The user credential.\n   */\n  static credentialFromError(error: FirebaseError): OAuthCredential | null {\n    return TwitterAuthProvider.credentialFromTaggedObject(\n      (error.customData || {}) as TaggedWithTokenResponse\n    );\n  }\n\n  private static credentialFromTaggedObject({\n    _tokenResponse: tokenResponse\n  }: TaggedWithTokenResponse): OAuthCredential | null {\n    if (!tokenResponse) {\n      return null;\n    }\n    const { oauthAccessToken, oauthTokenSecret } =\n      tokenResponse as SignInWithIdpResponse;\n    if (!oauthAccessToken || !oauthTokenSecret) {\n      return null;\n    }\n\n    try {\n      return TwitterAuthProvider.credential(oauthAccessToken, oauthTokenSecret);\n    } catch {\n      return null;\n    }\n  }\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { PhoneOrOauthTokenResponse } from '../../api/authentication/mfa';\nimport { IdTokenResponse } from '../../model/id_token';\nimport { UserInternal, UserCredentialInternal } from '../../model/user';\nimport { UserImpl } from './user_impl';\nimport { AuthInternal } from '../../model/auth';\nimport { OperationType, ProviderId } from '../../model/enums';\n\ninterface UserCredentialParams {\n  readonly user: UserInternal;\n  readonly providerId: ProviderId | string | null;\n  readonly _tokenResponse?: PhoneOrOauthTokenResponse;\n  readonly operationType: OperationType;\n}\n\nexport class UserCredentialImpl\n  implements UserCredentialInternal, UserCredentialParams\n{\n  readonly user: UserInternal;\n  readonly providerId: ProviderId | string | null;\n  readonly _tokenResponse: PhoneOrOauthTokenResponse | undefined;\n  readonly operationType: OperationType;\n\n  constructor(params: UserCredentialParams) {\n    this.user = params.user;\n    this.providerId = params.providerId;\n    this._tokenResponse = params._tokenResponse;\n    this.operationType = params.operationType;\n  }\n\n  static async _fromIdTokenResponse(\n    auth: AuthInternal,\n    operationType: OperationType,\n    idTokenResponse: IdTokenResponse,\n    isAnonymous: boolean = false\n  ): Promise<UserCredentialInternal> {\n    const user = await UserImpl._fromIdTokenResponse(\n      auth,\n      idTokenResponse,\n      isAnonymous\n    );\n    const providerId = providerIdForResponse(idTokenResponse);\n    const userCred = new UserCredentialImpl({\n      user,\n      providerId,\n      _tokenResponse: idTokenResponse,\n      operationType\n    });\n    return userCred;\n  }\n\n  static async _forOperation(\n    user: UserInternal,\n    operationType: OperationType,\n    response: PhoneOrOauthTokenResponse\n  ): Promise<UserCredentialImpl> {\n    await user._updateTokensIfNecessary(response, /* reload */ true);\n    const providerId = providerIdForResponse(response);\n    return new UserCredentialImpl({\n      user,\n      providerId,\n      _tokenResponse: response,\n      operationType\n    });\n  }\n}\n\nfunction providerIdForResponse(\n  response: IdTokenResponse\n): ProviderId | string | null {\n  if (response.providerId) {\n    return response.providerId;\n  }\n\n  if ('phoneNumber' in response) {\n    return ProviderId.PHONE;\n  }\n\n  return null;\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { MultiFactorError as MultiFactorErrorPublic } from '../model/public_types';\nimport { FirebaseError } from '@firebase/util';\nimport { AuthInternal } from '../model/auth';\nimport { IdTokenResponse } from '../model/id_token';\nimport { AuthErrorCode } from '../core/errors';\nimport { UserInternal } from '../model/user';\nimport { AuthCredential } from '../core/credentials';\nimport { IdTokenMfaResponse } from '../api/authentication/mfa';\nimport { OperationType } from '../model/enums';\n\nexport type MultiFactorErrorData = MultiFactorErrorPublic['customData'] & {\n  _serverResponse: IdTokenMfaResponse;\n};\n\nexport class MultiFactorError\n  extends FirebaseError\n  implements MultiFactorErrorPublic\n{\n  readonly customData: MultiFactorErrorData;\n\n  private constructor(\n    auth: AuthInternal,\n    error: FirebaseError,\n    readonly operationType: OperationType,\n    readonly user?: UserInternal\n  ) {\n    super(error.code, error.message);\n    // https://github.com/Microsoft/TypeScript-wiki/blob/master/Breaking-Changes.md#extending-built-ins-like-error-array-and-map-may-no-longer-work\n    Object.setPrototypeOf(this, MultiFactorError.prototype);\n    this.customData = {\n      appName: auth.name,\n      tenantId: auth.tenantId ?? undefined,\n      _serverResponse: error.customData!._serverResponse as IdTokenMfaResponse,\n      operationType\n    };\n  }\n\n  static _fromErrorAndOperation(\n    auth: AuthInternal,\n    error: FirebaseError,\n    operationType: OperationType,\n    user?: UserInternal\n  ): MultiFactorError {\n    return new MultiFactorError(auth, error, operationType, user);\n  }\n}\n\nexport function _processCredentialSavingMfaContextIfNecessary(\n  auth: AuthInternal,\n  operationType: OperationType,\n  credential: AuthCredential,\n  user?: UserInternal\n): Promise<IdTokenResponse> {\n  const idTokenProvider =\n    operationType === OperationType.REAUTHENTICATE\n      ? credential._getReauthenticationResolver(auth)\n      : credential._getIdTokenResponse(auth);\n\n  return idTokenProvider.catch(error => {\n    if (error.code === `auth/${AuthErrorCode.MFA_REQUIRED}`) {\n      throw MultiFactorError._fromErrorAndOperation(\n        auth,\n        error,\n        operationType,\n        user\n      );\n    }\n\n    throw error;\n  });\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { User } from '../../model/public_types';\n\nimport { deleteLinkedAccounts } from '../../api/account_management/account';\nimport { UserInternal, UserCredentialInternal } from '../../model/user';\nimport { AuthCredential } from '../credentials';\nimport { AuthErrorCode } from '../errors';\nimport { _assert } from '../util/assert';\nimport { providerDataAsNames } from '../util/providers';\nimport { _logoutIfInvalidated } from './invalidation';\nimport { _reloadWithoutSaving } from './reload';\nimport { UserCredentialImpl } from './user_credential_impl';\nimport { getModularInstance } from '@firebase/util';\nimport { OperationType, ProviderId } from '../../model/enums';\n\n/**\n * Unlinks a provider from a user account.\n *\n * @param user - The user.\n * @param providerId - The provider to unlink.\n *\n * @public\n */\nexport async function unlink(user: User, providerId: string): Promise<User> {\n  const userInternal = getModularInstance(user) as UserInternal;\n  await _assertLinkedStatus(true, userInternal, providerId);\n  const { providerUserInfo } = await deleteLinkedAccounts(userInternal.auth, {\n    idToken: await userInternal.getIdToken(),\n    deleteProvider: [providerId]\n  });\n\n  const providersLeft = providerDataAsNames(providerUserInfo || []);\n\n  userInternal.providerData = userInternal.providerData.filter(pd =>\n    providersLeft.has(pd.providerId)\n  );\n  if (!providersLeft.has(ProviderId.PHONE)) {\n    userInternal.phoneNumber = null;\n  }\n\n  await userInternal.auth._persistUserIfCurrent(userInternal);\n  return userInternal;\n}\n\nexport async function _link(\n  user: UserInternal,\n  credential: AuthCredential,\n  bypassAuthState = false\n): Promise<UserCredentialInternal> {\n  const response = await _logoutIfInvalidated(\n    user,\n    credential._linkToIdToken(user.auth, await user.getIdToken()),\n    bypassAuthState\n  );\n  return UserCredentialImpl._forOperation(user, OperationType.LINK, response);\n}\n\nexport async function _assertLinkedStatus(\n  expected: boolean,\n  user: UserInternal,\n  provider: string\n): Promise<void> {\n  await _reloadWithoutSaving(user);\n  const providerIds = providerDataAsNames(user.providerData);\n\n  const code =\n    expected === false\n      ? AuthErrorCode.PROVIDER_ALREADY_LINKED\n      : AuthErrorCode.NO_SUCH_PROVIDER;\n  _assert(providerIds.has(provider) === expected, user.auth, code);\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { FirebaseError } from '@firebase/util';\nimport { _processCredentialSavingMfaContextIfNecessary } from '../../mfa/mfa_error';\nimport { OperationType } from '../../model/enums';\nimport { UserInternal } from '../../model/user';\nimport { AuthCredential } from '../credentials';\nimport { AuthErrorCode } from '../errors';\nimport { _assert, _fail } from '../util/assert';\nimport { _parseToken } from './id_token_result';\nimport { _logoutIfInvalidated } from './invalidation';\nimport { UserCredentialImpl } from './user_credential_impl';\nimport { _isFirebaseServerApp } from '@firebase/app';\nimport { _serverAppCurrentUserOperationNotSupportedError } from '../../core/util/assert';\n\nexport async function _reauthenticate(\n  user: UserInternal,\n  credential: AuthCredential,\n  bypassAuthState = false\n): Promise<UserCredentialImpl> {\n  const { auth } = user;\n  if (_isFirebaseServerApp(auth.app)) {\n    return Promise.reject(\n      _serverAppCurrentUserOperationNotSupportedError(auth)\n    );\n  }\n  const operationType = OperationType.REAUTHENTICATE;\n\n  try {\n    const response = await _logoutIfInvalidated(\n      user,\n      _processCredentialSavingMfaContextIfNecessary(\n        auth,\n        operationType,\n        credential,\n        user\n      ),\n      bypassAuthState\n    );\n    _assert(response.idToken, auth, AuthErrorCode.INTERNAL_ERROR);\n    const parsed = _parseToken(response.idToken);\n    _assert(parsed, auth, AuthErrorCode.INTERNAL_ERROR);\n\n    const { sub: localId } = parsed;\n    _assert(user.uid === localId, auth, AuthErrorCode.USER_MISMATCH);\n\n    return UserCredentialImpl._forOperation(user, operationType, response);\n  } catch (e) {\n    // Convert user deleted error into user mismatch\n    if ((e as FirebaseError)?.code === `auth/${AuthErrorCode.USER_DELETED}`) {\n      _fail(auth, AuthErrorCode.USER_MISMATCH);\n    }\n    throw e;\n  }\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { UserCredential, Auth, User } from '../../model/public_types';\n\nimport { _processCredentialSavingMfaContextIfNecessary } from '../../mfa/mfa_error';\nimport { AuthInternal } from '../../model/auth';\nimport { UserInternal } from '../../model/user';\nimport { AuthCredential } from '../credentials';\nimport { _assertLinkedStatus, _link } from '../user/link_unlink';\nimport { _reauthenticate } from '../user/reauthenticate';\nimport { UserCredentialImpl } from '../user/user_credential_impl';\nimport { _castAuth } from '../auth/auth_impl';\nimport { getModularInstance } from '@firebase/util';\nimport { OperationType } from '../../model/enums';\nimport { _isFirebaseServerApp } from '@firebase/app';\nimport { _serverAppCurrentUserOperationNotSupportedError } from '../../core/util/assert';\n\nexport async function _signInWithCredential(\n  auth: AuthInternal,\n  credential: AuthCredential,\n  bypassAuthState = false\n): Promise<UserCredential> {\n  if (_isFirebaseServerApp(auth.app)) {\n    return Promise.reject(\n      _serverAppCurrentUserOperationNotSupportedError(auth)\n    );\n  }\n  const operationType = OperationType.SIGN_IN;\n  const response = await _processCredentialSavingMfaContextIfNecessary(\n    auth,\n    operationType,\n    credential\n  );\n  const userCredential = await UserCredentialImpl._fromIdTokenResponse(\n    auth,\n    operationType,\n    response\n  );\n\n  if (!bypassAuthState) {\n    await auth._updateCurrentUser(userCredential.user);\n  }\n  return userCredential;\n}\n\n/**\n * Asynchronously signs in with the given credentials.\n *\n * @remarks\n * An {@link AuthProvider} can be used to generate the credential.\n *\n * This method is not supported by {@link Auth} instances created with a\n * {@link @firebase/app#FirebaseServerApp}.\n *\n * @param auth - The {@link Auth} instance.\n * @param credential - The auth credential.\n *\n * @public\n */\nexport async function signInWithCredential(\n  auth: Auth,\n  credential: AuthCredential\n): Promise<UserCredential> {\n  return _signInWithCredential(_castAuth(auth), credential);\n}\n\n/**\n * Links the user account with the given credentials.\n *\n * @remarks\n * An {@link AuthProvider} can be used to generate the credential.\n *\n * @param user - The user.\n * @param credential - The auth credential.\n *\n * @public\n */\nexport async function linkWithCredential(\n  user: User,\n  credential: AuthCredential\n): Promise<UserCredential> {\n  const userInternal = getModularInstance(user) as UserInternal;\n\n  await _assertLinkedStatus(false, userInternal, credential.providerId);\n\n  return _link(userInternal, credential);\n}\n\n/**\n * Re-authenticates a user using a fresh credential.\n *\n * @remarks\n * Use before operations such as {@link updatePassword} that require tokens from recent sign-in\n * attempts. This method can be used to recover from a `CREDENTIAL_TOO_OLD_LOGIN_AGAIN` error\n * or a `TOKEN_EXPIRED` error.\n *\n * This method is not supported on any {@link User} signed in by {@link Auth} instances\n * created with a {@link @firebase/app#FirebaseServerApp}.\n *\n * @param user - The user.\n * @param credential - The auth credential.\n *\n * @public\n */\nexport async function reauthenticateWithCredential(\n  user: User,\n  credential: AuthCredential\n): Promise<UserCredential> {\n  return _reauthenticate(getModularInstance(user) as UserInternal, credential);\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  Endpoint,\n  HttpMethod,\n  RecaptchaClientType,\n  RecaptchaVersion,\n  _addTidIfNecessary,\n  _performApiRequest\n} from '../index';\nimport { SignInWithPhoneNumberRequest } from '../authentication/sms';\nimport { FinalizeMfaResponse } from '../authentication/mfa';\nimport { AuthInternal } from '../../model/auth';\n\n/**\n * MFA Info as returned by the API.\n */\ninterface BaseMfaEnrollment {\n  mfaEnrollmentId: string;\n  enrolledAt: number;\n  displayName?: string;\n}\n\n/**\n * An MFA provided by SMS verification.\n */\nexport interface PhoneMfaEnrollment extends BaseMfaEnrollment {\n  phoneInfo: string;\n}\n\n/**\n * An MFA provided by TOTP (Time-based One Time Password).\n */\nexport interface TotpMfaEnrollment extends BaseMfaEnrollment {}\n\n/**\n * MfaEnrollment can be any subtype of BaseMfaEnrollment, currently only PhoneMfaEnrollment and TotpMfaEnrollment are supported.\n */\nexport type MfaEnrollment = PhoneMfaEnrollment | TotpMfaEnrollment;\n\nexport interface StartPhoneMfaEnrollmentRequest {\n  idToken: string;\n  phoneEnrollmentInfo: {\n    phoneNumber: string;\n    // reCAPTCHA v2 token\n    recaptchaToken?: string;\n    // reCAPTCHA Enterprise token\n    captchaResponse?: string;\n    clientType?: RecaptchaClientType;\n    recaptchaVersion?: RecaptchaVersion;\n  };\n  tenantId?: string;\n}\n\nexport interface StartPhoneMfaEnrollmentResponse {\n  phoneSessionInfo: {\n    sessionInfo: string;\n  };\n}\n\nexport function startEnrollPhoneMfa(\n  auth: AuthInternal,\n  request: StartPhoneMfaEnrollmentRequest\n): Promise<StartPhoneMfaEnrollmentResponse> {\n  return _performApiRequest<\n    StartPhoneMfaEnrollmentRequest,\n    StartPhoneMfaEnrollmentResponse\n  >(\n    auth,\n    HttpMethod.POST,\n    Endpoint.START_MFA_ENROLLMENT,\n    _addTidIfNecessary(auth, request)\n  );\n}\n\nexport interface FinalizePhoneMfaEnrollmentRequest {\n  idToken: string;\n  phoneVerificationInfo: SignInWithPhoneNumberRequest;\n  displayName?: string | null;\n  tenantId?: string;\n}\n\nexport interface FinalizePhoneMfaEnrollmentResponse\n  extends FinalizeMfaResponse {}\n\nexport function finalizeEnrollPhoneMfa(\n  auth: AuthInternal,\n  request: FinalizePhoneMfaEnrollmentRequest\n): Promise<FinalizePhoneMfaEnrollmentResponse> {\n  return _performApiRequest<\n    FinalizePhoneMfaEnrollmentRequest,\n    FinalizePhoneMfaEnrollmentResponse\n  >(\n    auth,\n    HttpMethod.POST,\n    Endpoint.FINALIZE_MFA_ENROLLMENT,\n    _addTidIfNecessary(auth, request)\n  );\n}\nexport interface StartTotpMfaEnrollmentRequest {\n  idToken: string;\n  totpEnrollmentInfo: {};\n  tenantId?: string;\n}\n\nexport interface StartTotpMfaEnrollmentResponse {\n  totpSessionInfo: {\n    sharedSecretKey: string;\n    verificationCodeLength: number;\n    hashingAlgorithm: string;\n    periodSec: number;\n    sessionInfo: string;\n    finalizeEnrollmentTime: number;\n  };\n}\n\nexport function startEnrollTotpMfa(\n  auth: AuthInternal,\n  request: StartTotpMfaEnrollmentRequest\n): Promise<StartTotpMfaEnrollmentResponse> {\n  return _performApiRequest<\n    StartTotpMfaEnrollmentRequest,\n    StartTotpMfaEnrollmentResponse\n  >(\n    auth,\n    HttpMethod.POST,\n    Endpoint.START_MFA_ENROLLMENT,\n    _addTidIfNecessary(auth, request)\n  );\n}\n\nexport interface TotpVerificationInfo {\n  sessionInfo: string;\n  verificationCode: string;\n}\nexport interface FinalizeTotpMfaEnrollmentRequest {\n  idToken: string;\n  totpVerificationInfo: TotpVerificationInfo;\n  displayName?: string | null;\n  tenantId?: string;\n}\n\nexport interface FinalizeTotpMfaEnrollmentResponse\n  extends FinalizeMfaResponse {}\n\nexport function finalizeEnrollTotpMfa(\n  auth: AuthInternal,\n  request: FinalizeTotpMfaEnrollmentRequest\n): Promise<FinalizeTotpMfaEnrollmentResponse> {\n  return _performApiRequest<\n    FinalizeTotpMfaEnrollmentRequest,\n    FinalizeTotpMfaEnrollmentResponse\n  >(\n    auth,\n    HttpMethod.POST,\n    Endpoint.FINALIZE_MFA_ENROLLMENT,\n    _addTidIfNecessary(auth, request)\n  );\n}\n\nexport interface WithdrawMfaRequest {\n  idToken: string;\n  mfaEnrollmentId: string;\n  tenantId?: string;\n}\n\nexport interface WithdrawMfaResponse extends FinalizeMfaResponse {}\n\nexport function withdrawMfa(\n  auth: AuthInternal,\n  request: WithdrawMfaRequest\n): Promise<WithdrawMfaResponse> {\n  return _performApiRequest<WithdrawMfaRequest, WithdrawMfaResponse>(\n    auth,\n    HttpMethod.POST,\n    Endpoint.WITHDRAW_MFA,\n    _addTidIfNecessary(auth, request)\n  );\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport {\n  MultiFactorAssertion,\n  MultiFactorInfo,\n  MultiFactorSession,\n  MultiFactorUser,\n  User\n} from '../model/public_types';\n\nimport { withdrawMfa } from '../api/account_management/mfa';\nimport { _logoutIfInvalidated } from '../core/user/invalidation';\nimport { UserInternal } from '../model/user';\nimport { MultiFactorAssertionImpl } from './mfa_assertion';\nimport { MultiFactorInfoImpl } from './mfa_info';\nimport { MultiFactorSessionImpl } from './mfa_session';\nimport { getModularInstance } from '@firebase/util';\n\nexport class MultiFactorUserImpl implements MultiFactorUser {\n  enrolledFactors: MultiFactorInfo[] = [];\n\n  private constructor(readonly user: UserInternal) {\n    user._onReload(userInfo => {\n      if (userInfo.mfaInfo) {\n        this.enrolledFactors = userInfo.mfaInfo.map(enrollment =>\n          MultiFactorInfoImpl._fromServerResponse(user.auth, enrollment)\n        );\n      }\n    });\n  }\n\n  static _fromUser(user: UserInternal): MultiFactorUserImpl {\n    return new MultiFactorUserImpl(user);\n  }\n\n  async getSession(): Promise<MultiFactorSession> {\n    return MultiFactorSessionImpl._fromIdtoken(\n      await this.user.getIdToken(),\n      this.user\n    );\n  }\n\n  async enroll(\n    assertionExtern: MultiFactorAssertion,\n    displayName?: string | null\n  ): Promise<void> {\n    const assertion = assertionExtern as MultiFactorAssertionImpl;\n    const session = (await this.getSession()) as MultiFactorSessionImpl;\n    const finalizeMfaResponse = await _logoutIfInvalidated(\n      this.user,\n      assertion._process(this.user.auth, session, displayName)\n    );\n    // New tokens will be issued after enrollment of the new second factors.\n    // They need to be updated on the user.\n    await this.user._updateTokensIfNecessary(finalizeMfaResponse);\n    // The user needs to be reloaded to get the new multi-factor information\n    // from server. USER_RELOADED event will be triggered and `enrolledFactors`\n    // will be updated.\n    return this.user.reload();\n  }\n\n  async unenroll(infoOrUid: MultiFactorInfo | string): Promise<void> {\n    const mfaEnrollmentId =\n      typeof infoOrUid === 'string' ? infoOrUid : infoOrUid.uid;\n    const idToken = await this.user.getIdToken();\n    try {\n      const idTokenResponse = await _logoutIfInvalidated(\n        this.user,\n        withdrawMfa(this.user.auth, {\n          idToken,\n          mfaEnrollmentId\n        })\n      );\n      // Remove the second factor from the user's list.\n      this.enrolledFactors = this.enrolledFactors.filter(\n        ({ uid }) => uid !== mfaEnrollmentId\n      );\n      // Depending on whether the backend decided to revoke the user's session,\n      // the tokenResponse may be empty. If the tokens were not updated (and they\n      // are now invalid), reloading the user will discover this and invalidate\n      // the user's state accordingly.\n      await this.user._updateTokensIfNecessary(idTokenResponse);\n      await this.user.reload();\n    } catch (e) {\n      throw e;\n    }\n  }\n}\n\nconst multiFactorUserCache = new WeakMap<User, MultiFactorUser>();\n\n/**\n * The {@link MultiFactorUser} corresponding to the user.\n *\n * @remarks\n * This is used to access all multi-factor properties and operations related to the user.\n *\n * @param user - The user.\n *\n * @public\n */\nexport function multiFactor(user: User): MultiFactorUser {\n  const userModular = getModularInstance(user);\n  if (!multiFactorUserCache.has(userModular)) {\n    multiFactorUserCache.set(\n      userModular,\n      MultiFactorUserImpl._fromUser(userModular as UserInternal)\n    );\n  }\n  return multiFactorUserCache.get(userModular)!;\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { Persistence } from '../../model/public_types';\n\nexport const enum PersistenceType {\n  SESSION = 'SESSION',\n  LOCAL = 'LOCAL',\n  NONE = 'NONE',\n  COOKIE = 'COOKIE'\n}\n\nexport type PersistedBlob = Record<string, unknown>;\n\nexport interface Instantiator<T> {\n  (blob: PersistedBlob): T;\n}\n\nexport type PersistenceValue = PersistedBlob | string;\n\nexport const STORAGE_AVAILABLE_KEY = '__sak';\n\nexport interface StorageEventListener {\n  (value: PersistenceValue | null): void;\n}\n\nexport interface PersistenceInternal extends Persistence {\n  type: PersistenceType;\n  _isAvailable(): Promise<boolean>;\n  _set(key: string, value: PersistenceValue): Promise<void>;\n  _get<T extends PersistenceValue>(key: string): Promise<T | null>;\n  _remove(key: string): Promise<void>;\n  _addListener(key: string, listener: StorageEventListener): void;\n  _removeListener(key: string, listener: StorageEventListener): void;\n  // Should this persistence allow migration up the chosen hierarchy?\n  _shouldAllowMigration?: boolean;\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  PersistenceValue,\n  STORAGE_AVAILABLE_KEY,\n  PersistenceType\n} from '../../core/persistence';\n\n// There are two different browser persistence types: local and session.\n// Both have the same implementation but use a different underlying storage\n// object.\n\nexport abstract class BrowserPersistenceClass {\n  protected constructor(\n    protected readonly storageRetriever: () => Storage,\n    readonly type: PersistenceType\n  ) {}\n\n  _isAvailable(): Promise<boolean> {\n    try {\n      if (!this.storage) {\n        return Promise.resolve(false);\n      }\n      this.storage.setItem(STORAGE_AVAILABLE_KEY, '1');\n      this.storage.removeItem(STORAGE_AVAILABLE_KEY);\n      return Promise.resolve(true);\n    } catch {\n      return Promise.resolve(false);\n    }\n  }\n\n  _set(key: string, value: PersistenceValue): Promise<void> {\n    this.storage.setItem(key, JSON.stringify(value));\n    return Promise.resolve();\n  }\n\n  _get<T extends PersistenceValue>(key: string): Promise<T | null> {\n    const json = this.storage.getItem(key);\n    return Promise.resolve(json ? JSON.parse(json) : null);\n  }\n\n  _remove(key: string): Promise<void> {\n    this.storage.removeItem(key);\n    return Promise.resolve();\n  }\n\n  protected get storage(): Storage {\n    return this.storageRetriever();\n  }\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Persistence } from '../../model/public_types';\n\nimport { _isMobileBrowser, _isIE10 } from '../../core/util/browser';\nimport {\n  PersistenceInternal as InternalPersistence,\n  PersistenceType,\n  PersistenceValue,\n  StorageEventListener\n} from '../../core/persistence';\nimport { BrowserPersistenceClass } from './browser';\n\n// The polling period in case events are not supported\nexport const _POLLING_INTERVAL_MS = 1000;\n\n// The IE 10 localStorage cross tab synchronization delay in milliseconds\nconst IE10_LOCAL_STORAGE_SYNC_DELAY = 10;\n\nclass BrowserLocalPersistence\n  extends BrowserPersistenceClass\n  implements InternalPersistence\n{\n  static type: 'LOCAL' = 'LOCAL';\n\n  constructor() {\n    super(() => window.localStorage, PersistenceType.LOCAL);\n  }\n\n  private readonly boundEventHandler = (\n    event: StorageEvent,\n    poll?: boolean\n  ): void => this.onStorageEvent(event, poll);\n  private readonly listeners: Record<string, Set<StorageEventListener>> = {};\n  private readonly localCache: Record<string, string | null> = {};\n  // setTimeout return value is platform specific\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  private pollTimer: any | null = null;\n\n  // Whether to use polling instead of depending on window events\n  private readonly fallbackToPolling = _isMobileBrowser();\n  readonly _shouldAllowMigration = true;\n\n  private forAllChangedKeys(\n    cb: (key: string, oldValue: string | null, newValue: string | null) => void\n  ): void {\n    // Check all keys with listeners on them.\n    for (const key of Object.keys(this.listeners)) {\n      // Get value from localStorage.\n      const newValue = this.storage.getItem(key);\n      const oldValue = this.localCache[key];\n      // If local map value does not match, trigger listener with storage event.\n      // Differentiate this simulated event from the real storage event.\n      if (newValue !== oldValue) {\n        cb(key, oldValue, newValue);\n      }\n    }\n  }\n\n  private onStorageEvent(event: StorageEvent, poll = false): void {\n    // Key would be null in some situations, like when localStorage is cleared\n    if (!event.key) {\n      this.forAllChangedKeys(\n        (key: string, _oldValue: string | null, newValue: string | null) => {\n          this.notifyListeners(key, newValue);\n        }\n      );\n      return;\n    }\n\n    const key = event.key;\n\n    // Check the mechanism how this event was detected.\n    // The first event will dictate the mechanism to be used.\n    if (poll) {\n      // Environment detects storage changes via polling.\n      // Remove storage event listener to prevent possible event duplication.\n      this.detachListener();\n    } else {\n      // Environment detects storage changes via storage event listener.\n      // Remove polling listener to prevent possible event duplication.\n      this.stopPolling();\n    }\n\n    const triggerListeners = (): void => {\n      // Keep local map up to date in case storage event is triggered before\n      // poll.\n      const storedValue = this.storage.getItem(key);\n      if (!poll && this.localCache[key] === storedValue) {\n        // Real storage event which has already been detected, do nothing.\n        // This seems to trigger in some IE browsers for some reason.\n        return;\n      }\n      this.notifyListeners(key, storedValue);\n    };\n\n    const storedValue = this.storage.getItem(key);\n    if (\n      _isIE10() &&\n      storedValue !== event.newValue &&\n      event.newValue !== event.oldValue\n    ) {\n      // IE 10 has this weird bug where a storage event would trigger with the\n      // correct key, oldValue and newValue but localStorage.getItem(key) does\n      // not yield the updated value until a few milliseconds. This ensures\n      // this recovers from that situation.\n      setTimeout(triggerListeners, IE10_LOCAL_STORAGE_SYNC_DELAY);\n    } else {\n      triggerListeners();\n    }\n  }\n\n  private notifyListeners(key: string, value: string | null): void {\n    this.localCache[key] = value;\n    const listeners = this.listeners[key];\n    if (listeners) {\n      for (const listener of Array.from(listeners)) {\n        listener(value ? JSON.parse(value) : value);\n      }\n    }\n  }\n\n  private startPolling(): void {\n    this.stopPolling();\n\n    this.pollTimer = setInterval(() => {\n      this.forAllChangedKeys(\n        (key: string, oldValue: string | null, newValue: string | null) => {\n          this.onStorageEvent(\n            new StorageEvent('storage', {\n              key,\n              oldValue,\n              newValue\n            }),\n            /* poll */ true\n          );\n        }\n      );\n    }, _POLLING_INTERVAL_MS);\n  }\n\n  private stopPolling(): void {\n    if (this.pollTimer) {\n      clearInterval(this.pollTimer);\n      this.pollTimer = null;\n    }\n  }\n\n  private attachListener(): void {\n    window.addEventListener('storage', this.boundEventHandler);\n  }\n\n  private detachListener(): void {\n    window.removeEventListener('storage', this.boundEventHandler);\n  }\n\n  _addListener(key: string, listener: StorageEventListener): void {\n    if (Object.keys(this.listeners).length === 0) {\n      // Whether browser can detect storage event when it had already been pushed to the background.\n      // This may happen in some mobile browsers. A localStorage change in the foreground window\n      // will not be detected in the background window via the storage event.\n      // This was detected in iOS 7.x mobile browsers\n      if (this.fallbackToPolling) {\n        this.startPolling();\n      } else {\n        this.attachListener();\n      }\n    }\n    if (!this.listeners[key]) {\n      this.listeners[key] = new Set();\n      // Populate the cache to avoid spuriously triggering on first poll.\n      this.localCache[key] = this.storage.getItem(key);\n    }\n    this.listeners[key].add(listener);\n  }\n\n  _removeListener(key: string, listener: StorageEventListener): void {\n    if (this.listeners[key]) {\n      this.listeners[key].delete(listener);\n\n      if (this.listeners[key].size === 0) {\n        delete this.listeners[key];\n      }\n    }\n\n    if (Object.keys(this.listeners).length === 0) {\n      this.detachListener();\n      this.stopPolling();\n    }\n  }\n\n  // Update local cache on base operations:\n\n  async _set(key: string, value: PersistenceValue): Promise<void> {\n    await super._set(key, value);\n    this.localCache[key] = JSON.stringify(value);\n  }\n\n  async _get<T extends PersistenceValue>(key: string): Promise<T | null> {\n    const value = await super._get<T>(key);\n    this.localCache[key] = JSON.stringify(value);\n    return value;\n  }\n\n  async _remove(key: string): Promise<void> {\n    await super._remove(key);\n    delete this.localCache[key];\n  }\n}\n\n/**\n * An implementation of {@link Persistence} of type `LOCAL` using `localStorage`\n * for the underlying storage.\n *\n * @public\n */\nexport const browserLocalPersistence: Persistence = BrowserLocalPersistence;\n","/**\n * @license\n * Copyright 2025 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Persistence } from '../../model/public_types';\nimport type { CookieChangeEvent } from 'cookie-store';\n\nconst POLLING_INTERVAL_MS = 1_000;\n\nimport {\n  PersistenceInternal,\n  PersistenceType,\n  PersistenceValue,\n  StorageEventListener\n} from '../../core/persistence';\n\n// Pull a cookie value from document.cookie\nfunction getDocumentCookie(name: string): string | null {\n  const escapedName = name.replace(/[\\\\^$.*+?()[\\]{}|]/g, '\\\\$&');\n  const matcher = RegExp(`${escapedName}=([^;]+)`);\n  return document.cookie.match(matcher)?.[1] ?? null;\n}\n\n// Produce a sanitized cookie name from the persistence key\nfunction getCookieName(key: string): string {\n  // __HOST- doesn't work in localhost https://issues.chromium.org/issues/40196122 but it has\n  // desirable security properties, so lets use a different cookie name while in dev-mode.\n  // Already checked isSecureContext in _isAvailable, so if it's http we're hitting local.\n  const isDevMode = window.location.protocol === 'http:';\n  return `${isDevMode ? '__dev_' : '__HOST-'}FIREBASE_${key.split(':')[3]}`;\n}\n\nexport class CookiePersistence implements PersistenceInternal {\n  static type: 'COOKIE' = 'COOKIE';\n  readonly type = PersistenceType.COOKIE;\n  listenerUnsubscribes: Map<StorageEventListener, () => void> = new Map();\n\n  // used to get the URL to the backend to proxy to\n  _getFinalTarget(originalUrl: string): URL | string {\n    if (typeof window === undefined) {\n      return originalUrl;\n    }\n    const url = new URL(`${window.location.origin}/__cookies__`);\n    url.searchParams.set('finalTarget', originalUrl);\n    return url;\n  }\n\n  // To be a usable persistence method in a chain browserCookiePersistence ensures that\n  // prerequisites have been met, namely that we're in a secureContext, navigator and document are\n  // available and cookies are enabled. Not all UAs support these method, so fallback accordingly.\n  async _isAvailable(): Promise<boolean> {\n    if (typeof isSecureContext === 'boolean' && !isSecureContext) {\n      return false;\n    }\n    if (typeof navigator === 'undefined' || typeof document === 'undefined') {\n      return false;\n    }\n    return navigator.cookieEnabled ?? true;\n  }\n\n  // Set should be a noop as we expect middleware to handle this\n  async _set(_key: string, _value: PersistenceValue): Promise<void> {\n    return;\n  }\n\n  // Attempt to get the cookie from cookieStore, fallback to document.cookie\n  async _get<T extends PersistenceValue>(key: string): Promise<T | null> {\n    if (!this._isAvailable()) {\n      return null;\n    }\n    const name = getCookieName(key);\n    if (window.cookieStore) {\n      const cookie = await window.cookieStore.get(name);\n      return cookie?.value as T;\n    }\n    return getDocumentCookie(name) as T;\n  }\n\n  // Log out by overriding the idToken with a sentinel value of \"\"\n  async _remove(key: string): Promise<void> {\n    if (!this._isAvailable()) {\n      return;\n    }\n    // To make sure we don't hit signout over and over again, only do this operation if we need to\n    // with the logout sentinel value of \"\" this can cause race conditions. Unnecessary set-cookie\n    // headers will reduce CDN hit rates too.\n    const existingValue = await this._get(key);\n    if (!existingValue) {\n      return;\n    }\n    const name = getCookieName(key);\n    document.cookie = `${name}=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High`;\n    await fetch(`/__cookies__`, { method: 'DELETE' }).catch(() => undefined);\n  }\n\n  // Listen for cookie changes, both cookieStore and fallback to polling document.cookie\n  _addListener(key: string, listener: StorageEventListener): void {\n    if (!this._isAvailable()) {\n      return;\n    }\n    const name = getCookieName(key);\n    if (window.cookieStore) {\n      const cb = ((event: CookieChangeEvent): void => {\n        const changedCookie = event.changed.find(\n          change => change.name === name\n        );\n        if (changedCookie) {\n          listener(changedCookie.value as PersistenceValue);\n        }\n        const deletedCookie = event.deleted.find(\n          change => change.name === name\n        );\n        if (deletedCookie) {\n          listener(null);\n        }\n      }) as EventListener;\n      const unsubscribe = (): void =>\n        window.cookieStore.removeEventListener('change', cb);\n      this.listenerUnsubscribes.set(listener, unsubscribe);\n      return window.cookieStore.addEventListener('change', cb as EventListener);\n    }\n    let lastValue = getDocumentCookie(name);\n    const interval = setInterval(() => {\n      const currentValue = getDocumentCookie(name);\n      if (currentValue !== lastValue) {\n        listener(currentValue as PersistenceValue | null);\n        lastValue = currentValue;\n      }\n    }, POLLING_INTERVAL_MS);\n    const unsubscribe = (): void => clearInterval(interval);\n    this.listenerUnsubscribes.set(listener, unsubscribe);\n  }\n\n  _removeListener(_key: string, listener: StorageEventListener): void {\n    const unsubscribe = this.listenerUnsubscribes.get(listener);\n    if (!unsubscribe) {\n      return;\n    }\n    unsubscribe();\n    this.listenerUnsubscribes.delete(listener);\n  }\n}\n\n/**\n * An implementation of {@link Persistence} of type `COOKIE`, for use on the client side in\n * applications leveraging hybrid rendering and middleware.\n *\n * @remarks This persistence method requires companion middleware to function, such as that provided\n * by {@link https://firebaseopensource.com/projects/firebaseextended/reactfire/ | ReactFire} for\n * NextJS.\n * @beta\n */\nexport const browserCookiePersistence: Persistence = CookiePersistence;\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Persistence } from '../../model/public_types';\n\nimport {\n  PersistenceInternal as InternalPersistence,\n  PersistenceType,\n  StorageEventListener\n} from '../../core/persistence';\nimport { BrowserPersistenceClass } from './browser';\n\nclass BrowserSessionPersistence\n  extends BrowserPersistenceClass\n  implements InternalPersistence\n{\n  static type: 'SESSION' = 'SESSION';\n\n  constructor() {\n    super(() => window.sessionStorage, PersistenceType.SESSION);\n  }\n\n  _addListener(_key: string, _listener: StorageEventListener): void {\n    // Listeners are not supported for session storage since it cannot be shared across windows\n    return;\n  }\n\n  _removeListener(_key: string, _listener: StorageEventListener): void {\n    // Listeners are not supported for session storage since it cannot be shared across windows\n    return;\n  }\n}\n\n/**\n * An implementation of {@link Persistence} of `SESSION` using `sessionStorage`\n * for the underlying storage.\n *\n * @public\n */\nexport const browserSessionPersistence: Persistence = BrowserSessionPersistence;\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  ReceiverHandler,\n  _EventType,\n  _ReceiverResponse,\n  SenderMessageEvent,\n  _Status,\n  _SenderRequest\n} from './index';\nimport { _allSettled } from './promise';\n\n/**\n * Interface class for receiving messages.\n *\n */\nexport class Receiver {\n  private static readonly receivers: Receiver[] = [];\n  private readonly boundEventHandler: EventListener;\n\n  private readonly handlersMap: {\n    // TypeScript doesn't have existential types :(\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    [eventType: string]: Set<ReceiverHandler<any, any>>;\n  } = {};\n\n  constructor(private readonly eventTarget: EventTarget) {\n    this.boundEventHandler = this.handleEvent.bind(this);\n  }\n\n  /**\n   * Obtain an instance of a Receiver for a given event target, if none exists it will be created.\n   *\n   * @param eventTarget - An event target (such as window or self) through which the underlying\n   * messages will be received.\n   */\n  static _getInstance(eventTarget: EventTarget): Receiver {\n    // The results are stored in an array since objects can't be keys for other\n    // objects. In addition, setting a unique property on an event target as a\n    // hash map key may not be allowed due to CORS restrictions.\n    const existingInstance = this.receivers.find(receiver =>\n      receiver.isListeningto(eventTarget)\n    );\n    if (existingInstance) {\n      return existingInstance;\n    }\n    const newInstance = new Receiver(eventTarget);\n    this.receivers.push(newInstance);\n    return newInstance;\n  }\n\n  private isListeningto(eventTarget: EventTarget): boolean {\n    return this.eventTarget === eventTarget;\n  }\n\n  /**\n   * Fans out a MessageEvent to the appropriate listeners.\n   *\n   * @remarks\n   * Sends an {@link Status.ACK} upon receipt and a {@link Status.DONE} once all handlers have\n   * finished processing.\n   *\n   * @param event - The MessageEvent.\n   *\n   */\n  private async handleEvent<\n    T extends _ReceiverResponse,\n    S extends _SenderRequest\n  >(event: Event): Promise<void> {\n    const messageEvent = event as MessageEvent<SenderMessageEvent<S>>;\n    const { eventId, eventType, data } = messageEvent.data;\n\n    const handlers: Set<ReceiverHandler<T, S>> | undefined =\n      this.handlersMap[eventType];\n    if (!handlers?.size) {\n      return;\n    }\n\n    messageEvent.ports[0].postMessage({\n      status: _Status.ACK,\n      eventId,\n      eventType\n    });\n\n    const promises = Array.from(handlers).map(async handler =>\n      handler(messageEvent.origin, data)\n    );\n    const response = await _allSettled(promises);\n    messageEvent.ports[0].postMessage({\n      status: _Status.DONE,\n      eventId,\n      eventType,\n      response\n    });\n  }\n\n  /**\n   * Subscribe an event handler for a particular event.\n   *\n   * @param eventType - Event name to subscribe to.\n   * @param eventHandler - The event handler which should receive the events.\n   *\n   */\n  _subscribe<T extends _ReceiverResponse, S extends _SenderRequest>(\n    eventType: _EventType,\n    eventHandler: ReceiverHandler<T, S>\n  ): void {\n    if (Object.keys(this.handlersMap).length === 0) {\n      this.eventTarget.addEventListener('message', this.boundEventHandler);\n    }\n\n    if (!this.handlersMap[eventType]) {\n      this.handlersMap[eventType] = new Set();\n    }\n\n    this.handlersMap[eventType].add(eventHandler);\n  }\n\n  /**\n   * Unsubscribe an event handler from a particular event.\n   *\n   * @param eventType - Event name to unsubscribe from.\n   * @param eventHandler - Optional event handler, if none provided, unsubscribe all handlers on this event.\n   *\n   */\n  _unsubscribe<T extends _ReceiverResponse, S extends _SenderRequest>(\n    eventType: _EventType,\n    eventHandler?: ReceiverHandler<T, S>\n  ): void {\n    if (this.handlersMap[eventType] && eventHandler) {\n      this.handlersMap[eventType].delete(eventHandler);\n    }\n    if (!eventHandler || this.handlersMap[eventType].size === 0) {\n      delete this.handlersMap[eventType];\n    }\n\n    if (Object.keys(this.handlersMap).length === 0) {\n      this.eventTarget.removeEventListener('message', this.boundEventHandler);\n    }\n  }\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/** TODO: remove this once tslib has a polyfill for Promise.allSettled */\ninterface PromiseFulfilledResult<T> {\n  fulfilled: true;\n  value: T;\n}\n\ninterface PromiseRejectedResult {\n  fulfilled: false;\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  reason: any;\n}\n\nexport type PromiseSettledResult<T> =\n  | PromiseFulfilledResult<T>\n  | PromiseRejectedResult;\n\n/**\n * Shim for Promise.allSettled, note the slightly different format of `fulfilled` vs `status`.\n *\n * @param promises - Array of promises to wait on.\n */\nexport function _allSettled<T>(\n  promises: Array<Promise<T>>\n): Promise<Array<PromiseSettledResult<T>>> {\n  return Promise.all(\n    promises.map(async promise => {\n      try {\n        const value = await promise;\n        return {\n          fulfilled: true,\n          value\n        } as PromiseFulfilledResult<T>;\n      } catch (reason) {\n        return {\n          fulfilled: false,\n          reason\n        } as PromiseRejectedResult;\n      }\n    })\n  );\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport function _generateEventId(prefix = '', digits = 10): string {\n  let random = '';\n  for (let i = 0; i < digits; i++) {\n    random += Math.floor(Math.random() * 10);\n  }\n  return prefix + random;\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { _generateEventId } from '../../core/util/event_id';\nimport {\n  _SenderRequest,\n  _EventType,\n  ReceiverMessageEvent,\n  _MessageError,\n  SenderMessageEvent,\n  _Status,\n  _ReceiverMessageResponse,\n  _ReceiverResponse,\n  _TimeoutDuration\n} from './index';\n\ninterface MessageHandler {\n  messageChannel: MessageChannel;\n  onMessage: EventListenerOrEventListenerObject;\n}\n\n/**\n * Interface for sending messages and waiting for a completion response.\n *\n */\nexport class Sender {\n  private readonly handlers = new Set<MessageHandler>();\n\n  constructor(private readonly target: ServiceWorker) {}\n\n  /**\n   * Unsubscribe the handler and remove it from our tracking Set.\n   *\n   * @param handler - The handler to unsubscribe.\n   */\n  private removeMessageHandler(handler: MessageHandler): void {\n    if (handler.messageChannel) {\n      handler.messageChannel.port1.removeEventListener(\n        'message',\n        handler.onMessage\n      );\n      handler.messageChannel.port1.close();\n    }\n    this.handlers.delete(handler);\n  }\n\n  /**\n   * Send a message to the Receiver located at {@link target}.\n   *\n   * @remarks\n   * We'll first wait a bit for an ACK , if we get one we will wait significantly longer until the\n   * receiver has had a chance to fully process the event.\n   *\n   * @param eventType - Type of event to send.\n   * @param data - The payload of the event.\n   * @param timeout - Timeout for waiting on an ACK from the receiver.\n   *\n   * @returns An array of settled promises from all the handlers that were listening on the receiver.\n   */\n  async _send<T extends _ReceiverResponse, S extends _SenderRequest>(\n    eventType: _EventType,\n    data: S,\n    timeout = _TimeoutDuration.ACK\n  ): Promise<_ReceiverMessageResponse<T>> {\n    const messageChannel =\n      typeof MessageChannel !== 'undefined' ? new MessageChannel() : null;\n    if (!messageChannel) {\n      throw new Error(_MessageError.CONNECTION_UNAVAILABLE);\n    }\n    // Node timers and browser timers return fundamentally different types.\n    // We don't actually care what the value is but TS won't accept unknown and\n    // we can't cast properly in both environments.\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    let completionTimer: any;\n    let handler: MessageHandler;\n    return new Promise<_ReceiverMessageResponse<T>>((resolve, reject) => {\n      const eventId = _generateEventId('', 20);\n      messageChannel.port1.start();\n      const ackTimer = setTimeout(() => {\n        reject(new Error(_MessageError.UNSUPPORTED_EVENT));\n      }, timeout);\n      handler = {\n        messageChannel,\n        onMessage(event: Event): void {\n          const messageEvent = event as MessageEvent<ReceiverMessageEvent<T>>;\n          if (messageEvent.data.eventId !== eventId) {\n            return;\n          }\n          switch (messageEvent.data.status) {\n            case _Status.ACK:\n              // The receiver should ACK first.\n              clearTimeout(ackTimer);\n              completionTimer = setTimeout(() => {\n                reject(new Error(_MessageError.TIMEOUT));\n              }, _TimeoutDuration.COMPLETION);\n              break;\n            case _Status.DONE:\n              // Once the receiver's handlers are finished we will get the results.\n              clearTimeout(completionTimer);\n              resolve(messageEvent.data.response);\n              break;\n            default:\n              clearTimeout(ackTimer);\n              clearTimeout(completionTimer);\n              reject(new Error(_MessageError.INVALID_RESPONSE));\n              break;\n          }\n        }\n      };\n      this.handlers.add(handler);\n      messageChannel.port1.addEventListener('message', handler.onMessage);\n      this.target.postMessage(\n        {\n          eventType,\n          eventId,\n          data\n        } as SenderMessageEvent<S>,\n        [messageChannel.port2]\n      );\n    }).finally(() => {\n      if (handler) {\n        this.removeMessageHandler(handler);\n      }\n    });\n  }\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Recaptcha, GreCAPTCHATopLevel } from './recaptcha/recaptcha';\n\n/**\n * A specialized window type that melds the normal window type plus the\n * various bits we need. The three different blocks that are &'d together\n * cant be defined in the same block together.\n */\nexport type AuthWindow = {\n  // Standard window types\n  [T in keyof Window]: Window[T];\n} & {\n  // Any known / named properties we want to add\n  grecaptcha?: Recaptcha | GreCAPTCHATopLevel;\n  /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n  ___jsl?: Record<string, any>;\n  gapi?: typeof gapi;\n} & {\n  // A final catch-all for callbacks (which will have random names) that\n  // we will stick on the window.\n  [callback: string]: (...args: unknown[]) => void;\n};\n\n/**\n * Lazy accessor for window, since the compat layer won't tree shake this out,\n * we need to make sure not to mess with window unless we have to\n */\nexport function _window(): AuthWindow {\n  return window as unknown as AuthWindow;\n}\n\nexport function _setWindowLocation(url: string): void {\n  _window().location.href = url;\n}\n","/**\n * @license\n * Copyright 2020 Google LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { _window } from '../auth_window';\n\nexport function _isWorker(): boolean {\n  return (\n    typeof _window()['WorkerGlobalScope'] !== 'undefined' &&\n    typeof _window()['importScripts'] === 'function'\n  );\n}\n\nexport async function _getActiveServiceWorker(): Promise<ServiceWorker | null> {\n  if (!navigator?.serviceWorker) {\n    return null;\n  }\n  try {\n    const registration = await navigator.serviceWorker.ready;\n    return registration.active;\n  } catch {\n    return null;\n  }\n}\n\nexport function _getServiceWorkerController(): ServiceWorker | null {\n  return navigator?.serviceWorker?.controller || null;\n}\n\nexport function _getWorkerGlobalScope(): ServiceWorker | null {\n  return _isWorker() ? (self as unknown as ServiceWorker) : null;\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Persistence } from '../../model/public_types';\nimport {\n  PersistedBlob,\n  PersistenceInternal as InternalPersistence,\n  PersistenceType,\n  PersistenceValue,\n  StorageEventListener,\n  STORAGE_AVAILABLE_KEY\n} from '../../core/persistence/';\nimport {\n  _EventType,\n  _PingResponse,\n  KeyChangedResponse,\n  KeyChangedRequest,\n  PingRequest,\n  _TimeoutDuration\n} from '../messagechannel/index';\nimport { Receiver } from '../messagechannel/receiver';\nimport { Sender } from '../messagechannel/sender';\nimport {\n  _isWorker,\n  _getActiveServiceWorker,\n  _getServiceWorkerController,\n  _getWorkerGlobalScope\n} from '../util/worker';\n\nexport const DB_NAME = 'firebaseLocalStorageDb';\nconst DB_VERSION = 1;\nconst DB_OBJECTSTORE_NAME = 'firebaseLocalStorage';\nconst DB_DATA_KEYPATH = 'fbase_key';\n\ninterface DBObject {\n  [DB_DATA_KEYPATH]: string;\n  value: PersistedBlob;\n}\n\n/**\n * Promise wrapper for IDBRequest\n *\n * Unfortunately we can't cleanly extend Promise<T> since promises are not callable in ES6\n *\n */\nclass DBPromise<T> {\n  constructor(private readonly request: IDBRequest) {}\n\n  toPromise(): Promise<T> {\n    return new Promise<T>((resolve, reject) => {\n      this.request.addEventListener('success', () => {\n        resolve(this.request.result);\n      });\n      this.request.addEventListener('error', () => {\n        reject(this.request.error);\n      });\n    });\n  }\n}\n\nfunction getObjectStore(db: IDBDatabase, isReadWrite: boolean): IDBObjectStore {\n  return db\n    .transaction([DB_OBJECTSTORE_NAME], isReadWrite ? 'readwrite' : 'readonly')\n    .objectStore(DB_OBJECTSTORE_NAME);\n}\n\nexport async function _clearDatabase(db: IDBDatabase): Promise<void> {\n  const objectStore = getObjectStore(db, true);\n  return new DBPromise<void>(objectStore.clear()).toPromise();\n}\n\nexport function _deleteDatabase(): Promise<void> {\n  const request = indexedDB.deleteDatabase(DB_NAME);\n  return new DBPromise<void>(request).toPromise();\n}\n\nexport function _openDatabase(): Promise<IDBDatabase> {\n  const request = indexedDB.open(DB_NAME, DB_VERSION);\n  return new Promise((resolve, reject) => {\n    request.addEventListener('error', () => {\n      reject(request.error);\n    });\n\n    request.addEventListener('upgradeneeded', () => {\n      const db = request.result;\n\n      try {\n        db.createObjectStore(DB_OBJECTSTORE_NAME, { keyPath: DB_DATA_KEYPATH });\n      } catch (e) {\n        reject(e);\n      }\n    });\n\n    request.addEventListener('success', async () => {\n      const db: IDBDatabase = request.result;\n      // Strange bug that occurs in Firefox when multiple tabs are opened at the\n      // same time. The only way to recover seems to be deleting the database\n      // and re-initializing it.\n      // https://github.com/firebase/firebase-js-sdk/issues/634\n\n      if (!db.objectStoreNames.contains(DB_OBJECTSTORE_NAME)) {\n        // Need to close the database or else you get a `blocked` event\n        db.close();\n        await _deleteDatabase();\n        resolve(await _openDatabase());\n      } else {\n        resolve(db);\n      }\n    });\n  });\n}\n\nexport async function _putObject(\n  db: IDBDatabase,\n  key: string,\n  value: PersistenceValue | string\n): Promise<void> {\n  const request = getObjectStore(db, true).put({\n    [DB_DATA_KEYPATH]: key,\n    value\n  });\n  return new DBPromise<void>(request).toPromise();\n}\n\nasync function getObject(\n  db: IDBDatabase,\n  key: string\n): Promise<PersistedBlob | null> {\n  const request = getObjectStore(db, false).get(key);\n  const data = await new DBPromise<DBObject | undefined>(request).toPromise();\n  return data === undefined ? null : data.value;\n}\n\nexport function _deleteObject(db: IDBDatabase, key: string): Promise<void> {\n  const request = getObjectStore(db, true).delete(key);\n  return new DBPromise<void>(request).toPromise();\n}\n\nexport const _POLLING_INTERVAL_MS = 800;\nexport const _TRANSACTION_RETRY_COUNT = 3;\n\nclass IndexedDBLocalPersistence implements InternalPersistence {\n  static type: 'LOCAL' = 'LOCAL';\n\n  type = PersistenceType.LOCAL;\n  db?: IDBDatabase;\n  readonly _shouldAllowMigration = true;\n\n  private readonly listeners: Record<string, Set<StorageEventListener>> = {};\n  private readonly localCache: Record<string, PersistenceValue | null> = {};\n  // setTimeout return value is platform specific\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  private pollTimer: any | null = null;\n  private pendingWrites = 0;\n\n  private receiver: Receiver | null = null;\n  private sender: Sender | null = null;\n  private serviceWorkerReceiverAvailable = false;\n  private activeServiceWorker: ServiceWorker | null = null;\n  // Visible for testing only\n  readonly _workerInitializationPromise: Promise<void>;\n\n  constructor() {\n    // Fire & forget the service worker registration as it may never resolve\n    this._workerInitializationPromise =\n      this.initializeServiceWorkerMessaging().then(\n        () => {},\n        () => {}\n      );\n  }\n\n  async _openDb(): Promise<IDBDatabase> {\n    if (this.db) {\n      return this.db;\n    }\n    this.db = await _openDatabase();\n    return this.db;\n  }\n\n  async _withRetries<T>(op: (db: IDBDatabase) => Promise<T>): Promise<T> {\n    let numAttempts = 0;\n\n    while (true) {\n      try {\n        const db = await this._openDb();\n        return await op(db);\n      } catch (e) {\n        if (numAttempts++ > _TRANSACTION_RETRY_COUNT) {\n          throw e;\n        }\n        if (this.db) {\n          this.db.close();\n          this.db = undefined;\n        }\n        // TODO: consider adding exponential backoff\n      }\n    }\n  }\n\n  /**\n   * IndexedDB events do not propagate from the main window to the worker context.  We rely on a\n   * postMessage interface to send these events to the worker ourselves.\n   */\n  private async initializeServiceWorkerMessaging(): Promise<void> {\n    return _isWorker() ? this.initializeReceiver() : this.initializeSender();\n  }\n\n  /**\n   * As the worker we should listen to events from the main window.\n   */\n  private async initializeReceiver(): Promise<void> {\n    this.receiver = Receiver._getInstance(_getWorkerGlobalScope()!);\n    // Refresh from persistence if we receive a KeyChanged message.\n    this.receiver._subscribe(\n      _EventType.KEY_CHANGED,\n      async (_origin: string, data: KeyChangedRequest) => {\n        const keys = await this._poll();\n        return {\n          keyProcessed: keys.includes(data.key)\n        };\n      }\n    );\n    // Let the sender know that we are listening so they give us more timeout.\n    this.receiver._subscribe(\n      _EventType.PING,\n      async (_origin: string, _data: PingRequest) => {\n        return [_EventType.KEY_CHANGED];\n      }\n    );\n  }\n\n  /**\n   * As the main window, we should let the worker know when keys change (set and remove).\n   *\n   * @remarks\n   * {@link https://developer.mozilla.org/en-US/docs/Web/API/ServiceWorkerContainer/ready | ServiceWorkerContainer.ready}\n   * may not resolve.\n   */\n  private async initializeSender(): Promise<void> {\n    // Check to see if there's an active service worker.\n    this.activeServiceWorker = await _getActiveServiceWorker();\n    if (!this.activeServiceWorker) {\n      return;\n    }\n    this.sender = new Sender(this.activeServiceWorker);\n    // Ping the service worker to check what events they can handle.\n    const results = await this.sender._send<_PingResponse, PingRequest>(\n      _EventType.PING,\n      {},\n      _TimeoutDuration.LONG_ACK\n    );\n    if (!results) {\n      return;\n    }\n    if (\n      results[0]?.fulfilled &&\n      results[0]?.value.includes(_EventType.KEY_CHANGED)\n    ) {\n      this.serviceWorkerReceiverAvailable = true;\n    }\n  }\n\n  /**\n   * Let the worker know about a changed key, the exact key doesn't technically matter since the\n   * worker will just trigger a full sync anyway.\n   *\n   * @remarks\n   * For now, we only support one service worker per page.\n   *\n   * @param key - Storage key which changed.\n   */\n  private async notifyServiceWorker(key: string): Promise<void> {\n    if (\n      !this.sender ||\n      !this.activeServiceWorker ||\n      _getServiceWorkerController() !== this.activeServiceWorker\n    ) {\n      return;\n    }\n    try {\n      await this.sender._send<KeyChangedResponse, KeyChangedRequest>(\n        _EventType.KEY_CHANGED,\n        { key },\n        // Use long timeout if receiver has previously responded to a ping from us.\n        this.serviceWorkerReceiverAvailable\n          ? _TimeoutDuration.LONG_ACK\n          : _TimeoutDuration.ACK\n      );\n    } catch {\n      // This is a best effort approach. Ignore errors.\n    }\n  }\n\n  async _isAvailable(): Promise<boolean> {\n    try {\n      if (!indexedDB) {\n        return false;\n      }\n      const db = await _openDatabase();\n      await _putObject(db, STORAGE_AVAILABLE_KEY, '1');\n      await _deleteObject(db, STORAGE_AVAILABLE_KEY);\n      return true;\n    } catch {}\n    return false;\n  }\n\n  private async _withPendingWrite(write: () => Promise<void>): Promise<void> {\n    this.pendingWrites++;\n    try {\n      await write();\n    } finally {\n      this.pendingWrites--;\n    }\n  }\n\n  async _set(key: string, value: PersistenceValue): Promise<void> {\n    return this._withPendingWrite(async () => {\n      await this._withRetries((db: IDBDatabase) => _putObject(db, key, value));\n      this.localCache[key] = value;\n      return this.notifyServiceWorker(key);\n    });\n  }\n\n  async _get<T extends PersistenceValue>(key: string): Promise<T | null> {\n    const obj = (await this._withRetries((db: IDBDatabase) =>\n      getObject(db, key)\n    )) as T;\n    this.localCache[key] = obj;\n    return obj;\n  }\n\n  async _remove(key: string): Promise<void> {\n    return this._withPendingWrite(async () => {\n      await this._withRetries((db: IDBDatabase) => _deleteObject(db, key));\n      delete this.localCache[key];\n      return this.notifyServiceWorker(key);\n    });\n  }\n\n  private async _poll(): Promise<string[]> {\n    // TODO: check if we need to fallback if getAll is not supported\n    const result = await this._withRetries((db: IDBDatabase) => {\n      const getAllRequest = getObjectStore(db, false).getAll();\n      return new DBPromise<DBObject[] | null>(getAllRequest).toPromise();\n    });\n\n    if (!result) {\n      return [];\n    }\n\n    // If we have pending writes in progress abort, we'll get picked up on the next poll\n    if (this.pendingWrites !== 0) {\n      return [];\n    }\n\n    const keys = [];\n    const keysInResult = new Set();\n    if (result.length !== 0) {\n      for (const { fbase_key: key, value } of result) {\n        keysInResult.add(key);\n        if (JSON.stringify(this.localCache[key]) !== JSON.stringify(value)) {\n          this.notifyListeners(key, value as PersistenceValue);\n          keys.push(key);\n        }\n      }\n    }\n\n    for (const localKey of Object.keys(this.localCache)) {\n      if (this.localCache[localKey] && !keysInResult.has(localKey)) {\n        // Deleted\n        this.notifyListeners(localKey, null);\n        keys.push(localKey);\n      }\n    }\n    return keys;\n  }\n\n  private notifyListeners(\n    key: string,\n    newValue: PersistenceValue | null\n  ): void {\n    this.localCache[key] = newValue;\n    const listeners = this.listeners[key];\n    if (listeners) {\n      for (const listener of Array.from(listeners)) {\n        listener(newValue);\n      }\n    }\n  }\n\n  private startPolling(): void {\n    this.stopPolling();\n\n    this.pollTimer = setInterval(\n      async () => this._poll(),\n      _POLLING_INTERVAL_MS\n    );\n  }\n\n  private stopPolling(): void {\n    if (this.pollTimer) {\n      clearInterval(this.pollTimer);\n      this.pollTimer = null;\n    }\n  }\n\n  _addListener(key: string, listener: StorageEventListener): void {\n    if (Object.keys(this.listeners).length === 0) {\n      this.startPolling();\n    }\n    if (!this.listeners[key]) {\n      this.listeners[key] = new Set();\n      // Populate the cache to avoid spuriously triggering on first poll.\n      void this._get(key); // This can happen in the background async and we can return immediately.\n    }\n    this.listeners[key].add(listener);\n  }\n\n  _removeListener(key: string, listener: StorageEventListener): void {\n    if (this.listeners[key]) {\n      this.listeners[key].delete(listener);\n\n      if (this.listeners[key].size === 0) {\n        delete this.listeners[key];\n      }\n    }\n\n    if (Object.keys(this.listeners).length === 0) {\n      this.stopPolling();\n    }\n  }\n}\n\n/**\n * An implementation of {@link Persistence} of type `LOCAL` using `indexedDB`\n * for the underlying storage.\n *\n * @public\n */\nexport const indexedDBLocalPersistence: Persistence = IndexedDBLocalPersistence;\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  _performApiRequest,\n  Endpoint,\n  HttpMethod,\n  RecaptchaClientType,\n  RecaptchaVersion,\n  _addTidIfNecessary\n} from '../index';\nimport { Auth } from '../../model/public_types';\nimport { IdTokenResponse } from '../../model/id_token';\nimport { MfaEnrollment } from '../account_management/mfa';\nimport { SignInWithIdpResponse } from './idp';\nimport {\n  SignInWithPhoneNumberRequest,\n  SignInWithPhoneNumberResponse\n} from './sms';\n\nexport interface FinalizeMfaResponse {\n  idToken: string;\n  refreshToken: string;\n}\n\n/**\n * @internal\n */\nexport interface IdTokenMfaResponse extends IdTokenResponse {\n  mfaPendingCredential?: string;\n  mfaInfo?: MfaEnrollment[];\n}\n\nexport interface StartPhoneMfaSignInRequest {\n  mfaPendingCredential: string;\n  mfaEnrollmentId: string;\n  phoneSignInInfo: {\n    // reCAPTCHA v2 token\n    recaptchaToken?: string;\n    // reCAPTCHA Enterprise token\n    captchaResponse?: string;\n    clientType?: RecaptchaClientType;\n    recaptchaVersion?: RecaptchaVersion;\n  };\n  tenantId?: string;\n}\n\nexport interface StartPhoneMfaSignInResponse {\n  phoneResponseInfo: {\n    sessionInfo: string;\n  };\n}\n\nexport function startSignInPhoneMfa(\n  auth: Auth,\n  request: StartPhoneMfaSignInRequest\n): Promise<StartPhoneMfaSignInResponse> {\n  return _performApiRequest<\n    StartPhoneMfaSignInRequest,\n    StartPhoneMfaSignInResponse\n  >(\n    auth,\n    HttpMethod.POST,\n    Endpoint.START_MFA_SIGN_IN,\n    _addTidIfNecessary(auth, request)\n  );\n}\n\nexport interface FinalizePhoneMfaSignInRequest {\n  mfaPendingCredential: string;\n  phoneVerificationInfo: SignInWithPhoneNumberRequest;\n  tenantId?: string;\n}\n\n// TOTP MFA Sign in only has a finalize phase. Phone MFA has a start phase to initiate sending an\n// SMS and a finalize phase to complete sign in. With TOTP, the user already has the OTP in the\n// TOTP/Authenticator app.\nexport interface FinalizeTotpMfaSignInRequest {\n  mfaPendingCredential: string;\n  totpVerificationInfo: { verificationCode: string };\n  tenantId?: string;\n  mfaEnrollmentId: string;\n}\n\nexport interface FinalizePhoneMfaSignInResponse extends FinalizeMfaResponse {}\n\nexport interface FinalizeTotpMfaSignInResponse extends FinalizeMfaResponse {}\n\nexport function finalizeSignInPhoneMfa(\n  auth: Auth,\n  request: FinalizePhoneMfaSignInRequest\n): Promise<FinalizePhoneMfaSignInResponse> {\n  return _performApiRequest<\n    FinalizePhoneMfaSignInRequest,\n    FinalizePhoneMfaSignInResponse\n  >(\n    auth,\n    HttpMethod.POST,\n    Endpoint.FINALIZE_MFA_SIGN_IN,\n    _addTidIfNecessary(auth, request)\n  );\n}\n\nexport function finalizeSignInTotpMfa(\n  auth: Auth,\n  request: FinalizeTotpMfaSignInRequest\n): Promise<FinalizeTotpMfaSignInResponse> {\n  return _performApiRequest<\n    FinalizeTotpMfaSignInRequest,\n    FinalizeTotpMfaSignInResponse\n  >(\n    auth,\n    HttpMethod.POST,\n    Endpoint.FINALIZE_MFA_SIGN_IN,\n    _addTidIfNecessary(auth, request)\n  );\n}\n\n/**\n * @internal\n */\nexport type PhoneOrOauthTokenResponse =\n  | SignInWithPhoneNumberResponse\n  | SignInWithIdpResponse\n  | IdTokenResponse;\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { querystring } from '@firebase/util';\n\nimport { AuthErrorCode } from '../../core/errors';\nimport { _assert, _createError } from '../../core/util/assert';\nimport { Delay } from '../../core/util/delay';\nimport { AuthInternal } from '../../model/auth';\nimport { _window } from '../auth_window';\nimport * as jsHelpers from '../load_js';\nimport { Recaptcha, isV2 } from './recaptcha';\nimport { MockReCaptcha } from './recaptcha_mock';\n\n// ReCaptcha will load using the same callback, so the callback function needs\n// to be kept around\nexport const _JSLOAD_CALLBACK = jsHelpers._generateCallbackName('rcb');\nconst NETWORK_TIMEOUT_DELAY = new Delay(30000, 60000);\n\n/**\n * We need to mark this interface as internal explicitly to exclude it in the public typings, because\n * it references AuthInternal which has a circular dependency with UserInternal.\n *\n * @internal\n */\nexport interface ReCaptchaLoader {\n  load(auth: AuthInternal, hl?: string): Promise<Recaptcha>;\n  clearedOneInstance(): void;\n}\n\n/**\n * Loader for the GReCaptcha library. There should only ever be one of this.\n */\nexport class ReCaptchaLoaderImpl implements ReCaptchaLoader {\n  private hostLanguage = '';\n  private counter = 0;\n  /**\n   * Check for `render()` method. `window.grecaptcha` will exist if the Enterprise\n   * version of the ReCAPTCHA script was loaded by someone else (e.g. App Check) but\n   * `window.grecaptcha.render()` will not. Another load will add it.\n   */\n  private readonly librarySeparatelyLoaded = !!_window().grecaptcha?.render;\n\n  load(auth: AuthInternal, hl = ''): Promise<Recaptcha> {\n    _assert(isHostLanguageValid(hl), auth, AuthErrorCode.ARGUMENT_ERROR);\n\n    if (this.shouldResolveImmediately(hl) && isV2(_window().grecaptcha)) {\n      return Promise.resolve(_window().grecaptcha! as Recaptcha);\n    }\n    return new Promise<Recaptcha>((resolve, reject) => {\n      const networkTimeout = _window().setTimeout(() => {\n        reject(_createError(auth, AuthErrorCode.NETWORK_REQUEST_FAILED));\n      }, NETWORK_TIMEOUT_DELAY.get());\n\n      _window()[_JSLOAD_CALLBACK] = () => {\n        _window().clearTimeout(networkTimeout);\n        delete _window()[_JSLOAD_CALLBACK];\n\n        const recaptcha = _window().grecaptcha as Recaptcha;\n\n        if (!recaptcha || !isV2(recaptcha)) {\n          reject(_createError(auth, AuthErrorCode.INTERNAL_ERROR));\n          return;\n        }\n\n        // Wrap the recaptcha render function so that we know if the developer has\n        // called it separately\n        const render = recaptcha.render;\n        recaptcha.render = (container, params) => {\n          const widgetId = render(container, params);\n          this.counter++;\n          return widgetId;\n        };\n\n        this.hostLanguage = hl;\n        resolve(recaptcha);\n      };\n\n      const url = `${jsHelpers._recaptchaV2ScriptUrl()}?${querystring({\n        onload: _JSLOAD_CALLBACK,\n        render: 'explicit',\n        hl\n      })}`;\n\n      jsHelpers._loadJS(url).catch(() => {\n        clearTimeout(networkTimeout);\n        reject(_createError(auth, AuthErrorCode.INTERNAL_ERROR));\n      });\n    });\n  }\n\n  clearedOneInstance(): void {\n    this.counter--;\n  }\n\n  private shouldResolveImmediately(hl: string): boolean {\n    // We can resolve immediately if:\n    //   • grecaptcha is already defined AND (\n    //     1. the requested language codes are the same OR\n    //     2. there exists already a ReCaptcha on the page\n    //     3. the library was already loaded by the app\n    // In cases (2) and (3), we _can't_ reload as it would break the recaptchas\n    // that are already in the page\n    return (\n      !!_window().grecaptcha?.render &&\n      (hl === this.hostLanguage ||\n        this.counter > 0 ||\n        this.librarySeparatelyLoaded)\n    );\n  }\n}\n\nfunction isHostLanguageValid(hl: string): boolean {\n  return hl.length <= 6 && /^\\s*[a-zA-Z0-9\\-]*\\s*$/.test(hl);\n}\n\nexport class MockReCaptchaLoaderImpl implements ReCaptchaLoader {\n  async load(auth: AuthInternal): Promise<Recaptcha> {\n    return new MockReCaptcha(auth);\n  }\n\n  clearedOneInstance(): void {}\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Auth, RecaptchaParameters } from '../../model/public_types';\nimport { getRecaptchaParams } from '../../api/authentication/recaptcha';\nimport { _castAuth } from '../../core/auth/auth_impl';\nimport { AuthErrorCode } from '../../core/errors';\nimport { _assert } from '../../core/util/assert';\nimport { _isHttpOrHttps } from '../../core/util/location';\nimport { ApplicationVerifierInternal } from '../../model/application_verifier';\nimport { AuthInternal } from '../../model/auth';\nimport { _window } from '../auth_window';\nimport { _isWorker } from '../util/worker';\nimport { Recaptcha } from './recaptcha';\nimport {\n  MockReCaptchaLoaderImpl,\n  ReCaptchaLoader,\n  ReCaptchaLoaderImpl\n} from './recaptcha_loader';\n\nexport const RECAPTCHA_VERIFIER_TYPE = 'recaptcha';\n\nconst DEFAULT_PARAMS: RecaptchaParameters = {\n  theme: 'light',\n  type: 'image'\n};\n\ntype TokenCallback = (token: string) => void;\n\n/**\n * An {@link https://www.google.com/recaptcha/ | reCAPTCHA}-based application verifier.\n *\n * @remarks\n * `RecaptchaVerifier` does not work in a Node.js environment.\n *\n * @public\n */\nexport class RecaptchaVerifier implements ApplicationVerifierInternal {\n  /**\n   * The application verifier type.\n   *\n   * @remarks\n   * For a reCAPTCHA verifier, this is 'recaptcha'.\n   */\n  readonly type = RECAPTCHA_VERIFIER_TYPE;\n  private destroyed = false;\n  private widgetId: number | null = null;\n  private readonly container: HTMLElement;\n  private readonly isInvisible: boolean;\n  private readonly tokenChangeListeners = new Set<TokenCallback>();\n  private renderPromise: Promise<number> | null = null;\n  private readonly auth: AuthInternal;\n\n  /** @internal */\n  readonly _recaptchaLoader: ReCaptchaLoader;\n  private recaptcha: Recaptcha | null = null;\n\n  /**\n   * @param authExtern - The corresponding Firebase {@link Auth} instance.\n   *\n   * @param containerOrId - The reCAPTCHA container parameter.\n   *\n   * @remarks\n   * This has different meaning depending on whether the reCAPTCHA is hidden or visible. For a\n   * visible reCAPTCHA the container must be empty. If a string is used, it has to correspond to\n   * an element ID. The corresponding element must also must be in the DOM at the time of\n   * initialization.\n   *\n   * @param parameters - The optional reCAPTCHA parameters.\n   *\n   * @remarks\n   * Check the reCAPTCHA docs for a comprehensive list. All parameters are accepted except for\n   * the sitekey. Firebase Auth backend provisions a reCAPTCHA for each project and will\n   * configure this upon rendering. For an invisible reCAPTCHA, a size key must have the value\n   * 'invisible'.\n   */\n  constructor(\n    authExtern: Auth,\n    containerOrId: HTMLElement | string,\n    private readonly parameters: RecaptchaParameters = {\n      ...DEFAULT_PARAMS\n    }\n  ) {\n    this.auth = _castAuth(authExtern);\n    this.isInvisible = this.parameters.size === 'invisible';\n    _assert(\n      typeof document !== 'undefined',\n      this.auth,\n      AuthErrorCode.OPERATION_NOT_SUPPORTED\n    );\n    const container =\n      typeof containerOrId === 'string'\n        ? document.getElementById(containerOrId)\n        : containerOrId;\n    _assert(container, this.auth, AuthErrorCode.ARGUMENT_ERROR);\n\n    this.container = container;\n    this.parameters.callback = this.makeTokenCallback(this.parameters.callback);\n\n    this._recaptchaLoader = this.auth.settings.appVerificationDisabledForTesting\n      ? new MockReCaptchaLoaderImpl()\n      : new ReCaptchaLoaderImpl();\n\n    this.validateStartingState();\n    // TODO: Figure out if sdk version is needed\n  }\n\n  /**\n   * Waits for the user to solve the reCAPTCHA and resolves with the reCAPTCHA token.\n   *\n   * @returns A Promise for the reCAPTCHA token.\n   */\n  async verify(): Promise<string> {\n    this.assertNotDestroyed();\n    const id = await this.render();\n    const recaptcha = this.getAssertedRecaptcha();\n\n    const response = recaptcha.getResponse(id);\n    if (response) {\n      return response;\n    }\n\n    return new Promise<string>(resolve => {\n      const tokenChange = (token: string): void => {\n        if (!token) {\n          return; // Ignore token expirations.\n        }\n        this.tokenChangeListeners.delete(tokenChange);\n        resolve(token);\n      };\n\n      this.tokenChangeListeners.add(tokenChange);\n      if (this.isInvisible) {\n        recaptcha.execute(id);\n      }\n    });\n  }\n\n  /**\n   * Renders the reCAPTCHA widget on the page.\n   *\n   * @returns A Promise that resolves with the reCAPTCHA widget ID.\n   */\n  render(): Promise<number> {\n    try {\n      this.assertNotDestroyed();\n    } catch (e) {\n      // This method returns a promise. Since it's not async (we want to return the\n      // _same_ promise if rendering is still occurring), the API surface should\n      // reject with the error rather than just throw\n      return Promise.reject(e);\n    }\n\n    if (this.renderPromise) {\n      return this.renderPromise;\n    }\n\n    this.renderPromise = this.makeRenderPromise().catch(e => {\n      this.renderPromise = null;\n      throw e;\n    });\n\n    return this.renderPromise;\n  }\n\n  /** @internal */\n  _reset(): void {\n    this.assertNotDestroyed();\n    if (this.widgetId !== null) {\n      this.getAssertedRecaptcha().reset(this.widgetId);\n    }\n  }\n\n  /**\n   * Clears the reCAPTCHA widget from the page and destroys the instance.\n   */\n  clear(): void {\n    this.assertNotDestroyed();\n    this.destroyed = true;\n    this._recaptchaLoader.clearedOneInstance();\n    if (!this.isInvisible) {\n      this.container.childNodes.forEach(node => {\n        this.container.removeChild(node);\n      });\n    }\n  }\n\n  private validateStartingState(): void {\n    _assert(!this.parameters.sitekey, this.auth, AuthErrorCode.ARGUMENT_ERROR);\n    _assert(\n      this.isInvisible || !this.container.hasChildNodes(),\n      this.auth,\n      AuthErrorCode.ARGUMENT_ERROR\n    );\n    _assert(\n      typeof document !== 'undefined',\n      this.auth,\n      AuthErrorCode.OPERATION_NOT_SUPPORTED\n    );\n  }\n\n  private makeTokenCallback(\n    existing: TokenCallback | string | undefined\n  ): TokenCallback {\n    return token => {\n      this.tokenChangeListeners.forEach(listener => listener(token));\n      if (typeof existing === 'function') {\n        existing(token);\n      } else if (typeof existing === 'string') {\n        const globalFunc = _window()[existing];\n        if (typeof globalFunc === 'function') {\n          globalFunc(token);\n        }\n      }\n    };\n  }\n\n  private assertNotDestroyed(): void {\n    _assert(!this.destroyed, this.auth, AuthErrorCode.INTERNAL_ERROR);\n  }\n\n  private async makeRenderPromise(): Promise<number> {\n    await this.init();\n    if (!this.widgetId) {\n      let container = this.container;\n      if (!this.isInvisible) {\n        const guaranteedEmpty = document.createElement('div');\n        container.appendChild(guaranteedEmpty);\n        container = guaranteedEmpty;\n      }\n\n      this.widgetId = this.getAssertedRecaptcha().render(\n        container,\n        this.parameters\n      );\n    }\n\n    return this.widgetId;\n  }\n\n  private async init(): Promise<void> {\n    _assert(\n      _isHttpOrHttps() && !_isWorker(),\n      this.auth,\n      AuthErrorCode.INTERNAL_ERROR\n    );\n\n    await domReady();\n    this.recaptcha = await this._recaptchaLoader.load(\n      this.auth,\n      this.auth.languageCode || undefined\n    );\n\n    const siteKey = await getRecaptchaParams(this.auth);\n    _assert(siteKey, this.auth, AuthErrorCode.INTERNAL_ERROR);\n    this.parameters.sitekey = siteKey;\n  }\n\n  private getAssertedRecaptcha(): Recaptcha {\n    _assert(this.recaptcha, this.auth, AuthErrorCode.INTERNAL_ERROR);\n    return this.recaptcha;\n  }\n}\n\nfunction domReady(): Promise<void> {\n  let resolver: (() => void) | null = null;\n  return new Promise<void>(resolve => {\n    if (document.readyState === 'complete') {\n      resolve();\n      return;\n    }\n\n    // Document not ready, wait for load before resolving.\n    // Save resolver, so we can remove listener in case it was externally\n    // cancelled.\n    resolver = () => resolve();\n    window.addEventListener('load', resolver);\n  }).catch(e => {\n    if (resolver) {\n      window.removeEventListener('load', resolver);\n    }\n\n    throw e;\n  });\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  ApplicationVerifier,\n  Auth,\n  ConfirmationResult,\n  PhoneInfoOptions,\n  User,\n  UserCredential\n} from '../../model/public_types';\n\nimport {\n  startEnrollPhoneMfa,\n  StartPhoneMfaEnrollmentRequest,\n  StartPhoneMfaEnrollmentResponse\n} from '../../api/account_management/mfa';\nimport {\n  startSignInPhoneMfa,\n  StartPhoneMfaSignInRequest,\n  StartPhoneMfaSignInResponse\n} from '../../api/authentication/mfa';\nimport {\n  sendPhoneVerificationCode,\n  SendPhoneVerificationCodeRequest,\n  SendPhoneVerificationCodeResponse\n} from '../../api/authentication/sms';\nimport {\n  RecaptchaActionName,\n  RecaptchaClientType,\n  RecaptchaAuthProvider\n} from '../../api';\nimport { ApplicationVerifierInternal } from '../../model/application_verifier';\nimport { PhoneAuthCredential } from '../../core/credentials/phone';\nimport { AuthErrorCode } from '../../core/errors';\nimport { _assertLinkedStatus, _link } from '../../core/user/link_unlink';\nimport {\n  _assert,\n  _serverAppCurrentUserOperationNotSupportedError\n} from '../../core/util/assert';\nimport { AuthInternal } from '../../model/auth';\nimport {\n  linkWithCredential,\n  reauthenticateWithCredential,\n  signInWithCredential\n} from '../../core/strategies/credential';\nimport {\n  MultiFactorSessionImpl,\n  MultiFactorSessionType\n} from '../../mfa/mfa_session';\nimport { UserInternal } from '../../model/user';\nimport { RECAPTCHA_VERIFIER_TYPE } from '../recaptcha/recaptcha_verifier';\nimport { _castAuth } from '../../core/auth/auth_impl';\nimport { getModularInstance } from '@firebase/util';\nimport { ProviderId } from '../../model/enums';\nimport {\n  FAKE_TOKEN,\n  handleRecaptchaFlow,\n  _initializeRecaptchaConfig\n} from '../recaptcha/recaptcha_enterprise_verifier';\nimport { _isFirebaseServerApp } from '@firebase/app';\n\ninterface OnConfirmationCallback {\n  (credential: PhoneAuthCredential): Promise<UserCredential>;\n}\n\nclass ConfirmationResultImpl implements ConfirmationResult {\n  constructor(\n    readonly verificationId: string,\n    private readonly onConfirmation: OnConfirmationCallback\n  ) {}\n\n  confirm(verificationCode: string): Promise<UserCredential> {\n    const authCredential = PhoneAuthCredential._fromVerification(\n      this.verificationId,\n      verificationCode\n    );\n    return this.onConfirmation(authCredential);\n  }\n}\n\n/**\n * Asynchronously signs in using a phone number.\n *\n * @remarks\n * This method sends a code via SMS to the given\n * phone number, and returns a {@link ConfirmationResult}. After the user\n * provides the code sent to their phone, call {@link ConfirmationResult.confirm}\n * with the code to sign the user in.\n *\n * For abuse prevention, this method requires a {@link ApplicationVerifier}.\n * This SDK includes an implementation based on reCAPTCHA v2, {@link RecaptchaVerifier}.\n * This function can work on other platforms that do not support the\n * {@link RecaptchaVerifier} (like React Native), but you need to use a\n * third-party {@link ApplicationVerifier} implementation.\n *\n * If you've enabled project-level reCAPTCHA Enterprise bot protection in\n * Enforce mode, you can omit the {@link ApplicationVerifier}.\n *\n * This method does not work in a Node.js environment or with {@link Auth} instances created with a\n * {@link @firebase/app#FirebaseServerApp}.\n *\n * @example\n * ```javascript\n * // 'recaptcha-container' is the ID of an element in the DOM.\n * const applicationVerifier = new firebase.auth.RecaptchaVerifier('recaptcha-container');\n * const confirmationResult = await signInWithPhoneNumber(auth, phoneNumber, applicationVerifier);\n * // Obtain a verificationCode from the user.\n * const credential = await confirmationResult.confirm(verificationCode);\n * ```\n *\n * @param auth - The {@link Auth} instance.\n * @param phoneNumber - The user's phone number in E.164 format (e.g. +16505550101).\n * @param appVerifier - The {@link ApplicationVerifier}.\n *\n * @public\n */\nexport async function signInWithPhoneNumber(\n  auth: Auth,\n  phoneNumber: string,\n  appVerifier?: ApplicationVerifier\n): Promise<ConfirmationResult> {\n  if (_isFirebaseServerApp(auth.app)) {\n    return Promise.reject(\n      _serverAppCurrentUserOperationNotSupportedError(auth)\n    );\n  }\n  const authInternal = _castAuth(auth);\n  const verificationId = await _verifyPhoneNumber(\n    authInternal,\n    phoneNumber,\n    getModularInstance(appVerifier as ApplicationVerifierInternal)\n  );\n  return new ConfirmationResultImpl(verificationId, cred =>\n    signInWithCredential(authInternal, cred)\n  );\n}\n\n/**\n * Links the user account with the given phone number.\n *\n * @remarks\n * This method does not work in a Node.js environment.\n *\n * @param user - The user.\n * @param phoneNumber - The user's phone number in E.164 format (e.g. +16505550101).\n * @param appVerifier - The {@link ApplicationVerifier}.\n *\n * @public\n */\nexport async function linkWithPhoneNumber(\n  user: User,\n  phoneNumber: string,\n  appVerifier?: ApplicationVerifier\n): Promise<ConfirmationResult> {\n  const userInternal = getModularInstance(user) as UserInternal;\n  await _assertLinkedStatus(false, userInternal, ProviderId.PHONE);\n  const verificationId = await _verifyPhoneNumber(\n    userInternal.auth,\n    phoneNumber,\n    getModularInstance(appVerifier as ApplicationVerifierInternal)\n  );\n  return new ConfirmationResultImpl(verificationId, cred =>\n    linkWithCredential(userInternal, cred)\n  );\n}\n\n/**\n * Re-authenticates a user using a fresh phone credential.\n *\n * @remarks\n * Use before operations such as {@link updatePassword} that require tokens from recent sign-in attempts.\n *\n * This method does not work in a Node.js environment or on any {@link User} signed in by\n * {@link Auth} instances created with a {@link @firebase/app#FirebaseServerApp}.\n *\n * @param user - The user.\n * @param phoneNumber - The user's phone number in E.164 format (e.g. +16505550101).\n * @param appVerifier - The {@link ApplicationVerifier}.\n *\n * @public\n */\nexport async function reauthenticateWithPhoneNumber(\n  user: User,\n  phoneNumber: string,\n  appVerifier?: ApplicationVerifier\n): Promise<ConfirmationResult> {\n  const userInternal = getModularInstance(user) as UserInternal;\n  if (_isFirebaseServerApp(userInternal.auth.app)) {\n    return Promise.reject(\n      _serverAppCurrentUserOperationNotSupportedError(userInternal.auth)\n    );\n  }\n  const verificationId = await _verifyPhoneNumber(\n    userInternal.auth,\n    phoneNumber,\n    getModularInstance(appVerifier as ApplicationVerifierInternal)\n  );\n  return new ConfirmationResultImpl(verificationId, cred =>\n    reauthenticateWithCredential(userInternal, cred)\n  );\n}\n\ntype PhoneApiCaller<TRequest, TResponse> = (\n  auth: AuthInternal,\n  request: TRequest\n) => Promise<TResponse>;\n\n/**\n * Returns a verification ID to be used in conjunction with the SMS code that is sent.\n *\n */\nexport async function _verifyPhoneNumber(\n  auth: AuthInternal,\n  options: PhoneInfoOptions | string,\n  verifier?: ApplicationVerifierInternal\n): Promise<string> {\n  if (!auth._getRecaptchaConfig()) {\n    try {\n      await _initializeRecaptchaConfig(auth);\n    } catch (error) {\n      // If an error occurs while fetching the config, there is no way to know the enablement state\n      // of Phone provider, so we proceed with recaptcha V2 verification.\n      // The error is likely \"recaptchaKey undefined\", as reCAPTCHA Enterprise is not\n      // enabled for any provider.\n      console.log(\n        'Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.'\n      );\n    }\n  }\n\n  try {\n    let phoneInfoOptions: PhoneInfoOptions;\n\n    if (typeof options === 'string') {\n      phoneInfoOptions = {\n        phoneNumber: options\n      };\n    } else {\n      phoneInfoOptions = options;\n    }\n\n    if ('session' in phoneInfoOptions) {\n      const session = phoneInfoOptions.session as MultiFactorSessionImpl;\n\n      if ('phoneNumber' in phoneInfoOptions) {\n        _assert(\n          session.type === MultiFactorSessionType.ENROLL,\n          auth,\n          AuthErrorCode.INTERNAL_ERROR\n        );\n\n        const startPhoneMfaEnrollmentRequest: StartPhoneMfaEnrollmentRequest = {\n          idToken: session.credential,\n          phoneEnrollmentInfo: {\n            phoneNumber: phoneInfoOptions.phoneNumber,\n            clientType: RecaptchaClientType.WEB\n          }\n        };\n\n        const startEnrollPhoneMfaActionCallback: PhoneApiCaller<\n          StartPhoneMfaEnrollmentRequest,\n          StartPhoneMfaEnrollmentResponse\n        > = async (\n          authInstance: AuthInternal,\n          request: StartPhoneMfaEnrollmentRequest\n        ) => {\n          // If reCAPTCHA Enterprise token is FAKE_TOKEN, fetch reCAPTCHA v2 token and inject into request.\n          if (request.phoneEnrollmentInfo.captchaResponse === FAKE_TOKEN) {\n            _assert(\n              verifier?.type === RECAPTCHA_VERIFIER_TYPE,\n              authInstance,\n              AuthErrorCode.ARGUMENT_ERROR\n            );\n\n            const requestWithRecaptchaV2 = await injectRecaptchaV2Token(\n              authInstance,\n              request,\n              verifier\n            );\n            return startEnrollPhoneMfa(authInstance, requestWithRecaptchaV2);\n          }\n          return startEnrollPhoneMfa(authInstance, request);\n        };\n\n        const startPhoneMfaEnrollmentResponse: Promise<StartPhoneMfaEnrollmentResponse> =\n          handleRecaptchaFlow(\n            auth,\n            startPhoneMfaEnrollmentRequest,\n            RecaptchaActionName.MFA_SMS_ENROLLMENT,\n            startEnrollPhoneMfaActionCallback,\n            RecaptchaAuthProvider.PHONE_PROVIDER\n          );\n\n        const response = await startPhoneMfaEnrollmentResponse.catch(error => {\n          return Promise.reject(error);\n        });\n\n        return response.phoneSessionInfo.sessionInfo;\n      } else {\n        _assert(\n          session.type === MultiFactorSessionType.SIGN_IN,\n          auth,\n          AuthErrorCode.INTERNAL_ERROR\n        );\n        const mfaEnrollmentId =\n          phoneInfoOptions.multiFactorHint?.uid ||\n          phoneInfoOptions.multiFactorUid;\n        _assert(mfaEnrollmentId, auth, AuthErrorCode.MISSING_MFA_INFO);\n\n        const startPhoneMfaSignInRequest: StartPhoneMfaSignInRequest = {\n          mfaPendingCredential: session.credential,\n          mfaEnrollmentId,\n          phoneSignInInfo: {\n            clientType: RecaptchaClientType.WEB\n          }\n        };\n\n        const startSignInPhoneMfaActionCallback: PhoneApiCaller<\n          StartPhoneMfaSignInRequest,\n          StartPhoneMfaSignInResponse\n        > = async (\n          authInstance: AuthInternal,\n          request: StartPhoneMfaSignInRequest\n        ) => {\n          // If reCAPTCHA Enterprise token is FAKE_TOKEN, fetch reCAPTCHA v2 token and inject into request.\n          if (request.phoneSignInInfo.captchaResponse === FAKE_TOKEN) {\n            _assert(\n              verifier?.type === RECAPTCHA_VERIFIER_TYPE,\n              authInstance,\n              AuthErrorCode.ARGUMENT_ERROR\n            );\n\n            const requestWithRecaptchaV2 = await injectRecaptchaV2Token(\n              authInstance,\n              request,\n              verifier\n            );\n            return startSignInPhoneMfa(authInstance, requestWithRecaptchaV2);\n          }\n          return startSignInPhoneMfa(authInstance, request);\n        };\n\n        const startPhoneMfaSignInResponse: Promise<StartPhoneMfaSignInResponse> =\n          handleRecaptchaFlow(\n            auth,\n            startPhoneMfaSignInRequest,\n            RecaptchaActionName.MFA_SMS_SIGNIN,\n            startSignInPhoneMfaActionCallback,\n            RecaptchaAuthProvider.PHONE_PROVIDER\n          );\n\n        const response = await startPhoneMfaSignInResponse.catch(error => {\n          return Promise.reject(error);\n        });\n\n        return response.phoneResponseInfo.sessionInfo;\n      }\n    } else {\n      const sendPhoneVerificationCodeRequest: SendPhoneVerificationCodeRequest =\n        {\n          phoneNumber: phoneInfoOptions.phoneNumber,\n          clientType: RecaptchaClientType.WEB\n        };\n\n      const sendPhoneVerificationCodeActionCallback: PhoneApiCaller<\n        SendPhoneVerificationCodeRequest,\n        SendPhoneVerificationCodeResponse\n      > = async (\n        authInstance: AuthInternal,\n        request: SendPhoneVerificationCodeRequest\n      ) => {\n        // If reCAPTCHA Enterprise token is FAKE_TOKEN, fetch reCAPTCHA v2 token and inject into request.\n        if (request.captchaResponse === FAKE_TOKEN) {\n          _assert(\n            verifier?.type === RECAPTCHA_VERIFIER_TYPE,\n            authInstance,\n            AuthErrorCode.ARGUMENT_ERROR\n          );\n\n          const requestWithRecaptchaV2 = await injectRecaptchaV2Token(\n            authInstance,\n            request,\n            verifier\n          );\n          return sendPhoneVerificationCode(\n            authInstance,\n            requestWithRecaptchaV2\n          );\n        }\n        return sendPhoneVerificationCode(authInstance, request);\n      };\n\n      const sendPhoneVerificationCodeResponse: Promise<SendPhoneVerificationCodeResponse> =\n        handleRecaptchaFlow(\n          auth,\n          sendPhoneVerificationCodeRequest,\n          RecaptchaActionName.SEND_VERIFICATION_CODE,\n          sendPhoneVerificationCodeActionCallback,\n          RecaptchaAuthProvider.PHONE_PROVIDER\n        );\n\n      const response = await sendPhoneVerificationCodeResponse.catch(error => {\n        return Promise.reject(error);\n      });\n\n      return response.sessionInfo;\n    }\n  } finally {\n    verifier?._reset();\n  }\n}\n\n/**\n * Updates the user's phone number.\n *\n * @remarks\n * This method does not work in a Node.js environment or on any {@link User} signed in by\n * {@link Auth} instances created with a {@link @firebase/app#FirebaseServerApp}.\n *\n * @example\n * ```\n * // 'recaptcha-container' is the ID of an element in the DOM.\n * const applicationVerifier = new RecaptchaVerifier('recaptcha-container');\n * const provider = new PhoneAuthProvider(auth);\n * const verificationId = await provider.verifyPhoneNumber('+16505550101', applicationVerifier);\n * // Obtain the verificationCode from the user.\n * const phoneCredential = PhoneAuthProvider.credential(verificationId, verificationCode);\n * await updatePhoneNumber(user, phoneCredential);\n * ```\n *\n * @param user - The user.\n * @param credential - A credential authenticating the new phone number.\n *\n * @public\n */\nexport async function updatePhoneNumber(\n  user: User,\n  credential: PhoneAuthCredential\n): Promise<void> {\n  const userInternal = getModularInstance(user) as UserInternal;\n  if (_isFirebaseServerApp(userInternal.auth.app)) {\n    return Promise.reject(\n      _serverAppCurrentUserOperationNotSupportedError(userInternal.auth)\n    );\n  }\n  await _link(userInternal, credential);\n}\n\n// Helper function that fetches and injects a reCAPTCHA v2 token into the request.\nexport async function injectRecaptchaV2Token<T extends object>(\n  auth: AuthInternal,\n  request: T,\n  recaptchaV2Verifier: ApplicationVerifierInternal\n): Promise<T> {\n  _assert(\n    recaptchaV2Verifier.type === RECAPTCHA_VERIFIER_TYPE,\n    auth,\n    AuthErrorCode.ARGUMENT_ERROR\n  );\n\n  const recaptchaV2Token = await recaptchaV2Verifier.verify();\n\n  _assert(\n    typeof recaptchaV2Token === 'string',\n    auth,\n    AuthErrorCode.ARGUMENT_ERROR\n  );\n\n  const newRequest = { ...request };\n\n  if ('phoneEnrollmentInfo' in newRequest) {\n    const phoneNumber = (\n      newRequest as unknown as StartPhoneMfaEnrollmentRequest\n    ).phoneEnrollmentInfo.phoneNumber;\n    const captchaResponse = (\n      newRequest as unknown as StartPhoneMfaEnrollmentRequest\n    ).phoneEnrollmentInfo.captchaResponse;\n    const clientType = (newRequest as unknown as StartPhoneMfaEnrollmentRequest)\n      .phoneEnrollmentInfo.clientType;\n    const recaptchaVersion = (\n      newRequest as unknown as StartPhoneMfaEnrollmentRequest\n    ).phoneEnrollmentInfo.recaptchaVersion;\n\n    Object.assign(newRequest, {\n      'phoneEnrollmentInfo': {\n        phoneNumber,\n        recaptchaToken: recaptchaV2Token,\n        captchaResponse,\n        clientType,\n        recaptchaVersion\n      }\n    });\n\n    return newRequest;\n  } else if ('phoneSignInInfo' in newRequest) {\n    const captchaResponse = (\n      newRequest as unknown as StartPhoneMfaSignInRequest\n    ).phoneSignInInfo.captchaResponse;\n    const clientType = (newRequest as unknown as StartPhoneMfaSignInRequest)\n      .phoneSignInInfo.clientType;\n    const recaptchaVersion = (\n      newRequest as unknown as StartPhoneMfaSignInRequest\n    ).phoneSignInInfo.recaptchaVersion;\n\n    Object.assign(newRequest, {\n      'phoneSignInInfo': {\n        recaptchaToken: recaptchaV2Token,\n        captchaResponse,\n        clientType,\n        recaptchaVersion\n      }\n    });\n\n    return newRequest;\n  } else {\n    Object.assign(newRequest, { 'recaptchaToken': recaptchaV2Token });\n    return newRequest;\n  }\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  Auth,\n  PhoneInfoOptions,\n  ApplicationVerifier,\n  UserCredential\n} from '../../model/public_types';\n\nimport { SignInWithPhoneNumberResponse } from '../../api/authentication/sms';\nimport { ApplicationVerifierInternal as ApplicationVerifierInternal } from '../../model/application_verifier';\nimport { AuthInternal as AuthInternal } from '../../model/auth';\nimport { UserCredentialInternal as UserCredentialInternal } from '../../model/user';\nimport { PhoneAuthCredential } from '../../core/credentials/phone';\nimport { _verifyPhoneNumber } from '../strategies/phone';\nimport { _castAuth } from '../../core/auth/auth_impl';\nimport { AuthCredential } from '../../core';\nimport { FirebaseError, getModularInstance } from '@firebase/util';\nimport { TaggedWithTokenResponse } from '../../model/id_token';\nimport { ProviderId, SignInMethod } from '../../model/enums';\n\n/**\n * Provider for generating an {@link PhoneAuthCredential}.\n *\n * @remarks\n * `PhoneAuthProvider` does not work in a Node.js environment.\n *\n * @example\n * ```javascript\n * // 'recaptcha-container' is the ID of an element in the DOM.\n * const applicationVerifier = new RecaptchaVerifier('recaptcha-container');\n * const provider = new PhoneAuthProvider(auth);\n * const verificationId = await provider.verifyPhoneNumber('+16505550101', applicationVerifier);\n * // Obtain the verificationCode from the user.\n * const phoneCredential = PhoneAuthProvider.credential(verificationId, verificationCode);\n * const userCredential = await signInWithCredential(auth, phoneCredential);\n * ```\n *\n * @public\n */\nexport class PhoneAuthProvider {\n  /** Always set to {@link ProviderId}.PHONE. */\n  static readonly PROVIDER_ID: 'phone' = ProviderId.PHONE;\n  /** Always set to {@link SignInMethod}.PHONE. */\n  static readonly PHONE_SIGN_IN_METHOD: 'phone' = SignInMethod.PHONE;\n\n  /** Always set to {@link ProviderId}.PHONE. */\n  readonly providerId = PhoneAuthProvider.PROVIDER_ID;\n  private readonly auth: AuthInternal;\n\n  /**\n   * @param auth - The Firebase {@link Auth} instance in which sign-ins should occur.\n   *\n   */\n  constructor(auth: Auth) {\n    this.auth = _castAuth(auth);\n  }\n\n  /**\n   *\n   * Starts a phone number authentication flow by sending a verification code to the given phone\n   * number.\n   *\n   * @example\n   * ```javascript\n   * const provider = new PhoneAuthProvider(auth);\n   * const verificationId = await provider.verifyPhoneNumber(phoneNumber, applicationVerifier);\n   * // Obtain verificationCode from the user.\n   * const authCredential = PhoneAuthProvider.credential(verificationId, verificationCode);\n   * const userCredential = await signInWithCredential(auth, authCredential);\n   * ```\n   *\n   * @example\n   * An alternative flow is provided using the `signInWithPhoneNumber` method.\n   * ```javascript\n   * const confirmationResult = signInWithPhoneNumber(auth, phoneNumber, applicationVerifier);\n   * // Obtain verificationCode from the user.\n   * const userCredential = confirmationResult.confirm(verificationCode);\n   * ```\n   *\n   * @param phoneInfoOptions - The user's {@link PhoneInfoOptions}. The phone number should be in\n   * E.164 format (e.g. +16505550101).\n   * @param applicationVerifier - An {@link ApplicationVerifier}, which prevents\n   * requests from unauthorized clients. This SDK includes an implementation\n   * based on reCAPTCHA v2, {@link RecaptchaVerifier}. If you've enabled\n   * reCAPTCHA Enterprise bot protection in Enforce mode, this parameter is\n   * optional; in all other configurations, the parameter is required.\n   *\n   * @returns A Promise for a verification ID that can be passed to\n   * {@link PhoneAuthProvider.credential} to identify this flow.\n   */\n  verifyPhoneNumber(\n    phoneOptions: PhoneInfoOptions | string,\n    applicationVerifier?: ApplicationVerifier\n  ): Promise<string> {\n    return _verifyPhoneNumber(\n      this.auth,\n      phoneOptions,\n      getModularInstance(applicationVerifier as ApplicationVerifierInternal)\n    );\n  }\n\n  /**\n   * Creates a phone auth credential, given the verification ID from\n   * {@link PhoneAuthProvider.verifyPhoneNumber} and the code that was sent to the user's\n   * mobile device.\n   *\n   * @example\n   * ```javascript\n   * const provider = new PhoneAuthProvider(auth);\n   * const verificationId = provider.verifyPhoneNumber(phoneNumber, applicationVerifier);\n   * // Obtain verificationCode from the user.\n   * const authCredential = PhoneAuthProvider.credential(verificationId, verificationCode);\n   * const userCredential = signInWithCredential(auth, authCredential);\n   * ```\n   *\n   * @example\n   * An alternative flow is provided using the `signInWithPhoneNumber` method.\n   * ```javascript\n   * const confirmationResult = await signInWithPhoneNumber(auth, phoneNumber, applicationVerifier);\n   * // Obtain verificationCode from the user.\n   * const userCredential = await confirmationResult.confirm(verificationCode);\n   * ```\n   *\n   * @param verificationId - The verification ID returned from {@link PhoneAuthProvider.verifyPhoneNumber}.\n   * @param verificationCode - The verification code sent to the user's mobile device.\n   *\n   * @returns The auth provider credential.\n   */\n  static credential(\n    verificationId: string,\n    verificationCode: string\n  ): PhoneAuthCredential {\n    return PhoneAuthCredential._fromVerification(\n      verificationId,\n      verificationCode\n    );\n  }\n\n  /**\n   * Generates an {@link AuthCredential} from a {@link UserCredential}.\n   * @param userCredential - The user credential.\n   */\n  static credentialFromResult(\n    userCredential: UserCredential\n  ): AuthCredential | null {\n    const credential = userCredential as UserCredentialInternal;\n    return PhoneAuthProvider.credentialFromTaggedObject(credential);\n  }\n\n  /**\n   * Returns an {@link AuthCredential} when passed an error.\n   *\n   * @remarks\n   *\n   * This method works for errors like\n   * `auth/account-exists-with-different-credentials`. This is useful for\n   * recovering when attempting to set a user's phone number but the number\n   * in question is already tied to another account. For example, the following\n   * code tries to update the current user's phone number, and if that\n   * fails, links the user with the account associated with that number:\n   *\n   * ```js\n   * const provider = new PhoneAuthProvider(auth);\n   * const verificationId = await provider.verifyPhoneNumber(number, verifier);\n   * try {\n   *   const code = ''; // Prompt the user for the verification code\n   *   await updatePhoneNumber(\n   *       auth.currentUser,\n   *       PhoneAuthProvider.credential(verificationId, code));\n   * } catch (e) {\n   *   if ((e as FirebaseError)?.code === 'auth/account-exists-with-different-credential') {\n   *     const cred = PhoneAuthProvider.credentialFromError(e);\n   *     await linkWithCredential(auth.currentUser, cred);\n   *   }\n   * }\n   *\n   * // At this point, auth.currentUser.phoneNumber === number.\n   * ```\n   *\n   * @param error - The error to generate a credential from.\n   */\n  static credentialFromError(error: FirebaseError): AuthCredential | null {\n    return PhoneAuthProvider.credentialFromTaggedObject(\n      (error.customData || {}) as TaggedWithTokenResponse\n    );\n  }\n\n  private static credentialFromTaggedObject({\n    _tokenResponse: tokenResponse\n  }: TaggedWithTokenResponse): AuthCredential | null {\n    if (!tokenResponse) {\n      return null;\n    }\n    const { phoneNumber, temporaryProof } =\n      tokenResponse as SignInWithPhoneNumberResponse;\n    if (phoneNumber && temporaryProof) {\n      return PhoneAuthCredential._fromTokenResponse(\n        phoneNumber,\n        temporaryProof\n      );\n    }\n    return null;\n  }\n}\n","/**\n * @license\n * Copyright 2021 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { PopupRedirectResolver } from '../../model/public_types';\nimport { AuthInternal } from '../../model/auth';\nimport { PopupRedirectResolverInternal } from '../../model/popup_redirect';\nimport { AuthErrorCode } from '../errors';\nimport { _assert } from './assert';\nimport { _getInstance } from './instantiator';\n\n/**\n * Chooses a popup/redirect resolver to use. This prefers the override (which\n * is directly passed in), and falls back to the property set on the auth\n * object. If neither are available, this function errors w/ an argument error.\n */\nexport function _withDefaultResolver(\n  auth: AuthInternal,\n  resolverOverride: PopupRedirectResolver | undefined\n): PopupRedirectResolverInternal {\n  if (resolverOverride) {\n    return _getInstance(resolverOverride);\n  }\n\n  _assert(auth._popupRedirectResolver, auth, AuthErrorCode.ARGUMENT_ERROR);\n\n  return auth._popupRedirectResolver;\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  signInWithIdp,\n  SignInWithIdpRequest\n} from '../../api/authentication/idp';\nimport { PhoneOrOauthTokenResponse } from '../../api/authentication/mfa';\nimport { AuthInternal } from '../../model/auth';\nimport { IdTokenResponse } from '../../model/id_token';\nimport { UserInternal, UserCredentialInternal } from '../../model/user';\nimport { AuthCredential } from '../credentials';\nimport { _link as _linkUser } from '../user/link_unlink';\nimport { _reauthenticate } from '../user/reauthenticate';\nimport { _assert } from '../util/assert';\nimport { _signInWithCredential } from './credential';\nimport { AuthErrorCode } from '../errors';\nimport { ProviderId } from '../../model/enums';\n\nexport interface IdpTaskParams {\n  auth: AuthInternal;\n  requestUri: string;\n  sessionId?: string;\n  tenantId?: string;\n  postBody?: string;\n  pendingToken?: string;\n  user?: UserInternal;\n  bypassAuthState?: boolean;\n}\n\nexport type IdpTask = (\n  params: IdpTaskParams\n) => Promise<UserCredentialInternal>;\n\nclass IdpCredential extends AuthCredential {\n  constructor(readonly params: IdpTaskParams) {\n    super(ProviderId.CUSTOM, ProviderId.CUSTOM);\n  }\n\n  _getIdTokenResponse(auth: AuthInternal): Promise<PhoneOrOauthTokenResponse> {\n    return signInWithIdp(auth, this._buildIdpRequest());\n  }\n\n  _linkToIdToken(\n    auth: AuthInternal,\n    idToken: string\n  ): Promise<IdTokenResponse> {\n    return signInWithIdp(auth, this._buildIdpRequest(idToken));\n  }\n\n  _getReauthenticationResolver(auth: AuthInternal): Promise<IdTokenResponse> {\n    return signInWithIdp(auth, this._buildIdpRequest());\n  }\n\n  private _buildIdpRequest(idToken?: string): SignInWithIdpRequest {\n    const request: SignInWithIdpRequest = {\n      requestUri: this.params.requestUri,\n      sessionId: this.params.sessionId,\n      postBody: this.params.postBody,\n      tenantId: this.params.tenantId,\n      pendingToken: this.params.pendingToken,\n      returnSecureToken: true,\n      returnIdpCredential: true\n    };\n\n    if (idToken) {\n      request.idToken = idToken;\n    }\n\n    return request;\n  }\n}\n\nexport function _signIn(\n  params: IdpTaskParams\n): Promise<UserCredentialInternal> {\n  return _signInWithCredential(\n    params.auth,\n    new IdpCredential(params),\n    params.bypassAuthState\n  ) as Promise<UserCredentialInternal>;\n}\n\nexport function _reauth(\n  params: IdpTaskParams\n): Promise<UserCredentialInternal> {\n  const { auth, user } = params;\n  _assert(user, auth, AuthErrorCode.INTERNAL_ERROR);\n  return _reauthenticate(\n    user,\n    new IdpCredential(params),\n    params.bypassAuthState\n  );\n}\n\nexport async function _link(\n  params: IdpTaskParams\n): Promise<UserCredentialInternal> {\n  const { auth, user } = params;\n  _assert(user, auth, AuthErrorCode.INTERNAL_ERROR);\n  return _linkUser(user, new IdpCredential(params), params.bypassAuthState);\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { FirebaseError } from '@firebase/util';\n\nimport {\n  AuthEvent,\n  AuthEventConsumer,\n  AuthEventType,\n  EventManager,\n  PopupRedirectResolverInternal\n} from '../../model/popup_redirect';\nimport { UserInternal, UserCredentialInternal } from '../../model/user';\nimport { AuthErrorCode } from '../errors';\nimport { debugAssert, _fail } from '../util/assert';\nimport {\n  _link,\n  _reauth,\n  _signIn,\n  IdpTask,\n  IdpTaskParams\n} from '../strategies/idp';\nimport { AuthInternal } from '../../model/auth';\n\ninterface PendingPromise {\n  resolve: (cred: UserCredentialInternal | null) => void;\n  reject: (error: Error) => void;\n}\n\n/**\n * Popup event manager. Handles the popup's entire lifecycle; listens to auth\n * events\n */\nexport abstract class AbstractPopupRedirectOperation\n  implements AuthEventConsumer\n{\n  private pendingPromise: PendingPromise | null = null;\n  private eventManager: EventManager | null = null;\n  readonly filter: AuthEventType[];\n\n  abstract eventId: string | null;\n\n  constructor(\n    protected readonly auth: AuthInternal,\n    filter: AuthEventType | AuthEventType[],\n    protected readonly resolver: PopupRedirectResolverInternal,\n    protected user?: UserInternal,\n    protected readonly bypassAuthState = false\n  ) {\n    this.filter = Array.isArray(filter) ? filter : [filter];\n  }\n\n  abstract onExecution(): Promise<void>;\n\n  execute(): Promise<UserCredentialInternal | null> {\n    return new Promise<UserCredentialInternal | null>(\n      async (resolve, reject) => {\n        this.pendingPromise = { resolve, reject };\n\n        try {\n          this.eventManager = await this.resolver._initialize(this.auth);\n          await this.onExecution();\n          this.eventManager.registerConsumer(this);\n        } catch (e) {\n          this.reject(e as Error);\n        }\n      }\n    );\n  }\n\n  async onAuthEvent(event: AuthEvent): Promise<void> {\n    const { urlResponse, sessionId, postBody, tenantId, error, type } = event;\n    if (error) {\n      this.reject(error);\n      return;\n    }\n\n    const params: IdpTaskParams = {\n      auth: this.auth,\n      requestUri: urlResponse!,\n      sessionId: sessionId!,\n      tenantId: tenantId || undefined,\n      postBody: postBody || undefined,\n      user: this.user,\n      bypassAuthState: this.bypassAuthState\n    };\n\n    try {\n      this.resolve(await this.getIdpTask(type)(params));\n    } catch (e) {\n      this.reject(e as Error);\n    }\n  }\n\n  onError(error: FirebaseError): void {\n    this.reject(error);\n  }\n\n  private getIdpTask(type: AuthEventType): IdpTask {\n    switch (type) {\n      case AuthEventType.SIGN_IN_VIA_POPUP:\n      case AuthEventType.SIGN_IN_VIA_REDIRECT:\n        return _signIn;\n      case AuthEventType.LINK_VIA_POPUP:\n      case AuthEventType.LINK_VIA_REDIRECT:\n        return _link;\n      case AuthEventType.REAUTH_VIA_POPUP:\n      case AuthEventType.REAUTH_VIA_REDIRECT:\n        return _reauth;\n      default:\n        _fail(this.auth, AuthErrorCode.INTERNAL_ERROR);\n    }\n  }\n\n  protected resolve(cred: UserCredentialInternal | null): void {\n    debugAssert(this.pendingPromise, 'Pending promise was never set');\n    this.pendingPromise.resolve(cred);\n    this.unregisterAndCleanUp();\n  }\n\n  protected reject(error: Error): void {\n    debugAssert(this.pendingPromise, 'Pending promise was never set');\n    this.pendingPromise.reject(error);\n    this.unregisterAndCleanUp();\n  }\n\n  private unregisterAndCleanUp(): void {\n    if (this.eventManager) {\n      this.eventManager.unregisterConsumer(this);\n    }\n\n    this.pendingPromise = null;\n    this.cleanUp();\n  }\n\n  abstract cleanUp(): void;\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  Auth,\n  AuthProvider,\n  PopupRedirectResolver,\n  User,\n  UserCredential\n} from '../../model/public_types';\n\nimport { _castAuth } from '../../core/auth/auth_impl';\nimport { AuthErrorCode } from '../../core/errors';\nimport {\n  _assert,\n  debugAssert,\n  _createError,\n  _assertInstanceOf\n} from '../../core/util/assert';\nimport { Delay } from '../../core/util/delay';\nimport { _generateEventId } from '../../core/util/event_id';\nimport { AuthInternal } from '../../model/auth';\nimport {\n  AuthEventType,\n  PopupRedirectResolverInternal\n} from '../../model/popup_redirect';\nimport { UserInternal } from '../../model/user';\nimport { _withDefaultResolver } from '../../core/util/resolver';\nimport { AuthPopup } from '../util/popup';\nimport { AbstractPopupRedirectOperation } from '../../core/strategies/abstract_popup_redirect_operation';\nimport { FederatedAuthProvider } from '../../core/providers/federated';\nimport { getModularInstance } from '@firebase/util';\nimport { _isFirebaseServerApp } from '@firebase/app';\n\n/*\n * The event timeout is the same on mobile and desktop, no need for Delay. Set this to 8s since\n * blocking functions can take upto 7s to complete sign in, as documented in:\n * https://cloud.google.com/identity-platform/docs/blocking-functions#understanding_blocking_functions\n * https://firebase.google.com/docs/auth/extend-with-blocking-functions#understanding_blocking_functions\n */\nexport const enum _Timeout {\n  AUTH_EVENT = 8000\n}\nexport const _POLL_WINDOW_CLOSE_TIMEOUT = new Delay(2000, 10000);\n\n/**\n * Authenticates a Firebase client using a popup-based OAuth authentication flow.\n *\n * @remarks\n * If succeeds, returns the signed in user along with the provider's credential. If sign in was\n * unsuccessful, returns an error object containing additional information about the error.\n *\n * This method does not work in a Node.js environment or with {@link Auth} instances created with a\n * {@link @firebase/app#FirebaseServerApp}.\n *\n * @example\n * ```javascript\n * // Sign in using a popup.\n * const provider = new FacebookAuthProvider();\n * const result = await signInWithPopup(auth, provider);\n *\n * // The signed-in user info.\n * const user = result.user;\n * // This gives you a Facebook Access Token.\n * const credential = provider.credentialFromResult(auth, result);\n * const token = credential.accessToken;\n * ```\n *\n * @param auth - The {@link Auth} instance.\n * @param provider - The provider to authenticate. The provider has to be an {@link OAuthProvider}.\n * Non-OAuth providers like {@link EmailAuthProvider} will throw an error.\n * @param resolver - An instance of {@link PopupRedirectResolver}, optional\n * if already supplied to {@link initializeAuth} or provided by {@link getAuth}.\n *\n * @public\n */\nexport async function signInWithPopup(\n  auth: Auth,\n  provider: AuthProvider,\n  resolver?: PopupRedirectResolver\n): Promise<UserCredential> {\n  if (_isFirebaseServerApp(auth.app)) {\n    return Promise.reject(\n      _createError(auth, AuthErrorCode.OPERATION_NOT_SUPPORTED)\n    );\n  }\n  const authInternal = _castAuth(auth);\n  _assertInstanceOf(auth, provider, FederatedAuthProvider);\n  const resolverInternal = _withDefaultResolver(authInternal, resolver);\n  const action = new PopupOperation(\n    authInternal,\n    AuthEventType.SIGN_IN_VIA_POPUP,\n    provider,\n    resolverInternal\n  );\n  return action.executeNotNull();\n}\n\n/**\n * Reauthenticates the current user with the specified {@link OAuthProvider} using a pop-up based\n * OAuth flow.\n *\n * @remarks\n * If the reauthentication is successful, the returned result will contain the user and the\n * provider's credential.\n *\n * This method does not work in a Node.js environment or on any {@link User} signed in by\n * {@link Auth} instances created with a {@link @firebase/app#FirebaseServerApp}.\n *\n * @example\n * ```javascript\n * // Sign in using a popup.\n * const provider = new FacebookAuthProvider();\n * const result = await signInWithPopup(auth, provider);\n * // Reauthenticate using a popup.\n * await reauthenticateWithPopup(result.user, provider);\n * ```\n *\n * @param user - The user.\n * @param provider - The provider to authenticate. The provider has to be an {@link OAuthProvider}.\n * Non-OAuth providers like {@link EmailAuthProvider} will throw an error.\n * @param resolver - An instance of {@link PopupRedirectResolver}, optional\n * if already supplied to {@link initializeAuth} or provided by {@link getAuth}.\n *\n * @public\n */\nexport async function reauthenticateWithPopup(\n  user: User,\n  provider: AuthProvider,\n  resolver?: PopupRedirectResolver\n): Promise<UserCredential> {\n  const userInternal = getModularInstance(user) as UserInternal;\n  if (_isFirebaseServerApp(userInternal.auth.app)) {\n    return Promise.reject(\n      _createError(userInternal.auth, AuthErrorCode.OPERATION_NOT_SUPPORTED)\n    );\n  }\n  _assertInstanceOf(userInternal.auth, provider, FederatedAuthProvider);\n  const resolverInternal = _withDefaultResolver(userInternal.auth, resolver);\n  const action = new PopupOperation(\n    userInternal.auth,\n    AuthEventType.REAUTH_VIA_POPUP,\n    provider,\n    resolverInternal,\n    userInternal\n  );\n  return action.executeNotNull();\n}\n\n/**\n * Links the authenticated provider to the user account using a pop-up based OAuth flow.\n *\n * @remarks\n * If the linking is successful, the returned result will contain the user and the provider's credential.\n *\n * This method does not work in a Node.js environment.\n *\n * @example\n * ```javascript\n * // Sign in using some other provider.\n * const result = await signInWithEmailAndPassword(auth, email, password);\n * // Link using a popup.\n * const provider = new FacebookAuthProvider();\n * await linkWithPopup(result.user, provider);\n * ```\n *\n * @param user - The user.\n * @param provider - The provider to authenticate. The provider has to be an {@link OAuthProvider}.\n * Non-OAuth providers like {@link EmailAuthProvider} will throw an error.\n * @param resolver - An instance of {@link PopupRedirectResolver}, optional\n * if already supplied to {@link initializeAuth} or provided by {@link getAuth}.\n *\n * @public\n */\nexport async function linkWithPopup(\n  user: User,\n  provider: AuthProvider,\n  resolver?: PopupRedirectResolver\n): Promise<UserCredential> {\n  const userInternal = getModularInstance(user) as UserInternal;\n  _assertInstanceOf(userInternal.auth, provider, FederatedAuthProvider);\n  const resolverInternal = _withDefaultResolver(userInternal.auth, resolver);\n\n  const action = new PopupOperation(\n    userInternal.auth,\n    AuthEventType.LINK_VIA_POPUP,\n    provider,\n    resolverInternal,\n    userInternal\n  );\n  return action.executeNotNull();\n}\n\n/**\n * Popup event manager. Handles the popup's entire lifecycle; listens to auth\n * events\n *\n */\nclass PopupOperation extends AbstractPopupRedirectOperation {\n  // Only one popup is ever shown at once. The lifecycle of the current popup\n  // can be managed / cancelled by the constructor.\n  private static currentPopupAction: PopupOperation | null = null;\n  private authWindow: AuthPopup | null = null;\n  private pollId: number | null = null;\n\n  constructor(\n    auth: AuthInternal,\n    filter: AuthEventType,\n    private readonly provider: AuthProvider,\n    resolver: PopupRedirectResolverInternal,\n    user?: UserInternal\n  ) {\n    super(auth, filter, resolver, user);\n    if (PopupOperation.currentPopupAction) {\n      PopupOperation.currentPopupAction.cancel();\n    }\n\n    PopupOperation.currentPopupAction = this;\n  }\n\n  async executeNotNull(): Promise<UserCredential> {\n    const result = await this.execute();\n    _assert(result, this.auth, AuthErrorCode.INTERNAL_ERROR);\n    return result;\n  }\n\n  async onExecution(): Promise<void> {\n    debugAssert(\n      this.filter.length === 1,\n      'Popup operations only handle one event'\n    );\n    const eventId = _generateEventId();\n    this.authWindow = await this.resolver._openPopup(\n      this.auth,\n      this.provider,\n      this.filter[0], // There's always one, see constructor\n      eventId\n    );\n    this.authWindow.associatedEvent = eventId;\n\n    // Check for web storage support and origin validation _after_ the popup is\n    // loaded. These operations are slow (~1 second or so) Rather than\n    // waiting on them before opening the window, optimistically open the popup\n    // and check for storage support at the same time. If storage support is\n    // not available, this will cause the whole thing to reject properly. It\n    // will also close the popup, but since the promise has already rejected,\n    // the popup closed by user poll will reject into the void.\n    this.resolver._originValidation(this.auth).catch(e => {\n      this.reject(e);\n    });\n\n    this.resolver._isIframeWebStorageSupported(this.auth, isSupported => {\n      if (!isSupported) {\n        this.reject(\n          _createError(this.auth, AuthErrorCode.WEB_STORAGE_UNSUPPORTED)\n        );\n      }\n    });\n\n    // Handle user closure. Notice this does *not* use await\n    this.pollUserCancellation();\n  }\n\n  get eventId(): string | null {\n    return this.authWindow?.associatedEvent || null;\n  }\n\n  cancel(): void {\n    this.reject(_createError(this.auth, AuthErrorCode.EXPIRED_POPUP_REQUEST));\n  }\n\n  cleanUp(): void {\n    if (this.authWindow) {\n      this.authWindow.close();\n    }\n\n    if (this.pollId) {\n      window.clearTimeout(this.pollId);\n    }\n\n    this.authWindow = null;\n    this.pollId = null;\n    PopupOperation.currentPopupAction = null;\n  }\n\n  private pollUserCancellation(): void {\n    const poll = (): void => {\n      if (this.authWindow?.window?.closed) {\n        // Make sure that there is sufficient time for whatever action to\n        // complete. The window could have closed but the sign in network\n        // call could still be in flight. This is specifically true for\n        // Firefox or if the opener is in an iframe, in which case the oauth\n        // helper closes the popup.\n        this.pollId = window.setTimeout(() => {\n          this.pollId = null;\n          this.reject(\n            _createError(this.auth, AuthErrorCode.POPUP_CLOSED_BY_USER)\n          );\n        }, _Timeout.AUTH_EVENT);\n        return;\n      }\n\n      this.pollId = window.setTimeout(poll, _POLL_WINDOW_CLOSE_TIMEOUT.get());\n    };\n\n    poll();\n  }\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { AuthInternal } from '../../model/auth';\nimport {\n  AuthEvent,\n  AuthEventType,\n  PopupRedirectResolverInternal\n} from '../../model/popup_redirect';\nimport { UserCredentialInternal } from '../../model/user';\nimport { PersistenceInternal } from '../persistence';\nimport { _persistenceKeyName } from '../persistence/persistence_user_manager';\nimport { _getInstance } from '../util/instantiator';\nimport { AbstractPopupRedirectOperation } from './abstract_popup_redirect_operation';\n\nconst PENDING_REDIRECT_KEY = 'pendingRedirect';\n\n// We only get one redirect outcome for any one auth, so just store it\n// in here.\nconst redirectOutcomeMap: Map<\n  string,\n  () => Promise<UserCredentialInternal | null>\n> = new Map();\n\nexport class RedirectAction extends AbstractPopupRedirectOperation {\n  eventId = null;\n\n  constructor(\n    auth: AuthInternal,\n    resolver: PopupRedirectResolverInternal,\n    bypassAuthState = false\n  ) {\n    super(\n      auth,\n      [\n        AuthEventType.SIGN_IN_VIA_REDIRECT,\n        AuthEventType.LINK_VIA_REDIRECT,\n        AuthEventType.REAUTH_VIA_REDIRECT,\n        AuthEventType.UNKNOWN\n      ],\n      resolver,\n      undefined,\n      bypassAuthState\n    );\n  }\n\n  /**\n   * Override the execute function; if we already have a redirect result, then\n   * just return it.\n   */\n  async execute(): Promise<UserCredentialInternal | null> {\n    let readyOutcome = redirectOutcomeMap.get(this.auth._key());\n    if (!readyOutcome) {\n      try {\n        const hasPendingRedirect = await _getAndClearPendingRedirectStatus(\n          this.resolver,\n          this.auth\n        );\n        const result = hasPendingRedirect ? await super.execute() : null;\n        readyOutcome = () => Promise.resolve(result);\n      } catch (e) {\n        readyOutcome = () => Promise.reject(e);\n      }\n\n      redirectOutcomeMap.set(this.auth._key(), readyOutcome);\n    }\n\n    // If we're not bypassing auth state, the ready outcome should be set to\n    // null.\n    if (!this.bypassAuthState) {\n      redirectOutcomeMap.set(this.auth._key(), () => Promise.resolve(null));\n    }\n\n    return readyOutcome();\n  }\n\n  async onAuthEvent(event: AuthEvent): Promise<void> {\n    if (event.type === AuthEventType.SIGN_IN_VIA_REDIRECT) {\n      return super.onAuthEvent(event);\n    } else if (event.type === AuthEventType.UNKNOWN) {\n      // This is a sentinel value indicating there's no pending redirect\n      this.resolve(null);\n      return;\n    }\n\n    if (event.eventId) {\n      const user = await this.auth._redirectUserForId(event.eventId);\n      if (user) {\n        this.user = user;\n        return super.onAuthEvent(event);\n      } else {\n        this.resolve(null);\n      }\n    }\n  }\n\n  async onExecution(): Promise<void> {}\n\n  cleanUp(): void {}\n}\n\nexport async function _getAndClearPendingRedirectStatus(\n  resolver: PopupRedirectResolverInternal,\n  auth: AuthInternal\n): Promise<boolean> {\n  const key = pendingRedirectKey(auth);\n  const persistence = resolverPersistence(resolver);\n  if (!(await persistence._isAvailable())) {\n    return false;\n  }\n  const hasPendingRedirect = (await persistence._get(key)) === 'true';\n  await persistence._remove(key);\n  return hasPendingRedirect;\n}\n\nexport async function _setPendingRedirectStatus(\n  resolver: PopupRedirectResolverInternal,\n  auth: AuthInternal\n): Promise<void> {\n  return resolverPersistence(resolver)._set(pendingRedirectKey(auth), 'true');\n}\n\nexport function _clearRedirectOutcomes(): void {\n  redirectOutcomeMap.clear();\n}\n\nexport function _overrideRedirectResult(\n  auth: AuthInternal,\n  result: () => Promise<UserCredentialInternal | null>\n): void {\n  redirectOutcomeMap.set(auth._key(), result);\n}\n\nfunction resolverPersistence(\n  resolver: PopupRedirectResolverInternal\n): PersistenceInternal {\n  return _getInstance(resolver._redirectPersistence);\n}\n\nfunction pendingRedirectKey(auth: AuthInternal): string {\n  return _persistenceKeyName(\n    PENDING_REDIRECT_KEY,\n    auth.config.apiKey,\n    auth.name\n  );\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  Auth,\n  AuthProvider,\n  PopupRedirectResolver,\n  User,\n  UserCredential\n} from '../../model/public_types';\n\nimport { _castAuth } from '../../core/auth/auth_impl';\nimport { _assertLinkedStatus } from '../../core/user/link_unlink';\nimport {\n  _assertInstanceOf,\n  _serverAppCurrentUserOperationNotSupportedError\n} from '../../core/util/assert';\nimport { _generateEventId } from '../../core/util/event_id';\nimport { AuthEventType } from '../../model/popup_redirect';\nimport { UserInternal } from '../../model/user';\nimport { _withDefaultResolver } from '../../core/util/resolver';\nimport {\n  RedirectAction,\n  _setPendingRedirectStatus\n} from '../../core/strategies/redirect';\nimport { FederatedAuthProvider } from '../../core/providers/federated';\nimport { getModularInstance } from '@firebase/util';\nimport { _isFirebaseServerApp } from '@firebase/app';\n\n/**\n * Authenticates a Firebase client using a full-page redirect flow.\n *\n * @remarks\n * To handle the results and errors for this operation, refer to {@link getRedirectResult}.\n * Follow the {@link https://firebase.google.com/docs/auth/web/redirect-best-practices\n * | best practices} when using {@link signInWithRedirect}.\n *\n * This method does not work in a Node.js environment or with {@link Auth} instances created with a\n * {@link @firebase/app#FirebaseServerApp}.\n *\n * @example\n * ```javascript\n * // Sign in using a redirect.\n * const provider = new FacebookAuthProvider();\n * // You can add additional scopes to the provider:\n * provider.addScope('user_birthday');\n * // Start a sign in process for an unauthenticated user.\n * await signInWithRedirect(auth, provider);\n * // This will trigger a full page redirect away from your app\n *\n * // After returning from the redirect when your app initializes you can obtain the result\n * const result = await getRedirectResult(auth);\n * if (result) {\n *   // This is the signed-in user\n *   const user = result.user;\n *   // This gives you a Facebook Access Token.\n *   const credential = provider.credentialFromResult(auth, result);\n *   const token = credential.accessToken;\n * }\n * // As this API can be used for sign-in, linking and reauthentication,\n * // check the operationType to determine what triggered this redirect\n * // operation.\n * const operationType = result.operationType;\n * ```\n *\n * @param auth - The {@link Auth} instance.\n * @param provider - The provider to authenticate. The provider has to be an {@link OAuthProvider}.\n * Non-OAuth providers like {@link EmailAuthProvider} will throw an error.\n * @param resolver - An instance of {@link PopupRedirectResolver}, optional\n * if already supplied to {@link initializeAuth} or provided by {@link getAuth}.\n *\n * @public\n */\nexport function signInWithRedirect(\n  auth: Auth,\n  provider: AuthProvider,\n  resolver?: PopupRedirectResolver\n): Promise<never> {\n  return _signInWithRedirect(auth, provider, resolver) as Promise<never>;\n}\n\nexport async function _signInWithRedirect(\n  auth: Auth,\n  provider: AuthProvider,\n  resolver?: PopupRedirectResolver\n): Promise<void | never> {\n  if (_isFirebaseServerApp(auth.app)) {\n    return Promise.reject(\n      _serverAppCurrentUserOperationNotSupportedError(auth)\n    );\n  }\n  const authInternal = _castAuth(auth);\n  _assertInstanceOf(auth, provider, FederatedAuthProvider);\n  // Wait for auth initialization to complete, this will process pending redirects and clear the\n  // PENDING_REDIRECT_KEY in persistence. This should be completed before starting a new\n  // redirect and creating a PENDING_REDIRECT_KEY entry.\n  await authInternal._initializationPromise;\n  const resolverInternal = _withDefaultResolver(authInternal, resolver);\n  await _setPendingRedirectStatus(resolverInternal, authInternal);\n\n  return resolverInternal._openRedirect(\n    authInternal,\n    provider,\n    AuthEventType.SIGN_IN_VIA_REDIRECT\n  );\n}\n\n/**\n * Reauthenticates the current user with the specified {@link OAuthProvider} using a full-page redirect flow.\n * @remarks\n * To handle the results and errors for this operation, refer to {@link getRedirectResult}.\n * Follow the {@link https://firebase.google.com/docs/auth/web/redirect-best-practices\n * | best practices} when using {@link reauthenticateWithRedirect}.\n *\n * This method does not work in a Node.js environment or with {@link Auth} instances\n * created with a {@link @firebase/app#FirebaseServerApp}.\n *\n * @example\n * ```javascript\n * // Sign in using a redirect.\n * const provider = new FacebookAuthProvider();\n * const result = await signInWithRedirect(auth, provider);\n * // This will trigger a full page redirect away from your app\n *\n * // After returning from the redirect when your app initializes you can obtain the result\n * const result = await getRedirectResult(auth);\n * // Reauthenticate using a redirect.\n * await reauthenticateWithRedirect(result.user, provider);\n * // This will again trigger a full page redirect away from your app\n *\n * // After returning from the redirect when your app initializes you can obtain the result\n * const result = await getRedirectResult(auth);\n * ```\n *\n * @param user - The user.\n * @param provider - The provider to authenticate. The provider has to be an {@link OAuthProvider}.\n * Non-OAuth providers like {@link EmailAuthProvider} will throw an error.\n * @param resolver - An instance of {@link PopupRedirectResolver}, optional\n * if already supplied to {@link initializeAuth} or provided by {@link getAuth}.\n *\n * @public\n */\nexport function reauthenticateWithRedirect(\n  user: User,\n  provider: AuthProvider,\n  resolver?: PopupRedirectResolver\n): Promise<never> {\n  return _reauthenticateWithRedirect(\n    user,\n    provider,\n    resolver\n  ) as Promise<never>;\n}\nexport async function _reauthenticateWithRedirect(\n  user: User,\n  provider: AuthProvider,\n  resolver?: PopupRedirectResolver\n): Promise<void | never> {\n  const userInternal = getModularInstance(user) as UserInternal;\n  _assertInstanceOf(userInternal.auth, provider, FederatedAuthProvider);\n  if (_isFirebaseServerApp(userInternal.auth.app)) {\n    return Promise.reject(\n      _serverAppCurrentUserOperationNotSupportedError(userInternal.auth)\n    );\n  }\n  // Wait for auth initialization to complete, this will process pending redirects and clear the\n  // PENDING_REDIRECT_KEY in persistence. This should be completed before starting a new\n  // redirect and creating a PENDING_REDIRECT_KEY entry.\n  await userInternal.auth._initializationPromise;\n  // Allow the resolver to error before persisting the redirect user\n  const resolverInternal = _withDefaultResolver(userInternal.auth, resolver);\n  await _setPendingRedirectStatus(resolverInternal, userInternal.auth);\n\n  const eventId = await prepareUserForRedirect(userInternal);\n  return resolverInternal._openRedirect(\n    userInternal.auth,\n    provider,\n    AuthEventType.REAUTH_VIA_REDIRECT,\n    eventId\n  );\n}\n\n/**\n * Links the {@link OAuthProvider} to the user account using a full-page redirect flow.\n * @remarks\n * To handle the results and errors for this operation, refer to {@link getRedirectResult}.\n * Follow the {@link https://firebase.google.com/docs/auth/web/redirect-best-practices\n * | best practices} when using {@link linkWithRedirect}.\n *\n * This method does not work in a Node.js environment or with {@link Auth} instances\n * created with a {@link @firebase/app#FirebaseServerApp}.\n *\n * @example\n * ```javascript\n * // Sign in using some other provider.\n * const result = await signInWithEmailAndPassword(auth, email, password);\n * // Link using a redirect.\n * const provider = new FacebookAuthProvider();\n * await linkWithRedirect(result.user, provider);\n * // This will trigger a full page redirect away from your app\n *\n * // After returning from the redirect when your app initializes you can obtain the result\n * const result = await getRedirectResult(auth);\n * ```\n *\n * @param user - The user.\n * @param provider - The provider to authenticate. The provider has to be an {@link OAuthProvider}.\n * Non-OAuth providers like {@link EmailAuthProvider} will throw an error.\n * @param resolver - An instance of {@link PopupRedirectResolver}, optional\n * if already supplied to {@link initializeAuth} or provided by {@link getAuth}.\n *\n * @public\n */\nexport function linkWithRedirect(\n  user: User,\n  provider: AuthProvider,\n  resolver?: PopupRedirectResolver\n): Promise<never> {\n  return _linkWithRedirect(user, provider, resolver) as Promise<never>;\n}\nexport async function _linkWithRedirect(\n  user: User,\n  provider: AuthProvider,\n  resolver?: PopupRedirectResolver\n): Promise<void | never> {\n  const userInternal = getModularInstance(user) as UserInternal;\n  _assertInstanceOf(userInternal.auth, provider, FederatedAuthProvider);\n  // Wait for auth initialization to complete, this will process pending redirects and clear the\n  // PENDING_REDIRECT_KEY in persistence. This should be completed before starting a new\n  // redirect and creating a PENDING_REDIRECT_KEY entry.\n  await userInternal.auth._initializationPromise;\n  // Allow the resolver to error before persisting the redirect user\n  const resolverInternal = _withDefaultResolver(userInternal.auth, resolver);\n  await _assertLinkedStatus(false, userInternal, provider.providerId);\n  await _setPendingRedirectStatus(resolverInternal, userInternal.auth);\n\n  const eventId = await prepareUserForRedirect(userInternal);\n  return resolverInternal._openRedirect(\n    userInternal.auth,\n    provider,\n    AuthEventType.LINK_VIA_REDIRECT,\n    eventId\n  );\n}\n\n/**\n * Returns a {@link UserCredential} from the redirect-based sign-in flow.\n *\n * @remarks\n * If sign-in succeeded, returns the signed in user. If sign-in was unsuccessful, fails with an\n * error. If no redirect operation was called, returns `null`.\n *\n * This method does not work in a Node.js environment or with {@link Auth} instances created with a\n * {@link @firebase/app#FirebaseServerApp}.\n *\n * @example\n * ```javascript\n * // Sign in using a redirect.\n * const provider = new FacebookAuthProvider();\n * // You can add additional scopes to the provider:\n * provider.addScope('user_birthday');\n * // Start a sign in process for an unauthenticated user.\n * await signInWithRedirect(auth, provider);\n * // This will trigger a full page redirect away from your app\n *\n * // After returning from the redirect when your app initializes you can obtain the result\n * const result = await getRedirectResult(auth);\n * if (result) {\n *   // This is the signed-in user\n *   const user = result.user;\n *   // This gives you a Facebook Access Token.\n *   const credential = provider.credentialFromResult(auth, result);\n *   const token = credential.accessToken;\n * }\n * // As this API can be used for sign-in, linking and reauthentication,\n * // check the operationType to determine what triggered this redirect\n * // operation.\n * const operationType = result.operationType;\n * ```\n *\n * @param auth - The {@link Auth} instance.\n * @param resolver - An instance of {@link PopupRedirectResolver}, optional\n * if already supplied to {@link initializeAuth} or provided by {@link getAuth}.\n *\n * @public\n */\nexport async function getRedirectResult(\n  auth: Auth,\n  resolver?: PopupRedirectResolver\n): Promise<UserCredential | null> {\n  await _castAuth(auth)._initializationPromise;\n  return _getRedirectResult(auth, resolver, false);\n}\n\nexport async function _getRedirectResult(\n  auth: Auth,\n  resolverExtern?: PopupRedirectResolver,\n  bypassAuthState = false\n): Promise<UserCredential | null> {\n  if (_isFirebaseServerApp(auth.app)) {\n    return Promise.reject(\n      _serverAppCurrentUserOperationNotSupportedError(auth)\n    );\n  }\n  const authInternal = _castAuth(auth);\n  const resolver = _withDefaultResolver(authInternal, resolverExtern);\n  const action = new RedirectAction(authInternal, resolver, bypassAuthState);\n  const result = await action.execute();\n\n  if (result && !bypassAuthState) {\n    delete result.user._redirectEventId;\n    await authInternal._persistUserIfCurrent(result.user as UserInternal);\n    await authInternal._setRedirectUser(null, resolverExtern);\n  }\n\n  return result;\n}\n\nasync function prepareUserForRedirect(user: UserInternal): Promise<string> {\n  const eventId = _generateEventId(`${user.uid}:::`);\n  user._redirectEventId = eventId;\n  await user.auth._setRedirectUser(user);\n  await user.auth._persistUserIfCurrent(user);\n  return eventId;\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  AuthEvent,\n  AuthEventConsumer,\n  AuthEventType,\n  EventManager\n} from '../../model/popup_redirect';\nimport { AuthErrorCode } from '../errors';\nimport { AuthInternal } from '../../model/auth';\nimport { _createError } from '../util/assert';\n\n// The amount of time to store the UIDs of seen events; this is\n// set to 10 min by default\nconst EVENT_DUPLICATION_CACHE_DURATION_MS = 10 * 60 * 1000;\n\nexport class AuthEventManager implements EventManager {\n  private readonly cachedEventUids: Set<string> = new Set();\n  private readonly consumers: Set<AuthEventConsumer> = new Set();\n  protected queuedRedirectEvent: AuthEvent | null = null;\n  protected hasHandledPotentialRedirect = false;\n  private lastProcessedEventTime = Date.now();\n\n  constructor(private readonly auth: AuthInternal) {}\n\n  registerConsumer(authEventConsumer: AuthEventConsumer): void {\n    this.consumers.add(authEventConsumer);\n\n    if (\n      this.queuedRedirectEvent &&\n      this.isEventForConsumer(this.queuedRedirectEvent, authEventConsumer)\n    ) {\n      this.sendToConsumer(this.queuedRedirectEvent, authEventConsumer);\n      this.saveEventToCache(this.queuedRedirectEvent);\n      this.queuedRedirectEvent = null;\n    }\n  }\n\n  unregisterConsumer(authEventConsumer: AuthEventConsumer): void {\n    this.consumers.delete(authEventConsumer);\n  }\n\n  onEvent(event: AuthEvent): boolean {\n    // Check if the event has already been handled\n    if (this.hasEventBeenHandled(event)) {\n      return false;\n    }\n\n    let handled = false;\n    this.consumers.forEach(consumer => {\n      if (this.isEventForConsumer(event, consumer)) {\n        handled = true;\n        this.sendToConsumer(event, consumer);\n        this.saveEventToCache(event);\n      }\n    });\n\n    if (this.hasHandledPotentialRedirect || !isRedirectEvent(event)) {\n      // If we've already seen a redirect before, or this is a popup event,\n      // bail now\n      return handled;\n    }\n\n    this.hasHandledPotentialRedirect = true;\n\n    // If the redirect wasn't handled, hang on to it\n    if (!handled) {\n      this.queuedRedirectEvent = event;\n      handled = true;\n    }\n\n    return handled;\n  }\n\n  private sendToConsumer(event: AuthEvent, consumer: AuthEventConsumer): void {\n    if (event.error && !isNullRedirectEvent(event)) {\n      const code =\n        (event.error.code?.split('auth/')[1] as AuthErrorCode) ||\n        AuthErrorCode.INTERNAL_ERROR;\n      consumer.onError(_createError(this.auth, code));\n    } else {\n      consumer.onAuthEvent(event);\n    }\n  }\n\n  private isEventForConsumer(\n    event: AuthEvent,\n    consumer: AuthEventConsumer\n  ): boolean {\n    const eventIdMatches =\n      consumer.eventId === null ||\n      (!!event.eventId && event.eventId === consumer.eventId);\n    return consumer.filter.includes(event.type) && eventIdMatches;\n  }\n\n  private hasEventBeenHandled(event: AuthEvent): boolean {\n    if (\n      Date.now() - this.lastProcessedEventTime >=\n      EVENT_DUPLICATION_CACHE_DURATION_MS\n    ) {\n      this.cachedEventUids.clear();\n    }\n\n    return this.cachedEventUids.has(eventUid(event));\n  }\n\n  private saveEventToCache(event: AuthEvent): void {\n    this.cachedEventUids.add(eventUid(event));\n    this.lastProcessedEventTime = Date.now();\n  }\n}\n\nfunction eventUid(e: AuthEvent): string {\n  return [e.type, e.eventId, e.sessionId, e.tenantId].filter(v => v).join('-');\n}\n\nfunction isNullRedirectEvent({ type, error }: AuthEvent): boolean {\n  return (\n    type === AuthEventType.UNKNOWN &&\n    error?.code === `auth/${AuthErrorCode.NO_AUTH_EVENT}`\n  );\n}\n\nfunction isRedirectEvent(event: AuthEvent): boolean {\n  switch (event.type) {\n    case AuthEventType.SIGN_IN_VIA_REDIRECT:\n    case AuthEventType.LINK_VIA_REDIRECT:\n    case AuthEventType.REAUTH_VIA_REDIRECT:\n      return true;\n    case AuthEventType.UNKNOWN:\n      return isNullRedirectEvent(event);\n    default:\n      return false;\n  }\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { _getProjectConfig } from '../../api/project_config/get_project_config';\nimport { AuthInternal } from '../../model/auth';\nimport { AuthErrorCode } from '../errors';\nimport { _fail } from './assert';\nimport { _getCurrentUrl } from './location';\n\nconst IP_ADDRESS_REGEX = /^\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}$/;\nconst HTTP_REGEX = /^https?/;\n\nexport async function _validateOrigin(auth: AuthInternal): Promise<void> {\n  // Skip origin validation if we are in an emulated environment\n  if (auth.config.emulator) {\n    return;\n  }\n\n  const { authorizedDomains } = await _getProjectConfig(auth);\n\n  for (const domain of authorizedDomains) {\n    try {\n      if (matchDomain(domain)) {\n        return;\n      }\n    } catch {\n      // Do nothing if there's a URL error; just continue searching\n    }\n  }\n\n  // In the old SDK, this error also provides helpful messages.\n  _fail(auth, AuthErrorCode.INVALID_ORIGIN);\n}\n\nfunction matchDomain(expected: string): boolean {\n  const currentUrl = _getCurrentUrl();\n  const { protocol, hostname } = new URL(currentUrl);\n  if (expected.startsWith('chrome-extension://')) {\n    const ceUrl = new URL(expected);\n\n    if (ceUrl.hostname === '' && hostname === '') {\n      // For some reason we're not parsing chrome URLs properly\n      return (\n        protocol === 'chrome-extension:' &&\n        expected.replace('chrome-extension://', '') ===\n          currentUrl.replace('chrome-extension://', '')\n      );\n    }\n\n    return protocol === 'chrome-extension:' && ceUrl.hostname === hostname;\n  }\n\n  if (!HTTP_REGEX.test(protocol)) {\n    return false;\n  }\n\n  if (IP_ADDRESS_REGEX.test(expected)) {\n    // The domain has to be exactly equal to the pattern, as an IP domain will\n    // only contain the IP, no extra character.\n    return hostname === expected;\n  }\n\n  // Dots in pattern should be escaped.\n  const escapedDomainPattern = expected.replace(/\\./g, '\\\\.');\n  // Non ip address domains.\n  // domain.com = *.domain.com OR domain.com\n  const re = new RegExp(\n    '^(.+\\\\.' + escapedDomainPattern + '|' + escapedDomainPattern + ')$',\n    'i'\n  );\n  return re.test(hostname);\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { _performApiRequest, Endpoint, HttpMethod } from '../index';\nimport { Auth } from '../../model/public_types';\n\nexport interface GetProjectConfigRequest {\n  androidPackageName?: string;\n  iosBundleId?: string;\n}\n\nexport interface GetProjectConfigResponse {\n  authorizedDomains: string[];\n}\n\nexport async function _getProjectConfig(\n  auth: Auth,\n  request: GetProjectConfigRequest = {}\n): Promise<GetProjectConfigResponse> {\n  return _performApiRequest<GetProjectConfigRequest, GetProjectConfigResponse>(\n    auth,\n    HttpMethod.GET,\n    Endpoint.GET_PROJECT_CONFIG,\n    request\n  );\n}\n","/**\n * @license\n * Copyright 2020 Google LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { AuthErrorCode } from '../../core/errors';\nimport { _createError } from '../../core/util/assert';\nimport { Delay } from '../../core/util/delay';\nimport { AuthInternal } from '../../model/auth';\nimport { _window } from '../auth_window';\nimport * as js from '../load_js';\n\nconst NETWORK_TIMEOUT = new Delay(30000, 60000);\n\n/**\n * Reset unloaded GApi modules. If gapi.load fails due to a network error,\n * it will stop working after a retrial. This is a hack to fix this issue.\n */\nfunction resetUnloadedGapiModules(): void {\n  // Clear last failed gapi.load state to force next gapi.load to first\n  // load the failed gapi.iframes module.\n  // Get gapix.beacon context.\n  const beacon = _window().___jsl;\n  // Get current hint.\n  if (beacon?.H) {\n    // Get gapi hint.\n    for (const hint of Object.keys(beacon.H)) {\n      // Requested modules.\n      beacon.H[hint].r = beacon.H[hint].r || [];\n      // Loaded modules.\n      beacon.H[hint].L = beacon.H[hint].L || [];\n      // Set requested modules to a copy of the loaded modules.\n      beacon.H[hint].r = [...beacon.H[hint].L];\n      // Clear pending callbacks.\n      if (beacon.CP) {\n        for (let i = 0; i < beacon.CP.length; i++) {\n          // Remove all failed pending callbacks.\n          beacon.CP[i] = null;\n        }\n      }\n    }\n  }\n}\n\nfunction loadGapi(auth: AuthInternal): Promise<gapi.iframes.Context> {\n  return new Promise<gapi.iframes.Context>((resolve, reject) => {\n    // Function to run when gapi.load is ready.\n    function loadGapiIframe(): void {\n      // The developer may have tried to previously run gapi.load and failed.\n      // Run this to fix that.\n      resetUnloadedGapiModules();\n      gapi.load('gapi.iframes', {\n        callback: () => {\n          resolve(gapi.iframes.getContext());\n        },\n        ontimeout: () => {\n          // The above reset may be sufficient, but having this reset after\n          // failure ensures that if the developer calls gapi.load after the\n          // connection is re-established and before another attempt to embed\n          // the iframe, it would work and would not be broken because of our\n          // failed attempt.\n          // Timeout when gapi.iframes.Iframe not loaded.\n          resetUnloadedGapiModules();\n          reject(_createError(auth, AuthErrorCode.NETWORK_REQUEST_FAILED));\n        },\n        timeout: NETWORK_TIMEOUT.get()\n      });\n    }\n\n    if (_window().gapi?.iframes?.Iframe) {\n      // If gapi.iframes.Iframe available, resolve.\n      resolve(gapi.iframes.getContext());\n    } else if (!!_window().gapi?.load) {\n      // Gapi loader ready, load gapi.iframes.\n      loadGapiIframe();\n    } else {\n      // Create a new iframe callback when this is called so as not to overwrite\n      // any previous defined callback. This happens if this method is called\n      // multiple times in parallel and could result in the later callback\n      // overwriting the previous one. This would end up with a iframe\n      // timeout.\n      const cbName = js._generateCallbackName('iframefcb');\n      // GApi loader not available, dynamically load platform.js.\n      _window()[cbName] = () => {\n        // GApi loader should be ready.\n        if (!!gapi.load) {\n          loadGapiIframe();\n        } else {\n          // Gapi loader failed, throw error.\n          reject(_createError(auth, AuthErrorCode.NETWORK_REQUEST_FAILED));\n        }\n      };\n      // Load GApi loader.\n      return js\n        ._loadJS(`${js._gapiScriptUrl()}?onload=${cbName}`)\n        .catch(e => reject(e));\n    }\n  }).catch(error => {\n    // Reset cached promise to allow for retrial.\n    cachedGApiLoader = null;\n    throw error;\n  });\n}\n\nlet cachedGApiLoader: Promise<gapi.iframes.Context> | null = null;\nexport function _loadGapi(auth: AuthInternal): Promise<gapi.iframes.Context> {\n  cachedGApiLoader = cachedGApiLoader || loadGapi(auth);\n  return cachedGApiLoader;\n}\n\nexport function _resetLoader(): void {\n  cachedGApiLoader = null;\n}\n","/**\n * @license\n * Copyright 2020 Google LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { SDK_VERSION } from '@firebase/app';\nimport { querystring } from '@firebase/util';\nimport { DefaultConfig } from '../../../internal';\n\nimport { AuthErrorCode } from '../../core/errors';\nimport { _assert, _createError } from '../../core/util/assert';\nimport { Delay } from '../../core/util/delay';\nimport { _emulatorUrl } from '../../core/util/emulator';\nimport { AuthInternal } from '../../model/auth';\nimport { _window } from '../auth_window';\nimport * as gapiLoader from './gapi';\n\nconst PING_TIMEOUT = new Delay(5000, 15000);\nconst IFRAME_PATH = '__/auth/iframe';\nconst EMULATED_IFRAME_PATH = 'emulator/auth/iframe';\n\nconst IFRAME_ATTRIBUTES = {\n  style: {\n    position: 'absolute',\n    top: '-100px',\n    width: '1px',\n    height: '1px'\n  },\n  'aria-hidden': 'true',\n  tabindex: '-1'\n};\n\n// Map from apiHost to endpoint ID for passing into iframe. In current SDK, apiHost can be set to\n// anything (not from a list of endpoints with IDs as in legacy), so this is the closest we can get.\nconst EID_FROM_APIHOST = new Map([\n  [DefaultConfig.API_HOST, 'p'], // production\n  ['staging-identitytoolkit.sandbox.googleapis.com', 's'], // staging\n  ['test-identitytoolkit.sandbox.googleapis.com', 't'] // test\n]);\n\nfunction getIframeUrl(auth: AuthInternal): string {\n  const config = auth.config;\n  _assert(config.authDomain, auth, AuthErrorCode.MISSING_AUTH_DOMAIN);\n  const url = config.emulator\n    ? _emulatorUrl(config, EMULATED_IFRAME_PATH)\n    : `https://${auth.config.authDomain}/${IFRAME_PATH}`;\n\n  const params: Record<string, string> = {\n    apiKey: config.apiKey,\n    appName: auth.name,\n    v: SDK_VERSION\n  };\n  const eid = EID_FROM_APIHOST.get(auth.config.apiHost);\n  if (eid) {\n    params.eid = eid;\n  }\n  const frameworks = auth._getFrameworks();\n  if (frameworks.length) {\n    params.fw = frameworks.join(',');\n  }\n  return `${url}?${querystring(params).slice(1)}`;\n}\n\nexport async function _openIframe(\n  auth: AuthInternal\n): Promise<gapi.iframes.Iframe> {\n  const context = await gapiLoader._loadGapi(auth);\n  const gapi = _window().gapi;\n  _assert(gapi, auth, AuthErrorCode.INTERNAL_ERROR);\n  return context.open(\n    {\n      where: document.body,\n      url: getIframeUrl(auth),\n      messageHandlersFilter: gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER,\n      attributes: IFRAME_ATTRIBUTES,\n      dontclear: true\n    },\n    (iframe: gapi.iframes.Iframe) =>\n      new Promise(async (resolve, reject) => {\n        await iframe.restyle({\n          // Prevent iframe from closing on mouse out.\n          setHideOnLeave: false\n        });\n\n        const networkError = _createError(\n          auth,\n          AuthErrorCode.NETWORK_REQUEST_FAILED\n        );\n        // Confirm iframe is correctly loaded.\n        // To fallback on failure, set a timeout.\n        const networkErrorTimer = _window().setTimeout(() => {\n          reject(networkError);\n        }, PING_TIMEOUT.get());\n        // Clear timer and resolve pending iframe ready promise.\n        function clearTimerAndResolve(): void {\n          _window().clearTimeout(networkErrorTimer);\n          resolve(iframe);\n        }\n        // This returns an IThenable. However the reject part does not call\n        // when the iframe is not loaded.\n        iframe.ping(clearTimerAndResolve).then(clearTimerAndResolve, () => {\n          reject(networkError);\n        });\n      })\n  );\n}\n","/**\n * @license\n * Copyright 2020 Google LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { getUA } from '@firebase/util';\n\nimport { AuthErrorCode } from '../../core/errors';\nimport { _assert } from '../../core/util/assert';\nimport {\n  _isChromeIOS,\n  _isFirefox,\n  _isIOSStandalone\n} from '../../core/util/browser';\nimport { AuthInternal } from '../../model/auth';\n\nconst BASE_POPUP_OPTIONS = {\n  location: 'yes',\n  resizable: 'yes',\n  statusbar: 'yes',\n  toolbar: 'no'\n};\n\nconst DEFAULT_WIDTH = 500;\nconst DEFAULT_HEIGHT = 600;\nconst TARGET_BLANK = '_blank';\n\nconst FIREFOX_EMPTY_URL = 'http://localhost';\n\nexport class AuthPopup {\n  associatedEvent: string | null = null;\n\n  constructor(readonly window: Window | null) {}\n\n  close(): void {\n    if (this.window) {\n      try {\n        this.window.close();\n      } catch (e) {}\n    }\n  }\n}\n\nexport function _open(\n  auth: AuthInternal,\n  url?: string,\n  name?: string,\n  width = DEFAULT_WIDTH,\n  height = DEFAULT_HEIGHT\n): AuthPopup {\n  const top = Math.max((window.screen.availHeight - height) / 2, 0).toString();\n  const left = Math.max((window.screen.availWidth - width) / 2, 0).toString();\n  let target = '';\n\n  const options: { [key: string]: string } = {\n    ...BASE_POPUP_OPTIONS,\n    width: width.toString(),\n    height: height.toString(),\n    top,\n    left\n  };\n\n  // Chrome iOS 7 and 8 is returning an undefined popup win when target is\n  // specified, even though the popup is not necessarily blocked.\n  const ua = getUA().toLowerCase();\n\n  if (name) {\n    target = _isChromeIOS(ua) ? TARGET_BLANK : name;\n  }\n\n  if (_isFirefox(ua)) {\n    // Firefox complains when invalid URLs are popped out. Hacky way to bypass.\n    url = url || FIREFOX_EMPTY_URL;\n    // Firefox disables by default scrolling on popup windows, which can create\n    // issues when the user has many Google accounts, for instance.\n    options.scrollbars = 'yes';\n  }\n\n  const optionsString = Object.entries(options).reduce(\n    (accum, [key, value]) => `${accum}${key}=${value},`,\n    ''\n  );\n\n  if (_isIOSStandalone(ua) && target !== '_self') {\n    openAsNewWindowIOS(url || '', target);\n    return new AuthPopup(null);\n  }\n\n  // about:blank getting sanitized causing browsers like IE/Edge to display\n  // brief error message before redirecting to handler.\n  const newWin = window.open(url || '', target, optionsString);\n  _assert(newWin, auth, AuthErrorCode.POPUP_BLOCKED);\n\n  // Flaky on IE edge, encapsulate with a try and catch.\n  try {\n    newWin.focus();\n  } catch (e) {}\n\n  return new AuthPopup(newWin);\n}\n\nfunction openAsNewWindowIOS(url: string, target: string): void {\n  const el = document.createElement('a');\n  el.href = url;\n  el.target = target;\n  const click = document.createEvent('MouseEvent');\n  click.initMouseEvent(\n    'click',\n    true,\n    true,\n    window,\n    1,\n    0,\n    0,\n    0,\n    0,\n    false,\n    false,\n    false,\n    false,\n    1,\n    null\n  );\n  el.dispatchEvent(click);\n}\n","/**\n * @license\n * Copyright 2021 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { SDK_VERSION } from '@firebase/app';\nimport { AuthProvider } from '../../model/public_types';\nimport { ApiKey, AppName, AuthInternal } from '../../model/auth';\nimport { AuthEventType } from '../../model/popup_redirect';\nimport { AuthErrorCode } from '../errors';\nimport { _assert } from './assert';\nimport { isEmpty, querystring } from '@firebase/util';\nimport { _emulatorUrl } from './emulator';\nimport { FederatedAuthProvider } from '../providers/federated';\nimport { BaseOAuthProvider } from '../providers/oauth';\n\n/**\n * URL for Authentication widget which will initiate the OAuth handshake\n *\n * @internal\n */\nconst WIDGET_PATH = '__/auth/handler';\n\n/**\n * URL for emulated environment\n *\n * @internal\n */\nconst EMULATOR_WIDGET_PATH = 'emulator/auth/handler';\n\n/**\n * Fragment name for the App Check token that gets passed to the widget\n *\n * @internal\n */\nconst FIREBASE_APP_CHECK_FRAGMENT_ID = encodeURIComponent('fac');\n\n// eslint-disable-next-line @typescript-eslint/consistent-type-definitions\ntype WidgetParams = {\n  apiKey: ApiKey;\n  appName: AppName;\n  authType: AuthEventType;\n  redirectUrl?: string;\n  v: string;\n  providerId?: string;\n  scopes?: string;\n  customParameters?: string;\n  eventId?: string;\n  tid?: string;\n} & { [key: string]: string | undefined };\n\nexport async function _getRedirectUrl(\n  auth: AuthInternal,\n  provider: AuthProvider,\n  authType: AuthEventType,\n  redirectUrl?: string,\n  eventId?: string,\n  additionalParams?: Record<string, string>\n): Promise<string> {\n  _assert(auth.config.authDomain, auth, AuthErrorCode.MISSING_AUTH_DOMAIN);\n  _assert(auth.config.apiKey, auth, AuthErrorCode.INVALID_API_KEY);\n\n  const params: WidgetParams = {\n    apiKey: auth.config.apiKey,\n    appName: auth.name,\n    authType,\n    redirectUrl,\n    v: SDK_VERSION,\n    eventId\n  };\n\n  if (provider instanceof FederatedAuthProvider) {\n    provider.setDefaultLanguage(auth.languageCode);\n    params.providerId = provider.providerId || '';\n    if (!isEmpty(provider.getCustomParameters())) {\n      params.customParameters = JSON.stringify(provider.getCustomParameters());\n    }\n\n    // TODO set additionalParams from the provider as well?\n    for (const [key, value] of Object.entries(additionalParams || {})) {\n      params[key] = value;\n    }\n  }\n\n  if (provider instanceof BaseOAuthProvider) {\n    const scopes = provider.getScopes().filter(scope => scope !== '');\n    if (scopes.length > 0) {\n      params.scopes = scopes.join(',');\n    }\n  }\n\n  if (auth.tenantId) {\n    params.tid = auth.tenantId;\n  }\n\n  // TODO: maybe set eid as endpointId\n  // TODO: maybe set fw as Frameworks.join(\",\")\n\n  const paramsDict = params as Record<string, string | number>;\n  for (const key of Object.keys(paramsDict)) {\n    if (paramsDict[key] === undefined) {\n      delete paramsDict[key];\n    }\n  }\n\n  // Sets the App Check token to pass to the widget\n  const appCheckToken = await auth._getAppCheckToken();\n  const appCheckTokenFragment = appCheckToken\n    ? `#${FIREBASE_APP_CHECK_FRAGMENT_ID}=${encodeURIComponent(appCheckToken)}`\n    : '';\n\n  // Start at index 1 to skip the leading '&' in the query string\n  return `${getHandlerBase(auth)}?${querystring(paramsDict).slice(\n    1\n  )}${appCheckTokenFragment}`;\n}\n\nfunction getHandlerBase({ config }: AuthInternal): string {\n  if (!config.emulator) {\n    return `https://${config.authDomain}/${WIDGET_PATH}`;\n  }\n\n  return _emulatorUrl(config, EMULATOR_WIDGET_PATH);\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { AuthProvider, PopupRedirectResolver } from '../model/public_types';\n\nimport { AuthEventManager } from '../core/auth/auth_event_manager';\nimport { AuthErrorCode } from '../core/errors';\nimport { _assert, debugAssert, _fail } from '../core/util/assert';\nimport { _generateEventId } from '../core/util/event_id';\nimport { _getCurrentUrl } from '../core/util/location';\nimport { _validateOrigin } from '../core/util/validate_origin';\nimport { AuthInternal } from '../model/auth';\nimport {\n  AuthEventType,\n  EventManager,\n  GapiAuthEvent,\n  GapiOutcome,\n  PopupRedirectResolverInternal\n} from '../model/popup_redirect';\nimport { _setWindowLocation } from './auth_window';\nimport { _openIframe } from './iframe/iframe';\nimport { browserSessionPersistence } from './persistence/session_storage';\nimport { _open, AuthPopup } from './util/popup';\nimport { _getRedirectResult } from './strategies/redirect';\nimport { _getRedirectUrl } from '../core/util/handler';\nimport { _isIOS, _isMobileBrowser, _isSafari } from '../core/util/browser';\nimport { _overrideRedirectResult } from '../core/strategies/redirect';\n\n/**\n * The special web storage event\n *\n */\nconst WEB_STORAGE_SUPPORT_KEY = 'webStorageSupport';\n\ninterface WebStorageSupportMessage extends gapi.iframes.Message {\n  [index: number]: Record<string, boolean>;\n}\n\ninterface ManagerOrPromise {\n  manager?: EventManager;\n  promise?: Promise<EventManager>;\n}\n\nclass BrowserPopupRedirectResolver implements PopupRedirectResolverInternal {\n  private readonly eventManagers: Record<string, ManagerOrPromise> = {};\n  private readonly iframes: Record<string, gapi.iframes.Iframe> = {};\n  private readonly originValidationPromises: Record<string, Promise<void>> = {};\n\n  readonly _redirectPersistence = browserSessionPersistence;\n\n  // Wrapping in async even though we don't await anywhere in order\n  // to make sure errors are raised as promise rejections\n  async _openPopup(\n    auth: AuthInternal,\n    provider: AuthProvider,\n    authType: AuthEventType,\n    eventId?: string\n  ): Promise<AuthPopup> {\n    debugAssert(\n      this.eventManagers[auth._key()]?.manager,\n      '_initialize() not called before _openPopup()'\n    );\n\n    const url = await _getRedirectUrl(\n      auth,\n      provider,\n      authType,\n      _getCurrentUrl(),\n      eventId\n    );\n    return _open(auth, url, _generateEventId());\n  }\n\n  async _openRedirect(\n    auth: AuthInternal,\n    provider: AuthProvider,\n    authType: AuthEventType,\n    eventId?: string\n  ): Promise<never> {\n    await this._originValidation(auth);\n    const url = await _getRedirectUrl(\n      auth,\n      provider,\n      authType,\n      _getCurrentUrl(),\n      eventId\n    );\n    _setWindowLocation(url);\n    return new Promise(() => {});\n  }\n\n  _initialize(auth: AuthInternal): Promise<EventManager> {\n    const key = auth._key();\n    if (this.eventManagers[key]) {\n      const { manager, promise } = this.eventManagers[key];\n      if (manager) {\n        return Promise.resolve(manager);\n      } else {\n        debugAssert(promise, 'If manager is not set, promise should be');\n        return promise;\n      }\n    }\n\n    const promise = this.initAndGetManager(auth);\n    this.eventManagers[key] = { promise };\n\n    // If the promise is rejected, the key should be removed so that the\n    // operation can be retried later.\n    promise.catch(() => {\n      delete this.eventManagers[key];\n    });\n\n    return promise;\n  }\n\n  private async initAndGetManager(auth: AuthInternal): Promise<EventManager> {\n    const iframe = await _openIframe(auth);\n    const manager = new AuthEventManager(auth);\n    iframe.register<GapiAuthEvent>(\n      'authEvent',\n      (iframeEvent: GapiAuthEvent | null) => {\n        _assert(iframeEvent?.authEvent, auth, AuthErrorCode.INVALID_AUTH_EVENT);\n        // TODO: Consider splitting redirect and popup events earlier on\n\n        const handled = manager.onEvent(iframeEvent.authEvent);\n        return { status: handled ? GapiOutcome.ACK : GapiOutcome.ERROR };\n      },\n      gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER\n    );\n\n    this.eventManagers[auth._key()] = { manager };\n    this.iframes[auth._key()] = iframe;\n    return manager;\n  }\n\n  _isIframeWebStorageSupported(\n    auth: AuthInternal,\n    cb: (supported: boolean) => unknown\n  ): void {\n    const iframe = this.iframes[auth._key()];\n    iframe.send<gapi.iframes.Message, WebStorageSupportMessage>(\n      WEB_STORAGE_SUPPORT_KEY,\n      { type: WEB_STORAGE_SUPPORT_KEY },\n      result => {\n        const isSupported = result?.[0]?.[WEB_STORAGE_SUPPORT_KEY];\n        if (isSupported !== undefined) {\n          cb(!!isSupported);\n        }\n\n        _fail(auth, AuthErrorCode.INTERNAL_ERROR);\n      },\n      gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER\n    );\n  }\n\n  _originValidation(auth: AuthInternal): Promise<void> {\n    const key = auth._key();\n    if (!this.originValidationPromises[key]) {\n      this.originValidationPromises[key] = _validateOrigin(auth);\n    }\n\n    return this.originValidationPromises[key];\n  }\n\n  get _shouldInitProactively(): boolean {\n    // Mobile browsers and Safari need to optimistically initialize\n    return _isMobileBrowser() || _isSafari() || _isIOS();\n  }\n\n  _completeRedirectFn = _getRedirectResult;\n\n  _overrideRedirectResult = _overrideRedirectResult;\n}\n\n/**\n * An implementation of {@link PopupRedirectResolver} suitable for browser\n * based applications.\n *\n * @remarks\n * This method does not work in a Node.js environment.\n *\n * @public\n */\nexport const browserPopupRedirectResolver: PopupRedirectResolver =\n  BrowserPopupRedirectResolver;\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Unsubscribe } from '@firebase/util';\nimport { FirebaseAuthInternal } from '@firebase/auth-interop-types';\n\nimport { AuthInternal } from '../../model/auth';\nimport { UserInternal } from '../../model/user';\nimport { _assert } from '../util/assert';\nimport { AuthErrorCode } from '../errors';\n\ninterface TokenListener {\n  (tok: string | null): unknown;\n}\n\nexport class AuthInterop implements FirebaseAuthInternal {\n  private readonly internalListeners: Map<TokenListener, Unsubscribe> =\n    new Map();\n\n  constructor(private readonly auth: AuthInternal) {}\n\n  getUid(): string | null {\n    this.assertAuthConfigured();\n    return this.auth.currentUser?.uid || null;\n  }\n\n  async getToken(\n    forceRefresh?: boolean\n  ): Promise<{ accessToken: string } | null> {\n    this.assertAuthConfigured();\n    await this.auth._initializationPromise;\n    if (!this.auth.currentUser) {\n      return null;\n    }\n\n    const accessToken = await this.auth.currentUser.getIdToken(forceRefresh);\n    return { accessToken };\n  }\n\n  addAuthTokenListener(listener: TokenListener): void {\n    this.assertAuthConfigured();\n    if (this.internalListeners.has(listener)) {\n      return;\n    }\n\n    const unsubscribe = this.auth.onIdTokenChanged(user => {\n      listener(\n        (user as UserInternal | null)?.stsTokenManager.accessToken || null\n      );\n    });\n    this.internalListeners.set(listener, unsubscribe);\n    this.updateProactiveRefresh();\n  }\n\n  removeAuthTokenListener(listener: TokenListener): void {\n    this.assertAuthConfigured();\n    const unsubscribe = this.internalListeners.get(listener);\n    if (!unsubscribe) {\n      return;\n    }\n\n    this.internalListeners.delete(listener);\n    unsubscribe();\n    this.updateProactiveRefresh();\n  }\n\n  private assertAuthConfigured(): void {\n    _assert(\n      this.auth._initializationPromise,\n      AuthErrorCode.DEPENDENT_SDK_INIT_BEFORE_AUTH\n    );\n  }\n\n  private updateProactiveRefresh(): void {\n    if (this.internalListeners.size > 0) {\n      this.auth._startProactiveRefresh();\n    } else {\n      this.auth._stopProactiveRefresh();\n    }\n  }\n}\n","/**\n * @license\n * Copyright 2021 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { FirebaseApp, getApp, _getProvider } from '@firebase/app';\n\nimport {\n  initializeAuth,\n  beforeAuthStateChanged,\n  onIdTokenChanged,\n  connectAuthEmulator\n} from '..';\nimport { registerAuth } from '../core/auth/register';\nimport { ClientPlatform } from '../core/util/version';\nimport { browserLocalPersistence } from './persistence/local_storage';\nimport { browserSessionPersistence } from './persistence/session_storage';\nimport { indexedDBLocalPersistence } from './persistence/indexed_db';\nimport { browserPopupRedirectResolver } from './popup_redirect';\nimport { Auth, User } from '../model/public_types';\nimport { getDefaultEmulatorHost, getExperimentalSetting } from '@firebase/util';\nimport { _setExternalJSProvider } from './load_js';\nimport { _createError } from '../core/util/assert';\nimport { AuthErrorCode } from '../core/errors';\n\nconst DEFAULT_ID_TOKEN_MAX_AGE = 5 * 60;\nconst authIdTokenMaxAge =\n  getExperimentalSetting('authIdTokenMaxAge') || DEFAULT_ID_TOKEN_MAX_AGE;\n\nlet lastPostedIdToken: string | undefined | null = null;\n\nconst mintCookieFactory = (url: string) => async (user: User | null) => {\n  const idTokenResult = user && (await user.getIdTokenResult());\n  const idTokenAge =\n    idTokenResult &&\n    (new Date().getTime() - Date.parse(idTokenResult.issuedAtTime)) / 1_000;\n  if (idTokenAge && idTokenAge > authIdTokenMaxAge) {\n    return;\n  }\n  // Specifically trip null => undefined when logged out, to delete any existing cookie\n  const idToken = idTokenResult?.token;\n  if (lastPostedIdToken === idToken) {\n    return;\n  }\n  lastPostedIdToken = idToken;\n  await fetch(url, {\n    method: idToken ? 'POST' : 'DELETE',\n    headers: idToken\n      ? {\n          'Authorization': `Bearer ${idToken}`\n        }\n      : {}\n  });\n};\n\n/**\n * Returns the Auth instance associated with the provided {@link @firebase/app#FirebaseApp}.\n * If no instance exists, initializes an Auth instance with platform-specific default dependencies.\n *\n * @param app - The Firebase App.\n *\n * @public\n */\nexport function getAuth(app: FirebaseApp = getApp()): Auth {\n  const provider = _getProvider(app, 'auth');\n\n  if (provider.isInitialized()) {\n    return provider.getImmediate();\n  }\n\n  const auth = initializeAuth(app, {\n    popupRedirectResolver: browserPopupRedirectResolver,\n    persistence: [\n      indexedDBLocalPersistence,\n      browserLocalPersistence,\n      browserSessionPersistence\n    ]\n  });\n\n  const authTokenSyncPath = getExperimentalSetting('authTokenSyncURL');\n  // Only do the Cookie exchange in a secure context\n  if (\n    authTokenSyncPath &&\n    typeof isSecureContext === 'boolean' &&\n    isSecureContext\n  ) {\n    // Don't allow urls (XSS possibility), only paths on the same domain\n    const authTokenSyncUrl = new URL(authTokenSyncPath, location.origin);\n    if (location.origin === authTokenSyncUrl.origin) {\n      const mintCookie = mintCookieFactory(authTokenSyncUrl.toString());\n      beforeAuthStateChanged(auth, mintCookie, () =>\n        mintCookie(auth.currentUser)\n      );\n      onIdTokenChanged(auth, user => mintCookie(user));\n    }\n  }\n\n  const authEmulatorHost = getDefaultEmulatorHost('auth');\n  if (authEmulatorHost) {\n    connectAuthEmulator(auth, `http://${authEmulatorHost}`);\n  }\n\n  return auth;\n}\n\nfunction getScriptParentElement(): HTMLDocument | HTMLHeadElement {\n  return document.getElementsByTagName('head')?.[0] ?? document;\n}\n\n_setExternalJSProvider({\n  loadJS(url: string): Promise<Event> {\n    // TODO: consider adding timeout support & cancellation\n    return new Promise((resolve, reject) => {\n      const el = document.createElement('script');\n      el.setAttribute('src', url);\n      el.onload = resolve;\n      el.onerror = e => {\n        const error = _createError(AuthErrorCode.INTERNAL_ERROR);\n        error.customData = e as unknown as Record<string, unknown>;\n        reject(error);\n      };\n      el.type = 'text/javascript';\n      el.charset = 'UTF-8';\n      getScriptParentElement().appendChild(el);\n    });\n  },\n\n  gapiScript: 'https://apis.google.com/js/api.js',\n  recaptchaV2Script: 'https://www.google.com/recaptcha/api.js',\n  recaptchaEnterpriseScript:\n    'https://www.google.com/recaptcha/enterprise.js?render='\n});\n\nregisterAuth(ClientPlatform.BROWSER);\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { _getProvider, FirebaseApp } from '@firebase/app';\nimport { deepEqual } from '@firebase/util';\nimport { Auth, Dependencies } from '../../model/public_types';\n\nimport { AuthErrorCode } from '../errors';\nimport { PersistenceInternal } from '../persistence';\nimport { _fail } from '../util/assert';\nimport { _getInstance } from '../util/instantiator';\nimport { AuthImpl } from './auth_impl';\n\n/**\n * Initializes an {@link Auth} instance with fine-grained control over\n * {@link Dependencies}.\n *\n * @remarks\n *\n * This function allows more control over the {@link Auth} instance than\n * {@link getAuth}. `getAuth` uses platform-specific defaults to supply\n * the {@link Dependencies}. In general, `getAuth` is the easiest way to\n * initialize Auth and works for most use cases. Use `initializeAuth` if you\n * need control over which persistence layer is used, or to minimize bundle\n * size if you're not using either `signInWithPopup` or `signInWithRedirect`.\n *\n * For example, if your app only uses anonymous accounts and you only want\n * accounts saved for the current session, initialize `Auth` with:\n *\n * ```js\n * const auth = initializeAuth(app, {\n *   persistence: browserSessionPersistence,\n *   popupRedirectResolver: undefined,\n * });\n * ```\n *\n * @public\n */\nexport function initializeAuth(app: FirebaseApp, deps?: Dependencies): Auth {\n  const provider = _getProvider(app, 'auth');\n\n  if (provider.isInitialized()) {\n    const auth = provider.getImmediate() as AuthImpl;\n    const initialOptions = provider.getOptions() as Dependencies;\n    if (deepEqual(initialOptions, deps ?? {})) {\n      return auth;\n    } else {\n      _fail(auth, AuthErrorCode.ALREADY_INITIALIZED);\n    }\n  }\n\n  const auth = provider.initialize({ options: deps }) as AuthImpl;\n\n  return auth;\n}\n\nexport function _initializeAuthInstance(\n  auth: AuthImpl,\n  deps?: Dependencies\n): void {\n  const persistence = deps?.persistence || [];\n  const hierarchy = (\n    Array.isArray(persistence) ? persistence : [persistence]\n  ).map<PersistenceInternal>(_getInstance);\n  if (deps?.errorMap) {\n    auth._updateErrorMap(deps.errorMap);\n  }\n\n  // This promise is intended to float; auth initialization happens in the\n  // background, meanwhile the auth object may be used by the app.\n  // eslint-disable-next-line @typescript-eslint/no-floating-promises\n  auth._initializeWithPersistence(hierarchy, deps?.popupRedirectResolver);\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { getModularInstance } from '@firebase/util';\nimport {\n  Auth,\n  NextOrObserver,\n  Persistence,\n  User,\n  CompleteFn,\n  ErrorFn,\n  Unsubscribe,\n  PasswordValidationStatus\n} from '../model/public_types';\nimport { _initializeRecaptchaConfig } from '../platform_browser/recaptcha/recaptcha_enterprise_verifier';\nimport { _castAuth } from '../core/auth/auth_impl';\n\nexport {\n  debugErrorMap,\n  prodErrorMap,\n  AUTH_ERROR_CODES_MAP_DO_NOT_USE_INTERNALLY as AuthErrorCodes\n} from './errors';\n\n// Non-optional auth methods.\n/**\n * Changes the type of persistence on the {@link Auth} instance for the currently saved\n * `Auth` session and applies this type of persistence for future sign-in requests, including\n * sign-in with redirect requests.\n *\n * @remarks\n * This makes it easy for a user signing in to specify whether their session should be\n * remembered or not. It also makes it easier to never persist the `Auth` state for applications\n * that are shared by other users or have sensitive data.\n *\n * This method does not work in a Node.js environment or with {@link Auth} instances created with a\n * {@link @firebase/app#FirebaseServerApp}.\n *\n * @example\n * ```javascript\n * setPersistence(auth, browserSessionPersistence);\n * ```\n *\n * @param auth - The {@link Auth} instance.\n * @param persistence - The {@link Persistence} to use.\n * @returns A `Promise` that resolves once the persistence change has completed\n *\n * @public\n */\nexport function setPersistence(\n  auth: Auth,\n  persistence: Persistence\n): Promise<void> {\n  return getModularInstance(auth).setPersistence(persistence);\n}\n\n/**\n * Loads the reCAPTCHA configuration into the `Auth` instance.\n *\n * @remarks\n * This will load the reCAPTCHA config, which indicates whether the reCAPTCHA\n * verification flow should be triggered for each auth provider, into the\n * current Auth session.\n *\n * If initializeRecaptchaConfig() is not invoked, the auth flow will always start\n * without reCAPTCHA verification. If the provider is configured to require reCAPTCHA\n * verification, the SDK will transparently load the reCAPTCHA config and restart the\n * auth flows.\n *\n * Thus, by calling this optional method, you will reduce the latency of future auth flows.\n * Loading the reCAPTCHA config early will also enhance the signal collected by reCAPTCHA.\n *\n * This method does not work in a Node.js environment.\n *\n * @example\n * ```javascript\n * initializeRecaptchaConfig(auth);\n * ```\n *\n * @param auth - The {@link Auth} instance.\n *\n * @public\n */\nexport function initializeRecaptchaConfig(auth: Auth): Promise<void> {\n  return _initializeRecaptchaConfig(auth);\n}\n\n/**\n * Validates the password against the password policy configured for the project or tenant.\n *\n * @remarks\n * If no tenant ID is set on the `Auth` instance, then this method will use the password\n * policy configured for the project. Otherwise, this method will use the policy configured\n * for the tenant. If a password policy has not been configured, then the default policy\n * configured for all projects will be used.\n *\n * If an auth flow fails because a submitted password does not meet the password policy\n * requirements and this method has previously been called, then this method will use the\n * most recent policy available when called again.\n *\n * @example\n * ```javascript\n * validatePassword(auth, 'some-password');\n * ```\n *\n * @param auth The {@link Auth} instance.\n * @param password The password to validate.\n *\n * @public\n */\nexport async function validatePassword(\n  auth: Auth,\n  password: string\n): Promise<PasswordValidationStatus> {\n  const authInternal = _castAuth(auth);\n  return authInternal.validatePassword(password);\n}\n\n/**\n * Adds an observer for changes to the signed-in user's ID token.\n *\n * @remarks\n * This includes sign-in, sign-out, and token refresh events.\n * This will not be triggered automatically upon ID token expiration. Use {@link User.getIdToken} to refresh the ID token.\n *\n * @param auth - The {@link Auth} instance.\n * @param nextOrObserver - callback triggered on change.\n * @param error - Deprecated. This callback is never triggered. Errors\n * on signing in/out can be caught in promises returned from\n * sign-in/sign-out functions.\n * @param completed - Deprecated. This callback is never triggered.\n *\n * @public\n */\nexport function onIdTokenChanged(\n  auth: Auth,\n  nextOrObserver: NextOrObserver<User>,\n  error?: ErrorFn,\n  completed?: CompleteFn\n): Unsubscribe {\n  return getModularInstance(auth).onIdTokenChanged(\n    nextOrObserver,\n    error,\n    completed\n  );\n}\n/**\n * Adds a blocking callback that runs before an auth state change\n * sets a new user.\n *\n * @param auth - The {@link Auth} instance.\n * @param callback - callback triggered before new user value is set.\n *   If this throws, it blocks the user from being set.\n * @param onAbort - callback triggered if a later `beforeAuthStateChanged()`\n *   callback throws, allowing you to undo any side effects.\n */\nexport function beforeAuthStateChanged(\n  auth: Auth,\n  callback: (user: User | null) => void | Promise<void>,\n  onAbort?: () => void\n): Unsubscribe {\n  return getModularInstance(auth).beforeAuthStateChanged(callback, onAbort);\n}\n/**\n * Adds an observer for changes to the user's sign-in state.\n *\n * @remarks\n * To keep the old behavior, see {@link onIdTokenChanged}.\n *\n * @param auth - The {@link Auth} instance.\n * @param nextOrObserver - callback triggered on change.\n * @param error - Deprecated. This callback is never triggered. Errors\n * on signing in/out can be caught in promises returned from\n * sign-in/sign-out functions.\n * @param completed - Deprecated. This callback is never triggered.\n *\n * @public\n */\nexport function onAuthStateChanged(\n  auth: Auth,\n  nextOrObserver: NextOrObserver<User>,\n  error?: ErrorFn,\n  completed?: CompleteFn\n): Unsubscribe {\n  return getModularInstance(auth).onAuthStateChanged(\n    nextOrObserver,\n    error,\n    completed\n  );\n}\n/**\n * Sets the current language to the default device/browser preference.\n *\n * @param auth - The {@link Auth} instance.\n *\n * @public\n */\nexport function useDeviceLanguage(auth: Auth): void {\n  getModularInstance(auth).useDeviceLanguage();\n}\n/**\n * Asynchronously sets the provided user as {@link Auth.currentUser} on the\n * {@link Auth} instance.\n *\n * @remarks\n * A new instance copy of the user provided will be made and set as currentUser.\n *\n * This will trigger {@link onAuthStateChanged} and {@link onIdTokenChanged} listeners\n * like other sign in methods.\n *\n * The operation fails with an error if the user to be updated belongs to a different Firebase\n * project.\n *\n * This method is not supported by {@link Auth} instances created with a\n * {@link @firebase/app#FirebaseServerApp}.\n *\n * @param auth - The {@link Auth} instance.\n * @param user - The new {@link User}.\n *\n * @public\n */\nexport function updateCurrentUser(\n  auth: Auth,\n  user: User | null\n): Promise<void> {\n  return getModularInstance(auth).updateCurrentUser(user);\n}\n/**\n * Signs out the current user.\n *\n * @remarks\n * This method is not supported by {@link Auth} instances created with a\n * {@link @firebase/app#FirebaseServerApp}.\n *\n * @param auth - The {@link Auth} instance.\n *\n * @public\n */\nexport function signOut(auth: Auth): Promise<void> {\n  return getModularInstance(auth).signOut();\n}\n\n/**\n * Revokes the given access token. Currently only supports Apple OAuth access tokens.\n *\n * @param auth - The {@link Auth} instance.\n * @param token - The Apple OAuth access token.\n *\n * @public\n */\nexport function revokeAccessToken(auth: Auth, token: string): Promise<void> {\n  const authInternal = _castAuth(auth);\n  return authInternal.revokeAccessToken(token);\n}\n\nexport { initializeAuth } from './auth/initialize';\nexport { connectAuthEmulator } from './auth/emulator';\n\n// credentials\nexport { AuthCredential } from './credentials';\nexport { EmailAuthCredential } from './credentials/email';\nexport { OAuthCredential } from './credentials/oauth';\nexport { PhoneAuthCredential } from './credentials/phone';\n\n// persistence\nexport { inMemoryPersistence } from './persistence/in_memory';\n\n// providers\nexport { EmailAuthProvider } from './providers/email';\nexport { FacebookAuthProvider } from './providers/facebook';\nexport { CustomParameters } from './providers/federated';\nexport { GoogleAuthProvider } from './providers/google';\nexport { GithubAuthProvider } from './providers/github';\nexport { OAuthProvider, OAuthCredentialOptions } from './providers/oauth';\nexport { SAMLAuthProvider } from './providers/saml';\nexport { TwitterAuthProvider } from './providers/twitter';\n\n// strategies\nexport { signInAnonymously } from './strategies/anonymous';\nexport {\n  signInWithCredential,\n  linkWithCredential,\n  reauthenticateWithCredential\n} from './strategies/credential';\nexport { signInWithCustomToken } from './strategies/custom_token';\nexport {\n  sendPasswordResetEmail,\n  confirmPasswordReset,\n  applyActionCode,\n  checkActionCode,\n  verifyPasswordResetCode,\n  createUserWithEmailAndPassword,\n  signInWithEmailAndPassword\n} from './strategies/email_and_password';\nexport {\n  sendSignInLinkToEmail,\n  isSignInWithEmailLink,\n  signInWithEmailLink\n} from './strategies/email_link';\nexport {\n  fetchSignInMethodsForEmail,\n  sendEmailVerification,\n  verifyBeforeUpdateEmail\n} from './strategies/email';\n\n// core\nexport { ActionCodeURL, parseActionCodeURL } from './action_code_url';\n\n// user\nexport {\n  updateProfile,\n  updateEmail,\n  updatePassword\n} from './user/account_info';\nexport { getIdToken, getIdTokenResult } from './user/id_token_result';\nexport { unlink } from './user/link_unlink';\nexport { getAdditionalUserInfo } from './user/additional_user_info';\n\n// Non-optional user methods.\nexport { reload } from './user/reload';\n/**\n * Deletes and signs out the user.\n *\n * @remarks\n * Important: this is a security-sensitive operation that requires the user to have recently\n * signed in. If this requirement isn't met, ask the user to authenticate again and then call\n * {@link reauthenticateWithCredential}.\n *\n * @param user - The user.\n *\n * @public\n */\nexport async function deleteUser(user: User): Promise<void> {\n  return getModularInstance(user).delete();\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { _registerComponent, registerVersion } from '@firebase/app';\nimport {\n  Component,\n  ComponentType,\n  InstantiationMode\n} from '@firebase/component';\n\nimport { name, version } from '../../../package.json';\nimport { AuthErrorCode } from '../errors';\nimport { _assert } from '../util/assert';\nimport { _getClientVersion, ClientPlatform } from '../util/version';\nimport { _castAuth, AuthImpl, DefaultConfig } from './auth_impl';\nimport { AuthInterop } from './firebase_internal';\nimport { ConfigInternal } from '../../model/auth';\nimport { Dependencies } from '../../model/public_types';\nimport { _initializeAuthInstance } from './initialize';\n\nexport const enum _ComponentName {\n  AUTH = 'auth',\n  AUTH_INTERNAL = 'auth-internal'\n}\n\nfunction getVersionForPlatform(\n  clientPlatform: ClientPlatform\n): string | undefined {\n  switch (clientPlatform) {\n    case ClientPlatform.NODE:\n      return 'node';\n    case ClientPlatform.REACT_NATIVE:\n      return 'rn';\n    case ClientPlatform.WORKER:\n      return 'webworker';\n    case ClientPlatform.CORDOVA:\n      return 'cordova';\n    case ClientPlatform.WEB_EXTENSION:\n      return 'web-extension';\n    default:\n      return undefined;\n  }\n}\n\n/** @internal */\nexport function registerAuth(clientPlatform: ClientPlatform): void {\n  _registerComponent(\n    new Component(\n      _ComponentName.AUTH,\n      (container, { options: deps }: { options?: Dependencies }) => {\n        const app = container.getProvider('app').getImmediate()!;\n        const heartbeatServiceProvider =\n          container.getProvider<'heartbeat'>('heartbeat');\n        const appCheckServiceProvider =\n          container.getProvider<'app-check-internal'>('app-check-internal');\n        const { apiKey, authDomain } = app.options;\n\n        _assert(\n          apiKey && !apiKey.includes(':'),\n          AuthErrorCode.INVALID_API_KEY,\n          { appName: app.name }\n        );\n\n        const config: ConfigInternal = {\n          apiKey,\n          authDomain,\n          clientPlatform,\n          apiHost: DefaultConfig.API_HOST,\n          tokenApiHost: DefaultConfig.TOKEN_API_HOST,\n          apiScheme: DefaultConfig.API_SCHEME,\n          sdkClientVersion: _getClientVersion(clientPlatform)\n        };\n\n        const authInstance = new AuthImpl(\n          app,\n          heartbeatServiceProvider,\n          appCheckServiceProvider,\n          config\n        );\n        _initializeAuthInstance(authInstance, deps);\n\n        return authInstance;\n      },\n      ComponentType.PUBLIC\n    )\n      /**\n       * Auth can only be initialized by explicitly calling getAuth() or initializeAuth()\n       * For why we do this, See go/firebase-next-auth-init\n       */\n      .setInstantiationMode(InstantiationMode.EXPLICIT)\n      /**\n       * Because all firebase products that depend on auth depend on auth-internal directly,\n       * we need to initialize auth-internal after auth is initialized to make it available to other firebase products.\n       */\n      .setInstanceCreatedCallback(\n        (container, _instanceIdentifier, _instance) => {\n          const authInternalProvider = container.getProvider(\n            _ComponentName.AUTH_INTERNAL\n          );\n          authInternalProvider.initialize();\n        }\n      )\n  );\n\n  _registerComponent(\n    new Component(\n      _ComponentName.AUTH_INTERNAL,\n      container => {\n        const auth = _castAuth(\n          container.getProvider(_ComponentName.AUTH).getImmediate()!\n        );\n        return (auth => new AuthInterop(auth))(auth);\n      },\n      ComponentType.PRIVATE\n    ).setInstantiationMode(InstantiationMode.EXPLICIT)\n  );\n\n  registerVersion(name, version, getVersionForPlatform(clientPlatform));\n  // BUILD_TARGET will be replaced by values like esm, cjs, etc during the compilation\n  registerVersion(name, version, '__BUILD_TARGET__');\n}\n","// API Configuration\r\nconst API_PREFIX = 'api';\r\n\r\n// Helper function to construct the base URL properly\r\nconst constructBaseURL = () => {\r\n  const apiUrl = process.env.REACT_APP_API_URL || 'http://localhost:3001';\r\n  \r\n  // If the URL already includes protocol, use it as is\r\n  if (apiUrl.startsWith('http://') || apiUrl.startsWith('https://')) {\r\n    return `${apiUrl}/${API_PREFIX}`;\r\n  }\r\n  \r\n  // If no protocol is specified, add https for production domains\r\n  // and http for localhost\r\n  const protocol = apiUrl.includes('localhost') ? 'http://' : 'https://';\r\n  const finalUrl = `${protocol}${apiUrl}/${API_PREFIX}`;\r\n  \r\n  return finalUrl;\r\n};\r\n\r\nexport const API_CONFIG = {\r\n  API_PREFIX,\r\n  BASE_URL: constructBaseURL(),\r\n  TIMEOUT: 10000, // Reduced timeout since server is always running\r\n  HEADERS: {\r\n    'Content-Type': 'application/json',\r\n  },\r\n} as const;\r\n\r\n// UI Configuration\r\nexport const UI_CONFIG = {\r\n  TABLE_PAGE_SIZE: 20,\r\n  DATE_LOCALE: 'he-IL',\r\n  TIME_ZONE: 'Asia/Jerusalem',\r\n} as const;\r\n\r\n// Feature flags or environment-specific settings\r\nexport const FEATURES = {\r\n  ENABLE_LOGGING: process.env.NODE_ENV === 'development',\r\n} as const;\r\n","import axios, { AxiosInstance, AxiosRequestConfig, AxiosResponse } from 'axios';\r\nimport { getAuth } from 'firebase/auth';\r\nimport { API_CONFIG, FEATURES } from '../config/app.config';\r\n\r\nclass ApiService {\r\n  private api: AxiosInstance;\r\n\r\n  constructor() {\r\n    this.api = axios.create({\r\n      baseURL: API_CONFIG.BASE_URL,\r\n      timeout: API_CONFIG.TIMEOUT,\r\n      headers: API_CONFIG.HEADERS,\r\n    });\r\n\r\n    this.setupInterceptors();\r\n  }\r\n\r\n  private setupInterceptors(): void {\r\n    // Request interceptor\r\n    this.api.interceptors.request.use(\r\n      async (config) => {\r\n        try {\r\n          const auth = getAuth();\r\n          const user = auth.currentUser;\r\n          if (user) {\r\n            const token = await user.getIdToken();\r\n            (config.headers as any).Authorization = `Bearer ${token}`;\r\n          }\r\n        } catch {\r\n          // ignore token retrieval errors\r\n        }\r\n\r\n        if (FEATURES.ENABLE_LOGGING) {\r\n          // console.log(`🚀 API Request: ${config.method?.toUpperCase()} ${config.url}`);\r\n        }\r\n        return config;\r\n      },\r\n      (error) => {\r\n        if (FEATURES.ENABLE_LOGGING) {\r\n          // console.error('❌ Request Error:', error);\r\n        }\r\n        return Promise.reject(error);\r\n      }\r\n    );\r\n\r\n    // Response interceptor\r\n    this.api.interceptors.response.use(\r\n      (response: AxiosResponse) => {\r\n        if (FEATURES.ENABLE_LOGGING) {\r\n          // console.log(`✅ API Response: ${response.status} ${response.config.url}`);\r\n        }\r\n        return response;\r\n      },\r\n      (error) => {\r\n        if (FEATURES.ENABLE_LOGGING) {\r\n          // console.error('❌ Response Error:', error);\r\n        }\r\n\r\n        // Handle authentication errors\r\n        if (error.response?.status === 401) {\r\n          const auth = getAuth();\r\n          if (auth.currentUser) {\r\n            // Token may be expired; optional refresh could be added here\r\n          }\r\n        }\r\n\r\n        return Promise.reject(error);\r\n      }\r\n    );\r\n  }\r\n\r\n  // Generic HTTP methods\r\n  async get<T>(url: string, config?: AxiosRequestConfig): Promise<T> {\r\n    const response = await this.api.get<T>(url, config);\r\n    return response.data;\r\n  }\r\n\r\n  async post<T>(url: string, data?: any, config?: AxiosRequestConfig): Promise<T> {\r\n    const response = await this.api.post<T>(url, data, config);\r\n    return response.data;\r\n  }\r\n\r\n  async put<T>(url: string, data?: any, config?: AxiosRequestConfig): Promise<T> {\r\n    const response = await this.api.put<T>(url, data, config);\r\n    return response.data;\r\n  }\r\n\r\n  async patch<T>(url: string, data?: any, config?: AxiosRequestConfig): Promise<T> {\r\n    const response = await this.api.patch<T>(url, data, config);\r\n    return response.data;\r\n  }\r\n\r\n  async delete<T>(url: string, config?: AxiosRequestConfig): Promise<T> {\r\n    const response = await this.api.delete<T>(url, config);\r\n    return response.data;\r\n  }\r\n\r\n  // Special method for blob responses (PDFs, images, etc.)\r\n  async getBlob(url: string, config?: AxiosRequestConfig): Promise<Blob> {\r\n    const response = await this.api.get(url, { \r\n      ...config, \r\n      responseType: 'blob',\r\n      timeout: 60000 // 60 seconds timeout for blob downloads\r\n    });\r\n    return response.data;\r\n  }\r\n}\r\n\r\n// Export singleton instance\r\nexport const apiService = new ApiService();\r\n","import { apiService } from './api.service';\r\nimport { User, CreateUserRequest } from '../types';\r\n\r\nexport const userService = {\r\n  // Get current user information\r\n  async getCurrentUser(): Promise<any> {\r\n    return apiService.get<any>('/users/me');\r\n  },\r\n\r\n  // Register a new user\r\n  async register(userData: CreateUserRequest): Promise<User> {\r\n    return apiService.post<User>('/users/register', userData);\r\n  },\r\n\r\n  // Get locations for registration (available to all users)\r\n  async getLocationsForRegistration(): Promise<any[]> {\r\n    return apiService.get<any[]>('/users/locations');\r\n  },\r\n\r\n  // Get all users (admin only)\r\n  async getAll(): Promise<User[]> {\r\n    return apiService.get<User[]>('/users');\r\n  },\r\n\r\n  // Create a new user (admin only - different from register)\r\n  async create(userData: CreateUserRequest): Promise<User> {\r\n    return apiService.post<User>('/users', userData);\r\n  },\r\n\r\n  // Update an existing user\r\n  async update(userId: string, userData: Partial<CreateUserRequest>): Promise<User> {\r\n    return apiService.patch<User>(`/users/${userId}`, userData);\r\n  },\r\n\r\n  // Delete a user\r\n  async delete(userId: string): Promise<void> {\r\n    return apiService.delete<void>(`/users/${userId}`);\r\n  },\r\n\r\n  // Delete multiple users\r\n  async deleteMany(ids: string[]): Promise<any> {\r\n    return apiService.delete<any>('/users', { data: { ids } });\r\n  },\r\n\r\n  // Get user by ID\r\n  async getById(userId: string): Promise<User> {\r\n    return apiService.get<User>(`/users/${userId}`);\r\n  },\r\n};\r\n","import { apiService } from './api.service';\r\nimport { Item, CreateItemRequest } from '../types';\r\n\r\nexport const itemService = {\r\n  // Get all items\r\n  async getAll(): Promise<Item[]> {\r\n    return apiService.get<Item[]>('/items');\r\n  },\r\n\r\n  // Get only available items (not currently assigned to active receipts)\r\n  async getAvailableItems(): Promise<Item[]> {\r\n    const response = await apiService.get<{ items: Item[]; total: number; timestamp: string }>('/items/available');\r\n    return response.items || [];\r\n  },\r\n\r\n  // Create a new item\r\n  async create(itemData: CreateItemRequest): Promise<Item> {\r\n    return apiService.post<Item>('/items', itemData);\r\n  },\r\n\r\n  // Update an existing item\r\n  async update(itemId: string, itemData: Partial<CreateItemRequest>): Promise<Item> {\r\n    return apiService.patch<Item>(`/items/${itemId}`, itemData);\r\n  },\r\n\r\n  // Mark item as received\r\n  async markReceived(itemId: string): Promise<void> {\r\n    return apiService.post<void>(`/items/${itemId}/receive`);\r\n  },\r\n\r\n  // Mark item as returned\r\n  async markReturned(itemId: string): Promise<void> {\r\n    return apiService.post<void>(`/items/${itemId}/return`);\r\n  },\r\n\r\n  // Get item by ID\r\n  async getById(itemId: string): Promise<Item> {\r\n    return apiService.get<Item>(`/items/${itemId}`);\r\n  },\r\n\r\n  // Delete an item\r\n  async delete(itemId: string): Promise<void> {\r\n    return apiService.delete<void>(`/items/${itemId}`);\r\n  },\r\n\r\n  // Delete multiple items\r\n  async deleteMany(ids: string[]): Promise<any> {\r\n    return apiService.delete<any>('/items', { data: { ids } });\r\n  },\r\n};\r\n","import { apiService } from './api.service';\r\nimport { Receipt, CreateReceiptRequest, UpdateReceiptRequest, SignReceiptRequest, ReturnReceiptRequest, ReturnItemsRequest, SignPendingReceiptRequest } from '../types';\r\n\r\nexport const receiptService = {\r\n  // Get all receipts\r\n  async getAll(): Promise<Receipt[]> {\r\n    return apiService.get<Receipt[]>('/receipts');\r\n  },\r\n\r\n  // Get receipt by ID\r\n  async getById(receiptId: string): Promise<Receipt> {\r\n    return apiService.get<Receipt>(`/receipts/${receiptId}`);\r\n  },\r\n\r\n  // Create a new receipt (Admin only)\r\n  async create(receiptData: CreateReceiptRequest): Promise<Receipt> {\r\n    return apiService.post<Receipt>('/receipts', receiptData, {\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n    });\r\n  },\r\n\r\n  // Update an existing receipt (Admin only)\r\n  async update(id: string, receiptData: UpdateReceiptRequest): Promise<Receipt> {\r\n    return apiService.patch<Receipt>(`/receipts/${id}`, receiptData, {\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n    });\r\n  },\r\n\r\n  // Delete a receipt (Admin only)\r\n  async delete(id: string): Promise<void> {\r\n    return apiService.delete<void>(`/receipts/${id}`);\r\n  },\r\n\r\n  // Sign a receipt (User can only sign receipts assigned to them)\r\n  async signReceipt(receiptId: string, signatureData: SignReceiptRequest): Promise<Receipt> {\r\n    return apiService.post<Receipt>(`/receipts/${receiptId}/sign`, signatureData, {\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n    });\r\n  },\r\n\r\n  // Get pending receipts (unsigned receipts)\r\n  async getPendingReceipts(): Promise<Receipt[]> {\r\n    const allReceipts = await this.getAll();\r\n    return allReceipts.filter(receipt => !receipt.isSigned);\r\n  },\r\n\r\n  // Get current user's pending receipts\r\n  async getMyPendingReceipts(): Promise<Receipt[]> {\r\n    const allReceipts = await this.getAll();\r\n    // This will need to be filtered on the backend based on current user\r\n    return allReceipts.filter(receipt => !receipt.isSigned);\r\n  },\r\n\r\n  // Get available items for new receipts (admin only)\r\n  // Note: This endpoint might not exist in your backend, you may need to add it\r\n  async getAvailableItems(): Promise<any[]> {\r\n    return apiService.get<any[]>('/items/available');\r\n  },\r\n\r\n  // Sign pending receipt - This is the same as signReceipt\r\n  async signPendingReceipt(receiptId: string, data: SignPendingReceiptRequest): Promise<Receipt> {\r\n    return this.signReceipt(receiptId, { signature: data.signature });\r\n  },\r\n\r\n  // Download receipt PDF\r\n  async downloadReceiptPDF(receiptId: string): Promise<Blob> {\r\n    return apiService.getBlob(`/receipts/${receiptId}`);\r\n  },\r\n\r\n  // Legacy methods for backward compatibility\r\n  async returnItems(returnData: ReturnReceiptRequest): Promise<void> {\r\n    // This functionality might need to be implemented differently\r\n    // depending on your backend requirements\r\n    throw new Error('Return items functionality needs to be implemented based on backend requirements');\r\n  },\r\n\r\n  async returnSelectedItems(returnData: ReturnItemsRequest): Promise<void> {\r\n    // This functionality might need to be implemented differently\r\n    // depending on your backend requirements\r\n    throw new Error('Return selected items functionality needs to be implemented based on backend requirements');\r\n  },\r\n};\r\n","import { apiService } from './api.service';\r\nimport { \r\n  DashboardStatistics, \r\n  CurrentReportingStatusResponse,\r\n  UpdateReportItemsRequest,\r\n  ReportCompletionHistoryResponse,\r\n  UnitDashboardResponse,\r\n  UserDashboardResponse\r\n} from '../types';\r\n\r\nexport const reportService = {\r\n  // Get dashboard statistics\r\n  async getStatistics(): Promise<DashboardStatistics> {\r\n    return apiService.get<DashboardStatistics>('/reports/dashboard');\r\n  },\r\n\r\n  // Get current reporting status\r\n  async getCurrentReportingStatus(): Promise<CurrentReportingStatusResponse> {\r\n    return apiService.get<CurrentReportingStatusResponse>('/reports/current');\r\n  },\r\n\r\n  // Update multiple items reporting status\r\n  async updateReportItems(data: UpdateReportItemsRequest): Promise<void> {\r\n    return apiService.patch<void>('/reports/reportItems', data);\r\n  },\r\n\r\n  // Complete current report cycle (admin only)\r\n  async completeReportCycle(): Promise<void> {\r\n    return apiService.post<void>('/reports/complete', {});\r\n  },\r\n\r\n  // Get report completion history (admin only)\r\n  async getCompletionHistory(page: number = 1, limit: number = 10): Promise<ReportCompletionHistoryResponse> {\r\n    return apiService.get<ReportCompletionHistoryResponse>(`/reports/history?page=${page}&limit=${limit}`);\r\n  },\r\n\r\n  // Download report PDF by ID (admin only)\r\n  async downloadReportPDF(reportId: string): Promise<Blob> {\r\n    return apiService.getBlob(`/reports/download/${reportId}`);\r\n  },\r\n\r\n  // Get dashboard data for specific unit (admin only)\r\n  async getDashboardByUnit(unitId: string): Promise<UnitDashboardResponse> {\r\n    return apiService.get<UnitDashboardResponse>(`/reports/dashboard/${unitId}`);\r\n  },\r\n\r\n  // Get user dashboard data (regular users only)\r\n  async getUserDashboard(): Promise<UserDashboardResponse> {\r\n    return apiService.get<UserDashboardResponse>('/reports/dashboard');\r\n  },\r\n};\r\n","import { apiService } from './api.service';\r\nimport {\r\n  UnitEntity,\r\n  LocationEntity,\r\n  ItemNameEntity,\r\n  AllocationEntity,\r\n  CreateUnitRequest,\r\n  CreateLocationRequest,\r\n  CreateItemNameRequest,\r\n  CreateAllocationRequest,\r\n  UpdateUnitRequest,\r\n  UpdateLocationRequest,\r\n  UpdateItemNameRequest,\r\n  UpdateAllocationRequest,\r\n  BulkDeleteRequest,\r\n  ManagementResponse,\r\n} from '../types';\r\n\r\nclass ManagementService {\r\n  // Unit methods\r\n  async getAllUnits(): Promise<ManagementResponse<UnitEntity[]>> {\r\n    try {\r\n      const response = await apiService.get<UnitEntity[]>('/management/units');\r\n      return {\r\n        success: true,\r\n        data: response,\r\n      };\r\n    } catch (error: any) {\r\n      return {\r\n        success: false,\r\n        error: error.response?.data?.message || error.message || 'שגיאה בטעינת יחידות',\r\n      };\r\n    }\r\n  }\r\n\r\n  async createUnit(data: CreateUnitRequest): Promise<ManagementResponse<UnitEntity>> {\r\n    try {\r\n      const response = await apiService.post<UnitEntity>('/management/units', data);\r\n      return {\r\n        success: true,\r\n        data: response,\r\n      };\r\n    } catch (error: any) {\r\n      const isConflict = error.response?.status === 409;\r\n      return {\r\n        success: false,\r\n        error: error.response?.data?.message || error.message || 'שגיאה ביצירת יחידה',\r\n        isConflict,\r\n      };\r\n    }\r\n  }\r\n\r\n  async updateUnit(id: string, data: UpdateUnitRequest): Promise<ManagementResponse<UnitEntity>> {\r\n    try {\r\n      const response = await apiService.patch<UnitEntity>(`/management/units/${id}`, data);\r\n      return {\r\n        success: true,\r\n        data: response,\r\n      };\r\n    } catch (error: any) {\r\n      const isConflict = error.response?.status === 409;\r\n      return {\r\n        success: false,\r\n        error: error.response?.data?.message || error.message || 'שגיאה בעדכון יחידה',\r\n        isConflict,\r\n      };\r\n    }\r\n  }\r\n\r\n  async deleteUnits(data: BulkDeleteRequest): Promise<ManagementResponse<{ deleted: number; errors: string[] }>> {\r\n    try {\r\n      const response = await apiService.delete<{ deleted: number; errors: string[] }>('/management/units', { data });\r\n      return {\r\n        success: true,\r\n        data: response,\r\n      };\r\n    } catch (error: any) {\r\n      return {\r\n        success: false,\r\n        error: error.response?.data?.message || error.message || 'שגיאה במחיקת יחידות',\r\n      };\r\n    }\r\n  }\r\n\r\n  // Location methods\r\n  async getAllLocations(): Promise<ManagementResponse<LocationEntity[]>> {\r\n    try {\r\n      const response = await apiService.get<LocationEntity[]>('/management/locations');\r\n      return {\r\n        success: true,\r\n        data: response,\r\n      };\r\n    } catch (error: any) {\r\n      return {\r\n        success: false,\r\n        error: error.response?.data?.message || error.message || 'שגיאה בטעינת מיקומים',\r\n      };\r\n    }\r\n  }\r\n\r\n  async createLocation(data: CreateLocationRequest): Promise<ManagementResponse<LocationEntity>> {\r\n    try {\r\n      const response = await apiService.post<LocationEntity>('/management/locations', data);\r\n      return {\r\n        success: true,\r\n        data: response,\r\n      };\r\n    } catch (error: any) {\r\n      const isConflict = error.response?.status === 409;\r\n      return {\r\n        success: false,\r\n        error: error.response?.data?.message || error.message || 'שגיאה ביצירת מיקום',\r\n        isConflict,\r\n      };\r\n    }\r\n  }\r\n\r\n  async updateLocation(id: string, data: UpdateLocationRequest): Promise<ManagementResponse<LocationEntity>> {\r\n    try {\r\n      const response = await apiService.patch<LocationEntity>(`/management/locations/${id}`, data);\r\n      return {\r\n        success: true,\r\n        data: response,\r\n      };\r\n    } catch (error: any) {\r\n      const isConflict = error.response?.status === 409;\r\n      return {\r\n        success: false,\r\n        error: error.response?.data?.message || error.message || 'שגיאה בעדכון מיקום',\r\n        isConflict,\r\n      };\r\n    }\r\n  }\r\n\r\n  async deleteLocations(data: BulkDeleteRequest): Promise<ManagementResponse<{ deleted: number; errors: string[] }>> {\r\n    try {\r\n      const response = await apiService.delete<{ deleted: number; errors: string[] }>('/management/locations', { data });\r\n      return {\r\n        success: true,\r\n        data: response,\r\n      };\r\n    } catch (error: any) {\r\n      return {\r\n        success: false,\r\n        error: error.response?.data?.message || error.message || 'שגיאה במחיקת מיקומים',\r\n      };\r\n    }\r\n  }\r\n\r\n  // Item Name methods\r\n  async getAllItemNames(): Promise<ManagementResponse<ItemNameEntity[]>> {\r\n    try {\r\n      const response = await apiService.get<ItemNameEntity[]>('/management/item-names');\r\n      return {\r\n        success: true,\r\n        data: response,\r\n      };\r\n    } catch (error: any) {\r\n      return {\r\n        success: false,\r\n        error: error.response?.data?.message || error.message || 'שגיאה בטעינת שמות פריטים',\r\n      };\r\n    }\r\n  }\r\n\r\n  async createItemName(data: CreateItemNameRequest): Promise<ManagementResponse<ItemNameEntity>> {\r\n    try {\r\n      const response = await apiService.post<ItemNameEntity>('/management/item-names', data);\r\n      return {\r\n        success: true,\r\n        data: response,\r\n      };\r\n    } catch (error: any) {\r\n      const isConflict = error.response?.status === 409;\r\n      return {\r\n        success: false,\r\n        error: error.response?.data?.message || error.message || 'שגיאה ביצירת שם פריט',\r\n        isConflict,\r\n      };\r\n    }\r\n  }\r\n\r\n  async updateItemName(id: string, data: UpdateItemNameRequest): Promise<ManagementResponse<ItemNameEntity>> {\r\n    try {\r\n      const response = await apiService.patch<ItemNameEntity>(`/management/item-names/${id}`, data);\r\n      return {\r\n        success: true,\r\n        data: response,\r\n      };\r\n    } catch (error: any) {\r\n      const isConflict = error.response?.status === 409;\r\n      return {\r\n        success: false,\r\n        error: error.response?.data?.message || error.message || 'שגיאה בעדכון שם פריט',\r\n        isConflict,\r\n      };\r\n    }\r\n  }\r\n\r\n  async deleteItemNames(data: BulkDeleteRequest): Promise<ManagementResponse<{ deleted: number; errors: string[] }>> {\r\n    try {\r\n      const response = await apiService.delete<{ deleted: number; errors: string[] }>('/management/item-names', { data });\r\n      return {\r\n        success: true,\r\n        data: response,\r\n      };\r\n    } catch (error: any) {\r\n      return {\r\n        success: false,\r\n        error: error.response?.data?.message || error.message || 'שגיאה במחיקת שמות פריטים',\r\n      };\r\n    }\r\n  }\r\n\r\n  // Settings methods\r\n  async getSettings(): Promise<ManagementResponse<{emailNotificationsEnabled: boolean}>> {\r\n    try {\r\n      const response = await apiService.get<{emailNotificationsEnabled: boolean}>('/management/settings');\r\n      return {\r\n        success: true,\r\n        data: response,\r\n      };\r\n    } catch (error: any) {\r\n      return {\r\n        success: false,\r\n        error: error.response?.data?.message || error.message || 'שגיאה בטעינת הגדרות',\r\n      };\r\n    }\r\n  }\r\n\r\n  async updateSettings(data: {emailNotificationsEnabled: boolean}): Promise<ManagementResponse<{emailNotificationsEnabled: boolean}>> {\r\n    try {\r\n      const response = await apiService.patch<{emailNotificationsEnabled: boolean}>('/management/settings', data);\r\n      return {\r\n        success: true,\r\n        data: response,\r\n      };\r\n    } catch (error: any) {\r\n      return {\r\n        success: false,\r\n        error: error.response?.data?.message || error.message || 'שגיאה בעדכון הגדרות',\r\n      };\r\n    }\r\n  }\r\n\r\n  // Notification settings methods\r\n  async getNotificationSettings(): Promise<ManagementResponse<{enabled: boolean; dayOfWeek: number}>> {\r\n    try {\r\n      const response = await apiService.get<{enabled: boolean; dayOfWeek: number}>('/management/notification-settings');\r\n      return {\r\n        success: true,\r\n        data: response,\r\n      };\r\n    } catch (error: any) {\r\n      return {\r\n        success: false,\r\n        error: error.response?.data?.message || error.message || 'שגיאה בטעינת הגדרות התראות',\r\n      };\r\n    }\r\n  }\r\n\r\n  async updateNotificationSettings(data: {enabled: boolean; dayOfWeek: number}): Promise<ManagementResponse<{enabled: boolean; dayOfWeek: number}>> {\r\n    try {\r\n      const response = await apiService.patch<{enabled: boolean; dayOfWeek: number}>('/management/notification-settings', data);\r\n      return {\r\n        success: true,\r\n        data: response,\r\n      };\r\n    } catch (error: any) {\r\n      return {\r\n        success: false,\r\n        error: error.response?.data?.message || error.message || 'שגיאה בעדכון הגדרות התראות',\r\n      };\r\n    }\r\n  }\r\n\r\n  // Allocation methods\r\n  async getAllAllocations(): Promise<ManagementResponse<AllocationEntity[]>> {\r\n    try {\r\n      const response = await apiService.get<AllocationEntity[]>('/management/allocations');\r\n      return {\r\n        success: true,\r\n        data: response,\r\n      };\r\n    } catch (error: any) {\r\n      return {\r\n        success: false,\r\n        error: error.response?.data?.message || error.message || 'שגיאה בטעינת שבצ\"ק',\r\n      };\r\n    }\r\n  }\r\n\r\n  async createAllocation(data: CreateAllocationRequest): Promise<ManagementResponse<AllocationEntity>> {\r\n    try {\r\n      const response = await apiService.post<AllocationEntity>('/management/allocations', data);\r\n      return {\r\n        success: true,\r\n        data: response,\r\n      };\r\n    } catch (error: any) {\r\n      const isConflict = error.response?.status === 409;\r\n      return {\r\n        success: false,\r\n        error: error.response?.data?.message || error.message || 'שגיאה ביצירת שבצ\"ק',\r\n        isConflict,\r\n      };\r\n    }\r\n  }\r\n\r\n  async updateAllocation(id: string, data: UpdateAllocationRequest): Promise<ManagementResponse<AllocationEntity>> {\r\n    try {\r\n      const response = await apiService.patch<AllocationEntity>(`/management/allocations/${id}`, data);\r\n      return {\r\n        success: true,\r\n        data: response,\r\n      };\r\n    } catch (error: any) {\r\n      const isConflict = error.response?.status === 409;\r\n      return {\r\n        success: false,\r\n        error: error.response?.data?.message || error.message || 'שגיאה בעדכון שבצ\"ק',\r\n        isConflict,\r\n      };\r\n    }\r\n  }\r\n\r\n  async deleteAllocations(data: BulkDeleteRequest): Promise<ManagementResponse<{ deleted: boolean; deletedCount: number; message: string }>> {\r\n    try {\r\n      const response = await apiService.delete<{ deleted: boolean; deletedCount: number; message: string }>('/management/allocations', {\r\n        data,\r\n      });\r\n      return {\r\n        success: true,\r\n        data: response,\r\n      };\r\n    } catch (error: any) {\r\n      return {\r\n        success: false,\r\n        error: error.response?.data?.message || error.message || 'שגיאה במחיקת שבצ\"ק',\r\n      };\r\n    }\r\n  }\r\n\r\n  // --- Admin only: Import / Export entire database ---\r\n  async exportDatabase(): Promise<ManagementResponse<any>> {\r\n    try {\r\n      // Use no timeout for export operations as they can take a long time with large datasets\r\n      const response = await apiService.get<any>('/backup/export', { timeout: 0 });\r\n      return {\r\n        success: true,\r\n        data: response,\r\n      };\r\n    } catch (error: any) {\r\n      return {\r\n        success: false,\r\n        error: error.response?.data?.message || error.message || 'שגיאה בייצוא נתונים',\r\n      };\r\n    }\r\n  }\r\n\r\n  // New async export starter: returns process id immediately\r\n  async startExport(): Promise<ManagementResponse<{ id: string }>> {\r\n    try {\r\n      // Server starts export on GET /backup/export and returns an OperationStatus with id\r\n      const response = await apiService.get<{ id?: string; operationId?: string; processId?: string; [k: string]: any }>(\r\n        '/backup/export'\r\n      );\r\n      const id =\r\n        (response as any)?.operationId ||\r\n        (response as any)?.id ||\r\n        (response as any)?.processId ||\r\n        (response as any)?.data?.operationId ||\r\n        (response as any)?.data?.id ||\r\n        (response as any)?.data?.processId;\r\n      if (id) return { success: true, data: { id } };\r\n      return { success: false, error: 'שגיאה בתחילת ייצוא: מזהה תהליך לא התקבל' };\r\n    } catch (error: any) {\r\n      return { success: false, error: error.response?.data?.message || error.message || 'שגיאה בתחילת ייצוא' };\r\n    }\r\n  }\r\n\r\n  async getExportStatus(id: string): Promise<ManagementResponse<{ progress: number; downloadUrl?: string; done?: boolean; result?: any; tables?: any[]; totalStatistics?: any; message?: string; status?: string }>> {\r\n    try {\r\n      const raw = await apiService.get<any>(`/backup/export/status/${id}`);\r\n      const nested = raw?.result?.currentProgress || {};\r\n      const progress =\r\n        typeof raw?.progress === 'number'\r\n          ? raw.progress\r\n          : typeof nested?.overallProgress === 'number'\r\n          ? nested.overallProgress\r\n          : 0;\r\n      const status = raw?.status || nested?.status;\r\n      const done = status === 'completed' || raw?.done === true;\r\n      const downloadUrl = raw?.result?.downloadUrl || raw?.downloadUrl;\r\n      const result = raw?.result;\r\n      const tables = raw?.tables ?? nested?.tables ?? [];\r\n      const totalStatistics = raw?.totalStatistics ?? nested?.totalStatistics;\r\n      const message = raw?.message || raw?.result?.message;\r\n      return { success: true, data: { progress, downloadUrl, done, result, tables, totalStatistics, message, status } };\r\n    } catch (error: any) {\r\n      return { success: false, error: error.response?.data?.message || error.message || 'שגיאה בשליפת סטטוס ייצוא' };\r\n    }\r\n  }\r\n\r\n  async importDatabase(payload: any, override: boolean = false): Promise<ManagementResponse<any>> {\r\n    try {\r\n      const requestBody = { data: payload, isOverride: override };\r\n      // Use no timeout for import operations as they can take a very long time\r\n      const response = await apiService.post<any>('/backup/import', requestBody, { timeout: 0 });\r\n      return {\r\n        success: true,\r\n        data: response,\r\n      };\r\n    } catch (error: any) {\r\n      return {\r\n        success: false,\r\n        error: error.response?.data?.message || error.message || 'שגיאה בייבוא נתונים',\r\n      };\r\n    }\r\n  }\r\n\r\n  // New async import starter: returns process id immediately\r\n  async startImport(payload: any, override: boolean = false): Promise<ManagementResponse<{ id: string }>> {\r\n    try {\r\n      // Server starts import on POST /backup/import and returns an OperationStatus with id\r\n      const requestBody = { isOverride: override, data: payload };\r\n      const response = await apiService.post<any>(\r\n        `/backup/import`,\r\n        requestBody,\r\n        { timeout: 0 }\r\n      );\r\n\r\n      // Enhanced ID extraction with better logging\r\n      console.log('Import response:', response);\r\n      \r\n      // Check if this is a direct import result (synchronous) vs async process start\r\n      const hasImportResultStructure = response && typeof response === 'object' && \r\n        (response.allocation || response.itemName || response.location || response.receipt);\r\n      \r\n      if (hasImportResultStructure) {\r\n        console.log('Server returned direct import results (synchronous import)');\r\n        // Generate a fake ID for compatibility with the polling logic\r\n        const fakeId = `sync-${Date.now()}`;\r\n        \r\n        // Store the result for immediate retrieval in getImportStatus\r\n        (window as any).__tempImportResult = {\r\n          id: fakeId,\r\n          result: response,\r\n          status: 'completed',\r\n          done: true,\r\n          progress: 100\r\n        };\r\n        \r\n        console.log('Generated fake ID for synchronous import:', fakeId);\r\n        return { success: true, data: { id: fakeId } };\r\n      }\r\n      \r\n      // Try normal async ID extraction for async imports\r\n      const extractIdFromNestedResponse = (obj: any, path: string = ''): string | null => {\r\n        if (!obj || typeof obj !== 'object') return null;\r\n        \r\n        // Check direct ID fields\r\n        for (const idField of ['id', 'operationId', 'processId', 'importId']) {\r\n          if (obj[idField]) {\r\n            console.log(`Found ID \"${obj[idField]}\" at path: ${path}.${idField}`);\r\n            return String(obj[idField]);\r\n          }\r\n        }\r\n        \r\n        // Recursively search in nested objects (up to 3 levels deep)\r\n        if (path.split('.').length < 3) {\r\n          for (const key of Object.keys(obj)) {\r\n            if (typeof obj[key] === 'object' && obj[key] !== null) {\r\n              const nestedId = extractIdFromNestedResponse(obj[key], path ? `${path}.${key}` : key);\r\n              if (nestedId) return nestedId;\r\n            }\r\n          }\r\n        }\r\n        \r\n        return null;\r\n      };\r\n\r\n      const id = extractIdFromNestedResponse(response);\r\n\r\n      if (id) {\r\n        console.log('Successfully extracted import ID:', id);\r\n        return { success: true, data: { id } };\r\n      }\r\n\r\n      // Log the full response for debugging\r\n      console.error('No ID found in import response:', JSON.stringify(response, null, 2));\r\n      return { \r\n        success: false, \r\n        error: `שגיאה בתחילת ייבוא: מזהה תהליך לא התקבל. Response: ${JSON.stringify(response)}` \r\n      };\r\n    } catch (error: any) {\r\n      console.error('Import start error:', error);\r\n      return { \r\n        success: false, \r\n        error: error.response?.data?.message || error.message || 'שגיאה בתחילת ייבוא' \r\n      };\r\n    }\r\n  }\r\n\r\n  async getImportStatus(id: string): Promise<ManagementResponse<{ progress: number; done?: boolean; tables?: any[]; totalStatistics?: any; message?: string; status?: string; result?: any }>> {\r\n    try {\r\n      // Check if this is a synchronous import with stored results\r\n      if (id.startsWith('sync-')) {\r\n        const tempResult = (window as any).__tempImportResult;\r\n        if (tempResult && tempResult.id === id) {\r\n          console.log('Returning stored synchronous import result');\r\n          // Clear the temp result after first retrieval\r\n          delete (window as any).__tempImportResult;\r\n          return { \r\n            success: true, \r\n            data: { \r\n              progress: tempResult.progress,\r\n              done: tempResult.done,\r\n              status: tempResult.status,\r\n              result: tempResult.result,\r\n              message: 'ייבוא הושלם בהצלחה',\r\n              tables: [],\r\n              totalStatistics: {}\r\n            } \r\n          };\r\n        }\r\n      }\r\n      \r\n      // Normal async import status check\r\n      const raw = await apiService.get<any>(`/backup/import/status/${id}`);\r\n      const nested = raw?.result?.currentProgress || {};\r\n      const progress =\r\n        typeof raw?.progress === 'number'\r\n          ? raw.progress\r\n          : typeof nested?.overallProgress === 'number'\r\n          ? nested.overallProgress\r\n          : 0;\r\n      const status = raw?.status || nested?.status;\r\n      const done = status === 'completed' || raw?.done === true;\r\n      const tables = raw?.tables ?? nested?.tables ?? [];\r\n      const totalStatistics = raw?.totalStatistics ?? nested?.totalStatistics;\r\n      const message = raw?.message || raw?.result?.message;\r\n      const result = raw?.result;\r\n      return { success: true, data: { progress, done, tables, totalStatistics, message, status, result } };\r\n    } catch (error: any) {\r\n      return { success: false, error: error.response?.data?.message || error.message || 'שגיאה בשליפת סטטוס ייבוא' };\r\n    }\r\n  }\r\n}\r\n\r\nexport const managementService = new ManagementService();\r\nexport default managementService;\r\n","import { UI_CONFIG } from '../config/app.config';\r\n\r\nexport const formatDate = (date: Date): string => {\r\n  return new Intl.DateTimeFormat(UI_CONFIG.DATE_LOCALE, {\r\n    year: 'numeric',\r\n    month: 'long',\r\n    day: 'numeric',\r\n    timeZone: UI_CONFIG.TIME_ZONE,\r\n  }).format(date);\r\n};\r\n\r\nexport const formatDateTime = (date: Date): string => {\r\n  return new Intl.DateTimeFormat(UI_CONFIG.DATE_LOCALE, {\r\n    year: 'numeric',\r\n    month: 'long',\r\n    day: 'numeric',\r\n    hour: '2-digit',\r\n    minute: '2-digit',\r\n    timeZone: UI_CONFIG.TIME_ZONE,\r\n  }).format(date);\r\n};\r\n\r\nexport const formatDateString = (dateString: string): string => {\r\n  if (!dateString) {\r\n    return 'תאריך לא זמין';\r\n  }\r\n  \r\n  const date = new Date(dateString);\r\n  if (isNaN(date.getTime())) {\r\n    return 'תאריך לא תקין';\r\n  }\r\n  \r\n  return formatDate(date);\r\n};\r\n\r\nexport const getCurrentDate = (): string => {\r\n  return formatDate(new Date());\r\n};\r\n","/**\r\n * Utility functions for date formatting\r\n */\r\n\r\n/**\r\n * Formats a timestamp to Hebrew locale date and time string\r\n * @param timestamp - The timestamp to format\r\n * @returns Formatted date and time string in Hebrew locale\r\n */\r\nexport const formatDateTimeHebrew = (timestamp: string | number | Date): string => {\r\n  const date = new Date(timestamp);\r\n  const dateStr = date.toLocaleDateString('he-IL');\r\n  const timeStr = date.toLocaleTimeString('he-IL', { \r\n    hour: '2-digit', \r\n    minute: '2-digit', \r\n    second: '2-digit' \r\n  });\r\n  return `${dateStr} ${timeStr}`;\r\n};","import { Receipt } from '../types';\r\n\r\n/**\r\n * Shared helper functions for receipt operations\r\n */\r\n\r\n/**\r\n * Safely get unit name (prefer receiver unit, fallback to issuer)\r\n */\r\nexport const getReceiptUnit = (receipt: Receipt): string => {\r\n  return receipt.signedBy?.location?.unit?.name || receipt.createdBy?.location?.unit?.name || '—';\r\n};\r\n\r\n/**\r\n * Safely get location name (prefer receiver location, fallback to issuer)\r\n */\r\nexport const getReceiptLocation = (receipt: Receipt): string => {\r\n  return receipt.signedBy?.location?.name || receipt.createdBy?.location?.name || '—';\r\n};\r\n\r\n/**\r\n * Check if receipt items match a search term\r\n */\r\nexport const receiptItemsMatchSearch = (receipt: Receipt, searchTerm: string): boolean => {\r\n  return receipt.receiptItems?.some(receiptItem => {\r\n    const itemName = (receiptItem.item?.itemName?.name?.toLowerCase() || '').normalize('NFC');\r\n    const itemId = (receiptItem.item?.idNumber?.toLowerCase() || '').normalize('NFC');\r\n    return itemName.includes(searchTerm) || itemId.includes(searchTerm);\r\n  }) || false;\r\n};\r\n\r\n/**\r\n * Generic sort comparison function for receipt fields\r\n */\r\nexport const compareReceiptValues = (aVal: any, bVal: any, direction: 'asc' | 'desc'): number => {\r\n  if (typeof aVal === 'string' && typeof bVal === 'string') {\r\n    const cmp = aVal.localeCompare(bVal, 'he');\r\n    return direction === 'asc' ? cmp : -cmp;\r\n  }\r\n  if (aVal < bVal) return direction === 'asc' ? -1 : 1;\r\n  if (aVal > bVal) return direction === 'asc' ? 1 : -1;\r\n  return 0;\r\n};","export const validatePhoneNumber = (phone: string): boolean => {\r\n  const phoneRegex = /^[0-9]{10}$/;\r\n  return phoneRegex.test(phone.replace(/\\D/g, ''));\r\n};\r\n\r\nexport const validatePersonalNumber = (personalNumber: number): boolean => {\r\n  // Validation for personal number - must be exactly 7 digits\r\n  const numberStr = personalNumber.toString();\r\n  return numberStr.length === 7 && /^[0-9]{7}$/.test(numberStr);\r\n};\r\n\r\nexport const validateRequired = (value: string): boolean => {\r\n  return value.trim().length > 0;\r\n};\r\n\r\nexport const sanitizeInput = (input: string): string => {\r\n  return input.trim().replace(/\\s+/g, ' ');\r\n};\r\n","import { UI_CONFIG } from '../config/app.config';\r\n\r\nexport const paginate = <T>(\r\n  items: T[],\r\n  currentPage: number,\r\n  pageSize: number = UI_CONFIG.TABLE_PAGE_SIZE\r\n): {\r\n  paginatedItems: T[];\r\n  totalPages: number;\r\n  startIndex: number;\r\n  endIndex: number;\r\n} => {\r\n  // Safety check: ensure items is a valid array\r\n  if (!items || !Array.isArray(items)) {\r\n    return {\r\n      paginatedItems: [],\r\n      totalPages: 0,\r\n      startIndex: 0,\r\n      endIndex: 0,\r\n    };\r\n  }\r\n\r\n  const totalPages = Math.ceil(items.length / pageSize);\r\n  const startIndex = (currentPage - 1) * pageSize;\r\n  const endIndex = Math.min(startIndex + pageSize, items.length);\r\n  const paginatedItems = items.slice(startIndex, endIndex);\r\n\r\n  return {\r\n    paginatedItems,\r\n    totalPages,\r\n    startIndex,\r\n    endIndex,\r\n  };\r\n};\r\n\r\nexport const generatePageNumbers = (currentPage: number, totalPages: number): number[] => {\r\n  const pages: number[] = [];\r\n  \r\n  // If total pages is small, show all\r\n  if (totalPages <= 7) {\r\n    for (let i = 1; i <= totalPages; i++) {\r\n      pages.push(i);\r\n    }\r\n    return pages;\r\n  }\r\n  \r\n  // Always include current page\r\n  pages.push(currentPage);\r\n  \r\n  // Add pages around current page\r\n  const delta = 2; // Number of pages to show on each side of current page\r\n  \r\n  for (let i = Math.max(1, currentPage - delta); i <= Math.min(totalPages, currentPage + delta); i++) {\r\n    if (!pages.includes(i)) {\r\n      pages.push(i);\r\n    }\r\n  }\r\n  \r\n  // Sort pages\r\n  pages.sort((a, b) => a - b);\r\n  \r\n  return pages;\r\n};\r\n","import { AxiosError } from 'axios';\r\n\r\nexport interface ApiError {\r\n  status: number;\r\n  message: string;\r\n  isConflict: boolean;\r\n  isValidation: boolean;\r\n}\r\n\r\nexport interface BulkDeleteError {\r\n  deleted: boolean;\r\n  deletedCount: number;\r\n  message: string;\r\n  errors: string[];\r\n}\r\n\r\n/**\r\n * Extracts meaningful error information from API responses\r\n */\r\nexport const extractApiError = (error: unknown): ApiError => {\r\n  if (error && typeof error === 'object' && 'response' in error) {\r\n    const axiosError = error as AxiosError;\r\n    const status = axiosError.response?.status || 500;\r\n    \r\n    let message = 'שגיאה לא צפויה';\r\n    \r\n    // Handle specific status codes\r\n    switch (status) {\r\n      case 409:\r\n        message = getConflictMessage(axiosError);\r\n        break;\r\n      case 400:\r\n        message = getValidationMessage(axiosError);\r\n        break;\r\n      case 403:\r\n        message = getForbiddenMessage(axiosError);\r\n        break;\r\n      case 404:\r\n        message = 'הפריט לא נמצא';\r\n        break;\r\n      case 500:\r\n        message = 'שגיאת שרת פנימית';\r\n        break;\r\n      default:\r\n        const responseData = axiosError.response?.data as any;\r\n        message = responseData?.message || axiosError.message || 'שגיאה לא צפויה';\r\n    }\r\n    \r\n    return {\r\n      status,\r\n      message,\r\n      isConflict: status === 409 || status === 403,\r\n      isValidation: status === 400,\r\n    };\r\n  }\r\n  \r\n  // Fallback for non-HTTP errors\r\n  return {\r\n    status: 500,\r\n    message: error instanceof Error ? error.message : 'שגיאה לא צפויה',\r\n    isConflict: false,\r\n    isValidation: false,\r\n  };\r\n};\r\n\r\n/**\r\n * Gets user-friendly message for 409 Conflict errors\r\n */\r\nconst getConflictMessage = (error: AxiosError): string => {\r\n  const url = error.config?.url || '';\r\n  const method = error.config?.method?.toUpperCase() || '';\r\n  \r\n  // Check if it's a delete operation\r\n  if (method === 'DELETE') {\r\n    if (url.includes('/users/')) {\r\n      return 'לא ניתן למחוק משתמש זה כיוון שהוא מקושר לקבלות פעילות. יש להחזיר תחילה את כל הפריטים המוקצים למשתמש זה.';\r\n    } else if (url.includes('/items/')) {\r\n      return 'לא ניתן למחוק פריט זה כיוון שהוא מוקצה כרגע למשתמש. יש להחזיר תחילה את הפריט או לבטל את הקצאתו.';\r\n    }\r\n  }\r\n  \r\n  // Check server response for specific conflict messages\r\n  const responseData = error.response?.data as any;\r\n  if (responseData?.message) {\r\n    // Translate common server messages to Hebrew\r\n    const serverMessage = responseData.message.toLowerCase();\r\n    \r\n    if (serverMessage.includes('user') && serverMessage.includes('assigned')) {\r\n      return 'המשתמש מקושר לפריטים פעילים ולא ניתן למחוק אותו';\r\n    }\r\n    \r\n    if (serverMessage.includes('item') && serverMessage.includes('assigned')) {\r\n      return 'הפריט מוקצה כרגע ולא ניתן למחוק אותו';\r\n    }\r\n    \r\n    if (serverMessage.includes('receipt') && serverMessage.includes('active')) {\r\n      return 'קיימות קבלות פעילות המונעות מחיקה';\r\n    }\r\n  }\r\n  \r\n  // Generic conflict message\r\n  return 'הפעולה נכשלה בגלל התנגשות נתונים. ייתכן שהפריט מקושר לנתונים אחרים במערכת.';\r\n};\r\n\r\n// New: translate 403 Forbidden to friendly Hebrew\r\nconst getForbiddenMessage = (error: AxiosError): string => {\r\n  const responseData = error.response?.data as any;\r\n  const raw = typeof responseData?.message === 'string' ? responseData.message : '';\r\n  const m = raw.toLowerCase();\r\n\r\n  if (m.includes('cannot update an item that is part of a signed receipt')) {\r\n    return 'לא ניתן לעדכן פריט שהוא חלק מקבלה חתומה';\r\n  }\r\n  if (m.includes('forbidden') || m.includes('not allowed')) {\r\n    return 'אין הרשאה לבצע פעולה זו';\r\n  }\r\n  // Fallback to server message if provided\r\n  return raw || 'פעולה אסורה';\r\n};\r\n\r\n/**\r\n * Gets user-friendly message for 400 Bad Request errors\r\n */\r\nconst getValidationMessage = (error: AxiosError): string => {\r\n  const responseData = error.response?.data as any;\r\n  \r\n  if (responseData?.message) {\r\n    return responseData.message;\r\n  }\r\n  \r\n  if (responseData?.errors && Array.isArray(responseData.errors)) {\r\n    return responseData.errors.join(', ');\r\n  }\r\n  \r\n  return 'נתונים לא תקינים';\r\n};\r\n\r\n/**\r\n * Creates a user-friendly conflict resolution message\r\n */\r\nexport const getConflictResolutionMessage = (type: 'user' | 'item'): string => {\r\n  if (type === 'user') {\r\n    return `\r\nפתרונות אפשריים:\r\n• החזר את כל הפריטים המוקצים למשתמש זה\r\n• בטל את הקצאת הפריטים דרך מסך הקבלות\r\n• מחק תחילה את הקבלות הפעילות של המשתמש\r\n    `.trim();\r\n  } else {\r\n    return `\r\nפתרונות אפשריים:\r\n• החזר את הפריט דרך מסך הקבלות\r\n• בטל את הקצאת הפריט למשתמש\r\n• מחק את הקבלה המכילה את הפריט\r\n    `.trim();\r\n  }\r\n};\r\n\r\n/**\r\n * Extracts bulk delete error information from API responses\r\n */\r\nexport const extractBulkDeleteError = (error: unknown): { isBulkError: boolean; bulkError?: BulkDeleteError; apiError?: ApiError } => {\r\n  if (error && typeof error === 'object' && 'response' in error) {\r\n    const axiosError = error as AxiosError;\r\n    const responseData = axiosError.response?.data as any;\r\n    \r\n    // Check if it's a bulk delete error response (now returns 200 OK with error details)\r\n    if (responseData && \r\n        typeof responseData.deleted === 'boolean' && \r\n        typeof responseData.deletedCount === 'number' && \r\n        responseData.message && \r\n        Array.isArray(responseData.errors)) {\r\n      \r\n      return {\r\n        isBulkError: true,\r\n        bulkError: {\r\n          deleted: responseData.deleted,\r\n          deletedCount: responseData.deletedCount,\r\n          message: responseData.message,\r\n          errors: responseData.errors\r\n        }\r\n      };\r\n    }\r\n  }\r\n  \r\n  // Fall back to regular API error extraction\r\n  return {\r\n    isBulkError: false,\r\n    apiError: extractApiError(error)\r\n  };\r\n};\r\n\r\n/**\r\n * Extracts bulk delete information from successful API responses (200 OK)\r\n */\r\nexport const extractBulkDeleteResponse = (responseData: any): { \r\n  isSuccess: boolean; \r\n  hasConflicts: boolean; \r\n  bulkResult?: BulkDeleteError \r\n} => {\r\n  // Check if it's a bulk delete response structure\r\n  if (responseData && \r\n      typeof responseData.deleted === 'boolean' && \r\n      typeof responseData.deletedCount === 'number' && \r\n      responseData.message && \r\n      Array.isArray(responseData.errors)) {\r\n    \r\n    return {\r\n      isSuccess: responseData.deleted && responseData.errors.length === 0,\r\n      hasConflicts: !responseData.deleted || responseData.errors.length > 0,\r\n      bulkResult: {\r\n        deleted: responseData.deleted,\r\n        deletedCount: responseData.deletedCount,\r\n        message: responseData.message,\r\n        errors: responseData.errors\r\n      }\r\n    };\r\n  }\r\n  \r\n  // Not a bulk delete response, assume success\r\n  return {\r\n    isSuccess: true,\r\n    hasConflicts: false\r\n  };\r\n};\r\n","import { useState, useEffect } from 'react';\r\nimport { userService } from '../services';\r\nimport { User, CreateUserRequest } from '../types';\r\nimport { extractApiError, extractBulkDeleteResponse } from '../utils';\r\n\r\nexport const useUsers = () => {\r\n  const [users, setUsers] = useState<User[]>([]);\r\n  const [loading, setLoading] = useState<boolean>(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  const fetchUsers = async () => {\r\n    try {\r\n      setLoading(true);\r\n      setError(null);\r\n      const data = await userService.getAll();\r\n      setUsers(Array.isArray(data) ? data : []);\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : 'Failed to fetch users');\r\n      setUsers([]); // Ensure empty array on error\r\n      // Removed console.error\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const createUser = async (userData: CreateUserRequest): Promise<{ success: boolean; error?: { status: number; message: string } }> => {\r\n    try {\r\n      setError(null);\r\n      await userService.create(userData);\r\n      await fetchUsers(); // Refresh the list\r\n      return { success: true };\r\n    } catch (err) {\r\n      const apiError = extractApiError(err);\r\n      setError(apiError.message);\r\n      // Removed console.error\r\n      \r\n      // Return detailed error information for conflict handling\r\n      if (apiError.status === 409) {\r\n        return { \r\n          success: false, \r\n          error: { \r\n            status: 409, \r\n            message: apiError.message \r\n          } \r\n        };\r\n      }\r\n      \r\n      return { success: false };\r\n    }\r\n  };\r\n\r\n  const updateUser = async (userId: string, userData: Partial<CreateUserRequest>): Promise<{ success: boolean; error?: { status: number; message: string } }> => {\r\n    try {\r\n      setError(null);\r\n      await userService.update(userId, userData);\r\n      await fetchUsers(); // Refresh the list\r\n      return { success: true };\r\n    } catch (err) {\r\n      const apiError = extractApiError(err);\r\n      setError(apiError.message);\r\n      // Removed console.error\r\n      \r\n      // Return detailed error information for conflict handling\r\n      if (apiError.status === 409) {\r\n        return { \r\n          success: false, \r\n          error: { \r\n            status: 409, \r\n            message: apiError.message \r\n          } \r\n        };\r\n      }\r\n      \r\n      // Return detailed error information for forbidden actions (like last admin)\r\n      if (apiError.status === 403) {\r\n        return { \r\n          success: false, \r\n          error: { \r\n            status: 403, \r\n            message: apiError.message \r\n          } \r\n        };\r\n      }\r\n      \r\n      return { success: false };\r\n    }\r\n  };\r\n\r\n  const deleteManyUsers = async (userIds: string[]): Promise<{ \r\n    success: boolean; \r\n    error?: string; \r\n    isConflict?: boolean;\r\n    bulkError?: { \r\n      deletedCount: number; \r\n      errors: string[]; \r\n      message: string; \r\n    } \r\n  }> => {\r\n    try {\r\n      setError(null);\r\n      const response = await userService.deleteMany(userIds);\r\n      \r\n      // Check if response contains bulk delete information\r\n      const { isSuccess, hasConflicts, bulkResult } = extractBulkDeleteResponse(response);\r\n      \r\n      if (isSuccess) {\r\n        await fetchUsers(); // Refresh the list\r\n        return { success: true };\r\n      } else if (hasConflicts && bulkResult) {\r\n        // Handle bulk delete conflicts (still refresh to show what was deleted)\r\n        await fetchUsers();\r\n        return { \r\n          success: false, \r\n          error: bulkResult.message,\r\n          isConflict: true,\r\n          bulkError: {\r\n            deletedCount: bulkResult.deletedCount,\r\n            errors: bulkResult.errors,\r\n            message: bulkResult.message\r\n          }\r\n        };\r\n      } else {\r\n        // Unknown response format\r\n        await fetchUsers();\r\n        return { \r\n          success: false, \r\n          error: 'תגובה לא צפויה מהשרת'\r\n        };\r\n      }\r\n    } catch (err) {\r\n      // Handle actual HTTP errors\r\n      const apiError = extractApiError(err);\r\n      \r\n      if (!apiError.isConflict) {\r\n        setError(apiError.message);\r\n      }\r\n      \r\n      // Removed console.error\r\n      return { \r\n        success: false, \r\n        error: apiError.message,\r\n        isConflict: apiError.isConflict\r\n      };\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchUsers();\r\n  }, []);\r\n\r\n  return {\r\n    users,\r\n    loading,\r\n    error,\r\n    refetch: fetchUsers,\r\n    createUser,\r\n    updateUser,\r\n    deleteManyUsers,\r\n  };\r\n};\r\n","import { useState, useEffect } from 'react';\r\nimport { itemService } from '../services';\r\nimport { Item, CreateItemRequest } from '../types';\r\nimport { extractApiError, extractBulkDeleteResponse } from '../utils';\r\n\r\nexport const useItems = () => {\r\n  const [items, setItems] = useState<Item[]>([]);\r\n  const [availableItems, setAvailableItems] = useState<Item[]>([]);\r\n  const [loading, setLoading] = useState<boolean>(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  const fetchItems = async () => {\r\n    try {\r\n      setLoading(true);\r\n      setError(null);\r\n      const data = await itemService.getAll();\r\n      setItems(Array.isArray(data) ? data : []);\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : 'Failed to fetch items');\r\n      setItems([]); // Ensure empty array on error\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const fetchAvailableItems = async () => {\r\n    try {\r\n      setError(null);\r\n      const data = await itemService.getAvailableItems();\r\n      setAvailableItems(Array.isArray(data) ? data : []);\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : 'Failed to fetch available items');\r\n      setAvailableItems([]); // Ensure empty array on error\r\n    }\r\n  };\r\n\r\n  const createItem = async (itemData: CreateItemRequest): Promise<{ success: boolean; error?: string; isConflict?: boolean }> => {\r\n    try {\r\n      setError(null);\r\n      await itemService.create(itemData);\r\n      await fetchItems(); // Refresh the list\r\n      return { success: true };\r\n    } catch (err) {\r\n      const apiError = extractApiError(err);\r\n      // Don't set general error state for conflicts - let the component handle it\r\n      if (!apiError.isConflict) {\r\n        setError(apiError.message);\r\n      }\r\n      return { \r\n        success: false, \r\n        error: apiError.message,\r\n        isConflict: apiError.isConflict\r\n      };\r\n    }\r\n  };\r\n\r\n  const updateItem = async (itemId: string, itemData: Partial<CreateItemRequest>): Promise<{ success: boolean; error?: string; isConflict?: boolean }> => {\r\n    try {\r\n      setError(null);\r\n      await itemService.update(itemId, itemData);\r\n      await fetchItems(); // Refresh the list\r\n      return { success: true };\r\n    } catch (err) {\r\n      const apiError = extractApiError(err);\r\n      // Don't set general error state for conflicts - let the component handle it\r\n      if (!apiError.isConflict) {\r\n        setError(apiError.message);\r\n      }\r\n      return { \r\n        success: false, \r\n        error: apiError.message,\r\n        isConflict: apiError.isConflict\r\n      };\r\n    }\r\n  };\r\n\r\n  const markItemReceived = async (itemId: string): Promise<boolean> => {\r\n    try {\r\n      setError(null);\r\n      await itemService.markReceived(itemId);\r\n      await fetchItems(); // Refresh the list\r\n      return true;\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : 'Failed to mark item as received');\r\n      return false;\r\n    }\r\n  };\r\n\r\n  const markItemReturned = async (itemId: string): Promise<boolean> => {\r\n    try {\r\n      setError(null);\r\n      await itemService.markReturned(itemId);\r\n      await fetchItems(); // Refresh the list\r\n      return true;\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : 'Failed to mark item as returned');\r\n      return false;\r\n    }\r\n  };\r\n\r\n  const deleteItem = async (itemId: string): Promise<{ success: boolean; error?: string; isConflict?: boolean }> => {\r\n    try {\r\n      setError(null);\r\n      await itemService.delete(itemId);\r\n      await fetchItems(); // Refresh the list\r\n      return { success: true };\r\n    } catch (err) {\r\n      const apiError = extractApiError(err);\r\n      \r\n      // Don't set general error state for conflicts - let the component handle it\r\n      if (!apiError.isConflict) {\r\n        setError(apiError.message);\r\n      }\r\n      \r\n      return { \r\n        success: false, \r\n        error: apiError.message,\r\n        isConflict: apiError.isConflict\r\n      };\r\n    }\r\n  };\r\n\r\n  const deleteManyItems = async (itemIds: string[]): Promise<{ \r\n    success: boolean; \r\n    error?: string; \r\n    isConflict?: boolean;\r\n    bulkError?: { \r\n      deletedCount: number; \r\n      errors: string[]; \r\n      message: string; \r\n    } \r\n  }> => {\r\n    try {\r\n      setError(null);\r\n      const response = await itemService.deleteMany(itemIds);\r\n      \r\n      // Check if response contains bulk delete information\r\n      const { isSuccess, hasConflicts, bulkResult } = extractBulkDeleteResponse(response);\r\n      \r\n      if (isSuccess) {\r\n        await fetchItems(); // Refresh the list\r\n        return { success: true };\r\n      } else if (hasConflicts && bulkResult) {\r\n        // Handle bulk delete conflicts (still refresh to show what was deleted)\r\n        await fetchItems();\r\n        return { \r\n          success: false, \r\n          error: bulkResult.message,\r\n          isConflict: true,\r\n          bulkError: {\r\n            deletedCount: bulkResult.deletedCount,\r\n            errors: bulkResult.errors,\r\n            message: bulkResult.message\r\n          }\r\n        };\r\n      } else {\r\n        // Unknown response format\r\n        await fetchItems();\r\n        return { \r\n          success: false, \r\n          error: 'תגובה לא צפויה מהשרת'\r\n        };\r\n      }\r\n    } catch (err) {\r\n      // Handle actual HTTP errors\r\n      const apiError = extractApiError(err);\r\n      \r\n      if (!apiError.isConflict) {\r\n        setError(apiError.message);\r\n      }\r\n      \r\n      return { \r\n        success: false, \r\n        error: apiError.message,\r\n        isConflict: apiError.isConflict\r\n      };\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchItems();\r\n  }, []);\r\n\r\n  return {\r\n    items,\r\n    availableItems,\r\n    loading,\r\n    error,\r\n    refetch: fetchItems,\r\n    refetchAvailableItems: fetchAvailableItems,\r\n    createItem,\r\n    updateItem,\r\n    deleteItem,\r\n    deleteManyItems,\r\n    markItemReceived,\r\n    markItemReturned,\r\n  };\r\n};\r\n","import { useState, useEffect, useCallback } from 'react';\r\nimport { reportService } from '../services';\r\nimport { \r\n  DashboardStatistics, \r\n  CurrentReportingStatusResponse,\r\n  UpdateReportItemsRequest,\r\n  ReportCompletionHistoryResponse\r\n} from '../types';\r\n\r\n// New simplified hook for reports using the new API\r\nexport const useReports = () => {\r\n  const [currentStatus, setCurrentStatus] = useState<CurrentReportingStatusResponse | null>(null);\r\n  const [loading, setLoading] = useState<boolean>(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  const fetchCurrentStatus = async () => {\r\n    try {\r\n      setLoading(true);\r\n      setError(null);\r\n      const data = await reportService.getCurrentReportingStatus();\r\n      setCurrentStatus(data);\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : 'Failed to fetch current reporting status');\r\n      setCurrentStatus(null);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const updateReportItems = async (items: { itemId: string; notes?: string }[]): Promise<boolean> => {\r\n    try {\r\n      setError(null);\r\n      const request: UpdateReportItemsRequest = { items };\r\n      await reportService.updateReportItems(request);\r\n      // Refetch the current status after update\r\n      await fetchCurrentStatus();\r\n      return true;\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : 'Failed to update report items');\r\n      return false;\r\n    }\r\n  };\r\n\r\n  const completeReportCycle = async (): Promise<boolean> => {\r\n    try {\r\n      setError(null);\r\n      await reportService.completeReportCycle();\r\n      // Refetch the current status after completion\r\n      await fetchCurrentStatus();\r\n      return true;\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : 'Failed to complete report cycle');\r\n      return false;\r\n    }\r\n  };\r\n\r\n  const toggleReportStatus = (itemId: string) => {\r\n    if (!currentStatus) return;\r\n    \r\n    setCurrentStatus(prev => {\r\n      if (!prev) return prev;\r\n      return {\r\n        ...prev,\r\n        items: prev.items.map(item =>\r\n          item.id === itemId ? { ...item, isReported: !item.isReported } : item\r\n        ),\r\n        reportedItems: prev.items.map(item =>\r\n          item.id === itemId ? { ...item, isReported: !item.isReported } : item\r\n        ).filter(item => item.isReported).length\r\n      };\r\n    });\r\n  };\r\n\r\n  const setReportStatusBulk = (itemIds: string[], status: boolean) => {\r\n    if (!currentStatus) return;\r\n    \r\n    setCurrentStatus(prev => {\r\n      if (!prev) return prev;\r\n      const updatedItems = prev.items.map(item =>\r\n        itemIds.includes(item.id) ? { ...item, isReported: status } : item\r\n      );\r\n      return {\r\n        ...prev,\r\n        items: updatedItems,\r\n        reportedItems: updatedItems.filter(item => item.isReported).length\r\n      };\r\n    });\r\n  };\r\n\r\n  const updateItemNotes = (itemId: string, notes: string) => {\r\n    if (!currentStatus) return;\r\n    \r\n    setCurrentStatus(prev => {\r\n      if (!prev) return prev;\r\n      return {\r\n        ...prev,\r\n        items: prev.items.map(item =>\r\n          item.id === itemId ? { ...item, notes } : item\r\n        )\r\n      };\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchCurrentStatus();\r\n  }, []);\r\n\r\n  return {\r\n    currentStatus,\r\n    loading,\r\n    error,\r\n    refetch: fetchCurrentStatus,\r\n    updateReportItems,\r\n    completeReportCycle,\r\n    toggleReportStatus,\r\n    setReportStatusBulk,\r\n    updateItemNotes,\r\n  };\r\n};\r\n\r\n// Legacy hook for backward compatibility - maps new API to old structure\r\nexport const useDailyReports = () => {\r\n  const { \r\n    currentStatus, \r\n    loading, \r\n    error, \r\n    refetch, \r\n    updateReportItems, \r\n    completeReportCycle, \r\n    toggleReportStatus, \r\n    setReportStatusBulk, \r\n    updateItemNotes \r\n  } = useReports();\r\n\r\n  // Map new structure to legacy structure\r\n  const dailyReportData = currentStatus ? {\r\n    status: currentStatus.status,\r\n    items: currentStatus.items,\r\n    userInfo: currentStatus.userInfo\r\n  } : null;\r\n\r\n  const createDailyReport = async (): Promise<boolean> => {\r\n    // Not needed in new API - reports are automatically managed\r\n    return false;\r\n  };\r\n\r\n  const updateDailyReport = async (id: string, data: any): Promise<boolean> => {\r\n    // Convert legacy update format to new format\r\n    const items = data.reportItems?.map((item: any) => ({\r\n      itemId: item.itemId,\r\n      notes: item.notes\r\n    })) || [];\r\n    \r\n    return updateReportItems(items);\r\n  };\r\n\r\n  const completeDailyReport = async (): Promise<boolean> => {\r\n    return completeReportCycle();\r\n  };\r\n\r\n  return {\r\n    dailyReportData,\r\n    loading,\r\n    error,\r\n    refetch,\r\n    createDailyReport,\r\n    updateDailyReport,\r\n    completeDailyReport,\r\n    toggleReportStatus,\r\n    setReportStatusBulk,\r\n    updateItemNotes,\r\n  };\r\n};\r\n\r\n// Hook for report completion history\r\nexport const useReportHistory = () => {\r\n  const [history, setHistory] = useState<ReportCompletionHistoryResponse | null>(null);\r\n  const [loading, setLoading] = useState<boolean>(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  const fetchHistory = useCallback(async (page: number = 1, limit: number = 10) => {\r\n    try {\r\n      setLoading(true);\r\n      setError(null);\r\n      const data = await reportService.getCompletionHistory(page, limit);\r\n      \r\n      // Ensure the response has the expected structure\r\n      if (data && typeof data === 'object') {\r\n        // Server returns 'completions' - store as is\r\n        setHistory(data);\r\n      } else {\r\n        // If data is not in expected format, set empty structure\r\n        setHistory({\r\n          completions: [],\r\n          pagination: { page: 1, limit: 10, total: 0, pages: 0 }\r\n        });\r\n      }\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : 'Failed to fetch report completion history');\r\n      setHistory({\r\n        completions: [],\r\n        pagination: { page: 1, limit: 10, total: 0, pages: 0 }\r\n      });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, []);\r\n\r\n  return {\r\n    history,\r\n    loading,\r\n    error,\r\n    fetchHistory,\r\n  };\r\n};\r\n\r\n// Legacy hook for backward compatibility\r\nexport const useDailyReportHistory = () => {\r\n  const { history, loading, error, fetchHistory } = useReportHistory();\r\n\r\n  // Map new structure to legacy structure for compatibility\r\n  const legacyHistory = history && Array.isArray(history.completions) ? {\r\n    reports: history.completions.map((completion: any) => ({\r\n      id: completion.id,\r\n      createdById: completion.completedById, // Use completedById since that's what we have\r\n      completedAt: completion.completedAt,\r\n      completedById: completion.completedById,\r\n      isActive: false,\r\n      isCompleted: true, // All items in history are completed\r\n      totalItems: completion.totalItems,\r\n      reportedItems: completion.reportedItems,\r\n      createdAt: completion.completedAt, // Use completedAt as createdAt since we don't have createdAt\r\n      updatedAt: completion.completedAt,\r\n      createdBy: completion.completedBy, // Use completedBy as createdBy since we don't have createdBy\r\n      completedBy: completion.completedBy,\r\n      downloadUrl: completion.downloadUrl,\r\n    })),\r\n    pagination: history.pagination || { page: 1, limit: 10, total: 0, pages: 0 }\r\n  } : {\r\n    reports: [],\r\n    pagination: { page: 1, limit: 10, total: 0, pages: 0 }\r\n  };\r\n\r\n  const getDailyReportById = useCallback(async (id: string) => {\r\n    // This functionality is not available in the new API\r\n    // Return null for compatibility\r\n    return null;\r\n  }, []);\r\n\r\n  return {\r\n    history: legacyHistory,\r\n    loading,\r\n    error,\r\n    fetchHistory,\r\n    getDailyReportById,\r\n  };\r\n};\r\n\r\nexport const useDashboardStats = () => {\r\n  const [stats, setStats] = useState<DashboardStatistics | null>(null);\r\n  const [loading, setLoading] = useState<boolean>(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  const fetchStats = async () => {\r\n    try {\r\n      setLoading(true);\r\n      setError(null);\r\n      const data = await reportService.getStatistics();\r\n      setStats(data);\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : 'Failed to fetch statistics');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchStats();\r\n  }, []);\r\n\r\n  return {\r\n    stats,\r\n    loading,\r\n    error,\r\n  };\r\n};\r\n","import { useState, useEffect, useCallback } from 'react';\r\nimport { Receipt, CreateReceiptRequest, UpdateReceiptRequest, ReturnReceiptRequest, ReturnItemsRequest, SignPendingReceiptRequest } from '../types';\r\nimport { receiptService } from '../services';\r\n\r\nexport const useReceipts = () => {\r\n  const [receipts, setReceipts] = useState<Receipt[]>([]);\r\n  const [pendingReceipts, setPendingReceipts] = useState<Receipt[]>([]); // Changed from PendingReceipt[] to Receipt[]\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  const fetchReceipts = useCallback(async () => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const data = await receiptService.getAll();\r\n      // Ensure data is an array to prevent \"map is not a function\" errors\r\n      if (Array.isArray(data)) {\r\n        // Separate signed and unsigned receipts\r\n        const signedReceipts = data.filter(receipt => receipt.isSigned);\r\n        const unsignedReceipts = data.filter(receipt => !receipt.isSigned);\r\n        \r\n        setReceipts(signedReceipts);\r\n        setPendingReceipts(unsignedReceipts);\r\n      } else if (data === null || data === undefined) {\r\n        setReceipts([]);\r\n        setPendingReceipts([]);\r\n      } else {\r\n        setReceipts([]);\r\n        setPendingReceipts([]);\r\n      }\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : 'Failed to fetch receipts');\r\n      setReceipts([]); // Ensure empty array on error\r\n      setPendingReceipts([]);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, []);\r\n\r\n  const createReceipt = useCallback(async (\r\n    receiptData: CreateReceiptRequest, \r\n    file?: File\r\n  ): Promise<boolean> => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const newReceipt = await receiptService.create(receiptData);\r\n      setReceipts(prev => [newReceipt, ...prev]);\r\n      return true;\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : 'Failed to create receipt');\r\n      // Re-throw the error so the component can handle specific error types (like 409)\r\n      throw err;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, []);\r\n\r\n  const updateReceipt = useCallback(async (\r\n    id: string,\r\n    receiptData: UpdateReceiptRequest\r\n  ): Promise<boolean> => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      await receiptService.update(id, receiptData);\r\n      // Refetch all receipts to get updated data\r\n      await fetchReceipts();\r\n      return true;\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : 'Failed to update receipt');\r\n      // Re-throw the error so the component can handle specific error types (like 409)\r\n      throw err;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [fetchReceipts]);\r\n\r\n  const deleteReceipt = useCallback(async (id: string): Promise<boolean> => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      await receiptService.delete(id);\r\n      // Remove the receipt from local state\r\n      setReceipts(prev => prev.filter(receipt => receipt.id !== id));\r\n      return true;\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : 'Failed to delete receipt');\r\n      return false;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, []);\r\n\r\n  const returnReceipt = useCallback(async (\r\n    returnData: ReturnReceiptRequest,\r\n    file?: File\r\n  ): Promise<boolean> => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      await receiptService.returnItems(returnData);\r\n      // Since returnItems doesn't return the updated receipt, we refetch all receipts\r\n      await fetchReceipts();\r\n      return true;\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : 'Failed to return receipt');\r\n      return false;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [fetchReceipts]);\r\n\r\n  const returnSelectedItems = useCallback(async (\r\n    returnData: ReturnItemsRequest\r\n  ): Promise<boolean> => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      await receiptService.returnSelectedItems(returnData);\r\n      // Refetch all receipts to get updated data\r\n      await fetchReceipts();\r\n      return true;\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : 'Failed to return selected items');\r\n      return false;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [fetchReceipts]);\r\n\r\n  // Pending receipt methods\r\n  const fetchPendingReceipts = useCallback(async () => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const data = await receiptService.getPendingReceipts();\r\n      if (Array.isArray(data)) {\r\n        setPendingReceipts(data);\r\n      } else {\r\n        setPendingReceipts([]);\r\n      }\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : 'Failed to fetch pending receipts');\r\n      setPendingReceipts([]);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, []);\r\n\r\n  const fetchMyPendingReceipts = useCallback(async () => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const data = await receiptService.getMyPendingReceipts();\r\n      if (Array.isArray(data)) {\r\n        setPendingReceipts(data);\r\n      } else {\r\n        setPendingReceipts([]);\r\n      }\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : 'Failed to fetch pending receipts');\r\n      setPendingReceipts([]);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, []);\r\n\r\n  const signPendingReceipt = useCallback(async (\r\n    receiptId: string,\r\n    data: SignPendingReceiptRequest\r\n  ): Promise<boolean> => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const signedReceipt = await receiptService.signPendingReceipt(receiptId, data);\r\n      // Remove from pending receipts\r\n      setPendingReceipts(prev => prev.filter(receipt => receipt.id !== receiptId));\r\n      // Add to regular receipts\r\n      setReceipts(prev => [signedReceipt, ...prev]);\r\n      return true;\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : 'Failed to sign pending receipt');\r\n      return false;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    fetchReceipts();\r\n  }, [fetchReceipts]);\r\n\r\n  return {\r\n    receipts,\r\n    pendingReceipts,\r\n    loading,\r\n    error,\r\n    fetchReceipts,\r\n    fetchPendingReceipts,\r\n    fetchMyPendingReceipts,\r\n    createReceipt,\r\n    signPendingReceipt,\r\n    updateReceipt,\r\n    deleteReceipt,\r\n    returnReceipt,\r\n    returnSelectedItems,\r\n  };\r\n};\r\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { registerVersion } from '@firebase/app';\nimport { name, version } from '../package.json';\n\nregisterVersion(name, version, 'app');\nexport * from '@firebase/app';\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { version } from '../../package.json';\n\nexport const PENDING_TIMEOUT_MS = 10000;\n\nexport const PACKAGE_VERSION = `w:${version}`;\nexport const INTERNAL_AUTH_VERSION = 'FIS_v2';\n\nexport const INSTALLATIONS_API_URL =\n  'https://firebaseinstallations.googleapis.com/v1';\n\nexport const TOKEN_EXPIRATION_BUFFER = 60 * 60 * 1000; // One hour\n\nexport const SERVICE = 'installations';\nexport const SERVICE_NAME = 'Installations';\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { ErrorFactory, FirebaseError } from '@firebase/util';\nimport { SERVICE, SERVICE_NAME } from './constants';\n\nexport const enum ErrorCode {\n  MISSING_APP_CONFIG_VALUES = 'missing-app-config-values',\n  NOT_REGISTERED = 'not-registered',\n  INSTALLATION_NOT_FOUND = 'installation-not-found',\n  REQUEST_FAILED = 'request-failed',\n  APP_OFFLINE = 'app-offline',\n  DELETE_PENDING_REGISTRATION = 'delete-pending-registration'\n}\n\nconst ERROR_DESCRIPTION_MAP: { readonly [key in ErrorCode]: string } = {\n  [ErrorCode.MISSING_APP_CONFIG_VALUES]:\n    'Missing App configuration value: \"{$valueName}\"',\n  [ErrorCode.NOT_REGISTERED]: 'Firebase Installation is not registered.',\n  [ErrorCode.INSTALLATION_NOT_FOUND]: 'Firebase Installation not found.',\n  [ErrorCode.REQUEST_FAILED]:\n    '{$requestName} request failed with error \"{$serverCode} {$serverStatus}: {$serverMessage}\"',\n  [ErrorCode.APP_OFFLINE]: 'Could not process request. Application offline.',\n  [ErrorCode.DELETE_PENDING_REGISTRATION]:\n    \"Can't delete installation while there is a pending registration request.\"\n};\n\ninterface ErrorParams {\n  [ErrorCode.MISSING_APP_CONFIG_VALUES]: {\n    valueName: string;\n  };\n  [ErrorCode.REQUEST_FAILED]: {\n    requestName: string;\n    [index: string]: string | number; // to make TypeScript 3.8 happy\n  } & ServerErrorData;\n}\n\nexport const ERROR_FACTORY = new ErrorFactory<ErrorCode, ErrorParams>(\n  SERVICE,\n  SERVICE_NAME,\n  ERROR_DESCRIPTION_MAP\n);\n\nexport interface ServerErrorData {\n  serverCode: number;\n  serverMessage: string;\n  serverStatus: string;\n}\n\nexport type ServerError = FirebaseError & { customData: ServerErrorData };\n\n/** Returns true if error is a FirebaseError that is based on an error from the server. */\nexport function isServerError(error: unknown): error is ServerError {\n  return (\n    error instanceof FirebaseError &&\n    error.code.includes(ErrorCode.REQUEST_FAILED)\n  );\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { FirebaseError } from '@firebase/util';\nimport { GenerateAuthTokenResponse } from '../interfaces/api-response';\nimport {\n  CompletedAuthToken,\n  RegisteredInstallationEntry,\n  RequestStatus\n} from '../interfaces/installation-entry';\nimport {\n  INSTALLATIONS_API_URL,\n  INTERNAL_AUTH_VERSION\n} from '../util/constants';\nimport { ERROR_FACTORY, ErrorCode } from '../util/errors';\nimport { AppConfig } from '../interfaces/installation-impl';\n\nexport function getInstallationsEndpoint({ projectId }: AppConfig): string {\n  return `${INSTALLATIONS_API_URL}/projects/${projectId}/installations`;\n}\n\nexport function extractAuthTokenInfoFromResponse(\n  response: GenerateAuthTokenResponse\n): CompletedAuthToken {\n  return {\n    token: response.token,\n    requestStatus: RequestStatus.COMPLETED,\n    expiresIn: getExpiresInFromResponseExpiresIn(response.expiresIn),\n    creationTime: Date.now()\n  };\n}\n\nexport async function getErrorFromResponse(\n  requestName: string,\n  response: Response\n): Promise<FirebaseError> {\n  const responseJson: ErrorResponse = await response.json();\n  const errorData = responseJson.error;\n  return ERROR_FACTORY.create(ErrorCode.REQUEST_FAILED, {\n    requestName,\n    serverCode: errorData.code,\n    serverMessage: errorData.message,\n    serverStatus: errorData.status\n  });\n}\n\nexport function getHeaders({ apiKey }: AppConfig): Headers {\n  return new Headers({\n    'Content-Type': 'application/json',\n    Accept: 'application/json',\n    'x-goog-api-key': apiKey\n  });\n}\n\nexport function getHeadersWithAuth(\n  appConfig: AppConfig,\n  { refreshToken }: RegisteredInstallationEntry\n): Headers {\n  const headers = getHeaders(appConfig);\n  headers.append('Authorization', getAuthorizationHeader(refreshToken));\n  return headers;\n}\n\nexport interface ErrorResponse {\n  error: {\n    code: number;\n    message: string;\n    status: string;\n  };\n}\n\n/**\n * Calls the passed in fetch wrapper and returns the response.\n * If the returned response has a status of 5xx, re-runs the function once and\n * returns the response.\n */\nexport async function retryIfServerError(\n  fn: () => Promise<Response>\n): Promise<Response> {\n  const result = await fn();\n\n  if (result.status >= 500 && result.status < 600) {\n    // Internal Server Error. Retry request.\n    return fn();\n  }\n\n  return result;\n}\n\nfunction getExpiresInFromResponseExpiresIn(responseExpiresIn: string): number {\n  // This works because the server will never respond with fractions of a second.\n  return Number(responseExpiresIn.replace('s', '000'));\n}\n\nfunction getAuthorizationHeader(refreshToken: string): string {\n  return `${INTERNAL_AUTH_VERSION} ${refreshToken}`;\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/** Returns a promise that resolves after given time passes. */\nexport function sleep(ms: number): Promise<void> {\n  return new Promise<void>(resolve => {\n    setTimeout(resolve, ms);\n  });\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { bufferToBase64UrlSafe } from './buffer-to-base64-url-safe';\n\nexport const VALID_FID_PATTERN = /^[cdef][\\w-]{21}$/;\nexport const INVALID_FID = '';\n\n/**\n * Generates a new FID using random values from Web Crypto API.\n * Returns an empty string if FID generation fails for any reason.\n */\nexport function generateFid(): string {\n  try {\n    // A valid FID has exactly 22 base64 characters, which is 132 bits, or 16.5\n    // bytes. our implementation generates a 17 byte array instead.\n    const fidByteArray = new Uint8Array(17);\n    const crypto =\n      self.crypto || (self as unknown as { msCrypto: Crypto }).msCrypto;\n    crypto.getRandomValues(fidByteArray);\n\n    // Replace the first 4 random bits with the constant FID header of 0b0111.\n    fidByteArray[0] = 0b01110000 + (fidByteArray[0] % 0b00010000);\n\n    const fid = encode(fidByteArray);\n\n    return VALID_FID_PATTERN.test(fid) ? fid : INVALID_FID;\n  } catch {\n    // FID generation errored\n    return INVALID_FID;\n  }\n}\n\n/** Converts a FID Uint8Array to a base64 string representation. */\nfunction encode(fidByteArray: Uint8Array): string {\n  const b64String = bufferToBase64UrlSafe(fidByteArray);\n\n  // Remove the 23rd character that was added because of the extra 4 bits at the\n  // end of our 17 byte array, and the '=' padding.\n  return b64String.substr(0, 22);\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport function bufferToBase64UrlSafe(array: Uint8Array): string {\n  const b64 = btoa(String.fromCharCode(...array));\n  return b64.replace(/\\+/g, '-').replace(/\\//g, '_');\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { AppConfig } from '../interfaces/installation-impl';\n\n/** Returns a string key that can be used to identify the app. */\nexport function getKey(appConfig: AppConfig): string {\n  return `${appConfig.appName}!${appConfig.appId}`;\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { getKey } from '../util/get-key';\nimport { AppConfig } from '../interfaces/installation-impl';\nimport { IdChangeCallbackFn } from '../api';\n\nconst fidChangeCallbacks: Map<string, Set<IdChangeCallbackFn>> = new Map();\n\n/**\n * Calls the onIdChange callbacks with the new FID value, and broadcasts the\n * change to other tabs.\n */\nexport function fidChanged(appConfig: AppConfig, fid: string): void {\n  const key = getKey(appConfig);\n\n  callFidChangeCallbacks(key, fid);\n  broadcastFidChange(key, fid);\n}\n\nexport function addCallback(\n  appConfig: AppConfig,\n  callback: IdChangeCallbackFn\n): void {\n  // Open the broadcast channel if it's not already open,\n  // to be able to listen to change events from other tabs.\n  getBroadcastChannel();\n\n  const key = getKey(appConfig);\n\n  let callbackSet = fidChangeCallbacks.get(key);\n  if (!callbackSet) {\n    callbackSet = new Set();\n    fidChangeCallbacks.set(key, callbackSet);\n  }\n  callbackSet.add(callback);\n}\n\nexport function removeCallback(\n  appConfig: AppConfig,\n  callback: IdChangeCallbackFn\n): void {\n  const key = getKey(appConfig);\n\n  const callbackSet = fidChangeCallbacks.get(key);\n\n  if (!callbackSet) {\n    return;\n  }\n\n  callbackSet.delete(callback);\n  if (callbackSet.size === 0) {\n    fidChangeCallbacks.delete(key);\n  }\n\n  // Close broadcast channel if there are no more callbacks.\n  closeBroadcastChannel();\n}\n\nfunction callFidChangeCallbacks(key: string, fid: string): void {\n  const callbacks = fidChangeCallbacks.get(key);\n  if (!callbacks) {\n    return;\n  }\n\n  for (const callback of callbacks) {\n    callback(fid);\n  }\n}\n\nfunction broadcastFidChange(key: string, fid: string): void {\n  const channel = getBroadcastChannel();\n  if (channel) {\n    channel.postMessage({ key, fid });\n  }\n  closeBroadcastChannel();\n}\n\nlet broadcastChannel: BroadcastChannel | null = null;\n/** Opens and returns a BroadcastChannel if it is supported by the browser. */\nfunction getBroadcastChannel(): BroadcastChannel | null {\n  if (!broadcastChannel && 'BroadcastChannel' in self) {\n    broadcastChannel = new BroadcastChannel('[Firebase] FID Change');\n    broadcastChannel.onmessage = e => {\n      callFidChangeCallbacks(e.data.key, e.data.fid);\n    };\n  }\n  return broadcastChannel;\n}\n\nfunction closeBroadcastChannel(): void {\n  if (fidChangeCallbacks.size === 0 && broadcastChannel) {\n    broadcastChannel.close();\n    broadcastChannel = null;\n  }\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { DBSchema, IDBPDatabase, openDB } from 'idb';\nimport { AppConfig } from '../interfaces/installation-impl';\nimport { InstallationEntry } from '../interfaces/installation-entry';\nimport { getKey } from '../util/get-key';\nimport { fidChanged } from './fid-changed';\n\nconst DATABASE_NAME = 'firebase-installations-database';\nconst DATABASE_VERSION = 1;\nconst OBJECT_STORE_NAME = 'firebase-installations-store';\n\ninterface InstallationsDB extends DBSchema {\n  'firebase-installations-store': {\n    key: string;\n    value: InstallationEntry | undefined;\n  };\n}\n\nlet dbPromise: Promise<IDBPDatabase<InstallationsDB>> | null = null;\nfunction getDbPromise(): Promise<IDBPDatabase<InstallationsDB>> {\n  if (!dbPromise) {\n    dbPromise = openDB(DATABASE_NAME, DATABASE_VERSION, {\n      upgrade: (db, oldVersion) => {\n        // We don't use 'break' in this switch statement, the fall-through\n        // behavior is what we want, because if there are multiple versions between\n        // the old version and the current version, we want ALL the migrations\n        // that correspond to those versions to run, not only the last one.\n        // eslint-disable-next-line default-case\n        switch (oldVersion) {\n          case 0:\n            db.createObjectStore(OBJECT_STORE_NAME);\n        }\n      }\n    });\n  }\n  return dbPromise;\n}\n\n/** Gets record(s) from the objectStore that match the given key. */\nexport async function get(\n  appConfig: AppConfig\n): Promise<InstallationEntry | undefined> {\n  const key = getKey(appConfig);\n  const db = await getDbPromise();\n  return db\n    .transaction(OBJECT_STORE_NAME)\n    .objectStore(OBJECT_STORE_NAME)\n    .get(key) as Promise<InstallationEntry>;\n}\n\n/** Assigns or overwrites the record for the given key with the given value. */\nexport async function set<ValueType extends InstallationEntry>(\n  appConfig: AppConfig,\n  value: ValueType\n): Promise<ValueType> {\n  const key = getKey(appConfig);\n  const db = await getDbPromise();\n  const tx = db.transaction(OBJECT_STORE_NAME, 'readwrite');\n  const objectStore = tx.objectStore(OBJECT_STORE_NAME);\n  const oldValue = (await objectStore.get(key)) as InstallationEntry;\n  await objectStore.put(value, key);\n  await tx.done;\n\n  if (!oldValue || oldValue.fid !== value.fid) {\n    fidChanged(appConfig, value.fid);\n  }\n\n  return value;\n}\n\n/** Removes record(s) from the objectStore that match the given key. */\nexport async function remove(appConfig: AppConfig): Promise<void> {\n  const key = getKey(appConfig);\n  const db = await getDbPromise();\n  const tx = db.transaction(OBJECT_STORE_NAME, 'readwrite');\n  await tx.objectStore(OBJECT_STORE_NAME).delete(key);\n  await tx.done;\n}\n\n/**\n * Atomically updates a record with the result of updateFn, which gets\n * called with the current value. If newValue is undefined, the record is\n * deleted instead.\n * @return Updated value\n */\nexport async function update<ValueType extends InstallationEntry | undefined>(\n  appConfig: AppConfig,\n  updateFn: (previousValue: InstallationEntry | undefined) => ValueType\n): Promise<ValueType> {\n  const key = getKey(appConfig);\n  const db = await getDbPromise();\n  const tx = db.transaction(OBJECT_STORE_NAME, 'readwrite');\n  const store = tx.objectStore(OBJECT_STORE_NAME);\n  const oldValue: InstallationEntry | undefined = (await store.get(\n    key\n  )) as InstallationEntry;\n  const newValue = updateFn(oldValue);\n\n  if (newValue === undefined) {\n    await store.delete(key);\n  } else {\n    await store.put(newValue, key);\n  }\n  await tx.done;\n\n  if (newValue && (!oldValue || oldValue.fid !== newValue.fid)) {\n    fidChanged(appConfig, newValue.fid);\n  }\n\n  return newValue;\n}\n\nexport async function clear(): Promise<void> {\n  const db = await getDbPromise();\n  const tx = db.transaction(OBJECT_STORE_NAME, 'readwrite');\n  await tx.objectStore(OBJECT_STORE_NAME).clear();\n  await tx.done;\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { createInstallationRequest } from '../functions/create-installation-request';\nimport {\n  AppConfig,\n  FirebaseInstallationsImpl\n} from '../interfaces/installation-impl';\nimport {\n  InProgressInstallationEntry,\n  InstallationEntry,\n  RegisteredInstallationEntry,\n  RequestStatus\n} from '../interfaces/installation-entry';\nimport { PENDING_TIMEOUT_MS } from '../util/constants';\nimport { ERROR_FACTORY, ErrorCode, isServerError } from '../util/errors';\nimport { sleep } from '../util/sleep';\nimport { generateFid, INVALID_FID } from './generate-fid';\nimport { remove, set, update } from './idb-manager';\n\nexport interface InstallationEntryWithRegistrationPromise {\n  installationEntry: InstallationEntry;\n  /** Exist iff the installationEntry is not registered. */\n  registrationPromise?: Promise<RegisteredInstallationEntry>;\n}\n\n/**\n * Updates and returns the InstallationEntry from the database.\n * Also triggers a registration request if it is necessary and possible.\n */\nexport async function getInstallationEntry(\n  installations: FirebaseInstallationsImpl\n): Promise<InstallationEntryWithRegistrationPromise> {\n  let registrationPromise: Promise<RegisteredInstallationEntry> | undefined;\n\n  const installationEntry = await update(installations.appConfig, oldEntry => {\n    const installationEntry = updateOrCreateInstallationEntry(oldEntry);\n    const entryWithPromise = triggerRegistrationIfNecessary(\n      installations,\n      installationEntry\n    );\n    registrationPromise = entryWithPromise.registrationPromise;\n    return entryWithPromise.installationEntry;\n  });\n\n  if (installationEntry.fid === INVALID_FID) {\n    // FID generation failed. Waiting for the FID from the server.\n    return { installationEntry: await registrationPromise! };\n  }\n\n  return {\n    installationEntry,\n    registrationPromise\n  };\n}\n\n/**\n * Creates a new Installation Entry if one does not exist.\n * Also clears timed out pending requests.\n */\nfunction updateOrCreateInstallationEntry(\n  oldEntry: InstallationEntry | undefined\n): InstallationEntry {\n  const entry: InstallationEntry = oldEntry || {\n    fid: generateFid(),\n    registrationStatus: RequestStatus.NOT_STARTED\n  };\n\n  return clearTimedOutRequest(entry);\n}\n\n/**\n * If the Firebase Installation is not registered yet, this will trigger the\n * registration and return an InProgressInstallationEntry.\n *\n * If registrationPromise does not exist, the installationEntry is guaranteed\n * to be registered.\n */\nfunction triggerRegistrationIfNecessary(\n  installations: FirebaseInstallationsImpl,\n  installationEntry: InstallationEntry\n): InstallationEntryWithRegistrationPromise {\n  if (installationEntry.registrationStatus === RequestStatus.NOT_STARTED) {\n    if (!navigator.onLine) {\n      // Registration required but app is offline.\n      const registrationPromiseWithError = Promise.reject(\n        ERROR_FACTORY.create(ErrorCode.APP_OFFLINE)\n      );\n      return {\n        installationEntry,\n        registrationPromise: registrationPromiseWithError\n      };\n    }\n\n    // Try registering. Change status to IN_PROGRESS.\n    const inProgressEntry: InProgressInstallationEntry = {\n      fid: installationEntry.fid,\n      registrationStatus: RequestStatus.IN_PROGRESS,\n      registrationTime: Date.now()\n    };\n    const registrationPromise = registerInstallation(\n      installations,\n      inProgressEntry\n    );\n    return { installationEntry: inProgressEntry, registrationPromise };\n  } else if (\n    installationEntry.registrationStatus === RequestStatus.IN_PROGRESS\n  ) {\n    return {\n      installationEntry,\n      registrationPromise: waitUntilFidRegistration(installations)\n    };\n  } else {\n    return { installationEntry };\n  }\n}\n\n/** This will be executed only once for each new Firebase Installation. */\nasync function registerInstallation(\n  installations: FirebaseInstallationsImpl,\n  installationEntry: InProgressInstallationEntry\n): Promise<RegisteredInstallationEntry> {\n  try {\n    const registeredInstallationEntry = await createInstallationRequest(\n      installations,\n      installationEntry\n    );\n    return set(installations.appConfig, registeredInstallationEntry);\n  } catch (e) {\n    if (isServerError(e) && e.customData.serverCode === 409) {\n      // Server returned a \"FID cannot be used\" error.\n      // Generate a new ID next time.\n      await remove(installations.appConfig);\n    } else {\n      // Registration failed. Set FID as not registered.\n      await set(installations.appConfig, {\n        fid: installationEntry.fid,\n        registrationStatus: RequestStatus.NOT_STARTED\n      });\n    }\n    throw e;\n  }\n}\n\n/** Call if FID registration is pending in another request. */\nasync function waitUntilFidRegistration(\n  installations: FirebaseInstallationsImpl\n): Promise<RegisteredInstallationEntry> {\n  // Unfortunately, there is no way of reliably observing when a value in\n  // IndexedDB changes (yet, see https://github.com/WICG/indexed-db-observers),\n  // so we need to poll.\n\n  let entry: InstallationEntry = await updateInstallationRequest(\n    installations.appConfig\n  );\n  while (entry.registrationStatus === RequestStatus.IN_PROGRESS) {\n    // createInstallation request still in progress.\n    await sleep(100);\n\n    entry = await updateInstallationRequest(installations.appConfig);\n  }\n\n  if (entry.registrationStatus === RequestStatus.NOT_STARTED) {\n    // The request timed out or failed in a different call. Try again.\n    const { installationEntry, registrationPromise } =\n      await getInstallationEntry(installations);\n\n    if (registrationPromise) {\n      return registrationPromise;\n    } else {\n      // if there is no registrationPromise, entry is registered.\n      return installationEntry as RegisteredInstallationEntry;\n    }\n  }\n\n  return entry;\n}\n\n/**\n * Called only if there is a CreateInstallation request in progress.\n *\n * Updates the InstallationEntry in the DB based on the status of the\n * CreateInstallation request.\n *\n * Returns the updated InstallationEntry.\n */\nfunction updateInstallationRequest(\n  appConfig: AppConfig\n): Promise<InstallationEntry> {\n  return update(appConfig, oldEntry => {\n    if (!oldEntry) {\n      throw ERROR_FACTORY.create(ErrorCode.INSTALLATION_NOT_FOUND);\n    }\n    return clearTimedOutRequest(oldEntry);\n  });\n}\n\nfunction clearTimedOutRequest(entry: InstallationEntry): InstallationEntry {\n  if (hasInstallationRequestTimedOut(entry)) {\n    return {\n      fid: entry.fid,\n      registrationStatus: RequestStatus.NOT_STARTED\n    };\n  }\n\n  return entry;\n}\n\nfunction hasInstallationRequestTimedOut(\n  installationEntry: InstallationEntry\n): boolean {\n  return (\n    installationEntry.registrationStatus === RequestStatus.IN_PROGRESS &&\n    installationEntry.registrationTime + PENDING_TIMEOUT_MS < Date.now()\n  );\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { CreateInstallationResponse } from '../interfaces/api-response';\nimport {\n  InProgressInstallationEntry,\n  RegisteredInstallationEntry,\n  RequestStatus\n} from '../interfaces/installation-entry';\nimport { INTERNAL_AUTH_VERSION, PACKAGE_VERSION } from '../util/constants';\nimport {\n  extractAuthTokenInfoFromResponse,\n  getErrorFromResponse,\n  getHeaders,\n  getInstallationsEndpoint,\n  retryIfServerError\n} from './common';\nimport { FirebaseInstallationsImpl } from '../interfaces/installation-impl';\n\nexport async function createInstallationRequest(\n  { appConfig, heartbeatServiceProvider }: FirebaseInstallationsImpl,\n  { fid }: InProgressInstallationEntry\n): Promise<RegisteredInstallationEntry> {\n  const endpoint = getInstallationsEndpoint(appConfig);\n\n  const headers = getHeaders(appConfig);\n\n  // If heartbeat service exists, add the heartbeat string to the header.\n  const heartbeatService = heartbeatServiceProvider.getImmediate({\n    optional: true\n  });\n  if (heartbeatService) {\n    const heartbeatsHeader = await heartbeatService.getHeartbeatsHeader();\n    if (heartbeatsHeader) {\n      headers.append('x-firebase-client', heartbeatsHeader);\n    }\n  }\n\n  const body = {\n    fid,\n    authVersion: INTERNAL_AUTH_VERSION,\n    appId: appConfig.appId,\n    sdkVersion: PACKAGE_VERSION\n  };\n\n  const request: RequestInit = {\n    method: 'POST',\n    headers,\n    body: JSON.stringify(body)\n  };\n\n  const response = await retryIfServerError(() => fetch(endpoint, request));\n  if (response.ok) {\n    const responseValue: CreateInstallationResponse = await response.json();\n    const registeredInstallationEntry: RegisteredInstallationEntry = {\n      fid: responseValue.fid || fid,\n      registrationStatus: RequestStatus.COMPLETED,\n      refreshToken: responseValue.refreshToken,\n      authToken: extractAuthTokenInfoFromResponse(responseValue.authToken)\n    };\n    return registeredInstallationEntry;\n  } else {\n    throw await getErrorFromResponse('Create Installation', response);\n  }\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { GenerateAuthTokenResponse } from '../interfaces/api-response';\nimport {\n  CompletedAuthToken,\n  RegisteredInstallationEntry\n} from '../interfaces/installation-entry';\nimport { PACKAGE_VERSION } from '../util/constants';\nimport {\n  extractAuthTokenInfoFromResponse,\n  getErrorFromResponse,\n  getHeadersWithAuth,\n  getInstallationsEndpoint,\n  retryIfServerError\n} from './common';\nimport {\n  FirebaseInstallationsImpl,\n  AppConfig\n} from '../interfaces/installation-impl';\n\nexport async function generateAuthTokenRequest(\n  { appConfig, heartbeatServiceProvider }: FirebaseInstallationsImpl,\n  installationEntry: RegisteredInstallationEntry\n): Promise<CompletedAuthToken> {\n  const endpoint = getGenerateAuthTokenEndpoint(appConfig, installationEntry);\n\n  const headers = getHeadersWithAuth(appConfig, installationEntry);\n\n  // If heartbeat service exists, add the heartbeat string to the header.\n  const heartbeatService = heartbeatServiceProvider.getImmediate({\n    optional: true\n  });\n  if (heartbeatService) {\n    const heartbeatsHeader = await heartbeatService.getHeartbeatsHeader();\n    if (heartbeatsHeader) {\n      headers.append('x-firebase-client', heartbeatsHeader);\n    }\n  }\n\n  const body = {\n    installation: {\n      sdkVersion: PACKAGE_VERSION,\n      appId: appConfig.appId\n    }\n  };\n\n  const request: RequestInit = {\n    method: 'POST',\n    headers,\n    body: JSON.stringify(body)\n  };\n\n  const response = await retryIfServerError(() => fetch(endpoint, request));\n  if (response.ok) {\n    const responseValue: GenerateAuthTokenResponse = await response.json();\n    const completedAuthToken: CompletedAuthToken =\n      extractAuthTokenInfoFromResponse(responseValue);\n    return completedAuthToken;\n  } else {\n    throw await getErrorFromResponse('Generate Auth Token', response);\n  }\n}\n\nfunction getGenerateAuthTokenEndpoint(\n  appConfig: AppConfig,\n  { fid }: RegisteredInstallationEntry\n): string {\n  return `${getInstallationsEndpoint(appConfig)}/${fid}/authTokens:generate`;\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { generateAuthTokenRequest } from '../functions/generate-auth-token-request';\nimport {\n  AppConfig,\n  FirebaseInstallationsImpl\n} from '../interfaces/installation-impl';\nimport {\n  AuthToken,\n  CompletedAuthToken,\n  InProgressAuthToken,\n  InstallationEntry,\n  RegisteredInstallationEntry,\n  RequestStatus\n} from '../interfaces/installation-entry';\nimport { PENDING_TIMEOUT_MS, TOKEN_EXPIRATION_BUFFER } from '../util/constants';\nimport { ERROR_FACTORY, ErrorCode, isServerError } from '../util/errors';\nimport { sleep } from '../util/sleep';\nimport { remove, set, update } from './idb-manager';\n\n/**\n * Returns a valid authentication token for the installation. Generates a new\n * token if one doesn't exist, is expired or about to expire.\n *\n * Should only be called if the Firebase Installation is registered.\n */\nexport async function refreshAuthToken(\n  installations: FirebaseInstallationsImpl,\n  forceRefresh = false\n): Promise<CompletedAuthToken> {\n  let tokenPromise: Promise<CompletedAuthToken> | undefined;\n  const entry = await update(installations.appConfig, oldEntry => {\n    if (!isEntryRegistered(oldEntry)) {\n      throw ERROR_FACTORY.create(ErrorCode.NOT_REGISTERED);\n    }\n\n    const oldAuthToken = oldEntry.authToken;\n    if (!forceRefresh && isAuthTokenValid(oldAuthToken)) {\n      // There is a valid token in the DB.\n      return oldEntry;\n    } else if (oldAuthToken.requestStatus === RequestStatus.IN_PROGRESS) {\n      // There already is a token request in progress.\n      tokenPromise = waitUntilAuthTokenRequest(installations, forceRefresh);\n      return oldEntry;\n    } else {\n      // No token or token expired.\n      if (!navigator.onLine) {\n        throw ERROR_FACTORY.create(ErrorCode.APP_OFFLINE);\n      }\n\n      const inProgressEntry = makeAuthTokenRequestInProgressEntry(oldEntry);\n      tokenPromise = fetchAuthTokenFromServer(installations, inProgressEntry);\n      return inProgressEntry;\n    }\n  });\n\n  const authToken = tokenPromise\n    ? await tokenPromise\n    : (entry.authToken as CompletedAuthToken);\n  return authToken;\n}\n\n/**\n * Call only if FID is registered and Auth Token request is in progress.\n *\n * Waits until the current pending request finishes. If the request times out,\n * tries once in this thread as well.\n */\nasync function waitUntilAuthTokenRequest(\n  installations: FirebaseInstallationsImpl,\n  forceRefresh: boolean\n): Promise<CompletedAuthToken> {\n  // Unfortunately, there is no way of reliably observing when a value in\n  // IndexedDB changes (yet, see https://github.com/WICG/indexed-db-observers),\n  // so we need to poll.\n\n  let entry = await updateAuthTokenRequest(installations.appConfig);\n  while (entry.authToken.requestStatus === RequestStatus.IN_PROGRESS) {\n    // generateAuthToken still in progress.\n    await sleep(100);\n\n    entry = await updateAuthTokenRequest(installations.appConfig);\n  }\n\n  const authToken = entry.authToken;\n  if (authToken.requestStatus === RequestStatus.NOT_STARTED) {\n    // The request timed out or failed in a different call. Try again.\n    return refreshAuthToken(installations, forceRefresh);\n  } else {\n    return authToken;\n  }\n}\n\n/**\n * Called only if there is a GenerateAuthToken request in progress.\n *\n * Updates the InstallationEntry in the DB based on the status of the\n * GenerateAuthToken request.\n *\n * Returns the updated InstallationEntry.\n */\nfunction updateAuthTokenRequest(\n  appConfig: AppConfig\n): Promise<RegisteredInstallationEntry> {\n  return update(appConfig, oldEntry => {\n    if (!isEntryRegistered(oldEntry)) {\n      throw ERROR_FACTORY.create(ErrorCode.NOT_REGISTERED);\n    }\n\n    const oldAuthToken = oldEntry.authToken;\n    if (hasAuthTokenRequestTimedOut(oldAuthToken)) {\n      return {\n        ...oldEntry,\n        authToken: { requestStatus: RequestStatus.NOT_STARTED }\n      };\n    }\n\n    return oldEntry;\n  });\n}\n\nasync function fetchAuthTokenFromServer(\n  installations: FirebaseInstallationsImpl,\n  installationEntry: RegisteredInstallationEntry\n): Promise<CompletedAuthToken> {\n  try {\n    const authToken = await generateAuthTokenRequest(\n      installations,\n      installationEntry\n    );\n    const updatedInstallationEntry: RegisteredInstallationEntry = {\n      ...installationEntry,\n      authToken\n    };\n    await set(installations.appConfig, updatedInstallationEntry);\n    return authToken;\n  } catch (e) {\n    if (\n      isServerError(e) &&\n      (e.customData.serverCode === 401 || e.customData.serverCode === 404)\n    ) {\n      // Server returned a \"FID not found\" or a \"Invalid authentication\" error.\n      // Generate a new ID next time.\n      await remove(installations.appConfig);\n    } else {\n      const updatedInstallationEntry: RegisteredInstallationEntry = {\n        ...installationEntry,\n        authToken: { requestStatus: RequestStatus.NOT_STARTED }\n      };\n      await set(installations.appConfig, updatedInstallationEntry);\n    }\n    throw e;\n  }\n}\n\nfunction isEntryRegistered(\n  installationEntry: InstallationEntry | undefined\n): installationEntry is RegisteredInstallationEntry {\n  return (\n    installationEntry !== undefined &&\n    installationEntry.registrationStatus === RequestStatus.COMPLETED\n  );\n}\n\nfunction isAuthTokenValid(authToken: AuthToken): boolean {\n  return (\n    authToken.requestStatus === RequestStatus.COMPLETED &&\n    !isAuthTokenExpired(authToken)\n  );\n}\n\nfunction isAuthTokenExpired(authToken: CompletedAuthToken): boolean {\n  const now = Date.now();\n  return (\n    now < authToken.creationTime ||\n    authToken.creationTime + authToken.expiresIn < now + TOKEN_EXPIRATION_BUFFER\n  );\n}\n\n/** Returns an updated InstallationEntry with an InProgressAuthToken. */\nfunction makeAuthTokenRequestInProgressEntry(\n  oldEntry: RegisteredInstallationEntry\n): RegisteredInstallationEntry {\n  const inProgressAuthToken: InProgressAuthToken = {\n    requestStatus: RequestStatus.IN_PROGRESS,\n    requestTime: Date.now()\n  };\n  return {\n    ...oldEntry,\n    authToken: inProgressAuthToken\n  };\n}\n\nfunction hasAuthTokenRequestTimedOut(authToken: AuthToken): boolean {\n  return (\n    authToken.requestStatus === RequestStatus.IN_PROGRESS &&\n    authToken.requestTime + PENDING_TIMEOUT_MS < Date.now()\n  );\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { getInstallationEntry } from '../helpers/get-installation-entry';\nimport { refreshAuthToken } from '../helpers/refresh-auth-token';\nimport { FirebaseInstallationsImpl } from '../interfaces/installation-impl';\nimport { Installations } from '../interfaces/public-types';\n\n/**\n * Returns a Firebase Installations auth token, identifying the current\n * Firebase Installation.\n * @param installations - The `Installations` instance.\n * @param forceRefresh - Force refresh regardless of token expiration.\n *\n * @public\n */\nexport async function getToken(\n  installations: Installations,\n  forceRefresh = false\n): Promise<string> {\n  const installationsImpl = installations as FirebaseInstallationsImpl;\n  await completeInstallationRegistration(installationsImpl);\n\n  // At this point we either have a Registered Installation in the DB, or we've\n  // already thrown an error.\n  const authToken = await refreshAuthToken(installationsImpl, forceRefresh);\n  return authToken.token;\n}\n\nasync function completeInstallationRegistration(\n  installations: FirebaseInstallationsImpl\n): Promise<void> {\n  const { registrationPromise } = await getInstallationEntry(installations);\n\n  if (registrationPromise) {\n    // A createInstallation request is in progress. Wait until it finishes.\n    await registrationPromise;\n  }\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { FirebaseApp, FirebaseOptions } from '@firebase/app';\nimport { FirebaseError } from '@firebase/util';\nimport { AppConfig } from '../interfaces/installation-impl';\nimport { ERROR_FACTORY, ErrorCode } from '../util/errors';\n\nexport function extractAppConfig(app: FirebaseApp): AppConfig {\n  if (!app || !app.options) {\n    throw getMissingValueError('App Configuration');\n  }\n\n  if (!app.name) {\n    throw getMissingValueError('App Name');\n  }\n\n  // Required app config keys\n  const configKeys: Array<keyof FirebaseOptions> = [\n    'projectId',\n    'apiKey',\n    'appId'\n  ];\n\n  for (const keyName of configKeys) {\n    if (!app.options[keyName]) {\n      throw getMissingValueError(keyName);\n    }\n  }\n\n  return {\n    appName: app.name,\n    projectId: app.options.projectId!,\n    apiKey: app.options.apiKey!,\n    appId: app.options.appId!\n  };\n}\n\nfunction getMissingValueError(valueName: string): FirebaseError {\n  return ERROR_FACTORY.create(ErrorCode.MISSING_APP_CONFIG_VALUES, {\n    valueName\n  });\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { _registerComponent, _getProvider } from '@firebase/app';\nimport {\n  Component,\n  ComponentType,\n  InstanceFactory,\n  ComponentContainer\n} from '@firebase/component';\nimport { getId, getToken } from '../api/index';\nimport { _FirebaseInstallationsInternal } from '../interfaces/public-types';\nimport { FirebaseInstallationsImpl } from '../interfaces/installation-impl';\nimport { extractAppConfig } from '../helpers/extract-app-config';\n\nconst INSTALLATIONS_NAME = 'installations';\nconst INSTALLATIONS_NAME_INTERNAL = 'installations-internal';\n\nconst publicFactory: InstanceFactory<'installations'> = (\n  container: ComponentContainer\n) => {\n  const app = container.getProvider('app').getImmediate();\n  // Throws if app isn't configured properly.\n  const appConfig = extractAppConfig(app);\n  const heartbeatServiceProvider = _getProvider(app, 'heartbeat');\n\n  const installationsImpl: FirebaseInstallationsImpl = {\n    app,\n    appConfig,\n    heartbeatServiceProvider,\n    _delete: () => Promise.resolve()\n  };\n  return installationsImpl;\n};\n\nconst internalFactory: InstanceFactory<'installations-internal'> = (\n  container: ComponentContainer\n) => {\n  const app = container.getProvider('app').getImmediate();\n  // Internal FIS instance relies on public FIS instance.\n  const installations = _getProvider(app, INSTALLATIONS_NAME).getImmediate();\n\n  const installationsInternal: _FirebaseInstallationsInternal = {\n    getId: () => getId(installations),\n    getToken: (forceRefresh?: boolean) => getToken(installations, forceRefresh)\n  };\n  return installationsInternal;\n};\n\nexport function registerInstallations(): void {\n  _registerComponent(\n    new Component(INSTALLATIONS_NAME, publicFactory, ComponentType.PUBLIC)\n  );\n  _registerComponent(\n    new Component(\n      INSTALLATIONS_NAME_INTERNAL,\n      internalFactory,\n      ComponentType.PRIVATE\n    )\n  );\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { getInstallationEntry } from '../helpers/get-installation-entry';\nimport { refreshAuthToken } from '../helpers/refresh-auth-token';\nimport { FirebaseInstallationsImpl } from '../interfaces/installation-impl';\nimport { Installations } from '../interfaces/public-types';\n\n/**\n * Creates a Firebase Installation if there isn't one for the app and\n * returns the Installation ID.\n * @param installations - The `Installations` instance.\n *\n * @public\n */\nexport async function getId(installations: Installations): Promise<string> {\n  const installationsImpl = installations as FirebaseInstallationsImpl;\n  const { installationEntry, registrationPromise } = await getInstallationEntry(\n    installationsImpl\n  );\n\n  if (registrationPromise) {\n    registrationPromise.catch(console.error);\n  } else {\n    // If the installation is already registered, update the authentication\n    // token if needed.\n    refreshAuthToken(installationsImpl).catch(console.error);\n  }\n\n  return installationEntry.fid;\n}\n","/**\n * The Firebase Installations Web SDK.\n * This SDK does not work in a Node.js environment.\n *\n * @packageDocumentation\n */\n\n/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { registerInstallations } from './functions/config';\nimport { registerVersion } from '@firebase/app';\nimport { name, version } from '../package.json';\n\nexport * from './api';\nexport * from './interfaces/public-types';\n\nregisterInstallations();\nregisterVersion(name, version);\n// BUILD_TARGET will be replaced by values like esm, cjs, etc during the compilation\nregisterVersion(name, version, '__BUILD_TARGET__');\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Type constant for Firebase Analytics.\n */\nexport const ANALYTICS_TYPE = 'analytics';\n\n// Key to attach FID to in gtag params.\nexport const GA_FID_KEY = 'firebase_id';\nexport const ORIGIN_KEY = 'origin';\n\nexport const FETCH_TIMEOUT_MILLIS = 60 * 1000;\n\nexport const DYNAMIC_CONFIG_URL =\n  'https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig';\n\nexport const GTAG_URL = 'https://www.googletagmanager.com/gtag/js';\n\nexport const enum GtagCommand {\n  EVENT = 'event',\n  SET = 'set',\n  CONFIG = 'config',\n  CONSENT = 'consent',\n  GET = 'get'\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Logger } from '@firebase/logger';\n\nexport const logger = new Logger('@firebase/analytics');\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { ErrorFactory, ErrorMap } from '@firebase/util';\n\nexport const enum AnalyticsError {\n  ALREADY_EXISTS = 'already-exists',\n  ALREADY_INITIALIZED = 'already-initialized',\n  ALREADY_INITIALIZED_SETTINGS = 'already-initialized-settings',\n  INTEROP_COMPONENT_REG_FAILED = 'interop-component-reg-failed',\n  INVALID_ANALYTICS_CONTEXT = 'invalid-analytics-context',\n  INDEXEDDB_UNAVAILABLE = 'indexeddb-unavailable',\n  FETCH_THROTTLE = 'fetch-throttle',\n  CONFIG_FETCH_FAILED = 'config-fetch-failed',\n  NO_API_KEY = 'no-api-key',\n  NO_APP_ID = 'no-app-id',\n  NO_CLIENT_ID = 'no-client-id',\n  INVALID_GTAG_RESOURCE = 'invalid-gtag-resource'\n}\n\nconst ERRORS: ErrorMap<AnalyticsError> = {\n  [AnalyticsError.ALREADY_EXISTS]:\n    'A Firebase Analytics instance with the appId {$id} ' +\n    ' already exists. ' +\n    'Only one Firebase Analytics instance can be created for each appId.',\n  [AnalyticsError.ALREADY_INITIALIZED]:\n    'initializeAnalytics() cannot be called again with different options than those ' +\n    'it was initially called with. It can be called again with the same options to ' +\n    'return the existing instance, or getAnalytics() can be used ' +\n    'to get a reference to the already-initialized instance.',\n  [AnalyticsError.ALREADY_INITIALIZED_SETTINGS]:\n    'Firebase Analytics has already been initialized.' +\n    'settings() must be called before initializing any Analytics instance' +\n    'or it will have no effect.',\n  [AnalyticsError.INTEROP_COMPONENT_REG_FAILED]:\n    'Firebase Analytics Interop Component failed to instantiate: {$reason}',\n  [AnalyticsError.INVALID_ANALYTICS_CONTEXT]:\n    'Firebase Analytics is not supported in this environment. ' +\n    'Wrap initialization of analytics in analytics.isSupported() ' +\n    'to prevent initialization in unsupported environments. Details: {$errorInfo}',\n  [AnalyticsError.INDEXEDDB_UNAVAILABLE]:\n    'IndexedDB unavailable or restricted in this environment. ' +\n    'Wrap initialization of analytics in analytics.isSupported() ' +\n    'to prevent initialization in unsupported environments. Details: {$errorInfo}',\n  [AnalyticsError.FETCH_THROTTLE]:\n    'The config fetch request timed out while in an exponential backoff state.' +\n    ' Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',\n  [AnalyticsError.CONFIG_FETCH_FAILED]:\n    'Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}',\n  [AnalyticsError.NO_API_KEY]:\n    'The \"apiKey\" field is empty in the local Firebase config. Firebase Analytics requires this field to' +\n    'contain a valid API key.',\n  [AnalyticsError.NO_APP_ID]:\n    'The \"appId\" field is empty in the local Firebase config. Firebase Analytics requires this field to' +\n    'contain a valid app ID.',\n  [AnalyticsError.NO_CLIENT_ID]: 'The \"client_id\" field is empty.',\n  [AnalyticsError.INVALID_GTAG_RESOURCE]:\n    'Trusted Types detected an invalid gtag resource: {$gtagURL}.'\n};\n\ninterface ErrorParams {\n  [AnalyticsError.ALREADY_EXISTS]: { id: string };\n  [AnalyticsError.INTEROP_COMPONENT_REG_FAILED]: { reason: Error };\n  [AnalyticsError.FETCH_THROTTLE]: { throttleEndTimeMillis: number };\n  [AnalyticsError.CONFIG_FETCH_FAILED]: {\n    httpStatus: number;\n    responseMessage: string;\n  };\n  [AnalyticsError.INVALID_ANALYTICS_CONTEXT]: { errorInfo: string };\n  [AnalyticsError.INDEXEDDB_UNAVAILABLE]: { errorInfo: string };\n  [AnalyticsError.INVALID_GTAG_RESOURCE]: { gtagURL: string };\n}\n\nexport const ERROR_FACTORY = new ErrorFactory<AnalyticsError, ErrorParams>(\n  'analytics',\n  'Analytics',\n  ERRORS\n);\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  CustomParams,\n  ControlParams,\n  EventParams,\n  ConsentSettings\n} from './public-types';\nimport { DynamicConfig, DataLayer, Gtag, MinimalDynamicConfig } from './types';\nimport { GtagCommand, GTAG_URL } from './constants';\nimport { logger } from './logger';\nimport { AnalyticsError, ERROR_FACTORY } from './errors';\n\n// Possible parameter types for gtag 'event' and 'config' commands\ntype GtagConfigOrEventParams = ControlParams & EventParams & CustomParams;\n\n/**\n * Verifies and creates a TrustedScriptURL.\n */\nexport function createGtagTrustedTypesScriptURL(url: string): string {\n  if (!url.startsWith(GTAG_URL)) {\n    const err = ERROR_FACTORY.create(AnalyticsError.INVALID_GTAG_RESOURCE, {\n      gtagURL: url\n    });\n    logger.warn(err.message);\n    return '';\n  }\n  return url;\n}\n\n/**\n * Makeshift polyfill for Promise.allSettled(). Resolves when all promises\n * have either resolved or rejected.\n *\n * @param promises Array of promises to wait for.\n */\nexport function promiseAllSettled<T>(\n  promises: Array<Promise<T>>\n): Promise<T[]> {\n  return Promise.all(promises.map(promise => promise.catch(e => e)));\n}\n\n/**\n * Creates a TrustedTypePolicy object that implements the rules passed as policyOptions.\n *\n * @param policyName A string containing the name of the policy\n * @param policyOptions Object containing implementations of instance methods for TrustedTypesPolicy, see {@link https://developer.mozilla.org/en-US/docs/Web/API/TrustedTypePolicy#instance_methods\n * | the TrustedTypePolicy reference documentation}.\n */\nexport function createTrustedTypesPolicy(\n  policyName: string,\n  policyOptions: Partial<TrustedTypePolicyOptions>\n): Partial<TrustedTypePolicy> | undefined {\n  // Create a TrustedTypes policy that we can use for updating src\n  // properties\n  let trustedTypesPolicy: Partial<TrustedTypePolicy> | undefined;\n  if (window.trustedTypes) {\n    trustedTypesPolicy = window.trustedTypes.createPolicy(\n      policyName,\n      policyOptions\n    );\n  }\n  return trustedTypesPolicy;\n}\n\n/**\n * Inserts gtag script tag into the page to asynchronously download gtag.\n * @param dataLayerName Name of datalayer (most often the default, \"_dataLayer\").\n */\nexport function insertScriptTag(\n  dataLayerName: string,\n  measurementId: string\n): void {\n  const trustedTypesPolicy = createTrustedTypesPolicy(\n    'firebase-js-sdk-policy',\n    {\n      createScriptURL: createGtagTrustedTypesScriptURL\n    }\n  );\n\n  const script = document.createElement('script');\n  // We are not providing an analyticsId in the URL because it would trigger a `page_view`\n  // without fid. We will initialize ga-id using gtag (config) command together with fid.\n\n  const gtagScriptURL = `${GTAG_URL}?l=${dataLayerName}&id=${measurementId}`;\n  (script.src as string | TrustedScriptURL) = trustedTypesPolicy\n    ? (trustedTypesPolicy as TrustedTypePolicy)?.createScriptURL(gtagScriptURL)\n    : gtagScriptURL;\n\n  script.async = true;\n  document.head.appendChild(script);\n}\n\n/**\n * Get reference to, or create, global datalayer.\n * @param dataLayerName Name of datalayer (most often the default, \"_dataLayer\").\n */\nexport function getOrCreateDataLayer(dataLayerName: string): DataLayer {\n  // Check for existing dataLayer and create if needed.\n  let dataLayer: DataLayer = [];\n  if (Array.isArray(window[dataLayerName])) {\n    dataLayer = window[dataLayerName] as DataLayer;\n  } else {\n    window[dataLayerName] = dataLayer;\n  }\n  return dataLayer;\n}\n\n/**\n * Wrapped gtag logic when gtag is called with 'config' command.\n *\n * @param gtagCore Basic gtag function that just appends to dataLayer.\n * @param initializationPromisesMap Map of appIds to their initialization promises.\n * @param dynamicConfigPromisesList Array of dynamic config fetch promises.\n * @param measurementIdToAppId Map of GA measurementIDs to corresponding Firebase appId.\n * @param measurementId GA Measurement ID to set config for.\n * @param gtagParams Gtag config params to set.\n */\nasync function gtagOnConfig(\n  gtagCore: Gtag,\n  initializationPromisesMap: { [appId: string]: Promise<string> },\n  dynamicConfigPromisesList: Array<\n    Promise<DynamicConfig | MinimalDynamicConfig>\n  >,\n  measurementIdToAppId: { [measurementId: string]: string },\n  measurementId: string,\n  gtagParams?: ControlParams & EventParams & CustomParams\n): Promise<void> {\n  // If config is already fetched, we know the appId and can use it to look up what FID promise we\n  /// are waiting for, and wait only on that one.\n  const correspondingAppId = measurementIdToAppId[measurementId as string];\n  try {\n    if (correspondingAppId) {\n      await initializationPromisesMap[correspondingAppId];\n    } else {\n      // If config is not fetched yet, wait for all configs (we don't know which one we need) and\n      // find the appId (if any) corresponding to this measurementId. If there is one, wait on\n      // that appId's initialization promise. If there is none, promise resolves and gtag\n      // call goes through.\n      const dynamicConfigResults = await promiseAllSettled(\n        dynamicConfigPromisesList\n      );\n      const foundConfig = dynamicConfigResults.find(\n        config => config.measurementId === measurementId\n      );\n      if (foundConfig) {\n        await initializationPromisesMap[foundConfig.appId];\n      }\n    }\n  } catch (e) {\n    logger.error(e);\n  }\n  gtagCore(GtagCommand.CONFIG, measurementId, gtagParams);\n}\n\n/**\n * Wrapped gtag logic when gtag is called with 'event' command.\n *\n * @param gtagCore Basic gtag function that just appends to dataLayer.\n * @param initializationPromisesMap Map of appIds to their initialization promises.\n * @param dynamicConfigPromisesList Array of dynamic config fetch promises.\n * @param measurementId GA Measurement ID to log event to.\n * @param gtagParams Params to log with this event.\n */\nasync function gtagOnEvent(\n  gtagCore: Gtag,\n  initializationPromisesMap: { [appId: string]: Promise<string> },\n  dynamicConfigPromisesList: Array<\n    Promise<DynamicConfig | MinimalDynamicConfig>\n  >,\n  measurementId: string,\n  gtagParams?: ControlParams & EventParams & CustomParams\n): Promise<void> {\n  try {\n    let initializationPromisesToWaitFor: Array<Promise<string>> = [];\n\n    // If there's a 'send_to' param, check if any ID specified matches\n    // an initializeIds() promise we are waiting for.\n    if (gtagParams && gtagParams['send_to']) {\n      let gaSendToList: string | string[] = gtagParams['send_to'];\n      // Make it an array if is isn't, so it can be dealt with the same way.\n      if (!Array.isArray(gaSendToList)) {\n        gaSendToList = [gaSendToList];\n      }\n      // Checking 'send_to' fields requires having all measurement ID results back from\n      // the dynamic config fetch.\n      const dynamicConfigResults = await promiseAllSettled(\n        dynamicConfigPromisesList\n      );\n      for (const sendToId of gaSendToList) {\n        // Any fetched dynamic measurement ID that matches this 'send_to' ID\n        const foundConfig = dynamicConfigResults.find(\n          config => config.measurementId === sendToId\n        );\n        const initializationPromise =\n          foundConfig && initializationPromisesMap[foundConfig.appId];\n        if (initializationPromise) {\n          initializationPromisesToWaitFor.push(initializationPromise);\n        } else {\n          // Found an item in 'send_to' that is not associated\n          // directly with an FID, possibly a group.  Empty this array,\n          // exit the loop early, and let it get populated below.\n          initializationPromisesToWaitFor = [];\n          break;\n        }\n      }\n    }\n\n    // This will be unpopulated if there was no 'send_to' field , or\n    // if not all entries in the 'send_to' field could be mapped to\n    // a FID. In these cases, wait on all pending initialization promises.\n    if (initializationPromisesToWaitFor.length === 0) {\n      /* eslint-disable-next-line @typescript-eslint/no-floating-promises */\n      initializationPromisesToWaitFor = Object.values(\n        initializationPromisesMap\n      );\n    }\n\n    // Run core gtag function with args after all relevant initialization\n    // promises have been resolved.\n    await Promise.all(initializationPromisesToWaitFor);\n    // Workaround for http://b/141370449 - third argument cannot be undefined.\n    gtagCore(GtagCommand.EVENT, measurementId, gtagParams || {});\n  } catch (e) {\n    logger.error(e);\n  }\n}\n\n/**\n * Wraps a standard gtag function with extra code to wait for completion of\n * relevant initialization promises before sending requests.\n *\n * @param gtagCore Basic gtag function that just appends to dataLayer.\n * @param initializationPromisesMap Map of appIds to their initialization promises.\n * @param dynamicConfigPromisesList Array of dynamic config fetch promises.\n * @param measurementIdToAppId Map of GA measurementIDs to corresponding Firebase appId.\n */\nfunction wrapGtag(\n  gtagCore: Gtag,\n  /**\n   * Allows wrapped gtag calls to wait on whichever initialization promises are required,\n   * depending on the contents of the gtag params' `send_to` field, if any.\n   */\n  initializationPromisesMap: { [appId: string]: Promise<string> },\n  /**\n   * Wrapped gtag calls sometimes require all dynamic config fetches to have returned\n   * before determining what initialization promises (which include FIDs) to wait for.\n   */\n  dynamicConfigPromisesList: Array<\n    Promise<DynamicConfig | MinimalDynamicConfig>\n  >,\n  /**\n   * Wrapped gtag config calls can narrow down which initialization promise (with FID)\n   * to wait for if the measurementId is already fetched, by getting the corresponding appId,\n   * which is the key for the initialization promises map.\n   */\n  measurementIdToAppId: { [measurementId: string]: string }\n): Gtag {\n  /**\n   * Wrapper around gtag that ensures FID is sent with gtag calls.\n   * @param command Gtag command type.\n   * @param idOrNameOrParams Measurement ID if command is EVENT/CONFIG, params if command is SET.\n   * @param gtagParams Params if event is EVENT/CONFIG.\n   */\n  async function gtagWrapper(\n    command: 'config' | 'set' | 'event' | 'consent' | 'get' | string,\n    ...args: unknown[]\n  ): Promise<void> {\n    try {\n      // If event, check that relevant initialization promises have completed.\n      if (command === GtagCommand.EVENT) {\n        const [measurementId, gtagParams] = args;\n        // If EVENT, second arg must be measurementId.\n        await gtagOnEvent(\n          gtagCore,\n          initializationPromisesMap,\n          dynamicConfigPromisesList,\n          measurementId as string,\n          gtagParams as GtagConfigOrEventParams\n        );\n      } else if (command === GtagCommand.CONFIG) {\n        const [measurementId, gtagParams] = args;\n        // If CONFIG, second arg must be measurementId.\n        await gtagOnConfig(\n          gtagCore,\n          initializationPromisesMap,\n          dynamicConfigPromisesList,\n          measurementIdToAppId,\n          measurementId as string,\n          gtagParams as GtagConfigOrEventParams\n        );\n      } else if (command === GtagCommand.CONSENT) {\n        const [consentAction, gtagParams] = args;\n        // consentAction can be one of 'default' or 'update'.\n        gtagCore(\n          GtagCommand.CONSENT,\n          consentAction,\n          gtagParams as ConsentSettings\n        );\n      } else if (command === GtagCommand.GET) {\n        const [measurementId, fieldName, callback] = args;\n        gtagCore(\n          GtagCommand.GET,\n          measurementId as string,\n          fieldName as string,\n          callback as (...args: unknown[]) => void\n        );\n      } else if (command === GtagCommand.SET) {\n        const [customParams] = args;\n        // If SET, second arg must be params.\n        gtagCore(GtagCommand.SET, customParams as CustomParams);\n      } else {\n        gtagCore(command, ...args);\n      }\n    } catch (e) {\n      logger.error(e);\n    }\n  }\n  return gtagWrapper as Gtag;\n}\n\n/**\n * Creates global gtag function or wraps existing one if found.\n * This wrapped function attaches Firebase instance ID (FID) to gtag 'config' and\n * 'event' calls that belong to the GAID associated with this Firebase instance.\n *\n * @param initializationPromisesMap Map of appIds to their initialization promises.\n * @param dynamicConfigPromisesList Array of dynamic config fetch promises.\n * @param measurementIdToAppId Map of GA measurementIDs to corresponding Firebase appId.\n * @param dataLayerName Name of global GA datalayer array.\n * @param gtagFunctionName Name of global gtag function (\"gtag\" if not user-specified).\n */\nexport function wrapOrCreateGtag(\n  initializationPromisesMap: { [appId: string]: Promise<string> },\n  dynamicConfigPromisesList: Array<\n    Promise<DynamicConfig | MinimalDynamicConfig>\n  >,\n  measurementIdToAppId: { [measurementId: string]: string },\n  dataLayerName: string,\n  gtagFunctionName: string\n): {\n  gtagCore: Gtag;\n  wrappedGtag: Gtag;\n} {\n  // Create a basic core gtag function\n  let gtagCore: Gtag = function (..._args: unknown[]) {\n    // Must push IArguments object, not an array.\n    (window[dataLayerName] as DataLayer).push(arguments);\n  };\n\n  // Replace it with existing one if found\n  if (\n    window[gtagFunctionName] &&\n    typeof window[gtagFunctionName] === 'function'\n  ) {\n    // @ts-ignore\n    gtagCore = window[gtagFunctionName];\n  }\n\n  window[gtagFunctionName] = wrapGtag(\n    gtagCore,\n    initializationPromisesMap,\n    dynamicConfigPromisesList,\n    measurementIdToAppId\n  );\n\n  return {\n    gtagCore,\n    wrappedGtag: window[gtagFunctionName] as Gtag\n  };\n}\n\n/**\n * Returns the script tag in the DOM matching both the gtag url pattern\n * and the provided data layer name.\n */\nexport function findGtagScriptOnPage(\n  dataLayerName: string\n): HTMLScriptElement | null {\n  const scriptTags = window.document.getElementsByTagName('script');\n  for (const tag of Object.values(scriptTags)) {\n    if (\n      tag.src &&\n      tag.src.includes(GTAG_URL) &&\n      tag.src.includes(dataLayerName)\n    ) {\n      return tag;\n    }\n  }\n  return null;\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview Most logic is copied from packages/remote-config/src/client/retrying_client.ts\n */\n\nimport { FirebaseApp } from '@firebase/app';\nimport { DynamicConfig, ThrottleMetadata, MinimalDynamicConfig } from './types';\nimport { FirebaseError, calculateBackoffMillis } from '@firebase/util';\nimport { AnalyticsError, ERROR_FACTORY } from './errors';\nimport { DYNAMIC_CONFIG_URL, FETCH_TIMEOUT_MILLIS } from './constants';\nimport { logger } from './logger';\n\n// App config fields needed by analytics.\nexport interface AppFields {\n  appId: string;\n  apiKey: string;\n  measurementId?: string;\n}\n\n/**\n * Backoff factor for 503 errors, which we want to be conservative about\n * to avoid overloading servers. Each retry interval will be\n * BASE_INTERVAL_MILLIS * LONG_RETRY_FACTOR ^ retryCount, so the second one\n * will be ~30 seconds (with fuzzing).\n */\nexport const LONG_RETRY_FACTOR = 30;\n\n/**\n * Base wait interval to multiplied by backoffFactor^backoffCount.\n */\nconst BASE_INTERVAL_MILLIS = 1000;\n\n/**\n * Stubbable retry data storage class.\n */\nclass RetryData {\n  constructor(\n    public throttleMetadata: { [appId: string]: ThrottleMetadata } = {},\n    public intervalMillis: number = BASE_INTERVAL_MILLIS\n  ) {}\n\n  getThrottleMetadata(appId: string): ThrottleMetadata {\n    return this.throttleMetadata[appId];\n  }\n\n  setThrottleMetadata(appId: string, metadata: ThrottleMetadata): void {\n    this.throttleMetadata[appId] = metadata;\n  }\n\n  deleteThrottleMetadata(appId: string): void {\n    delete this.throttleMetadata[appId];\n  }\n}\n\nconst defaultRetryData = new RetryData();\n\n/**\n * Set GET request headers.\n * @param apiKey App API key.\n */\nfunction getHeaders(apiKey: string): Headers {\n  return new Headers({\n    Accept: 'application/json',\n    'x-goog-api-key': apiKey\n  });\n}\n\n/**\n * Fetches dynamic config from backend.\n * @param app Firebase app to fetch config for.\n */\nexport async function fetchDynamicConfig(\n  appFields: AppFields\n): Promise<DynamicConfig> {\n  const { appId, apiKey } = appFields;\n  const request: RequestInit = {\n    method: 'GET',\n    headers: getHeaders(apiKey)\n  };\n  const appUrl = DYNAMIC_CONFIG_URL.replace('{app-id}', appId);\n  const response = await fetch(appUrl, request);\n  if (response.status !== 200 && response.status !== 304) {\n    let errorMessage = '';\n    try {\n      // Try to get any error message text from server response.\n      const jsonResponse = (await response.json()) as {\n        error?: { message?: string };\n      };\n      if (jsonResponse.error?.message) {\n        errorMessage = jsonResponse.error.message;\n      }\n    } catch (_ignored) {}\n    throw ERROR_FACTORY.create(AnalyticsError.CONFIG_FETCH_FAILED, {\n      httpStatus: response.status,\n      responseMessage: errorMessage\n    });\n  }\n  return response.json();\n}\n\n/**\n * Fetches dynamic config from backend, retrying if failed.\n * @param app Firebase app to fetch config for.\n */\nexport async function fetchDynamicConfigWithRetry(\n  app: FirebaseApp,\n  // retryData and timeoutMillis are parameterized to allow passing a different value for testing.\n  retryData: RetryData = defaultRetryData,\n  timeoutMillis?: number\n): Promise<DynamicConfig | MinimalDynamicConfig> {\n  const { appId, apiKey, measurementId } = app.options;\n\n  if (!appId) {\n    throw ERROR_FACTORY.create(AnalyticsError.NO_APP_ID);\n  }\n\n  if (!apiKey) {\n    if (measurementId) {\n      return {\n        measurementId,\n        appId\n      };\n    }\n    throw ERROR_FACTORY.create(AnalyticsError.NO_API_KEY);\n  }\n\n  const throttleMetadata: ThrottleMetadata = retryData.getThrottleMetadata(\n    appId\n  ) || {\n    backoffCount: 0,\n    throttleEndTimeMillis: Date.now()\n  };\n\n  const signal = new AnalyticsAbortSignal();\n\n  setTimeout(\n    async () => {\n      // Note a very low delay, eg < 10ms, can elapse before listeners are initialized.\n      signal.abort();\n    },\n    timeoutMillis !== undefined ? timeoutMillis : FETCH_TIMEOUT_MILLIS\n  );\n\n  return attemptFetchDynamicConfigWithRetry(\n    { appId, apiKey, measurementId },\n    throttleMetadata,\n    signal,\n    retryData\n  );\n}\n\n/**\n * Runs one retry attempt.\n * @param appFields Necessary app config fields.\n * @param throttleMetadata Ongoing metadata to determine throttling times.\n * @param signal Abort signal.\n */\nasync function attemptFetchDynamicConfigWithRetry(\n  appFields: AppFields,\n  { throttleEndTimeMillis, backoffCount }: ThrottleMetadata,\n  signal: AnalyticsAbortSignal,\n  retryData: RetryData = defaultRetryData // for testing\n): Promise<DynamicConfig | MinimalDynamicConfig> {\n  const { appId, measurementId } = appFields;\n  // Starts with a (potentially zero) timeout to support resumption from stored state.\n  // Ensures the throttle end time is honored if the last attempt timed out.\n  // Note the SDK will never make a request if the fetch timeout expires at this point.\n  try {\n    await setAbortableTimeout(signal, throttleEndTimeMillis);\n  } catch (e) {\n    if (measurementId) {\n      logger.warn(\n        `Timed out fetching this Firebase app's measurement ID from the server.` +\n          ` Falling back to the measurement ID ${measurementId}` +\n          ` provided in the \"measurementId\" field in the local Firebase config. [${\n            (e as Error)?.message\n          }]`\n      );\n      return { appId, measurementId };\n    }\n    throw e;\n  }\n\n  try {\n    const response = await fetchDynamicConfig(appFields);\n\n    // Note the SDK only clears throttle state if response is success or non-retriable.\n    retryData.deleteThrottleMetadata(appId);\n\n    return response;\n  } catch (e) {\n    const error = e as Error;\n    if (!isRetriableError(error)) {\n      retryData.deleteThrottleMetadata(appId);\n      if (measurementId) {\n        logger.warn(\n          `Failed to fetch this Firebase app's measurement ID from the server.` +\n            ` Falling back to the measurement ID ${measurementId}` +\n            ` provided in the \"measurementId\" field in the local Firebase config. [${error?.message}]`\n        );\n        return { appId, measurementId };\n      } else {\n        throw e;\n      }\n    }\n\n    const backoffMillis =\n      Number(error?.customData?.httpStatus) === 503\n        ? calculateBackoffMillis(\n            backoffCount,\n            retryData.intervalMillis,\n            LONG_RETRY_FACTOR\n          )\n        : calculateBackoffMillis(backoffCount, retryData.intervalMillis);\n\n    // Increments backoff state.\n    const throttleMetadata = {\n      throttleEndTimeMillis: Date.now() + backoffMillis,\n      backoffCount: backoffCount + 1\n    };\n\n    // Persists state.\n    retryData.setThrottleMetadata(appId, throttleMetadata);\n    logger.debug(`Calling attemptFetch again in ${backoffMillis} millis`);\n\n    return attemptFetchDynamicConfigWithRetry(\n      appFields,\n      throttleMetadata,\n      signal,\n      retryData\n    );\n  }\n}\n\n/**\n * Supports waiting on a backoff by:\n *\n * <ul>\n *   <li>Promisifying setTimeout, so we can set a timeout in our Promise chain</li>\n *   <li>Listening on a signal bus for abort events, just like the Fetch API</li>\n *   <li>Failing in the same way the Fetch API fails, so timing out a live request and a throttled\n *       request appear the same.</li>\n * </ul>\n *\n * <p>Visible for testing.\n */\nfunction setAbortableTimeout(\n  signal: AnalyticsAbortSignal,\n  throttleEndTimeMillis: number\n): Promise<void> {\n  return new Promise((resolve, reject) => {\n    // Derives backoff from given end time, normalizing negative numbers to zero.\n    const backoffMillis = Math.max(throttleEndTimeMillis - Date.now(), 0);\n\n    const timeout = setTimeout(resolve, backoffMillis);\n\n    // Adds listener, rather than sets onabort, because signal is a shared object.\n    signal.addEventListener(() => {\n      clearTimeout(timeout);\n      // If the request completes before this timeout, the rejection has no effect.\n      reject(\n        ERROR_FACTORY.create(AnalyticsError.FETCH_THROTTLE, {\n          throttleEndTimeMillis\n        })\n      );\n    });\n  });\n}\n\ntype RetriableError = FirebaseError & { customData: { httpStatus: string } };\n\n/**\n * Returns true if the {@link Error} indicates a fetch request may succeed later.\n */\nfunction isRetriableError(e: Error): e is RetriableError {\n  if (!(e instanceof FirebaseError) || !e.customData) {\n    return false;\n  }\n\n  // Uses string index defined by ErrorData, which FirebaseError implements.\n  const httpStatus = Number(e.customData['httpStatus']);\n\n  return (\n    httpStatus === 429 ||\n    httpStatus === 500 ||\n    httpStatus === 503 ||\n    httpStatus === 504\n  );\n}\n\n/**\n * Shims a minimal AbortSignal (copied from Remote Config).\n *\n * <p>AbortController's AbortSignal conveniently decouples fetch timeout logic from other aspects\n * of networking, such as retries. Firebase doesn't use AbortController enough to justify a\n * polyfill recommendation, like we do with the Fetch API, but this minimal shim can easily be\n * swapped out if/when we do.\n */\nexport class AnalyticsAbortSignal {\n  listeners: Array<() => void> = [];\n  addEventListener(listener: () => void): void {\n    this.listeners.push(listener);\n  }\n  abort(): void {\n    this.listeners.forEach(listener => listener());\n  }\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  AnalyticsCallOptions,\n  CustomParams,\n  ControlParams,\n  EventParams,\n  ConsentSettings\n} from './public-types';\nimport { Gtag } from './types';\nimport { GtagCommand } from './constants';\nimport { AnalyticsError, ERROR_FACTORY } from './errors';\n\n/**\n * Event parameters to set on 'gtag' during initialization.\n */\nexport let defaultEventParametersForInit: CustomParams | undefined;\n\n/**\n * Logs an analytics event through the Firebase SDK.\n *\n * @param gtagFunction Wrapped gtag function that waits for fid to be set before sending an event\n * @param eventName Google Analytics event name, choose from standard list or use a custom string.\n * @param eventParams Analytics event parameters.\n */\nexport async function logEvent(\n  gtagFunction: Gtag,\n  initializationPromise: Promise<string>,\n  eventName: string,\n  eventParams?: EventParams,\n  options?: AnalyticsCallOptions\n): Promise<void> {\n  if (options && options.global) {\n    gtagFunction(GtagCommand.EVENT, eventName, eventParams);\n    return;\n  } else {\n    const measurementId = await initializationPromise;\n    const params: EventParams | ControlParams = {\n      ...eventParams,\n      'send_to': measurementId\n    };\n    gtagFunction(GtagCommand.EVENT, eventName, params);\n  }\n}\n\n/**\n * Set screen_name parameter for this Google Analytics ID.\n *\n * @deprecated Use {@link logEvent} with `eventName` as 'screen_view' and add relevant `eventParams`.\n * See {@link https://firebase.google.com/docs/analytics/screenviews | Track Screenviews}.\n *\n * @param gtagFunction Wrapped gtag function that waits for fid to be set before sending an event\n * @param screenName Screen name string to set.\n */\nexport async function setCurrentScreen(\n  gtagFunction: Gtag,\n  initializationPromise: Promise<string>,\n  screenName: string | null,\n  options?: AnalyticsCallOptions\n): Promise<void> {\n  if (options && options.global) {\n    gtagFunction(GtagCommand.SET, { 'screen_name': screenName });\n    return Promise.resolve();\n  } else {\n    const measurementId = await initializationPromise;\n    gtagFunction(GtagCommand.CONFIG, measurementId, {\n      update: true,\n      'screen_name': screenName\n    });\n  }\n}\n\n/**\n * Set user_id parameter for this Google Analytics ID.\n *\n * @param gtagFunction Wrapped gtag function that waits for fid to be set before sending an event\n * @param id User ID string to set\n */\nexport async function setUserId(\n  gtagFunction: Gtag,\n  initializationPromise: Promise<string>,\n  id: string | null,\n  options?: AnalyticsCallOptions\n): Promise<void> {\n  if (options && options.global) {\n    gtagFunction(GtagCommand.SET, { 'user_id': id });\n    return Promise.resolve();\n  } else {\n    const measurementId = await initializationPromise;\n    gtagFunction(GtagCommand.CONFIG, measurementId, {\n      update: true,\n      'user_id': id\n    });\n  }\n}\n\n/**\n * Set all other user properties other than user_id and screen_name.\n *\n * @param gtagFunction Wrapped gtag function that waits for fid to be set before sending an event\n * @param properties Map of user properties to set\n */\nexport async function setUserProperties(\n  gtagFunction: Gtag,\n  initializationPromise: Promise<string>,\n  properties: CustomParams,\n  options?: AnalyticsCallOptions\n): Promise<void> {\n  if (options && options.global) {\n    const flatProperties: { [key: string]: unknown } = {};\n    for (const key of Object.keys(properties)) {\n      // use dot notation for merge behavior in gtag.js\n      flatProperties[`user_properties.${key}`] = properties[key];\n    }\n    gtagFunction(GtagCommand.SET, flatProperties);\n    return Promise.resolve();\n  } else {\n    const measurementId = await initializationPromise;\n    gtagFunction(GtagCommand.CONFIG, measurementId, {\n      update: true,\n      'user_properties': properties\n    });\n  }\n}\n\n/**\n * Retrieves a unique Google Analytics identifier for the web client.\n * See {@link https://developers.google.com/analytics/devguides/collection/ga4/reference/config#client_id | client_id}.\n *\n * @param gtagFunction Wrapped gtag function that waits for fid to be set before sending an event\n */\nexport async function internalGetGoogleAnalyticsClientId(\n  gtagFunction: Gtag,\n  initializationPromise: Promise<string>\n): Promise<string> {\n  const measurementId = await initializationPromise;\n  return new Promise((resolve, reject) => {\n    gtagFunction(\n      GtagCommand.GET,\n      measurementId,\n      'client_id',\n      (clientId: string) => {\n        if (!clientId) {\n          reject(ERROR_FACTORY.create(AnalyticsError.NO_CLIENT_ID));\n        }\n        resolve(clientId);\n      }\n    );\n  });\n}\n\n/**\n * Set whether collection is enabled for this ID.\n *\n * @param enabled If true, collection is enabled for this ID.\n */\nexport async function setAnalyticsCollectionEnabled(\n  initializationPromise: Promise<string>,\n  enabled: boolean\n): Promise<void> {\n  const measurementId = await initializationPromise;\n  window[`ga-disable-${measurementId}`] = !enabled;\n}\n\n/**\n * Consent parameters to default to during 'gtag' initialization.\n */\nexport let defaultConsentSettingsForInit: ConsentSettings | undefined;\n\n/**\n * Sets the variable {@link defaultConsentSettingsForInit} for use in the initialization of\n * analytics.\n *\n * @param consentSettings Maps the applicable end user consent state for gtag.js.\n */\nexport function _setConsentDefaultForInit(\n  consentSettings?: ConsentSettings\n): void {\n  defaultConsentSettingsForInit = consentSettings;\n}\n\n/**\n * Sets the variable `defaultEventParametersForInit` for use in the initialization of\n * analytics.\n *\n * @param customParams Any custom params the user may pass to gtag.js.\n */\nexport function _setDefaultEventParametersForInit(\n  customParams?: CustomParams\n): void {\n  defaultEventParametersForInit = customParams;\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { DynamicConfig, Gtag, MinimalDynamicConfig } from './types';\nimport { GtagCommand, GA_FID_KEY, ORIGIN_KEY } from './constants';\nimport { _FirebaseInstallationsInternal } from '@firebase/installations';\nimport { fetchDynamicConfigWithRetry } from './get-config';\nimport { logger } from './logger';\nimport { FirebaseApp } from '@firebase/app';\nimport {\n  isIndexedDBAvailable,\n  validateIndexedDBOpenable\n} from '@firebase/util';\nimport { ERROR_FACTORY, AnalyticsError } from './errors';\nimport { findGtagScriptOnPage, insertScriptTag } from './helpers';\nimport { AnalyticsSettings } from './public-types';\nimport {\n  defaultConsentSettingsForInit,\n  _setConsentDefaultForInit,\n  defaultEventParametersForInit,\n  _setDefaultEventParametersForInit\n} from './functions';\n\nasync function validateIndexedDB(): Promise<boolean> {\n  if (!isIndexedDBAvailable()) {\n    logger.warn(\n      ERROR_FACTORY.create(AnalyticsError.INDEXEDDB_UNAVAILABLE, {\n        errorInfo: 'IndexedDB is not available in this environment.'\n      }).message\n    );\n    return false;\n  } else {\n    try {\n      await validateIndexedDBOpenable();\n    } catch (e) {\n      logger.warn(\n        ERROR_FACTORY.create(AnalyticsError.INDEXEDDB_UNAVAILABLE, {\n          errorInfo: (e as Error)?.toString()\n        }).message\n      );\n      return false;\n    }\n  }\n  return true;\n}\n\n/**\n * Initialize the analytics instance in gtag.js by calling config command with fid.\n *\n * NOTE: We combine analytics initialization and setting fid together because we want fid to be\n * part of the `page_view` event that's sent during the initialization\n * @param app Firebase app\n * @param gtagCore The gtag function that's not wrapped.\n * @param dynamicConfigPromisesList Array of all dynamic config promises.\n * @param measurementIdToAppId Maps measurementID to appID.\n * @param installations _FirebaseInstallationsInternal instance.\n *\n * @returns Measurement ID.\n */\nexport async function _initializeAnalytics(\n  app: FirebaseApp,\n  dynamicConfigPromisesList: Array<\n    Promise<DynamicConfig | MinimalDynamicConfig>\n  >,\n  measurementIdToAppId: { [key: string]: string },\n  installations: _FirebaseInstallationsInternal,\n  gtagCore: Gtag,\n  dataLayerName: string,\n  options?: AnalyticsSettings\n): Promise<string> {\n  const dynamicConfigPromise = fetchDynamicConfigWithRetry(app);\n  // Once fetched, map measurementIds to appId, for ease of lookup in wrapped gtag function.\n  dynamicConfigPromise\n    .then(config => {\n      measurementIdToAppId[config.measurementId] = config.appId;\n      if (\n        app.options.measurementId &&\n        config.measurementId !== app.options.measurementId\n      ) {\n        logger.warn(\n          `The measurement ID in the local Firebase config (${app.options.measurementId})` +\n            ` does not match the measurement ID fetched from the server (${config.measurementId}).` +\n            ` To ensure analytics events are always sent to the correct Analytics property,` +\n            ` update the` +\n            ` measurement ID field in the local config or remove it from the local config.`\n        );\n      }\n    })\n    .catch(e => logger.error(e));\n  // Add to list to track state of all dynamic config promises.\n  dynamicConfigPromisesList.push(dynamicConfigPromise);\n\n  const fidPromise: Promise<string | undefined> = validateIndexedDB().then(\n    envIsValid => {\n      if (envIsValid) {\n        return installations.getId();\n      } else {\n        return undefined;\n      }\n    }\n  );\n\n  const [dynamicConfig, fid] = await Promise.all([\n    dynamicConfigPromise,\n    fidPromise\n  ]);\n\n  // Detect if user has already put the gtag <script> tag on this page with the passed in\n  // data layer name.\n  if (!findGtagScriptOnPage(dataLayerName)) {\n    insertScriptTag(dataLayerName, dynamicConfig.measurementId);\n  }\n\n  // Detects if there are consent settings that need to be configured.\n  if (defaultConsentSettingsForInit) {\n    gtagCore(GtagCommand.CONSENT, 'default', defaultConsentSettingsForInit);\n    _setConsentDefaultForInit(undefined);\n  }\n\n  // This command initializes gtag.js and only needs to be called once for the entire web app,\n  // but since it is idempotent, we can call it multiple times.\n  // We keep it together with other initialization logic for better code structure.\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  (gtagCore as any)('js', new Date());\n  // User config added first. We don't want users to accidentally overwrite\n  // base Firebase config properties.\n  const configProperties: Record<string, unknown> = options?.config ?? {};\n\n  // guard against developers accidentally setting properties with prefix `firebase_`\n  configProperties[ORIGIN_KEY] = 'firebase';\n  configProperties.update = true;\n\n  if (fid != null) {\n    configProperties[GA_FID_KEY] = fid;\n  }\n\n  // It should be the first config command called on this GA-ID\n  // Initialize this GA-ID and set FID on it using the gtag config API.\n  // Note: This will trigger a page_view event unless 'send_page_view' is set to false in\n  // `configProperties`.\n  gtagCore(GtagCommand.CONFIG, dynamicConfig.measurementId, configProperties);\n\n  // Detects if there is data that will be set on every event logged from the SDK.\n  if (defaultEventParametersForInit) {\n    gtagCore(GtagCommand.SET, defaultEventParametersForInit);\n    _setDefaultEventParametersForInit(undefined);\n  }\n\n  return dynamicConfig.measurementId;\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { SettingsOptions, Analytics, AnalyticsSettings } from './public-types';\nimport { Gtag, DynamicConfig, MinimalDynamicConfig } from './types';\nimport { getOrCreateDataLayer, wrapOrCreateGtag } from './helpers';\nimport { AnalyticsError, ERROR_FACTORY } from './errors';\nimport { _FirebaseInstallationsInternal } from '@firebase/installations';\nimport { areCookiesEnabled, isBrowserExtension } from '@firebase/util';\nimport { _initializeAnalytics } from './initialize-analytics';\nimport { logger } from './logger';\nimport { FirebaseApp, _FirebaseService } from '@firebase/app';\n\n/**\n * Analytics Service class.\n */\nexport class AnalyticsService implements Analytics, _FirebaseService {\n  constructor(public app: FirebaseApp) {}\n  _delete(): Promise<void> {\n    delete initializationPromisesMap[this.app.options.appId!];\n    return Promise.resolve();\n  }\n}\n\n/**\n * Maps appId to full initialization promise. Wrapped gtag calls must wait on\n * all or some of these, depending on the call's `send_to` param and the status\n * of the dynamic config fetches (see below).\n */\nexport let initializationPromisesMap: {\n  [appId: string]: Promise<string>; // Promise contains measurement ID string.\n} = {};\n\n/**\n * List of dynamic config fetch promises. In certain cases, wrapped gtag calls\n * wait on all these to be complete in order to determine if it can selectively\n * wait for only certain initialization (FID) promises or if it must wait for all.\n */\nlet dynamicConfigPromisesList: Array<\n  Promise<DynamicConfig | MinimalDynamicConfig>\n> = [];\n\n/**\n * Maps fetched measurementIds to appId. Populated when the app's dynamic config\n * fetch completes. If already populated, gtag config calls can use this to\n * selectively wait for only this app's initialization promise (FID) instead of all\n * initialization promises.\n */\nconst measurementIdToAppId: { [measurementId: string]: string } = {};\n\n/**\n * Name for window global data layer array used by GA: defaults to 'dataLayer'.\n */\nlet dataLayerName: string = 'dataLayer';\n\n/**\n * Name for window global gtag function used by GA: defaults to 'gtag'.\n */\nlet gtagName: string = 'gtag';\n\n/**\n * Reproduction of standard gtag function or reference to existing\n * gtag function on window object.\n */\nlet gtagCoreFunction: Gtag;\n\n/**\n * Wrapper around gtag function that ensures FID is sent with all\n * relevant event and config calls.\n */\nexport let wrappedGtagFunction: Gtag;\n\n/**\n * Flag to ensure page initialization steps (creation or wrapping of\n * dataLayer and gtag script) are only run once per page load.\n */\nlet globalInitDone: boolean = false;\n\n/**\n * For testing\n * @internal\n */\nexport function resetGlobalVars(\n  newGlobalInitDone = false,\n  newInitializationPromisesMap = {},\n  newDynamicPromises = []\n): void {\n  globalInitDone = newGlobalInitDone;\n  initializationPromisesMap = newInitializationPromisesMap;\n  dynamicConfigPromisesList = newDynamicPromises;\n  dataLayerName = 'dataLayer';\n  gtagName = 'gtag';\n}\n\n/**\n * For testing\n * @internal\n */\nexport function getGlobalVars(): {\n  initializationPromisesMap: { [appId: string]: Promise<string> };\n  dynamicConfigPromisesList: Array<\n    Promise<DynamicConfig | MinimalDynamicConfig>\n  >;\n} {\n  return {\n    initializationPromisesMap,\n    dynamicConfigPromisesList\n  };\n}\n\n/**\n * Configures Firebase Analytics to use custom `gtag` or `dataLayer` names.\n * Intended to be used if `gtag.js` script has been installed on\n * this page independently of Firebase Analytics, and is using non-default\n * names for either the `gtag` function or for `dataLayer`.\n * Must be called before calling `getAnalytics()` or it won't\n * have any effect.\n *\n * @public\n *\n * @param options - Custom gtag and dataLayer names.\n */\nexport function settings(options: SettingsOptions): void {\n  if (globalInitDone) {\n    throw ERROR_FACTORY.create(AnalyticsError.ALREADY_INITIALIZED);\n  }\n  if (options.dataLayerName) {\n    dataLayerName = options.dataLayerName;\n  }\n  if (options.gtagName) {\n    gtagName = options.gtagName;\n  }\n}\n\n/**\n * Returns true if no environment mismatch is found.\n * If environment mismatches are found, throws an INVALID_ANALYTICS_CONTEXT\n * error that also lists details for each mismatch found.\n */\nfunction warnOnBrowserContextMismatch(): void {\n  const mismatchedEnvMessages = [];\n  if (isBrowserExtension()) {\n    mismatchedEnvMessages.push('This is a browser extension environment.');\n  }\n  if (!areCookiesEnabled()) {\n    mismatchedEnvMessages.push('Cookies are not available.');\n  }\n  if (mismatchedEnvMessages.length > 0) {\n    const details = mismatchedEnvMessages\n      .map((message, index) => `(${index + 1}) ${message}`)\n      .join(' ');\n    const err = ERROR_FACTORY.create(AnalyticsError.INVALID_ANALYTICS_CONTEXT, {\n      errorInfo: details\n    });\n    logger.warn(err.message);\n  }\n}\n\n/**\n * Analytics instance factory.\n * @internal\n */\nexport function factory(\n  app: FirebaseApp,\n  installations: _FirebaseInstallationsInternal,\n  options?: AnalyticsSettings\n): AnalyticsService {\n  warnOnBrowserContextMismatch();\n  const appId = app.options.appId;\n  if (!appId) {\n    throw ERROR_FACTORY.create(AnalyticsError.NO_APP_ID);\n  }\n  if (!app.options.apiKey) {\n    if (app.options.measurementId) {\n      logger.warn(\n        `The \"apiKey\" field is empty in the local Firebase config. This is needed to fetch the latest` +\n          ` measurement ID for this Firebase app. Falling back to the measurement ID ${app.options.measurementId}` +\n          ` provided in the \"measurementId\" field in the local Firebase config.`\n      );\n    } else {\n      throw ERROR_FACTORY.create(AnalyticsError.NO_API_KEY);\n    }\n  }\n  if (initializationPromisesMap[appId] != null) {\n    throw ERROR_FACTORY.create(AnalyticsError.ALREADY_EXISTS, {\n      id: appId\n    });\n  }\n\n  if (!globalInitDone) {\n    // Steps here should only be done once per page: creation or wrapping\n    // of dataLayer and global gtag function.\n\n    getOrCreateDataLayer(dataLayerName);\n\n    const { wrappedGtag, gtagCore } = wrapOrCreateGtag(\n      initializationPromisesMap,\n      dynamicConfigPromisesList,\n      measurementIdToAppId,\n      dataLayerName,\n      gtagName\n    );\n    wrappedGtagFunction = wrappedGtag;\n    gtagCoreFunction = gtagCore;\n\n    globalInitDone = true;\n  }\n  // Async but non-blocking.\n  // This map reflects the completion state of all promises for each appId.\n  initializationPromisesMap[appId] = _initializeAnalytics(\n    app,\n    dynamicConfigPromisesList,\n    measurementIdToAppId,\n    installations,\n    gtagCoreFunction,\n    dataLayerName,\n    options\n  );\n\n  const analyticsInstance: AnalyticsService = new AnalyticsService(app);\n\n  return analyticsInstance;\n}\n","/**\n * The Firebase Analytics Web SDK.\n * This SDK does not work in a Node.js environment.\n *\n * @packageDocumentation\n */\n\n/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { registerVersion, _registerComponent } from '@firebase/app';\nimport { FirebaseAnalyticsInternal } from '@firebase/analytics-interop-types';\nimport { factory } from './factory';\nimport { ANALYTICS_TYPE } from './constants';\nimport {\n  Component,\n  ComponentType,\n  ComponentContainer,\n  InstanceFactoryOptions\n} from '@firebase/component';\nimport { ERROR_FACTORY, AnalyticsError } from './errors';\nimport { logEvent } from './api';\nimport { name, version } from '../package.json';\nimport { AnalyticsCallOptions } from './public-types';\nimport '@firebase/installations';\n\ndeclare global {\n  interface Window {\n    [key: string]: unknown;\n  }\n}\n\nfunction registerAnalytics(): void {\n  _registerComponent(\n    new Component(\n      ANALYTICS_TYPE,\n      (container, { options: analyticsOptions }: InstanceFactoryOptions) => {\n        // getImmediate for FirebaseApp will always succeed\n        const app = container.getProvider('app').getImmediate();\n        const installations = container\n          .getProvider('installations-internal')\n          .getImmediate();\n\n        return factory(app, installations, analyticsOptions);\n      },\n      ComponentType.PUBLIC\n    )\n  );\n\n  _registerComponent(\n    new Component('analytics-internal', internalFactory, ComponentType.PRIVATE)\n  );\n\n  registerVersion(name, version);\n  // BUILD_TARGET will be replaced by values like esm, cjs, etc during the compilation\n  registerVersion(name, version, '__BUILD_TARGET__');\n\n  function internalFactory(\n    container: ComponentContainer\n  ): FirebaseAnalyticsInternal {\n    try {\n      const analytics = container.getProvider(ANALYTICS_TYPE).getImmediate();\n      return {\n        logEvent: (\n          eventName: string,\n          eventParams?: { [key: string]: unknown },\n          options?: AnalyticsCallOptions\n        ) => logEvent(analytics, eventName, eventParams, options)\n      };\n    } catch (e) {\n      throw ERROR_FACTORY.create(AnalyticsError.INTEROP_COMPONENT_REG_FAILED, {\n        reason: e as Error\n      });\n    }\n  }\n}\n\nregisterAnalytics();\n\nexport * from './api';\nexport * from './public-types';\n","/* eslint-disable @typescript-eslint/no-explicit-any */\n/* eslint-disable camelcase */\n/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { _getProvider, FirebaseApp, getApp } from '@firebase/app';\nimport {\n  Analytics,\n  AnalyticsCallOptions,\n  AnalyticsSettings,\n  ConsentSettings,\n  CustomParams,\n  EventNameString,\n  EventParams\n} from './public-types';\nimport { Provider } from '@firebase/component';\nimport {\n  isIndexedDBAvailable,\n  validateIndexedDBOpenable,\n  areCookiesEnabled,\n  isBrowserExtension,\n  getModularInstance,\n  deepEqual\n} from '@firebase/util';\nimport { ANALYTICS_TYPE, GtagCommand } from './constants';\nimport {\n  AnalyticsService,\n  initializationPromisesMap,\n  wrappedGtagFunction\n} from './factory';\nimport { logger } from './logger';\nimport {\n  logEvent as internalLogEvent,\n  setCurrentScreen as internalSetCurrentScreen,\n  setUserId as internalSetUserId,\n  setUserProperties as internalSetUserProperties,\n  setAnalyticsCollectionEnabled as internalSetAnalyticsCollectionEnabled,\n  _setConsentDefaultForInit,\n  _setDefaultEventParametersForInit,\n  internalGetGoogleAnalyticsClientId\n} from './functions';\nimport { ERROR_FACTORY, AnalyticsError } from './errors';\n\nexport { settings } from './factory';\n\ndeclare module '@firebase/component' {\n  interface NameServiceMapping {\n    [ANALYTICS_TYPE]: AnalyticsService;\n  }\n}\n\n/**\n * Returns an {@link Analytics} instance for the given app.\n *\n * @public\n *\n * @param app - The {@link @firebase/app#FirebaseApp} to use.\n */\nexport function getAnalytics(app: FirebaseApp = getApp()): Analytics {\n  app = getModularInstance(app);\n  // Dependencies\n  const analyticsProvider: Provider<'analytics'> = _getProvider(\n    app,\n    ANALYTICS_TYPE\n  );\n\n  if (analyticsProvider.isInitialized()) {\n    return analyticsProvider.getImmediate();\n  }\n\n  return initializeAnalytics(app);\n}\n\n/**\n * Returns an {@link Analytics} instance for the given app.\n *\n * @public\n *\n * @param app - The {@link @firebase/app#FirebaseApp} to use.\n */\nexport function initializeAnalytics(\n  app: FirebaseApp,\n  options: AnalyticsSettings = {}\n): Analytics {\n  // Dependencies\n  const analyticsProvider: Provider<'analytics'> = _getProvider(\n    app,\n    ANALYTICS_TYPE\n  );\n  if (analyticsProvider.isInitialized()) {\n    const existingInstance = analyticsProvider.getImmediate();\n    if (deepEqual(options, analyticsProvider.getOptions())) {\n      return existingInstance;\n    } else {\n      throw ERROR_FACTORY.create(AnalyticsError.ALREADY_INITIALIZED);\n    }\n  }\n  const analyticsInstance = analyticsProvider.initialize({ options });\n  return analyticsInstance;\n}\n\n/**\n * This is a public static method provided to users that wraps four different checks:\n *\n * 1. Check if it's not a browser extension environment.\n * 2. Check if cookies are enabled in current browser.\n * 3. Check if IndexedDB is supported by the browser environment.\n * 4. Check if the current browser context is valid for using `IndexedDB.open()`.\n *\n * @public\n *\n */\nexport async function isSupported(): Promise<boolean> {\n  if (isBrowserExtension()) {\n    return false;\n  }\n  if (!areCookiesEnabled()) {\n    return false;\n  }\n  if (!isIndexedDBAvailable()) {\n    return false;\n  }\n\n  try {\n    const isDBOpenable: boolean = await validateIndexedDBOpenable();\n    return isDBOpenable;\n  } catch (error) {\n    return false;\n  }\n}\n\n/**\n * Use gtag `config` command to set `screen_name`.\n *\n * @public\n *\n * @deprecated Use {@link logEvent} with `eventName` as 'screen_view' and add relevant `eventParams`.\n * See {@link https://firebase.google.com/docs/analytics/screenviews | Track Screenviews}.\n *\n * @param analyticsInstance - The {@link Analytics} instance.\n * @param screenName - Screen name to set.\n */\nexport function setCurrentScreen(\n  analyticsInstance: Analytics,\n  screenName: string,\n  options?: AnalyticsCallOptions\n): void {\n  analyticsInstance = getModularInstance(analyticsInstance);\n  internalSetCurrentScreen(\n    wrappedGtagFunction,\n    initializationPromisesMap[analyticsInstance.app.options.appId!],\n    screenName,\n    options\n  ).catch(e => logger.error(e));\n}\n\n/**\n * Retrieves a unique Google Analytics identifier for the web client.\n * See {@link https://developers.google.com/analytics/devguides/collection/ga4/reference/config#client_id | client_id}.\n *\n * @public\n *\n * @param app - The {@link @firebase/app#FirebaseApp} to use.\n */\nexport async function getGoogleAnalyticsClientId(\n  analyticsInstance: Analytics\n): Promise<string> {\n  analyticsInstance = getModularInstance(analyticsInstance);\n  return internalGetGoogleAnalyticsClientId(\n    wrappedGtagFunction,\n    initializationPromisesMap[analyticsInstance.app.options.appId!]\n  );\n}\n\n/**\n * Use gtag `config` command to set `user_id`.\n *\n * @public\n *\n * @param analyticsInstance - The {@link Analytics} instance.\n * @param id - User ID to set.\n */\nexport function setUserId(\n  analyticsInstance: Analytics,\n  id: string | null,\n  options?: AnalyticsCallOptions\n): void {\n  analyticsInstance = getModularInstance(analyticsInstance);\n  internalSetUserId(\n    wrappedGtagFunction,\n    initializationPromisesMap[analyticsInstance.app.options.appId!],\n    id,\n    options\n  ).catch(e => logger.error(e));\n}\n\n/**\n * Use gtag `config` command to set all params specified.\n *\n * @public\n */\nexport function setUserProperties(\n  analyticsInstance: Analytics,\n  properties: CustomParams,\n  options?: AnalyticsCallOptions\n): void {\n  analyticsInstance = getModularInstance(analyticsInstance);\n  internalSetUserProperties(\n    wrappedGtagFunction,\n    initializationPromisesMap[analyticsInstance.app.options.appId!],\n    properties,\n    options\n  ).catch(e => logger.error(e));\n}\n\n/**\n * Sets whether Google Analytics collection is enabled for this app on this device.\n * Sets global `window['ga-disable-analyticsId'] = true;`\n *\n * @public\n *\n * @param analyticsInstance - The {@link Analytics} instance.\n * @param enabled - If true, enables collection, if false, disables it.\n */\nexport function setAnalyticsCollectionEnabled(\n  analyticsInstance: Analytics,\n  enabled: boolean\n): void {\n  analyticsInstance = getModularInstance(analyticsInstance);\n  internalSetAnalyticsCollectionEnabled(\n    initializationPromisesMap[analyticsInstance.app.options.appId!],\n    enabled\n  ).catch(e => logger.error(e));\n}\n\n/**\n * Adds data that will be set on every event logged from the SDK, including automatic ones.\n * With gtag's \"set\" command, the values passed persist on the current page and are passed with\n * all subsequent events.\n * @public\n * @param customParams - Any custom params the user may pass to gtag.js.\n */\nexport function setDefaultEventParameters(customParams: CustomParams): void {\n  // Check if reference to existing gtag function on window object exists\n  if (wrappedGtagFunction) {\n    wrappedGtagFunction(GtagCommand.SET, customParams);\n  } else {\n    _setDefaultEventParametersForInit(customParams);\n  }\n}\n\n/**\n * Sends a Google Analytics event with given `eventParams`. This method\n * automatically associates this logged event with this Firebase web\n * app instance on this device.\n * @public\n * List of recommended event parameters can be found in\n * {@link https://developers.google.com/gtagjs/reference/ga4-events\n * | the GA4 reference documentation}.\n */\nexport function logEvent(\n  analyticsInstance: Analytics,\n  eventName: 'add_payment_info',\n  eventParams?: {\n    coupon?: EventParams['coupon'];\n    currency?: EventParams['currency'];\n    items?: EventParams['items'];\n    payment_type?: EventParams['payment_type'];\n    value?: EventParams['value'];\n    [key: string]: any;\n  },\n  options?: AnalyticsCallOptions\n): void;\n\n/**\n * Sends a Google Analytics event with given `eventParams`. This method\n * automatically associates this logged event with this Firebase web\n * app instance on this device.\n * @public\n * List of recommended event parameters can be found in\n * {@link https://developers.google.com/gtagjs/reference/ga4-events\n * | the GA4 reference documentation}.\n */\nexport function logEvent(\n  analyticsInstance: Analytics,\n  eventName: 'add_shipping_info',\n  eventParams?: {\n    coupon?: EventParams['coupon'];\n    currency?: EventParams['currency'];\n    items?: EventParams['items'];\n    shipping_tier?: EventParams['shipping_tier'];\n    value?: EventParams['value'];\n    [key: string]: any;\n  },\n  options?: AnalyticsCallOptions\n): void;\n\n/**\n * Sends a Google Analytics event with given `eventParams`. This method\n * automatically associates this logged event with this Firebase web\n * app instance on this device.\n * @public\n * List of recommended event parameters can be found in\n * {@link https://developers.google.com/gtagjs/reference/ga4-events\n * | the GA4 reference documentation}.\n */\nexport function logEvent(\n  analyticsInstance: Analytics,\n  eventName: 'add_to_cart' | 'add_to_wishlist' | 'remove_from_cart',\n  eventParams?: {\n    currency?: EventParams['currency'];\n    value?: EventParams['value'];\n    items?: EventParams['items'];\n    [key: string]: any;\n  },\n  options?: AnalyticsCallOptions\n): void;\n\n/**\n * Sends a Google Analytics event with given `eventParams`. This method\n * automatically associates this logged event with this Firebase web\n * app instance on this device.\n * @public\n * List of recommended event parameters can be found in\n * {@link https://developers.google.com/gtagjs/reference/ga4-events\n * | the GA4 reference documentation}.\n */\nexport function logEvent(\n  analyticsInstance: Analytics,\n  eventName: 'begin_checkout',\n  eventParams?: {\n    currency?: EventParams['currency'];\n    coupon?: EventParams['coupon'];\n    value?: EventParams['value'];\n    items?: EventParams['items'];\n    [key: string]: any;\n  },\n  options?: AnalyticsCallOptions\n): void;\n\n/**\n * Sends a Google Analytics event with given `eventParams`. This method\n * automatically associates this logged event with this Firebase web\n * app instance on this device.\n * @public\n * List of recommended event parameters can be found in\n * {@link https://developers.google.com/gtagjs/reference/ga4-events\n * | the GA4 reference documentation}.\n */\nexport function logEvent(\n  analyticsInstance: Analytics,\n  eventName: 'checkout_progress',\n  eventParams?: {\n    currency?: EventParams['currency'];\n    coupon?: EventParams['coupon'];\n    value?: EventParams['value'];\n    items?: EventParams['items'];\n    checkout_step?: EventParams['checkout_step'];\n    checkout_option?: EventParams['checkout_option'];\n    [key: string]: any;\n  },\n  options?: AnalyticsCallOptions\n): void;\n\n/**\n * Sends a Google Analytics event with given `eventParams`. This method\n * automatically associates this logged event with this Firebase web\n * app instance on this device.\n * @public\n * See\n * {@link https://developers.google.com/analytics/devguides/collection/ga4/exceptions\n * | Measure exceptions}.\n */\nexport function logEvent(\n  analyticsInstance: Analytics,\n  eventName: 'exception',\n  eventParams?: {\n    description?: EventParams['description'];\n    fatal?: EventParams['fatal'];\n    [key: string]: any;\n  },\n  options?: AnalyticsCallOptions\n): void;\n\n/**\n * Sends a Google Analytics event with given `eventParams`. This method\n * automatically associates this logged event with this Firebase web\n * app instance on this device.\n * @public\n * List of recommended event parameters can be found in\n * {@link https://developers.google.com/gtagjs/reference/ga4-events\n * | the GA4 reference documentation}.\n */\nexport function logEvent(\n  analyticsInstance: Analytics,\n  eventName: 'generate_lead',\n  eventParams?: {\n    value?: EventParams['value'];\n    currency?: EventParams['currency'];\n    [key: string]: any;\n  },\n  options?: AnalyticsCallOptions\n): void;\n\n/**\n * Sends a Google Analytics event with given `eventParams`. This method\n * automatically associates this logged event with this Firebase web\n * app instance on this device.\n * @public\n * List of recommended event parameters can be found in\n * {@link https://developers.google.com/gtagjs/reference/ga4-events\n * | the GA4 reference documentation}.\n */\nexport function logEvent(\n  analyticsInstance: Analytics,\n  eventName: 'login',\n  eventParams?: {\n    method?: EventParams['method'];\n    [key: string]: any;\n  },\n  options?: AnalyticsCallOptions\n): void;\n\n/**\n * Sends a Google Analytics event with given `eventParams`. This method\n * automatically associates this logged event with this Firebase web\n * app instance on this device.\n * @public\n * See\n * {@link https://developers.google.com/analytics/devguides/collection/ga4/views\n * | Page views}.\n */\nexport function logEvent(\n  analyticsInstance: Analytics,\n  eventName: 'page_view',\n  eventParams?: {\n    page_title?: string;\n    page_location?: string;\n    page_path?: string;\n    [key: string]: any;\n  },\n  options?: AnalyticsCallOptions\n): void;\n\n/**\n * Sends a Google Analytics event with given `eventParams`. This method\n * automatically associates this logged event with this Firebase web\n * app instance on this device.\n * @public\n * List of recommended event parameters can be found in\n * {@link https://developers.google.com/gtagjs/reference/ga4-events\n * | the GA4 reference documentation}.\n */\nexport function logEvent(\n  analyticsInstance: Analytics,\n  eventName: 'purchase' | 'refund',\n  eventParams?: {\n    value?: EventParams['value'];\n    currency?: EventParams['currency'];\n    transaction_id: EventParams['transaction_id'];\n    tax?: EventParams['tax'];\n    shipping?: EventParams['shipping'];\n    items?: EventParams['items'];\n    coupon?: EventParams['coupon'];\n    affiliation?: EventParams['affiliation'];\n    [key: string]: any;\n  },\n  options?: AnalyticsCallOptions\n): void;\n\n/**\n * Sends a Google Analytics event with given `eventParams`. This method\n * automatically associates this logged event with this Firebase web\n * app instance on this device.\n * @public\n * See {@link https://firebase.google.com/docs/analytics/screenviews\n * | Track Screenviews}.\n */\nexport function logEvent(\n  analyticsInstance: Analytics,\n  eventName: 'screen_view',\n  eventParams?: {\n    firebase_screen: EventParams['firebase_screen'];\n    firebase_screen_class: EventParams['firebase_screen_class'];\n    [key: string]: any;\n  },\n  options?: AnalyticsCallOptions\n): void;\n\n/**\n * Sends a Google Analytics event with given `eventParams`. This method\n * automatically associates this logged event with this Firebase web\n * app instance on this device.\n * @public\n * List of recommended event parameters can be found in\n * {@link https://developers.google.com/gtagjs/reference/ga4-events\n * | the GA4 reference documentation}.\n */\nexport function logEvent(\n  analyticsInstance: Analytics,\n  eventName: 'search' | 'view_search_results',\n  eventParams?: {\n    search_term?: EventParams['search_term'];\n    [key: string]: any;\n  },\n  options?: AnalyticsCallOptions\n): void;\n\n/**\n * Sends a Google Analytics event with given `eventParams`. This method\n * automatically associates this logged event with this Firebase web\n * app instance on this device.\n * @public\n * List of recommended event parameters can be found in\n * {@link https://developers.google.com/gtagjs/reference/ga4-events\n * | the GA4 reference documentation}.\n */\nexport function logEvent(\n  analyticsInstance: Analytics,\n  eventName: 'select_content',\n  eventParams?: {\n    content_type?: EventParams['content_type'];\n    item_id?: EventParams['item_id'];\n    [key: string]: any;\n  },\n  options?: AnalyticsCallOptions\n): void;\n\n/**\n * Sends a Google Analytics event with given `eventParams`. This method\n * automatically associates this logged event with this Firebase web\n * app instance on this device.\n * @public\n * List of recommended event parameters can be found in\n * {@link https://developers.google.com/gtagjs/reference/ga4-events\n * | the GA4 reference documentation}.\n */\nexport function logEvent(\n  analyticsInstance: Analytics,\n  eventName: 'select_item',\n  eventParams?: {\n    items?: EventParams['items'];\n    item_list_name?: EventParams['item_list_name'];\n    item_list_id?: EventParams['item_list_id'];\n    [key: string]: any;\n  },\n  options?: AnalyticsCallOptions\n): void;\n\n/**\n * Sends a Google Analytics event with given `eventParams`. This method\n * automatically associates this logged event with this Firebase web\n * app instance on this device.\n * @public\n * List of recommended event parameters can be found in\n * {@link https://developers.google.com/gtagjs/reference/ga4-events\n * | the GA4 reference documentation}.\n */\nexport function logEvent(\n  analyticsInstance: Analytics,\n  eventName: 'select_promotion' | 'view_promotion',\n  eventParams?: {\n    items?: EventParams['items'];\n    promotion_id?: EventParams['promotion_id'];\n    promotion_name?: EventParams['promotion_name'];\n    [key: string]: any;\n  },\n  options?: AnalyticsCallOptions\n): void;\n\n/**\n * Sends a Google Analytics event with given `eventParams`. This method\n * automatically associates this logged event with this Firebase web\n * app instance on this device.\n * @public\n * List of recommended event parameters can be found in\n * {@link https://developers.google.com/gtagjs/reference/ga4-events\n * | the GA4 reference documentation}.\n */\nexport function logEvent(\n  analyticsInstance: Analytics,\n  eventName: 'set_checkout_option',\n  eventParams?: {\n    checkout_step?: EventParams['checkout_step'];\n    checkout_option?: EventParams['checkout_option'];\n    [key: string]: any;\n  },\n  options?: AnalyticsCallOptions\n): void;\n\n/**\n * Sends a Google Analytics event with given `eventParams`. This method\n * automatically associates this logged event with this Firebase web\n * app instance on this device.\n * @public\n * List of recommended event parameters can be found in\n * {@link https://developers.google.com/gtagjs/reference/ga4-events\n * | the GA4 reference documentation}.\n */\nexport function logEvent(\n  analyticsInstance: Analytics,\n  eventName: 'share',\n  eventParams?: {\n    method?: EventParams['method'];\n    content_type?: EventParams['content_type'];\n    item_id?: EventParams['item_id'];\n    [key: string]: any;\n  },\n  options?: AnalyticsCallOptions\n): void;\n\n/**\n * Sends a Google Analytics event with given `eventParams`. This method\n * automatically associates this logged event with this Firebase web\n * app instance on this device.\n * @public\n * List of recommended event parameters can be found in\n * {@link https://developers.google.com/gtagjs/reference/ga4-events\n * | the GA4 reference documentation}.\n */\nexport function logEvent(\n  analyticsInstance: Analytics,\n  eventName: 'sign_up',\n  eventParams?: {\n    method?: EventParams['method'];\n    [key: string]: any;\n  },\n  options?: AnalyticsCallOptions\n): void;\n\n/**\n * Sends a Google Analytics event with given `eventParams`. This method\n * automatically associates this logged event with this Firebase web\n * app instance on this device.\n * @public\n * List of recommended event parameters can be found in\n * {@link https://developers.google.com/gtagjs/reference/ga4-events\n * | the GA4 reference documentation}.\n */\nexport function logEvent(\n  analyticsInstance: Analytics,\n  eventName: 'timing_complete',\n  eventParams?: {\n    name: string;\n    value: number;\n    event_category?: string;\n    event_label?: string;\n    [key: string]: any;\n  },\n  options?: AnalyticsCallOptions\n): void;\n\n/**\n * Sends a Google Analytics event with given `eventParams`. This method\n * automatically associates this logged event with this Firebase web\n * app instance on this device.\n * @public\n * List of recommended event parameters can be found in\n * {@link https://developers.google.com/gtagjs/reference/ga4-events\n * | the GA4 reference documentation}.\n */\nexport function logEvent(\n  analyticsInstance: Analytics,\n  eventName: 'view_cart' | 'view_item',\n  eventParams?: {\n    currency?: EventParams['currency'];\n    items?: EventParams['items'];\n    value?: EventParams['value'];\n    [key: string]: any;\n  },\n  options?: AnalyticsCallOptions\n): void;\n\n/**\n * Sends a Google Analytics event with given `eventParams`. This method\n * automatically associates this logged event with this Firebase web\n * app instance on this device.\n * @public\n * List of recommended event parameters can be found in\n * {@link https://developers.google.com/gtagjs/reference/ga4-events\n * | the GA4 reference documentation}.\n */\nexport function logEvent(\n  analyticsInstance: Analytics,\n  eventName: 'view_item_list',\n  eventParams?: {\n    items?: EventParams['items'];\n    item_list_name?: EventParams['item_list_name'];\n    item_list_id?: EventParams['item_list_id'];\n    [key: string]: any;\n  },\n  options?: AnalyticsCallOptions\n): void;\n\n/**\n * Sends a Google Analytics event with given `eventParams`. This method\n * automatically associates this logged event with this Firebase web\n * app instance on this device.\n * @public\n * List of recommended event parameters can be found in\n * {@link https://developers.google.com/gtagjs/reference/ga4-events\n * | the GA4 reference documentation}.\n */\nexport function logEvent<T extends string>(\n  analyticsInstance: Analytics,\n  eventName: CustomEventName<T>,\n  eventParams?: { [key: string]: any },\n  options?: AnalyticsCallOptions\n): void;\n\n/**\n * Sends a Google Analytics event with given `eventParams`. This method\n * automatically associates this logged event with this Firebase web\n * app instance on this device.\n * List of official event parameters can be found in the gtag.js\n * reference documentation:\n * {@link https://developers.google.com/gtagjs/reference/ga4-events\n * | the GA4 reference documentation}.\n *\n * @public\n */\nexport function logEvent(\n  analyticsInstance: Analytics,\n  eventName: string,\n  eventParams?: EventParams,\n  options?: AnalyticsCallOptions\n): void {\n  analyticsInstance = getModularInstance(analyticsInstance);\n  internalLogEvent(\n    wrappedGtagFunction,\n    initializationPromisesMap[analyticsInstance.app.options.appId!],\n    eventName,\n    eventParams,\n    options\n  ).catch(e => logger.error(e));\n}\n\n/**\n * Any custom event name string not in the standard list of recommended\n * event names.\n * @public\n */\nexport type CustomEventName<T> = T extends EventNameString ? never : T;\n\n/**\n * Sets the applicable end user consent state for this web app across all gtag references once\n * Firebase Analytics is initialized.\n *\n * Use the {@link ConsentSettings} to specify individual consent type values. By default consent\n * types are set to \"granted\".\n * @public\n * @param consentSettings - Maps the applicable end user consent state for gtag.js.\n */\nexport function setConsent(consentSettings: ConsentSettings): void {\n  // Check if reference to existing gtag function on window object exists\n  if (wrappedGtagFunction) {\n    wrappedGtagFunction(GtagCommand.CONSENT, 'update', consentSettings);\n  } else {\n    _setConsentDefaultForInit(consentSettings);\n  }\n}\n","// Import the functions you need from the SDKs you need\r\nimport { initializeApp } from \"firebase/app\";\r\nimport { getAnalytics } from \"firebase/analytics\";\r\nimport { getAuth, GoogleAuthProvider, signInWithPopup, signInWithRedirect, getRedirectResult, signOut } from \"firebase/auth\";\r\n\r\n// Your web app's Firebase configuration\r\n// For Firebase JS SDK v7.20.0 and later, measurementId is optional\r\nconst firebaseConfig = {\r\n  apiKey: \"AIzaSyBDqpw6UuQKXfB-dp7z2sFQ-uiLkGRkyzs\",\r\n  authDomain: \"items-ad9c4.firebaseapp.com\",\r\n  projectId: \"items-ad9c4\",\r\n  storageBucket: \"items-ad9c4.firebasestorage.app\",\r\n  messagingSenderId: \"274430427975\",\r\n  appId: \"1:274430427975:web:52a745c2528ac605270262\",\r\n  measurementId: \"G-QM4YKJNXRB\"\r\n};\r\n\r\n// Initialize Firebase\r\nconst app = initializeApp(firebaseConfig);\r\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nconst analytics = getAnalytics(app);\r\nconst auth = getAuth(app);\r\n\r\n// Initialize Google Auth Provider\r\nconst googleProvider = new GoogleAuthProvider();\r\ngoogleProvider.addScope('email');\r\ngoogleProvider.addScope('profile');\r\n\r\n// Set language for authentication\r\nauth.languageCode = 'en';\r\n\r\nexport { auth, googleProvider, signInWithPopup, signInWithRedirect, getRedirectResult, signOut };","import { useState, useEffect } from 'react';\r\nimport { auth } from '../firebase';\r\nimport { User, onAuthStateChanged, signOut } from 'firebase/auth';\r\n\r\nexport const useAuth = () => {\r\n  const [user, setUser] = useState<User | null>(null);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  useEffect(() => {\r\n    const unsubscribe = onAuthStateChanged(auth, async (user) => {\r\n      if (user) {\r\n        setUser(user);\r\n        setError(null);\r\n      } else {\r\n        setUser(null);\r\n        setError(null);\r\n      }\r\n      setIsLoading(false);\r\n    });\r\n\r\n    return () => unsubscribe();\r\n  }, []);\r\n\r\n  const logout = async () => {\r\n    try {\r\n      setError(null);\r\n      await signOut(auth);\r\n    } catch (error: any) {\r\n      setError('Failed to sign out');\r\n    }\r\n  };\r\n\r\n  const clearError = () => {\r\n    setError(null);\r\n  };\r\n\r\n  return {\r\n    user,\r\n    isLoading,\r\n    error,\r\n    logout,\r\n    clearError,\r\n    isAuthenticated: !!user\r\n  };\r\n};\r\n","import { useState, useEffect, useCallback } from 'react';\r\nimport { useAuth } from './useAuth';\r\nimport { User, CreateUserRequest, UpdateUserRequest } from '../types';\r\nimport { apiService } from '../services';\r\n\r\nexport const useUserProfile = () => {\r\n  const { user: firebaseUser } = useAuth();\r\n  const [userProfile, setUserProfile] = useState<User | null>(null);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [needsProfile, setNeedsProfile] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  const fetchUserProfile = useCallback(async () => {\r\n    if (!firebaseUser?.email) {\r\n      setIsLoading(false);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setIsLoading(true);\r\n      setError(null);\r\n\r\n      // Use the new /users/me endpoint\r\n      const response = await apiService.get('/users/me') as any;\r\n      \r\n      if (response) {\r\n        if (response.needsRegistration) {\r\n          // User exists in Firebase but needs to complete registration\r\n          setNeedsProfile(true);\r\n          setUserProfile(null);\r\n        } else {\r\n          // User is fully registered\r\n          const serverUser = response;\r\n          \r\n          // Transform the server response to match our User interface\r\n          const transformedUser: User = {\r\n            id: serverUser.id,\r\n            name: serverUser.name,\r\n            personalNumber: serverUser.personalNumber,\r\n            phoneNumber: serverUser.phoneNumber,\r\n            rank: serverUser.rank,\r\n            isAdmin: serverUser.isAdmin,\r\n            emailSubscribed: serverUser.emailSubscribed,\r\n            firebaseUid: serverUser.firebaseUid,\r\n            createdAt: serverUser.createdAt,\r\n            updatedAt: serverUser.updatedAt,\r\n            // Transform nested objects to strings as expected by the frontend\r\n            location: serverUser.location?.name || serverUser.location || '',\r\n            unit: serverUser.location?.unit?.name || serverUser.unit || '',\r\n          };\r\n          \r\n          // Check if the user data has all required fields\r\n          const hasRequiredFields = transformedUser.id && transformedUser.personalNumber;\r\n\r\n          if (hasRequiredFields) {\r\n            setUserProfile(transformedUser);\r\n            setNeedsProfile(false);\r\n          } else {\r\n            setNeedsProfile(true);\r\n            setUserProfile(null);\r\n          }\r\n        }\r\n      } else {\r\n        // Unexpected response\r\n        setNeedsProfile(true);\r\n        setUserProfile(null);\r\n      }\r\n    } catch (error: any) {\r\n      // If there's an error, assume user needs registration\r\n      setNeedsProfile(true);\r\n      setUserProfile(null);\r\n      setError('Failed to load user profile');\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  }, [firebaseUser]);\r\n\r\n  useEffect(() => {\r\n    fetchUserProfile();\r\n  }, [fetchUserProfile]);\r\n\r\n  const createUserProfile = async (profileData: Omit<CreateUserRequest, 'firebaseUid'>): Promise<boolean> => {\r\n    if (!firebaseUser?.email || !firebaseUser?.uid) {\r\n      setError('No authenticated user found');\r\n      return false;\r\n    }\r\n\r\n    try {\r\n      setIsLoading(true);\r\n      setError(null);\r\n\r\n      const userData: CreateUserRequest = {\r\n        firebaseUid: firebaseUser.uid,\r\n        name: profileData.name,\r\n        personalNumber: profileData.personalNumber,\r\n        phoneNumber: profileData.phoneNumber,\r\n        rank: profileData.rank,\r\n        locationId: profileData.locationId,\r\n      };\r\n\r\n      const response = await apiService.post('/users/register', userData) as any;\r\n      \r\n      if (response) {\r\n        // Transform the server response to match our User interface\r\n        const serverUser = response;\r\n        const transformedUser: User = {\r\n          id: serverUser.id,\r\n          name: serverUser.name,\r\n          personalNumber: serverUser.personalNumber,\r\n          phoneNumber: serverUser.phoneNumber,\r\n          rank: serverUser.rank,\r\n          isAdmin: serverUser.isAdmin,\r\n          emailSubscribed: serverUser.emailSubscribed,\r\n          firebaseUid: serverUser.firebaseUid,\r\n          createdAt: serverUser.createdAt,\r\n          updatedAt: serverUser.updatedAt,\r\n          // Transform nested objects to strings as expected by the frontend\r\n          location: serverUser.location?.name || '',\r\n          unit: serverUser.location?.unit?.name || '',\r\n        };\r\n        \r\n        // Update state in the correct order - profile first, then needsProfile\r\n        setUserProfile(transformedUser);\r\n        setNeedsProfile(false);\r\n        setError(null); // Clear any previous errors\r\n        \r\n        return true;\r\n      } else {\r\n        setError('Registration failed - no user data returned');\r\n        return false;\r\n      }\r\n    } catch (error: any) {\r\n      setError(error.response?.data?.message || 'Failed to create user profile');\r\n      return false;\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const updateUserProfile = async (updates: UpdateUserRequest): Promise<boolean> => {\r\n    if (!userProfile) {\r\n      setError('No user profile to update');\r\n      return false;\r\n    }\r\n\r\n    try {\r\n      setIsLoading(true);\r\n      setError(null);\r\n\r\n      const response = await apiService.patch(`/users/${userProfile.id}`, updates) as any;\r\n      \r\n      if (response) {\r\n        // Transform the server response to match our User interface\r\n        const serverUser = response;\r\n        const transformedUser: User = {\r\n          id: serverUser.id,\r\n          name: serverUser.name,\r\n          personalNumber: serverUser.personalNumber,\r\n          phoneNumber: serverUser.phoneNumber,\r\n          rank: serverUser.rank,\r\n          isAdmin: serverUser.isAdmin,\r\n          emailSubscribed: serverUser.emailSubscribed,\r\n          firebaseUid: serverUser.firebaseUid,\r\n          createdAt: serverUser.createdAt,\r\n          updatedAt: serverUser.updatedAt,\r\n          // Transform nested objects to strings as expected by the frontend\r\n          location: serverUser.location?.name || serverUser.location || '',\r\n          unit: serverUser.location?.unit?.name || serverUser.unit || '',\r\n        };\r\n        setUserProfile(transformedUser);\r\n        \r\n        return true;\r\n      }\r\n      \r\n      return false;\r\n    } catch (error: any) {\r\n      setError(error.response?.data?.message || 'Failed to update user profile');\r\n      return false;\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  return {\r\n    userProfile,\r\n    isLoading,\r\n    needsProfile,\r\n    error,\r\n    isAdmin: userProfile ? userProfile.isAdmin : false,\r\n    createUserProfile,\r\n    updateUserProfile,\r\n    refetch: fetchUserProfile\r\n  };\r\n};\r\n","import React, { createContext, useContext, useState, useEffect } from 'react';\r\n\r\nexport type Theme = 'dark' | 'light';\r\n\r\ninterface ThemeContextType {\r\n  theme: Theme;\r\n  toggleTheme: () => void;\r\n  setTheme: (theme: Theme) => void;\r\n}\r\n\r\nconst ThemeContext = createContext<ThemeContextType | undefined>(undefined);\r\n\r\nexport const useTheme = () => {\r\n  const context = useContext(ThemeContext);\r\n  if (context === undefined) {\r\n    throw new Error('useTheme must be used within a ThemeProvider');\r\n  }\r\n  return context;\r\n};\r\n\r\ninterface ThemeProviderProps {\r\n  children: React.ReactNode;\r\n}\r\n\r\nexport const ThemeProvider: React.FC<ThemeProviderProps> = ({ children }) => {\r\n  // Get saved theme from localStorage or default to light\r\n  const getSavedTheme = (): Theme => {\r\n    if (typeof window !== 'undefined') {\r\n      const savedTheme = localStorage.getItem('app-theme') as Theme | null;\r\n      if (savedTheme && (savedTheme === 'dark' || savedTheme === 'light')) {\r\n        return savedTheme;\r\n      }\r\n    }\r\n    return 'dark'; // Default to dark theme\r\n  };\r\n\r\n  const [theme, setThemeState] = useState<Theme>(getSavedTheme);\r\n\r\n  // Apply theme to document root and save to localStorage\r\n  useEffect(() => {\r\n    const root = document.documentElement;\r\n    root.setAttribute('data-theme', theme);\r\n    if (typeof window !== 'undefined') {\r\n      localStorage.setItem('app-theme', theme);\r\n    }\r\n  }, [theme]);\r\n\r\n  const setTheme = (newTheme: Theme) => {\r\n    setThemeState(newTheme);\r\n  };\r\n\r\n  const toggleTheme = () => {\r\n    setThemeState(prevTheme => prevTheme === 'dark' ? 'light' : 'dark');\r\n  };\r\n\r\n  const value = {\r\n    theme,\r\n    toggleTheme,\r\n    setTheme,\r\n  };\r\n\r\n  return (\r\n    <ThemeContext.Provider value={value}>\r\n      {children}\r\n    </ThemeContext.Provider>\r\n  );\r\n};\r\n","import { useState, useCallback, useEffect } from 'react';\r\n\r\nexport interface UseModernTableSelectionOptions {\r\n  items: Array<{ id: string }>;\r\n  onSelectionChange?: (selectedIds: string[]) => void;\r\n  multiSelect?: boolean;\r\n  maxSelection?: number;\r\n}\r\n\r\nexport const useModernTableSelection = ({\r\n  items,\r\n  onSelectionChange,\r\n  multiSelect = true,\r\n  maxSelection\r\n}: UseModernTableSelectionOptions) => {\r\n  const [selectedIds, setSelectedIds] = useState<string[]>([]);\r\n  const [lastClickedIndex, setLastClickedIndex] = useState<number>(-1);\r\n\r\n  // Clear selection when items change significantly\r\n  useEffect(() => {\r\n    const validIds = selectedIds.filter(id => items.some(item => item.id === id));\r\n    if (validIds.length !== selectedIds.length) {\r\n      setSelectedIds(validIds);\r\n    }\r\n  }, [items, selectedIds]);\r\n\r\n  // Notify parent of selection changes\r\n  useEffect(() => {\r\n    onSelectionChange?.(selectedIds);\r\n  }, [selectedIds, onSelectionChange]);\r\n\r\n  const isSelected = useCallback((id: string) => {\r\n    return selectedIds.includes(id);\r\n  }, [selectedIds]);\r\n\r\n  const toggleSelection = useCallback((\r\n    id: string, \r\n    event?: React.MouseEvent,\r\n    itemIndex?: number\r\n  ) => {\r\n    setSelectedIds(prev => {\r\n      const isCurrentlySelected = prev.includes(id);\r\n      \r\n      // Single select mode\r\n      if (!multiSelect) {\r\n        return isCurrentlySelected ? [] : [id];\r\n      }\r\n\r\n      // Multi-select with keyboard modifiers\r\n      if (event) {\r\n        const { ctrlKey, metaKey, shiftKey } = event;\r\n        \r\n        // Ctrl/Cmd + click: toggle individual item\r\n        if (ctrlKey || metaKey) {\r\n          if (isCurrentlySelected) {\r\n            return prev.filter(selectedId => selectedId !== id);\r\n          } else {\r\n            // Check max selection limit\r\n            if (maxSelection && prev.length >= maxSelection) {\r\n              return prev;\r\n            }\r\n            return [...prev, id];\r\n          }\r\n        }\r\n        \r\n        // Shift + click: range selection\r\n        if (shiftKey && lastClickedIndex !== -1 && itemIndex !== undefined) {\r\n          const startIndex = Math.min(lastClickedIndex, itemIndex);\r\n          const endIndex = Math.max(lastClickedIndex, itemIndex);\r\n          const rangeIds = items\r\n            .slice(startIndex, endIndex + 1)\r\n            .map(item => item.id);\r\n          \r\n          // Merge with existing selection\r\n          const newSelection = Array.from(new Set([...prev, ...rangeIds]));\r\n          \r\n          // Check max selection limit\r\n          if (maxSelection && newSelection.length > maxSelection) {\r\n            return prev;\r\n          }\r\n          \r\n          return newSelection;\r\n        }\r\n      }\r\n      \r\n      // Regular click: toggle single item or clear if already selected\r\n      if (isCurrentlySelected) {\r\n        return prev.filter(selectedId => selectedId !== id);\r\n      } else {\r\n        // Check max selection limit\r\n        if (maxSelection && prev.length >= maxSelection) {\r\n          return prev;\r\n        }\r\n        return [...prev, id];\r\n      }\r\n    });\r\n\r\n    // Update last clicked index for range selection\r\n    if (itemIndex !== undefined) {\r\n      setLastClickedIndex(itemIndex);\r\n    }\r\n  }, [multiSelect, maxSelection, lastClickedIndex, items]);\r\n\r\n  const selectAll = useCallback(() => {\r\n    if (!multiSelect) return;\r\n    \r\n    const allIds = items.map(item => item.id);\r\n    \r\n    // Check max selection limit\r\n    if (maxSelection && allIds.length > maxSelection) {\r\n      setSelectedIds(allIds.slice(0, maxSelection));\r\n    } else {\r\n      setSelectedIds(allIds);\r\n    }\r\n  }, [items, multiSelect, maxSelection]);\r\n\r\n  const clearSelection = useCallback(() => {\r\n    setSelectedIds([]);\r\n    setLastClickedIndex(-1);\r\n  }, []);\r\n\r\n  const selectRange = useCallback((startIndex: number, endIndex: number) => {\r\n    if (!multiSelect) return;\r\n    \r\n    const start = Math.min(startIndex, endIndex);\r\n    const end = Math.max(startIndex, endIndex);\r\n    const rangeIds = items.slice(start, end + 1).map(item => item.id);\r\n    \r\n    // Check max selection limit\r\n    if (maxSelection && rangeIds.length > maxSelection) {\r\n      setSelectedIds(rangeIds.slice(0, maxSelection));\r\n    } else {\r\n      setSelectedIds(rangeIds);\r\n    }\r\n  }, [items, multiSelect, maxSelection]);\r\n\r\n  const isAllSelected = selectedIds.length > 0 && selectedIds.length === items.length;\r\n  const isPartiallySelected = selectedIds.length > 0 && selectedIds.length < items.length;\r\n  const hasSelection = selectedIds.length > 0;\r\n\r\n  return {\r\n    selectedIds,\r\n    isSelected,\r\n    toggleSelection,\r\n    selectAll,\r\n    clearSelection,\r\n    selectRange,\r\n    isAllSelected,\r\n    isPartiallySelected,\r\n    hasSelection,\r\n    selectedCount: selectedIds.length,\r\n    totalCount: items.length\r\n  };\r\n};\r\n","import React, { createContext, useContext, useState, useCallback, ReactNode } from 'react';\r\nimport { managementService } from '../services';\r\nimport {\r\n  UnitEntity,\r\n  LocationEntity,\r\n  ItemNameEntity,\r\n  CreateUnitRequest,\r\n  CreateLocationRequest,\r\n  CreateItemNameRequest,\r\n  UpdateUnitRequest,\r\n  UpdateLocationRequest,\r\n  UpdateItemNameRequest,\r\n  BulkDeleteRequest,\r\n  ManagementResponse,\r\n} from '../types';\r\n\r\ninterface ManagementContextType {\r\n  // Data\r\n  units: UnitEntity[];\r\n  locations: LocationEntity[];\r\n  itemNames: ItemNameEntity[];\r\n  loading: boolean;\r\n  error: string | null;\r\n  // Methods\r\n  loadAllData: () => Promise<void>;\r\n  loadUnits: () => Promise<void>;\r\n  loadLocations: () => Promise<void>;\r\n  loadItemNames: () => Promise<void>;\r\n  // Unit operations\r\n  createUnit: (data: CreateUnitRequest) => Promise<ManagementResponse<UnitEntity>>;\r\n  updateUnit: (id: string, data: UpdateUnitRequest) => Promise<ManagementResponse<UnitEntity>>;\r\n  deleteUnits: (data: BulkDeleteRequest) => Promise<ManagementResponse<{ deleted: number; errors: string[] }>>;\r\n  // Location operations\r\n  createLocation: (data: CreateLocationRequest) => Promise<ManagementResponse<LocationEntity>>;\r\n  updateLocation: (id: string, data: UpdateLocationRequest) => Promise<ManagementResponse<LocationEntity>>;\r\n  deleteLocations: (data: BulkDeleteRequest) => Promise<ManagementResponse<{ deleted: number; errors: string[] }>>;\r\n  // Item Name operations\r\n  createItemName: (data: CreateItemNameRequest) => Promise<ManagementResponse<ItemNameEntity>>;\r\n  updateItemName: (id: string, data: UpdateItemNameRequest) => Promise<ManagementResponse<ItemNameEntity>>;\r\n  deleteItemNames: (data: BulkDeleteRequest) => Promise<ManagementResponse<{ deleted: number; errors: string[] }>>;\r\n}\r\n\r\nconst ManagementContext = createContext<ManagementContextType | undefined>(undefined);\r\n\r\ninterface ManagementProviderProps {\r\n  children: ReactNode;\r\n}\r\n\r\nexport const ManagementProvider: React.FC<ManagementProviderProps> = ({ children }) => {\r\n  const [units, setUnits] = useState<UnitEntity[]>([]);\r\n  const [locations, setLocations] = useState<LocationEntity[]>([]);\r\n  const [itemNames, setItemNames] = useState<ItemNameEntity[]>([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  // Lazy loaders per collection\r\n  const loadUnits = useCallback(async () => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const res = await managementService.getAllUnits();\r\n      if (res.success && res.data) setUnits(res.data);\r\n      else if (!res.success) setError(res.error || 'שגיאה בטעינת יחידות');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, []);\r\n\r\n  const loadLocations = useCallback(async () => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const res = await managementService.getAllLocations();\r\n      if (res.success && res.data) setLocations(res.data);\r\n      else if (!res.success) setError(res.error || 'שגיאה בטעינת מיקומים');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, []);\r\n\r\n  const loadItemNames = useCallback(async () => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const res = await managementService.getAllItemNames();\r\n      if (res.success && res.data) setItemNames(res.data);\r\n      else if (!res.success) setError(res.error || 'שגיאה בטעינת שמות פריטים');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, []);\r\n\r\n  // Keep an aggregate loader for scenarios that need all data (e.g., export/import screens)\r\n  const loadAllData = useCallback(async () => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const [unitsRes, locationsRes, itemNamesRes] = await Promise.all([\r\n        managementService.getAllUnits(),\r\n        managementService.getAllLocations(),\r\n        managementService.getAllItemNames(),\r\n      ]);\r\n\r\n      if (unitsRes.success && unitsRes.data) setUnits(unitsRes.data);\r\n      if (locationsRes.success && locationsRes.data) setLocations(locationsRes.data);\r\n      if (itemNamesRes.success && itemNamesRes.data) setItemNames(itemNamesRes.data);\r\n\r\n      if (!unitsRes.success) setError(unitsRes.error || null);\r\n      if (!locationsRes.success) setError(prev => prev || locationsRes.error || null);\r\n      if (!itemNamesRes.success) setError(prev => prev || itemNamesRes.error || null);\r\n    } catch (err: any) {\r\n      setError(err.message || 'שגיאה בטעינת נתונים');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, []);\r\n\r\n  // IMPORTANT: Do NOT auto-load on app start anymore. Fetch only when tabs mount.\r\n  // useEffect(() => {\r\n  //   loadAllData();\r\n  // }, [loadAllData]);\r\n\r\n  // Unit operations\r\n  const createUnit = useCallback(async (data: CreateUnitRequest): Promise<ManagementResponse<UnitEntity>> => {\r\n    const result = await managementService.createUnit(data);\r\n    if (result.success && result.data) {\r\n      setUnits(prev => [...prev, result.data!]);\r\n    }\r\n    return result;\r\n  }, []);\r\n\r\n  const updateUnit = useCallback(async (id: string, data: UpdateUnitRequest): Promise<ManagementResponse<UnitEntity>> => {\r\n    const result = await managementService.updateUnit(id, data);\r\n    if (result.success && result.data) {\r\n      setUnits(prev => prev.map(unit => unit.id === id ? result.data! : unit));\r\n    }\r\n    return result;\r\n  }, []);\r\n\r\n  const deleteUnits = useCallback(async (data: BulkDeleteRequest): Promise<ManagementResponse<{ deleted: number; errors: string[] }>> => {\r\n    const result = await managementService.deleteUnits(data);\r\n    if (result.success) {\r\n      setUnits(prev => prev.filter(unit => !data.ids.includes(unit.id)));\r\n    }\r\n    return result;\r\n  }, []);\r\n\r\n  // Location operations\r\n  const createLocation = useCallback(async (data: CreateLocationRequest): Promise<ManagementResponse<LocationEntity>> => {\r\n    const result = await managementService.createLocation(data);\r\n    if (result.success && result.data) {\r\n      setLocations(prev => [...prev, result.data!]);\r\n    }\r\n    return result;\r\n  }, []);\r\n\r\n  const updateLocation = useCallback(async (id: string, data: UpdateLocationRequest): Promise<ManagementResponse<LocationEntity>> => {\r\n    const result = await managementService.updateLocation(id, data);\r\n    if (result.success && result.data) {\r\n      setLocations(prev => prev.map(location => location.id === id ? result.data! : location));\r\n    }\r\n    return result;\r\n  }, []);\r\n\r\n  const deleteLocations = useCallback(async (data: BulkDeleteRequest): Promise<ManagementResponse<{ deleted: number; errors: string[] }>> => {\r\n    const result = await managementService.deleteLocations(data);\r\n    if (result.success) {\r\n      setLocations(prev => prev.filter(location => !data.ids.includes(location.id)));\r\n    }\r\n    return result;\r\n  }, []);\r\n\r\n  // Item Name operations\r\n  const createItemName = useCallback(async (data: CreateItemNameRequest): Promise<ManagementResponse<ItemNameEntity>> => {\r\n    const result = await managementService.createItemName(data);\r\n    if (result.success && result.data) {\r\n      setItemNames(prev => [...prev, result.data!]);\r\n    }\r\n    return result;\r\n  }, []);\r\n\r\n  const updateItemName = useCallback(async (id: string, data: UpdateItemNameRequest): Promise<ManagementResponse<ItemNameEntity>> => {\r\n    const result = await managementService.updateItemName(id, data);\r\n    if (result.success && result.data) {\r\n      setItemNames(prev => prev.map(itemName => itemName.id === id ? result.data! : itemName));\r\n    }\r\n    return result;\r\n  }, []);\r\n\r\n  const deleteItemNames = useCallback(async (data: BulkDeleteRequest): Promise<ManagementResponse<{ deleted: number; errors: string[] }>> => {\r\n    const result = await managementService.deleteItemNames(data);\r\n    if (result.success) {\r\n      setItemNames(prev => prev.filter(itemName => !data.ids.includes(itemName.id)));\r\n    }\r\n    return result;\r\n  }, []);\r\n\r\n  const value: ManagementContextType = {\r\n    // Data\r\n    units,\r\n    locations,\r\n    itemNames,\r\n    loading,\r\n    error,\r\n    // Methods\r\n    loadAllData,\r\n    loadUnits,\r\n    loadLocations,\r\n    loadItemNames,\r\n    // Unit operations\r\n    createUnit,\r\n    updateUnit,\r\n    deleteUnits,\r\n    // Location operations\r\n    createLocation,\r\n    updateLocation,\r\n    deleteLocations,\r\n    // Item Name operations\r\n    createItemName,\r\n    updateItemName,\r\n    deleteItemNames,\r\n  };\r\n\r\n  return (\r\n    <ManagementContext.Provider value={value}>\r\n      {children}\r\n    </ManagementContext.Provider>\r\n  );\r\n};\r\n\r\nexport const useManagement = (): ManagementContextType => {\r\n  const context = useContext(ManagementContext);\r\n  if (context === undefined) {\r\n    throw new Error('useManagement must be used within a ManagementProvider');\r\n  }\r\n  return context;\r\n};\r\n","import React, { createContext, useContext, useCallback, useState } from 'react';\r\n\r\ninterface PendingReceiptsContextType {\r\n  refreshPendingCount: () => void;\r\n  decrementPendingCount: (receiptId?: string) => void;\r\n  registerRefreshCallback: (callback: () => Promise<void>) => void;\r\n  registerDecrementCallback: (callback: (receiptId?: string) => void) => void;\r\n}\r\n\r\nconst PendingReceiptsContext = createContext<PendingReceiptsContextType | undefined>(undefined);\r\n\r\nexport const PendingReceiptsProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {\r\n  const [refreshCallback, setRefreshCallback] = useState<(() => Promise<void>) | null>(null);\r\n  const [decrementCallback, setDecrementCallback] = useState<((receiptId?: string) => void) | null>(null);\r\n\r\n  const refreshPendingCount = useCallback(async () => {\r\n    if (refreshCallback) {\r\n      await refreshCallback();\r\n    }\r\n  }, [refreshCallback]);\r\n\r\n  const decrementPendingCount = useCallback((receiptId?: string) => {\r\n    if (decrementCallback) {\r\n      decrementCallback(receiptId);\r\n    }\r\n  }, [decrementCallback]);\r\n\r\n  const registerRefreshCallback = useCallback((callback: () => Promise<void>) => {\r\n    setRefreshCallback(() => callback);\r\n  }, []);\r\n\r\n  const registerDecrementCallback = useCallback((callback: (receiptId?: string) => void) => {\r\n    setDecrementCallback(() => callback);\r\n  }, []);\r\n\r\n  return (\r\n    <PendingReceiptsContext.Provider\r\n      value={{\r\n        refreshPendingCount,\r\n        decrementPendingCount,\r\n        registerRefreshCallback,\r\n        registerDecrementCallback,\r\n      }}\r\n    >\r\n      {children}\r\n    </PendingReceiptsContext.Provider>\r\n  );\r\n};\r\n\r\nexport const usePendingReceiptsContext = () => {\r\n  const context = useContext(PendingReceiptsContext);\r\n  if (context === undefined) {\r\n    // Provide a fallback instead of throwing an error to prevent crashes\r\n    return {\r\n      refreshPendingCount: async () => {},\r\n      decrementPendingCount: () => {},\r\n      registerRefreshCallback: () => {},\r\n      registerDecrementCallback: () => {},\r\n    };\r\n  }\r\n  return context;\r\n};","import React from 'react';\r\n\r\nconst ServerError: React.FC = () => (\r\n  <div className=\"card\">\r\n    <div className=\"card-body text-center\">\r\n      <div className=\"alert alert-danger\">\r\n        <div style={{ fontSize: '2.5rem', marginBottom: 'var(--spacing-md)' }}>⚠️</div>\r\n        <h2 style={{ color: 'var(--color-danger)', marginBottom: 'var(--spacing-sm)' }}>תקלה בשרת</h2>\r\n        <p>לא ניתן לטעון את הנתונים כרגע.<br />אנא נסה שוב מאוחר יותר.</p>\r\n      </div>\r\n    </div>\r\n  </div>\r\n);\r\n\r\nexport default ServerError;\r\n","import React, { useEffect, useRef, useCallback } from 'react';\r\nimport './Modal.css';\r\n\r\ninterface ModalProps {\r\n  children: React.ReactNode;\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  title?: string;\r\n  size?: 'sm' | 'md' | 'lg' | 'xl' | 'full';\r\n  showCloseButton?: boolean;\r\n  closeOnOverlayClick?: boolean;\r\n  closeOnEscape?: boolean;\r\n  className?: string;\r\n}\r\n\r\nconst Modal: React.FC<ModalProps> = ({ \r\n  children, \r\n  isOpen, \r\n  onClose, \r\n  title,\r\n  size = 'md',\r\n  showCloseButton = true,\r\n  closeOnOverlayClick = true,\r\n  closeOnEscape = true,\r\n  className = ''\r\n}) => {\r\n  const modalRef = useRef<HTMLDivElement>(null);\r\n  const previousActiveElement = useRef<HTMLElement | null>(null);\r\n\r\n  const handleOverlayClick = useCallback((event: React.MouseEvent | React.TouchEvent) => {\r\n    if (closeOnOverlayClick && event.target === event.currentTarget) {\r\n      onClose();\r\n    }\r\n  }, [onClose, closeOnOverlayClick]);\r\n\r\n  const handleContentClick = useCallback((e: React.MouseEvent | React.TouchEvent) => {\r\n    e.stopPropagation();\r\n  }, []);\r\n\r\n  const handleCloseClick = useCallback((e: React.MouseEvent | React.TouchEvent) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    onClose();\r\n  }, [onClose]);\r\n\r\n  useEffect(() => {\r\n    if (isOpen) {\r\n      // Store the previously focused element\r\n      previousActiveElement.current = document.activeElement as HTMLElement;\r\n      \r\n      // Focus the modal\r\n      modalRef.current?.focus();\r\n      \r\n      // Simple mobile-friendly scroll prevention\r\n      const isMobile = window.innerWidth <= 768;\r\n      if (isMobile) {\r\n        // On mobile, just prevent overflow - don't fix position\r\n        document.body.style.overflow = 'hidden';\r\n        document.body.style.touchAction = 'none';\r\n      } else {\r\n        // On desktop, use the more aggressive prevention\r\n        const scrollY = window.scrollY;\r\n        document.body.style.overflow = 'hidden';\r\n        document.body.style.position = 'fixed';\r\n        document.body.style.top = `-${scrollY}px`;\r\n        document.body.style.width = '100%';\r\n        document.body.setAttribute('data-scroll-y', scrollY.toString());\r\n      }\r\n    } else {\r\n      // ENHANCED CLEANUP - Always restore all styles regardless of device\r\n      const scrollY = document.body.getAttribute('data-scroll-y');\r\n      \r\n      // Force reset all possible scroll-blocking styles\r\n      document.body.style.overflow = '';\r\n      document.body.style.position = '';\r\n      document.body.style.top = '';\r\n      document.body.style.width = '';\r\n      document.body.style.height = '';\r\n      document.body.style.touchAction = '';\r\n      document.body.style.pointerEvents = '';\r\n      document.body.style.userSelect = '';\r\n      document.body.removeAttribute('data-scroll-y');\r\n      \r\n      // Force enable scrolling on mobile\r\n      if (window.innerWidth <= 768) {\r\n        document.body.style.overflowY = 'auto';\r\n        document.body.style.touchAction = 'auto';\r\n        document.documentElement.style.overflowY = 'auto';\r\n        document.documentElement.style.touchAction = 'auto';\r\n        \r\n        // Remove any style attributes that might be blocking scrolling\r\n        setTimeout(() => {\r\n          document.body.removeAttribute('style');\r\n        }, 100);\r\n      }\r\n      \r\n      // Restore scroll position only on desktop\r\n      if (scrollY && window.innerWidth > 768) {\r\n        window.scrollTo(0, parseInt(scrollY));\r\n      }\r\n      \r\n      // Restore focus to the previously focused element\r\n      if (previousActiveElement.current) {\r\n        previousActiveElement.current.focus();\r\n      }\r\n    }\r\n\r\n    return () => {\r\n      // Cleanup function - always restore normal state and ensure mobile accessibility\r\n      document.body.style.overflow = '';\r\n      document.body.style.position = '';\r\n      document.body.style.top = '';\r\n      document.body.style.width = '';\r\n      document.body.style.height = '';\r\n      document.body.style.touchAction = '';\r\n      document.body.removeAttribute('data-scroll-y');\r\n      \r\n      // Ensure body is fully interactive on mobile\r\n      document.body.style.pointerEvents = '';\r\n      document.body.style.userSelect = '';\r\n    };\r\n  }, [isOpen]);\r\n\r\n  useEffect(() => {\r\n    const handleEscape = (event: KeyboardEvent) => {\r\n      if (closeOnEscape && event.key === 'Escape') {\r\n        onClose();\r\n      }\r\n    };\r\n\r\n    if (isOpen) {\r\n      document.addEventListener('keydown', handleEscape);\r\n    }\r\n\r\n    return () => {\r\n      document.removeEventListener('keydown', handleEscape);\r\n    };\r\n  }, [isOpen, onClose, closeOnEscape]);\r\n\r\n  if (!isOpen) return null;\r\n\r\n  // Use medium size on mobile instead of full to avoid sizing issues\r\n  const isMobile = window.innerWidth <= 768;\r\n  const effectiveSize = isMobile ? 'md' : size;\r\n\r\n  return (\r\n    <div \r\n      className=\"modal-overlay\" \r\n      onClick={handleOverlayClick}\r\n      onTouchStart={handleOverlayClick}\r\n      role=\"dialog\"\r\n      aria-modal=\"true\"\r\n      aria-labelledby={title ? \"modal-title\" : undefined}\r\n      style={{\r\n        // Force inline styles for debugging on mobile\r\n        position: 'fixed',\r\n        top: 0,\r\n        left: 0,\r\n        right: 0,\r\n        bottom: 0,\r\n        background: 'rgba(0, 0, 0, 0.9)',\r\n        zIndex: 1003,\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        padding: '10px'\r\n      }}\r\n    >\r\n      <div \r\n        ref={modalRef}\r\n        className={`modal-content modal-content--${effectiveSize} ${className}`}\r\n        onClick={handleContentClick}\r\n        onTouchStart={handleContentClick}\r\n        tabIndex={-1}\r\n        style={{\r\n          // Force inline styles for debugging on mobile\r\n          background: '#2a2a2a',\r\n          border: '2px solid #007bff',\r\n          borderRadius: '8px',\r\n          maxWidth: 'calc(100vw - 20px)',\r\n          maxHeight: '85vh',\r\n          width: '100%',\r\n          position: 'relative',\r\n          display: 'flex',\r\n          flexDirection: 'column',\r\n          boxShadow: '0 4px 20px rgba(0, 0, 0, 0.5)'\r\n        }}\r\n      >\r\n        {(title || showCloseButton) && (\r\n          <div className=\"modal-header\">\r\n            {title && <h3 id=\"modal-title\" className=\"modal-title\">{title}</h3>}\r\n            {showCloseButton && (\r\n              <button \r\n                className=\"modal-close-button\" \r\n                onClick={handleCloseClick}\r\n                onTouchStart={handleCloseClick}\r\n                aria-label=\"סגור חלון\"\r\n                type=\"button\"\r\n              >\r\n                <svg viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n                  <path d=\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"/>\r\n                </svg>\r\n              </button>\r\n            )}\r\n          </div>\r\n        )}\r\n        \r\n        <div className=\"modal-body\">\r\n          {children}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Modal;\r\n","import React from 'react';\r\nimport './ConflictErrorModal.css';\r\n\r\ninterface ConflictErrorModalProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  title: string;\r\n  message: string;\r\n  resolutionMessage: string;\r\n  type: 'user' | 'item';\r\n}\r\n\r\n// Translate common backend error messages to Hebrew\r\nconst translateErrorMessage = (msg: string, type: 'user' | 'item') => {\r\n  if (!msg) return '';\r\n  const m = msg.toLowerCase();\r\n  const translations: Array<{ test: (s: string) => boolean; he: string }> = [\r\n    { test: s => s.includes('cannot delete items that have been signed'), he: 'לא ניתן למחוק פריטים שנחתמו עבורם' },\r\n    { test: s => s.includes('cannot delete item that has been signed'), he: 'לא ניתן למחוק פריט שנחתם עבורו' },\r\n    { test: s => s.includes('cannot delete users with active receipts'), he: 'לא ניתן למחוק משתמשים עם קבלות פעילות' },\r\n    { test: s => s.includes('is referenced in receipts') || s.includes('referenced by receipts'), he: 'לא ניתן למחוק: הפריט מקושר לקבלות' },\r\n    { test: s => s.includes('assigned to users') || s.includes('allocated to users'), he: 'לא ניתן למחוק: הפריט מוקצה למשתמשים' },\r\n    { test: s => s.includes('foreign key') || s.includes('dependency'), he: 'לא ניתן למחוק עקב תלות ברשומות אחרות' },\r\n    { test: s => s.includes('cannot delete') && s.includes('signed'), he: 'לא ניתן למחוק פריטים שנחתמו עבורם' },\r\n  ];\r\n  const found = translations.find(t => t.test(m));\r\n  return found ? found.he : msg;\r\n};\r\n\r\nconst ConflictErrorModal: React.FC<ConflictErrorModalProps> = ({\r\n  isOpen,\r\n  onClose,\r\n  title,\r\n  message,\r\n  resolutionMessage,\r\n  type\r\n}) => {\r\n  if (!isOpen) return null;\r\n\r\n  const getIcon = () => {\r\n    return type === 'user' ? 'fas fa-user-times' : 'fas fa-box-open';\r\n  };\r\n\r\n  const getColor = () => {\r\n    return type === 'user' ? '#dc3545' : '#fd7e14';\r\n  };\r\n\r\n  const displayMessage = translateErrorMessage(message, type);\r\n\r\n  return (\r\n    <div className=\"modal-overlay\" onClick={onClose}>\r\n      <div className=\"modal-content conflict-modal\" onClick={e => e.stopPropagation()} dir=\"rtl\">\r\n        <div className=\"modal-header conflict-header\" style={{ backgroundColor: getColor() }}>\r\n          <h4 className=\"modal-title\">\r\n            <i className={`${getIcon()} me-2`}></i>\r\n            {title}\r\n          </h4>\r\n          <button \r\n            className=\"btn-close btn-close-white\" \r\n            onClick={onClose}\r\n            aria-label=\"סגור\"\r\n          ></button>\r\n        </div>\r\n        \r\n        <div className=\"modal-body\">\r\n          <div className=\"conflict-explanation\">\r\n            <div className=\"alert alert-warning d-flex align-items-start\">\r\n              <i className=\"fas fa-exclamation-triangle me-3 mt-1\" style={{ color: '#856404' }}></i>\r\n              <div>\r\n                <strong>בעיה:</strong>\r\n                <p className=\"mb-0 mt-2\" style={{ whiteSpace: 'pre-line', fontWeight: 500 }}>{displayMessage}</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          \r\n          <div className=\"resolution-guide\">\r\n            <div className=\"alert alert-info d-flex align-items-start\">\r\n              <i className=\"fas fa-lightbulb me-3 mt-1\" style={{ color: '#0c5460' }}></i>\r\n              <div>\r\n                <strong>פתרונות אפשריים:</strong>\r\n                <div className=\"mt-2\" style={{ whiteSpace: 'pre-line' }}>\r\n                  {resolutionMessage}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          \r\n          <div className=\"additional-help\">\r\n            <div className=\"card bg-light\">\r\n              <div className=\"card-body\">\r\n                <h6 className=\"card-title\">\r\n                  <i className=\"fas fa-info-circle me-2\"></i>\r\n                  מידע נוסף\r\n                </h6>\r\n                <p className=\"card-text small\">\r\n                  {type === 'user' \r\n                    ? 'מחיקת משתמש אפשרית רק כאשר אין לו פריטים מוקצים. ניתן לעקוב אחר הפריטים המוקצים דרך מסך הדוחות.'\r\n                    : 'מחיקת פריט אפשרית רק כאשר הוא לא מוקצה למשתמש כלשהו. ניתן לבדוק את סטטוס הפריט דרך מסך הפריטים.'\r\n                  }\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \r\n        <div className=\"modal-footer\">\r\n          <button \r\n            className=\"btn btn-primary\"\r\n            onClick={onClose}\r\n          >\r\n            <i className=\"fas fa-check me-2\"></i>\r\n            הבנתי\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ConflictErrorModal;\r\n","import React from 'react';\r\nimport Modal from './Modal';\r\nimport './BulkDeleteErrorModal.css';\r\n\r\ninterface BulkDeleteErrorModalProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  title: string;\r\n  message: string;\r\n  deletedCount: number;\r\n  totalCount: number;\r\n  errors: string[];\r\n  type: 'user' | 'item' | 'unit' | 'location' | 'itemName';\r\n}\r\n\r\n// Translate common backend error messages to Hebrew\r\nconst translateErrorMessage = (msg: string, type: 'user' | 'item' | 'unit' | 'location' | 'itemName') => {\r\n  if (!msg) return '';\r\n  const m = msg.toLowerCase();\r\n\r\n  const translations: Array<{ test: (s: string) => boolean; he: string }> = [\r\n    { test: s => s.includes('cannot delete items that have been signed'), he: 'לא ניתן למחוק פריטים שנחתמו עבורם' },\r\n    { test: s => s.includes('cannot delete item that has been signed'), he: 'לא ניתן למחוק פריט שנחתם עבורו' },\r\n    { test: s => s.includes('cannot delete users with active receipts'), he: 'לא ניתן למחוק משתמשים עם קבלות פעילות' },\r\n    { test: s => s.includes('is referenced in receipts') || s.includes('referenced by receipts'), he: 'לא ניתן למחוק: הפריט מקושר לקבלות' },\r\n    { test: s => s.includes('assigned to users') || s.includes('allocated to users'), he: 'לא ניתן למחוק: הפריט מוקצה למשתמשים' },\r\n    // Locations: FK from users to locations\r\n    { test: s => s.includes('users_locationid_fkey') || (s.includes('location') && s.includes('users') && s.includes('foreign key')), he: 'לא ניתן למחוק מיקום המשויך למשתמשים. יש להסיר את שיוך המשתמשים לפני המחיקה.' },\r\n    { test: s => s.includes('foreign key') || s.includes('dependency'), he: 'לא ניתן למחוק עקב תלות ברשומות אחרות' },\r\n    // Management: units with locations having users\r\n    { test: s => s.includes('cannot delete unit') && s.includes('locations') && s.includes('assigned users'), he: 'לא ניתן למחוק יחידה שיש לה מיקומים עם משתמשים משויכים. יש להסיר/להעביר את המשתמשים תחילה.' },\r\n  ];\r\n\r\n  const found = translations.find(t => t.test(m));\r\n  if (found) return found.he;\r\n\r\n  // Default: return original message\r\n  return msg;\r\n};\r\n\r\nconst BulkDeleteErrorModal: React.FC<BulkDeleteErrorModalProps> = ({\r\n  isOpen,\r\n  onClose,\r\n  title,\r\n  message,\r\n  deletedCount,\r\n  totalCount,\r\n  errors,\r\n  type\r\n}) => {\r\n  const entityName = (\r\n    type === 'user' ? 'משתמשים' :\r\n    type === 'item' ? 'פריטים' :\r\n    type === 'unit' ? 'יחידות' :\r\n    type === 'location' ? 'מיקומים' :\r\n    'שמות פריטים'\r\n  );\r\n  const failedCount = totalCount - deletedCount;\r\n  const displayMessage = translateErrorMessage(message, type);\r\n\r\n  return (\r\n    <Modal isOpen={isOpen} onClose={onClose} title={title} size=\"lg\">\r\n      <div className=\"bulk-delete-error-modal bdem\" dir=\"rtl\">\r\n        {/* Summary - compact cards */}\r\n        <div className=\"bdem-summary\">\r\n          <div className=\"bdem-card\">\r\n            <div className=\"bdem-card-label\">סה\"כ נבחרו</div>\r\n            <div className=\"bdem-card-number text-primary\">{totalCount}</div>\r\n          </div>\r\n          <div className=\"bdem-card\">\r\n            <div className=\"bdem-card-label\">נמחקו בהצלחה</div>\r\n            <div className=\"bdem-card-number text-success\">{deletedCount}</div>\r\n          </div>\r\n          <div className=\"bdem-card\">\r\n            <div className=\"bdem-card-label\">נכשלו</div>\r\n            <div className=\"bdem-card-number text-danger\">{failedCount}</div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Error banner */}\r\n        <div className=\"bdem-banner bdem-banner-danger\">\r\n          <i className=\"fas fa-times-circle\"></i>\r\n          <div>\r\n            <div className=\"bdem-banner-title\">סיבת הכשל</div>\r\n            <div className=\"bdem-banner-text\">{displayMessage}</div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Failed items */}\r\n        {errors.length > 0 && (\r\n          <div className=\"bdem-section\">\r\n            <div className=\"bdem-section-title\">\r\n              <i className=\"fas fa-list\"></i>\r\n              {entityName} שלא ניתן למחוק ({errors.length}):\r\n            </div>\r\n            <div className=\"bdem-list\">\r\n              {errors.map((errorItem, index) => (\r\n                <div key={index} className=\"bdem-list-item\">\r\n                  <i className=\"fas fa-times-circle text-danger\"></i>\r\n                  <span className=\"bdem-list-text\">{errorItem}</span>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Tips */}\r\n        <div className=\"bdem-banner bdem-banner-info\" style={{ marginTop: 12 }}>\r\n          <i className=\"fas fa-lightbulb\"></i>\r\n          <div>\r\n            <div className=\"bdem-banner-title\">פתרונות מומלצים</div>\r\n            {type === 'user' ? (\r\n              <ul className=\"mb-0\">\r\n                <li>החזר את כל הפריטים המוקצים למשתמשים אלה</li>\r\n                <li>בטל את הקצאת הפריטים דרך מסך הקבלות</li>\r\n                <li>מחק תחילה את הקבלות הפעילות של המשתמשים</li>\r\n              </ul>\r\n            ) : type === 'unit' ? (\r\n              <ul className=\"mb-0\">\r\n                <li>אתר מיקומים ביחידה שבהם משויכים משתמשים</li>\r\n                <li>העבר את המשתמשים ליחידה אחרת או הסר את שיוכם</li>\r\n                <li>לאחר שאין שיוכים, נסה למחוק שוב את היחידה</li>\r\n              </ul>\r\n            ) : (\r\n              <ul className=\"mb-0\">\r\n                <li>החזר את הפריטים דרך מסך הקבלות</li>\r\n                <li>בטל את הקצאת הפריטים למשתמשים</li>\r\n                <li>מחק את הקבלות המכילות את הפריטים</li>\r\n              </ul>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Actions */}\r\n        <div className=\"d-flex justify-content-end mt-3\">\r\n          <button type=\"button\" className=\"btn btn-primary\" onClick={onClose}>\r\n            <i className=\"fas fa-check me-2\"></i>\r\n            הבנתי\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default BulkDeleteErrorModal;\r\n","import React from 'react';\r\nimport Modal from './Modal';\r\n\r\ninterface ErrorNotificationModalProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  title: string;\r\n  message: string;\r\n}\r\n\r\nconst ErrorNotificationModal: React.FC<ErrorNotificationModalProps> = ({\r\n  isOpen,\r\n  onClose,\r\n  title,\r\n  message\r\n}) => {\r\n  return (\r\n    <Modal isOpen={isOpen} onClose={onClose} title={title} size=\"md\">\r\n      <div style={{ direction: 'rtl', padding: '20px' }}>\r\n        <div className=\"alert alert-danger\" style={{ marginBottom: '20px' }}>\r\n          <i className=\"fas fa-exclamation-triangle me-2\"></i>\r\n          <strong>שגיאה:</strong> {message}\r\n        </div>\r\n\r\n        <div style={{ display: 'flex', justifyContent: 'flex-end', gap: '12px' }}>\r\n          <button\r\n            type=\"button\"\r\n            className=\"btn btn-primary\"\r\n            onClick={onClose}\r\n          >\r\n            <i className=\"fas fa-check me-2\"></i>\r\n            הבנתי\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default ErrorNotificationModal;\r\n","import React from 'react';\r\nimport Modal from './Modal';\r\n\r\nexport type NotificationType = 'success' | 'error' | 'warning' | 'info';\r\n\r\ninterface NotificationModalProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  title?: string;\r\n  message: string;\r\n  type: NotificationType;\r\n  confirmText?: string;\r\n}\r\n\r\nconst NotificationModal: React.FC<NotificationModalProps> = ({\r\n  isOpen,\r\n  onClose,\r\n  title,\r\n  message,\r\n  type,\r\n  confirmText = 'הבנתי'\r\n}) => {\r\n  const getIcon = () => {\r\n    switch (type) {\r\n      case 'success':\r\n        return 'fas fa-check-circle';\r\n      case 'error':\r\n        return 'fas fa-exclamation-triangle';\r\n      case 'warning':\r\n        return 'fas fa-exclamation-circle';\r\n      case 'info':\r\n        return 'fas fa-info-circle';\r\n      default:\r\n        return 'fas fa-info-circle';\r\n    }\r\n  };\r\n\r\n  const getAlertClass = () => {\r\n    switch (type) {\r\n      case 'success':\r\n        return 'alert-success';\r\n      case 'error':\r\n        return 'alert-danger';\r\n      case 'warning':\r\n        return 'alert-warning';\r\n      case 'info':\r\n        return 'alert-info';\r\n      default:\r\n        return 'alert-info';\r\n    }\r\n  };\r\n\r\n  const getDefaultTitle = () => {\r\n    switch (type) {\r\n      case 'success':\r\n        return 'הצלחה';\r\n      case 'error':\r\n        return 'שגיאה';\r\n      case 'warning':\r\n        return 'אזהרה';\r\n      case 'info':\r\n        return 'מידע';\r\n      default:\r\n        return 'הודעה';\r\n    }\r\n  };\r\n\r\n  const displayTitle = title || getDefaultTitle();\r\n\r\n  return (\r\n    <Modal isOpen={isOpen} onClose={onClose} title={displayTitle} size=\"md\">\r\n      <div style={{ direction: 'rtl', padding: '20px' }}>\r\n        <div className={`alert ${getAlertClass()}`} style={{ marginBottom: '20px' }}>\r\n          <i className={`${getIcon()} me-2`}></i>\r\n          <div style={{ whiteSpace: 'pre-line' }}>{message}</div>\r\n        </div>\r\n\r\n        <div style={{ display: 'flex', justifyContent: 'flex-end', gap: '12px' }}>\r\n          <button\r\n            type=\"button\"\r\n            className=\"btn btn-primary\"\r\n            onClick={onClose}\r\n          >\r\n            <i className=\"fas fa-check me-2\"></i>\r\n            {confirmText}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default NotificationModal;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { generatePageNumbers } from '../../utils';\r\n\r\ninterface SmartPaginationProps {\r\n  currentPage: number;\r\n  totalPages: number;\r\n  onPageChange: (page: number) => void;\r\n  className?: string;\r\n}\r\n\r\nexport const SmartPagination: React.FC<SmartPaginationProps> = ({\r\n  currentPage,\r\n  totalPages,\r\n  onPageChange,\r\n  className = ''\r\n}) => {\r\n  const [isMobile, setIsMobile] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const checkIsMobile = () => {\r\n      setIsMobile(window.innerWidth <= 768);\r\n    };\r\n\r\n    checkIsMobile();\r\n    window.addEventListener('resize', checkIsMobile);\r\n    return () => window.removeEventListener('resize', checkIsMobile);\r\n  }, []);\r\n\r\n  const handlePageChange = (page: number) => {\r\n    onPageChange(page);\r\n    // Scroll to top of the page content when changing pages\r\n    setTimeout(() => {\r\n      window.scrollTo({ top: 0, behavior: 'smooth' });\r\n    }, 100);\r\n  };\r\n\r\n  if (totalPages <= 1) return null;\r\n\r\n  const pageNumbers = generatePageNumbers(currentPage, totalPages);\r\n  const showFirstPage = pageNumbers[0] > 1;\r\n  const showLastPage = pageNumbers[pageNumbers.length - 1] < totalPages;\r\n  const showFirstEllipsis = pageNumbers[0] > 2;\r\n  const showLastEllipsis = pageNumbers[pageNumbers.length - 1] < totalPages - 1;\r\n\r\n  // Add custom CSS to override existing pagination styles\r\n  const customStyles = `\r\n    .smart-pagination-custom button {\r\n      width: ${isMobile ? '28px' : '36px'} !important;\r\n      height: ${isMobile ? '28px' : '36px'} !important;\r\n      min-width: ${isMobile ? '28px' : '36px'} !important;\r\n      max-width: ${isMobile ? '28px' : '36px'} !important;\r\n      min-height: ${isMobile ? '28px' : '36px'} !important;\r\n      max-height: ${isMobile ? '28px' : '36px'} !important;\r\n      font-size: ${isMobile ? '11px' : '14px'} !important;\r\n      border-radius: ${isMobile ? '5px' : '8px'} !important;\r\n      padding: 0 !important;\r\n      box-sizing: border-box !important;\r\n      flex-shrink: 0 !important;\r\n      flex-grow: 0 !important;\r\n    }\r\n  `;\r\n\r\n  return (\r\n    <>\r\n      <style>{customStyles}</style>\r\n    <div \r\n      className={`smart-pagination smart-pagination-custom ${className}`} \r\n      role=\"navigation\" \r\n      aria-label=\"דפדוף בין עמודים\"\r\n      style={{\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        gap: '12px',\r\n        padding: '20px 16px'\r\n      }}\r\n    >\r\n      <div style={{\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        gap: isMobile ? '2px' : '6px',\r\n        justifyContent: 'center',\r\n        direction: 'rtl' // RTL for Hebrew layout\r\n      }}>\r\n        {/* Previous button (right arrow in RTL) */}\r\n        <button\r\n          onClick={() => handlePageChange(currentPage - 1)}\r\n          disabled={currentPage === 1}\r\n          title=\"עמוד קודם\"\r\n          aria-label=\"עמוד קודם\"\r\n          style={{\r\n            width: isMobile ? '28px' : '36px',\r\n            height: isMobile ? '28px' : '36px',\r\n            minWidth: isMobile ? '28px' : '36px',\r\n            maxWidth: isMobile ? '28px' : '36px',\r\n            minHeight: isMobile ? '28px' : '36px',\r\n            maxHeight: isMobile ? '28px' : '36px',\r\n            borderRadius: isMobile ? '5px' : '8px',\r\n            border: '1px solid rgba(255, 255, 255, 0.1)',\r\n            background: currentPage === 1 \r\n              ? 'rgba(255, 255, 255, 0.05)' \r\n              : 'rgba(255, 255, 255, 0.08)',\r\n            color: currentPage === 1 \r\n              ? 'rgba(255, 255, 255, 0.3)' \r\n              : 'rgba(255, 255, 255, 0.8)',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'center',\r\n            cursor: currentPage === 1 ? 'not-allowed' : 'pointer',\r\n            transition: 'all 0.2s ease',\r\n            fontSize: isMobile ? '11px' : '16px',\r\n            fontWeight: '600',\r\n            outline: 'none',\r\n            padding: '0',\r\n            boxSizing: 'border-box',\r\n            flexShrink: 0,\r\n            flexGrow: 0\r\n          }}\r\n          onMouseEnter={(e) => {\r\n            if (currentPage !== 1) {\r\n              (e.target as HTMLButtonElement).style.background = 'rgba(255, 255, 255, 0.12)';\r\n              (e.target as HTMLButtonElement).style.borderColor = 'rgba(255, 255, 255, 0.2)';\r\n            }\r\n          }}\r\n          onMouseLeave={(e) => {\r\n            if (currentPage !== 1) {\r\n              (e.target as HTMLButtonElement).style.background = 'rgba(255, 255, 255, 0.08)';\r\n              (e.target as HTMLButtonElement).style.borderColor = 'rgba(255, 255, 255, 0.1)';\r\n            }\r\n          }}\r\n        >\r\n          ‹\r\n        </button>\r\n\r\n        {/* First page */}\r\n        {showFirstPage && (\r\n          <>\r\n            <button\r\n              onClick={() => handlePageChange(1)}\r\n              title=\"עמוד ראשון\"\r\n              aria-label=\"עמוד ראשון\"\r\n              style={{\r\n                width: isMobile ? '28px' : '36px',\r\n                height: isMobile ? '28px' : '36px',\r\n                minWidth: isMobile ? '28px' : '36px',\r\n                maxWidth: isMobile ? '28px' : '36px',\r\n                minHeight: isMobile ? '28px' : '36px',\r\n                maxHeight: isMobile ? '28px' : '36px',\r\n                borderRadius: isMobile ? '5px' : '8px',\r\n                border: '1px solid rgba(255, 255, 255, 0.1)',\r\n                background: 'rgba(255, 255, 255, 0.08)',\r\n                color: 'rgba(255, 255, 255, 0.8)',\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                justifyContent: 'center',\r\n                cursor: 'pointer',\r\n                transition: 'all 0.2s ease',\r\n                fontSize: isMobile ? '11px' : '14px',\r\n                fontWeight: '500',\r\n                outline: 'none',\r\n                padding: '0',\r\n                boxSizing: 'border-box',\r\n                flexShrink: 0,\r\n                flexGrow: 0\r\n              }}\r\n              onMouseEnter={(e) => {\r\n                (e.target as HTMLButtonElement).style.background = 'rgba(255, 255, 255, 0.12)';\r\n                (e.target as HTMLButtonElement).style.borderColor = 'rgba(255, 255, 255, 0.2)';\r\n              }}\r\n              onMouseLeave={(e) => {\r\n                (e.target as HTMLButtonElement).style.background = 'rgba(255, 255, 255, 0.08)';\r\n                (e.target as HTMLButtonElement).style.borderColor = 'rgba(255, 255, 255, 0.1)';\r\n              }}\r\n            >\r\n              1\r\n            </button>\r\n            {showFirstEllipsis && (\r\n              <span style={{\r\n                color: 'rgba(255, 255, 255, 0.5)',\r\n                fontSize: '14px',\r\n                padding: '0 4px',\r\n                userSelect: 'none'\r\n              }}>\r\n                ⋯\r\n              </span>\r\n            )}\r\n          </>\r\n        )}\r\n\r\n        {/* Page numbers */}\r\n        {pageNumbers.map(page => (\r\n          <button\r\n            key={page}\r\n            onClick={() => handlePageChange(page)}\r\n            title={`עמוד ${page}`}\r\n            aria-label={`עמוד ${page}${currentPage === page ? ' - עמוד נוכחי' : ''}`}\r\n            aria-current={currentPage === page ? 'page' : undefined}\r\n            style={{\r\n              width: isMobile ? '28px' : '36px',\r\n              height: isMobile ? '28px' : '36px',\r\n              minWidth: isMobile ? '28px' : '36px',\r\n              maxWidth: isMobile ? '28px' : '36px',\r\n              minHeight: isMobile ? '28px' : '36px',\r\n              maxHeight: isMobile ? '28px' : '36px',\r\n              borderRadius: isMobile ? '5px' : '8px',\r\n              border: currentPage === page \r\n                ? '1px solid rgba(59, 130, 246, 0.4)' \r\n                : '1px solid rgba(255, 255, 255, 0.1)',\r\n              background: currentPage === page \r\n                ? 'linear-gradient(135deg, rgba(59, 130, 246, 0.8), rgba(29, 78, 216, 0.9))' \r\n                : 'rgba(255, 255, 255, 0.08)',\r\n              color: currentPage === page \r\n                ? 'white' \r\n                : 'rgba(255, 255, 255, 0.8)',\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              justifyContent: 'center',\r\n              cursor: 'pointer',\r\n              transition: 'all 0.2s ease',\r\n              fontSize: isMobile ? '11px' : '14px',\r\n              fontWeight: currentPage === page ? '600' : '500',\r\n              outline: 'none',\r\n              padding: '0',\r\n              boxSizing: 'border-box',\r\n              flexShrink: 0,\r\n              flexGrow: 0,\r\n              boxShadow: currentPage === page \r\n                ? (isMobile ? '0 1px 3px rgba(59, 130, 246, 0.3)' : '0 4px 12px rgba(59, 130, 246, 0.3)')\r\n                : 'none'\r\n            }}\r\n            onMouseEnter={(e) => {\r\n              if (currentPage !== page) {\r\n                (e.target as HTMLButtonElement).style.background = 'rgba(255, 255, 255, 0.12)';\r\n                (e.target as HTMLButtonElement).style.borderColor = 'rgba(255, 255, 255, 0.2)';\r\n              }\r\n            }}\r\n            onMouseLeave={(e) => {\r\n              if (currentPage !== page) {\r\n                (e.target as HTMLButtonElement).style.background = 'rgba(255, 255, 255, 0.08)';\r\n                (e.target as HTMLButtonElement).style.borderColor = 'rgba(255, 255, 255, 0.1)';\r\n              }\r\n            }}\r\n          >\r\n            {page}\r\n          </button>\r\n        ))}\r\n\r\n        {/* Last page */}\r\n        {showLastPage && (\r\n          <>\r\n            {showLastEllipsis && (\r\n              <span style={{\r\n                color: 'rgba(255, 255, 255, 0.5)',\r\n                fontSize: '14px',\r\n                padding: '0 4px',\r\n                userSelect: 'none'\r\n              }}>\r\n                ⋯\r\n              </span>\r\n            )}\r\n            <button\r\n              onClick={() => handlePageChange(totalPages)}\r\n              title={`עמוד אחרון (${totalPages})`}\r\n              aria-label={`עמוד אחרון (${totalPages})`}\r\n              style={{\r\n                width: isMobile ? '28px' : '36px',\r\n                height: isMobile ? '28px' : '36px',\r\n                minWidth: isMobile ? '28px' : '36px',\r\n                maxWidth: isMobile ? '28px' : '36px',\r\n                minHeight: isMobile ? '28px' : '36px',\r\n                maxHeight: isMobile ? '28px' : '36px',\r\n                borderRadius: isMobile ? '5px' : '8px',\r\n                border: '1px solid rgba(255, 255, 255, 0.1)',\r\n                background: 'rgba(255, 255, 255, 0.08)',\r\n                color: 'rgba(255, 255, 255, 0.8)',\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                justifyContent: 'center',\r\n                cursor: 'pointer',\r\n                transition: 'all 0.2s ease',\r\n                fontSize: isMobile ? '11px' : '14px',\r\n                fontWeight: '500',\r\n                outline: 'none',\r\n                padding: '0',\r\n                boxSizing: 'border-box',\r\n                flexShrink: 0,\r\n                flexGrow: 0\r\n              }}\r\n              onMouseEnter={(e) => {\r\n                (e.target as HTMLButtonElement).style.background = 'rgba(255, 255, 255, 0.12)';\r\n                (e.target as HTMLButtonElement).style.borderColor = 'rgba(255, 255, 255, 0.2)';\r\n              }}\r\n              onMouseLeave={(e) => {\r\n                (e.target as HTMLButtonElement).style.background = 'rgba(255, 255, 255, 0.08)';\r\n                (e.target as HTMLButtonElement).style.borderColor = 'rgba(255, 255, 255, 0.1)';\r\n              }}\r\n            >\r\n              {totalPages}\r\n            </button>\r\n          </>\r\n        )}\r\n\r\n        {/* Next button (left arrow in RTL) */}\r\n        <button\r\n          onClick={() => handlePageChange(currentPage + 1)}\r\n          disabled={currentPage === totalPages}\r\n          title=\"עמוד הבא\"\r\n          aria-label=\"עמוד הבא\"\r\n          style={{\r\n            width: isMobile ? '28px' : '36px',\r\n            height: isMobile ? '28px' : '36px',\r\n            minWidth: isMobile ? '28px' : '36px',\r\n            maxWidth: isMobile ? '28px' : '36px',\r\n            minHeight: isMobile ? '28px' : '36px',\r\n            maxHeight: isMobile ? '28px' : '36px',\r\n            borderRadius: isMobile ? '5px' : '8px',\r\n            border: '1px solid rgba(255, 255, 255, 0.1)',\r\n            background: currentPage === totalPages \r\n              ? 'rgba(255, 255, 255, 0.05)' \r\n              : 'rgba(255, 255, 255, 0.08)',\r\n            color: currentPage === totalPages \r\n              ? 'rgba(255, 255, 255, 0.3)' \r\n              : 'rgba(255, 255, 255, 0.8)',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'center',\r\n            cursor: currentPage === totalPages ? 'not-allowed' : 'pointer',\r\n            transition: 'all 0.2s ease',\r\n            fontSize: isMobile ? '11px' : '16px',\r\n            fontWeight: '600',\r\n            outline: 'none',\r\n            padding: '0',\r\n            boxSizing: 'border-box',\r\n            flexShrink: 0,\r\n            flexGrow: 0\r\n          }}\r\n          onMouseEnter={(e) => {\r\n            if (currentPage !== totalPages) {\r\n              (e.target as HTMLButtonElement).style.background = 'rgba(255, 255, 255, 0.12)';\r\n              (e.target as HTMLButtonElement).style.borderColor = 'rgba(255, 255, 255, 0.2)';\r\n            }\r\n          }}\r\n          onMouseLeave={(e) => {\r\n            if (currentPage !== totalPages) {\r\n              (e.target as HTMLButtonElement).style.background = 'rgba(255, 255, 255, 0.08)';\r\n              (e.target as HTMLButtonElement).style.borderColor = 'rgba(255, 255, 255, 0.1)';\r\n            }\r\n          }}\r\n        >\r\n          ›\r\n        </button>\r\n      </div>\r\n\r\n      {/* Page info for both mobile and desktop - shown below pagination */}\r\n      <div style={{\r\n        textAlign: 'center',\r\n        fontSize: isMobile ? '11px' : '13px',\r\n        color: 'rgba(255, 255, 255, 0.6)',\r\n        fontWeight: '500'\r\n      }}>\r\n        עמוד {currentPage} מתוך {totalPages}\r\n      </div>\r\n    </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default SmartPagination;\r\n","import React from 'react';\r\nimport './TabNavigation.css';\r\n\r\nexport interface TabItem {\r\n  id: string;\r\n  label: string;\r\n  icon?: string | React.ReactElement;\r\n  count?: number;\r\n  disabled?: boolean;\r\n}\r\n\r\ninterface TabNavigationProps {\r\n  tabs: TabItem[];\r\n  activeTab: string;\r\n  onTabChange: (tabId: string) => void;\r\n  variant?: 'primary' | 'secondary' | 'minimal' | 'compact';\r\n  size?: 'sm' | 'md' | 'lg';\r\n  fullWidth?: boolean;\r\n  className?: string;\r\n}\r\n\r\nconst TabNavigation: React.FC<TabNavigationProps> = ({\r\n  tabs,\r\n  activeTab,\r\n  onTabChange,\r\n  variant = 'primary',\r\n  size = 'md',\r\n  fullWidth = false,\r\n  className = ''\r\n}) => {\r\n  return (\r\n    <div className={`tab-navigation-container ${className}`}>\r\n      <nav \r\n        className={`tab-navigation tab-navigation--${variant} tab-navigation--${size} ${fullWidth ? 'tab-navigation--full-width' : ''}`}\r\n        role=\"tablist\"\r\n      >\r\n        {tabs.map((tab) => (\r\n          <button\r\n            key={tab.id}\r\n            className={`tab-navigation__item ${activeTab === tab.id ? 'tab-navigation__item--active' : ''} ${tab.disabled ? 'tab-navigation__item--disabled' : ''}`}\r\n            onClick={() => !tab.disabled && onTabChange(tab.id)}\r\n            type=\"button\"\r\n            role=\"tab\"\r\n            aria-selected={activeTab === tab.id}\r\n            aria-controls={`tabpanel-${tab.id}`}\r\n            disabled={tab.disabled}\r\n            title={tab.disabled ? 'לא זמין' : `עבור ל${tab.label}`}\r\n          >\r\n            <div className=\"tab-navigation__content\">\r\n              {tab.icon && (\r\n                typeof tab.icon === 'string' ? (\r\n                  <i className={`${tab.icon} tab-navigation__icon`} aria-hidden=\"true\"></i>\r\n                ) : (\r\n                  <div className=\"tab-navigation__icon\" aria-hidden=\"true\">\r\n                    {tab.icon}\r\n                  </div>\r\n                )\r\n              )}\r\n              <span className=\"tab-navigation__label\">{tab.label}</span>\r\n              {typeof tab.count === 'number' && (\r\n                <span className=\"tab-navigation__count\">{tab.count}</span>\r\n              )}\r\n            </div>\r\n            {activeTab === tab.id && (\r\n              <div className=\"tab-navigation__indicator\" aria-hidden=\"true\"></div>\r\n            )}\r\n          </button>\r\n        ))}\r\n      </nav>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TabNavigation;\r\n","import React from 'react';\r\n\r\ninterface LoadingSpinnerProps {\r\n  message?: string;\r\n  size?: 'sm' | 'md' | 'lg';\r\n  minHeight?: string;\r\n  padding?: string;\r\n  containerStyle?: React.CSSProperties;\r\n}\r\n\r\nconst LoadingSpinner: React.FC<LoadingSpinnerProps> = ({ \r\n  message = 'טוען...', \r\n  size = 'md',\r\n  minHeight = '300px',\r\n  padding = '60px 20px',\r\n  containerStyle = {}\r\n}) => {\r\n  const spinnerSizes = {\r\n    sm: { width: '24px', height: '24px', border: '2px' },\r\n    md: { width: '40px', height: '40px', border: '3px' },\r\n    lg: { width: '56px', height: '56px', border: '4px' }\r\n  };\r\n\r\n  const spinner = spinnerSizes[size];\r\n\r\n  return (\r\n    <div style={{ \r\n      display: 'flex',\r\n      flexDirection: 'column',\r\n      alignItems: 'center',\r\n      justifyContent: 'center',\r\n      padding: padding,\r\n      minHeight: minHeight,\r\n      ...containerStyle\r\n    }}>\r\n      <div style={{\r\n        width: spinner.width,\r\n        height: spinner.height,\r\n        border: `${spinner.border} solid rgba(255, 255, 255, 0.1)`,\r\n        borderTop: `${spinner.border} solid #3b82f6`,\r\n        borderRadius: '50%',\r\n        animation: 'spin 1s linear infinite',\r\n        marginBottom: '16px'\r\n      }}></div>\r\n      <p style={{\r\n        color: 'rgba(255, 255, 255, 0.7)',\r\n        fontSize: '14px',\r\n        fontWeight: '500',\r\n        margin: '0'\r\n      }}>\r\n        {message}\r\n      </p>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LoadingSpinner;\r\n","import React from 'react';\r\nimport { useTheme } from '../../contexts';\r\nimport './ThemeToggle.css';\r\n\r\ninterface ThemeToggleProps {\r\n  className?: string;\r\n  showLabel?: boolean;\r\n  variant?: 'default' | 'compact' | 'icon-only';\r\n  size?: 'sm' | 'md' | 'lg';\r\n}\r\n\r\nexport const ThemeToggle: React.FC<ThemeToggleProps> = ({ \r\n  className = '', \r\n  showLabel = true,\r\n  variant = 'default',\r\n  size = 'md'\r\n}) => {\r\n  const { theme, toggleTheme } = useTheme();\r\n\r\n  const getAriaLabel = () => {\r\n    return theme === 'dark' \r\n      ? 'מעבר למצב לא מבצעי' \r\n      : 'מעבר למצב מבצעי';\r\n  };\r\n\r\n  const getStatusText = () => {\r\n    return theme === 'dark' \r\n      ? 'מצב מבצעי פעיל' \r\n      : 'מצב לא מבצעי פעיל';\r\n  };\r\n\r\n  const renderIcon = (iconType: 'sun' | 'moon') => {\r\n    if (iconType === 'sun') {\r\n      return (\r\n        <svg className=\"theme-toggle-icon\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n          <path d=\"M12 2.25a.75.75 0 01.75.75v2.25a.75.75 0 01-1.5 0V3a.75.75 0 01.75-.75zM7.5 12a4.5 4.5 0 119 0 4.5 4.5 0 01-9 0zM18.894 6.166a.75.75 0 00-1.06-1.06l-1.591 1.59a.75.75 0 101.06 1.061l1.591-1.59zM21.75 12a.75.75 0 01-.75.75h-2.25a.75.75 0 010-1.5H21a.75.75 0 01.75.75zM17.834 18.894a.75.75 0 001.06-1.06l-1.59-1.591a.75.75 0 10-1.061 1.06l1.59 1.591zM12 18a.75.75 0 01.75.75V21a.75.75 0 01-1.5 0v-2.25A.75.75 0 0112 18zM7.758 17.303a.75.75 0 00-1.061-1.06l-1.591 1.59a.75.75 0 001.06 1.061l1.591-1.59zM6 12a.75.75 0 01-.75.75H3a.75.75 0 010-1.5h2.25A.75.75 0 016 12zM6.697 7.757a.75.75 0 001.06-1.06l-1.59-1.591a.75.75 0 00-1.061 1.06l1.59 1.591z\"/>\r\n        </svg>\r\n      );\r\n    } else {\r\n      return (\r\n        <svg className=\"theme-toggle-icon\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n          <path fillRule=\"evenodd\" d=\"M9.528 1.718a.75.75 0 01.162.819A8.97 8.97 0 009 6a9 9 0 009 9 8.97 8.97 0 003.463-.69.75.75 0 01.981.98 10.503 10.503 0 01-9.694 6.46c-5.799 0-10.5-4.701-10.5-10.5 0-4.368 2.667-8.112 6.46-9.694a.75.75 0 01.818.162z\" clipRule=\"evenodd\"/>\r\n        </svg>\r\n      );\r\n    }\r\n  };\r\n\r\n  if (variant === 'icon-only') {\r\n    return (\r\n      <button\r\n        className={`theme-toggle-icon-button theme-toggle-icon-button--${size} ${className}`}\r\n        onClick={toggleTheme}\r\n        aria-label={getAriaLabel()}\r\n        title={getAriaLabel()}\r\n      >\r\n        {renderIcon(theme === 'dark' ? 'moon' : 'sun')}\r\n      </button>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className={`theme-toggle-container theme-toggle-container--${variant} theme-toggle-container--${size} ${className}`}>\r\n      {showLabel && (\r\n        <div className=\"theme-toggle-label-section\">\r\n          <span className=\"theme-toggle-label\">ערכת נושא</span>\r\n          <span className=\"theme-toggle-status\">{getStatusText()}</span>\r\n        </div>\r\n      )}\r\n      <div className=\"theme-toggle-switch-container\">\r\n        <button\r\n          className={`theme-toggle-switch theme-toggle-switch--${theme}`}\r\n          onClick={toggleTheme}\r\n          aria-label={getAriaLabel()}\r\n          aria-checked={theme === 'dark'}\r\n          role=\"switch\"\r\n        >\r\n          <span className=\"theme-toggle-track\">\r\n            <span className=\"theme-toggle-track-icons\">\r\n              <span className=\"theme-toggle-track-icon theme-toggle-track-icon--light\">\r\n                {renderIcon('sun')}\r\n              </span>\r\n              <span className=\"theme-toggle-track-icon theme-toggle-track-icon--dark\">\r\n                {renderIcon('moon')}\r\n              </span>\r\n            </span>\r\n            <span className={`theme-toggle-thumb theme-toggle-thumb--${theme}`}>\r\n              {renderIcon(theme === 'dark' ? 'moon' : 'sun')}\r\n            </span>\r\n          </span>\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import React from 'react';\r\n\r\ninterface SelectionToolbarProps {\r\n  selectedCount: number;\r\n  totalCount: number;\r\n  onDelete?: () => void;\r\n  onClear: () => void;\r\n  onSelectAll?: () => void;\r\n  isVisible: boolean;\r\n  deleteLabel?: string;\r\n  isDeleting?: boolean;\r\n}\r\n\r\nexport const SelectionToolbar: React.FC<SelectionToolbarProps> = ({\r\n  selectedCount,\r\n  totalCount,\r\n  onDelete,\r\n  onClear,\r\n  onSelectAll,\r\n  isVisible,\r\n  deleteLabel = 'מחק נבחרים',\r\n  isDeleting = false\r\n}) => {\r\n  if (!isVisible || selectedCount === 0) {\r\n    return null;\r\n  }\r\n\r\n  const isAllSelected = selectedCount === totalCount;\r\n\r\n  return (\r\n    <div className={`selection-toolbar ${!isVisible ? 'hidden' : ''}`}>\r\n      <div className=\"selection-info\">\r\n        <i className=\"fas fa-check-circle\" style={{ color: 'var(--color-primary)' }}></i>\r\n        <span>\r\n          {selectedCount} מתוך {totalCount} נבחרו\r\n        </span>\r\n        {totalCount > 0 && onSelectAll && (\r\n          <button\r\n            className=\"select-all-link\"\r\n            onClick={isAllSelected ? onClear : onSelectAll}\r\n            disabled={isDeleting}\r\n          >\r\n            {isAllSelected ? 'בטל בחירת הכל' : `בחר הכל (${totalCount})`}\r\n          </button>\r\n        )}\r\n      </div>\r\n      \r\n      <div className=\"selection-actions\">\r\n        {onDelete && (\r\n          <button\r\n            className=\"selection-action-btn danger\"\r\n            onClick={onDelete}\r\n            disabled={isDeleting}\r\n          >\r\n            {isDeleting ? (\r\n              <i className=\"fas fa-spinner fa-spin\"></i>\r\n            ) : (\r\n              <i className=\"fas fa-trash\"></i>\r\n            )}\r\n            {deleteLabel} ({selectedCount})\r\n          </button>\r\n        )}\r\n        \r\n        <button\r\n          className=\"selection-action-btn clear\"\r\n          onClick={onClear}\r\n          disabled={isDeleting}\r\n        >\r\n          <i className=\"fas fa-times\"></i>\r\n          בטל בחירה\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import React from 'react';\r\nimport './SearchInput.css';\r\n\r\ninterface SearchInputProps {\r\n  /** Search term value */\r\n  value: string;\r\n  /** Handler for search term changes */\r\n  onChange: (value: string) => void;\r\n  /** Placeholder text for the input */\r\n  placeholder?: string;\r\n  /** Results count to display in badge */\r\n  resultsCount?: number;\r\n  /** Results label (e.g., \"פריטים\", \"משתמשים\") */\r\n  resultsLabel?: string;\r\n  /** Whether to show the clear button when there's a search term */\r\n  showClearButton?: boolean;\r\n  /** Additional CSS class names */\r\n  className?: string;\r\n  /** Whether the input is disabled */\r\n  disabled?: boolean;\r\n  /** Custom ID for the input element */\r\n  id?: string;\r\n}\r\n\r\nconst SearchInput: React.FC<SearchInputProps> = ({\r\n  value,\r\n  onChange,\r\n  placeholder = \"הקלד לחיפוש...\",\r\n  resultsCount,\r\n  resultsLabel = \"תוצאות\",\r\n  showClearButton = true,\r\n  className = \"\",\r\n  disabled = false,\r\n  id\r\n}) => {\r\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    onChange(e.target.value);\r\n  };\r\n\r\n  const handleClear = () => {\r\n    onChange('');\r\n  };\r\n\r\n  const hasResults = resultsCount !== undefined && value;\r\n  const showClear = showClearButton && value;\r\n\r\n  return (\r\n    <div className={`modern-search-container ${className}`}>\r\n      <div \r\n        className={`modern-search-input-group ${hasResults ? 'has-results' : ''} ${showClear ? 'has-clear' : ''}`}\r\n      >\r\n        <i className=\"fas fa-search modern-search-icon\"></i>\r\n        <input\r\n          id={id}\r\n          type=\"text\"\r\n          value={value}\r\n          onChange={handleInputChange}\r\n          placeholder={placeholder}\r\n          disabled={disabled}\r\n          className=\"modern-search-input\"\r\n          style={{\r\n            paddingLeft: hasResults && showClear ? '220px' : \r\n                         hasResults ? '160px' : \r\n                         showClear ? '70px' : '24px'\r\n          }}\r\n        />\r\n        \r\n        {hasResults && (\r\n          <div className=\"modern-search-results-inline\">\r\n            <span className=\"modern-search-results-badge\">\r\n              {resultsCount} {resultsLabel}\r\n            </span>\r\n          </div>\r\n        )}\r\n        \r\n        {showClear && (\r\n          <button\r\n            type=\"button\"\r\n            onClick={handleClear}\r\n            className=\"modern-search-clear\"\r\n            title=\"נקה חיפוש\"\r\n          >\r\n            נקה\r\n          </button>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SearchInput;\r\n","import React from 'react';\r\nimport { Item } from '../../types';\r\nimport './AdvancedFilter.css';\r\n\r\nexport interface AdvancedFilterCriteria {\r\n  itemNameId?: string;\r\n  allocatedLocationId?: string;\r\n  receiptLocationName?: string;\r\n  status?: 'operational' | 'non-operational' | 'available' | 'not-available';\r\n  hasIdNumber?: boolean;\r\n  noteText?: string;\r\n}\r\n\r\ninterface AdvancedFilterProps {\r\n  /** Available items to extract filter options from */\r\n  items: Item[];\r\n  /** Current filter criteria */\r\n  filters: AdvancedFilterCriteria;\r\n  /** Handler for filter changes */\r\n  onFiltersChange: (filters: AdvancedFilterCriteria) => void;\r\n  /** Whether the filter panel is open */\r\n  isOpen: boolean;\r\n  /** Handler for toggling filter panel */\r\n  onToggle: () => void;\r\n  /** Whether user is admin (affects available options) */\r\n  isAdmin?: boolean;\r\n  /** Number of filtered results */\r\n  resultsCount?: number;\r\n}\r\n\r\nconst AdvancedFilter: React.FC<AdvancedFilterProps> = ({\r\n  items,\r\n  filters,\r\n  onFiltersChange,\r\n  isOpen,\r\n  onToggle,\r\n  isAdmin = false,\r\n  resultsCount\r\n}) => {\r\n  // Extract unique options from items\r\n  const uniqueItemNames = Array.from(\r\n    new Map(\r\n      items\r\n        .filter(item => item.itemName?.name && item.nameId)\r\n        .map(item => [item.nameId, { id: item.nameId, name: item.itemName!.name }])\r\n    ).values()\r\n  ).sort((a, b) => a.name.localeCompare(b.name, 'he'));\r\n\r\n  const uniqueAllocatedLocations = Array.from(\r\n    new Map(\r\n      items\r\n        .filter(item => item.allocatedLocation?.name && item.allocatedLocationId)\r\n        .map(item => [\r\n          item.allocatedLocationId,\r\n          {\r\n            id: item.allocatedLocationId!,\r\n            name: item.allocatedLocation!.name,\r\n            unit: item.allocatedLocation!.unit?.name\r\n          }\r\n        ])\r\n    ).values()\r\n  ).sort((a, b) => a.name.localeCompare(b.name, 'he'));\r\n\r\n  const uniqueReceiptLocations = Array.from(\r\n    new Set(\r\n      items\r\n        .filter(item => item.receiptInfo?.signedBy?.location?.name)\r\n        .map(item => item.receiptInfo!.signedBy.location.name)\r\n    )\r\n  ).sort((a, b) => a.localeCompare(b, 'he'));\r\n\r\n  // Status options\r\n  const statusOptions = [\r\n    { value: 'operational', label: 'תקין', color: 'success' },\r\n    { value: 'non-operational', label: 'תקול', color: 'warning' },\r\n    { value: 'available', label: 'זמין', color: 'success' },\r\n    { value: 'not-available', label: 'לא זמין', color: 'danger' }\r\n  ];\r\n\r\n  // ID Number options\r\n  const idNumberOptions = [\r\n    { value: true, label: 'עם מספר צ\\'', color: 'primary' },\r\n    { value: false, label: 'ללא מספר צ\\'', color: 'secondary' }\r\n  ];\r\n\r\n\r\n\r\n  const handleFilterChange = (key: keyof AdvancedFilterCriteria, value: any) => {\r\n    const newFilters = { ...filters };\r\n    if (value === '' || value === null || value === undefined) {\r\n      delete newFilters[key];\r\n    } else {\r\n      newFilters[key] = value;\r\n    }\r\n    onFiltersChange(newFilters);\r\n  };\r\n\r\n  const clearAllFilters = () => {\r\n    onFiltersChange({});\r\n  };\r\n\r\n  const hasActiveFilters = Object.keys(filters).length > 0;\r\n  const activeFiltersCount = Object.keys(filters).length;\r\n\r\n  return (\r\n    <div className=\"advanced-filter-container\">\r\n      {/* Filter Toggle Button */}\r\n      <button\r\n        className={`advanced-filter-toggle ${isOpen ? 'active' : ''} ${hasActiveFilters ? 'has-filters' : ''}`}\r\n        onClick={onToggle}\r\n        title=\"חיפוש מתקדם\"\r\n      >\r\n        <i className=\"fas fa-filter\"></i>\r\n        <span>חיפוש מתקדם</span>\r\n        {hasActiveFilters && (\r\n          <span className=\"filter-count-badge\">{activeFiltersCount}</span>\r\n        )}\r\n        <i className={`fas fa-chevron-${isOpen ? 'up' : 'down'} toggle-icon`}></i>\r\n      </button>\r\n\r\n      {/* Filter Panel */}\r\n      <div className={`advanced-filter-panel ${isOpen ? 'open' : ''}`}>\r\n        <div className=\"filter-panel-content\">\r\n          {/* Panel Header */}\r\n          <div className=\"filter-panel-header\">\r\n            <div style={{ display: 'flex', alignItems: 'center', gap: '12px' }}>\r\n              <h4>\r\n                <i className=\"fas fa-sliders-h\"></i>\r\n                פילטרים מתקדמים\r\n              </h4>\r\n              {resultsCount !== undefined && (\r\n                <span className=\"filter-results-count\">\r\n                  <i className=\"fas fa-check-circle\" style={{ marginLeft: '6px' }}></i>\r\n                  נמצאו {resultsCount} פריטים\r\n                </span>\r\n              )}\r\n            </div>\r\n            {hasActiveFilters && (\r\n              <button\r\n                className=\"btn btn-outline-secondary btn-sm clear-filters-btn\"\r\n                onClick={clearAllFilters}\r\n                title=\"נקה את כל הפילטרים\"\r\n              >\r\n                <i className=\"fas fa-times\"></i>\r\n                נקה הכל\r\n              </button>\r\n            )}\r\n          </div>\r\n\r\n          {/* Filter Grid */}\r\n          <div className=\"filter-grid\">\r\n            {/* Item Name Filter */}\r\n            <div className=\"filter-group\">\r\n              <label className=\"filter-label\">\r\n                <i className=\"fas fa-tag\"></i>\r\n                שם פריט\r\n              </label>\r\n              <select\r\n                className=\"form-select filter-select\"\r\n                value={filters.itemNameId || ''}\r\n                onChange={(e) => handleFilterChange('itemNameId', e.target.value)}\r\n              >\r\n                <option value=\"\">כל הפריטים</option>\r\n                {uniqueItemNames.map(item => (\r\n                  <option key={item.id} value={item.id}>\r\n                    {item.name}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n\r\n            {/* Allocated Location Filter */}\r\n            <div className=\"filter-group\">\r\n              <label className=\"filter-label\">\r\n                <i className=\"fas fa-map-marker-alt\"></i>\r\n                הקצאה\r\n              </label>\r\n              <select\r\n                className=\"form-select filter-select\"\r\n                value={filters.allocatedLocationId || ''}\r\n                onChange={(e) => handleFilterChange('allocatedLocationId', e.target.value)}\r\n              >\r\n                <option value=\"\">כל ההקצאות</option>\r\n                {uniqueAllocatedLocations.map(location => (\r\n                  <option key={location.id} value={location.id}>\r\n                    {location.name} {location.unit && `(${location.unit})`}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n\r\n            {/* Receipt Location Filter */}\r\n            <div className=\"filter-group\">\r\n              <label className=\"filter-label\">\r\n                <i className=\"fas fa-location-arrow\"></i>\r\n                מיקום\r\n              </label>\r\n              <select\r\n                className=\"form-select filter-select\"\r\n                value={filters.receiptLocationName || ''}\r\n                onChange={(e) => handleFilterChange('receiptLocationName', e.target.value)}\r\n              >\r\n                <option value=\"\">כל המיקומים</option>\r\n                {uniqueReceiptLocations.map(location => (\r\n                  <option key={location} value={location}>\r\n                    {location}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n\r\n            {/* Status Filter */}\r\n            <div className=\"filter-group\">\r\n              <label className=\"filter-label\">\r\n                <i className=\"fas fa-info-circle\"></i>\r\n                סטטוס\r\n              </label>\r\n              <select\r\n                className=\"form-select filter-select\"\r\n                value={filters.status || ''}\r\n                onChange={(e) => handleFilterChange('status', e.target.value)}\r\n              >\r\n                <option value=\"\">כל הסטטוסים</option>\r\n                {statusOptions.map(option => (\r\n                  <option key={option.value} value={option.value}>\r\n                    {option.label}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n\r\n            {/* ID Number Filter */}\r\n            <div className=\"filter-group\">\r\n              <label className=\"filter-label\">\r\n                <i className=\"fas fa-hashtag\"></i>\r\n                מספר צ'\r\n              </label>\r\n              <select\r\n                className=\"form-select filter-select\"\r\n                value={filters.hasIdNumber !== undefined ? filters.hasIdNumber.toString() : ''}\r\n                onChange={(e) => handleFilterChange('hasIdNumber', e.target.value === '' ? undefined : e.target.value === 'true')}\r\n              >\r\n                <option value=\"\">הכל</option>\r\n                {idNumberOptions.map(option => (\r\n                  <option key={option.value.toString()} value={option.value.toString()}>\r\n                    {option.label}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n\r\n            {/* Note Filter */}\r\n            <div className=\"filter-group\">\r\n              <label className=\"filter-label\">\r\n                <i className=\"fas fa-sticky-note\"></i>\r\n                חיפוש בהערות\r\n              </label>\r\n              <input\r\n                type=\"text\"\r\n                className=\"form-control filter-select\"\r\n                placeholder=\"הקלד טקסט לחיפוש בהערות...\"\r\n                value={filters.noteText || ''}\r\n                onChange={(e) => handleFilterChange('noteText', e.target.value)}\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          {/* Active Filters Summary */}\r\n          {hasActiveFilters && (\r\n            <div className=\"active-filters-summary\">\r\n              <div className=\"active-filters-header\">\r\n                <span>פילטרים פעילים:</span>\r\n              </div>\r\n              <div className=\"active-filters-list\">\r\n                {filters.itemNameId && (\r\n                  <span className=\"filter-tag\">\r\n                    <i className=\"fas fa-tag\"></i>\r\n                    {uniqueItemNames.find(item => item.id === filters.itemNameId)?.name}\r\n                    <button\r\n                      className=\"remove-filter\"\r\n                      onClick={() => handleFilterChange('itemNameId', '')}\r\n                      title=\"הסר פילטר\"\r\n                    >\r\n                      <i className=\"fas fa-times\"></i>\r\n                    </button>\r\n                  </span>\r\n                )}\r\n                {filters.allocatedLocationId && (\r\n                  <span className=\"filter-tag\">\r\n                    <i className=\"fas fa-map-marker-alt\"></i>\r\n                    {uniqueAllocatedLocations.find(loc => loc.id === filters.allocatedLocationId)?.name}\r\n                    <button\r\n                      className=\"remove-filter\"\r\n                      onClick={() => handleFilterChange('allocatedLocationId', '')}\r\n                      title=\"הסר פילטר\"\r\n                    >\r\n                      <i className=\"fas fa-times\"></i>\r\n                    </button>\r\n                  </span>\r\n                )}\r\n                {filters.receiptLocationName && (\r\n                  <span className=\"filter-tag\">\r\n                    <i className=\"fas fa-location-arrow\"></i>\r\n                    {filters.receiptLocationName}\r\n                    <button\r\n                      className=\"remove-filter\"\r\n                      onClick={() => handleFilterChange('receiptLocationName', '')}\r\n                      title=\"הסר פילטר\"\r\n                    >\r\n                      <i className=\"fas fa-times\"></i>\r\n                    </button>\r\n                  </span>\r\n                )}\r\n                {filters.status && (\r\n                  <span className=\"filter-tag\">\r\n                    <i className=\"fas fa-info-circle\"></i>\r\n                    {statusOptions.find(opt => opt.value === filters.status)?.label}\r\n                    <button\r\n                      className=\"remove-filter\"\r\n                      onClick={() => handleFilterChange('status', '')}\r\n                      title=\"הסר פילטר\"\r\n                    >\r\n                      <i className=\"fas fa-times\"></i>\r\n                    </button>\r\n                  </span>\r\n                )}\r\n                {filters.hasIdNumber !== undefined && (\r\n                  <span className=\"filter-tag\">\r\n                    <i className=\"fas fa-hashtag\"></i>\r\n                    {filters.hasIdNumber ? 'עם מספר צ\\'' : 'ללא מספר צ\\''}\r\n                    <button\r\n                      className=\"remove-filter\"\r\n                      onClick={() => handleFilterChange('hasIdNumber', undefined)}\r\n                      title=\"הסר פילטר\"\r\n                    >\r\n                      <i className=\"fas fa-times\"></i>\r\n                    </button>\r\n                  </span>\r\n                )}\r\n                {filters.noteText && (\r\n                  <span className=\"filter-tag\">\r\n                    <i className=\"fas fa-sticky-note\"></i>\r\n                    הערה: \"{filters.noteText}\"\r\n                    <button\r\n                      className=\"remove-filter\"\r\n                      onClick={() => handleFilterChange('noteText', '')}\r\n                      title=\"הסר פילטר\"\r\n                    >\r\n                      <i className=\"fas fa-times\"></i>\r\n                    </button>\r\n                  </span>\r\n                )}\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdvancedFilter;","import React from 'react';\r\nimport './PendingReceiptsBadge.css';\r\n\r\ninterface PendingReceiptsBadgeProps {\r\n  count: number;\r\n  onClick: () => void;\r\n  className?: string;\r\n  isUrgent?: boolean; // For counts > 5, show as urgent\r\n}\r\n\r\nconst PendingReceiptsBadge: React.FC<PendingReceiptsBadgeProps> = ({ \r\n  count, \r\n  onClick, \r\n  className = '',\r\n  isUrgent = false\r\n}) => {\r\n  if (count === 0) {\r\n    return null;\r\n  }\r\n\r\n  const urgentClass = count > 5 || isUrgent ? 'urgent' : '';\r\n  const title = count === 1 \r\n    ? 'יש לך קבלה אחת ממתינה לחתימה' \r\n    : `יש לך ${count} קבלות ממתינות לחתימה`;\r\n\r\n  return (\r\n    <button \r\n      className={`pending-receipts-badge ${urgentClass} ${className}`}\r\n      onClick={onClick}\r\n      title={title}\r\n      aria-label={`קבלות ממתינות: ${count}`}\r\n    >\r\n      <div className=\"badge-icon\">\r\n        <svg viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n          <path d=\"M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M16.2,16.2L11,13V7H12.5V12.2L17,14.7L16.2,16.2Z\"/>\r\n        </svg>\r\n        {count > 0 && (\r\n          <span className=\"badge-count\" data-count={count > 99 ? '99+' : count}>\r\n            {count > 99 ? '99+' : count}\r\n          </span>\r\n        )}\r\n      </div>\r\n      <span className=\"badge-text\">קבלות ממתינות</span>\r\n    </button>\r\n  );\r\n};\r\n\r\nexport default PendingReceiptsBadge;","import React from 'react';\r\n\r\ninterface ErrorBoundaryState {\r\n  hasError: boolean;\r\n  error?: Error;\r\n}\r\n\r\ninterface ErrorBoundaryProps {\r\n  children: React.ReactNode;\r\n  fallback?: React.ReactNode;\r\n}\r\n\r\nclass ErrorBoundary extends React.Component<ErrorBoundaryProps, ErrorBoundaryState> {\r\n  constructor(props: ErrorBoundaryProps) {\r\n    super(props);\r\n    this.state = { hasError: false };\r\n  }\r\n\r\n  static getDerivedStateFromError(error: Error): ErrorBoundaryState {\r\n    return { hasError: true, error };\r\n  }\r\n\r\n  componentDidCatch(error: Error, errorInfo: React.ErrorInfo) {\r\n    console.error('Error caught by ErrorBoundary:', error, errorInfo);\r\n  }\r\n\r\n  render() {\r\n    if (this.state.hasError) {\r\n      if (this.props.fallback) {\r\n        return this.props.fallback;\r\n      }\r\n\r\n      return (\r\n        <div style={{\r\n          padding: '20px',\r\n          margin: '20px',\r\n          border: '1px solid #f5c6cb',\r\n          borderRadius: '4px',\r\n          backgroundColor: '#f8d7da',\r\n          color: '#721c24',\r\n          textAlign: 'center',\r\n          direction: 'rtl'\r\n        }}>\r\n          <h2>אירעה שגיאה בטעינת החלק הזה של האפליקציה</h2>\r\n          <details style={{ marginTop: '20px', textAlign: 'right' }}>\r\n            <summary style={{ cursor: 'pointer', marginBottom: '10px' }}>פרטי השגיאה</summary>\r\n            <pre style={{ \r\n              backgroundColor: '#fff3cd', \r\n              color: '#856404', \r\n              padding: '10px', \r\n              borderRadius: '4px',\r\n              fontSize: '12px',\r\n              textAlign: 'left',\r\n              overflow: 'auto'\r\n            }}>\r\n              {this.state.error?.stack || this.state.error?.message || 'Unknown error'}\r\n            </pre>\r\n          </details>\r\n          <button \r\n            onClick={() => window.location.reload()}\r\n            style={{\r\n              marginTop: '20px',\r\n              padding: '10px 20px',\r\n              backgroundColor: '#007bff',\r\n              color: 'white',\r\n              border: 'none',\r\n              borderRadius: '4px',\r\n              cursor: 'pointer'\r\n            }}\r\n          >\r\n            רענן את הדף\r\n          </button>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    return this.props.children;\r\n  }\r\n}\r\n\r\nexport default ErrorBoundary;","import React, { useState, useEffect } from 'react';\r\n\r\ninterface ResponsiveTableProps {\r\n  children: React.ReactNode;\r\n  className?: string;\r\n  mobileBreakpoint?: number;\r\n  enableCardLayout?: boolean;\r\n}\r\n\r\nexport const ResponsiveTable: React.FC<ResponsiveTableProps> = ({\r\n  children,\r\n  className = '',\r\n  mobileBreakpoint = 768,\r\n  enableCardLayout = true\r\n}) => {\r\n  const [isMobile, setIsMobile] = useState(false);\r\n  const [useCardLayout, setUseCardLayout] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const checkScreenSize = () => {\r\n      const width = window.innerWidth;\r\n      const mobile = width <= mobileBreakpoint;\r\n      setIsMobile(mobile);\r\n      \r\n      // Auto-enable card layout for very small screens\r\n      if (enableCardLayout && width <= 600) {\r\n        setUseCardLayout(true);\r\n      } else {\r\n        setUseCardLayout(false);\r\n      }\r\n    };\r\n\r\n    checkScreenSize();\r\n    window.addEventListener('resize', checkScreenSize);\r\n    return () => window.removeEventListener('resize', checkScreenSize);\r\n  }, [mobileBreakpoint, enableCardLayout]);\r\n\r\n  // Add data labels to table cells for mobile card layout\r\n  useEffect(() => {\r\n    if (useCardLayout) {\r\n      const table = document.querySelector('.unified-table');\r\n      if (!table) return;\r\n\r\n      const headers = Array.from(table.querySelectorAll('th')).map(th => \r\n        th.textContent?.trim() || ''\r\n      );\r\n\r\n      const rows = table.querySelectorAll('tbody tr');\r\n      rows.forEach(row => {\r\n        const cells = row.querySelectorAll('td');\r\n        cells.forEach((cell, index) => {\r\n          if (headers[index]) {\r\n            cell.setAttribute('data-label', headers[index]);\r\n          }\r\n        });\r\n      });\r\n    }\r\n  }, [useCardLayout, children]);\r\n\r\n  const containerClasses = [\r\n    'unified-table-container',\r\n    useCardLayout ? 'mobile-cards' : '',\r\n    className\r\n  ].filter(Boolean).join(' ');\r\n\r\n  return (\r\n    <div className={containerClasses}>\r\n      {isMobile && enableCardLayout && (\r\n        <div style={{\r\n          padding: '12px 16px',\r\n          background: 'var(--color-surface-alt)',\r\n          borderRadius: '8px',\r\n          marginBottom: '16px',\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          justifyContent: 'space-between',\r\n          fontSize: '13px',\r\n          color: 'var(--color-text-secondary)'\r\n        }}>\r\n          <span>📱 תצוגה ניידת</span>\r\n          <button\r\n            onClick={() => setUseCardLayout(!useCardLayout)}\r\n            style={{\r\n              background: 'var(--color-accent)',\r\n              color: 'white',\r\n              border: 'none',\r\n              padding: '6px 12px',\r\n              borderRadius: '6px',\r\n              fontSize: '12px',\r\n              cursor: 'pointer'\r\n            }}\r\n          >\r\n            {useCardLayout ? '📋 טבלה' : '📱 כרטיסים'}\r\n          </button>\r\n        </div>\r\n      )}\r\n      \r\n      <div style={{ overflowX: useCardLayout ? 'visible' : 'auto' }}>\r\n        {children}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ResponsiveTable;","import React, { useState, useEffect, useRef } from 'react';\r\nimport { User as FirebaseUser } from 'firebase/auth';\r\nimport { User } from '../../types';\r\nimport { usePendingReceiptsCount } from '../../hooks';\r\nimport { PendingReceiptsBadge, ErrorBoundary } from '../components';\r\nimport './TopHeader.css';\r\n\r\ninterface TopHeaderProps {\r\n  user?: FirebaseUser;\r\n  userProfile?: User | null;\r\n  isAdmin?: boolean;\r\n  onLogout?: () => void;\r\n  onSettingsClick?: () => void;\r\n  onPendingReceiptsClick?: () => void;\r\n}\r\n\r\nconst TopHeader: React.FC<TopHeaderProps> = ({ \r\n  user, \r\n  userProfile,\r\n  isAdmin,\r\n  onLogout,\r\n  onSettingsClick,\r\n  onPendingReceiptsClick\r\n}) => {\r\n  const [isUserMenuOpen, setIsUserMenuOpen] = useState(false);\r\n  const [imageError, setImageError] = useState(false);\r\n  const menuRef = useRef<HTMLDivElement>(null);\r\n  \r\n  // Get pending receipts count\r\n  const { userSpecificCount: pendingCount } = usePendingReceiptsCount(userProfile, isAdmin);\r\n\r\n  useEffect(() => {\r\n    const handleClickOutside = (event: MouseEvent) => {\r\n      if (menuRef.current && !menuRef.current.contains(event.target as Node)) {\r\n        setIsUserMenuOpen(false);\r\n      }\r\n    };\r\n\r\n    if (isUserMenuOpen) {\r\n      document.addEventListener('mousedown', handleClickOutside);\r\n    }\r\n\r\n    return () => {\r\n      document.removeEventListener('mousedown', handleClickOutside);\r\n    };\r\n  }, [isUserMenuOpen]);\r\n\r\n  const toggleUserMenu = () => {\r\n    setIsUserMenuOpen(!isUserMenuOpen);\r\n  };\r\n\r\n  const handleImageError = () => {\r\n    setImageError(true);\r\n  };\r\n\r\n  const handleImageLoad = () => {\r\n    setImageError(false);\r\n  };\r\n\r\n  if (!user) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <header className=\"top-header\">\r\n      <div className=\"top-header-container\">\r\n        {/* Left side - Logo/Title */}\r\n        <div className=\"header-left\">\r\n          <div className=\"header-logo\">\r\n            <div className=\"logo-icon\">\r\n              <svg viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n                <path d=\"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z\"/>\r\n              </svg>\r\n            </div>\r\n            <div className=\"logo-text\">\r\n              <h1 className=\"logo-title\">אחל\"ן</h1>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Right side - User Profile */}\r\n        <div className=\"header-right\">\r\n          {/* Pending Receipts Badge */}\r\n          {onPendingReceiptsClick && (\r\n            <ErrorBoundary fallback={<div></div>}>\r\n              <PendingReceiptsBadge \r\n                count={pendingCount} \r\n                onClick={onPendingReceiptsClick}\r\n              />\r\n            </ErrorBoundary>\r\n          )}\r\n          \r\n          <div className=\"user-menu-container\" ref={menuRef}>\r\n            <button \r\n              className=\"user-profile-button\"\r\n              onClick={toggleUserMenu}\r\n              aria-label=\"פתח תפריט משתמש\"\r\n            >\r\n              <div className=\"user-avatar-container\">\r\n                {user.photoURL && !imageError ? (\r\n                  <img \r\n                    src={user.photoURL} \r\n                    alt=\"Profile\" \r\n                    className=\"user-avatar\"\r\n                    onError={handleImageError}\r\n                    onLoad={handleImageLoad}\r\n                  />\r\n                ) : (\r\n                  <div className=\"user-avatar-placeholder\">\r\n                    <svg viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n                      <path d=\"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z\"/>\r\n                    </svg>\r\n                  </div>\r\n                )}\r\n              </div>\r\n              <div className=\"user-info\">\r\n                <div className=\"user-name\">\r\n                  {userProfile?.name || user.displayName || 'משתמש'}\r\n                  {isAdmin && <span className=\"admin-badge\">מנהל</span>}\r\n                </div>\r\n                <div className=\"user-email\">{userProfile?.location || user.email}</div>\r\n              </div>\r\n              <svg className=\"dropdown-arrow\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n                <path d=\"M7 10l5 5 5-5z\"/>\r\n              </svg>\r\n            </button>\r\n\r\n            {/* User dropdown menu */}\r\n            {isUserMenuOpen && (\r\n              <div className=\"user-menu-dropdown\" onClick={(e) => e.stopPropagation()}>\r\n                {onSettingsClick && (\r\n                  <div className=\"user-menu-item\" onClick={() => {\r\n                    onSettingsClick();\r\n                    setIsUserMenuOpen(false);\r\n                  }}>\r\n                    <svg className=\"menu-icon\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n                      <path d=\"M12 15.5A3.5 3.5 0 0 1 8.5 12A3.5 3.5 0 0 1 12 8.5a3.5 3.5 0 0 1 3.5 3.5 3.5 3.5 0 0 1-3.5 3.5m7.43-2.53c.04-.32.07-.64.07-.97c0-.33-.03-.66-.07-1l1.86-1.41c.18-.14.23-.41.12-.61l-1.74-3.18c-.12-.23-.37-.3-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.5c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l1.86 1.41c-.04.34-.07.67-.07 1s.03.65.07.97l-1.86 1.41c-.19.15-.24.42-.12.61l1.74 3.18c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.5c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.74-3.18c.12-.2.07-.47-.12-.61L19.43 13z\"/>\r\n                    </svg>\r\n                    <span>הגדרות חשבון</span>\r\n                  </div>\r\n                )}\r\n                \r\n                {onLogout && (\r\n                  <div className=\"user-menu-item logout-item\" onClick={() => {\r\n                    onLogout();\r\n                    setIsUserMenuOpen(false);\r\n                  }}>\r\n                    <svg className=\"menu-icon\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n                      <path d=\"M10.09 15.59L11.5 17l5-5-5-5-1.41 1.41L12.67 11H3v2h9.67l-2.58 2.59zM19 3H5c-1.11 0-2 .9-2 2v4h2V5h14v14H5v-4H3v4c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z\"/>\r\n                    </svg>\r\n                    <span>התנתק</span>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </header>\r\n  );\r\n};\r\n\r\nexport default TopHeader;\r\n","import { useState, useEffect, useCallback } from 'react';\r\nimport { Receipt } from '../types';\r\nimport { receiptService } from '../services';\r\nimport { usePendingReceiptsContext } from '../contexts';\r\n\r\nexport interface UsePendingReceiptsCountReturn {\r\n  pendingCount: number;\r\n  loading: boolean;\r\n  error: string | null;\r\n  refreshCount: () => Promise<void>;\r\n  userSpecificCount: number; // Count of receipts specifically for current user\r\n  decrementCount: (receiptId?: string) => void; // Immediate decrement for optimistic updates\r\n}\r\n\r\nexport const usePendingReceiptsCount = (userProfile?: any, isAdmin?: boolean) => {\r\n  const [pendingReceipts, setPendingReceipts] = useState<Receipt[]>([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n  \r\n  // Get context for global refresh management (with error handling)\r\n  const { registerRefreshCallback, registerDecrementCallback } = usePendingReceiptsContext();\r\n\r\n  const fetchPendingReceipts = useCallback(async () => {\r\n    if (!userProfile) return;\r\n    \r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const data = await receiptService.getAll();\r\n      if (Array.isArray(data)) {\r\n        // Filter only unsigned receipts\r\n        const unsignedReceipts = data.filter(receipt => !receipt.isSigned);\r\n        setPendingReceipts(unsignedReceipts);\r\n      } else {\r\n        setPendingReceipts([]);\r\n      }\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : 'Failed to fetch pending receipts');\r\n      setPendingReceipts([]);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [userProfile]);\r\n\r\n  const refreshCount = useCallback(async () => {\r\n    await fetchPendingReceipts();\r\n  }, [fetchPendingReceipts]);\r\n\r\n  // Filter pending receipts based on user role and location\r\n  const userPendingReceipts = useCallback(() => {\r\n    if (!userProfile) return [];\r\n    \r\n    if (isAdmin) {\r\n      return pendingReceipts; // Admins see all pending receipts\r\n    }\r\n    \r\n    // Non-admin users see pending receipts from their location\r\n    return pendingReceipts.filter(receipt => {\r\n      const signedByLocation = receipt.signedBy?.location?.name;\r\n      const createdByLocation = receipt.createdBy?.location?.name;\r\n      const userLocation = userProfile.location;\r\n      \r\n      // Show receipt if either the signer or creator is from the same location as current user\r\n      return signedByLocation === userLocation || createdByLocation === userLocation;\r\n    });\r\n  }, [pendingReceipts, isAdmin, userProfile]);\r\n\r\n  // Count receipts specifically assigned to current user (for signing)\r\n  const userSpecificReceipts = useCallback(() => {\r\n    if (!userProfile) return [];\r\n    \r\n    const userLocationReceipts = userPendingReceipts();\r\n    \r\n    // For non-admin users, only count receipts they can actually sign\r\n    if (!isAdmin) {\r\n      return userLocationReceipts.filter(receipt => \r\n        receipt.signedById && receipt.signedById === userProfile.id\r\n      );\r\n    }\r\n    \r\n    return userLocationReceipts;\r\n  }, [userPendingReceipts, isAdmin, userProfile]);\r\n\r\n  useEffect(() => {\r\n    fetchPendingReceipts();\r\n    \r\n    // Set up polling to refresh count every 60 seconds (not too frequent)\r\n    const interval = setInterval(fetchPendingReceipts, 60000);\r\n    \r\n    return () => clearInterval(interval);\r\n  }, [fetchPendingReceipts]);\r\n\r\n  // Listen for visibility changes to refresh when user returns to tab\r\n  useEffect(() => {\r\n    const handleVisibilityChange = () => {\r\n      if (!document.hidden && userProfile) {\r\n        fetchPendingReceipts();\r\n      }\r\n    };\r\n\r\n    document.addEventListener('visibilitychange', handleVisibilityChange);\r\n    return () => document.removeEventListener('visibilitychange', handleVisibilityChange);\r\n  }, [fetchPendingReceipts, userProfile]);\r\n\r\n  // Optimistic update function for immediate UI response\r\n  const decrementCount = useCallback((receiptId?: string) => {\r\n    setPendingReceipts(prev => {\r\n      if (receiptId) {\r\n        // Remove the specific receipt that was signed/deleted\r\n        return prev.filter(r => r.id !== receiptId);\r\n      } else if (prev.length > 0) {\r\n        // Fallback: Remove the first receipt that the current user can sign\r\n        const userLocationReceipts = isAdmin ? prev : prev.filter(receipt => {\r\n          const signedByLocation = receipt.signedBy?.location?.name;\r\n          const createdByLocation = receipt.createdBy?.location?.name;\r\n          const userLocation = userProfile?.location;\r\n          return signedByLocation === userLocation || createdByLocation === userLocation;\r\n        });\r\n        \r\n        if (!isAdmin) {\r\n          const userSignableReceipts = userLocationReceipts.filter(receipt => \r\n            receipt.signedById && receipt.signedById === userProfile?.id\r\n          );\r\n          if (userSignableReceipts.length > 0) {\r\n            return prev.filter(r => r.id !== userSignableReceipts[0].id);\r\n          }\r\n        } else if (userLocationReceipts.length > 0) {\r\n          return prev.filter(r => r.id !== userLocationReceipts[0].id);\r\n        }\r\n      }\r\n      return prev;\r\n    });\r\n  }, [isAdmin, userProfile]);\r\n\r\n  // Register callbacks with the global context\r\n  useEffect(() => {\r\n    try {\r\n      registerRefreshCallback(refreshCount);\r\n      registerDecrementCallback(decrementCount);\r\n    } catch (error) {\r\n      console.warn('Failed to register pending receipts callbacks:', error);\r\n    }\r\n  }, [registerRefreshCallback, registerDecrementCallback, refreshCount, decrementCount]);\r\n\r\n  const filteredPendingReceipts = userPendingReceipts();\r\n  const specificUserReceipts = userSpecificReceipts();\r\n\r\n  return {\r\n    pendingCount: filteredPendingReceipts.length,\r\n    userSpecificCount: specificUserReceipts.length,\r\n    loading,\r\n    error,\r\n    refreshCount,\r\n    decrementCount,\r\n  };\r\n};","import React from 'react';\r\nimport { LoadingSpinner, SearchInput, SmartPagination } from '../../shared/components';\r\nimport '../../shared/styles/components.css';\r\nimport './Dashboard.css';\r\n\r\n// Common Dashboard Loading Component\r\nexport const DashboardLoadingSpinner: React.FC<{ message: string }> = ({ message }) => (\r\n  <LoadingSpinner message={message} />\r\n);\r\n\r\n// Common Dashboard Error Component\r\nexport const DashboardError: React.FC<{ \r\n  error: string; \r\n  onRetry: () => void;\r\n  title?: string;\r\n}> = ({ error, onRetry, title = \"שגיאה בטעינת נתונים\" }) => (\r\n  <div className=\"card\">\r\n    <div className=\"card-header\">\r\n      <h2 className=\"mb-0\">לוח בקרה</h2>\r\n    </div>\r\n    <div className=\"card-body\">\r\n      <div className=\"alert alert-danger\">\r\n        <h4>{title}</h4>\r\n        <p>{error}</p>\r\n        <button \r\n          className=\"btn btn-primary mt-2\"\r\n          onClick={onRetry}\r\n        >\r\n          נסה שוב\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n);\r\n\r\n// Common Dashboard Search Component\r\nexport const DashboardSearch: React.FC<{\r\n  value: string;\r\n  onChange: (term: string) => void;\r\n  placeholder: string;\r\n  resultsCount: number;\r\n  resultsLabel: string;\r\n  id: string;\r\n}> = ({ value, onChange, placeholder, resultsCount, resultsLabel, id }) => (\r\n  <SearchInput\r\n    value={value}\r\n    onChange={onChange}\r\n    placeholder={placeholder}\r\n    resultsCount={resultsCount}\r\n    resultsLabel={resultsLabel}\r\n    id={id}\r\n  />\r\n);\r\n\r\n// Common Dashboard Pagination Component\r\nexport const DashboardPagination: React.FC<{\r\n  currentPage: number;\r\n  totalPages: number;\r\n  onPageChange: (page: number) => void;\r\n}> = ({ currentPage, totalPages, onPageChange }) => (\r\n  totalPages > 1 ? (\r\n    <SmartPagination\r\n      currentPage={currentPage}\r\n      totalPages={totalPages}\r\n      onPageChange={onPageChange}\r\n    />\r\n  ) : null\r\n);\r\n\r\n// Common Dashboard Empty State Component\r\nexport const DashboardEmptyState: React.FC<{\r\n  icon: string;\r\n  message: string;\r\n  searchTerm?: string;\r\n}> = ({ icon, message, searchTerm }) => (\r\n  <div style={{ \r\n    padding: '60px 24px',\r\n    textAlign: 'center',\r\n    backgroundColor: 'var(--color-bg, #1a1a1a)',\r\n    color: 'var(--color-text-muted, #8e8e93)',\r\n    fontSize: '18px',\r\n    fontWeight: '500'\r\n  }}>\r\n    <div style={{ marginBottom: '16px', fontSize: '48px' }}>{icon}</div>\r\n    {searchTerm ? 'לא נמצאו תוצאות עבור החיפוש' : message}\r\n  </div>\r\n);\r\n\r\n// Common Dashboard Table Header Component\r\nexport const DashboardTableHeader: React.FC<{\r\n  label: string;\r\n  sortKey: string;\r\n  sortConfig: { key: string; direction: 'asc' | 'desc' } | null;\r\n  onSort: (key: string) => void;\r\n  title: string;\r\n}> = ({ label, sortKey, sortConfig, onSort, title }) => (\r\n  <th \r\n    className=\"unified-table-header unified-table-header-regular sortable\"\r\n    onClick={() => onSort(sortKey)}\r\n    title={title}\r\n    data-sorted={sortConfig?.key === sortKey ? 'true' : 'false'}\r\n  >\r\n    <div style={{ display: 'flex', alignItems: 'center' }}>\r\n      <span>{label}</span>\r\n    </div>\r\n  </th>\r\n);\r\n\r\n// Common Dashboard Badge Component\r\nexport const DashboardBadge: React.FC<{\r\n  type: 'signed' | 'pending' | 'primary' | 'empty' | 'info';\r\n  children: React.ReactNode;\r\n  title?: string;\r\n  style?: React.CSSProperties;\r\n}> = ({ type, children, title, style }) => {\r\n  const getBadgeClass = () => {\r\n    switch (type) {\r\n      case 'signed':\r\n        return 'dashboard-badge-signed';\r\n      case 'pending':\r\n        return 'dashboard-badge-waiting';\r\n      case 'primary':\r\n        return 'dashboard-badge-primary';\r\n      case 'empty':\r\n        return 'dashboard-badge-empty';\r\n      case 'info':\r\n        return 'dashboard-badge-info';\r\n      default:\r\n        return 'dashboard-badge-primary';\r\n    }\r\n  };\r\n\r\n  return (\r\n    <span \r\n      className={`dashboard-badge ${getBadgeClass()}`}\r\n      title={title}\r\n      style={style}\r\n    >\r\n      {children}\r\n    </span>\r\n  );\r\n};\r\n\r\n// Common formatting utilities\r\nexport const formatDate = (dateString: string) => {\r\n  return new Date(dateString).toLocaleDateString('he-IL', {\r\n    year: 'numeric',\r\n    month: '2-digit',\r\n    day: '2-digit',\r\n    hour: '2-digit',\r\n    minute: '2-digit'\r\n  });\r\n};\r\n\r\nexport const getStatusText = (status: 'signed' | 'pending') => {\r\n  return status === 'signed' ? 'חתום' : 'ממתין לחתימה';\r\n};\r\n","import React, { useState, useMemo, useEffect } from 'react';\r\nimport { useDashboardStats, useUserDashboard } from '../../hooks';\r\nimport { useUserProfile } from '../../hooks/useUserProfile';\r\nimport { reportService, managementService } from '../../services';\r\nimport { TabNavigation, ResponsiveTable } from '../../shared/components';\r\nimport { SignUser, UnitEntity, UserDashboardItem } from '../../types';\r\nimport { paginate } from '../../utils';\r\nimport { UI_CONFIG } from '../../config/app.config';\r\nimport {\r\n  DashboardLoadingSpinner,\r\n  DashboardError,\r\n  DashboardSearch,\r\n  DashboardPagination,\r\n  DashboardEmptyState\r\n} from './DashboardShared';\r\nimport '../../shared/styles/components.css';\r\nimport './Dashboard.css';\r\n\r\nconst Dashboard: React.FC = () => {\r\n  const { userProfile } = useUserProfile();\r\n\r\n  // If user is not admin, show the user dashboard\r\n  if (userProfile && !userProfile.isAdmin) {\r\n    return <UserDashboard />;\r\n  }\r\n\r\n  // Rest of the existing admin dashboard code\r\n  return <AdminDashboard />;\r\n};\r\n\r\n// User Dashboard Component\r\nconst UserDashboard: React.FC = () => {\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [sortConfig, setSortConfig] = useState<{\r\n    key: string;\r\n    direction: 'asc' | 'desc';\r\n  } | null>({ key: 'signedAt', direction: 'desc' });\r\n\r\n  // Fetch all data once without pagination/sorting params\r\n  const { data, loading, error, refetch } = useUserDashboard();\r\n\r\n  const handleSort = (key: string) => {\r\n    let direction: 'asc' | 'desc' = 'asc';\r\n    if (sortConfig && sortConfig.key === key && sortConfig.direction === 'asc') {\r\n      direction = 'desc';\r\n    }\r\n    setSortConfig({ key, direction });\r\n    setCurrentPage(1); // Reset to first page when sorting\r\n  };\r\n\r\n  const handleSearch = (term: string) => {\r\n    setSearchTerm(term);\r\n    setCurrentPage(1); // Reset to first page when searching\r\n  };\r\n\r\n  // Filter and sort items on the frontend\r\n  const filteredAndSortedItems = useMemo(() => {\r\n    if (!data?.items) return [];\r\n\r\n    const normalizedSearchTerm = searchTerm.toLowerCase().normalize('NFC');\r\n    let filtered = data.items.filter(item =>\r\n      item.itemName.toLowerCase().normalize('NFC').includes(normalizedSearchTerm) ||\r\n      (item.itemIdNumber && item.itemIdNumber.toLowerCase().normalize('NFC').includes(normalizedSearchTerm)) ||\r\n      (item.status === 'signed' && 'נחתם'.normalize('NFC').includes(normalizedSearchTerm)) ||\r\n      (item.status === 'pending' && 'ממתין'.normalize('NFC').includes(normalizedSearchTerm)) ||\r\n      item.createdBy.name.toLowerCase().normalize('NFC').includes(normalizedSearchTerm) ||\r\n      item.createdBy.rank.toLowerCase().normalize('NFC').includes(normalizedSearchTerm)\r\n    );\r\n\r\n    if (sortConfig) {\r\n      filtered = [...filtered].sort((a, b) => {\r\n        let aValue: any;\r\n        let bValue: any;\r\n\r\n        switch (sortConfig.key) {\r\n          case 'itemName':\r\n            aValue = a.itemName;\r\n            bValue = b.itemName;\r\n            break;\r\n          case 'itemIdNumber':\r\n            aValue = a.itemIdNumber || '';\r\n            bValue = b.itemIdNumber || '';\r\n            break;\r\n          case 'createdBy':\r\n            aValue = a.createdBy.name;\r\n            bValue = b.createdBy.name;\r\n            break;\r\n          case 'signedBy':\r\n            aValue = a.status === 'signed' ? 1 : 0; // Signed first when ascending\r\n            bValue = b.status === 'signed' ? 1 : 0;\r\n            break;\r\n          case 'location':\r\n            aValue = a.signedBy?.location || '';\r\n            bValue = b.signedBy?.location || '';\r\n            break;\r\n          default:\r\n            return 0;\r\n        }\r\n\r\n        if (typeof aValue === 'string' && typeof bValue === 'string') {\r\n          return sortConfig.direction === 'asc'\r\n            ? aValue.localeCompare(bValue, 'he')\r\n            : bValue.localeCompare(aValue, 'he');\r\n        }\r\n\r\n        if (sortConfig.direction === 'asc') {\r\n          return aValue < bValue ? -1 : aValue > bValue ? 1 : 0;\r\n        } else {\r\n          return aValue > bValue ? -1 : aValue < bValue ? 1 : 0;\r\n        }\r\n      });\r\n    }\r\n\r\n    return filtered;\r\n  }, [data?.items, searchTerm, sortConfig]);\r\n\r\n  const { paginatedItems, totalPages } = paginate(\r\n    filteredAndSortedItems,\r\n    currentPage,\r\n    UI_CONFIG.TABLE_PAGE_SIZE\r\n  );\r\n\r\n  if (loading) {\r\n    return (\r\n      <DashboardLoadingSpinner message=\"טוען נתוני לוח בקרה אישי...\" />\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <DashboardError \r\n        error={error}\r\n        onRetry={() => refetch()}\r\n        title=\"שגיאה בטעינת נתוני לוח בקרה אישי\"\r\n      />\r\n    );\r\n  }\r\n\r\n  if (!data) {\r\n    return (\r\n      <DashboardError \r\n        error=\"שגיאה בטעינת נתונים\"\r\n        onRetry={() => refetch()}\r\n        title=\"שגיאה בטעינת נתוני לוח בקרה אישי\"\r\n      />\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"page-container\">\r\n      {/* Status Legend */}\r\n      <div style={{\r\n        padding: '16px 20px',\r\n        marginBottom: '20px',\r\n        background: 'var(--color-surface)',\r\n        border: '1px solid var(--color-border)',\r\n        borderRadius: '12px',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        gap: '24px',\r\n        flexWrap: 'wrap'\r\n      }}>\r\n        <div style={{ display: 'flex', alignItems: 'center', gap: '8px', fontSize: '14px' }}>\r\n          <i className=\"fas fa-info-circle\" style={{ color: 'var(--color-text-secondary)' }}></i>\r\n          <span style={{ fontWeight: '600', color: 'var(--color-text)' }}>מקרא סטטוס:</span>\r\n        </div>\r\n        <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>\r\n          <div style={{ \r\n            width: '16px', \r\n            height: '16px', \r\n            backgroundColor: 'rgba(34, 197, 94, 0.2)', \r\n            borderRadius: '4px',\r\n            border: '2px solid #22c55e'\r\n          }}></div>\r\n          <span style={{ fontSize: '13px', color: 'var(--color-text-secondary)' }}>נחתם</span>\r\n        </div>\r\n        <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>\r\n          <div style={{ \r\n            width: '16px', \r\n            height: '16px', \r\n            backgroundColor: 'rgba(245, 158, 11, 0.2)', \r\n            borderRadius: '4px',\r\n            border: '2px solid #f59e0b'\r\n          }}></div>\r\n          <span style={{ fontSize: '13px', color: 'var(--color-text-secondary)' }}>ממתין לחתימה</span>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Enhanced Search Input - same style as admin dashboard */}\r\n      <DashboardSearch\r\n        value={searchTerm}\r\n        onChange={handleSearch}\r\n        placeholder=\"הקלד שם פריט לחיפוש...\"\r\n        resultsCount={filteredAndSortedItems.length}\r\n        resultsLabel=\"פריטים\"\r\n        id=\"userDashboardSearch\"\r\n      />\r\n\r\n      {/* Items Table - Responsive Design */}\r\n      <ResponsiveTable enableCardLayout={true}>\r\n        <table className=\"unified-table\">\r\n            <thead>\r\n              <tr>\r\n                <th \r\n                  className=\"unified-table-header unified-table-header-first sortable\"\r\n                  onClick={() => handleSort('itemName')}\r\n                  title=\"לחץ למיון לפי שם פריט\"\r\n                  data-sorted={sortConfig?.key === 'itemName' ? 'true' : 'false'}\r\n                >\r\n                  <div>\r\n                    <span>שם פריט</span>\r\n                  </div>\r\n                </th>\r\n                <th \r\n                  className=\"unified-table-header unified-table-header-regular sortable\"\r\n                  onClick={() => handleSort('itemIdNumber')}\r\n                  title=\"לחץ למיון לפי מספר צ'\"\r\n                  data-sorted={sortConfig?.key === 'itemIdNumber' ? 'true' : 'false'}\r\n                >\r\n                  <div>\r\n                    <span>מספר צ'</span>\r\n                  </div>\r\n                </th>\r\n                <th \r\n                  className=\"unified-table-header unified-table-header-regular sortable priority-medium\"\r\n                  onClick={() => handleSort('createdBy')}\r\n                  title=\"לחץ למיון לפי מחתים\"\r\n                  data-sorted={sortConfig?.key === 'createdBy' ? 'true' : 'false'}\r\n                >\r\n                  <div>\r\n                    <span>מחתים</span>\r\n                  </div>\r\n                </th>\r\n                <th \r\n                  className=\"unified-table-header unified-table-header-regular sortable\"\r\n                  onClick={() => handleSort('signedBy')}\r\n                  title=\"לחץ למיון לפי חותם\"\r\n                  data-sorted={sortConfig?.key === 'signedBy' ? 'true' : 'false'}\r\n                >\r\n                  <div>\r\n                    <span>חותם</span>\r\n                  </div>\r\n                </th>\r\n                <th \r\n                  className=\"unified-table-header unified-table-header-regular sortable priority-low\"\r\n                  onClick={() => handleSort('location')}\r\n                  title=\"לחץ למיון לפי מיקום\"\r\n                  data-sorted={sortConfig?.key === 'location' ? 'true' : 'false'}\r\n                >\r\n                  <div>\r\n                    <span>מיקום</span>\r\n                  </div>\r\n                </th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {paginatedItems && Array.isArray(paginatedItems) ? paginatedItems.map((item: UserDashboardItem) => (\r\n                <tr \r\n                  key={item.id} \r\n                  className=\"unified-table-row\"\r\n                  style={{\r\n                    borderLeft: `3px solid ${item.status === 'signed' ? '#22c55e' : '#f59e0b'}`\r\n                  }}\r\n                >\r\n                  <td className=\"unified-table-cell unified-table-cell-first\">\r\n                    {item.itemName}\r\n                  </td>\r\n                  <td className=\"unified-table-cell unified-table-cell-badge\">\r\n                    <span className={`unified-badge ${item.itemIdNumber ? 'unified-badge-primary' : 'unified-badge-secondary'}`}>\r\n                      {item.itemIdNumber || 'ללא מספר'}\r\n                    </span>\r\n                  </td>\r\n                  <td className=\"unified-table-cell priority-medium\">\r\n                    {item.createdBy.name}\r\n                  </td>\r\n                  <td className=\"unified-table-cell mobile-card-primary\">\r\n                    {item.status === 'signed' ? (\r\n                      <div style={{ color: '#22c55e', fontSize: '13px' }}>\r\n                        <div style={{ fontWeight: '600' }}>✓ {item.signedBy?.name || 'נחתם'}</div>\r\n                        <div style={{ fontSize: '11px', opacity: 0.8 }}>\r\n                          חתימה דיגיטלית\r\n                        </div>\r\n                      </div>\r\n                    ) : (\r\n                      <div style={{ color: '#f59e0b', fontSize: '13px' }}>\r\n                        <div style={{ fontWeight: '600' }}>{item.signedBy?.name || 'ממתין'}</div>\r\n                        <div style={{ fontSize: '11px', opacity: 0.8 }}>\r\n                          ממתין לחתימה\r\n                        </div>\r\n                      </div>\r\n                    )}\r\n                  </td>\r\n                  <td className=\"unified-table-cell priority-low\">\r\n                    {item.signedBy?.location || '-'}\r\n                  </td>\r\n                </tr>\r\n              )) : null}\r\n            </tbody>\r\n          </table>\r\n      </ResponsiveTable>\r\n\r\n      {/* Pagination - same style as admin dashboard */}\r\n      <DashboardPagination\r\n        currentPage={currentPage}\r\n        totalPages={totalPages}\r\n        onPageChange={setCurrentPage}\r\n      />\r\n\r\n      {/* Empty state */}\r\n      {filteredAndSortedItems.length === 0 && (\r\n        <DashboardEmptyState\r\n          icon=\"📝\"\r\n          message=\"אין פריטים רשומים עליך\"\r\n          searchTerm={searchTerm}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\n// Rename the existing component to AdminDashboard\r\nconst AdminDashboard: React.FC = () => {\r\n  const { userProfile } = useUserProfile();\r\n  const { stats, loading, error } = useDashboardStats();\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [activeTab, setActiveTab] = useState<'units' | 'locations'>('units');\r\n  const [selectedUnit, setSelectedUnit] = useState<string>('');\r\n  const [selectedLocation, setSelectedLocation] = useState<string>('');\r\n  const [tooltipData, setTooltipData] = useState<{\r\n    show: boolean;\r\n    users: SignUser[];\r\n    position: { x: number; y: number };\r\n  }>({\r\n    show: false,\r\n    users: [],\r\n    position: { x: 0, y: 0 }\r\n  });\r\n  \r\n  const [sortConfig, setSortConfig] = useState<{\r\n    key: string;\r\n    direction: 'asc' | 'desc';\r\n  } | null>(null);\r\n\r\n  // State for unified dashboard data  \r\n  const [dashboardData, setDashboardData] = useState<any[]>([]);\r\n  const [dashboardLoading, setDashboardLoading] = useState(false);\r\n  const [dashboardError, setDashboardError] = useState<string | null>(null);\r\n  \r\n  // State for units mapping\r\n  const [allUnits, setAllUnits] = useState<UnitEntity[]>([]);\r\n  const [unitsLoading, setUnitsLoading] = useState(false);\r\n\r\n  // State for locations table sorting and search\r\n  const [locationsSortConfig, setLocationsSortConfig] = useState<{\r\n    key: string;\r\n    direction: 'asc' | 'desc';\r\n  } | null>(null);\r\n  const [locationsSearchTerm, setLocationsSearchTerm] = useState('');\r\n\r\n  // State for units table sorting and search\r\n  const [unitsSearchTerm, setUnitsSearchTerm] = useState('');\r\n\r\n  // Dashboard tab configuration\r\n  const dashboardTabs = [\r\n    { id: 'units', label: 'תצוגה לפי יחידות' },\r\n    { id: 'locations', label: 'תצוגה לפי מיקומים' }\r\n  ];\r\n\r\n  const handleTabChange = (tabId: string) => {\r\n    setActiveTab(tabId as 'units' | 'locations');\r\n  };\r\n\r\n  // Extract unique units and items from the data\r\n  const { items, units } = useMemo(() => {\r\n    if (!stats || typeof stats !== 'object') return { items: [], units: [] };\r\n    \r\n    try {\r\n      const items = Object.keys(stats);\r\n      const unitSet = new Set<string>();\r\n      \r\n      items.forEach(item => {\r\n        if (stats[item] && stats[item].units && typeof stats[item].units === 'object') {\r\n          Object.keys(stats[item].units).forEach(unit => {\r\n            if (unit && typeof unit === 'string') {\r\n              unitSet.add(unit);\r\n            }\r\n          });\r\n        }\r\n      });\r\n      \r\n      return { items, units: Array.from(unitSet).sort() };\r\n    } catch (error) {\r\n      console.error('Error processing dashboard stats:', error);\r\n      return { items: [], units: [] };\r\n    }\r\n  }, [stats]);\r\n\r\n  // Set default unit selection\r\n  React.useEffect(() => {\r\n    if (allUnits.length > 0 && !selectedUnit) {\r\n      setSelectedUnit(allUnits[0].name);\r\n    }\r\n  }, [allUnits, selectedUnit]);\r\n\r\n  // Reset selected location when unit changes\r\n  React.useEffect(() => {\r\n    setSelectedLocation('');\r\n  }, [selectedUnit]);\r\n\r\n  // Helper function to extract unique locations from dashboardData\r\n  const extractLocationsFromDashboardData = (data: any[]) => {\r\n    if (!data || !Array.isArray(data)) return [];\r\n    \r\n    try {\r\n      const locationSet = new Set<string>();\r\n      \r\n      data.forEach(item => {\r\n        if (item.locations && Array.isArray(item.locations)) {\r\n          item.locations.forEach((loc: any) => {\r\n            if (loc.locationName) {\r\n              locationSet.add(loc.locationName);\r\n            }\r\n          });\r\n        }\r\n      });\r\n      \r\n      return Array.from(locationSet).sort();\r\n    } catch (error) {\r\n      console.error('Error extracting locations from dashboard data:', error);\r\n      return [];\r\n    }\r\n  };\r\n\r\n  // Extract unique locations for selected unit from dashboardData (same source as table)\r\n  const locations = useMemo(() => {\r\n    return extractLocationsFromDashboardData(dashboardData);\r\n  }, [dashboardData]);\r\n\r\n  const handleCellClick = (event: React.MouseEvent, users: SignUser[], itemName: string, unitName: string) => {\r\n    if (users.length === 0) return;\r\n    \r\n    const rect = event.currentTarget.getBoundingClientRect();\r\n    setTooltipData({\r\n      show: true,\r\n      users: users.map(user => ({ ...user, itemName, unitName })),\r\n      position: {\r\n        x: rect.left + rect.width / 2,\r\n        y: rect.top\r\n      }\r\n    });\r\n  };\r\n\r\n  const handleCloseTooltip = () => {\r\n    setTooltipData(prev => ({ ...prev, show: false }));\r\n  };\r\n\r\n  const handleSort = (key: string) => {\r\n    let direction: 'asc' | 'desc' = 'asc';\r\n    if (sortConfig && sortConfig.key === key && sortConfig.direction === 'asc') {\r\n      direction = 'desc';\r\n    }\r\n    setSortConfig({ key, direction });\r\n  };\r\n\r\n  const getCellData = (itemName: string, unit: string) => {\r\n    try {\r\n      if (!stats || !stats[itemName] || !stats[itemName].units || !stats[itemName].units[unit]) {\r\n        return { signedQuantity: 0, waitingQuantity: 0, totalQuantity: 0, users: [] };\r\n      }\r\n      \r\n      const unitData = stats[itemName].units[unit];\r\n      if (!unitData || !unitData.locations || typeof unitData.locations !== 'object') {\r\n        return { signedQuantity: 0, waitingQuantity: 0, totalQuantity: 0, users: [] };\r\n      }\r\n      \r\n      // Aggregate all users from all locations within this unit\r\n      const allUsers: SignUser[] = [];\r\n      let totalSignedQuantity = 0;\r\n      let totalWaitingQuantity = 0;\r\n      \r\n      Object.keys(unitData.locations).forEach(locationName => {\r\n        const locationData = unitData.locations[locationName];\r\n        if (locationData && locationData.signUsers && Array.isArray(locationData.signUsers)) {\r\n          locationData.signUsers.forEach((user: any) => {\r\n            if (user && typeof user.quantity === 'number') {\r\n              allUsers.push({ ...user, location: locationName });\r\n              \r\n              // Only count as signed if isSigned is true\r\n              if (user.isSigned === true) {\r\n                totalSignedQuantity += user.quantity;\r\n              } else {\r\n                // Count as waiting if isSigned is false or undefined\r\n                totalWaitingQuantity += user.quantity;\r\n              }\r\n            }\r\n          });\r\n        }\r\n      });\r\n      \r\n      const totalQuantity = stats[itemName] && typeof stats[itemName].quantity === 'number' ? stats[itemName].quantity : 0;\r\n      \r\n      return { signedQuantity: totalSignedQuantity, waitingQuantity: totalWaitingQuantity, totalQuantity, users: allUsers };\r\n    } catch (error) {\r\n      console.error('Error getting cell data:', error, { itemName, unit });\r\n      return { signedQuantity: 0, waitingQuantity: 0, totalQuantity: 0, users: [] };\r\n    }\r\n  };\r\n\r\n  // Calculate total signed quantities per item (across all units)\r\n  const getItemSignedTotal = (itemName: string) => {\r\n    try {\r\n      if (!units || !Array.isArray(units) || !stats || !stats[itemName]) {\r\n        return 0;\r\n      }\r\n      \r\n      return units.reduce((total: number, unit: string) => {\r\n        if (!unit || typeof unit !== 'string') return total;\r\n        const { signedQuantity } = getCellData(itemName, unit);\r\n        return total + (typeof signedQuantity === 'number' ? signedQuantity : 0);\r\n      }, 0);\r\n    } catch (error) {\r\n      console.error('Error calculating item signed total:', error, { itemName });\r\n      return 0;\r\n    }\r\n  };\r\n\r\n  // Calculate total waiting quantities per item (across all units)\r\n  const getItemWaitingTotal = (itemName: string) => {\r\n    try {\r\n      if (!units || !Array.isArray(units) || !stats || !stats[itemName]) {\r\n        return 0;\r\n      }\r\n      \r\n      return units.reduce((total: number, unit: string) => {\r\n        if (!unit || typeof unit !== 'string') return total;\r\n        const { waitingQuantity } = getCellData(itemName, unit);\r\n        return total + (typeof waitingQuantity === 'number' ? waitingQuantity : 0);\r\n      }, 0);\r\n    } catch (error) {\r\n      console.error('Error calculating item waiting total:', error, { itemName });\r\n      return 0;\r\n    }\r\n  };\r\n\r\n  // Calculate non-operational quantities per item\r\n  const getItemNonOperationalTotal = (itemName: string) => {\r\n    try {\r\n      if (!stats || !stats[itemName]) return 0;\r\n      return stats[itemName].nonOperationalQuantity || 0;\r\n    } catch (error) {\r\n      console.error('Error calculating item non-operational total:', error, { itemName });\r\n      return 0;\r\n    }\r\n  };\r\n\r\n  // Calculate available quantities per item (total - non-operational - signed - waiting)\r\n  const getItemAvailableTotal = (itemName: string) => {\r\n    try {\r\n      if (!stats || !stats[itemName]) return 0;\r\n      const total = stats[itemName].quantity || 0;\r\n      const nonOperational = stats[itemName].nonOperationalQuantity || 0;\r\n      const signed = getItemSignedTotal(itemName);\r\n      const waiting = getItemWaitingTotal(itemName);\r\n      return total - nonOperational - signed - waiting;\r\n    } catch (error) {\r\n      console.error('Error calculating item available total:', error, { itemName });\r\n      return 0;\r\n    }\r\n  };\r\n\r\n  // Calculate total quantities per item\r\n  const getItemTotal = (itemName: string) => {\r\n    try {\r\n      if (!stats || !stats[itemName]) return 0;\r\n      return stats[itemName].quantity || 0;\r\n    } catch (error) {\r\n      console.error('Error calculating item total:', error, { itemName });\r\n      return 0;\r\n    }\r\n  };\r\n\r\n  // Get paginated items for display\r\n  const filteredAndSortedItems = useMemo(() => {\r\n    let filteredItems = items;\r\n    \r\n    // Filter by search term\r\n    if (unitsSearchTerm.trim()) {\r\n      const normalizedSearchTerm = unitsSearchTerm.trim().toLowerCase().normalize('NFC');\r\n      filteredItems = items.filter(item =>\r\n        item.toLowerCase().normalize('NFC').includes(normalizedSearchTerm)\r\n      );\r\n    }\r\n\r\n    // Sort items if sortConfig is set (use existing sortConfig for units table)\r\n    if (sortConfig) {\r\n      filteredItems = [...filteredItems].sort((a, b) => {\r\n        let aValue: any;\r\n        let bValue: any;\r\n\r\n        switch (sortConfig.key) {\r\n          case 'name':\r\n            aValue = a;\r\n            bValue = b;\r\n            break;\r\n          case 'signed':\r\n            aValue = getItemSignedTotal(a);\r\n            bValue = getItemSignedTotal(b);\r\n            break;\r\n          case 'waiting':\r\n            aValue = getItemWaitingTotal(a);\r\n            bValue = getItemWaitingTotal(b);\r\n            break;\r\n          case 'nonOperational':\r\n            aValue = getItemNonOperationalTotal(a);\r\n            bValue = getItemNonOperationalTotal(b);\r\n            break;\r\n          case 'available':\r\n            aValue = getItemAvailableTotal(a);\r\n            bValue = getItemAvailableTotal(b);\r\n            break;\r\n          case 'total':\r\n            aValue = getItemTotal(a);\r\n            bValue = getItemTotal(b);\r\n            break;\r\n          default:\r\n            // For unit columns\r\n            if (sortConfig.key.startsWith('unit_')) {\r\n              const unitName = sortConfig.key.replace('unit_', '');\r\n              const { signedQuantity: aSignedQuantity, waitingQuantity: aWaitingQuantity } = getCellData(a, unitName);\r\n              const { signedQuantity: bSignedQuantity, waitingQuantity: bWaitingQuantity } = getCellData(b, unitName);\r\n              \r\n              // Sort by total activity (signed + waiting)\r\n              aValue = aSignedQuantity + aWaitingQuantity;\r\n              bValue = bSignedQuantity + bWaitingQuantity;\r\n            } else {\r\n              return 0;\r\n            }\r\n        }\r\n\r\n        if (typeof aValue === 'string' && typeof bValue === 'string') {\r\n          return sortConfig.direction === 'asc' \r\n            ? aValue.localeCompare(bValue, 'he') \r\n            : bValue.localeCompare(aValue, 'he');\r\n        }\r\n\r\n        if (sortConfig.direction === 'asc') {\r\n          return aValue < bValue ? -1 : aValue > bValue ? 1 : 0;\r\n        } else {\r\n          return aValue > bValue ? -1 : aValue < bValue ? 1 : 0;\r\n        }\r\n      });\r\n    }\r\n\r\n    return filteredItems;\r\n  // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [items, unitsSearchTerm, sortConfig, stats]);\r\n  const { paginatedItems, totalPages } = paginate(filteredAndSortedItems || [], currentPage, UI_CONFIG.TABLE_PAGE_SIZE);\r\n\r\n  // Locations table helper functions\r\n  const handleLocationsSort = (key: string) => {\r\n    let direction: 'asc' | 'desc' = 'asc';\r\n    if (locationsSortConfig && locationsSortConfig.key === key && locationsSortConfig.direction === 'asc') {\r\n      direction = 'desc';\r\n    }\r\n    setLocationsSortConfig({ key, direction });\r\n  };\r\n\r\n  const getFilteredAndSortedLocationsData = () => {\r\n    const tableData = getUnifiedLocationsTableData();\r\n    \r\n    // Filter by search term\r\n    let filteredItems = tableData.items;\r\n    if (locationsSearchTerm.trim()) {\r\n      const normalizedSearchTerm = locationsSearchTerm.trim().toLowerCase().normalize('NFC');\r\n      filteredItems = tableData.items.filter(item =>\r\n        item.itemName.toLowerCase().normalize('NFC').includes(normalizedSearchTerm)\r\n      );\r\n    }\r\n\r\n    // Filter locations based on selection\r\n    const filteredLocations = selectedLocation ? [selectedLocation] : tableData.locations;\r\n\r\n    // Sort items\r\n    if (locationsSortConfig) {\r\n      filteredItems = [...filteredItems].sort((a, b) => {\r\n        let aValue: any;\r\n        let bValue: any;\r\n\r\n        switch (locationsSortConfig.key) {\r\n          case 'itemName':\r\n            aValue = a.itemName;\r\n            bValue = b.itemName;\r\n            break;\r\n          default:\r\n            // For location columns\r\n            if (locationsSortConfig.key.startsWith('location_')) {\r\n              const locationName = locationsSortConfig.key.replace('location_', '');\r\n              const aLocationData = a.locations[locationName];\r\n              const bLocationData = b.locations[locationName];\r\n              \r\n              // Sort by total activity (signed + pending + allocation)\r\n              aValue = (aLocationData?.signed || 0) + (aLocationData?.pending || 0) + (aLocationData?.allocation || 0);\r\n              bValue = (bLocationData?.signed || 0) + (bLocationData?.pending || 0) + (bLocationData?.allocation || 0);\r\n            } else {\r\n              return 0;\r\n            }\r\n        }\r\n\r\n        if (typeof aValue === 'string' && typeof bValue === 'string') {\r\n          return locationsSortConfig.direction === 'asc' \r\n            ? aValue.localeCompare(bValue, 'he') \r\n            : bValue.localeCompare(aValue, 'he');\r\n        }\r\n\r\n        if (locationsSortConfig.direction === 'asc') {\r\n          return aValue < bValue ? -1 : aValue > bValue ? 1 : 0;\r\n        } else {\r\n          return aValue > bValue ? -1 : aValue < bValue ? 1 : 0;\r\n        }\r\n      });\r\n    }\r\n\r\n    return { ...tableData, items: filteredItems, locations: filteredLocations };\r\n  };\r\n\r\n  // Unified table helper functions for new API\r\n  const getUnifiedLocationsTableData = () => {\r\n    if (!dashboardData || !Array.isArray(dashboardData)) {\r\n      return { items: [], locations: [] };\r\n    }\r\n\r\n    // Extract all unique locations using shared helper function\r\n    const locations = extractLocationsFromDashboardData(dashboardData);\r\n\r\n    // Transform data to table format\r\n    const items = dashboardData.map(item => {\r\n      const locationData: { [key: string]: any } = {};\r\n      \r\n      if (item.locations && Array.isArray(item.locations)) {\r\n        item.locations.forEach((loc: any) => {\r\n          // Use server allocation value if available, otherwise count all receipts for this location\r\n          let actualAllocation = loc.allocation || 0;\r\n          if (actualAllocation === 0 && loc.receipts && Array.isArray(loc.receipts)) {\r\n            // Fallback: count all receipts in this location\r\n            actualAllocation = loc.receipts.length;\r\n          }\r\n\r\n          locationData[loc.locationName] = {\r\n            signed: loc.signed || 0,\r\n            pending: loc.pending || 0,\r\n            allocation: actualAllocation, // Use server value or count all receipts\r\n            receipts: loc.receipts || []\r\n          };\r\n        });\r\n      }\r\n\r\n      return {\r\n        itemName: item.itemName,\r\n        locations: locationData\r\n      };\r\n    });\r\n\r\n    return { items, locations };\r\n  };\r\n\r\n  const handleUnifiedLocationsCellClick = (e: React.MouseEvent, cellData: any, itemName: string, locationName: string) => {\r\n    const rect = e.currentTarget.getBoundingClientRect();\r\n    const allUsers: SignUser[] = [];\r\n\r\n    // Process receipts to create user list\r\n    if (cellData.receipts && Array.isArray(cellData.receipts)) {\r\n      cellData.receipts.forEach((receipt: any) => {\r\n        allUsers.push({\r\n          id: receipt.idNumber?.toString() || Math.random().toString(),\r\n          name: receipt.signBy || 'Unknown',\r\n          phoneNumber: '', // Not available in receipt data\r\n          personalNumber: receipt.idNumber || 0,\r\n          quantity: 1, // Default quantity since it's not in the receipt\r\n          isSigned: receipt.isSigned || false,\r\n          location: receipt.allocatedLocation || locationName\r\n        });\r\n      });\r\n    }\r\n\r\n    setTooltipData({\r\n      show: true,\r\n      users: allUsers,\r\n      position: { x: rect.left + window.scrollX, y: rect.bottom + window.scrollY }\r\n    });\r\n  };\r\n\r\n  // Load all units for ID mapping\r\n  useEffect(() => {\r\n    const loadUnits = async () => {\r\n      if (userProfile?.isAdmin) {\r\n        setUnitsLoading(true);\r\n        try {\r\n          const response = await managementService.getAllUnits();\r\n          if (response.success && response.data) {\r\n            setAllUnits(response.data);\r\n          }\r\n        } catch (error) {\r\n          console.error('Error loading units:', error);\r\n        } finally {\r\n          setUnitsLoading(false);\r\n        }\r\n      }\r\n    };\r\n\r\n    loadUnits();\r\n  }, [userProfile?.isAdmin]);\r\n\r\n  // Load dashboard data when unit changes\r\n  useEffect(() => {\r\n    const loadDashboardData = async () => {\r\n      if (selectedUnit && userProfile?.isAdmin) {\r\n        // Find unit ID from unit name\r\n        const unit = allUnits.find(u => u.name === selectedUnit);\r\n        const unitId = unit ? unit.id : null;\r\n        \r\n        if (!unitId) {\r\n          setDashboardError(`Unit ID not found for unit: ${selectedUnit}`);\r\n          setDashboardData([]);\r\n          return;\r\n        }\r\n\r\n        setDashboardLoading(true);\r\n        setDashboardError(null);\r\n        try {\r\n          const data = await reportService.getDashboardByUnit(unitId);\r\n          // The API returns an array of items directly\r\n          setDashboardData(Array.isArray(data) ? data : []);\r\n        } catch (error) {\r\n          console.error('Error loading dashboard data:', error);\r\n          setDashboardError('Failed to load dashboard data');\r\n          setDashboardData([]);\r\n        } finally {\r\n          setDashboardLoading(false);\r\n        }\r\n      } else {\r\n        setDashboardData([]);\r\n      }\r\n    };\r\n\r\n    loadDashboardData();\r\n  }, [selectedUnit, userProfile?.isAdmin, allUnits]); // Added allUnits dependency\r\n\r\n  // Check if user has a location assigned\r\n  if (userProfile && !userProfile.location) {\r\n    return (\r\n      <div className=\"card\">\r\n        <div className=\"card-header\">\r\n          <h2 className=\"mb-0\">לוח בקרה</h2>\r\n      </div>\r\n        <div className=\"card-body\">\r\n          <div className=\"alert alert-warning\">\r\n            <h4>אין לך גישה למערכת</h4>\r\n            <p>המשתמש שלך לא שוייך למיקום. אנא פנה למנהל המערכת כדי לשייך אותך למיקום.</p>\r\n        </div>\r\n      </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (loading) {\r\n    return (\r\n      <DashboardLoadingSpinner message=\"טוען נתוני לוח בקרה...\" />\r\n    );\r\n  }\r\n\r\n  if (error || !stats) {\r\n    return (\r\n      <DashboardError \r\n        error={error || \"שגיאה בטעינת נתונים\"}\r\n        onRetry={() => window.location.reload()}\r\n        title=\"שגיאה בטעינת נתוני לוח בקרה\"\r\n      />\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"page-container\">\r\n      {/* Tab Navigation */}\r\n      <TabNavigation\r\n        tabs={dashboardTabs}\r\n        activeTab={activeTab}\r\n        onTabChange={handleTabChange}\r\n        variant=\"primary\"\r\n        size=\"md\"\r\n      />\r\n\r\n      {/* Content Area */}\r\n      <div className=\"tab-content\">\r\n        <div style={{\r\n          position: 'relative'\r\n        }}>\r\n          {/* Unit Selection for Locations Tab */}\r\n          {activeTab === 'locations' && (\r\n            <div className=\"dashboard-select-container\">\r\n              <div className=\"dashboard-select-row\">\r\n                <label htmlFor=\"unitSelect\" className=\"dashboard-select-label\">\r\n                  בחר יחידה:\r\n                </label>\r\n                <div className=\"dashboard-select-wrapper\">\r\n                  <select\r\n                    id=\"unitSelect\"\r\n                    className=\"dashboard-select\"\r\n                    value={selectedUnit}\r\n                    onChange={(e) => setSelectedUnit(e.target.value)}\r\n                    disabled={unitsLoading}\r\n                  >\r\n                    <option value=\"\">{unitsLoading ? 'טוען יחידות...' : 'בחר יחידה...'}</option>\r\n                    {allUnits.map(unit => (\r\n                      <option key={unit.id} value={unit.name}>{unit.name}</option>\r\n                    ))}\r\n                  </select>\r\n                </div>\r\n                {selectedUnit && (\r\n                  <div className=\"dashboard-badge-container\">\r\n                    <span className=\"dashboard-results-badge\">\r\n                      {locations.length} מיקומים\r\n                    </span>\r\n                  </div>\r\n                )}\r\n              </div>\r\n              \r\n              {/* Location Selection - Only show when unit is selected */}\r\n              {selectedUnit && locations.length > 0 && (\r\n                <div className=\"dashboard-select-row\" style={{ marginTop: '16px' }}>\r\n                  <label htmlFor=\"locationSelect\" className=\"dashboard-select-label\">\r\n                    בחר מיקום:\r\n                  </label>\r\n                  <div className=\"dashboard-select-wrapper\">\r\n                    <select\r\n                      id=\"locationSelect\"\r\n                      className=\"dashboard-select\"\r\n                      value={selectedLocation}\r\n                      onChange={(e) => setSelectedLocation(e.target.value)}\r\n                      disabled={dashboardLoading}\r\n                    >\r\n                      <option value=\"\">כל המיקומים</option>\r\n                      {locations.map(location => (\r\n                        <option key={location} value={location}>{location}</option>\r\n                      ))}\r\n                    </select>\r\n                  </div>\r\n                  {selectedLocation && (\r\n                    <div className=\"dashboard-badge-container\">\r\n                      <span className=\"dashboard-results-badge\">\r\n                        מיקום נבחר: {selectedLocation}\r\n                      </span>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              )}\r\n            </div>\r\n            )}\r\n        </div>\r\n\r\n          {/* Enhanced Search Input for Units Tab */}\r\n          {activeTab === 'units' && (\r\n            <DashboardSearch\r\n              value={unitsSearchTerm}\r\n              onChange={setUnitsSearchTerm}\r\n              placeholder=\"הקלד שם פריט לחיפוש...\"\r\n              resultsCount={filteredAndSortedItems.length}\r\n              resultsLabel=\"פריטים\"\r\n              id=\"unitsSearch\"\r\n            />\r\n          )}          {activeTab === 'units' && (\r\n            <ResponsiveTable enableCardLayout={false}>\r\n                <table className=\"unified-table\">\r\n                  <thead>\r\n                    <tr>\r\n                      <th \r\n                        className=\"unified-table-header unified-table-header-first sortable\"\r\n                        onClick={() => handleSort('name')}\r\n                        title=\"לחץ למיון לפי שם פריט\"\r\n                        data-sorted={sortConfig?.key === 'name' ? 'true' : 'false'}\r\n                      >\r\n                        <div>\r\n                          <span>פריט</span>\r\n                        </div>\r\n                      </th>\r\n                      {units.map(unit => (\r\n                        <th \r\n                          key={unit} \r\n                          className=\"unified-table-header unified-table-header-regular sortable\"\r\n                          onClick={() => handleSort(`unit_${unit}`)}\r\n                          title={`לחץ למיון לפי ${unit}`}\r\n                          data-sorted={sortConfig?.key === `unit_${unit}` ? 'true' : 'false'}\r\n                        >\r\n                          <div>\r\n                            <span>{unit}</span>\r\n                          </div>\r\n                        </th>\r\n                      ))}\r\n                      <th \r\n                        className=\"unified-table-header unified-table-header-regular sortable\"\r\n                        onClick={() => handleSort('signed')}\r\n                        title=\"לחץ למיון לפי חתומים\"\r\n                        data-sorted={sortConfig?.key === 'signed' ? 'true' : 'false'}\r\n                      >\r\n                        <div>\r\n                          <span>חתומים</span>\r\n                        </div>\r\n                      </th>\r\n                      <th \r\n                        className=\"unified-table-header unified-table-header-regular sortable\"\r\n                        onClick={() => handleSort('waiting')}\r\n                        title=\"לחץ למיון לפי ממתינים לחתימה\"\r\n                        data-sorted={sortConfig?.key === 'waiting' ? 'true' : 'false'}\r\n                      >\r\n                        <div>\r\n                          <span>ממתינים לחתימה</span>\r\n                        </div>\r\n                      </th>\r\n                      <th \r\n                        className=\"unified-table-header unified-table-header-regular sortable\"\r\n                        onClick={() => handleSort('nonOperational')}\r\n                        title=\"לחץ למיון לפי תקולים\"\r\n                        data-sorted={sortConfig?.key === 'nonOperational' ? 'true' : 'false'}\r\n                      >\r\n                        <div>\r\n                          <span>תקולים</span>\r\n                        </div>\r\n                      </th>\r\n                      <th \r\n                        className=\"unified-table-header unified-table-header-regular sortable\"\r\n                        onClick={() => handleSort('available')}\r\n                        title=\"לחץ למיון לפי זמינים\"\r\n                        data-sorted={sortConfig?.key === 'available' ? 'true' : 'false'}\r\n                      >\r\n                        <div>\r\n                          <span>זמינים</span>\r\n                        </div>\r\n                      </th>\r\n                      <th \r\n                        className=\"unified-table-header unified-table-header-regular sortable\"\r\n                        onClick={() => handleSort('total')}\r\n                        title=\"לחץ למיון לפי סה'כ\"\r\n                        data-sorted={sortConfig?.key === 'total' ? 'true' : 'false'}\r\n                      >\r\n                        <div>\r\n                          <span>סה\"כ</span>\r\n                        </div>\r\n                      </th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    {paginatedItems && Array.isArray(paginatedItems) ? paginatedItems.map((item, itemIndex) => {\r\n                      if (!item || typeof item !== 'string') return null;\r\n                      \r\n                      return (\r\n                      <tr \r\n                        key={item} \r\n                        className=\"unified-table-row\"\r\n                      >\r\n                        <td className=\"unified-table-cell unified-table-cell-first\">\r\n                          {item}\r\n                        </td>\r\n                        {units && Array.isArray(units) ? units.map(unit => {\r\n                          if (!unit || typeof unit !== 'string') return null;\r\n                          \r\n                          const { signedQuantity, waitingQuantity, users } = getCellData(item, unit);\r\n                          const hasUsers = users && Array.isArray(users) && users.length > 0;\r\n                          const hasSignedUsers = signedQuantity > 0;\r\n                          const hasWaitingUsers = waitingQuantity > 0;\r\n                          \r\n                          return (\r\n                            <td \r\n                              key={`${item}-${unit}`}\r\n                              className=\"unified-table-cell\"\r\n                              onClick={(e) => handleCellClick(e, users || [], item, unit)}\r\n                              title={hasUsers ? 'לחץ לפרטים נוספים' : 'אין משתמשים רשומים'}\r\n                              style={{ cursor: hasUsers ? 'pointer' : 'default' }}\r\n                            >\r\n                              {hasUsers ? (\r\n                                <div style={{ display: 'flex', flexDirection: 'column', gap: '4px', alignItems: 'center' }}>\r\n                                  {hasSignedUsers && (\r\n                                    <span className=\"dashboard-badge-signed\" title={`חתומים: ${signedQuantity}`}>\r\n                                      ✓ {signedQuantity}\r\n                                    </span>\r\n                                  )}\r\n                                  {hasWaitingUsers && (\r\n                                    <span className=\"dashboard-badge-waiting\" title={`ממתינים: ${waitingQuantity}`}>\r\n                                      ⏳ {waitingQuantity}\r\n                                    </span>\r\n                                  )}\r\n                              </div>\r\n                              ) : (\r\n                                <span className=\"dashboard-badge-empty\">\r\n                                  0\r\n                                </span>\r\n                              )}\r\n                            </td>\r\n                          );\r\n                        }) : null}\r\n                        <td \r\n                          className=\"unified-table-cell unified-table-cell-number\"\r\n                          onClick={(e) => {\r\n                            // Collect all signed users from all units for this item\r\n                            const allSignedUsers: SignUser[] = [];\r\n                            units.forEach(unit => {\r\n                              const { users } = getCellData(item, unit);\r\n                              if (users && Array.isArray(users)) {\r\n                                const signedUsers = users.filter(user => user.isSigned === true);\r\n                                allSignedUsers.push(...signedUsers);\r\n                              }\r\n                            });\r\n                            handleCellClick(e, allSignedUsers, item, 'כל היחידות - חתומים');\r\n                          }}\r\n                          title=\"לחץ לפרטי כל המשתמשים החתומים\"\r\n                          style={{ cursor: 'pointer' }}\r\n                        >\r\n                          <span className=\"unified-badge unified-badge-large unified-badge-success\">\r\n                            {getItemSignedTotal(item)}\r\n                          </span>\r\n                        </td>\r\n                        <td \r\n                          className=\"unified-table-cell unified-table-cell-number\"\r\n                          onClick={(e) => {\r\n                            // Collect all waiting users from all units for this item\r\n                            const allWaitingUsers: SignUser[] = [];\r\n                            units.forEach(unit => {\r\n                              const { users } = getCellData(item, unit);\r\n                              if (users && Array.isArray(users)) {\r\n                                const waitingUsers = users.filter(user => user.isSigned !== true);\r\n                                allWaitingUsers.push(...waitingUsers);\r\n                              }\r\n                            });\r\n                            handleCellClick(e, allWaitingUsers, item, 'כל היחידות - ממתינים');\r\n                          }}\r\n                          title=\"לחץ לפרטי כל המשתמשים הממתינים\"\r\n                          style={{ cursor: 'pointer' }}\r\n                        >\r\n                          <span className=\"unified-badge unified-badge-large unified-badge-warning\">\r\n                            {getItemWaitingTotal(item)}\r\n                          </span>\r\n                        </td>\r\n                        <td \r\n                          className=\"unified-table-cell unified-table-cell-number\"\r\n                          onClick={(e) => {\r\n                            const nonOpCount = stats && stats[item] && typeof stats[item].nonOperationalQuantity === 'number' ? stats[item].nonOperationalQuantity : 0;\r\n                            if (nonOpCount > 0) {\r\n                              // For non-operational, we'll show a summary info instead of user details\r\n                              // since non-operational items might not have specific users assigned\r\n                              handleCellClick(e, [], item, `תקולים - ${nonOpCount} יחידות`);\r\n                            }\r\n                          }}\r\n                          title={stats && stats[item] && stats[item].nonOperationalQuantity > 0 ? \"לחץ לפרטי הפריטים התקולים\" : \"אין פריטים תקולים\"}\r\n                          style={{ cursor: 'pointer' }}\r\n                        >\r\n                          <span className=\"unified-badge unified-badge-large unified-badge-danger\">\r\n                            {stats && stats[item] && typeof stats[item].nonOperationalQuantity === 'number' ? stats[item].nonOperationalQuantity : 0}\r\n                          </span>\r\n                        </td>\r\n                        <td \r\n                          className=\"unified-table-cell unified-table-cell-number\"\r\n                          onClick={(e) => {\r\n                            // For available items, show all users who are not assigned or not signed\r\n                            const allUsers: SignUser[] = [];\r\n                            units.forEach(unit => {\r\n                              const { users } = getCellData(item, unit);\r\n                              if (users && Array.isArray(users)) {\r\n                                allUsers.push(...users);\r\n                              }\r\n                            });\r\n                            handleCellClick(e, allUsers, item, 'כל היחידות - סטטוס זמינות');\r\n                          }}\r\n                          title=\"לחץ לפרטי זמינות הפריט\"\r\n                          style={{ cursor: 'pointer' }}\r\n                        >\r\n                          <span className=\"unified-badge unified-badge-large unified-badge-primary\">\r\n                            {(stats && stats[item] && typeof stats[item].quantity === 'number' ? stats[item].quantity : 0) - (stats && stats[item] && typeof stats[item].nonOperationalQuantity === 'number' ? stats[item].nonOperationalQuantity : 0) - getItemSignedTotal(item) - getItemWaitingTotal(item)}\r\n                          </span>\r\n                        </td>\r\n                        <td \r\n                          className=\"unified-table-cell unified-table-cell-number\"\r\n                          onClick={(e) => {\r\n                            // For total, show all users from all units for this item\r\n                            const allUsers: SignUser[] = [];\r\n                            units.forEach(unit => {\r\n                              const { users } = getCellData(item, unit);\r\n                              if (users && Array.isArray(users)) {\r\n                                allUsers.push(...users);\r\n                              }\r\n                            });\r\n                            handleCellClick(e, allUsers, item, 'כל היחידות - סיכום כללי');\r\n                          }}\r\n                          title=\"לחץ לפרטי כל המשתמשים הרשומים לפריט\"\r\n                          style={{ cursor: 'pointer' }}\r\n                        >\r\n                          <span className=\"unified-badge unified-badge-large unified-badge-secondary\">\r\n                            {stats && stats[item] && typeof stats[item].quantity === 'number' ? stats[item].quantity : 0}\r\n                          </span>\r\n                        </td>\r\n                      </tr>\r\n                      );\r\n                    }).filter(Boolean) : null}\r\n                  </tbody>\r\n                </table>\r\n            </ResponsiveTable>\r\n          )}\r\n\r\n        {/* Locations Tab Content - Unified Table */}\r\n        {activeTab === 'locations' && selectedUnit && (\r\n          <>\r\n            {dashboardLoading || unitsLoading ? (\r\n              <DashboardLoadingSpinner \r\n                message={unitsLoading ? 'טוען רשימת יחידות...' : 'טוען נתוני יחידה...'} \r\n              />\r\n            ) : dashboardError ? (\r\n              <div style={{ \r\n                padding: '60px 24px',\r\n                textAlign: 'center',\r\n                backgroundColor: 'var(--color-bg, #1a1a1a)',\r\n                color: 'var(--color-danger, #dc3545)',\r\n                fontSize: '18px',\r\n                fontWeight: '500'\r\n              }}>\r\n                <div style={{ marginBottom: '16px', fontSize: '48px' }}>❌</div>\r\n                שגיאה בטעינת נתונים: {dashboardError}\r\n            </div>\r\n            ) : dashboardData && dashboardData.length > 0 ? (\r\n              <>\r\n                {/* Enhanced Search Input */}\r\n                <DashboardSearch\r\n                  value={locationsSearchTerm}\r\n                  onChange={setLocationsSearchTerm}\r\n                  placeholder=\"הקלד שם פריט לחיפוש...\"\r\n                  resultsCount={getFilteredAndSortedLocationsData().items.length}\r\n                  resultsLabel=\"פריטים\"\r\n                  id=\"locationsSearch\"\r\n                />\r\n\r\n                <ResponsiveTable enableCardLayout={true}>\r\n                    <table className=\"unified-table\">\r\n                      <thead>\r\n                        <tr>\r\n                          <th \r\n                            className=\"unified-table-header unified-table-header-first sortable\"\r\n                            onClick={() => handleLocationsSort('itemName')}\r\n                            title=\"לחץ למיון לפי שם פריט\"\r\n                            data-sorted={locationsSortConfig?.key === 'itemName' ? 'true' : 'false'}\r\n                          >\r\n                            <div>\r\n                              <span>פריט</span>\r\n                            </div>\r\n                          </th>\r\n                          {selectedLocation ? (\r\n                            // Show only selected location column\r\n                            <th \r\n                              className=\"unified-table-header unified-table-header-regular sortable\"\r\n                              onClick={() => handleLocationsSort(`location_${selectedLocation}`)}\r\n                              title={`לחץ למיון לפי ${selectedLocation}`}\r\n                              data-sorted={locationsSortConfig?.key === `location_${selectedLocation}` ? 'true' : 'false'}\r\n                            >\r\n                              <div>\r\n                                <span>{selectedLocation}</span>\r\n                              </div>\r\n                            </th>\r\n                          ) : (\r\n                            // Show all locations (original behavior)\r\n                            getFilteredAndSortedLocationsData().locations.map(location => (\r\n                              <th \r\n                                key={location} \r\n                                className=\"unified-table-header unified-table-header-regular sortable\"\r\n                                onClick={() => handleLocationsSort(`location_${location}`)}\r\n                                title={`לחץ למיון לפי ${location}`}\r\n                                data-sorted={locationsSortConfig?.key === `location_${location}` ? 'true' : 'false'}\r\n                              >\r\n                                <div>\r\n                                  <span>{location}</span>\r\n                                </div>\r\n                              </th>\r\n                            ))\r\n                          )}\r\n                        </tr>\r\n                      </thead>\r\n                  <tbody>\r\n                    {getFilteredAndSortedLocationsData().items.map((item, itemIndex) => (\r\n                      <tr \r\n                        key={`${item.itemName}-locations`} \r\n                        className=\"unified-table-row\"\r\n                      >\r\n                        <td className=\"unified-table-cell unified-table-cell-first\">\r\n                          {item.itemName}\r\n                        </td>\r\n                        {selectedLocation ? (\r\n                          // Show only selected location column\r\n                          (() => {\r\n                            const locationData = item.locations[selectedLocation];\r\n                            const hasUserData = locationData && (locationData.signed > 0 || locationData.pending > 0);\r\n                            const hasAnyData = locationData && (locationData.signed > 0 || locationData.pending > 0 || locationData.allocation > 0);\r\n                            \r\n                            return (\r\n                              <td \r\n                                key={`${item.itemName}-${selectedLocation}`}\r\n                                className=\"unified-table-cell\"\r\n                                style={{ \r\n                                  cursor: hasUserData ? 'pointer' : 'default'\r\n                                }}\r\n                                onClick={(e) => hasUserData && handleUnifiedLocationsCellClick(e, locationData, item.itemName, selectedLocation)}\r\n                                title={hasUserData ? `לחץ לפרטים נוספים` : hasAnyData ? 'יש הקצאות אך אין נתוני משתמשים' : 'אין נתונים'}\r\n                              >\r\n                                {hasAnyData ? (\r\n                                  <div style={{ display: 'flex', flexDirection: 'row', gap: '6px', alignItems: 'center', justifyContent: 'center', flexWrap: 'wrap' }}>\r\n                                    {locationData.signed > 0 && (\r\n                                      <span \r\n                                        className=\"dashboard-locations-badge-signed\" \r\n                                        title={`חתומים: ${locationData.signed}`}\r\n                                      >\r\n                                        ✓ {locationData.signed}\r\n                                      </span>\r\n                                    )}\r\n                                    {locationData.pending > 0 && (\r\n                                      <span \r\n                                        className=\"dashboard-locations-badge-pending\" \r\n                                        title={`ממתינים: ${locationData.pending}`}\r\n                                      >\r\n                                        ⏳ {locationData.pending}\r\n                                      </span>\r\n                                    )}\r\n                                    {locationData.allocation > 0 && (\r\n                                      <span \r\n                                        className=\"dashboard-locations-badge-allocation\" \r\n                                        title={`הקצאה: ${locationData.allocation}`}\r\n                                      >\r\n                                        📋 {locationData.allocation}\r\n                                      </span>\r\n                                    )}\r\n                                  </div>\r\n                                ) : (\r\n                                  <span className=\"dashboard-badge-empty\">0</span>\r\n                                )}\r\n                              </td>\r\n                            );\r\n                          })()\r\n                        ) : (\r\n                          // Show all locations (original behavior)\r\n                          getFilteredAndSortedLocationsData().locations.map(location => {\r\n                            const locationData = item.locations[location];\r\n                            const hasUserData = locationData && (locationData.signed > 0 || locationData.pending > 0);\r\n                            const hasAnyData = locationData && (locationData.signed > 0 || locationData.pending > 0 || locationData.allocation > 0);\r\n                            \r\n                            return (\r\n                              <td \r\n                                key={`${item.itemName}-${location}`}\r\n                                className=\"unified-table-cell\"\r\n                                style={{ \r\n                                  cursor: hasUserData ? 'pointer' : 'default'\r\n                                }}\r\n                                onClick={(e) => hasUserData && handleUnifiedLocationsCellClick(e, locationData, item.itemName, location)}\r\n                                title={hasUserData ? `לחץ לפרטים נוספים` : hasAnyData ? 'יש הקצאות אך אין נתוני משתמשים' : 'אין נתונים'}\r\n                              >\r\n                                {hasAnyData ? (\r\n                                  <div style={{ display: 'flex', flexDirection: 'row', gap: '6px', alignItems: 'center', justifyContent: 'center', flexWrap: 'wrap' }}>\r\n                                    {locationData.signed > 0 && (\r\n                                      <span \r\n                                        className=\"dashboard-locations-badge-signed\" \r\n                                        title={`חתומים: ${locationData.signed}`}\r\n                                      >\r\n                                        ✓ {locationData.signed}\r\n                                      </span>\r\n                                    )}\r\n                                    {locationData.pending > 0 && (\r\n                                      <span \r\n                                        className=\"dashboard-locations-badge-pending\" \r\n                                        title={`ממתינים: ${locationData.pending}`}\r\n                                      >\r\n                                        ⏳ {locationData.pending}\r\n                                      </span>\r\n                                    )}\r\n                                    {locationData.allocation > 0 && (\r\n                                      <span \r\n                                        className=\"dashboard-locations-badge-allocation\" \r\n                                        title={`הקצאה: ${locationData.allocation}`}\r\n                                      >\r\n                                        📋 {locationData.allocation}\r\n                                      </span>\r\n                                    )}\r\n                                  </div>\r\n                                ) : (\r\n                                  <span className=\"dashboard-locations-badge-empty\">\r\n                                    0\r\n                                  </span>\r\n                                )}\r\n                              </td>\r\n                            );\r\n                          })\r\n                        )}\r\n                      </tr>\r\n                    ))}\r\n                  </tbody>\r\n                </table>\r\n              </ResponsiveTable>\r\n              </>\r\n            ) : (\r\n              <div style={{ \r\n                padding: '60px 24px',\r\n                textAlign: 'center',\r\n                backgroundColor: 'var(--color-bg, #1a1a1a)',\r\n                color: 'var(--color-text-muted, #8e8e93)',\r\n                fontSize: '18px',\r\n                fontWeight: '500'\r\n              }}>\r\n                <div style={{ marginBottom: '16px', fontSize: '48px' }}>📊</div>\r\n                אין נתונים זמינים עבור יחידה זו\r\n            </div>\r\n            )}\r\n          </>\r\n        )}\r\n\r\n        {/* Show message when no unit selected for locations tab */}\r\n        {activeTab === 'locations' && !selectedUnit && (\r\n          <div style={{ \r\n            padding: '60px 24px',\r\n            textAlign: 'center',\r\n            backgroundColor: 'var(--color-bg, #1a1a1a)',\r\n            color: 'var(--color-text-muted, #8e8e93)',\r\n            fontSize: '18px',\r\n            fontWeight: '500'\r\n          }}>\r\n            <div style={{ marginBottom: '16px', fontSize: '48px' }}>📍</div>\r\n            אנא בחר יחידה כדי להציג את המיקומים\r\n        </div>\r\n        )}\r\n\r\n        {/* Pagination for units tab */}\r\n        {activeTab === 'units' && totalPages > 1 && (\r\n          <DashboardPagination\r\n            currentPage={currentPage}\r\n            totalPages={totalPages}\r\n            onPageChange={setCurrentPage}\r\n          />\r\n        )}\r\n\r\n      {/* User Details Table - Appears below main table when clicked */}\r\n      {tooltipData.show && (\r\n        <div className=\"dashboard-modal-card\">\r\n          <div className=\"dashboard-modal-header\">\r\n            <div className=\"dashboard-modal-header-content\">\r\n              <span className=\"dashboard-modal-icon\">👥</span>\r\n              <h5 className=\"dashboard-modal-title\">\r\n                פרטי משתמשים רשומים ({tooltipData.users.length})\r\n              </h5>\r\n            </div>\r\n            <button \r\n              type=\"button\" \r\n              onClick={handleCloseTooltip}\r\n              className=\"dashboard-modal-close-btn\"\r\n            >\r\n              ×\r\n            </button>\r\n          </div>\r\n          <div className=\"dashboard-modal-body\">\r\n            <div className=\"dashboard-modal-table-container\">\r\n              <table className=\"dashboard-modal-table\">\r\n                <thead>\r\n                  <tr>\r\n                    <th className=\"dashboard-modal-th\">שם החותם</th>\r\n                    <th className=\"dashboard-modal-th\">מיקום</th>\r\n                    <th className=\"dashboard-modal-th\">מספר צ'</th>\r\n                    <th className=\"dashboard-modal-th\">האם חתום</th>\r\n                    <th className=\"dashboard-modal-th\">הקצאה</th>\r\n                    <th className=\"dashboard-modal-th\">הערות</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  {tooltipData.users.map((user, userIndex) => \r\n                    user.items && Array.isArray(user.items) ? user.items.map((item: { itemId: string; idNumber: string | null; note: string; allocatedLocationName: string | null }, itemIndex: number) => (\r\n                      <tr \r\n                        key={`${user.id || userIndex}-${item.itemId || itemIndex}`}\r\n                        className=\"dashboard-modal-tr\"\r\n                      >\r\n                        <td className=\"dashboard-modal-td dashboard-modal-td-name\">\r\n                          {user.name}\r\n                        </td>\r\n                        <td className=\"dashboard-modal-td dashboard-modal-td-center\">\r\n                          {(user as any).location || 'N/A'}\r\n                        </td>\r\n                        <td className=\"dashboard-modal-td dashboard-modal-td-center\">\r\n                          <span className={`dashboard-modal-badge ${item.idNumber ? 'dashboard-modal-badge-primary' : 'dashboard-modal-badge-muted'}`}>\r\n                            {item.idNumber || 'ללא מספר'}\r\n                          </span>\r\n                        </td>\r\n                        <td className=\"dashboard-modal-td dashboard-modal-td-center\">\r\n                          <span className={`dashboard-modal-badge ${user.isSigned ? 'dashboard-modal-badge-success' : 'dashboard-modal-badge-danger'}`}>\r\n                            {user.isSigned ? 'כן' : 'לא'}\r\n                          </span>\r\n                        </td>\r\n                        <td className=\"dashboard-modal-td dashboard-modal-td-center\">\r\n                          <span className={`dashboard-modal-badge ${item.allocatedLocationName ? 'dashboard-modal-badge-primary' : 'dashboard-modal-badge-muted'}`}>\r\n                            {item.allocatedLocationName || 'לא הוקצה'}\r\n                          </span>\r\n                        </td>\r\n                        <td className=\"dashboard-modal-td dashboard-modal-td-center dashboard-modal-td-note\">\r\n                          {item.note || '-'}\r\n                        </td>\r\n                      </tr>\r\n                    )) : (\r\n                      <tr \r\n                        key={user.id || userIndex}\r\n                        className=\"dashboard-modal-tr\"\r\n                      >\r\n                        <td className=\"dashboard-modal-td dashboard-modal-td-name\">\r\n                          {user.name}\r\n                        </td>\r\n                        <td className=\"dashboard-modal-td dashboard-modal-td-center\">\r\n                          {(user as any).location || 'N/A'}\r\n                        </td>\r\n                        <td className=\"dashboard-modal-td dashboard-modal-td-center\">\r\n                          <span className=\"dashboard-modal-badge dashboard-modal-badge-muted\">\r\n                            ללא מספר\r\n                          </span>\r\n                        </td>\r\n                        <td className=\"dashboard-modal-td dashboard-modal-td-center\">\r\n                          <span className={`dashboard-modal-badge ${user.isSigned ? 'dashboard-modal-badge-success' : 'dashboard-modal-badge-danger'}`}>\r\n                            {user.isSigned ? 'כן' : 'לא'}\r\n                          </span>\r\n                        </td>\r\n                        <td className=\"dashboard-modal-td dashboard-modal-td-center\">\r\n                          <span className=\"dashboard-modal-badge dashboard-modal-badge-muted\">\r\n                            לא הוקצה\r\n                          </span>\r\n                        </td>\r\n                        <td className=\"dashboard-modal-td dashboard-modal-td-center dashboard-modal-td-note\">\r\n                          -\r\n                        </td>\r\n                      </tr>\r\n                    )\r\n                  ).flat()}\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n            <div className=\"dashboard-modal-footer\">\r\n              סה\"כ פריטים מוקצים: <span className=\"dashboard-modal-total\">\r\n                {tooltipData.users.reduce((sum, user) => sum + (user.items?.length || 1), 0)}\r\n              </span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Dashboard;\r\n","import { useState, useEffect, useCallback } from 'react';\r\nimport { reportService } from '../services';\r\nimport { \r\n  UserDashboardData, \r\n  UserDashboardResponse \r\n} from '../types';\r\n\r\ninterface UseUserDashboardReturn {\r\n  data: UserDashboardData | null;\r\n  loading: boolean;\r\n  error: string | null;\r\n  refetch: () => Promise<void>;\r\n}\r\n\r\nexport const useUserDashboard = (): UseUserDashboardReturn => {\r\n  const [data, setData] = useState<UserDashboardData | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  const fetchUserDashboard = useCallback(async () => {\r\n    try {\r\n      setLoading(true);\r\n      setError(null);\r\n      \r\n      const response: UserDashboardResponse = await reportService.getUserDashboard();\r\n      \r\n      if (response.success) {\r\n        setData(response.data);\r\n      } else {\r\n        setError('Failed to fetch user dashboard data');\r\n        setData(null);\r\n      }\r\n    } catch (err: any) {\r\n      console.error('Error fetching user dashboard:', err);\r\n      \r\n      // Handle specific error cases\r\n      if (err?.response?.status === 403) {\r\n        setError('Access denied. This dashboard is for regular users only.');\r\n      } else if (err?.response?.status === 401) {\r\n        setError('Authentication required. Please log in.');\r\n      } else {\r\n        setError(err?.message || 'An unexpected error occurred while loading your dashboard');\r\n      }\r\n      \r\n      setData(null);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, []);\r\n\r\n  // Initial fetch\r\n  useEffect(() => {\r\n    fetchUserDashboard();\r\n  }, [fetchUserDashboard]);\r\n\r\n  const refetch = useCallback(() => {\r\n    return fetchUserDashboard();\r\n  }, [fetchUserDashboard]);\r\n\r\n  return {\r\n    data,\r\n    loading,\r\n    error,\r\n    refetch\r\n  };\r\n};\r\n","import React, { useState, useEffect } from 'react';\nimport { ServerError, SmartPagination, NotificationModal } from '../../shared/components';\nimport { useDailyReportHistory } from '../../hooks';\nimport { DailyReportHistoryItem } from '../../types';\nimport { reportService } from '../../services';\nimport { NotificationType } from '../../shared/components/NotificationModal';\n\ninterface DailyReportHistoryProps {\n  userProfile: any;\n  isAdmin: boolean;\n}\n\nconst DailyReportHistory: React.FC<DailyReportHistoryProps> = ({ isAdmin }) => {\n  const { history, loading, error, fetchHistory } = useDailyReportHistory();\n  const [currentPage, setCurrentPage] = useState(1);\n  const [downloadingId, setDownloadingId] = useState<string | null>(null);\n  const [sortConfig, setSortConfig] = useState<{\n    key: string;\n    direction: 'asc' | 'desc';\n  } | null>({ key: 'createdAt', direction: 'desc' });\n  const [notification, setNotification] = useState<{\n    isOpen: boolean;\n    message: string;\n    type: NotificationType;\n  }>({\n    isOpen: false,\n    message: '',\n    type: 'error',\n  });\n\n  useEffect(() => {\n    if (isAdmin) {\n      fetchHistory(currentPage, 10);\n    }\n  }, [currentPage, isAdmin, fetchHistory]); // Now safe to include fetchHistory since it's wrapped with useCallback\n\n  const handleSort = (key: string) => {\n    let direction: 'asc' | 'desc' = 'asc';\n    if (sortConfig && sortConfig.key === key && sortConfig.direction === 'asc') {\n      direction = 'desc';\n    }\n    setSortConfig({ key, direction });\n  };\n\n  const formatDateWithTime = (dateString: string): string => {\n    if (!dateString) {\n      return 'תאריך לא זמין';\n    }\n    \n    const date = new Date(dateString);\n    if (isNaN(date.getTime())) {\n      return 'תאריך לא תקין';\n    }\n    \n    return date.toLocaleDateString('he-IL', {\n      year: 'numeric',\n      month: '2-digit',\n      day: '2-digit',\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  };\n\n  const handleDownloadPDF = async (reportItem: DailyReportHistoryItem) => {\n    try {\n      setDownloadingId(reportItem.id);\n      \n      // Use the report service to download the PDF\n      const blob = await reportService.downloadReportPDF(reportItem.id);\n      \n      // Create download link with a more descriptive filename\n      const url = window.URL.createObjectURL(blob);\n      const link = document.createElement('a');\n      link.href = url;\n      \n      // Create a more descriptive filename with date\n      const reportDate = new Date(reportItem.createdAt);\n      const dateStr = reportDate.toLocaleDateString('he-IL').replace(/\\//g, '-');\n      link.download = `דוח-צ'-${dateStr}.pdf`;\n      \n      document.body.appendChild(link);\n      link.click();\n      \n      // Clean up\n      document.body.removeChild(link);\n      window.URL.revokeObjectURL(url);\n      \n    } catch (error: any) {\n      console.error('Error downloading PDF:', error);\n      \n      // Handle axios error responses\n      if (error.response) {\n        const status = error.response.status;\n        let errorMessage = 'שגיאה בהורדת הדוח';\n        \n        if (status === 404) {\n          errorMessage = 'דוח לא נמצא במערכת';\n        } else if (status === 401 || status === 403) {\n          errorMessage = 'אין הרשאה להורדת הדוח - נדרשות הרשאות מנהל';\n        } else if (status === 500) {\n          errorMessage = 'שגיאה פנימית בשרת בעת יצירת הדוח';\n        }\n        \n        setNotification({\n          isOpen: true,\n          message: errorMessage,\n          type: 'error',\n        });\n      } else if (error.code === 'ECONNABORTED' || error.message?.includes('timeout')) {\n        setNotification({\n          isOpen: true,\n          message: 'פג הזמן הקצוב לחיבור - הדוח עשוי להיות גדול מדי',\n          type: 'error',\n        });\n      } else if (error.message?.includes('Network Error')) {\n        setNotification({\n          isOpen: true,\n          message: 'שגיאה בחיבור לשרת - אנא בדוק את החיבור לאינטרנט',\n          type: 'error',\n        });\n      } else {\n        setNotification({\n          isOpen: true,\n          message: 'שגיאה לא צפויה בהורדת הקובץ',\n          type: 'error',\n        });\n      }\n    } finally {\n      setDownloadingId(null);\n    }\n  };\n\n  // Sort history items\n  const sortedHistory = history?.reports ? [...history.reports].sort((a, b) => {\n    if (!sortConfig) return 0;\n\n    let aValue: any;\n    let bValue: any;\n\n    switch (sortConfig.key) {\n      case 'createdAt':\n        aValue = new Date(a.createdAt);\n        bValue = new Date(b.createdAt);\n        // Handle invalid dates\n        if (isNaN(aValue.getTime())) aValue = new Date(0);\n        if (isNaN(bValue.getTime())) bValue = new Date(0);\n        break;\n      case 'totalItems':\n        aValue = a.totalItems;\n        bValue = b.totalItems;\n        break;\n      case 'reportedItems':\n        aValue = a.reportedItems;\n        bValue = b.reportedItems;\n        break;\n      case 'completionPercentage':\n        aValue = a.totalItems > 0 ? (a.reportedItems / a.totalItems) * 100 : 0;\n        bValue = b.totalItems > 0 ? (b.reportedItems / b.totalItems) * 100 : 0;\n        break;\n      case 'isCompleted':\n        aValue = a.isCompleted ? 1 : 0;\n        bValue = b.isCompleted ? 1 : 0;\n        break;\n      default:\n        return 0;\n    }\n\n    if (sortConfig.direction === 'asc') {\n      return aValue < bValue ? -1 : aValue > bValue ? 1 : 0;\n    } else {\n      return aValue > bValue ? -1 : aValue < bValue ? 1 : 0;\n    }\n  }) : [];\n\n  if (!isAdmin) {\n    return (\n      <div className=\"alert alert-warning\" style={{ backgroundColor: '#fef3c7', color: '#92400e', border: '1px solid #f59e0b' }}>\n        <i className=\"fas fa-exclamation-triangle me-2\"></i>\n        רק מנהלים יכולים לצפות בהיסטוריית הדוחות היומיים\n      </div>\n    );\n  }\n\n  if (loading) {\n    return (\n      <div className=\"unified-table-container\">\n        <div style={{ padding: '40px', textAlign: 'center' }}>\n          <div className=\"spinner\" style={{ marginBottom: '16px' }}></div>\n          <span style={{ color: '#e9ecef', fontSize: '16px' }}>טוען נתונים...</span>\n        </div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return <ServerError />;\n  }\n\n  if (!history || !history.reports?.length) {\n    return (\n      <div className=\"unified-table-container\">\n        <div style={{ padding: '60px 24px', textAlign: 'center' }}>\n          <i className=\"fas fa-calendar-alt\" style={{ fontSize: '48px', color: 'var(--color-text-muted)', marginBottom: '24px', display: 'block' }}></i>\n          <h4 style={{ color: 'var(--color-text)', marginBottom: '12px', fontSize: '20px' }}>אין דוחות להצגה</h4>\n          <p style={{ color: 'var(--color-text-muted)', fontSize: '14px', margin: 0 }}>עדיין לא נוצרו דוחות יומיים במערכת</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div style={{ marginBottom: '24px' }}>\n      \n      {/* Main table container with improved design */}\n      <div className=\"unified-table-container\" style={{ marginTop: '0' }}>\n        <table className=\"unified-table\">\n          <thead>\n            <tr>\n              <th \n                className=\"unified-table-header unified-table-header-regular sortable text-center\"\n                onClick={() => handleSort('createdAt')}\n                title=\"לחץ למיון לפי תאריך דוח\"\n                data-sorted={sortConfig?.key === 'createdAt' ? 'true' : 'false'}\n                style={{ color: 'var(--color-text)', padding: '12px 8px' }}\n              >\n                <div className=\"d-flex align-items-center justify-content-center\">\n                  <i className=\"fas fa-calendar-day me-2\" style={{ fontSize: '13px' }}></i>\n                  <span style={{ fontSize: '13px', fontWeight: '600' }}>תאריך דוח</span>\n                  {sortConfig?.key === 'createdAt' && (\n                    <i className={`fas fa-sort-${sortConfig.direction === 'asc' ? 'up' : 'down'} ms-2`} style={{ fontSize: '11px' }}></i>\n                  )}\n                </div>\n              </th>\n              <th className=\"unified-table-header unified-table-header-regular text-center\" style={{ color: 'var(--color-text)', padding: '12px 8px' }}>\n                <div className=\"d-flex align-items-center justify-content-center\">\n                  <i className=\"fas fa-user-plus me-2\" style={{ fontSize: '13px' }}></i>\n                  <span style={{ fontSize: '13px', fontWeight: '600' }}>נוצר על ידי</span>\n                </div>\n              </th>\n              <th className=\"unified-table-header unified-table-header-regular text-center\" style={{ color: 'var(--color-text)', padding: '12px 8px' }}>\n                <div className=\"d-flex align-items-center justify-content-center\">\n                  <i className=\"fas fa-user-check me-2\" style={{ fontSize: '13px' }}></i>\n                  <span style={{ fontSize: '13px', fontWeight: '600' }}>הושלם על ידי</span>\n                </div>\n              </th>\n              <th \n                className=\"unified-table-header unified-table-header-regular sortable text-center\"\n                onClick={() => handleSort('totalItems')}\n                title=\"לחץ למיון לפי סהכ פריטים\"\n                data-sorted={sortConfig?.key === 'totalItems' ? 'true' : 'false'}\n                style={{ color: 'var(--color-text)', padding: '12px 8px' }}\n              >\n                <div className=\"d-flex align-items-center justify-content-center\">\n                  <i className=\"fas fa-boxes me-2\" style={{ fontSize: '13px' }}></i>\n                  <span style={{ fontSize: '13px', fontWeight: '600' }}>סה\"כ פריטים</span>\n                  {sortConfig?.key === 'totalItems' && (\n                    <i className={`fas fa-sort-${sortConfig.direction === 'asc' ? 'up' : 'down'} ms-2`} style={{ fontSize: '11px' }}></i>\n                  )}\n                </div>\n              </th>\n              <th className=\"unified-table-header unified-table-header-regular text-center\" style={{ width: '120px', color: 'var(--color-text)', padding: '12px 8px' }}>\n                <div className=\"d-flex align-items-center justify-content-center\">\n                  <i className=\"fas fa-download me-2\" style={{ fontSize: '13px' }}></i>\n                  <span style={{ fontSize: '13px', fontWeight: '600' }}>הורדה</span>\n                </div>\n              </th>\n            </tr>\n          </thead>\n          <tbody>\n            {sortedHistory.map(report => {\n              return (\n                <tr key={report.id} className=\"unified-table-row\" style={{ transition: 'all 0.2s ease' }}>\n                  <td className=\"unified-table-cell text-center\" style={{ color: 'var(--color-text)', padding: '12px 8px' }}>\n                    <div style={{ fontSize: '13px', fontWeight: '500' }}>\n                      {formatDateWithTime(report.createdAt)}\n                    </div>\n                  </td>\n                  <td className=\"unified-table-cell text-center\" style={{ color: 'var(--color-text)', padding: '12px 8px' }}>\n                    <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'center', gap: '6px' }}>\n                      <div style={{ \n                        width: '24px', \n                        height: '24px', \n                        borderRadius: '50%', \n                        background: 'linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%)',\n                        display: 'flex',\n                        alignItems: 'center',\n                        justifyContent: 'center'\n                      }}>\n                        <i className=\"fas fa-user\" style={{ color: '#ffffff', fontSize: '10px' }}></i>\n                      </div>\n                      <span style={{ fontSize: '13px' }}>{report.createdBy.name}</span>\n                    </div>\n                  </td>\n                  <td className=\"unified-table-cell text-center\" style={{ color: 'var(--color-text)', padding: '12px 8px' }}>\n                    {report.completedBy ? (\n                      <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'center', gap: '6px' }}>\n                        <div style={{ \n                          width: '24px', \n                          height: '24px', \n                          borderRadius: '50%', \n                          background: 'linear-gradient(135deg, #10b981 0%, #059669 100%)',\n                          display: 'flex',\n                          alignItems: 'center',\n                          justifyContent: 'center'\n                        }}>\n                          <i className=\"fas fa-check\" style={{ color: '#ffffff', fontSize: '10px' }}></i>\n                        </div>\n                        <span style={{ fontSize: '13px' }}>{report.completedBy.name}</span>\n                      </div>\n                    ) : (\n                      <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'center', gap: '6px' }}>\n                        <div style={{ \n                          width: '24px', \n                          height: '24px', \n                          borderRadius: '50%', \n                          background: '#6b7280',\n                          display: 'flex',\n                          alignItems: 'center',\n                          justifyContent: 'center'\n                        }}>\n                          <i className=\"fas fa-minus\" style={{ color: '#ffffff', fontSize: '10px' }}></i>\n                        </div>\n                        <span style={{ color: 'var(--color-text-muted)', fontSize: '13px' }}>לא הושלם</span>\n                      </div>\n                    )}\n                  </td>\n                  <td className=\"unified-table-cell text-center\" style={{ padding: '12px 8px' }}>\n                    <span \n                      className=\"unified-badge unified-badge-primary\" \n                      style={{ \n                        background: 'linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%)',\n                        padding: '4px 10px',\n                        fontSize: '12px',\n                        fontWeight: '600',\n                        borderRadius: '6px',\n                        boxShadow: '0 2px 4px rgba(59, 130, 246, 0.3)'\n                      }}\n                    >\n                      {report.totalItems}\n                    </span>\n                  </td>\n                  <td className=\"unified-table-cell text-center\" style={{ padding: '12px 8px' }}>\n                    <button\n                      className=\"btn btn-info unified-action-btn\"\n                      onClick={() => handleDownloadPDF(report)}\n                      disabled={downloadingId === report.id}\n                      title=\"הורד PDF\"\n                    >\n                      {downloadingId === report.id ? (\n                        <>\n                          <i className=\"fas fa-spinner fa-spin\"></i>\n                          מוריד...\n                        </>\n                      ) : (\n                        <>\n                          <i className=\"fas fa-download\"></i>\n                          הורד PDF\n                        </>\n                      )}\n                    </button>\n                  </td>\n                </tr>\n              );\n            })}\n          </tbody>\n        </table>\n      </div>\n\n      {/* Pagination */}\n      {(history.pagination?.pages || 0) > 1 && (\n        <div style={{ marginTop: '24px' }}>\n          <SmartPagination\n            currentPage={currentPage}\n            totalPages={history.pagination?.pages || 1}\n            onPageChange={setCurrentPage}\n          />\n        </div>\n      )}\n\n      {/* Notification Modal */}\n      <NotificationModal\n        isOpen={notification.isOpen}\n        onClose={() => setNotification({ isOpen: false, message: '', type: 'error' })}\n        message={notification.message}\n        type={notification.type}\n      />\n    </div>\n  );\n};\n\nexport default DailyReportHistory;\n","import React, { useState, useEffect, useRef } from 'react';\r\nimport { ServerError, SmartPagination, ErrorNotificationModal, TabNavigation, LoadingSpinner, SearchInput } from '../../shared/components';\r\nimport { useDailyReports } from '../../hooks';\r\nimport { getCurrentDate, paginate } from '../../utils';\r\nimport { User } from '../../types';\r\nimport { UI_CONFIG } from '../../config/app.config';\r\nimport DailyReportHistory from './DailyReportHistory';\r\nimport './DailyReport.css';\r\n\r\ninterface DailyReportProps {\r\n  userProfile: User | null;\r\n  isAdmin: boolean;\r\n}\r\n\r\ntype ReportTab = 'current' | 'history' | 'users-status';\r\n\r\nconst DailyReport: React.FC<DailyReportProps> = ({ userProfile, isAdmin }) => {\r\n  const [activeReportTab, setActiveReportTab] = useState<ReportTab>('current');\r\n  const { dailyReportData, loading, error, updateDailyReport, completeDailyReport, toggleReportStatus, setReportStatusBulk, updateItemNotes } = useDailyReports();\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [sortConfig, setSortConfig] = useState<{\r\n    key: string;\r\n    direction: 'asc' | 'desc';\r\n  } | null>(null);\r\n  const [completing, setCompleting] = useState(false);\r\n  const headerCheckboxRef = useRef<HTMLInputElement>(null);\r\n  const [errorModal, setErrorModal] = useState<{\r\n    isOpen: boolean;\r\n    title: string;\r\n    message: string;\r\n  }>({\r\n    isOpen: false,\r\n    title: '',\r\n    message: ''\r\n  });\r\n\r\n  // If not admin, hide history tab\r\n  const availableReportTabs = isAdmin \r\n    ? [\r\n        { \r\n          id: 'current', \r\n          label: 'דוח נוכחי', \r\n          icon: (\r\n            <svg viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n              <path d=\"M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z\"/>\r\n            </svg>\r\n          )\r\n        },\r\n        { \r\n          id: 'history', \r\n          label: 'היסטוריית דוחות', \r\n          icon: (\r\n            <svg viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n              <path d=\"M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9zm-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8H12z\"/>\r\n            </svg>\r\n          )\r\n        },\r\n        {\r\n          id: 'users-status',\r\n          label: 'סטטוס משתמשים',\r\n          icon: (\r\n            <svg viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n              <path d=\"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5s-3 1.34-3 3 1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5s-3 1.34-3 3 1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05C15.64 13.36 17 14.28 17 15.5V19h6v-2.5c0-2.22-4.36-3.5-7-3.5z\"/>\r\n            </svg>\r\n          )\r\n        }\r\n      ]\r\n    : [\r\n        { \r\n          id: 'current', \r\n          label: 'דוח נוכחי', \r\n          icon: (\r\n            <svg viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n              <path d=\"M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z\"/>\r\n            </svg>\r\n          )\r\n        }\r\n      ];\r\n\r\n  const handleTabChange = (tabId: string) => {\r\n    setActiveReportTab(tabId as ReportTab);\r\n  };\r\n\r\n  const handleSort = (key: string) => {\r\n    let direction: 'asc' | 'desc' = 'asc';\r\n    if (sortConfig && sortConfig.key === key && sortConfig.direction === 'asc') {\r\n      direction = 'desc';\r\n    }\r\n    setSortConfig({ key, direction });\r\n  };\r\n\r\n  // Sort items based on sort config\r\n  const sortedReportItems = (() => {\r\n    if (!dailyReportData || !dailyReportData.items) return [];\r\n    \r\n    // Role-based filtering: users see only their items, admins see all\r\n    let filteredItems = dailyReportData.items;\r\n    if (!isAdmin && userProfile) {\r\n      // Note: Need to add user filtering logic based on the new data structure\r\n      // For now, showing all items as the server should handle the filtering\r\n    }\r\n\r\n    // Apply search filter\r\n    if (searchTerm.trim()) {\r\n      const searchLower = searchTerm.toLowerCase().trim().normalize('NFC');\r\n      filteredItems = filteredItems.filter(item => \r\n        (item.itemName?.toLowerCase().normalize('NFC') || '').includes(searchLower) ||\r\n        (item.idNumber?.toLowerCase().normalize('NFC') || '').includes(searchLower) ||\r\n        (item.signedBy?.name?.toLowerCase().normalize('NFC') || '').includes(searchLower) ||\r\n        (item.signedBy?.location?.name?.toLowerCase().normalize('NFC') || '').includes(searchLower) ||\r\n        (item.reportedBy?.name?.toLowerCase().normalize('NFC') || '').includes(searchLower) ||\r\n        (item.reportNotes?.toLowerCase().normalize('NFC') || '').includes(searchLower)\r\n      );\r\n    }\r\n\r\n    if (!sortConfig) return filteredItems;\r\n\r\n    return [...filteredItems].sort((a, b) => {\r\n      let aValue: any;\r\n      let bValue: any;\r\n\r\n      switch (sortConfig.key) {\r\n        case 'itemName':\r\n          aValue = a.itemName;\r\n          bValue = b.itemName;\r\n          break;\r\n        case 'idNumber':\r\n          aValue = a.idNumber || '';\r\n          bValue = b.idNumber || '';\r\n          break;\r\n        case 'isReported':\r\n          aValue = a.isReported ? 1 : 0;\r\n          bValue = b.isReported ? 1 : 0;\r\n          break;\r\n        case 'reportedAt':\r\n          aValue = a.reportedAt ? new Date(a.reportedAt) : new Date(0);\r\n          bValue = b.reportedAt ? new Date(b.reportedAt) : new Date(0);\r\n          break;\r\n        case 'reportedBy':\r\n          aValue = a.reportedBy?.name || '';\r\n          bValue = b.reportedBy?.name || '';\r\n          break;\r\n        case 'signedBy':\r\n          aValue = a.signedBy?.name || '';\r\n          bValue = b.signedBy?.name || '';\r\n          break;\r\n        case 'location':\r\n          aValue = a.signedBy?.location?.name || '';\r\n          bValue = b.signedBy?.location?.name || '';\r\n          break;\r\n        default:\r\n          return 0;\r\n      }\r\n\r\n      if (typeof aValue === 'string' && typeof bValue === 'string') {\r\n        return sortConfig.direction === 'asc' \r\n          ? aValue.localeCompare(bValue, 'he') \r\n          : bValue.localeCompare(aValue, 'he');\r\n      }\r\n\r\n      if (sortConfig.direction === 'asc') {\r\n        return aValue < bValue ? -1 : aValue > bValue ? 1 : 0;\r\n      } else {\r\n        return aValue > bValue ? -1 : aValue < bValue ? 1 : 0;\r\n      }\r\n    });\r\n  })();\r\n\r\n  // Get paginated items for display\r\n  const { paginatedItems, totalPages } = paginate(sortedReportItems, currentPage, UI_CONFIG.TABLE_PAGE_SIZE);\r\n\r\n  const handleCheckboxChange = (id: string) => {\r\n    toggleReportStatus(id);\r\n  };\r\n\r\n  // Header checkbox (tri-state) to set all across ALL pages (filtered set)\r\n  const handleHeaderCheckboxChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const allIds = sortedReportItems.map(i => i.id);\r\n    setReportStatusBulk(allIds, e.target.checked);\r\n  };\r\n\r\n  // Keep header checkbox state in sync (checked/indeterminate) across ALL pages\r\n  useEffect(() => {\r\n    if (!headerCheckboxRef.current) return;\r\n    const total = sortedReportItems.length;\r\n    const checkedCount = sortedReportItems.filter(i => i.isReported).length;\r\n    headerCheckboxRef.current.indeterminate = checkedCount > 0 && checkedCount < total;\r\n    headerCheckboxRef.current.checked = total > 0 && checkedCount === total;\r\n  }, [sortedReportItems]);\r\n\r\n  const handleSubmitReport = async () => {\r\n    if (!dailyReportData) return;\r\n\r\n    // Convert current state to new API format\r\n    const reportItems = sortedReportItems\r\n      .filter(item => item.isReported) // Only send reported items\r\n      .map(item => ({\r\n        itemId: item.id, // Use item.id as itemId for the API\r\n        notes: item.reportNotes || undefined,\r\n      }));\r\n\r\n    const success = await updateDailyReport('', { reportItems }); // ID not needed in new API\r\n    \r\n    if (!success) {\r\n      setErrorModal({\r\n        isOpen: true,\r\n        title: 'שגיאה בעדכון דיווח',\r\n        message: 'אירעה שגיאה בעת עדכון הדיווח. אנא נסה שוב.'\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleCompleteReport = async () => {\r\n    if (!dailyReportData || !isAdmin) return;\r\n\r\n    setCompleting(true);\r\n    try {\r\n      // First save current changes\r\n      const reportItems = sortedReportItems\r\n        .filter(item => item.isReported) // Only send reported items\r\n        .map(item => ({\r\n          itemId: item.id, // Use item.id as itemId for the API\r\n          notes: item.reportNotes || undefined,\r\n        }));\r\n\r\n      await updateDailyReport('', { reportItems }); // Save current state\r\n\r\n      // Then complete the report cycle\r\n      const success = await completeDailyReport();\r\n\r\n      if (!success) {\r\n        setErrorModal({\r\n          isOpen: true,\r\n          title: 'שגיאה בהשלמת הדוח',\r\n          message: 'אירעה שגיאה בעת השלמת הדוח. אנא נסה שוב.'\r\n        });\r\n      }\r\n    } finally {\r\n      setCompleting(false);\r\n    }\r\n  };\r\n\r\n  // Calculate reporting percentage for all users (admin sees all, users see only their items)\r\n  const getReportingStats = () => {\r\n    // Use the raw dailyReportData items for calculation, not filtered by search\r\n    const allItems = dailyReportData?.items || [];\r\n    \r\n    if (allItems.length === 0) return { percentage: 0, reported: 0, total: 0 };\r\n    \r\n    const reportedCount = allItems.filter(item => item.isReported).length;\r\n    const percentage = Math.round((reportedCount / allItems.length) * 100);\r\n    \r\n    return {\r\n      percentage,\r\n      reported: reportedCount,\r\n      total: allItems.length\r\n    };\r\n  };\r\n\r\n  const reportingStats = getReportingStats();\r\n\r\n  // Check if all items are reported (for completion validation)\r\n  const allItemsReported = sortedReportItems.length > 0 && sortedReportItems.every(item => item.isReported);\r\n\r\n  // Prepare users status data for the tab\r\n  const getUsersStatusData = () => {\r\n    if (!isAdmin || !dailyReportData?.items) return [];\r\n    \r\n    const items = dailyReportData.items;\r\n    const userStats: Record<string, { id: string; name: string; total: number; reported: number; percentage: number }> = {};\r\n    \r\n    items.forEach(item => {\r\n      const user = item.signedBy;\r\n      if (!user || !user.id) return;\r\n      if (!userStats[user.id]) {\r\n        userStats[user.id] = {\r\n          id: user.id,\r\n          name: user.name || user.id,\r\n          total: 0,\r\n          reported: 0,\r\n          percentage: 0\r\n        };\r\n      }\r\n      userStats[user.id].total += 1;\r\n      if (item.isReported) userStats[user.id].reported += 1;\r\n    });\r\n    \r\n    // Calculate percentage for each user\r\n    Object.values(userStats).forEach(stat => {\r\n      stat.percentage = stat.total > 0 ? Math.round((stat.reported / stat.total) * 100) : 0;\r\n    });\r\n    \r\n    return Object.values(userStats);\r\n  };\r\n\r\n  // Get users data and apply search/sort for users status tab\r\n  const usersData = getUsersStatusData();\r\n  \r\n  // Apply search filter for users\r\n  const filteredUsersData = usersData.filter(user => {\r\n    if (!searchTerm.trim()) return true;\r\n    const searchLower = searchTerm.toLowerCase().trim().normalize('NFC');\r\n    return user.name.toLowerCase().normalize('NFC').includes(searchLower);\r\n  });\r\n\r\n  // Sort users data based on sort config\r\n  const sortedUsersData = (() => {\r\n    if (!sortConfig || activeReportTab !== 'users-status') return filteredUsersData;\r\n\r\n    return [...filteredUsersData].sort((a, b) => {\r\n      let aValue: any;\r\n      let bValue: any;\r\n\r\n      switch (sortConfig.key) {\r\n        case 'userName':\r\n          aValue = a.name;\r\n          bValue = b.name;\r\n          break;\r\n        case 'totalItems':\r\n          aValue = a.total;\r\n          bValue = b.total;\r\n          break;\r\n        case 'reportedItems':\r\n          aValue = a.reported;\r\n          bValue = b.reported;\r\n          break;\r\n        case 'percentage':\r\n          aValue = a.percentage;\r\n          bValue = b.percentage;\r\n          break;\r\n        default:\r\n          return 0;\r\n      }\r\n\r\n      if (typeof aValue === 'string' && typeof bValue === 'string') {\r\n        return sortConfig.direction === 'asc' \r\n          ? aValue.localeCompare(bValue, 'he') \r\n          : bValue.localeCompare(aValue, 'he');\r\n      }\r\n\r\n      if (sortConfig.direction === 'asc') {\r\n        return aValue < bValue ? -1 : aValue > bValue ? 1 : 0;\r\n      } else {\r\n        return aValue > bValue ? -1 : aValue < bValue ? 1 : 0;\r\n      }\r\n    });\r\n  })();\r\n\r\n  // Get paginated users for display\r\n  const { paginatedItems: paginatedUsers, totalPages: usersTotalPages } = paginate(sortedUsersData, currentPage, UI_CONFIG.TABLE_PAGE_SIZE);\r\n\r\n  // Check if user has a location assigned\r\n  if (userProfile && !userProfile.location) {\r\n    return (\r\n      <div className=\"card\">\r\n        <div className=\"card-header\">\r\n          <h2 className=\"mb-0\">דוח יומי</h2>\r\n        </div>\r\n        <div className=\"card-body\">\r\n          <div className=\"alert alert-warning\">\r\n            <h4>אין לך גישה למערכת</h4>\r\n            <p>המשתמש שלך לא שוייך למיקום. אנא פנה למנהל המערכת כדי לשייך אותך למיקום.</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (loading) {\r\n    return (\r\n      <div>\r\n        {/* Tab Navigation */}\r\n        <TabNavigation\r\n          tabs={availableReportTabs}\r\n          activeTab={activeReportTab}\r\n          onTabChange={handleTabChange}\r\n          variant=\"primary\"\r\n          size=\"md\"\r\n        />\r\n        \r\n        <LoadingSpinner message=\"טוען נתוני דוח יומי...\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <div>\r\n        {/* Tab Navigation */}\r\n        <TabNavigation\r\n          tabs={availableReportTabs}\r\n          activeTab={activeReportTab}\r\n          onTabChange={handleTabChange}\r\n          variant=\"primary\"\r\n          size=\"md\"\r\n        />\r\n        <ServerError />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"page-container\">\r\n      {/* Tab Navigation */}\r\n      <TabNavigation\r\n        tabs={availableReportTabs}\r\n        activeTab={activeReportTab}\r\n        onTabChange={handleTabChange}\r\n        variant=\"primary\"\r\n        size=\"md\"\r\n      />\r\n\r\n      {activeReportTab === 'current' && (\r\n        <div className=\"daily-report-container\">\r\n          {/* Handle case when no daily report exists or report has no items */}\r\n          {(!dailyReportData || !dailyReportData.items || dailyReportData.items.length === 0) ? (\r\n            <div className=\"daily-report-empty-state\">\r\n              <div className=\"daily-report-empty-icon\">\r\n                <i className=\"fas fa-clipboard-check\"></i>\r\n              </div>\r\n              <h3 className=\"daily-report-empty-title\">\r\n                אין פריטים לדיווח\r\n              </h3>\r\n              <p className=\"daily-report-empty-description\">\r\n                כרגע אין פריטים הדורשים דיווח או שהם כבר דווחו.\r\n                הפריטים מתעדכנים אוטומטית כאשר יש צורך בדיווח.\r\n              </p>\r\n            </div>\r\n          ) : (\r\n            <>\r\n              {/* Progress Card Section */}\r\n              <div className=\"daily-report-progress-card\">\r\n                <div className=\"daily-report-progress-header\">\r\n                  <div className=\"daily-report-progress-info\">\r\n                    <div className=\"daily-report-progress-icon\">\r\n                      <i className=\"fas fa-chart-line\"></i>\r\n                    </div>\r\n                    <div>\r\n                      <h3 className=\"daily-report-progress-title\">\r\n                        {isAdmin ? 'סטטוס דיווח יומי' : 'הדיווח שלי היום'}\r\n                      </h3>\r\n                      <p className=\"daily-report-progress-date\">\r\n                        {getCurrentDate()}\r\n                      </p>\r\n                    </div>\r\n                  </div>\r\n                  \r\n                  <div className={`daily-report-progress-badge ${\r\n                    reportingStats.percentage === 100 ? 'success' :\r\n                    reportingStats.percentage >= 70 ? 'warning' : 'danger'\r\n                  }`}>\r\n                    {reportingStats.total} / {reportingStats.reported}\r\n                  </div>\r\n                </div>\r\n                \r\n                <div className=\"daily-report-progress-bar\">\r\n                  <div \r\n                    className={`daily-report-progress-fill ${\r\n                      reportingStats.percentage === 100 ? 'success' :\r\n                      reportingStats.percentage >= 70 ? 'warning' : 'danger'\r\n                    }`}\r\n                    style={{ width: `${reportingStats.percentage}%` }}\r\n                  >\r\n                  </div>\r\n                </div>\r\n                \r\n                <div className=\"daily-report-progress-footer\">\r\n                  <div className=\"daily-report-progress-percentage\">\r\n                    {reportingStats.percentage.toFixed(1)}% הושלם\r\n                  </div>\r\n                  <div className=\"daily-report-progress-status\">\r\n                    {reportingStats.percentage === 100 ? (\r\n                      <>\r\n                        <i className=\"fas fa-check-circle daily-report-progress-status-icon success\"></i>\r\n                        <span className=\"daily-report-progress-status-text success\">מוכן להשלמה</span>\r\n                      </>\r\n                    ) : (\r\n                      <>\r\n                        <i className=\"fas fa-clock daily-report-progress-status-icon warning\"></i>\r\n                        <span className=\"daily-report-progress-status-text\">נותרו {reportingStats.total - reportingStats.reported} פריטים</span>\r\n                      </>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Search Input */}\r\n              <SearchInput\r\n                value={searchTerm}\r\n                onChange={(value) => {\r\n                  setSearchTerm(value);\r\n                  setCurrentPage(1);\r\n                }}\r\n                placeholder=\"חיפוש לפי שם פריט, מספר צ', חתימה, מיקום, מי דיווח או הערות...\"\r\n                resultsCount={sortedReportItems.length}\r\n                resultsLabel=\"תוצאות\"\r\n              />\r\n\r\n              {/* Table Section */}\r\n              <div className=\"daily-report-table-section\">\r\n                <div className=\"unified-table-container\">\r\n                  <div style={{ overflowX: 'auto' }}>\r\n                  <table className=\"unified-table\">\r\n                    <thead>\r\n                      <tr>\r\n                        <th \r\n                          className=\"unified-table-header unified-table-header-regular sortable\"\r\n                          onClick={() => handleSort('itemName')}\r\n                          title=\"לחץ למיון לפי שם פריט\"\r\n                          data-sorted={sortConfig?.key === 'itemName' ? 'true' : 'false'}\r\n                        >\r\n                          <div style={{ display: 'flex', alignItems: 'center' }}>\r\n                            <span>פריט</span>\r\n                          </div>\r\n                        </th>\r\n                        <th \r\n                          className=\"unified-table-header unified-table-header-regular sortable\"\r\n                          onClick={() => handleSort('idNumber')}\r\n                          title=\"לחץ למיון לפי מספר צ'\"\r\n                          data-sorted={sortConfig?.key === 'idNumber' ? 'true' : 'false'}\r\n                        >\r\n                          <div style={{ display: 'flex', alignItems: 'center' }}>\r\n                            <span>מספר צ'</span>\r\n                          </div>\r\n                        </th>\r\n                        <th \r\n                          className=\"unified-table-header unified-table-header-regular sortable\"\r\n                          onClick={() => handleSort('signedBy')}\r\n                          title=\"לחץ למיון לפי מי חתם על הפריט\"\r\n                          data-sorted={sortConfig?.key === 'signedBy' ? 'true' : 'false'}\r\n                        >\r\n                          <div style={{ display: 'flex', alignItems: 'center' }}>\r\n                            <span>חתום על ידי</span>\r\n                          </div>\r\n                        </th>\r\n                        <th \r\n                          className=\"unified-table-header unified-table-header-regular sortable\"\r\n                          onClick={() => handleSort('location')}\r\n                          title=\"לחץ למיון לפי מיקום\"\r\n                          data-sorted={sortConfig?.key === 'location' ? 'true' : 'false'}\r\n                        >\r\n                          <div style={{ display: 'flex', alignItems: 'center' }}>\r\n                            <span>מיקום</span>\r\n                          </div>\r\n                        </th>\r\n                        <th \r\n                          className=\"unified-table-header unified-table-header-regular sortable\"\r\n                          onClick={() => handleSort('reportedAt')}\r\n                          title=\"לחץ למיון לפי תאריך דיווח\"\r\n                          data-sorted={sortConfig?.key === 'reportedAt' ? 'true' : 'false'}\r\n                        >\r\n                          <div style={{ display: 'flex', alignItems: 'center' }}>\r\n                            <span>תאריך דיווח</span>\r\n                          </div>\r\n                        </th>\r\n                        <th \r\n                          className=\"unified-table-header unified-table-header-regular sortable\"\r\n                          onClick={() => handleSort('reportedBy')}\r\n                          title=\"לחץ למיון לפי מי דיווח\"\r\n                          data-sorted={sortConfig?.key === 'reportedBy' ? 'true' : 'false'}\r\n                        >\r\n                          <div style={{ display: 'flex', alignItems: 'center' }}>\r\n                            <span>מי דיווח</span>\r\n                          </div>\r\n                        </th>\r\n                        <th \r\n                          className=\"unified-table-header unified-table-header-regular sortable\"\r\n                          onClick={() => handleSort('isReported')}\r\n                          title=\"לחץ למיון לפי סטטוס דיווח\"\r\n                          data-sorted={sortConfig?.key === 'isReported' ? 'true' : 'false'}\r\n                        >\r\n                          <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between' }}>\r\n                            <span>דיווח</span>\r\n                            <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>\r\n                              <input\r\n                                type=\"checkbox\"\r\n                                ref={headerCheckboxRef}\r\n                                onChange={handleHeaderCheckboxChange}\r\n                                title=\"סמן/נקה הכל בכל הדפים\"\r\n                                onClick={(e) => e.stopPropagation()}\r\n                                style={{\r\n                                  accentColor: '#3b82f6',\r\n                                  cursor: 'pointer'\r\n                                }}\r\n                              />\r\n                            </div>\r\n                          </div>\r\n                        </th>\r\n                        <th className=\"unified-table-header unified-table-header-regular\">\r\n                          הערות\r\n                        </th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                      {paginatedItems.map((item, index) => (\r\n                        <tr key={item.id} className=\"unified-table-row\">\r\n                          <td className=\"unified-table-cell\">\r\n                            {item.itemName}\r\n                          </td>\r\n                          <td className=\"unified-table-cell\">\r\n                            {item.idNumber || '-'}\r\n                          </td>\r\n                          <td className=\"unified-table-cell\">\r\n                            {item.signedBy?.name || '-'}\r\n                          </td>\r\n                          <td className=\"unified-table-cell\">\r\n                            {item.signedBy?.location?.name || '-'}\r\n                          </td>\r\n                          <td className=\"unified-table-cell\">\r\n                            {item.reportedAt ? (() => {\r\n                              const date = new Date(item.reportedAt);\r\n                              return !isNaN(date.getTime()) ? date.toLocaleDateString('he-IL') : 'תאריך לא תקין';\r\n                            })() : '-'}\r\n                          </td>\r\n                          <td className=\"unified-table-cell\">\r\n                            {item.reportedBy ? item.reportedBy.name : '-'}\r\n                          </td>\r\n                          <td className=\"unified-table-cell\">\r\n                            <div style={{ display: 'flex', justifyContent: 'center', alignItems: 'center' }}>\r\n                              <input\r\n                                type=\"checkbox\"\r\n                                checked={item.isReported || false}\r\n                                onChange={() => handleCheckboxChange(item.id)}\r\n                                style={{\r\n                                  accentColor: '#3b82f6',\r\n                                  cursor: 'pointer',\r\n                                  transform: 'scale(1.2)'\r\n                                }}\r\n                              />\r\n                            </div>\r\n                          </td>\r\n                          <td className=\"unified-table-cell\">\r\n                            <input\r\n                              type=\"text\"\r\n                              value={item.reportNotes || ''}\r\n                              onChange={(e) => updateItemNotes(item.id, e.target.value)}\r\n                              placeholder=\"הערות...\"\r\n                              style={{\r\n                                background: 'var(--color-surface)',\r\n                                border: '1px solid var(--color-border)',\r\n                                borderRadius: '8px',\r\n                                padding: '8px 12px',\r\n                                color: 'var(--color-text)',\r\n                                fontSize: '14px',\r\n                                minWidth: '150px',\r\n                                transition: 'all 0.2s ease'\r\n                              }}\r\n                              onFocus={(e) => {\r\n                                e.target.style.background = 'var(--color-surface-hover)';\r\n                                e.target.style.borderColor = 'var(--color-primary)';\r\n                              }}\r\n                              onBlur={(e) => {\r\n                                e.target.style.background = 'var(--color-surface)';\r\n                                e.target.style.borderColor = 'var(--color-border)';\r\n                              }}\r\n                            />\r\n                          </td>\r\n                        </tr>\r\n                      ))}\r\n                    </tbody>\r\n                  </table>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Pagination */}\r\n              {totalPages > 1 && (\r\n                <div className=\"daily-report-pagination\">\r\n                  <SmartPagination\r\n                    currentPage={currentPage}\r\n                    totalPages={totalPages}\r\n                    onPageChange={setCurrentPage}\r\n                  />\r\n                </div>\r\n              )}\r\n\r\n              {/* Action Buttons Section */}\r\n              {sortedReportItems.length > 0 && (\r\n                <div className=\"daily-report-actions-section\">\r\n                  <div className=\"daily-report-actions\">\r\n                    <div className=\"daily-report-actions-buttons\">\r\n                      <button \r\n                        onClick={handleSubmitReport}\r\n                        className=\"daily-report-btn daily-report-btn-primary\"\r\n                      >\r\n                        <i className=\"fas fa-save\"></i>\r\n                        שמור דיווח\r\n                      </button>\r\n                      \r\n                      {isAdmin && (\r\n                        <div className=\"daily-report-admin-controls\">\r\n                          <button \r\n                            onClick={handleCompleteReport}\r\n                            disabled={completing || !allItemsReported}\r\n                            title={!allItemsReported ? \"לא ניתן להשלים דוח כאשר יש פריטים שלא דווחו\" : \"השלם מחזור דיווח נוכחי\"}\r\n                            className={`daily-report-btn ${\r\n                              completing || !allItemsReported ? 'daily-report-btn-disabled' : 'daily-report-btn-success'\r\n                            }`}\r\n                          >\r\n                            {completing ? (\r\n                              <>\r\n                                <i className=\"fas fa-spinner fa-spin\"></i>\r\n                                מושלם...\r\n                              </>\r\n                            ) : (\r\n                              <>\r\n                                <i className=\"fas fa-check-circle\"></i>\r\n                                השלם מחזור דיווח\r\n                              </>\r\n                            )}\r\n                          </button>\r\n                          {!allItemsReported && (\r\n                            <div className=\"daily-report-warning\">\r\n                              <i className=\"fas fa-exclamation-triangle\"></i>\r\n                              יש לדווח על כל הפריטים לפני השלמת המחזור\r\n                            </div>\r\n                          )}\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              {/* Empty Search State */}\r\n              {sortedReportItems.length === 0 && searchTerm && (\r\n                <div className=\"daily-report-empty-state\">\r\n                  <div className=\"daily-report-empty-icon\">\r\n                    <i className=\"fas fa-search\"></i>\r\n                  </div>\r\n                  <h3 className=\"daily-report-empty-title\">\r\n                    לא נמצאו תוצאות\r\n                  </h3>\r\n                  <p className=\"daily-report-empty-description\">\r\n                    לא נמצאו פריטים התואמים לחיפוש \"{searchTerm}\"\r\n                  </p>\r\n                </div>\r\n              )}\r\n            </>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {activeReportTab === 'history' && (\r\n        <DailyReportHistory userProfile={userProfile} isAdmin={isAdmin} />\r\n      )}\r\n\r\n      {activeReportTab === 'users-status' && isAdmin && (\r\n        <div className=\"daily-report-container\">\r\n          {/* Users Status Tab Content */}\r\n          {usersData.length === 0 ? (\r\n            <div className=\"daily-report-empty-state\">\r\n              <div className=\"daily-report-empty-icon\">\r\n                <i className=\"fas fa-users\"></i>\r\n              </div>\r\n              <h3 className=\"daily-report-empty-title\">\r\n                אין משתמשים בדוח\r\n              </h3>\r\n              <p className=\"daily-report-empty-description\">\r\n                אין נתוני דיווח למשתמשים בדוח הנוכחי.\r\n              </p>\r\n            </div>\r\n          ) : (\r\n            <>\r\n              {/* Search Input */}\r\n              <SearchInput\r\n                value={searchTerm}\r\n                onChange={(value) => {\r\n                  setSearchTerm(value);\r\n                  setCurrentPage(1);\r\n                }}\r\n                placeholder=\"חיפוש לפי שם משתמש...\"\r\n                resultsCount={sortedUsersData.length}\r\n                resultsLabel=\"משתמשים\"\r\n              />\r\n\r\n              {/* Users Table Section */}\r\n              <div className=\"daily-report-table-section\">\r\n                <div className=\"unified-table-container\">\r\n                  <div style={{ overflowX: 'auto' }}>\r\n                    <table className=\"unified-table\">\r\n                      <thead>\r\n                        <tr>\r\n                          <th \r\n                            className=\"unified-table-header unified-table-header-regular sortable\"\r\n                            onClick={() => handleSort('userName')}\r\n                            title=\"לחץ למיון לפי שם משתמש\"\r\n                            data-sorted={sortConfig?.key === 'userName' ? 'true' : 'false'}\r\n                          >\r\n                            <div style={{ display: 'flex', alignItems: 'center' }}>\r\n                              <span>משתמש</span>\r\n                            </div>\r\n                          </th>\r\n                          <th \r\n                            className=\"unified-table-header unified-table-header-regular sortable\"\r\n                            onClick={() => handleSort('totalItems')}\r\n                            title=\"לחץ למיון לפי סה״כ פריטים\"\r\n                            data-sorted={sortConfig?.key === 'totalItems' ? 'true' : 'false'}\r\n                          >\r\n                            <div style={{ display: 'flex', alignItems: 'center' }}>\r\n                              <span>סה״כ פריטים</span>\r\n                            </div>\r\n                          </th>\r\n                          <th \r\n                            className=\"unified-table-header unified-table-header-regular sortable\"\r\n                            onClick={() => handleSort('reportedItems')}\r\n                            title=\"לחץ למיון לפי פריטים מדווחים\"\r\n                            data-sorted={sortConfig?.key === 'reportedItems' ? 'true' : 'false'}\r\n                          >\r\n                            <div style={{ display: 'flex', alignItems: 'center' }}>\r\n                              <span>פריטים מדווחים</span>\r\n                            </div>\r\n                          </th>\r\n                          <th \r\n                            className=\"unified-table-header unified-table-header-regular sortable\"\r\n                            onClick={() => handleSort('percentage')}\r\n                            title=\"לחץ למיון לפי אחוז השלמה\"\r\n                            data-sorted={sortConfig?.key === 'percentage' ? 'true' : 'false'}\r\n                          >\r\n                            <div style={{ display: 'flex', alignItems: 'center' }}>\r\n                              <span>אחוז השלמה</span>\r\n                            </div>\r\n                          </th>\r\n                        </tr>\r\n                      </thead>\r\n                      <tbody>\r\n                        {paginatedUsers.map((user) => (\r\n                          <tr key={user.id} className=\"unified-table-row\">\r\n                            <td className=\"unified-table-cell\">\r\n                              {user.name}\r\n                            </td>\r\n                            <td className=\"unified-table-cell\">\r\n                              {user.total}\r\n                            </td>\r\n                            <td className=\"unified-table-cell\">\r\n                              {user.reported}\r\n                            </td>\r\n                            <td className=\"unified-table-cell\">\r\n                              <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>\r\n                                <span className={`daily-report-progress-badge ${\r\n                                  user.percentage === 100 ? 'success' :\r\n                                  user.percentage >= 70 ? 'warning' : 'danger'\r\n                                }`}>\r\n                                  {user.percentage}%\r\n                                </span>\r\n                              </div>\r\n                            </td>\r\n                          </tr>\r\n                        ))}\r\n                      </tbody>\r\n                    </table>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Pagination */}\r\n              {usersTotalPages > 1 && (\r\n                <div className=\"daily-report-pagination\">\r\n                  <SmartPagination\r\n                    currentPage={currentPage}\r\n                    totalPages={usersTotalPages}\r\n                    onPageChange={setCurrentPage}\r\n                  />\r\n                </div>\r\n              )}\r\n\r\n              {/* Empty Search State */}\r\n              {sortedUsersData.length === 0 && searchTerm && (\r\n                <div className=\"daily-report-empty-state\">\r\n                  <div className=\"daily-report-empty-icon\">\r\n                    <i className=\"fas fa-search\"></i>\r\n                  </div>\r\n                  <h3 className=\"daily-report-empty-title\">\r\n                    לא נמצאו תוצאות\r\n                  </h3>\r\n                  <p className=\"daily-report-empty-description\">\r\n                    לא נמצאו משתמשים התואמים לחיפוש \"{searchTerm}\"\r\n                  </p>\r\n                </div>\r\n              )}\r\n            </>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {/* Error Notification Modal */}\r\n      <ErrorNotificationModal\r\n        isOpen={errorModal.isOpen}\r\n        onClose={() => setErrorModal({ isOpen: false, title: '', message: '' })}\r\n        title={errorModal.title}\r\n        message={errorModal.message}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DailyReport;\r\n","import React, { useState, useMemo, useCallback } from 'react';\r\nimport { useUsers } from '../../hooks/useUsers';\r\nimport { useUserProfile } from '../../hooks/useUserProfile';\r\nimport { useAvailableItems } from '../../hooks/useAvailableItems';\r\nimport { useReceipts } from '../../hooks/useReceipts';\r\nimport { receiptService } from '../../services';\r\nimport { User, Receipt } from '../../types';\r\nimport './ReceiptsTab.css';\r\n\r\ntype SortField = 'name' | 'idNumber' | 'location';\r\ntype SortDirection = 'asc' | 'desc';\r\n\r\ninterface SortConfig {\r\n  field: SortField;\r\n  direction: SortDirection;\r\n}\r\n\r\ninterface ReceiptFormProps {\r\n  onSuccess: () => void;\r\n  onCancel: () => void;\r\n  originalReceipt?: Receipt | null; // Optional prop for updating existing receipt\r\n}\r\n\r\ninterface ReceiptItem {\r\n  id: string;\r\n  name: string;\r\n  idNumber?: string;\r\n  requiresReporting?: boolean;\r\n  quantity?: number;\r\n  allocatedLocation?: {\r\n    id: string;\r\n    name: string;\r\n    unit?: { name: string };\r\n  };\r\n}\r\n\r\ninterface MergedReceiptItem {\r\n  name: string;\r\n  idNumber?: string;\r\n  requiresReporting?: boolean;\r\n  allocatedLocation?: {\r\n    id: string;\r\n    name: string;\r\n    unit?: { name: string };\r\n  };\r\n  quantity: number;\r\n  originalItems: ReceiptItem[]; // Keep track of original items for removal\r\n}\r\n\r\ninterface SelectedItemsTableProps {\r\n  items: ReceiptItem[];\r\n  onRemove: (id: string) => void;\r\n  availableItems: any[]; // Use any[] to accept server items\r\n  onAddItem: (itemToAdd: any) => void;\r\n}\r\n\r\n// Function to merge items with identical attributes\r\nconst mergeIdenticalItems = (items: ReceiptItem[]): MergedReceiptItem[] => {\r\n  const mergedMap = new Map<string, MergedReceiptItem>();\r\n\r\n  items.forEach(item => {\r\n    // Create a unique key based on name, idNumber, and allocatedLocation\r\n    const locationId = item.allocatedLocation?.id || 'no-location';\r\n    const locationName = item.allocatedLocation?.name || 'no-allocation';\r\n    const idNumber = item.idNumber || 'no-id';\r\n    const key = `${item.name}-${idNumber}-${locationId}-${locationName}-${item.requiresReporting}`;\r\n\r\n    if (mergedMap.has(key)) {\r\n      const existingItem = mergedMap.get(key)!;\r\n      existingItem.quantity += (item.quantity || 1);\r\n      existingItem.originalItems.push(item);\r\n    } else {\r\n      mergedMap.set(key, {\r\n        name: item.name,\r\n        idNumber: item.idNumber,\r\n        requiresReporting: item.requiresReporting,\r\n        allocatedLocation: item.allocatedLocation,\r\n        quantity: item.quantity || 1,\r\n        originalItems: [item]\r\n      });\r\n    }\r\n  });\r\n\r\n  return Array.from(mergedMap.values());\r\n};\r\n\r\nconst SelectedItemsTable: React.FC<SelectedItemsTableProps> = ({ \r\n  items, \r\n  onRemove,\r\n  availableItems,\r\n  onAddItem\r\n}) => {\r\n  const [sortConfig, setSortConfig] = useState<SortConfig | null>(null);\r\n\r\n  // Merge identical items\r\n  const mergedItems = useMemo(() => mergeIdenticalItems(items), [items]);\r\n\r\n  // Handle sorting\r\n  const handleSort = (field: SortField) => {\r\n    setSortConfig(prev => {\r\n      if (prev?.field === field) {\r\n        // If clicking the same field, toggle direction\r\n        return {\r\n          field,\r\n          direction: prev.direction === 'asc' ? 'desc' : 'asc'\r\n        };\r\n      } else {\r\n        // If clicking a new field, start with ascending\r\n        return {\r\n          field,\r\n          direction: 'asc'\r\n        };\r\n      }\r\n    });\r\n  };\r\n\r\n  // Sort merged items based on current sort config\r\n  const sortedItems = useMemo(() => {\r\n    if (!sortConfig) return mergedItems;\r\n\r\n    return [...mergedItems].sort((a, b) => {\r\n      let aValue: string;\r\n      let bValue: string;\r\n\r\n      switch (sortConfig.field) {\r\n        case 'name':\r\n          aValue = a.name || '';\r\n          bValue = b.name || '';\r\n          break;\r\n        case 'idNumber':\r\n          aValue = a.idNumber || '';\r\n          bValue = b.idNumber || '';\r\n          break;\r\n        case 'location':\r\n          aValue = a.allocatedLocation?.name || '';\r\n          bValue = b.allocatedLocation?.name || '';\r\n          break;\r\n        default:\r\n          return 0;\r\n      }\r\n\r\n      const comparison = aValue.localeCompare(bValue, 'he');\r\n      return sortConfig.direction === 'asc' ? comparison : -comparison;\r\n    });\r\n  }, [mergedItems, sortConfig]);\r\n\r\n  // Handle remove merged item\r\n  const handleRemoveMergedItem = (mergedItem: MergedReceiptItem) => {\r\n    // Remove all original items that make up this merged item\r\n    mergedItem.originalItems.forEach(originalItem => {\r\n      onRemove(originalItem.id);\r\n    });\r\n  };\r\n\r\n  // Handle increase quantity - add one more item with same attributes\r\n  const handleIncreaseQuantity = (mergedItem: MergedReceiptItem) => {\r\n    // Find an available item with the same attributes that is NOT already in the current receipt\r\n    const availableItem = availableItems.find(availableItem => {\r\n      const locationId = availableItem.allocatedLocation?.id || 'no-location';\r\n      const mergedLocationId = mergedItem.allocatedLocation?.id || 'no-location';\r\n      const locationName = availableItem.allocatedLocation?.name || 'no-allocation';\r\n      const mergedLocationName = mergedItem.allocatedLocation?.name || 'no-allocation';\r\n      const idNumber = (availableItem.idNumber || null) || 'no-id';\r\n      const mergedIdNumber = mergedItem.idNumber || 'no-id';\r\n      \r\n      // Check if attributes match\r\n      const attributesMatch = availableItem.itemName?.name === mergedItem.name &&\r\n                             idNumber === mergedIdNumber &&\r\n                             locationId === mergedLocationId &&\r\n                             locationName === mergedLocationName &&\r\n                             (availableItem.requiresReporting || false) === (mergedItem.requiresReporting || false);\r\n      \r\n      // Check if this specific item is NOT already in the current receipt\r\n      const notInReceipt = !items.some(receiptItem => receiptItem.id === availableItem.id);\r\n      \r\n      return attributesMatch && notInReceipt;\r\n    });\r\n    \r\n    if (availableItem) {\r\n      onAddItem(availableItem);\r\n    }\r\n  };\r\n\r\n  // Handle decrease quantity - remove one item from the merged group\r\n  const handleDecreaseQuantity = (mergedItem: MergedReceiptItem) => {\r\n    if (mergedItem.originalItems.length > 0) {\r\n      // Remove the first item from the merged group\r\n      onRemove(mergedItem.originalItems[0].id);\r\n    }\r\n  };\r\n\r\n  // Check if more items with same attributes are available\r\n  const getAvailableQuantity = (mergedItem: MergedReceiptItem) => {\r\n    // Filter items that match the merged item's attributes and are not already in the current receipt\r\n    const matchingItems = availableItems.filter(availableItem => {\r\n      const locationId = availableItem.allocatedLocation?.id || 'no-location';\r\n      const mergedLocationId = mergedItem.allocatedLocation?.id || 'no-location';\r\n      const locationName = availableItem.allocatedLocation?.name || 'no-allocation';\r\n      const mergedLocationName = mergedItem.allocatedLocation?.name || 'no-allocation';\r\n      const idNumber = (availableItem.idNumber || null) || 'no-id';\r\n      const mergedIdNumber = mergedItem.idNumber || 'no-id';\r\n      \r\n      // Check if attributes match\r\n      const attributesMatch = availableItem.itemName?.name === mergedItem.name &&\r\n                             idNumber === mergedIdNumber &&\r\n                             locationId === mergedLocationId &&\r\n                             locationName === mergedLocationName &&\r\n                             (availableItem.requiresReporting || false) === (mergedItem.requiresReporting || false);\r\n      \r\n      // Check if this specific item is not already in the current receipt\r\n      const notInReceipt = !items.some(receiptItem => receiptItem.id === availableItem.id);\r\n      \r\n      return attributesMatch && notInReceipt;\r\n    });\r\n    \r\n    return matchingItems.length;\r\n  };\r\n\r\n  if (items.length === 0) {\r\n    return (\r\n      <div style={{\r\n        background: 'rgba(255, 255, 255, 0.05)',\r\n        borderRadius: '12px',\r\n        border: '1px solid rgba(255, 255, 255, 0.1)',\r\n        padding: '32px',\r\n        textAlign: 'center',\r\n        marginTop: '16px'\r\n      }}>\r\n        <i className=\"fas fa-inbox\" style={{ \r\n          fontSize: '48px', \r\n          color: 'rgba(255, 255, 255, 0.3)', \r\n          marginBottom: '16px' \r\n        }}></i>\r\n        <h5 style={{ color: 'rgba(255, 255, 255, 0.7)', marginBottom: '8px' }}>\r\n          לא נבחרו פריטים\r\n        </h5>\r\n        <p style={{ color: 'rgba(255, 255, 255, 0.5)', margin: 0 }}>\r\n          השתמש בחיפוש למעלה כדי להוסיף פריטים לקבלה\r\n        </p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div style={{\r\n      background: 'rgba(255, 255, 255, 0.05)',\r\n      borderRadius: '12px',\r\n      border: '1px solid rgba(255, 255, 255, 0.1)',\r\n      marginTop: '16px',\r\n      overflow: 'hidden'\r\n    }}>\r\n      <div style={{\r\n        padding: '16px 20px',\r\n        background: 'rgba(255, 255, 255, 0.1)',\r\n        borderBottom: '1px solid rgba(255, 255, 255, 0.1)',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'flex-end',\r\n        direction: 'rtl'\r\n      }}>\r\n        <i className=\"fas fa-list-ul\" style={{ \r\n          marginLeft: '8px', \r\n          color: '#3b82f6',\r\n          fontSize: '16px'\r\n        }}></i>\r\n        <span style={{ \r\n          color: 'rgba(255, 255, 255, 0.9)', \r\n          fontWeight: '600',\r\n          fontSize: '16px'\r\n        }}>\r\n          פריטים נבחרים ({mergedItems.length} סוגים, {items.length} פריטים)\r\n        </span>\r\n      </div>\r\n      \r\n      <div style={{ overflowX: 'auto' }}>\r\n        <table style={{\r\n          width: '100%',\r\n          borderCollapse: 'collapse',\r\n          direction: 'rtl'\r\n        }}>\r\n          <thead>\r\n            <tr style={{ background: 'rgba(255, 255, 255, 0.05)' }}>\r\n              <th style={{ \r\n                width: '8%', \r\n                textAlign: 'center',\r\n                padding: '12px 8px',\r\n                color: 'rgba(255, 255, 255, 0.8)',\r\n                fontWeight: '600',\r\n                fontSize: '14px',\r\n                borderBottom: '1px solid rgba(255, 255, 255, 0.1)'\r\n              }}>\r\n                #\r\n              </th>\r\n              <th \r\n                style={{ \r\n                  width: '36%', \r\n                  cursor: 'pointer',\r\n                  padding: '12px 16px',\r\n                  color: 'rgba(255, 255, 255, 0.8)',\r\n                  fontWeight: '600',\r\n                  fontSize: '14px',\r\n                  borderBottom: '1px solid rgba(255, 255, 255, 0.1)',\r\n                  transition: 'all 0.2s ease'\r\n                }}\r\n                onClick={() => handleSort('name')}\r\n              >\r\n                <div style={{ \r\n                  display: 'flex', \r\n                  alignItems: 'center',\r\n                  direction: 'rtl'\r\n                }}>\r\n                  <span>פריט</span>\r\n                </div>\r\n              </th>\r\n              <th \r\n                style={{ \r\n                  width: '16%', \r\n                  cursor: 'pointer',\r\n                  textAlign: 'center',\r\n                  padding: '12px 8px',\r\n                  color: 'rgba(255, 255, 255, 0.8)',\r\n                  fontWeight: '600',\r\n                  fontSize: '14px',\r\n                  borderBottom: '1px solid rgba(255, 255, 255, 0.1)',\r\n                  transition: 'all 0.2s ease'\r\n                }}\r\n                onClick={() => handleSort('idNumber')}\r\n              >\r\n                <div style={{ \r\n                  display: 'flex', \r\n                  alignItems: 'center'\r\n                }}>\r\n                  <span>מספר צ'</span>\r\n                </div>\r\n              </th>\r\n              <th \r\n                style={{ \r\n                  width: '18%', \r\n                  cursor: 'pointer',\r\n                  textAlign: 'center',\r\n                  padding: '12px 8px',\r\n                  color: 'rgba(255, 255, 255, 0.8)',\r\n                  fontWeight: '600',\r\n                  fontSize: '14px',\r\n                  borderBottom: '1px solid rgba(255, 255, 255, 0.1)',\r\n                  transition: 'all 0.2s ease'\r\n                }}\r\n                onClick={() => handleSort('location')}\r\n              >\r\n                <div style={{ \r\n                  display: 'flex', \r\n                  alignItems: 'center'\r\n                }}>\r\n                  <span>הקצאה</span>\r\n                </div>\r\n              </th>\r\n              <th style={{ \r\n                width: '12%', \r\n                textAlign: 'center',\r\n                padding: '12px 8px',\r\n                color: 'rgba(255, 255, 255, 0.8)',\r\n                fontWeight: '600',\r\n                fontSize: '14px',\r\n                borderBottom: '1px solid rgba(255, 255, 255, 0.1)'\r\n              }}>\r\n                כמות\r\n              </th>\r\n              <th style={{ \r\n                width: '10%', \r\n                textAlign: 'center',\r\n                padding: '12px 8px',\r\n                color: 'rgba(255, 255, 255, 0.8)',\r\n                fontWeight: '600',\r\n                fontSize: '14px',\r\n                borderBottom: '1px solid rgba(255, 255, 255, 0.1)'\r\n              }}>\r\n                פעולות\r\n              </th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {sortedItems.map((item, index) => (\r\n              <tr \r\n                key={`${item.name}-${item.idNumber || 'no-id'}-${item.allocatedLocation?.id || 'no-location'}-${index}`}\r\n                style={{ \r\n                  transition: 'all 0.2s ease',\r\n                  borderBottom: '1px solid rgba(255, 255, 255, 0.05)'\r\n                }}\r\n              >\r\n                <td style={{ \r\n                  textAlign: 'center', \r\n                  padding: '12px 8px'\r\n                }}>\r\n                  <span style={{\r\n                    background: 'rgba(59, 130, 246, 0.2)',\r\n                    color: '#3b82f6',\r\n                    padding: '4px 8px',\r\n                    borderRadius: '6px',\r\n                    fontSize: '12px',\r\n                    fontWeight: '600'\r\n                  }}>\r\n                    {index + 1}\r\n                  </span>\r\n                </td>\r\n                <td style={{ padding: '12px 16px' }}>\r\n                  <div style={{ \r\n                    display: 'flex', \r\n                    alignItems: 'center',\r\n                    direction: 'rtl'\r\n                  }}>\r\n                    <span style={{ \r\n                      color: 'rgba(255, 255, 255, 0.9)',\r\n                      fontWeight: '500'\r\n                    }}>\r\n                      {item.name}\r\n                    </span>\r\n                    {item.requiresReporting && (\r\n                      <span style={{ marginLeft: '8px' }}>\r\n                        <i \r\n                          className=\"fas fa-shield-alt\" \r\n                          style={{ \r\n                            color: '#ef4444',\r\n                            fontSize: '14px'\r\n                          }} \r\n                          title=\"פריט צופן\"\r\n                        ></i>\r\n                      </span>\r\n                    )}\r\n                  </div>\r\n                </td>\r\n                <td style={{ \r\n                  textAlign: 'center', \r\n                  padding: '12px 8px'\r\n                }}>\r\n                  {item.idNumber ? (\r\n                    <span style={{\r\n                      background: 'rgba(34, 197, 94, 0.2)',\r\n                      color: '#22c55e',\r\n                      padding: '4px 8px',\r\n                      borderRadius: '6px',\r\n                      fontSize: '12px',\r\n                      fontWeight: '600'\r\n                    }}>\r\n                      {item.idNumber}\r\n                    </span>\r\n                  ) : (\r\n                    <span style={{ color: 'rgba(255, 255, 255, 0.4)' }}>ללא</span>\r\n                  )}\r\n                </td>\r\n                <td style={{ \r\n                  textAlign: 'center', \r\n                  padding: '12px 8px'\r\n                }}>\r\n                  {item.allocatedLocation?.name ? (\r\n                    <span style={{\r\n                      background: 'rgba(168, 85, 247, 0.2)',\r\n                      color: '#a855f7',\r\n                      padding: '4px 8px',\r\n                      borderRadius: '6px',\r\n                      fontSize: '12px',\r\n                      fontWeight: '600'\r\n                    }}>\r\n                      {item.allocatedLocation.name}\r\n                    </span>\r\n                  ) : (\r\n                    <span style={{ color: 'rgba(255, 255, 255, 0.4)' }}>ללא הקצאה</span>\r\n                  )}\r\n                </td>\r\n                <td style={{ \r\n                  textAlign: 'center', \r\n                  padding: '12px 8px'\r\n                }}>\r\n                  <div style={{ \r\n                    display: 'flex', \r\n                    alignItems: 'center', \r\n                    justifyContent: 'center', \r\n                    gap: '8px' \r\n                  }}>\r\n                    {/* Decrease button - only show if quantity > 1 */}\r\n                    {item.quantity > 1 && (\r\n                      <button\r\n                        type=\"button\"\r\n                        onClick={() => handleDecreaseQuantity(item)}\r\n                        style={{\r\n                          background: 'linear-gradient(135deg, #ef4444, #dc2626)',\r\n                          border: 'none',\r\n                          borderRadius: '4px',\r\n                          width: '24px',\r\n                          height: '24px',\r\n                          color: 'white',\r\n                          fontSize: '14px',\r\n                          fontWeight: 'bold',\r\n                          cursor: 'pointer',\r\n                          transition: 'all 0.2s ease',\r\n                          display: 'flex',\r\n                          alignItems: 'center',\r\n                          justifyContent: 'center'\r\n                        }}\r\n                        title=\"הפחת כמות\"\r\n                      >\r\n                        −\r\n                      </button>\r\n                    )}\r\n                    \r\n                    <span style={{\r\n                      background: 'rgba(59, 130, 246, 0.2)',\r\n                      color: '#3b82f6',\r\n                      padding: '6px 12px',\r\n                      borderRadius: '8px',\r\n                      fontSize: '14px',\r\n                      fontWeight: '600',\r\n                      minWidth: '32px'\r\n                    }}>\r\n                      {item.quantity}\r\n                    </span>\r\n                    \r\n                    {/* Increase button - only show if more items are available */}\r\n                    {getAvailableQuantity(item) > 0 && (\r\n                      <button\r\n                        type=\"button\"\r\n                        onClick={() => handleIncreaseQuantity(item)}\r\n                        style={{\r\n                          background: 'linear-gradient(135deg, #22c55e, #16a34a)',\r\n                          border: 'none',\r\n                          borderRadius: '4px',\r\n                          width: '24px',\r\n                          height: '24px',\r\n                          color: 'white',\r\n                          fontSize: '14px',\r\n                          fontWeight: 'bold',\r\n                          cursor: 'pointer',\r\n                          transition: 'all 0.2s ease',\r\n                          display: 'flex',\r\n                          alignItems: 'center',\r\n                          justifyContent: 'center'\r\n                        }}\r\n                        title=\"הוסף כמות\"\r\n                      >\r\n                        +\r\n                      </button>\r\n                    )}\r\n                  </div>\r\n                </td>\r\n                <td style={{ \r\n                  textAlign: 'center', \r\n                  padding: '12px 8px'\r\n                }}>\r\n                  <button \r\n                    type=\"button\" \r\n                    onClick={() => handleRemoveMergedItem(item)}\r\n                    title=\"הסר פריט\"\r\n                    style={{\r\n                      background: 'linear-gradient(135deg, #ef4444, #dc2626)',\r\n                      border: 'none',\r\n                      borderRadius: '6px',\r\n                      width: '32px',\r\n                      height: '32px',\r\n                      color: 'white',\r\n                      fontSize: '16px',\r\n                      fontWeight: 'bold',\r\n                      cursor: 'pointer',\r\n                      transition: 'all 0.2s ease',\r\n                      display: 'flex',\r\n                      alignItems: 'center',\r\n                      justifyContent: 'center'\r\n                    }}\r\n                  >\r\n                    ×\r\n                  </button>\r\n                </td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n      \r\n      <div style={{\r\n        padding: '12px 20px',\r\n        background: 'rgba(255, 255, 255, 0.05)',\r\n        borderTop: '1px solid rgba(255, 255, 255, 0.1)',\r\n        display: 'flex',\r\n        justifyContent: 'flex-end',\r\n        direction: 'rtl'\r\n      }}>\r\n        <small style={{ \r\n          color: 'rgba(255, 255, 255, 0.6)',\r\n          display: 'flex',\r\n          alignItems: 'center'\r\n        }}>\r\n          <i className=\"fas fa-info-circle\" style={{ marginLeft: '6px' }}></i>\r\n          סה\"כ {mergedItems.length} סוגי פריטים, {items.length} פריטים\r\n        </small>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n// Define a unified interface for available items used in this form\r\ninterface AvailableItemForForm {\r\n  id: string;\r\n  idNumber?: string;\r\n  requiresReporting?: boolean;\r\n  itemName?: { name: string };\r\n  allocatedLocation?: {\r\n    id: string;\r\n    name: string;\r\n    unit?: { name: string };\r\n  };\r\n}\r\n\r\nconst ReceiptForm: React.FC<ReceiptFormProps> = ({\r\n  onSuccess,\r\n  onCancel,\r\n  originalReceipt = null,\r\n}) => {\r\n  const { users } = useUsers();\r\n  const { userProfile } = useUserProfile();\r\n  const { availableItems: serverAvailableItems, loading: itemsLoading, error: itemsError } = useAvailableItems();\r\n  const { updateReceipt, receipts } = useReceipts();\r\n  const [selectedUserId, setSelectedUserId] = useState<string>(originalReceipt?.signedById || '');\r\n  const [note, setNote] = useState<string>(originalReceipt?.note || '');\r\n  const [hasChanges, setHasChanges] = useState<boolean>(false);\r\n\r\n  // Item selection state\r\n  const [receiptItems, setReceiptItems] = useState<ReceiptItem[]>(\r\n    originalReceipt?.receiptItems?.map(item => ({\r\n      id: item.itemId,\r\n      name: item.item?.itemName?.name || 'פריט לא ידוע',\r\n      idNumber: item.item?.idNumber || undefined,\r\n      requiresReporting: item.item?.requiresReporting || false,\r\n      allocatedLocation: undefined, // Will be populated from server data if available\r\n      quantity: 1\r\n    })) || []\r\n  );\r\n  const [selectedItemId, setSelectedItemId] = useState<string>('');\r\n  const [selectedQuantity, setSelectedQuantity] = useState<number>(1);\r\n  const [itemSearchQuery, setItemSearchQuery] = useState<string>('');\r\n  \r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  const isUpdateMode = !!originalReceipt;\r\n\r\n  // Get items that are already used in other receipts (excluding current receipt in update mode)\r\n  const itemsInOtherReceipts = useMemo(() => {\r\n    if (!Array.isArray(receipts)) return new Set<string>();\r\n    \r\n    const usedItemIds = new Set<string>();\r\n    receipts.forEach(receipt => {\r\n      // Skip current receipt in update mode\r\n      if (isUpdateMode && originalReceipt && receipt.id === originalReceipt.id) {\r\n        return;\r\n      }\r\n      \r\n      receipt.receiptItems?.forEach(receiptItem => {\r\n        if (receiptItem.itemId) {\r\n          usedItemIds.add(receiptItem.itemId);\r\n        }\r\n      });\r\n    });\r\n    \r\n    return usedItemIds;\r\n  }, [receipts, isUpdateMode, originalReceipt]);\r\n\r\n  // Calculate available items (include original items for update mode, exclude items in other receipts)\r\n  const availableItems = useMemo((): AvailableItemForForm[] => {\r\n    if (!Array.isArray(serverAvailableItems)) {\r\n      return [];\r\n    }\r\n\r\n    // Filter out items that are already in other receipts\r\n    const filteredServerItems = serverAvailableItems.filter((item: any) => \r\n      !itemsInOtherReceipts.has(item.id)\r\n    );\r\n\r\n    if (isUpdateMode && originalReceipt) {\r\n      const originalItems: AvailableItemForForm[] = originalReceipt.receiptItems?.map(receiptItem => ({\r\n        id: receiptItem.itemId,\r\n        idNumber: receiptItem.item?.idNumber || undefined,\r\n        itemName: receiptItem.item?.itemName || { name: 'פריט לא ידוע' },\r\n        requiresReporting: receiptItem.item?.requiresReporting || false,\r\n        allocatedLocation: undefined, // Will be populated from server data if available\r\n      })) || [];\r\n      \r\n      // Merge original items with filtered available items, avoiding duplicates\r\n      const mergedItems: AvailableItemForForm[] = [...originalItems];\r\n      filteredServerItems.forEach((item: any) => {\r\n        if (!mergedItems.find(existing => existing.id === item.id)) {\r\n          mergedItems.push({\r\n            id: item.id,\r\n            idNumber: item.idNumber || undefined,\r\n            itemName: item.itemName || { name: 'Unknown Item' },\r\n            requiresReporting: item.requiresReporting || false,\r\n            allocatedLocation: item.allocatedLocation || undefined,\r\n          });\r\n        }\r\n      });\r\n      \r\n      return mergedItems;\r\n    } else {\r\n      return filteredServerItems.map((item: any) => ({\r\n        id: item.id,\r\n        idNumber: item.idNumber || undefined,\r\n        itemName: item.itemName || { name: 'Unknown Item' },\r\n        requiresReporting: item.requiresReporting || false,\r\n        allocatedLocation: item.allocatedLocation || undefined,\r\n      }));\r\n    }\r\n  }, [serverAvailableItems, isUpdateMode, originalReceipt, itemsInOtherReceipts]);\r\n\r\n  // Helper function to get current used quantity for an item\r\n  const getUsedQuantity = useCallback((itemName: string, locationId?: string) => {\r\n    const locationKey = locationId || 'no-location';\r\n    return receiptItems\r\n      .filter(receiptItem => \r\n        receiptItem.name === itemName && \r\n        !receiptItem.requiresReporting &&\r\n        (receiptItem.allocatedLocation?.id || 'no-location') === locationKey\r\n      )\r\n      .reduce((sum, receiptItem) => sum + (receiptItem.quantity || 1), 0);\r\n  }, [receiptItems]);\r\n\r\n  const filteredAvailableItems = useMemo(() => {\r\n    // Filter out items that are already used in this receipt\r\n    const unselectedItems = availableItems.filter(item => {\r\n      // For ALL items (both cipher and non-cipher), exclude if THIS SPECIFIC item ID is already used\r\n      return !receiptItems.some(receiptItem => receiptItem.id === item.id);\r\n    });\r\n\r\n    // Then apply search filter - search in item name, ID number, and location name\r\n    let filteredItems = unselectedItems;\r\n    if (itemSearchQuery.trim()) {\r\n      const query = itemSearchQuery.toLowerCase().normalize('NFC');\r\n      filteredItems = unselectedItems.filter(item => \r\n        (item.itemName?.name?.toLowerCase().normalize('NFC') || '').includes(query) ||\r\n        (item.idNumber?.toLowerCase().normalize('NFC') || '').includes(query) ||\r\n        (item.allocatedLocation?.name?.toLowerCase().normalize('NFC') || '').includes(query)\r\n      );\r\n    }\r\n\r\n    // Sort items: prioritize items allocated to the selected user's location\r\n    const selectedUser = users.find(user => user.id === selectedUserId);\r\n    const userLocationName = selectedUser?.location;\r\n\r\n    return filteredItems.sort((a, b) => {\r\n      // First priority: items allocated to the selected user's location\r\n      const aMatchesUserLocation = a.allocatedLocation?.name === userLocationName;\r\n      const bMatchesUserLocation = b.allocatedLocation?.name === userLocationName;\r\n      \r\n      if (aMatchesUserLocation && !bMatchesUserLocation) return -1;\r\n      if (!aMatchesUserLocation && bMatchesUserLocation) return 1;\r\n      \r\n      // Second priority: items with allocated locations come before items without\r\n      const aHasLocation = Boolean(a.allocatedLocation);\r\n      const bHasLocation = Boolean(b.allocatedLocation);\r\n      \r\n      if (aHasLocation && !bHasLocation) return -1;\r\n      if (!aHasLocation && bHasLocation) return 1;\r\n      \r\n      // Third priority: alphabetical by item name\r\n      const aName = a.itemName?.name || '';\r\n      const bName = b.itemName?.name || '';\r\n      return aName.localeCompare(bName, 'he');\r\n    });\r\n  }, [availableItems, itemSearchQuery, receiptItems, users, selectedUserId]);\r\n\r\n  // Get selected item details\r\n  const selectedItem = useMemo(() => {\r\n    return filteredAvailableItems.find(item => item.id === selectedItemId);\r\n  }, [filteredAvailableItems, selectedItemId]);\r\n\r\n  // Calculate max available quantity for items - not needed anymore since we track individual items\r\n  const maxAvailableQuantity = useMemo(() => {\r\n    // Always return 1 since each item is tracked individually\r\n    return 1;\r\n  }, []);\r\n\r\n  // Reset selected quantity when item changes or max available changes\r\n  React.useEffect(() => {\r\n    if (selectedItem && maxAvailableQuantity > 0) {\r\n      setSelectedQuantity(prev => Math.min(prev, maxAvailableQuantity));\r\n    } else {\r\n      setSelectedQuantity(1);\r\n    }\r\n  }, [selectedItem, maxAvailableQuantity]);\r\n\r\n  // Track changes for update mode\r\n  React.useEffect(() => {\r\n    if (!isUpdateMode || !originalReceipt) {\r\n      setHasChanges(false);\r\n      return;\r\n    }\r\n\r\n    // Check if any field has changed\r\n    const userChanged = selectedUserId !== originalReceipt.signedById;\r\n    const noteChanged = (note.trim() || null) !== (originalReceipt.note || null);\r\n    \r\n    // Check if items changed\r\n    const originalItems = originalReceipt.receiptItems?.map(item => item.itemId) || [];\r\n    const currentItems = receiptItems.map(item => item.id);\r\n    const itemsChanged = originalItems.length !== currentItems.length || \r\n      !originalItems.every(itemId => currentItems.includes(itemId)) ||\r\n      !currentItems.every(itemId => originalItems.includes(itemId));\r\n\r\n    setHasChanges(userChanged || noteChanged || itemsChanged);\r\n  }, [selectedUserId, note, receiptItems, isUpdateMode, originalReceipt]);\r\n\r\n  // Add item directly to receipt (used when clicking from dropdown)\r\n  const addItemDirectly = (itemToAdd: AvailableItemForForm, quantity: number = 1) => {\r\n    // Double-check that the item is not in another receipt\r\n    if (itemsInOtherReceipts.has(itemToAdd.id)) {\r\n      setError(`הפריט \"${itemToAdd.itemName?.name}\" כבר נמצא בקבלה אחרת ולא ניתן להוסיף אותו שוב`);\r\n      return;\r\n    }\r\n    \r\n    // Check if this specific item is already in the receipt\r\n    if (receiptItems.some(receiptItem => receiptItem.id === itemToAdd.id)) {\r\n      setError(`הפריט \"${itemToAdd.itemName?.name}\" כבר נבחר`);\r\n      return;\r\n    }\r\n    \r\n    // Add the exact item that was clicked (always quantity 1 since each item has unique ID)\r\n    const newReceiptItem: ReceiptItem = {\r\n      id: itemToAdd.id, // Use the exact item ID that was clicked\r\n      name: itemToAdd.itemName?.name || 'פריט לא ידוע',\r\n      requiresReporting: itemToAdd.requiresReporting || false,\r\n      idNumber: itemToAdd.idNumber || undefined,\r\n      allocatedLocation: itemToAdd.allocatedLocation,\r\n      quantity: 1 // Always 1 since each item is unique\r\n    };\r\n    setReceiptItems(prev => [...prev, newReceiptItem]);\r\n    \r\n    // Reset selection and clear any previous errors\r\n    setSelectedItemId('');\r\n    setSelectedQuantity(1);\r\n    setItemSearchQuery('');\r\n    setError(null); // Clear error on successful add\r\n  };\r\n\r\n  // Add item to receipt\r\n  const addItem = () => {\r\n    if (!selectedItem) return;\r\n    \r\n    // Double-check that the item is not in another receipt\r\n    if (itemsInOtherReceipts.has(selectedItem.id)) {\r\n      setError(`הפריט \"${selectedItem.itemName?.name}\" כבר נמצא בקבלה אחרת ולא ניתן להוסיף אותו שוב`);\r\n      return;\r\n    }\r\n    \r\n    const isCipherItem = Boolean(selectedItem.requiresReporting);\r\n    \r\n    if (isCipherItem) {\r\n      // For cipher items, add each as individual item but check availability\r\n      const sameNameItems = availableItems.filter(availableItem => \r\n        availableItem.itemName?.name === selectedItem.itemName?.name && \r\n        availableItem.requiresReporting &&\r\n        !receiptItems.some(receiptItem => receiptItem.id === availableItem.id) &&\r\n        !itemsInOtherReceipts.has(availableItem.id) // Additional check for items in other receipts\r\n      );\r\n      \r\n      const newReceiptItems: ReceiptItem[] = [];\r\n      for (let i = 0; i < selectedQuantity && i < sameNameItems.length; i++) {\r\n        const itemToAdd = sameNameItems[i];\r\n        // Final validation before adding\r\n        if (itemsInOtherReceipts.has(itemToAdd.id)) {\r\n          setError(`הפריט \"${itemToAdd.itemName?.name}\" (${itemToAdd.idNumber}) כבר נמצא בקבלה אחרת`);\r\n          return;\r\n        }\r\n        newReceiptItems.push({\r\n          id: itemToAdd.id,\r\n          name: itemToAdd.itemName?.name || 'פריט לא ידוע',\r\n          requiresReporting: itemToAdd.requiresReporting || false,\r\n          idNumber: itemToAdd.idNumber || undefined,\r\n          allocatedLocation: itemToAdd.allocatedLocation,\r\n          quantity: 1\r\n        });\r\n      }\r\n      setReceiptItems(prev => [...prev, ...newReceiptItems]);\r\n    } else {\r\n      // For non-cipher items, check if item with same name AND location already exists\r\n      const existingItemIndex = receiptItems.findIndex(receiptItem => \r\n        receiptItem.name === selectedItem.itemName?.name && \r\n        !receiptItem.requiresReporting &&\r\n        (receiptItem.allocatedLocation?.id || 'no-location') === (selectedItem.allocatedLocation?.id || 'no-location')\r\n      );\r\n      \r\n      if (existingItemIndex >= 0) {\r\n        // Update quantity of existing item, but validate individual items first\r\n        const locationKey = selectedItem.allocatedLocation?.id || 'no-location';\r\n        const availableItemsOfSameName = availableItems.filter(availableItem =>\r\n          availableItem.itemName?.name === selectedItem.itemName?.name && \r\n          !availableItem.requiresReporting &&\r\n          (availableItem.allocatedLocation?.id || 'no-location') === locationKey &&\r\n          !itemsInOtherReceipts.has(availableItem.id) // Check items not in other receipts\r\n        );\r\n        \r\n        const currentUsed = getUsedQuantity(selectedItem.itemName?.name || '', selectedItem.allocatedLocation?.id);\r\n        const requestedTotal = currentUsed + selectedQuantity;\r\n        \r\n        if (requestedTotal > availableItemsOfSameName.length) {\r\n          setError(`לא ניתן להוסיף ${selectedQuantity} פריטים. זמין: ${availableItemsOfSameName.length - currentUsed}`);\r\n          return;\r\n        }\r\n        \r\n        const updatedItems = [...receiptItems];\r\n        updatedItems[existingItemIndex] = {\r\n          ...updatedItems[existingItemIndex],\r\n          quantity: (updatedItems[existingItemIndex].quantity || 1) + selectedQuantity\r\n        };\r\n        setReceiptItems(updatedItems);\r\n      } else {\r\n        // Add new item with quantity - validate availability first\r\n        const locationKey = selectedItem.allocatedLocation?.id || 'no-location';\r\n        const availableItemsOfSameName = availableItems.filter(availableItem =>\r\n          availableItem.itemName?.name === selectedItem.itemName?.name && \r\n          !availableItem.requiresReporting &&\r\n          (availableItem.allocatedLocation?.id || 'no-location') === locationKey &&\r\n          !itemsInOtherReceipts.has(availableItem.id) // Check items not in other receipts\r\n        );\r\n        \r\n        if (selectedQuantity > availableItemsOfSameName.length) {\r\n          setError(`לא ניתן להוסיף ${selectedQuantity} פריטים. זמין: ${availableItemsOfSameName.length}`);\r\n          return;\r\n        }\r\n        \r\n        // Final validation - make sure the specific selected item is not in another receipt\r\n        if (itemsInOtherReceipts.has(selectedItem.id)) {\r\n          setError(`הפריט \"${selectedItem.itemName?.name}\" כבר נמצא בקבלה אחרת`);\r\n          return;\r\n        }\r\n        \r\n        const newReceiptItem: ReceiptItem = {\r\n          id: selectedItem.id,\r\n          name: selectedItem.itemName?.name || 'פריט לא ידוע',\r\n          requiresReporting: selectedItem.requiresReporting || false,\r\n          idNumber: selectedItem.idNumber || undefined,\r\n          allocatedLocation: selectedItem.allocatedLocation,\r\n          quantity: selectedQuantity\r\n        };\r\n        setReceiptItems(prev => [...prev, newReceiptItem]);\r\n      }\r\n    }\r\n    \r\n    // Reset selection and clear any previous errors\r\n    setSelectedItemId('');\r\n    setSelectedQuantity(1);\r\n    setError(null); // Clear error on successful add\r\n  };\r\n\r\n  // Remove item from receipt\r\n  const removeItem = (itemId: string) => {\r\n    setReceiptItems(prev => prev.filter(item => item.id !== itemId));\r\n  };\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    \r\n    if (!selectedUserId) {\r\n      setError('Please select a user');\r\n      return;\r\n    }\r\n\r\n    if (receiptItems.length === 0) {\r\n      setError('Please select at least one item');\r\n      return;\r\n    }\r\n\r\n    if (!userProfile?.id) {\r\n      setError('User profile not loaded');\r\n      return;\r\n    }\r\n\r\n    setIsLoading(true);\r\n    setError(null);\r\n\r\n    try {\r\n      // Convert receipt items to server format\r\n      const serverItems: string[] = [];\r\n      \r\n      receiptItems.forEach(item => {\r\n        // For ALL items (both cipher and non-cipher), just add the item ID\r\n        // Since we're now tracking individual items by their unique IDs\r\n        serverItems.push(item.id);\r\n      });\r\n\r\n      if (isUpdateMode && originalReceipt) {\r\n        // Only send attributes that have changed\r\n        const updateData: any = {};\r\n        \r\n        // Check if signedById changed\r\n        if (selectedUserId !== originalReceipt.signedById) {\r\n          updateData.signedById = selectedUserId;\r\n        }\r\n        \r\n        // Check if note changed (normalize both values for comparison)\r\n        const currentNote = note.trim() || null;\r\n        const originalNote = originalReceipt.note || null;\r\n        if (currentNote !== originalNote) {\r\n          updateData.note = currentNote;\r\n        }\r\n        \r\n        // Check if items changed\r\n        const originalItems = originalReceipt.receiptItems?.map(item => item.itemId) || [];\r\n        const currentItems = serverItems;\r\n        \r\n        // Compare arrays (order doesn't matter for this comparison)\r\n        const itemsChanged = originalItems.length !== currentItems.length || \r\n          !originalItems.every(itemId => currentItems.includes(itemId)) ||\r\n          !currentItems.every(itemId => originalItems.includes(itemId));\r\n        \r\n        if (itemsChanged) {\r\n          updateData.items = serverItems;\r\n        }\r\n        \r\n        // Only make the API call if there are changes\r\n        if (Object.keys(updateData).length === 0) {\r\n          setError('לא נעשו שינויים בקבלה');\r\n          return;\r\n        }\r\n        \r\n        // Update existing receipt with only changed fields\r\n        await updateReceipt(originalReceipt.id, updateData);\r\n      } else {\r\n        // Create new receipt\r\n        await receiptService.create({\r\n          createdById: userProfile.id,\r\n          signedById: selectedUserId,\r\n          note: note.trim() || null,\r\n          items: serverItems,\r\n        });\r\n      }\r\n      onSuccess();\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : (isUpdateMode ? 'Failed to update receipt' : 'Failed to create receipt'));\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div style={{\r\n      background: 'rgba(255, 255, 255, 0.05)',\r\n      borderRadius: '16px',\r\n      border: '1px solid rgba(255, 255, 255, 0.1)',\r\n      padding: '32px',\r\n      backdropFilter: 'blur(10px)',\r\n      maxWidth: '900px',\r\n      margin: '0 auto',\r\n      direction: 'rtl'\r\n    }}>\r\n      <h3 style={{ \r\n        marginBottom: '24px', \r\n        color: 'rgba(255, 255, 255, 0.9)',\r\n        fontSize: '24px',\r\n        fontWeight: '600',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        gap: '12px'\r\n      }}>\r\n        <div style={{\r\n          width: '40px',\r\n          height: '40px',\r\n          borderRadius: '10px',\r\n          background: 'linear-gradient(135deg, #3b82f6, #1d4ed8)',\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          justifyContent: 'center'\r\n        }}>\r\n          <i className=\"fas fa-file-plus\" style={{ color: 'white', fontSize: '18px' }}></i>\r\n        </div>\r\n        {isUpdateMode ? 'עדכון קבלה' : 'יצירת קבלה חדשה'}\r\n      </h3>\r\n      \r\n      {/* Changes indicator for update mode */}\r\n      {isUpdateMode && hasChanges && (\r\n        <div style={{\r\n          background: 'linear-gradient(135deg, rgba(245, 158, 11, 0.1), rgba(217, 119, 6, 0.05))',\r\n          borderRadius: '12px',\r\n          border: '1px solid rgba(245, 158, 11, 0.2)',\r\n          padding: '12px 16px',\r\n          marginBottom: '24px',\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          gap: '12px'\r\n        }}>\r\n          <i className=\"fas fa-edit\" style={{ color: '#f59e0b', fontSize: '16px' }}></i>\r\n          <span style={{ color: 'rgba(255, 255, 255, 0.9)', fontSize: '14px' }}>\r\n            יש לך שינויים שלא נשמרו\r\n          </span>\r\n        </div>\r\n      )}\r\n      \r\n      {(error || itemsError) && (\r\n        <div style={{\r\n          background: 'linear-gradient(135deg, rgba(239, 68, 68, 0.1), rgba(220, 38, 38, 0.05))',\r\n          borderRadius: '12px',\r\n          border: '1px solid rgba(239, 68, 68, 0.2)',\r\n          padding: '16px',\r\n          marginBottom: '24px',\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          gap: '12px'\r\n        }}>\r\n          <i className=\"fas fa-exclamation-triangle\" style={{ color: '#ef4444', fontSize: '16px' }}></i>\r\n          <span style={{ color: 'rgba(255, 255, 255, 0.9)' }}>\r\n            {error || itemsError}\r\n          </span>\r\n        </div>\r\n      )}\r\n\r\n      {itemsLoading && (\r\n        <div style={{ \r\n          textAlign: 'center', \r\n          padding: '20px', \r\n          color: 'rgba(255, 255, 255, 0.7)',\r\n          background: 'rgba(255, 255, 255, 0.05)',\r\n          borderRadius: '12px',\r\n          marginBottom: '24px'\r\n        }}>\r\n          <i className=\"fas fa-spinner fa-spin\" style={{ marginLeft: '8px' }}></i>\r\n          טוען פריטים זמינים...\r\n        </div>\r\n      )}\r\n\r\n      <form onSubmit={handleSubmit}>\r\n        {/* User Selection */}\r\n        <div style={{ marginBottom: '24px' }}>\r\n          <label style={{\r\n            display: 'block',\r\n            fontSize: '14px',\r\n            fontWeight: '600',\r\n            color: 'rgba(255, 255, 255, 0.9)',\r\n            marginBottom: '8px'\r\n          }}>\r\n            בחר משתמש <span style={{ color: '#ef4444' }}>*</span>\r\n          </label>\r\n          <select\r\n            value={selectedUserId}\r\n            onChange={(e) => setSelectedUserId(e.target.value)}\r\n            required\r\n            style={{\r\n              width: '100%',\r\n              padding: '12px 16px',\r\n              background: 'rgba(255, 255, 255, 0.1)',\r\n              border: '1px solid rgba(255, 255, 255, 0.2)',\r\n              borderRadius: '8px',\r\n              color: 'rgba(255, 255, 255, 0.9)',\r\n              fontSize: '14px',\r\n              transition: 'all 0.2s ease',\r\n              outline: 'none',\r\n              appearance: 'none',\r\n              backgroundImage: `url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='rgba(255,255,255,0.5)' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e\")`,\r\n              backgroundPosition: 'left 12px center',\r\n              backgroundRepeat: 'no-repeat',\r\n              backgroundSize: '16px 16px',\r\n              paddingLeft: '40px',\r\n              cursor: 'pointer'\r\n            }}\r\n            onFocus={(e) => {\r\n              (e.target as HTMLSelectElement).style.borderColor = 'rgba(59, 130, 246, 0.5)';\r\n              (e.target as HTMLSelectElement).style.background = 'rgba(255, 255, 255, 0.15)';\r\n            }}\r\n            onBlur={(e) => {\r\n              (e.target as HTMLSelectElement).style.borderColor = 'rgba(255, 255, 255, 0.2)';\r\n              (e.target as HTMLSelectElement).style.background = 'rgba(255, 255, 255, 0.1)';\r\n            }}\r\n          >\r\n            <option value=\"\" style={{\r\n              background: '#1f2937',\r\n              color: 'rgba(255, 255, 255, 0.7)'\r\n            }}>\r\n              בחר משתמש...\r\n            </option>\r\n            {users\r\n              .map((user: User) => (\r\n                <option \r\n                  key={user.id} \r\n                  value={user.id}\r\n                  style={{\r\n                    background: '#1f2937',\r\n                    color: 'rgba(255, 255, 255, 0.9)'\r\n                  }}\r\n                >\r\n                  {user.name} ({user.personalNumber})\r\n                  {user.id === userProfile?.id && ' - אני'}\r\n                </option>\r\n              ))}\r\n          </select>\r\n          {users.length === 0 && (\r\n            <div style={{\r\n              color: '#ef4444',\r\n              fontSize: '12px',\r\n              marginTop: '4px',\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              gap: '4px'\r\n            }}>\r\n              <i className=\"fas fa-exclamation-circle\"></i>\r\n              לא נמצאו משתמשים זמינים\r\n            </div>\r\n          )}\r\n          {users.length > 0 && users.length === 1 && users[0].id === userProfile?.id && (\r\n            <div style={{\r\n              color: '#f59e0b',\r\n              fontSize: '12px',\r\n              marginTop: '4px',\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              gap: '4px'\r\n            }}>\r\n              <i className=\"fas fa-info-circle\"></i>\r\n              ניתן ליצור קבלה רק עבור עצמך כרגע\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Note Field */}\r\n        <div style={{ marginBottom: '24px' }}>\r\n          <label style={{\r\n            display: 'block',\r\n            fontSize: '14px',\r\n            fontWeight: '600',\r\n            color: 'rgba(255, 255, 255, 0.9)',\r\n            marginBottom: '8px'\r\n          }}>\r\n            הערה (אופציונלי)\r\n          </label>\r\n          <textarea\r\n            value={note}\r\n            onChange={(e) => setNote(e.target.value)}\r\n            maxLength={500}\r\n            rows={3}\r\n            placeholder=\"הכנס הערה או הסבר נוסף עבור הקבלה...\"\r\n            style={{\r\n              width: '100%',\r\n              padding: '12px 16px',\r\n              background: 'rgba(255, 255, 255, 0.1)',\r\n              border: '1px solid rgba(255, 255, 255, 0.2)',\r\n              borderRadius: '8px',\r\n              color: 'rgba(255, 255, 255, 0.9)',\r\n              fontSize: '14px',\r\n              transition: 'all 0.2s ease',\r\n              outline: 'none',\r\n              resize: 'vertical',\r\n              minHeight: '80px',\r\n              fontFamily: 'inherit',\r\n              lineHeight: '1.5'\r\n            }}\r\n            onFocus={(e) => {\r\n              (e.target as HTMLTextAreaElement).style.borderColor = 'rgba(59, 130, 246, 0.5)';\r\n              (e.target as HTMLTextAreaElement).style.background = 'rgba(255, 255, 255, 0.15)';\r\n            }}\r\n            onBlur={(e) => {\r\n              (e.target as HTMLTextAreaElement).style.borderColor = 'rgba(255, 255, 255, 0.2)';\r\n              (e.target as HTMLTextAreaElement).style.background = 'rgba(255, 255, 255, 0.1)';\r\n            }}\r\n          />\r\n          <div style={{\r\n            display: 'flex',\r\n            justifyContent: 'space-between',\r\n            alignItems: 'center',\r\n            marginTop: '6px'\r\n          }}>\r\n            <small style={{ \r\n              color: 'rgba(255, 255, 255, 0.6)',\r\n              fontSize: '12px'\r\n            }}>\r\n              הערה זו תוצג בפרטי הקבלה ובדוחות\r\n            </small>\r\n            <small style={{ \r\n              color: note.length > 450 ? '#ef4444' : 'rgba(255, 255, 255, 0.6)',\r\n              fontSize: '12px',\r\n              fontWeight: note.length > 450 ? '600' : 'normal'\r\n            }}>\r\n              {note.length}/500 תווים\r\n            </small>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Items Selection */}\r\n        <div style={{ marginBottom: '24px' }}>\r\n          <label style={{\r\n            display: 'block',\r\n            fontSize: '14px',\r\n            fontWeight: '600',\r\n            color: 'rgba(255, 255, 255, 0.9)',\r\n            marginBottom: '8px'\r\n          }}>\r\n            הוסף פריטים <span style={{ color: '#ef4444' }}>*</span>\r\n          </label>\r\n          \r\n          {/* Warning about items in other receipts */}\r\n          {!itemsLoading && itemsInOtherReceipts.size > 0 && (\r\n            <div style={{\r\n              background: 'linear-gradient(135deg, rgba(245, 158, 11, 0.1), rgba(217, 119, 6, 0.05))',\r\n              borderRadius: '12px',\r\n              border: '1px solid rgba(245, 158, 11, 0.2)',\r\n              padding: '16px',\r\n              marginBottom: '16px',\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              gap: '12px'\r\n            }}>\r\n              <i className=\"fas fa-exclamation-triangle\" style={{ color: '#f59e0b', fontSize: '16px' }}></i>\r\n              <div style={{ color: 'rgba(255, 255, 255, 0.9)', fontSize: '14px' }}>\r\n                <strong>שים לב:</strong> חלק מהפריטים אינם זמינים כיוון שהם כבר נמצאים בקבלות אחרות. \r\n                כל פריט יכול להיות רק בקבלה אחת בכל זמן נתון.\r\n              </div>\r\n            </div>\r\n          )}\r\n          \r\n          {/* Searchable Item Selection */}\r\n          <div style={{ marginBottom: '16px' }}>\r\n            <div style={{\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              gap: '8px',\r\n              background: 'rgba(255, 255, 255, 0.1)',\r\n              borderRadius: '8px',\r\n              border: `1px solid ${selectedItemId ? 'rgba(34, 197, 94, 0.5)' : 'rgba(255, 255, 255, 0.2)'}`,\r\n              padding: '4px',\r\n              transition: 'all 0.2s ease'\r\n            }}>\r\n              <div style={{\r\n                padding: '8px 12px',\r\n                color: selectedItemId ? '#22c55e' : 'rgba(255, 255, 255, 0.5)'\r\n              }}>\r\n                <i className={`fas ${selectedItemId ? 'fa-check' : 'fa-search'}`}></i>\r\n              </div>\r\n              <input\r\n                type=\"text\"\r\n                placeholder=\"חפש ובחר פריט לפי שם או מספר צ'...\"\r\n                value={itemSearchQuery}\r\n                onChange={(e) => setItemSearchQuery(e.target.value)}\r\n                disabled={itemsLoading}\r\n                onFocus={() => {\r\n                  if (selectedItemId) {\r\n                    setSelectedItemId('');\r\n                  }\r\n                }}\r\n                style={{\r\n                  flex: 1,\r\n                  background: 'none',\r\n                  border: 'none',\r\n                  outline: 'none',\r\n                  color: 'rgba(255, 255, 255, 0.9)',\r\n                  fontSize: '14px',\r\n                  padding: '8px 4px'\r\n                }}\r\n              />\r\n              {(itemSearchQuery || selectedItemId) && (\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() => {\r\n                    setItemSearchQuery('');\r\n                    setSelectedItemId('');\r\n                  }}\r\n                  title={selectedItemId ? \"נקה בחירה\" : \"נקה חיפוש\"}\r\n                  style={{\r\n                    background: 'none',\r\n                    border: 'none',\r\n                    color: 'rgba(255, 255, 255, 0.7)',\r\n                    cursor: 'pointer',\r\n                    padding: '8px 12px',\r\n                    borderRadius: '4px',\r\n                    transition: 'all 0.2s ease'\r\n                  }}\r\n                >\r\n                  <i className=\"fas fa-times\"></i>\r\n                </button>\r\n              )}\r\n            </div>\r\n            \r\n            {/* Show dropdown results only when there's a search query and no item is selected */}\r\n            {itemSearchQuery && !selectedItemId && (\r\n              <div style={{\r\n                border: '1px solid rgba(255, 255, 255, 0.2)',\r\n                borderRadius: '8px',\r\n                background: 'rgba(255, 255, 255, 0.1)',\r\n                backdropFilter: 'blur(10px)',\r\n                maxHeight: '300px',\r\n                overflowY: 'auto',\r\n                boxShadow: '0 4px 20px rgba(0, 0, 0, 0.3)',\r\n                marginTop: '8px'\r\n              }}>\r\n                {itemsLoading && (\r\n                  <div style={{ \r\n                    padding: '12px', \r\n                    color: 'rgba(255, 255, 255, 0.7)',\r\n                    textAlign: 'center'\r\n                  }}>\r\n                    <i className=\"fas fa-spinner fa-spin\" style={{ marginLeft: '8px' }}></i>\r\n                    טוען פריטים...\r\n                  </div>\r\n                )}\r\n                \r\n                {!itemsLoading && filteredAvailableItems.length === 0 && itemSearchQuery && (\r\n                  <div style={{ \r\n                    padding: '12px', \r\n                    color: '#ef4444',\r\n                    textAlign: 'center'\r\n                  }}>\r\n                    לא נמצאו פריטים התואמים לחיפוש \"{itemSearchQuery}\"\r\n                  </div>\r\n                )}\r\n                \r\n                {!itemsLoading && availableItems.length === 0 && !itemSearchQuery && (\r\n                  <div style={{ \r\n                    padding: '12px', \r\n                    color: '#ef4444',\r\n                    textAlign: 'center'\r\n                  }}>\r\n                    אין פריטים זמינים\r\n                  </div>\r\n                )}\r\n                \r\n                {!itemsLoading && filteredAvailableItems.length > 0 && (\r\n                  <>\r\n                    <div style={{ \r\n                      padding: '8px 12px', \r\n                      background: 'rgba(255, 255, 255, 0.1)', \r\n                      borderBottom: '1px solid rgba(255, 255, 255, 0.1)',\r\n                      fontSize: '12px',\r\n                      color: 'rgba(255, 255, 255, 0.7)'\r\n                    }}>\r\n                      {itemSearchQuery ? \r\n                        `נמצאו ${filteredAvailableItems.length} פריטים מתוך ${availableItems.length}` :\r\n                        `${availableItems.length} פריטים זמינים`\r\n                      }\r\n                    </div>\r\n                    {filteredAvailableItems.map(item => {\r\n                      const itemName = item.itemName?.name || 'ללא שם';\r\n                      \r\n                      return (\r\n                        <div\r\n                          key={item.id}\r\n                          style={{\r\n                            padding: '12px',\r\n                            cursor: 'pointer',\r\n                            borderBottom: '1px solid rgba(255, 255, 255, 0.05)',\r\n                            transition: 'all 0.2s ease',\r\n                            color: 'rgba(255, 255, 255, 0.9)'\r\n                          }}\r\n                          onClick={() => {\r\n                            // Immediately add the item to the receipt\r\n                            const quantityToAdd = item.requiresReporting ? 1 : selectedQuantity;\r\n                            addItemDirectly(item, quantityToAdd);\r\n                          }}\r\n                        >\r\n                          <div style={{ fontWeight: '600', marginBottom: '4px' }}>\r\n                            {itemName}\r\n                            {item.requiresReporting && (\r\n                              <span style={{\r\n                                background: 'linear-gradient(135deg, #f59e0b, #d97706)',\r\n                                color: 'white',\r\n                                fontSize: '10px',\r\n                                padding: '2px 6px',\r\n                                borderRadius: '4px',\r\n                                marginRight: '8px',\r\n                                fontWeight: '600'\r\n                              }}>\r\n                                צופן\r\n                              </span>\r\n                            )}\r\n                          </div>\r\n                          {item.idNumber && (\r\n                            <div style={{ fontSize: '12px', color: 'rgba(255, 255, 255, 0.6)', marginBottom: '2px' }}>\r\n                              מספר צ': {item.idNumber}\r\n                            </div>\r\n                          )}\r\n                          {item.allocatedLocation?.name && (\r\n                            <div style={{ fontSize: '12px', color: 'rgba(255, 255, 255, 0.6)' }}>\r\n                              הקצאה: {item.allocatedLocation.name}\r\n                            </div>\r\n                          )}\r\n                        </div>\r\n                      );\r\n                    })}\r\n                  </>\r\n                )}\r\n              </div>\r\n            )}\r\n          </div>\r\n          \r\n          {/* Add button - only show if an item is selected but not immediately added */}\r\n          {selectedItem && (\r\n            <div style={{ marginTop: '16px' }}>\r\n              <div style={{\r\n                background: 'linear-gradient(135deg, rgba(59, 130, 246, 0.1), rgba(29, 78, 216, 0.05))',\r\n                borderRadius: '12px',\r\n                border: '1px solid rgba(59, 130, 246, 0.2)',\r\n                padding: '16px',\r\n                marginBottom: '16px',\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                justifyContent: 'space-between'\r\n              }}>\r\n                <div style={{ display: 'flex', alignItems: 'center', gap: '12px' }}>\r\n                  <i className=\"fas fa-info-circle\" style={{ color: '#3b82f6', fontSize: '16px' }}></i>\r\n                  <span style={{ color: 'rgba(255, 255, 255, 0.9)' }}>\r\n                    פריט נבחר: <strong>{selectedItem.itemName?.name}</strong>\r\n                    {selectedItem.requiresReporting && (\r\n                      <span style={{\r\n                        background: 'linear-gradient(135deg, #f59e0b, #d97706)',\r\n                        color: 'white',\r\n                        fontSize: '10px',\r\n                        padding: '2px 6px',\r\n                        borderRadius: '4px',\r\n                        marginRight: '8px',\r\n                        fontWeight: '600'\r\n                      }}>\r\n                        צופן\r\n                      </span>\r\n                    )}\r\n                  </span>\r\n                </div>\r\n              </div>\r\n              <button \r\n                type=\"button\" \r\n                onClick={addItem}\r\n                disabled={!selectedItem || itemsLoading}\r\n                style={{\r\n                  background: (!selectedItem || itemsLoading) ? \r\n                    'rgba(255, 255, 255, 0.1)' : \r\n                    'linear-gradient(135deg, #3b82f6, #1d4ed8)',\r\n                  border: 'none',\r\n                  borderRadius: '8px',\r\n                  padding: '12px 24px',\r\n                  color: 'white',\r\n                  fontSize: '14px',\r\n                  fontWeight: '600',\r\n                  cursor: (!selectedItem || itemsLoading) ? 'not-allowed' : 'pointer',\r\n                  transition: 'all 0.2s ease',\r\n                  boxShadow: (!selectedItem || itemsLoading) ? \r\n                    'none' : \r\n                    '0 4px 16px rgba(59, 130, 246, 0.3)'\r\n                }}\r\n              >\r\n                <i className=\"fas fa-plus\" style={{ marginLeft: '8px' }}></i>\r\n                הוסף פריט\r\n              </button>\r\n            </div>\r\n          )}\r\n\r\n          {/* Selected items table */}\r\n          <div style={{ marginTop: '24px' }}>\r\n            <SelectedItemsTable \r\n              items={receiptItems}\r\n              onRemove={(id) => {\r\n                // Remove the specific item by ID\r\n                removeItem(id);\r\n              }}\r\n              availableItems={serverAvailableItems || []}\r\n              onAddItem={(serverItem) => {\r\n                // Convert server item to AvailableItemForForm format\r\n                const itemToAdd: AvailableItemForForm = {\r\n                  id: serverItem.id,\r\n                  idNumber: serverItem.idNumber || undefined,\r\n                  itemName: serverItem.itemName || { name: 'Unknown Item' },\r\n                  requiresReporting: serverItem.requiresReporting || false,\r\n                  allocatedLocation: serverItem.allocatedLocation || undefined,\r\n                };\r\n                addItemDirectly(itemToAdd, 1);\r\n              }}\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        {/* Actions */}\r\n        <div style={{\r\n          display: 'flex',\r\n          justifyContent: 'flex-end',\r\n          gap: '12px',\r\n          marginTop: '32px',\r\n          paddingTop: '24px',\r\n          borderTop: '1px solid rgba(255, 255, 255, 0.1)'\r\n        }}>\r\n          <button \r\n            type=\"button\" \r\n            onClick={onCancel}\r\n            style={{\r\n              background: 'rgba(255, 255, 255, 0.1)',\r\n              border: '1px solid rgba(255, 255, 255, 0.2)',\r\n              borderRadius: '8px',\r\n              padding: '12px 24px',\r\n              color: 'rgba(255, 255, 255, 0.8)',\r\n              fontSize: '14px',\r\n              fontWeight: '600',\r\n              cursor: 'pointer',\r\n              transition: 'all 0.2s ease'\r\n            }}\r\n          >\r\n            ביטול\r\n          </button>\r\n          <button \r\n            type=\"submit\" \r\n            disabled={isLoading || (isUpdateMode && !hasChanges)}\r\n            style={{\r\n              background: (isLoading || (isUpdateMode && !hasChanges)) ? \r\n                'rgba(255, 255, 255, 0.1)' : \r\n                'linear-gradient(135deg, #3b82f6, #1d4ed8)',\r\n              border: 'none',\r\n              borderRadius: '8px',\r\n              padding: '12px 24px',\r\n              color: 'white',\r\n              fontSize: '14px',\r\n              fontWeight: '600',\r\n              cursor: (isLoading || (isUpdateMode && !hasChanges)) ? 'not-allowed' : 'pointer',\r\n              transition: 'all 0.2s ease',\r\n              boxShadow: (isLoading || (isUpdateMode && !hasChanges)) ? 'none' : '0 4px 16px rgba(59, 130, 246, 0.3)'\r\n            }}\r\n            title={isUpdateMode && !hasChanges ? 'לא בוצעו שינויים' : undefined}\r\n          >\r\n            {isUpdateMode ? \r\n              (hasChanges ? 'עדכן קבלה' : 'אין שינויים') : \r\n              'צור קבלה'\r\n            }\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ReceiptForm;\r\n","import { useState, useEffect } from 'react';\r\nimport { itemService } from '../services';\r\nimport { Item } from '../types';\r\n\r\nexport const useAvailableItems = () => {\r\n  const [availableItems, setAvailableItems] = useState<Item[]>([]);\r\n  const [loading, setLoading] = useState<boolean>(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  const fetchAvailableItems = async () => {\r\n    try {\r\n      setLoading(true);\r\n      setError(null);\r\n      const data = await itemService.getAvailableItems();\r\n      setAvailableItems(Array.isArray(data) ? data : []);\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : 'Failed to fetch available items');\r\n      setAvailableItems([]); // Ensure empty array on error\r\n      // Removed console.error to avoid noisy logs\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchAvailableItems();\r\n  }, []);\r\n\r\n  return {\r\n    availableItems,\r\n    loading,\r\n    error,\r\n    refetch: fetchAvailableItems,\r\n  };\r\n};\r\n","function _extends() {\n  return _extends = Object.assign ? Object.assign.bind() : function (n) {\n    for (var e = 1; e < arguments.length; e++) {\n      var t = arguments[e];\n      for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]);\n    }\n    return n;\n  }, _extends.apply(null, arguments);\n}\nexport { _extends as default };","function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, _typeof(o);\n}\nexport { _typeof as default };","import _typeof from \"./typeof.js\";\nimport toPrimitive from \"./toPrimitive.js\";\nfunction toPropertyKey(t) {\n  var i = toPrimitive(t, \"string\");\n  return \"symbol\" == _typeof(i) ? i : i + \"\";\n}\nexport { toPropertyKey as default };","import _typeof from \"./typeof.js\";\nfunction toPrimitive(t, r) {\n  if (\"object\" != _typeof(t) || !t) return t;\n  var e = t[Symbol.toPrimitive];\n  if (void 0 !== e) {\n    var i = e.call(t, r || \"default\");\n    if (\"object\" != _typeof(i)) return i;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (\"string\" === r ? String : Number)(t);\n}\nexport { toPrimitive as default };","import toPropertyKey from \"./toPropertyKey.js\";\nfunction _defineProperties(e, r) {\n  for (var t = 0; t < r.length; t++) {\n    var o = r[t];\n    o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, toPropertyKey(o.key), o);\n  }\n}\nfunction _createClass(e, r, t) {\n  return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", {\n    writable: !1\n  }), e;\n}\nexport { _createClass as default };","function _setPrototypeOf(t, e) {\n  return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) {\n    return t.__proto__ = e, t;\n  }, _setPrototypeOf(t, e);\n}\nexport { _setPrototypeOf as default };","function _getPrototypeOf(t) {\n  return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) {\n    return t.__proto__ || Object.getPrototypeOf(t);\n  }, _getPrototypeOf(t);\n}\nexport { _getPrototypeOf as default };","function _isNativeReflectConstruct() {\n  try {\n    var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n  } catch (t) {}\n  return (_isNativeReflectConstruct = function _isNativeReflectConstruct() {\n    return !!t;\n  })();\n}\nexport { _isNativeReflectConstruct as default };","import _typeof from \"./typeof.js\";\nimport assertThisInitialized from \"./assertThisInitialized.js\";\nfunction _possibleConstructorReturn(t, e) {\n  if (e && (\"object\" == _typeof(e) || \"function\" == typeof e)) return e;\n  if (void 0 !== e) throw new TypeError(\"Derived constructors may only return object or undefined\");\n  return assertThisInitialized(t);\n}\nexport { _possibleConstructorReturn as default };","function _assertThisInitialized(e) {\n  if (void 0 === e) throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  return e;\n}\nexport { _assertThisInitialized as default };","/*!\n * Signature Pad v2.3.2\n * https://github.com/szimek/signature_pad\n *\n * Copyright 2017 Szymon Nowak\n * Released under the MIT license\n *\n * The main idea and some parts of the code (e.g. drawing variable width Bézier curve) are taken from:\n * http://corner.squareup.com/2012/07/smoother-signatures.html\n *\n * Implementation of interpolation using cubic Bézier curves is taken from:\n * http://benknowscode.wordpress.com/2012/09/14/path-interpolation-using-cubic-bezier-and-control-point-estimation-in-javascript\n *\n * Algorithm for approximated length of a Bézier curve is taken from:\n * http://www.lemoda.net/maths/bezier-length/index.html\n *\n */\n\nfunction Point(x, y, time) {\n  this.x = x;\n  this.y = y;\n  this.time = time || new Date().getTime();\n}\n\nPoint.prototype.velocityFrom = function (start) {\n  return this.time !== start.time ? this.distanceTo(start) / (this.time - start.time) : 1;\n};\n\nPoint.prototype.distanceTo = function (start) {\n  return Math.sqrt(Math.pow(this.x - start.x, 2) + Math.pow(this.y - start.y, 2));\n};\n\nPoint.prototype.equals = function (other) {\n  return this.x === other.x && this.y === other.y && this.time === other.time;\n};\n\nfunction Bezier(startPoint, control1, control2, endPoint) {\n  this.startPoint = startPoint;\n  this.control1 = control1;\n  this.control2 = control2;\n  this.endPoint = endPoint;\n}\n\n// Returns approximated length.\nBezier.prototype.length = function () {\n  var steps = 10;\n  var length = 0;\n  var px = void 0;\n  var py = void 0;\n\n  for (var i = 0; i <= steps; i += 1) {\n    var t = i / steps;\n    var cx = this._point(t, this.startPoint.x, this.control1.x, this.control2.x, this.endPoint.x);\n    var cy = this._point(t, this.startPoint.y, this.control1.y, this.control2.y, this.endPoint.y);\n    if (i > 0) {\n      var xdiff = cx - px;\n      var ydiff = cy - py;\n      length += Math.sqrt(xdiff * xdiff + ydiff * ydiff);\n    }\n    px = cx;\n    py = cy;\n  }\n\n  return length;\n};\n\n/* eslint-disable no-multi-spaces, space-in-parens */\nBezier.prototype._point = function (t, start, c1, c2, end) {\n  return start * (1.0 - t) * (1.0 - t) * (1.0 - t) + 3.0 * c1 * (1.0 - t) * (1.0 - t) * t + 3.0 * c2 * (1.0 - t) * t * t + end * t * t * t;\n};\n\n/* eslint-disable */\n\n// http://stackoverflow.com/a/27078401/815507\nfunction throttle(func, wait, options) {\n  var context, args, result;\n  var timeout = null;\n  var previous = 0;\n  if (!options) options = {};\n  var later = function later() {\n    previous = options.leading === false ? 0 : Date.now();\n    timeout = null;\n    result = func.apply(context, args);\n    if (!timeout) context = args = null;\n  };\n  return function () {\n    var now = Date.now();\n    if (!previous && options.leading === false) previous = now;\n    var remaining = wait - (now - previous);\n    context = this;\n    args = arguments;\n    if (remaining <= 0 || remaining > wait) {\n      if (timeout) {\n        clearTimeout(timeout);\n        timeout = null;\n      }\n      previous = now;\n      result = func.apply(context, args);\n      if (!timeout) context = args = null;\n    } else if (!timeout && options.trailing !== false) {\n      timeout = setTimeout(later, remaining);\n    }\n    return result;\n  };\n}\n\nfunction SignaturePad(canvas, options) {\n  var self = this;\n  var opts = options || {};\n\n  this.velocityFilterWeight = opts.velocityFilterWeight || 0.7;\n  this.minWidth = opts.minWidth || 0.5;\n  this.maxWidth = opts.maxWidth || 2.5;\n  this.throttle = 'throttle' in opts ? opts.throttle : 16; // in miliseconds\n  this.minDistance = 'minDistance' in opts ? opts.minDistance : 5;\n\n  if (this.throttle) {\n    this._strokeMoveUpdate = throttle(SignaturePad.prototype._strokeUpdate, this.throttle);\n  } else {\n    this._strokeMoveUpdate = SignaturePad.prototype._strokeUpdate;\n  }\n\n  this.dotSize = opts.dotSize || function () {\n    return (this.minWidth + this.maxWidth) / 2;\n  };\n  this.penColor = opts.penColor || 'black';\n  this.backgroundColor = opts.backgroundColor || 'rgba(0,0,0,0)';\n  this.onBegin = opts.onBegin;\n  this.onEnd = opts.onEnd;\n\n  this._canvas = canvas;\n  this._ctx = canvas.getContext('2d');\n  this.clear();\n\n  // We need add these inline so they are available to unbind while still having\n  // access to 'self' we could use _.bind but it's not worth adding a dependency.\n  this._handleMouseDown = function (event) {\n    if (event.which === 1) {\n      self._mouseButtonDown = true;\n      self._strokeBegin(event);\n    }\n  };\n\n  this._handleMouseMove = function (event) {\n    if (self._mouseButtonDown) {\n      self._strokeMoveUpdate(event);\n    }\n  };\n\n  this._handleMouseUp = function (event) {\n    if (event.which === 1 && self._mouseButtonDown) {\n      self._mouseButtonDown = false;\n      self._strokeEnd(event);\n    }\n  };\n\n  this._handleTouchStart = function (event) {\n    if (event.targetTouches.length === 1) {\n      var touch = event.changedTouches[0];\n      self._strokeBegin(touch);\n    }\n  };\n\n  this._handleTouchMove = function (event) {\n    // Prevent scrolling.\n    event.preventDefault();\n\n    var touch = event.targetTouches[0];\n    self._strokeMoveUpdate(touch);\n  };\n\n  this._handleTouchEnd = function (event) {\n    var wasCanvasTouched = event.target === self._canvas;\n    if (wasCanvasTouched) {\n      event.preventDefault();\n      self._strokeEnd(event);\n    }\n  };\n\n  // Enable mouse and touch event handlers\n  this.on();\n}\n\n// Public methods\nSignaturePad.prototype.clear = function () {\n  var ctx = this._ctx;\n  var canvas = this._canvas;\n\n  ctx.fillStyle = this.backgroundColor;\n  ctx.clearRect(0, 0, canvas.width, canvas.height);\n  ctx.fillRect(0, 0, canvas.width, canvas.height);\n\n  this._data = [];\n  this._reset();\n  this._isEmpty = true;\n};\n\nSignaturePad.prototype.fromDataURL = function (dataUrl) {\n  var _this = this;\n\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  var image = new Image();\n  var ratio = options.ratio || window.devicePixelRatio || 1;\n  var width = options.width || this._canvas.width / ratio;\n  var height = options.height || this._canvas.height / ratio;\n\n  this._reset();\n  image.src = dataUrl;\n  image.onload = function () {\n    _this._ctx.drawImage(image, 0, 0, width, height);\n  };\n  this._isEmpty = false;\n};\n\nSignaturePad.prototype.toDataURL = function (type) {\n  var _canvas;\n\n  switch (type) {\n    case 'image/svg+xml':\n      return this._toSVG();\n    default:\n      for (var _len = arguments.length, options = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        options[_key - 1] = arguments[_key];\n      }\n\n      return (_canvas = this._canvas).toDataURL.apply(_canvas, [type].concat(options));\n  }\n};\n\nSignaturePad.prototype.on = function () {\n  this._handleMouseEvents();\n  this._handleTouchEvents();\n};\n\nSignaturePad.prototype.off = function () {\n  this._canvas.removeEventListener('mousedown', this._handleMouseDown);\n  this._canvas.removeEventListener('mousemove', this._handleMouseMove);\n  document.removeEventListener('mouseup', this._handleMouseUp);\n\n  this._canvas.removeEventListener('touchstart', this._handleTouchStart);\n  this._canvas.removeEventListener('touchmove', this._handleTouchMove);\n  this._canvas.removeEventListener('touchend', this._handleTouchEnd);\n};\n\nSignaturePad.prototype.isEmpty = function () {\n  return this._isEmpty;\n};\n\n// Private methods\nSignaturePad.prototype._strokeBegin = function (event) {\n  this._data.push([]);\n  this._reset();\n  this._strokeUpdate(event);\n\n  if (typeof this.onBegin === 'function') {\n    this.onBegin(event);\n  }\n};\n\nSignaturePad.prototype._strokeUpdate = function (event) {\n  var x = event.clientX;\n  var y = event.clientY;\n\n  var point = this._createPoint(x, y);\n  var lastPointGroup = this._data[this._data.length - 1];\n  var lastPoint = lastPointGroup && lastPointGroup[lastPointGroup.length - 1];\n  var isLastPointTooClose = lastPoint && point.distanceTo(lastPoint) < this.minDistance;\n\n  // Skip this point if it's too close to the previous one\n  if (!(lastPoint && isLastPointTooClose)) {\n    var _addPoint = this._addPoint(point),\n        curve = _addPoint.curve,\n        widths = _addPoint.widths;\n\n    if (curve && widths) {\n      this._drawCurve(curve, widths.start, widths.end);\n    }\n\n    this._data[this._data.length - 1].push({\n      x: point.x,\n      y: point.y,\n      time: point.time,\n      color: this.penColor\n    });\n  }\n};\n\nSignaturePad.prototype._strokeEnd = function (event) {\n  var canDrawCurve = this.points.length > 2;\n  var point = this.points[0]; // Point instance\n\n  if (!canDrawCurve && point) {\n    this._drawDot(point);\n  }\n\n  if (point) {\n    var lastPointGroup = this._data[this._data.length - 1];\n    var lastPoint = lastPointGroup[lastPointGroup.length - 1]; // plain object\n\n    // When drawing a dot, there's only one point in a group, so without this check\n    // such group would end up with exactly the same 2 points.\n    if (!point.equals(lastPoint)) {\n      lastPointGroup.push({\n        x: point.x,\n        y: point.y,\n        time: point.time,\n        color: this.penColor\n      });\n    }\n  }\n\n  if (typeof this.onEnd === 'function') {\n    this.onEnd(event);\n  }\n};\n\nSignaturePad.prototype._handleMouseEvents = function () {\n  this._mouseButtonDown = false;\n\n  this._canvas.addEventListener('mousedown', this._handleMouseDown);\n  this._canvas.addEventListener('mousemove', this._handleMouseMove);\n  document.addEventListener('mouseup', this._handleMouseUp);\n};\n\nSignaturePad.prototype._handleTouchEvents = function () {\n  // Pass touch events to canvas element on mobile IE11 and Edge.\n  this._canvas.style.msTouchAction = 'none';\n  this._canvas.style.touchAction = 'none';\n\n  this._canvas.addEventListener('touchstart', this._handleTouchStart);\n  this._canvas.addEventListener('touchmove', this._handleTouchMove);\n  this._canvas.addEventListener('touchend', this._handleTouchEnd);\n};\n\nSignaturePad.prototype._reset = function () {\n  this.points = [];\n  this._lastVelocity = 0;\n  this._lastWidth = (this.minWidth + this.maxWidth) / 2;\n  this._ctx.fillStyle = this.penColor;\n};\n\nSignaturePad.prototype._createPoint = function (x, y, time) {\n  var rect = this._canvas.getBoundingClientRect();\n\n  return new Point(x - rect.left, y - rect.top, time || new Date().getTime());\n};\n\nSignaturePad.prototype._addPoint = function (point) {\n  var points = this.points;\n  var tmp = void 0;\n\n  points.push(point);\n\n  if (points.length > 2) {\n    // To reduce the initial lag make it work with 3 points\n    // by copying the first point to the beginning.\n    if (points.length === 3) points.unshift(points[0]);\n\n    tmp = this._calculateCurveControlPoints(points[0], points[1], points[2]);\n    var c2 = tmp.c2;\n    tmp = this._calculateCurveControlPoints(points[1], points[2], points[3]);\n    var c3 = tmp.c1;\n    var curve = new Bezier(points[1], c2, c3, points[2]);\n    var widths = this._calculateCurveWidths(curve);\n\n    // Remove the first element from the list,\n    // so that we always have no more than 4 points in points array.\n    points.shift();\n\n    return { curve: curve, widths: widths };\n  }\n\n  return {};\n};\n\nSignaturePad.prototype._calculateCurveControlPoints = function (s1, s2, s3) {\n  var dx1 = s1.x - s2.x;\n  var dy1 = s1.y - s2.y;\n  var dx2 = s2.x - s3.x;\n  var dy2 = s2.y - s3.y;\n\n  var m1 = { x: (s1.x + s2.x) / 2.0, y: (s1.y + s2.y) / 2.0 };\n  var m2 = { x: (s2.x + s3.x) / 2.0, y: (s2.y + s3.y) / 2.0 };\n\n  var l1 = Math.sqrt(dx1 * dx1 + dy1 * dy1);\n  var l2 = Math.sqrt(dx2 * dx2 + dy2 * dy2);\n\n  var dxm = m1.x - m2.x;\n  var dym = m1.y - m2.y;\n\n  var k = l2 / (l1 + l2);\n  var cm = { x: m2.x + dxm * k, y: m2.y + dym * k };\n\n  var tx = s2.x - cm.x;\n  var ty = s2.y - cm.y;\n\n  return {\n    c1: new Point(m1.x + tx, m1.y + ty),\n    c2: new Point(m2.x + tx, m2.y + ty)\n  };\n};\n\nSignaturePad.prototype._calculateCurveWidths = function (curve) {\n  var startPoint = curve.startPoint;\n  var endPoint = curve.endPoint;\n  var widths = { start: null, end: null };\n\n  var velocity = this.velocityFilterWeight * endPoint.velocityFrom(startPoint) + (1 - this.velocityFilterWeight) * this._lastVelocity;\n\n  var newWidth = this._strokeWidth(velocity);\n\n  widths.start = this._lastWidth;\n  widths.end = newWidth;\n\n  this._lastVelocity = velocity;\n  this._lastWidth = newWidth;\n\n  return widths;\n};\n\nSignaturePad.prototype._strokeWidth = function (velocity) {\n  return Math.max(this.maxWidth / (velocity + 1), this.minWidth);\n};\n\nSignaturePad.prototype._drawPoint = function (x, y, size) {\n  var ctx = this._ctx;\n\n  ctx.moveTo(x, y);\n  ctx.arc(x, y, size, 0, 2 * Math.PI, false);\n  this._isEmpty = false;\n};\n\nSignaturePad.prototype._drawCurve = function (curve, startWidth, endWidth) {\n  var ctx = this._ctx;\n  var widthDelta = endWidth - startWidth;\n  var drawSteps = Math.floor(curve.length());\n\n  ctx.beginPath();\n\n  for (var i = 0; i < drawSteps; i += 1) {\n    // Calculate the Bezier (x, y) coordinate for this step.\n    var t = i / drawSteps;\n    var tt = t * t;\n    var ttt = tt * t;\n    var u = 1 - t;\n    var uu = u * u;\n    var uuu = uu * u;\n\n    var x = uuu * curve.startPoint.x;\n    x += 3 * uu * t * curve.control1.x;\n    x += 3 * u * tt * curve.control2.x;\n    x += ttt * curve.endPoint.x;\n\n    var y = uuu * curve.startPoint.y;\n    y += 3 * uu * t * curve.control1.y;\n    y += 3 * u * tt * curve.control2.y;\n    y += ttt * curve.endPoint.y;\n\n    var width = startWidth + ttt * widthDelta;\n    this._drawPoint(x, y, width);\n  }\n\n  ctx.closePath();\n  ctx.fill();\n};\n\nSignaturePad.prototype._drawDot = function (point) {\n  var ctx = this._ctx;\n  var width = typeof this.dotSize === 'function' ? this.dotSize() : this.dotSize;\n\n  ctx.beginPath();\n  this._drawPoint(point.x, point.y, width);\n  ctx.closePath();\n  ctx.fill();\n};\n\nSignaturePad.prototype._fromData = function (pointGroups, drawCurve, drawDot) {\n  for (var i = 0; i < pointGroups.length; i += 1) {\n    var group = pointGroups[i];\n\n    if (group.length > 1) {\n      for (var j = 0; j < group.length; j += 1) {\n        var rawPoint = group[j];\n        var point = new Point(rawPoint.x, rawPoint.y, rawPoint.time);\n        var color = rawPoint.color;\n\n        if (j === 0) {\n          // First point in a group. Nothing to draw yet.\n\n          // All points in the group have the same color, so it's enough to set\n          // penColor just at the beginning.\n          this.penColor = color;\n          this._reset();\n\n          this._addPoint(point);\n        } else if (j !== group.length - 1) {\n          // Middle point in a group.\n          var _addPoint2 = this._addPoint(point),\n              curve = _addPoint2.curve,\n              widths = _addPoint2.widths;\n\n          if (curve && widths) {\n            drawCurve(curve, widths, color);\n          }\n        } else {\n          // Last point in a group. Do nothing.\n        }\n      }\n    } else {\n      this._reset();\n      var _rawPoint = group[0];\n      drawDot(_rawPoint);\n    }\n  }\n};\n\nSignaturePad.prototype._toSVG = function () {\n  var _this2 = this;\n\n  var pointGroups = this._data;\n  var canvas = this._canvas;\n  var ratio = Math.max(window.devicePixelRatio || 1, 1);\n  var minX = 0;\n  var minY = 0;\n  var maxX = canvas.width / ratio;\n  var maxY = canvas.height / ratio;\n  var svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n\n  svg.setAttributeNS(null, 'width', canvas.width);\n  svg.setAttributeNS(null, 'height', canvas.height);\n\n  this._fromData(pointGroups, function (curve, widths, color) {\n    var path = document.createElement('path');\n\n    // Need to check curve for NaN values, these pop up when drawing\n    // lines on the canvas that are not continuous. E.g. Sharp corners\n    // or stopping mid-stroke and than continuing without lifting mouse.\n    if (!isNaN(curve.control1.x) && !isNaN(curve.control1.y) && !isNaN(curve.control2.x) && !isNaN(curve.control2.y)) {\n      var attr = 'M ' + curve.startPoint.x.toFixed(3) + ',' + curve.startPoint.y.toFixed(3) + ' ' + ('C ' + curve.control1.x.toFixed(3) + ',' + curve.control1.y.toFixed(3) + ' ') + (curve.control2.x.toFixed(3) + ',' + curve.control2.y.toFixed(3) + ' ') + (curve.endPoint.x.toFixed(3) + ',' + curve.endPoint.y.toFixed(3));\n\n      path.setAttribute('d', attr);\n      path.setAttribute('stroke-width', (widths.end * 2.25).toFixed(3));\n      path.setAttribute('stroke', color);\n      path.setAttribute('fill', 'none');\n      path.setAttribute('stroke-linecap', 'round');\n\n      svg.appendChild(path);\n    }\n  }, function (rawPoint) {\n    var circle = document.createElement('circle');\n    var dotSize = typeof _this2.dotSize === 'function' ? _this2.dotSize() : _this2.dotSize;\n    circle.setAttribute('r', dotSize);\n    circle.setAttribute('cx', rawPoint.x);\n    circle.setAttribute('cy', rawPoint.y);\n    circle.setAttribute('fill', rawPoint.color);\n\n    svg.appendChild(circle);\n  });\n\n  var prefix = 'data:image/svg+xml;base64,';\n  var header = '<svg' + ' xmlns=\"http://www.w3.org/2000/svg\"' + ' xmlns:xlink=\"http://www.w3.org/1999/xlink\"' + (' viewBox=\"' + minX + ' ' + minY + ' ' + maxX + ' ' + maxY + '\"') + (' width=\"' + maxX + '\"') + (' height=\"' + maxY + '\"') + '>';\n  var body = svg.innerHTML;\n\n  // IE hack for missing innerHTML property on SVGElement\n  if (body === undefined) {\n    var dummy = document.createElement('dummy');\n    var nodes = svg.childNodes;\n    dummy.innerHTML = '';\n\n    for (var i = 0; i < nodes.length; i += 1) {\n      dummy.appendChild(nodes[i].cloneNode(true));\n    }\n\n    body = dummy.innerHTML;\n  }\n\n  var footer = '</svg>';\n  var data = header + body + footer;\n\n  return prefix + btoa(data);\n};\n\nSignaturePad.prototype.fromData = function (pointGroups) {\n  var _this3 = this;\n\n  this.clear();\n\n  this._fromData(pointGroups, function (curve, widths) {\n    return _this3._drawCurve(curve, widths.start, widths.end);\n  }, function (rawPoint) {\n    return _this3._drawDot(rawPoint);\n  });\n\n  this._data = pointGroups;\n};\n\nSignaturePad.prototype.toData = function () {\n  return this._data;\n};\n\nexport default SignaturePad;\n","import PropTypes from 'prop-types'\nimport React, { Component } from 'react'\nimport SignaturePad from 'signature_pad'\nimport trimCanvas from 'trim-canvas'\n\nexport interface SignatureCanvasProps extends SignaturePad.SignaturePadOptions {\n  canvasProps?: React.CanvasHTMLAttributes<HTMLCanvasElement>\n  clearOnResize?: boolean\n}\n\nexport class SignatureCanvas extends Component<SignatureCanvasProps> {\n  static override propTypes = {\n    // signature_pad's props\n    velocityFilterWeight: PropTypes.number,\n    minWidth: PropTypes.number,\n    maxWidth: PropTypes.number,\n    minDistance: PropTypes.number,\n    dotSize: PropTypes.oneOfType([PropTypes.number, PropTypes.func]),\n    penColor: PropTypes.string,\n    throttle: PropTypes.number,\n    onEnd: PropTypes.func,\n    onBegin: PropTypes.func,\n    // props specific to the React wrapper\n    canvasProps: PropTypes.object,\n    clearOnResize: PropTypes.bool\n  }\n\n  static defaultProps: Pick<SignatureCanvasProps, 'clearOnResize'> = {\n    clearOnResize: true\n  }\n\n  static refNullError = new Error('react-signature-canvas is currently ' +\n    'mounting or unmounting: React refs are null during this phase.')\n\n  // shortcut reference (https://stackoverflow.com/a/29244254/3431180)\n  private readonly staticThis = this.constructor as typeof SignatureCanvas\n\n  _sigPad: SignaturePad | null = null\n  _canvas: HTMLCanvasElement | null = null\n\n  private readonly setRef = (ref: HTMLCanvasElement | null): void => {\n    this._canvas = ref\n    // if component is unmounted, set internal references to null\n    if (this._canvas === null) {\n      this._sigPad = null\n    }\n  }\n\n  _excludeOurProps = (): SignaturePad.SignaturePadOptions => {\n    const { canvasProps, clearOnResize, ...sigPadProps } = this.props\n    return sigPadProps\n  }\n\n  override componentDidMount: Component['componentDidMount'] = () => {\n    const canvas = this.getCanvas()\n    this._sigPad = new SignaturePad(canvas, this._excludeOurProps())\n    this._resizeCanvas()\n    this.on()\n  }\n\n  override componentWillUnmount: Component['componentWillUnmount'] = () => {\n    this.off()\n  }\n\n  // propagate prop updates to SignaturePad\n  override componentDidUpdate: Component['componentDidUpdate'] = () => {\n    Object.assign(this._sigPad, this._excludeOurProps())\n  }\n\n  // return the canvas ref for operations like toDataURL\n  getCanvas = (): HTMLCanvasElement => {\n    if (this._canvas === null) {\n      throw this.staticThis.refNullError\n    }\n    return this._canvas\n  }\n\n  // return a trimmed copy of the canvas\n  getTrimmedCanvas = (): HTMLCanvasElement => {\n    // copy the canvas\n    const canvas = this.getCanvas()\n    const copy = document.createElement('canvas')\n    copy.width = canvas.width\n    copy.height = canvas.height\n    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n    copy.getContext('2d')!.drawImage(canvas, 0, 0)\n    // then trim it\n    return trimCanvas(copy)\n  }\n\n  // return the internal SignaturePad reference\n  getSignaturePad = (): SignaturePad => {\n    if (this._sigPad === null) {\n      throw this.staticThis.refNullError\n    }\n    return this._sigPad\n  }\n\n  _checkClearOnResize = (): void => {\n    if (!this.props.clearOnResize) { // eslint-disable-line @typescript-eslint/strict-boolean-expressions -- this is backward compatible with the previous behavior, where null was treated as falsey\n      return\n    }\n    this._resizeCanvas()\n  }\n\n  _resizeCanvas = (): void => {\n    const canvasProps = this.props.canvasProps ?? {}\n    const { width, height } = canvasProps\n    // don't resize if the canvas has fixed width and height\n    if (typeof width !== 'undefined' && typeof height !== 'undefined') {\n      return\n    }\n\n    const canvas = this.getCanvas()\n    /* When zoomed out to less than 100%, for some very strange reason,\n      some browsers report devicePixelRatio as less than 1\n      and only part of the canvas is cleared then. */\n    const ratio = Math.max(window.devicePixelRatio ?? 1, 1)\n\n    if (typeof width === 'undefined') {\n      canvas.width = canvas.offsetWidth * ratio\n    }\n    if (typeof height === 'undefined') {\n      canvas.height = canvas.offsetHeight * ratio\n    }\n    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n    canvas.getContext('2d')!.scale(ratio, ratio)\n    this.clear()\n  }\n\n  override render: Component['render'] = () => {\n    const { canvasProps } = this.props\n    return <canvas ref={this.setRef} {...canvasProps} />\n  }\n\n  // all wrapper functions below render\n  //\n  on: SignaturePad['on'] = () => {\n    window.addEventListener('resize', this._checkClearOnResize)\n    return this.getSignaturePad().on()\n  }\n\n  off: SignaturePad['off'] = () => {\n    window.removeEventListener('resize', this._checkClearOnResize)\n    return this.getSignaturePad().off()\n  }\n\n  clear: SignaturePad['clear'] = () => {\n    return this.getSignaturePad().clear()\n  }\n\n  isEmpty: SignaturePad['isEmpty'] = () => {\n    return this.getSignaturePad().isEmpty()\n  }\n\n  fromDataURL: SignaturePad['fromDataURL'] = (dataURL, options) => {\n    return this.getSignaturePad().fromDataURL(dataURL, options)\n  }\n\n  toDataURL: SignaturePad['toDataURL'] = (type, encoderOptions) => {\n    return this.getSignaturePad().toDataURL(type, encoderOptions)\n  }\n\n  fromData: SignaturePad['fromData'] = (pointGroups) => {\n    return this.getSignaturePad().fromData(pointGroups)\n  }\n\n  toData: SignaturePad['toData'] = () => {\n    return this.getSignaturePad().toData()\n  }\n}\n\nexport default SignatureCanvas\n","import setPrototypeOf from \"./setPrototypeOf.js\";\nfunction _inherits(t, e) {\n  if (\"function\" != typeof e && null !== e) throw new TypeError(\"Super expression must either be null or a function\");\n  t.prototype = Object.create(e && e.prototype, {\n    constructor: {\n      value: t,\n      writable: !0,\n      configurable: !0\n    }\n  }), Object.defineProperty(t, \"prototype\", {\n    writable: !1\n  }), e && setPrototypeOf(t, e);\n}\nexport { _inherits as default };","import getPrototypeOf from \"./getPrototypeOf.js\";\nimport isNativeReflectConstruct from \"./isNativeReflectConstruct.js\";\nimport possibleConstructorReturn from \"./possibleConstructorReturn.js\";\nfunction _createSuper(t) {\n  var r = isNativeReflectConstruct();\n  return function () {\n    var e,\n      o = getPrototypeOf(t);\n    if (r) {\n      var s = getPrototypeOf(this).constructor;\n      e = Reflect.construct(o, arguments, s);\n    } else e = o.apply(this, arguments);\n    return possibleConstructorReturn(this, e);\n  };\n}\nexport { _createSuper as default };","function _classCallCheck(a, n) {\n  if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\");\n}\nexport { _classCallCheck as default };","import objectWithoutPropertiesLoose from \"./objectWithoutPropertiesLoose.js\";\nfunction _objectWithoutProperties(e, t) {\n  if (null == e) return {};\n  var o,\n    r,\n    i = objectWithoutPropertiesLoose(e, t);\n  if (Object.getOwnPropertySymbols) {\n    var n = Object.getOwnPropertySymbols(e);\n    for (r = 0; r < n.length; r++) o = n[r], -1 === t.indexOf(o) && {}.propertyIsEnumerable.call(e, o) && (i[o] = e[o]);\n  }\n  return i;\n}\nexport { _objectWithoutProperties as default };","function _objectWithoutPropertiesLoose(r, e) {\n  if (null == r) return {};\n  var t = {};\n  for (var n in r) if ({}.hasOwnProperty.call(r, n)) {\n    if (-1 !== e.indexOf(n)) continue;\n    t[n] = r[n];\n  }\n  return t;\n}\nexport { _objectWithoutPropertiesLoose as default };","import React, { useRef, useEffect, useState } from 'react';\r\nimport SignatureCanvas from 'react-signature-canvas';\r\n\r\ninterface Props {\r\n  onSave: (base64: string) => void;\r\n}\r\n\r\nexport const SignaturePad: React.FC<Props> = ({ onSave }) => {\r\n  const sigRef = useRef<SignatureCanvas>(null);\r\n  const containerRef = useRef<HTMLDivElement>(null);\r\n  const [canvasSize, setCanvasSize] = useState({ width: 450, height: 120 });\r\n\r\n  useEffect(() => {\r\n    const updateCanvasSize = () => {\r\n      if (containerRef.current) {\r\n        const containerWidth = containerRef.current.offsetWidth;\r\n        // Use container width minus padding (20px on each side)\r\n        const availableWidth = containerWidth - 40;\r\n        const newWidth = Math.max(300, availableWidth);\r\n        \r\n        setCanvasSize({\r\n          width: newWidth,\r\n          height: 120\r\n        });\r\n\r\n        // Force canvas to redraw with correct dimensions\r\n        if (sigRef.current) {\r\n          // Use a timeout to ensure the canvas is rendered with new dimensions\r\n          setTimeout(() => {\r\n            if (sigRef.current) {\r\n              sigRef.current.getCanvas().width = newWidth;\r\n              sigRef.current.getCanvas().height = 120;\r\n              sigRef.current.getCanvas().style.width = `${newWidth}px`;\r\n              sigRef.current.getCanvas().style.height = '120px';\r\n            }\r\n          }, 10);\r\n        }\r\n      }\r\n    };\r\n\r\n    updateCanvasSize();\r\n    window.addEventListener('resize', updateCanvasSize);\r\n    \r\n    return () => window.removeEventListener('resize', updateCanvasSize);\r\n  }, []);\r\n\r\n  const isSigRefValid = (ref: SignatureCanvas | null): ref is SignatureCanvas => {\r\n    return ref !== null;\r\n  };\r\n\r\n  const handleClear = () => {\r\n    if (isSigRefValid(sigRef.current)) {\r\n      sigRef.current.clear();\r\n      onSave('');\r\n    }\r\n  };\r\n\r\n  const handleEnd = () => {\r\n    if (isSigRefValid(sigRef.current) && !sigRef.current.isEmpty()) {\r\n      const dataURL = sigRef.current.toDataURL('image/png');\r\n      onSave(dataURL);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"signature-pad-container\" ref={containerRef}>\r\n      <div className=\"text-center mb-2\">\r\n        <small className=\"text-muted\">\r\n          <i className=\"fas fa-info-circle me-1\"></i>\r\n          חתום באזור הלבן למטה\r\n        </small>\r\n      </div>\r\n      <div className=\"signature-canvas-wrapper\">\r\n        <SignatureCanvas\r\n          ref={sigRef}\r\n          penColor=\"black\"\r\n          onEnd={handleEnd}\r\n          canvasProps={{\r\n            width: canvasSize.width,\r\n            height: canvasSize.height,\r\n            className: 'signature-canvas',\r\n            style: { \r\n              cursor: 'crosshair',\r\n              width: `${canvasSize.width}px`,\r\n              height: `${canvasSize.height}px`,\r\n              touchAction: 'none',\r\n              border: '2px solid #667eea',\r\n              borderRadius: '8px',\r\n              backgroundColor: 'white',\r\n              boxShadow: '0 2px 4px rgba(0,0,0,0.1)'\r\n            }\r\n          }}\r\n        />\r\n      </div>\r\n      <div className=\"text-center mt-3\">\r\n        <button \r\n          type=\"button\" \r\n          className=\"btn btn-sm\"\r\n          onClick={handleClear}\r\n          style={{\r\n            background: 'rgba(255, 193, 7, 0.1)',\r\n            border: '1px solid #ffc107',\r\n            color: '#ffc107',\r\n            padding: '8px 16px',\r\n            borderRadius: '6px',\r\n            fontSize: '13px',\r\n            fontWeight: '500',\r\n            transition: 'all 0.2s ease',\r\n            cursor: 'pointer'\r\n          }}\r\n          onMouseEnter={(e) => {\r\n            e.currentTarget.style.background = 'rgba(255, 193, 7, 0.2)';\r\n            e.currentTarget.style.color = '#ffcd39';\r\n          }}\r\n          onMouseLeave={(e) => {\r\n            e.currentTarget.style.background = 'rgba(255, 193, 7, 0.1)';\r\n            e.currentTarget.style.color = '#ffc107';\r\n          }}\r\n        >\r\n          <i className=\"fas fa-eraser me-2\"></i>\r\n          נקה חתימה\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","const formatDistanceLocale = {\n  lessThanXSeconds: {\n    one: \"less than a second\",\n    other: \"less than {{count}} seconds\",\n  },\n\n  xSeconds: {\n    one: \"1 second\",\n    other: \"{{count}} seconds\",\n  },\n\n  halfAMinute: \"half a minute\",\n\n  lessThanXMinutes: {\n    one: \"less than a minute\",\n    other: \"less than {{count}} minutes\",\n  },\n\n  xMinutes: {\n    one: \"1 minute\",\n    other: \"{{count}} minutes\",\n  },\n\n  aboutXHours: {\n    one: \"about 1 hour\",\n    other: \"about {{count}} hours\",\n  },\n\n  xHours: {\n    one: \"1 hour\",\n    other: \"{{count}} hours\",\n  },\n\n  xDays: {\n    one: \"1 day\",\n    other: \"{{count}} days\",\n  },\n\n  aboutXWeeks: {\n    one: \"about 1 week\",\n    other: \"about {{count}} weeks\",\n  },\n\n  xWeeks: {\n    one: \"1 week\",\n    other: \"{{count}} weeks\",\n  },\n\n  aboutXMonths: {\n    one: \"about 1 month\",\n    other: \"about {{count}} months\",\n  },\n\n  xMonths: {\n    one: \"1 month\",\n    other: \"{{count}} months\",\n  },\n\n  aboutXYears: {\n    one: \"about 1 year\",\n    other: \"about {{count}} years\",\n  },\n\n  xYears: {\n    one: \"1 year\",\n    other: \"{{count}} years\",\n  },\n\n  overXYears: {\n    one: \"over 1 year\",\n    other: \"over {{count}} years\",\n  },\n\n  almostXYears: {\n    one: \"almost 1 year\",\n    other: \"almost {{count}} years\",\n  },\n};\n\nexport const formatDistance = (token, count, options) => {\n  let result;\n\n  const tokenValue = formatDistanceLocale[token];\n  if (typeof tokenValue === \"string\") {\n    result = tokenValue;\n  } else if (count === 1) {\n    result = tokenValue.one;\n  } else {\n    result = tokenValue.other.replace(\"{{count}}\", count.toString());\n  }\n\n  if (options?.addSuffix) {\n    if (options.comparison && options.comparison > 0) {\n      return \"in \" + result;\n    } else {\n      return result + \" ago\";\n    }\n  }\n\n  return result;\n};\n","export function buildFormatLongFn(args) {\n  return (options = {}) => {\n    // TODO: Remove String()\n    const width = options.width ? String(options.width) : args.defaultWidth;\n    const format = args.formats[width] || args.formats[args.defaultWidth];\n    return format;\n  };\n}\n","import { buildFormatLongFn } from \"../../_lib/buildFormatLongFn.js\";\n\nconst dateFormats = {\n  full: \"EEEE, MMMM do, y\",\n  long: \"MMMM do, y\",\n  medium: \"MMM d, y\",\n  short: \"MM/dd/yyyy\",\n};\n\nconst timeFormats = {\n  full: \"h:mm:ss a zzzz\",\n  long: \"h:mm:ss a z\",\n  medium: \"h:mm:ss a\",\n  short: \"h:mm a\",\n};\n\nconst dateTimeFormats = {\n  full: \"{{date}} 'at' {{time}}\",\n  long: \"{{date}} 'at' {{time}}\",\n  medium: \"{{date}}, {{time}}\",\n  short: \"{{date}}, {{time}}\",\n};\n\nexport const formatLong = {\n  date: buildFormatLongFn({\n    formats: dateFormats,\n    defaultWidth: \"full\",\n  }),\n\n  time: buildFormatLongFn({\n    formats: timeFormats,\n    defaultWidth: \"full\",\n  }),\n\n  dateTime: buildFormatLongFn({\n    formats: dateTimeFormats,\n    defaultWidth: \"full\",\n  }),\n};\n","const formatRelativeLocale = {\n  lastWeek: \"'last' eeee 'at' p\",\n  yesterday: \"'yesterday at' p\",\n  today: \"'today at' p\",\n  tomorrow: \"'tomorrow at' p\",\n  nextWeek: \"eeee 'at' p\",\n  other: \"P\",\n};\n\nexport const formatRelative = (token, _date, _baseDate, _options) =>\n  formatRelativeLocale[token];\n","/**\n * The localize function argument callback which allows to convert raw value to\n * the actual type.\n *\n * @param value - The value to convert\n *\n * @returns The converted value\n */\n\n/**\n * The map of localized values for each width.\n */\n\n/**\n * The index type of the locale unit value. It types conversion of units of\n * values that don't start at 0 (i.e. quarters).\n */\n\n/**\n * Converts the unit value to the tuple of values.\n */\n\n/**\n * The tuple of localized era values. The first element represents BC,\n * the second element represents AD.\n */\n\n/**\n * The tuple of localized quarter values. The first element represents Q1.\n */\n\n/**\n * The tuple of localized day values. The first element represents Sunday.\n */\n\n/**\n * The tuple of localized month values. The first element represents January.\n */\n\nexport function buildLocalizeFn(args) {\n  return (value, options) => {\n    const context = options?.context ? String(options.context) : \"standalone\";\n\n    let valuesArray;\n    if (context === \"formatting\" && args.formattingValues) {\n      const defaultWidth = args.defaultFormattingWidth || args.defaultWidth;\n      const width = options?.width ? String(options.width) : defaultWidth;\n\n      valuesArray =\n        args.formattingValues[width] || args.formattingValues[defaultWidth];\n    } else {\n      const defaultWidth = args.defaultWidth;\n      const width = options?.width ? String(options.width) : args.defaultWidth;\n\n      valuesArray = args.values[width] || args.values[defaultWidth];\n    }\n    const index = args.argumentCallback ? args.argumentCallback(value) : value;\n\n    // @ts-expect-error - For some reason TypeScript just don't want to match it, no matter how hard we try. I challenge you to try to remove it!\n    return valuesArray[index];\n  };\n}\n","export function buildMatchFn(args) {\n  return (string, options = {}) => {\n    const width = options.width;\n\n    const matchPattern =\n      (width && args.matchPatterns[width]) ||\n      args.matchPatterns[args.defaultMatchWidth];\n    const matchResult = string.match(matchPattern);\n\n    if (!matchResult) {\n      return null;\n    }\n    const matchedString = matchResult[0];\n\n    const parsePatterns =\n      (width && args.parsePatterns[width]) ||\n      args.parsePatterns[args.defaultParseWidth];\n\n    const key = Array.isArray(parsePatterns)\n      ? findIndex(parsePatterns, (pattern) => pattern.test(matchedString))\n      : // [TODO] -- I challenge you to fix the type\n        findKey(parsePatterns, (pattern) => pattern.test(matchedString));\n\n    let value;\n\n    value = args.valueCallback ? args.valueCallback(key) : key;\n    value = options.valueCallback\n      ? // [TODO] -- I challenge you to fix the type\n        options.valueCallback(value)\n      : value;\n\n    const rest = string.slice(matchedString.length);\n\n    return { value, rest };\n  };\n}\n\nfunction findKey(object, predicate) {\n  for (const key in object) {\n    if (\n      Object.prototype.hasOwnProperty.call(object, key) &&\n      predicate(object[key])\n    ) {\n      return key;\n    }\n  }\n  return undefined;\n}\n\nfunction findIndex(array, predicate) {\n  for (let key = 0; key < array.length; key++) {\n    if (predicate(array[key])) {\n      return key;\n    }\n  }\n  return undefined;\n}\n","export function buildMatchPatternFn(args) {\n  return (string, options = {}) => {\n    const matchResult = string.match(args.matchPattern);\n    if (!matchResult) return null;\n    const matchedString = matchResult[0];\n\n    const parseResult = string.match(args.parsePattern);\n    if (!parseResult) return null;\n    let value = args.valueCallback\n      ? args.valueCallback(parseResult[0])\n      : parseResult[0];\n\n    // [TODO] I challenge you to fix the type\n    value = options.valueCallback ? options.valueCallback(value) : value;\n\n    const rest = string.slice(matchedString.length);\n\n    return { value, rest };\n  };\n}\n","import { formatDistance } from \"./en-US/_lib/formatDistance.js\";\nimport { formatLong } from \"./en-US/_lib/formatLong.js\";\nimport { formatRelative } from \"./en-US/_lib/formatRelative.js\";\nimport { localize } from \"./en-US/_lib/localize.js\";\nimport { match } from \"./en-US/_lib/match.js\";\n\n/**\n * @category Locales\n * @summary English locale (United States).\n * @language English\n * @iso-639-2 eng\n * @author Sasha Koss [@kossnocorp](https://github.com/kossnocorp)\n * @author Lesha Koss [@leshakoss](https://github.com/leshakoss)\n */\nexport const enUS = {\n  code: \"en-US\",\n  formatDistance: formatDistance,\n  formatLong: formatLong,\n  formatRelative: formatRelative,\n  localize: localize,\n  match: match,\n  options: {\n    weekStartsOn: 0 /* Sunday */,\n    firstWeekContainsDate: 1,\n  },\n};\n\n// Fallback for modularized imports:\nexport default enUS;\n","import { buildLocalizeFn } from \"../../_lib/buildLocalizeFn.js\";\n\nconst eraValues = {\n  narrow: [\"B\", \"A\"],\n  abbreviated: [\"BC\", \"AD\"],\n  wide: [\"Before Christ\", \"Anno Domini\"],\n};\n\nconst quarterValues = {\n  narrow: [\"1\", \"2\", \"3\", \"4\"],\n  abbreviated: [\"Q1\", \"Q2\", \"Q3\", \"Q4\"],\n  wide: [\"1st quarter\", \"2nd quarter\", \"3rd quarter\", \"4th quarter\"],\n};\n\n// Note: in English, the names of days of the week and months are capitalized.\n// If you are making a new locale based on this one, check if the same is true for the language you're working on.\n// Generally, formatted dates should look like they are in the middle of a sentence,\n// e.g. in Spanish language the weekdays and months should be in the lowercase.\nconst monthValues = {\n  narrow: [\"J\", \"F\", \"M\", \"A\", \"M\", \"J\", \"J\", \"A\", \"S\", \"O\", \"N\", \"D\"],\n  abbreviated: [\n    \"Jan\",\n    \"Feb\",\n    \"Mar\",\n    \"Apr\",\n    \"May\",\n    \"Jun\",\n    \"Jul\",\n    \"Aug\",\n    \"Sep\",\n    \"Oct\",\n    \"Nov\",\n    \"Dec\",\n  ],\n\n  wide: [\n    \"January\",\n    \"February\",\n    \"March\",\n    \"April\",\n    \"May\",\n    \"June\",\n    \"July\",\n    \"August\",\n    \"September\",\n    \"October\",\n    \"November\",\n    \"December\",\n  ],\n};\n\nconst dayValues = {\n  narrow: [\"S\", \"M\", \"T\", \"W\", \"T\", \"F\", \"S\"],\n  short: [\"Su\", \"Mo\", \"Tu\", \"We\", \"Th\", \"Fr\", \"Sa\"],\n  abbreviated: [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"],\n  wide: [\n    \"Sunday\",\n    \"Monday\",\n    \"Tuesday\",\n    \"Wednesday\",\n    \"Thursday\",\n    \"Friday\",\n    \"Saturday\",\n  ],\n};\n\nconst dayPeriodValues = {\n  narrow: {\n    am: \"a\",\n    pm: \"p\",\n    midnight: \"mi\",\n    noon: \"n\",\n    morning: \"morning\",\n    afternoon: \"afternoon\",\n    evening: \"evening\",\n    night: \"night\",\n  },\n  abbreviated: {\n    am: \"AM\",\n    pm: \"PM\",\n    midnight: \"midnight\",\n    noon: \"noon\",\n    morning: \"morning\",\n    afternoon: \"afternoon\",\n    evening: \"evening\",\n    night: \"night\",\n  },\n  wide: {\n    am: \"a.m.\",\n    pm: \"p.m.\",\n    midnight: \"midnight\",\n    noon: \"noon\",\n    morning: \"morning\",\n    afternoon: \"afternoon\",\n    evening: \"evening\",\n    night: \"night\",\n  },\n};\n\nconst formattingDayPeriodValues = {\n  narrow: {\n    am: \"a\",\n    pm: \"p\",\n    midnight: \"mi\",\n    noon: \"n\",\n    morning: \"in the morning\",\n    afternoon: \"in the afternoon\",\n    evening: \"in the evening\",\n    night: \"at night\",\n  },\n  abbreviated: {\n    am: \"AM\",\n    pm: \"PM\",\n    midnight: \"midnight\",\n    noon: \"noon\",\n    morning: \"in the morning\",\n    afternoon: \"in the afternoon\",\n    evening: \"in the evening\",\n    night: \"at night\",\n  },\n  wide: {\n    am: \"a.m.\",\n    pm: \"p.m.\",\n    midnight: \"midnight\",\n    noon: \"noon\",\n    morning: \"in the morning\",\n    afternoon: \"in the afternoon\",\n    evening: \"in the evening\",\n    night: \"at night\",\n  },\n};\n\nconst ordinalNumber = (dirtyNumber, _options) => {\n  const number = Number(dirtyNumber);\n\n  // If ordinal numbers depend on context, for example,\n  // if they are different for different grammatical genders,\n  // use `options.unit`.\n  //\n  // `unit` can be 'year', 'quarter', 'month', 'week', 'date', 'dayOfYear',\n  // 'day', 'hour', 'minute', 'second'.\n\n  const rem100 = number % 100;\n  if (rem100 > 20 || rem100 < 10) {\n    switch (rem100 % 10) {\n      case 1:\n        return number + \"st\";\n      case 2:\n        return number + \"nd\";\n      case 3:\n        return number + \"rd\";\n    }\n  }\n  return number + \"th\";\n};\n\nexport const localize = {\n  ordinalNumber,\n\n  era: buildLocalizeFn({\n    values: eraValues,\n    defaultWidth: \"wide\",\n  }),\n\n  quarter: buildLocalizeFn({\n    values: quarterValues,\n    defaultWidth: \"wide\",\n    argumentCallback: (quarter) => quarter - 1,\n  }),\n\n  month: buildLocalizeFn({\n    values: monthValues,\n    defaultWidth: \"wide\",\n  }),\n\n  day: buildLocalizeFn({\n    values: dayValues,\n    defaultWidth: \"wide\",\n  }),\n\n  dayPeriod: buildLocalizeFn({\n    values: dayPeriodValues,\n    defaultWidth: \"wide\",\n    formattingValues: formattingDayPeriodValues,\n    defaultFormattingWidth: \"wide\",\n  }),\n};\n","import { buildMatchFn } from \"../../_lib/buildMatchFn.js\";\nimport { buildMatchPatternFn } from \"../../_lib/buildMatchPatternFn.js\";\n\nconst matchOrdinalNumberPattern = /^(\\d+)(th|st|nd|rd)?/i;\nconst parseOrdinalNumberPattern = /\\d+/i;\n\nconst matchEraPatterns = {\n  narrow: /^(b|a)/i,\n  abbreviated: /^(b\\.?\\s?c\\.?|b\\.?\\s?c\\.?\\s?e\\.?|a\\.?\\s?d\\.?|c\\.?\\s?e\\.?)/i,\n  wide: /^(before christ|before common era|anno domini|common era)/i,\n};\nconst parseEraPatterns = {\n  any: [/^b/i, /^(a|c)/i],\n};\n\nconst matchQuarterPatterns = {\n  narrow: /^[1234]/i,\n  abbreviated: /^q[1234]/i,\n  wide: /^[1234](th|st|nd|rd)? quarter/i,\n};\nconst parseQuarterPatterns = {\n  any: [/1/i, /2/i, /3/i, /4/i],\n};\n\nconst matchMonthPatterns = {\n  narrow: /^[jfmasond]/i,\n  abbreviated: /^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,\n  wide: /^(january|february|march|april|may|june|july|august|september|october|november|december)/i,\n};\nconst parseMonthPatterns = {\n  narrow: [\n    /^j/i,\n    /^f/i,\n    /^m/i,\n    /^a/i,\n    /^m/i,\n    /^j/i,\n    /^j/i,\n    /^a/i,\n    /^s/i,\n    /^o/i,\n    /^n/i,\n    /^d/i,\n  ],\n\n  any: [\n    /^ja/i,\n    /^f/i,\n    /^mar/i,\n    /^ap/i,\n    /^may/i,\n    /^jun/i,\n    /^jul/i,\n    /^au/i,\n    /^s/i,\n    /^o/i,\n    /^n/i,\n    /^d/i,\n  ],\n};\n\nconst matchDayPatterns = {\n  narrow: /^[smtwf]/i,\n  short: /^(su|mo|tu|we|th|fr|sa)/i,\n  abbreviated: /^(sun|mon|tue|wed|thu|fri|sat)/i,\n  wide: /^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i,\n};\nconst parseDayPatterns = {\n  narrow: [/^s/i, /^m/i, /^t/i, /^w/i, /^t/i, /^f/i, /^s/i],\n  any: [/^su/i, /^m/i, /^tu/i, /^w/i, /^th/i, /^f/i, /^sa/i],\n};\n\nconst matchDayPeriodPatterns = {\n  narrow: /^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,\n  any: /^([ap]\\.?\\s?m\\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i,\n};\nconst parseDayPeriodPatterns = {\n  any: {\n    am: /^a/i,\n    pm: /^p/i,\n    midnight: /^mi/i,\n    noon: /^no/i,\n    morning: /morning/i,\n    afternoon: /afternoon/i,\n    evening: /evening/i,\n    night: /night/i,\n  },\n};\n\nexport const match = {\n  ordinalNumber: buildMatchPatternFn({\n    matchPattern: matchOrdinalNumberPattern,\n    parsePattern: parseOrdinalNumberPattern,\n    valueCallback: (value) => parseInt(value, 10),\n  }),\n\n  era: buildMatchFn({\n    matchPatterns: matchEraPatterns,\n    defaultMatchWidth: \"wide\",\n    parsePatterns: parseEraPatterns,\n    defaultParseWidth: \"any\",\n  }),\n\n  quarter: buildMatchFn({\n    matchPatterns: matchQuarterPatterns,\n    defaultMatchWidth: \"wide\",\n    parsePatterns: parseQuarterPatterns,\n    defaultParseWidth: \"any\",\n    valueCallback: (index) => index + 1,\n  }),\n\n  month: buildMatchFn({\n    matchPatterns: matchMonthPatterns,\n    defaultMatchWidth: \"wide\",\n    parsePatterns: parseMonthPatterns,\n    defaultParseWidth: \"any\",\n  }),\n\n  day: buildMatchFn({\n    matchPatterns: matchDayPatterns,\n    defaultMatchWidth: \"wide\",\n    parsePatterns: parseDayPatterns,\n    defaultParseWidth: \"any\",\n  }),\n\n  dayPeriod: buildMatchFn({\n    matchPatterns: matchDayPeriodPatterns,\n    defaultMatchWidth: \"any\",\n    parsePatterns: parseDayPeriodPatterns,\n    defaultParseWidth: \"any\",\n  }),\n};\n","let defaultOptions = {};\n\nexport function getDefaultOptions() {\n  return defaultOptions;\n}\n\nexport function setDefaultOptions(newOptions) {\n  defaultOptions = newOptions;\n}\n","/**\n * @module constants\n * @summary Useful constants\n * @description\n * Collection of useful date constants.\n *\n * The constants could be imported from `date-fns/constants`:\n *\n * ```ts\n * import { maxTime, minTime } from \"./constants/date-fns/constants\";\n *\n * function isAllowedTime(time) {\n *   return time <= maxTime && time >= minTime;\n * }\n * ```\n */\n\n/**\n * @constant\n * @name daysInWeek\n * @summary Days in 1 week.\n */\nexport const daysInWeek = 7;\n\n/**\n * @constant\n * @name daysInYear\n * @summary Days in 1 year.\n *\n * @description\n * How many days in a year.\n *\n * One years equals 365.2425 days according to the formula:\n *\n * > Leap year occurs every 4 years, except for years that are divisible by 100 and not divisible by 400.\n * > 1 mean year = (365+1/4-1/100+1/400) days = 365.2425 days\n */\nexport const daysInYear = 365.2425;\n\n/**\n * @constant\n * @name maxTime\n * @summary Maximum allowed time.\n *\n * @example\n * import { maxTime } from \"./constants/date-fns/constants\";\n *\n * const isValid = 8640000000000001 <= maxTime;\n * //=> false\n *\n * new Date(8640000000000001);\n * //=> Invalid Date\n */\nexport const maxTime = Math.pow(10, 8) * 24 * 60 * 60 * 1000;\n\n/**\n * @constant\n * @name minTime\n * @summary Minimum allowed time.\n *\n * @example\n * import { minTime } from \"./constants/date-fns/constants\";\n *\n * const isValid = -8640000000000001 >= minTime;\n * //=> false\n *\n * new Date(-8640000000000001)\n * //=> Invalid Date\n */\nexport const minTime = -maxTime;\n\n/**\n * @constant\n * @name millisecondsInWeek\n * @summary Milliseconds in 1 week.\n */\nexport const millisecondsInWeek = 604800000;\n\n/**\n * @constant\n * @name millisecondsInDay\n * @summary Milliseconds in 1 day.\n */\nexport const millisecondsInDay = 86400000;\n\n/**\n * @constant\n * @name millisecondsInMinute\n * @summary Milliseconds in 1 minute\n */\nexport const millisecondsInMinute = 60000;\n\n/**\n * @constant\n * @name millisecondsInHour\n * @summary Milliseconds in 1 hour\n */\nexport const millisecondsInHour = 3600000;\n\n/**\n * @constant\n * @name millisecondsInSecond\n * @summary Milliseconds in 1 second\n */\nexport const millisecondsInSecond = 1000;\n\n/**\n * @constant\n * @name minutesInYear\n * @summary Minutes in 1 year.\n */\nexport const minutesInYear = 525600;\n\n/**\n * @constant\n * @name minutesInMonth\n * @summary Minutes in 1 month.\n */\nexport const minutesInMonth = 43200;\n\n/**\n * @constant\n * @name minutesInDay\n * @summary Minutes in 1 day.\n */\nexport const minutesInDay = 1440;\n\n/**\n * @constant\n * @name minutesInHour\n * @summary Minutes in 1 hour.\n */\nexport const minutesInHour = 60;\n\n/**\n * @constant\n * @name monthsInQuarter\n * @summary Months in 1 quarter.\n */\nexport const monthsInQuarter = 3;\n\n/**\n * @constant\n * @name monthsInYear\n * @summary Months in 1 year.\n */\nexport const monthsInYear = 12;\n\n/**\n * @constant\n * @name quartersInYear\n * @summary Quarters in 1 year\n */\nexport const quartersInYear = 4;\n\n/**\n * @constant\n * @name secondsInHour\n * @summary Seconds in 1 hour.\n */\nexport const secondsInHour = 3600;\n\n/**\n * @constant\n * @name secondsInMinute\n * @summary Seconds in 1 minute.\n */\nexport const secondsInMinute = 60;\n\n/**\n * @constant\n * @name secondsInDay\n * @summary Seconds in 1 day.\n */\nexport const secondsInDay = secondsInHour * 24;\n\n/**\n * @constant\n * @name secondsInWeek\n * @summary Seconds in 1 week.\n */\nexport const secondsInWeek = secondsInDay * 7;\n\n/**\n * @constant\n * @name secondsInYear\n * @summary Seconds in 1 year.\n */\nexport const secondsInYear = secondsInDay * daysInYear;\n\n/**\n * @constant\n * @name secondsInMonth\n * @summary Seconds in 1 month\n */\nexport const secondsInMonth = secondsInYear / 12;\n\n/**\n * @constant\n * @name secondsInQuarter\n * @summary Seconds in 1 quarter.\n */\nexport const secondsInQuarter = secondsInMonth * 3;\n\n/**\n * @constant\n * @name constructFromSymbol\n * @summary Symbol enabling Date extensions to inherit properties from the reference date.\n *\n * The symbol is used to enable the `constructFrom` function to construct a date\n * using a reference date and a value. It allows to transfer extra properties\n * from the reference date to the new date. It's useful for extensions like\n * [`TZDate`](https://github.com/date-fns/tz) that accept a time zone as\n * a constructor argument.\n */\nexport const constructFromSymbol = Symbol.for(\"constructDateFrom\");\n","import { constructFromSymbol } from \"./constants.js\";\n\n/**\n * @name constructFrom\n * @category Generic Helpers\n * @summary Constructs a date using the reference date and the value\n *\n * @description\n * The function constructs a new date using the constructor from the reference\n * date and the given value. It helps to build generic functions that accept\n * date extensions.\n *\n * It defaults to `Date` if the passed reference date is a number or a string.\n *\n * Starting from v3.7.0, it allows to construct a date using `[Symbol.for(\"constructDateFrom\")]`\n * enabling to transfer extra properties from the reference date to the new date.\n * It's useful for extensions like [`TZDate`](https://github.com/date-fns/tz)\n * that accept a time zone as a constructor argument.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n *\n * @param date - The reference date to take constructor from\n * @param value - The value to create the date\n *\n * @returns Date initialized using the given date and value\n *\n * @example\n * import { constructFrom } from \"./constructFrom/date-fns\";\n *\n * // A function that clones a date preserving the original type\n * function cloneDate<DateType extends Date>(date: DateType): DateType {\n *   return constructFrom(\n *     date, // Use constructor from the given date\n *     date.getTime() // Use the date value to create a new date\n *   );\n * }\n */\nexport function constructFrom(date, value) {\n  if (typeof date === \"function\") return date(value);\n\n  if (date && typeof date === \"object\" && constructFromSymbol in date)\n    return date[constructFromSymbol](value);\n\n  if (date instanceof Date) return new date.constructor(value);\n\n  return new Date(value);\n}\n\n// Fallback for modularized imports:\nexport default constructFrom;\n","import { constructFrom } from \"./constructFrom.js\";\n\n/**\n * @name toDate\n * @category Common Helpers\n * @summary Convert the given argument to an instance of Date.\n *\n * @description\n * Convert the given argument to an instance of Date.\n *\n * If the argument is an instance of Date, the function returns its clone.\n *\n * If the argument is a number, it is treated as a timestamp.\n *\n * If the argument is none of the above, the function returns Invalid Date.\n *\n * Starting from v3.7.0, it clones a date using `[Symbol.for(\"constructDateFrom\")]`\n * enabling to transfer extra properties from the reference date to the new date.\n * It's useful for extensions like [`TZDate`](https://github.com/date-fns/tz)\n * that accept a time zone as a constructor argument.\n *\n * **Note**: *all* Date arguments passed to any *date-fns* function is processed by `toDate`.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n * @typeParam ResultDate - The result `Date` type, it is the type returned from the context function if it is passed, or inferred from the arguments.\n *\n * @param argument - The value to convert\n *\n * @returns The parsed date in the local time zone\n *\n * @example\n * // Clone the date:\n * const result = toDate(new Date(2014, 1, 11, 11, 30, 30))\n * //=> Tue Feb 11 2014 11:30:30\n *\n * @example\n * // Convert the timestamp to date:\n * const result = toDate(1392098430000)\n * //=> Tue Feb 11 2014 11:30:30\n */\nexport function toDate(argument, context) {\n  // [TODO] Get rid of `toDate` or `constructFrom`?\n  return constructFrom(context || argument, argument);\n}\n\n// Fallback for modularized imports:\nexport default toDate;\n","import { toDate } from \"../toDate.js\";\n\n/**\n * Google Chrome as of 67.0.3396.87 introduced timezones with offset that includes seconds.\n * They usually appear for dates that denote time before the timezones were introduced\n * (e.g. for 'Europe/Prague' timezone the offset is GMT+00:57:44 before 1 October 1891\n * and GMT+01:00:00 after that date)\n *\n * Date#getTimezoneOffset returns the offset in minutes and would return 57 for the example above,\n * which would lead to incorrect calculations.\n *\n * This function returns the timezone offset in milliseconds that takes seconds in account.\n */\nexport function getTimezoneOffsetInMilliseconds(date) {\n  const _date = toDate(date);\n  const utcDate = new Date(\n    Date.UTC(\n      _date.getFullYear(),\n      _date.getMonth(),\n      _date.getDate(),\n      _date.getHours(),\n      _date.getMinutes(),\n      _date.getSeconds(),\n      _date.getMilliseconds(),\n    ),\n  );\n  utcDate.setUTCFullYear(_date.getFullYear());\n  return +date - +utcDate;\n}\n","import { toDate } from \"./toDate.js\";\n\n/**\n * The {@link startOfDay} function options.\n */\n\n/**\n * @name startOfDay\n * @category Day Helpers\n * @summary Return the start of a day for the given date.\n *\n * @description\n * Return the start of a day for the given date.\n * The result will be in the local timezone.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n * @typeParam ResultDate - The result `Date` type, it is the type returned from the context function if it is passed, or inferred from the arguments.\n *\n * @param date - The original date\n * @param options - The options\n *\n * @returns The start of a day\n *\n * @example\n * // The start of a day for 2 September 2014 11:55:00:\n * const result = startOfDay(new Date(2014, 8, 2, 11, 55, 0))\n * //=> Tue Sep 02 2014 00:00:00\n */\nexport function startOfDay(date, options) {\n  const _date = toDate(date, options?.in);\n  _date.setHours(0, 0, 0, 0);\n  return _date;\n}\n\n// Fallback for modularized imports:\nexport default startOfDay;\n","import { getTimezoneOffsetInMilliseconds } from \"./_lib/getTimezoneOffsetInMilliseconds.js\";\nimport { normalizeDates } from \"./_lib/normalizeDates.js\";\nimport { millisecondsInDay } from \"./constants.js\";\nimport { startOfDay } from \"./startOfDay.js\";\n\n/**\n * The {@link differenceInCalendarDays} function options.\n */\n\n/**\n * @name differenceInCalendarDays\n * @category Day Helpers\n * @summary Get the number of calendar days between the given dates.\n *\n * @description\n * Get the number of calendar days between the given dates. This means that the times are removed\n * from the dates and then the difference in days is calculated.\n *\n * @param laterDate - The later date\n * @param earlierDate - The earlier date\n * @param options - The options object\n *\n * @returns The number of calendar days\n *\n * @example\n * // How many calendar days are between\n * // 2 July 2011 23:00:00 and 2 July 2012 00:00:00?\n * const result = differenceInCalendarDays(\n *   new Date(2012, 6, 2, 0, 0),\n *   new Date(2011, 6, 2, 23, 0)\n * )\n * //=> 366\n * // How many calendar days are between\n * // 2 July 2011 23:59:00 and 3 July 2011 00:01:00?\n * const result = differenceInCalendarDays(\n *   new Date(2011, 6, 3, 0, 1),\n *   new Date(2011, 6, 2, 23, 59)\n * )\n * //=> 1\n */\nexport function differenceInCalendarDays(laterDate, earlierDate, options) {\n  const [laterDate_, earlierDate_] = normalizeDates(\n    options?.in,\n    laterDate,\n    earlierDate,\n  );\n\n  const laterStartOfDay = startOfDay(laterDate_);\n  const earlierStartOfDay = startOfDay(earlierDate_);\n\n  const laterTimestamp =\n    +laterStartOfDay - getTimezoneOffsetInMilliseconds(laterStartOfDay);\n  const earlierTimestamp =\n    +earlierStartOfDay - getTimezoneOffsetInMilliseconds(earlierStartOfDay);\n\n  // Round the number of days to the nearest integer because the number of\n  // milliseconds in a day is not constant (e.g. it's different in the week of\n  // the daylight saving time clock shift).\n  return Math.round((laterTimestamp - earlierTimestamp) / millisecondsInDay);\n}\n\n// Fallback for modularized imports:\nexport default differenceInCalendarDays;\n","import { constructFrom } from \"../constructFrom.js\";\n\nexport function normalizeDates(context, ...dates) {\n  const normalize = constructFrom.bind(\n    null,\n    context || dates.find((date) => typeof date === \"object\"),\n  );\n  return dates.map(normalize);\n}\n","import { toDate } from \"./toDate.js\";\n\n/**\n * The {@link startOfYear} function options.\n */\n\n/**\n * @name startOfYear\n * @category Year Helpers\n * @summary Return the start of a year for the given date.\n *\n * @description\n * Return the start of a year for the given date.\n * The result will be in the local timezone.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n * @typeParam ResultDate - The result `Date` type, it is the type returned from the context function if it is passed, or inferred from the arguments.\n *\n * @param date - The original date\n * @param options - The options\n *\n * @returns The start of a year\n *\n * @example\n * // The start of a year for 2 September 2014 11:55:00:\n * const result = startOfYear(new Date(2014, 8, 2, 11, 55, 00))\n * //=> Wed Jan 01 2014 00:00:00\n */\nexport function startOfYear(date, options) {\n  const date_ = toDate(date, options?.in);\n  date_.setFullYear(date_.getFullYear(), 0, 1);\n  date_.setHours(0, 0, 0, 0);\n  return date_;\n}\n\n// Fallback for modularized imports:\nexport default startOfYear;\n","import { differenceInCalendarDays } from \"./differenceInCalendarDays.js\";\nimport { startOfYear } from \"./startOfYear.js\";\nimport { toDate } from \"./toDate.js\";\n\n/**\n * The {@link getDayOfYear} function options.\n */\n\n/**\n * @name getDayOfYear\n * @category Day Helpers\n * @summary Get the day of the year of the given date.\n *\n * @description\n * Get the day of the year of the given date.\n *\n * @param date - The given date\n * @param options - The options\n *\n * @returns The day of year\n *\n * @example\n * // Which day of the year is 2 July 2014?\n * const result = getDayOfYear(new Date(2014, 6, 2))\n * //=> 183\n */\nexport function getDayOfYear(date, options) {\n  const _date = toDate(date, options?.in);\n  const diff = differenceInCalendarDays(_date, startOfYear(_date));\n  const dayOfYear = diff + 1;\n  return dayOfYear;\n}\n\n// Fallback for modularized imports:\nexport default getDayOfYear;\n","import { getDefaultOptions } from \"./_lib/defaultOptions.js\";\nimport { toDate } from \"./toDate.js\";\n\n/**\n * The {@link startOfWeek} function options.\n */\n\n/**\n * @name startOfWeek\n * @category Week Helpers\n * @summary Return the start of a week for the given date.\n *\n * @description\n * Return the start of a week for the given date.\n * The result will be in the local timezone.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n * @typeParam ResultDate - The result `Date` type, it is the type returned from the context function if it is passed, or inferred from the arguments.\n *\n * @param date - The original date\n * @param options - An object with options\n *\n * @returns The start of a week\n *\n * @example\n * // The start of a week for 2 September 2014 11:55:00:\n * const result = startOfWeek(new Date(2014, 8, 2, 11, 55, 0))\n * //=> Sun Aug 31 2014 00:00:00\n *\n * @example\n * // If the week starts on Monday, the start of the week for 2 September 2014 11:55:00:\n * const result = startOfWeek(new Date(2014, 8, 2, 11, 55, 0), { weekStartsOn: 1 })\n * //=> Mon Sep 01 2014 00:00:00\n */\nexport function startOfWeek(date, options) {\n  const defaultOptions = getDefaultOptions();\n  const weekStartsOn =\n    options?.weekStartsOn ??\n    options?.locale?.options?.weekStartsOn ??\n    defaultOptions.weekStartsOn ??\n    defaultOptions.locale?.options?.weekStartsOn ??\n    0;\n\n  const _date = toDate(date, options?.in);\n  const day = _date.getDay();\n  const diff = (day < weekStartsOn ? 7 : 0) + day - weekStartsOn;\n\n  _date.setDate(_date.getDate() - diff);\n  _date.setHours(0, 0, 0, 0);\n  return _date;\n}\n\n// Fallback for modularized imports:\nexport default startOfWeek;\n","import { startOfWeek } from \"./startOfWeek.js\";\n\n/**\n * The {@link startOfISOWeek} function options.\n */\n\n/**\n * @name startOfISOWeek\n * @category ISO Week Helpers\n * @summary Return the start of an ISO week for the given date.\n *\n * @description\n * Return the start of an ISO week for the given date.\n * The result will be in the local timezone.\n *\n * ISO week-numbering year: http://en.wikipedia.org/wiki/ISO_week_date\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n * @typeParam ResultDate - The result `Date` type, it is the type returned from the context function if it is passed, or inferred from the arguments.\n *\n * @param date - The original date\n * @param options - An object with options\n *\n * @returns The start of an ISO week\n *\n * @example\n * // The start of an ISO week for 2 September 2014 11:55:00:\n * const result = startOfISOWeek(new Date(2014, 8, 2, 11, 55, 0))\n * //=> Mon Sep 01 2014 00:00:00\n */\nexport function startOfISOWeek(date, options) {\n  return startOfWeek(date, { ...options, weekStartsOn: 1 });\n}\n\n// Fallback for modularized imports:\nexport default startOfISOWeek;\n","import { constructFrom } from \"./constructFrom.js\";\nimport { startOfISOWeek } from \"./startOfISOWeek.js\";\nimport { toDate } from \"./toDate.js\";\n\n/**\n * The {@link getISOWeekYear} function options.\n */\n\n/**\n * @name getISOWeekYear\n * @category ISO Week-Numbering Year Helpers\n * @summary Get the ISO week-numbering year of the given date.\n *\n * @description\n * Get the ISO week-numbering year of the given date,\n * which always starts 3 days before the year's first Thursday.\n *\n * ISO week-numbering year: http://en.wikipedia.org/wiki/ISO_week_date\n *\n * @param date - The given date\n *\n * @returns The ISO week-numbering year\n *\n * @example\n * // Which ISO-week numbering year is 2 January 2005?\n * const result = getISOWeekYear(new Date(2005, 0, 2))\n * //=> 2004\n */\nexport function getISOWeekYear(date, options) {\n  const _date = toDate(date, options?.in);\n  const year = _date.getFullYear();\n\n  const fourthOfJanuaryOfNextYear = constructFrom(_date, 0);\n  fourthOfJanuaryOfNextYear.setFullYear(year + 1, 0, 4);\n  fourthOfJanuaryOfNextYear.setHours(0, 0, 0, 0);\n  const startOfNextYear = startOfISOWeek(fourthOfJanuaryOfNextYear);\n\n  const fourthOfJanuaryOfThisYear = constructFrom(_date, 0);\n  fourthOfJanuaryOfThisYear.setFullYear(year, 0, 4);\n  fourthOfJanuaryOfThisYear.setHours(0, 0, 0, 0);\n  const startOfThisYear = startOfISOWeek(fourthOfJanuaryOfThisYear);\n\n  if (_date.getTime() >= startOfNextYear.getTime()) {\n    return year + 1;\n  } else if (_date.getTime() >= startOfThisYear.getTime()) {\n    return year;\n  } else {\n    return year - 1;\n  }\n}\n\n// Fallback for modularized imports:\nexport default getISOWeekYear;\n","import { constructFrom } from \"./constructFrom.js\";\nimport { getISOWeekYear } from \"./getISOWeekYear.js\";\nimport { startOfISOWeek } from \"./startOfISOWeek.js\";\n\n/**\n * The {@link startOfISOWeekYear} function options.\n */\n\n/**\n * @name startOfISOWeekYear\n * @category ISO Week-Numbering Year Helpers\n * @summary Return the start of an ISO week-numbering year for the given date.\n *\n * @description\n * Return the start of an ISO week-numbering year,\n * which always starts 3 days before the year's first Thursday.\n * The result will be in the local timezone.\n *\n * ISO week-numbering year: http://en.wikipedia.org/wiki/ISO_week_date\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n * @typeParam ResultDate - The result `Date` type, it is the type returned from the context function if it is passed, or inferred from the arguments.\n *\n * @param date - The original date\n * @param options - An object with options\n *\n * @returns The start of an ISO week-numbering year\n *\n * @example\n * // The start of an ISO week-numbering year for 2 July 2005:\n * const result = startOfISOWeekYear(new Date(2005, 6, 2))\n * //=> Mon Jan 03 2005 00:00:00\n */\nexport function startOfISOWeekYear(date, options) {\n  const year = getISOWeekYear(date, options);\n  const fourthOfJanuary = constructFrom(options?.in || date, 0);\n  fourthOfJanuary.setFullYear(year, 0, 4);\n  fourthOfJanuary.setHours(0, 0, 0, 0);\n  return startOfISOWeek(fourthOfJanuary);\n}\n\n// Fallback for modularized imports:\nexport default startOfISOWeekYear;\n","import { millisecondsInWeek } from \"./constants.js\";\nimport { startOfISOWeek } from \"./startOfISOWeek.js\";\nimport { startOfISOWeekYear } from \"./startOfISOWeekYear.js\";\nimport { toDate } from \"./toDate.js\";\n\n/**\n * The {@link getISOWeek} function options.\n */\n\n/**\n * @name getISOWeek\n * @category ISO Week Helpers\n * @summary Get the ISO week of the given date.\n *\n * @description\n * Get the ISO week of the given date.\n *\n * ISO week-numbering year: http://en.wikipedia.org/wiki/ISO_week_date\n *\n * @param date - The given date\n * @param options - The options\n *\n * @returns The ISO week\n *\n * @example\n * // Which week of the ISO-week numbering year is 2 January 2005?\n * const result = getISOWeek(new Date(2005, 0, 2))\n * //=> 53\n */\nexport function getISOWeek(date, options) {\n  const _date = toDate(date, options?.in);\n  const diff = +startOfISOWeek(_date) - +startOfISOWeekYear(_date);\n\n  // Round the number of weeks to the nearest integer because the number of\n  // milliseconds in a week is not constant (e.g. it's different in the week of\n  // the daylight saving time clock shift).\n  return Math.round(diff / millisecondsInWeek) + 1;\n}\n\n// Fallback for modularized imports:\nexport default getISOWeek;\n","import { getDefaultOptions } from \"./_lib/defaultOptions.js\";\nimport { constructFrom } from \"./constructFrom.js\";\nimport { startOfWeek } from \"./startOfWeek.js\";\nimport { toDate } from \"./toDate.js\";\n\n/**\n * The {@link getWeekYear} function options.\n */\n\n/**\n * @name getWeekYear\n * @category Week-Numbering Year Helpers\n * @summary Get the local week-numbering year of the given date.\n *\n * @description\n * Get the local week-numbering year of the given date.\n * The exact calculation depends on the values of\n * `options.weekStartsOn` (which is the index of the first day of the week)\n * and `options.firstWeekContainsDate` (which is the day of January, which is always in\n * the first week of the week-numbering year)\n *\n * Week numbering: https://en.wikipedia.org/wiki/Week#The_ISO_week_date_system\n *\n * @param date - The given date\n * @param options - An object with options.\n *\n * @returns The local week-numbering year\n *\n * @example\n * // Which week numbering year is 26 December 2004 with the default settings?\n * const result = getWeekYear(new Date(2004, 11, 26))\n * //=> 2005\n *\n * @example\n * // Which week numbering year is 26 December 2004 if week starts on Saturday?\n * const result = getWeekYear(new Date(2004, 11, 26), { weekStartsOn: 6 })\n * //=> 2004\n *\n * @example\n * // Which week numbering year is 26 December 2004 if the first week contains 4 January?\n * const result = getWeekYear(new Date(2004, 11, 26), { firstWeekContainsDate: 4 })\n * //=> 2004\n */\nexport function getWeekYear(date, options) {\n  const _date = toDate(date, options?.in);\n  const year = _date.getFullYear();\n\n  const defaultOptions = getDefaultOptions();\n  const firstWeekContainsDate =\n    options?.firstWeekContainsDate ??\n    options?.locale?.options?.firstWeekContainsDate ??\n    defaultOptions.firstWeekContainsDate ??\n    defaultOptions.locale?.options?.firstWeekContainsDate ??\n    1;\n\n  const firstWeekOfNextYear = constructFrom(options?.in || date, 0);\n  firstWeekOfNextYear.setFullYear(year + 1, 0, firstWeekContainsDate);\n  firstWeekOfNextYear.setHours(0, 0, 0, 0);\n  const startOfNextYear = startOfWeek(firstWeekOfNextYear, options);\n\n  const firstWeekOfThisYear = constructFrom(options?.in || date, 0);\n  firstWeekOfThisYear.setFullYear(year, 0, firstWeekContainsDate);\n  firstWeekOfThisYear.setHours(0, 0, 0, 0);\n  const startOfThisYear = startOfWeek(firstWeekOfThisYear, options);\n\n  if (+_date >= +startOfNextYear) {\n    return year + 1;\n  } else if (+_date >= +startOfThisYear) {\n    return year;\n  } else {\n    return year - 1;\n  }\n}\n\n// Fallback for modularized imports:\nexport default getWeekYear;\n","import { getDefaultOptions } from \"./_lib/defaultOptions.js\";\nimport { constructFrom } from \"./constructFrom.js\";\nimport { getWeekYear } from \"./getWeekYear.js\";\nimport { startOfWeek } from \"./startOfWeek.js\";\n\n/**\n * The {@link startOfWeekYear} function options.\n */\n\n/**\n * @name startOfWeekYear\n * @category Week-Numbering Year Helpers\n * @summary Return the start of a local week-numbering year for the given date.\n *\n * @description\n * Return the start of a local week-numbering year.\n * The exact calculation depends on the values of\n * `options.weekStartsOn` (which is the index of the first day of the week)\n * and `options.firstWeekContainsDate` (which is the day of January, which is always in\n * the first week of the week-numbering year)\n *\n * Week numbering: https://en.wikipedia.org/wiki/Week#The_ISO_week_date_system\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n * @typeParam ResultDate - The result `Date` type.\n *\n * @param date - The original date\n * @param options - An object with options\n *\n * @returns The start of a week-numbering year\n *\n * @example\n * // The start of an a week-numbering year for 2 July 2005 with default settings:\n * const result = startOfWeekYear(new Date(2005, 6, 2))\n * //=> Sun Dec 26 2004 00:00:00\n *\n * @example\n * // The start of a week-numbering year for 2 July 2005\n * // if Monday is the first day of week\n * // and 4 January is always in the first week of the year:\n * const result = startOfWeekYear(new Date(2005, 6, 2), {\n *   weekStartsOn: 1,\n *   firstWeekContainsDate: 4\n * })\n * //=> Mon Jan 03 2005 00:00:00\n */\nexport function startOfWeekYear(date, options) {\n  const defaultOptions = getDefaultOptions();\n  const firstWeekContainsDate =\n    options?.firstWeekContainsDate ??\n    options?.locale?.options?.firstWeekContainsDate ??\n    defaultOptions.firstWeekContainsDate ??\n    defaultOptions.locale?.options?.firstWeekContainsDate ??\n    1;\n\n  const year = getWeekYear(date, options);\n  const firstWeek = constructFrom(options?.in || date, 0);\n  firstWeek.setFullYear(year, 0, firstWeekContainsDate);\n  firstWeek.setHours(0, 0, 0, 0);\n  const _date = startOfWeek(firstWeek, options);\n  return _date;\n}\n\n// Fallback for modularized imports:\nexport default startOfWeekYear;\n","import { millisecondsInWeek } from \"./constants.js\";\nimport { startOfWeek } from \"./startOfWeek.js\";\nimport { startOfWeekYear } from \"./startOfWeekYear.js\";\nimport { toDate } from \"./toDate.js\";\n\n/**\n * The {@link getWeek} function options.\n */\n\n/**\n * @name getWeek\n * @category Week Helpers\n * @summary Get the local week index of the given date.\n *\n * @description\n * Get the local week index of the given date.\n * The exact calculation depends on the values of\n * `options.weekStartsOn` (which is the index of the first day of the week)\n * and `options.firstWeekContainsDate` (which is the day of January, which is always in\n * the first week of the week-numbering year)\n *\n * Week numbering: https://en.wikipedia.org/wiki/Week#The_ISO_week_date_system\n *\n * @param date - The given date\n * @param options - An object with options\n *\n * @returns The week\n *\n * @example\n * // Which week of the local week numbering year is 2 January 2005 with default options?\n * const result = getWeek(new Date(2005, 0, 2))\n * //=> 2\n *\n * @example\n * // Which week of the local week numbering year is 2 January 2005,\n * // if Monday is the first day of the week,\n * // and the first week of the year always contains 4 January?\n * const result = getWeek(new Date(2005, 0, 2), {\n *   weekStartsOn: 1,\n *   firstWeekContainsDate: 4\n * })\n * //=> 53\n */\nexport function getWeek(date, options) {\n  const _date = toDate(date, options?.in);\n  const diff = +startOfWeek(_date, options) - +startOfWeekYear(_date, options);\n\n  // Round the number of weeks to the nearest integer because the number of\n  // milliseconds in a week is not constant (e.g. it's different in the week of\n  // the daylight saving time clock shift).\n  return Math.round(diff / millisecondsInWeek) + 1;\n}\n\n// Fallback for modularized imports:\nexport default getWeek;\n","export function addLeadingZeros(number, targetLength) {\n  const sign = number < 0 ? \"-\" : \"\";\n  const output = Math.abs(number).toString().padStart(targetLength, \"0\");\n  return sign + output;\n}\n","import { addLeadingZeros } from \"../addLeadingZeros.js\";\n\n/*\n * |     | Unit                           |     | Unit                           |\n * |-----|--------------------------------|-----|--------------------------------|\n * |  a  | AM, PM                         |  A* |                                |\n * |  d  | Day of month                   |  D  |                                |\n * |  h  | Hour [1-12]                    |  H  | Hour [0-23]                    |\n * |  m  | Minute                         |  M  | Month                          |\n * |  s  | Second                         |  S  | Fraction of second             |\n * |  y  | Year (abs)                     |  Y  |                                |\n *\n * Letters marked by * are not implemented but reserved by Unicode standard.\n */\n\nexport const lightFormatters = {\n  // Year\n  y(date, token) {\n    // From http://www.unicode.org/reports/tr35/tr35-31/tr35-dates.html#Date_Format_tokens\n    // | Year     |     y | yy |   yyy |  yyyy | yyyyy |\n    // |----------|-------|----|-------|-------|-------|\n    // | AD 1     |     1 | 01 |   001 |  0001 | 00001 |\n    // | AD 12    |    12 | 12 |   012 |  0012 | 00012 |\n    // | AD 123   |   123 | 23 |   123 |  0123 | 00123 |\n    // | AD 1234  |  1234 | 34 |  1234 |  1234 | 01234 |\n    // | AD 12345 | 12345 | 45 | 12345 | 12345 | 12345 |\n\n    const signedYear = date.getFullYear();\n    // Returns 1 for 1 BC (which is year 0 in JavaScript)\n    const year = signedYear > 0 ? signedYear : 1 - signedYear;\n    return addLeadingZeros(token === \"yy\" ? year % 100 : year, token.length);\n  },\n\n  // Month\n  M(date, token) {\n    const month = date.getMonth();\n    return token === \"M\" ? String(month + 1) : addLeadingZeros(month + 1, 2);\n  },\n\n  // Day of the month\n  d(date, token) {\n    return addLeadingZeros(date.getDate(), token.length);\n  },\n\n  // AM or PM\n  a(date, token) {\n    const dayPeriodEnumValue = date.getHours() / 12 >= 1 ? \"pm\" : \"am\";\n\n    switch (token) {\n      case \"a\":\n      case \"aa\":\n        return dayPeriodEnumValue.toUpperCase();\n      case \"aaa\":\n        return dayPeriodEnumValue;\n      case \"aaaaa\":\n        return dayPeriodEnumValue[0];\n      case \"aaaa\":\n      default:\n        return dayPeriodEnumValue === \"am\" ? \"a.m.\" : \"p.m.\";\n    }\n  },\n\n  // Hour [1-12]\n  h(date, token) {\n    return addLeadingZeros(date.getHours() % 12 || 12, token.length);\n  },\n\n  // Hour [0-23]\n  H(date, token) {\n    return addLeadingZeros(date.getHours(), token.length);\n  },\n\n  // Minute\n  m(date, token) {\n    return addLeadingZeros(date.getMinutes(), token.length);\n  },\n\n  // Second\n  s(date, token) {\n    return addLeadingZeros(date.getSeconds(), token.length);\n  },\n\n  // Fraction of second\n  S(date, token) {\n    const numberOfDigits = token.length;\n    const milliseconds = date.getMilliseconds();\n    const fractionalSeconds = Math.trunc(\n      milliseconds * Math.pow(10, numberOfDigits - 3),\n    );\n    return addLeadingZeros(fractionalSeconds, token.length);\n  },\n};\n","import { getDayOfYear } from \"../../getDayOfYear.js\";\nimport { getISOWeek } from \"../../getISOWeek.js\";\nimport { getISOWeekYear } from \"../../getISOWeekYear.js\";\nimport { getWeek } from \"../../getWeek.js\";\nimport { getWeekYear } from \"../../getWeekYear.js\";\n\nimport { addLeadingZeros } from \"../addLeadingZeros.js\";\nimport { lightFormatters } from \"./lightFormatters.js\";\n\nconst dayPeriodEnum = {\n  am: \"am\",\n  pm: \"pm\",\n  midnight: \"midnight\",\n  noon: \"noon\",\n  morning: \"morning\",\n  afternoon: \"afternoon\",\n  evening: \"evening\",\n  night: \"night\",\n};\n\n/*\n * |     | Unit                           |     | Unit                           |\n * |-----|--------------------------------|-----|--------------------------------|\n * |  a  | AM, PM                         |  A* | Milliseconds in day            |\n * |  b  | AM, PM, noon, midnight         |  B  | Flexible day period            |\n * |  c  | Stand-alone local day of week  |  C* | Localized hour w/ day period   |\n * |  d  | Day of month                   |  D  | Day of year                    |\n * |  e  | Local day of week              |  E  | Day of week                    |\n * |  f  |                                |  F* | Day of week in month           |\n * |  g* | Modified Julian day            |  G  | Era                            |\n * |  h  | Hour [1-12]                    |  H  | Hour [0-23]                    |\n * |  i! | ISO day of week                |  I! | ISO week of year               |\n * |  j* | Localized hour w/ day period   |  J* | Localized hour w/o day period  |\n * |  k  | Hour [1-24]                    |  K  | Hour [0-11]                    |\n * |  l* | (deprecated)                   |  L  | Stand-alone month              |\n * |  m  | Minute                         |  M  | Month                          |\n * |  n  |                                |  N  |                                |\n * |  o! | Ordinal number modifier        |  O  | Timezone (GMT)                 |\n * |  p! | Long localized time            |  P! | Long localized date            |\n * |  q  | Stand-alone quarter            |  Q  | Quarter                        |\n * |  r* | Related Gregorian year         |  R! | ISO week-numbering year        |\n * |  s  | Second                         |  S  | Fraction of second             |\n * |  t! | Seconds timestamp              |  T! | Milliseconds timestamp         |\n * |  u  | Extended year                  |  U* | Cyclic year                    |\n * |  v* | Timezone (generic non-locat.)  |  V* | Timezone (location)            |\n * |  w  | Local week of year             |  W* | Week of month                  |\n * |  x  | Timezone (ISO-8601 w/o Z)      |  X  | Timezone (ISO-8601)            |\n * |  y  | Year (abs)                     |  Y  | Local week-numbering year      |\n * |  z  | Timezone (specific non-locat.) |  Z* | Timezone (aliases)             |\n *\n * Letters marked by * are not implemented but reserved by Unicode standard.\n *\n * Letters marked by ! are non-standard, but implemented by date-fns:\n * - `o` modifies the previous token to turn it into an ordinal (see `format` docs)\n * - `i` is ISO day of week. For `i` and `ii` is returns numeric ISO week days,\n *   i.e. 7 for Sunday, 1 for Monday, etc.\n * - `I` is ISO week of year, as opposed to `w` which is local week of year.\n * - `R` is ISO week-numbering year, as opposed to `Y` which is local week-numbering year.\n *   `R` is supposed to be used in conjunction with `I` and `i`\n *   for universal ISO week-numbering date, whereas\n *   `Y` is supposed to be used in conjunction with `w` and `e`\n *   for week-numbering date specific to the locale.\n * - `P` is long localized date format\n * - `p` is long localized time format\n */\n\nexport const formatters = {\n  // Era\n  G: function (date, token, localize) {\n    const era = date.getFullYear() > 0 ? 1 : 0;\n    switch (token) {\n      // AD, BC\n      case \"G\":\n      case \"GG\":\n      case \"GGG\":\n        return localize.era(era, { width: \"abbreviated\" });\n      // A, B\n      case \"GGGGG\":\n        return localize.era(era, { width: \"narrow\" });\n      // Anno Domini, Before Christ\n      case \"GGGG\":\n      default:\n        return localize.era(era, { width: \"wide\" });\n    }\n  },\n\n  // Year\n  y: function (date, token, localize) {\n    // Ordinal number\n    if (token === \"yo\") {\n      const signedYear = date.getFullYear();\n      // Returns 1 for 1 BC (which is year 0 in JavaScript)\n      const year = signedYear > 0 ? signedYear : 1 - signedYear;\n      return localize.ordinalNumber(year, { unit: \"year\" });\n    }\n\n    return lightFormatters.y(date, token);\n  },\n\n  // Local week-numbering year\n  Y: function (date, token, localize, options) {\n    const signedWeekYear = getWeekYear(date, options);\n    // Returns 1 for 1 BC (which is year 0 in JavaScript)\n    const weekYear = signedWeekYear > 0 ? signedWeekYear : 1 - signedWeekYear;\n\n    // Two digit year\n    if (token === \"YY\") {\n      const twoDigitYear = weekYear % 100;\n      return addLeadingZeros(twoDigitYear, 2);\n    }\n\n    // Ordinal number\n    if (token === \"Yo\") {\n      return localize.ordinalNumber(weekYear, { unit: \"year\" });\n    }\n\n    // Padding\n    return addLeadingZeros(weekYear, token.length);\n  },\n\n  // ISO week-numbering year\n  R: function (date, token) {\n    const isoWeekYear = getISOWeekYear(date);\n\n    // Padding\n    return addLeadingZeros(isoWeekYear, token.length);\n  },\n\n  // Extended year. This is a single number designating the year of this calendar system.\n  // The main difference between `y` and `u` localizers are B.C. years:\n  // | Year | `y` | `u` |\n  // |------|-----|-----|\n  // | AC 1 |   1 |   1 |\n  // | BC 1 |   1 |   0 |\n  // | BC 2 |   2 |  -1 |\n  // Also `yy` always returns the last two digits of a year,\n  // while `uu` pads single digit years to 2 characters and returns other years unchanged.\n  u: function (date, token) {\n    const year = date.getFullYear();\n    return addLeadingZeros(year, token.length);\n  },\n\n  // Quarter\n  Q: function (date, token, localize) {\n    const quarter = Math.ceil((date.getMonth() + 1) / 3);\n    switch (token) {\n      // 1, 2, 3, 4\n      case \"Q\":\n        return String(quarter);\n      // 01, 02, 03, 04\n      case \"QQ\":\n        return addLeadingZeros(quarter, 2);\n      // 1st, 2nd, 3rd, 4th\n      case \"Qo\":\n        return localize.ordinalNumber(quarter, { unit: \"quarter\" });\n      // Q1, Q2, Q3, Q4\n      case \"QQQ\":\n        return localize.quarter(quarter, {\n          width: \"abbreviated\",\n          context: \"formatting\",\n        });\n      // 1, 2, 3, 4 (narrow quarter; could be not numerical)\n      case \"QQQQQ\":\n        return localize.quarter(quarter, {\n          width: \"narrow\",\n          context: \"formatting\",\n        });\n      // 1st quarter, 2nd quarter, ...\n      case \"QQQQ\":\n      default:\n        return localize.quarter(quarter, {\n          width: \"wide\",\n          context: \"formatting\",\n        });\n    }\n  },\n\n  // Stand-alone quarter\n  q: function (date, token, localize) {\n    const quarter = Math.ceil((date.getMonth() + 1) / 3);\n    switch (token) {\n      // 1, 2, 3, 4\n      case \"q\":\n        return String(quarter);\n      // 01, 02, 03, 04\n      case \"qq\":\n        return addLeadingZeros(quarter, 2);\n      // 1st, 2nd, 3rd, 4th\n      case \"qo\":\n        return localize.ordinalNumber(quarter, { unit: \"quarter\" });\n      // Q1, Q2, Q3, Q4\n      case \"qqq\":\n        return localize.quarter(quarter, {\n          width: \"abbreviated\",\n          context: \"standalone\",\n        });\n      // 1, 2, 3, 4 (narrow quarter; could be not numerical)\n      case \"qqqqq\":\n        return localize.quarter(quarter, {\n          width: \"narrow\",\n          context: \"standalone\",\n        });\n      // 1st quarter, 2nd quarter, ...\n      case \"qqqq\":\n      default:\n        return localize.quarter(quarter, {\n          width: \"wide\",\n          context: \"standalone\",\n        });\n    }\n  },\n\n  // Month\n  M: function (date, token, localize) {\n    const month = date.getMonth();\n    switch (token) {\n      case \"M\":\n      case \"MM\":\n        return lightFormatters.M(date, token);\n      // 1st, 2nd, ..., 12th\n      case \"Mo\":\n        return localize.ordinalNumber(month + 1, { unit: \"month\" });\n      // Jan, Feb, ..., Dec\n      case \"MMM\":\n        return localize.month(month, {\n          width: \"abbreviated\",\n          context: \"formatting\",\n        });\n      // J, F, ..., D\n      case \"MMMMM\":\n        return localize.month(month, {\n          width: \"narrow\",\n          context: \"formatting\",\n        });\n      // January, February, ..., December\n      case \"MMMM\":\n      default:\n        return localize.month(month, { width: \"wide\", context: \"formatting\" });\n    }\n  },\n\n  // Stand-alone month\n  L: function (date, token, localize) {\n    const month = date.getMonth();\n    switch (token) {\n      // 1, 2, ..., 12\n      case \"L\":\n        return String(month + 1);\n      // 01, 02, ..., 12\n      case \"LL\":\n        return addLeadingZeros(month + 1, 2);\n      // 1st, 2nd, ..., 12th\n      case \"Lo\":\n        return localize.ordinalNumber(month + 1, { unit: \"month\" });\n      // Jan, Feb, ..., Dec\n      case \"LLL\":\n        return localize.month(month, {\n          width: \"abbreviated\",\n          context: \"standalone\",\n        });\n      // J, F, ..., D\n      case \"LLLLL\":\n        return localize.month(month, {\n          width: \"narrow\",\n          context: \"standalone\",\n        });\n      // January, February, ..., December\n      case \"LLLL\":\n      default:\n        return localize.month(month, { width: \"wide\", context: \"standalone\" });\n    }\n  },\n\n  // Local week of year\n  w: function (date, token, localize, options) {\n    const week = getWeek(date, options);\n\n    if (token === \"wo\") {\n      return localize.ordinalNumber(week, { unit: \"week\" });\n    }\n\n    return addLeadingZeros(week, token.length);\n  },\n\n  // ISO week of year\n  I: function (date, token, localize) {\n    const isoWeek = getISOWeek(date);\n\n    if (token === \"Io\") {\n      return localize.ordinalNumber(isoWeek, { unit: \"week\" });\n    }\n\n    return addLeadingZeros(isoWeek, token.length);\n  },\n\n  // Day of the month\n  d: function (date, token, localize) {\n    if (token === \"do\") {\n      return localize.ordinalNumber(date.getDate(), { unit: \"date\" });\n    }\n\n    return lightFormatters.d(date, token);\n  },\n\n  // Day of year\n  D: function (date, token, localize) {\n    const dayOfYear = getDayOfYear(date);\n\n    if (token === \"Do\") {\n      return localize.ordinalNumber(dayOfYear, { unit: \"dayOfYear\" });\n    }\n\n    return addLeadingZeros(dayOfYear, token.length);\n  },\n\n  // Day of week\n  E: function (date, token, localize) {\n    const dayOfWeek = date.getDay();\n    switch (token) {\n      // Tue\n      case \"E\":\n      case \"EE\":\n      case \"EEE\":\n        return localize.day(dayOfWeek, {\n          width: \"abbreviated\",\n          context: \"formatting\",\n        });\n      // T\n      case \"EEEEE\":\n        return localize.day(dayOfWeek, {\n          width: \"narrow\",\n          context: \"formatting\",\n        });\n      // Tu\n      case \"EEEEEE\":\n        return localize.day(dayOfWeek, {\n          width: \"short\",\n          context: \"formatting\",\n        });\n      // Tuesday\n      case \"EEEE\":\n      default:\n        return localize.day(dayOfWeek, {\n          width: \"wide\",\n          context: \"formatting\",\n        });\n    }\n  },\n\n  // Local day of week\n  e: function (date, token, localize, options) {\n    const dayOfWeek = date.getDay();\n    const localDayOfWeek = (dayOfWeek - options.weekStartsOn + 8) % 7 || 7;\n    switch (token) {\n      // Numerical value (Nth day of week with current locale or weekStartsOn)\n      case \"e\":\n        return String(localDayOfWeek);\n      // Padded numerical value\n      case \"ee\":\n        return addLeadingZeros(localDayOfWeek, 2);\n      // 1st, 2nd, ..., 7th\n      case \"eo\":\n        return localize.ordinalNumber(localDayOfWeek, { unit: \"day\" });\n      case \"eee\":\n        return localize.day(dayOfWeek, {\n          width: \"abbreviated\",\n          context: \"formatting\",\n        });\n      // T\n      case \"eeeee\":\n        return localize.day(dayOfWeek, {\n          width: \"narrow\",\n          context: \"formatting\",\n        });\n      // Tu\n      case \"eeeeee\":\n        return localize.day(dayOfWeek, {\n          width: \"short\",\n          context: \"formatting\",\n        });\n      // Tuesday\n      case \"eeee\":\n      default:\n        return localize.day(dayOfWeek, {\n          width: \"wide\",\n          context: \"formatting\",\n        });\n    }\n  },\n\n  // Stand-alone local day of week\n  c: function (date, token, localize, options) {\n    const dayOfWeek = date.getDay();\n    const localDayOfWeek = (dayOfWeek - options.weekStartsOn + 8) % 7 || 7;\n    switch (token) {\n      // Numerical value (same as in `e`)\n      case \"c\":\n        return String(localDayOfWeek);\n      // Padded numerical value\n      case \"cc\":\n        return addLeadingZeros(localDayOfWeek, token.length);\n      // 1st, 2nd, ..., 7th\n      case \"co\":\n        return localize.ordinalNumber(localDayOfWeek, { unit: \"day\" });\n      case \"ccc\":\n        return localize.day(dayOfWeek, {\n          width: \"abbreviated\",\n          context: \"standalone\",\n        });\n      // T\n      case \"ccccc\":\n        return localize.day(dayOfWeek, {\n          width: \"narrow\",\n          context: \"standalone\",\n        });\n      // Tu\n      case \"cccccc\":\n        return localize.day(dayOfWeek, {\n          width: \"short\",\n          context: \"standalone\",\n        });\n      // Tuesday\n      case \"cccc\":\n      default:\n        return localize.day(dayOfWeek, {\n          width: \"wide\",\n          context: \"standalone\",\n        });\n    }\n  },\n\n  // ISO day of week\n  i: function (date, token, localize) {\n    const dayOfWeek = date.getDay();\n    const isoDayOfWeek = dayOfWeek === 0 ? 7 : dayOfWeek;\n    switch (token) {\n      // 2\n      case \"i\":\n        return String(isoDayOfWeek);\n      // 02\n      case \"ii\":\n        return addLeadingZeros(isoDayOfWeek, token.length);\n      // 2nd\n      case \"io\":\n        return localize.ordinalNumber(isoDayOfWeek, { unit: \"day\" });\n      // Tue\n      case \"iii\":\n        return localize.day(dayOfWeek, {\n          width: \"abbreviated\",\n          context: \"formatting\",\n        });\n      // T\n      case \"iiiii\":\n        return localize.day(dayOfWeek, {\n          width: \"narrow\",\n          context: \"formatting\",\n        });\n      // Tu\n      case \"iiiiii\":\n        return localize.day(dayOfWeek, {\n          width: \"short\",\n          context: \"formatting\",\n        });\n      // Tuesday\n      case \"iiii\":\n      default:\n        return localize.day(dayOfWeek, {\n          width: \"wide\",\n          context: \"formatting\",\n        });\n    }\n  },\n\n  // AM or PM\n  a: function (date, token, localize) {\n    const hours = date.getHours();\n    const dayPeriodEnumValue = hours / 12 >= 1 ? \"pm\" : \"am\";\n\n    switch (token) {\n      case \"a\":\n      case \"aa\":\n        return localize.dayPeriod(dayPeriodEnumValue, {\n          width: \"abbreviated\",\n          context: \"formatting\",\n        });\n      case \"aaa\":\n        return localize\n          .dayPeriod(dayPeriodEnumValue, {\n            width: \"abbreviated\",\n            context: \"formatting\",\n          })\n          .toLowerCase();\n      case \"aaaaa\":\n        return localize.dayPeriod(dayPeriodEnumValue, {\n          width: \"narrow\",\n          context: \"formatting\",\n        });\n      case \"aaaa\":\n      default:\n        return localize.dayPeriod(dayPeriodEnumValue, {\n          width: \"wide\",\n          context: \"formatting\",\n        });\n    }\n  },\n\n  // AM, PM, midnight, noon\n  b: function (date, token, localize) {\n    const hours = date.getHours();\n    let dayPeriodEnumValue;\n    if (hours === 12) {\n      dayPeriodEnumValue = dayPeriodEnum.noon;\n    } else if (hours === 0) {\n      dayPeriodEnumValue = dayPeriodEnum.midnight;\n    } else {\n      dayPeriodEnumValue = hours / 12 >= 1 ? \"pm\" : \"am\";\n    }\n\n    switch (token) {\n      case \"b\":\n      case \"bb\":\n        return localize.dayPeriod(dayPeriodEnumValue, {\n          width: \"abbreviated\",\n          context: \"formatting\",\n        });\n      case \"bbb\":\n        return localize\n          .dayPeriod(dayPeriodEnumValue, {\n            width: \"abbreviated\",\n            context: \"formatting\",\n          })\n          .toLowerCase();\n      case \"bbbbb\":\n        return localize.dayPeriod(dayPeriodEnumValue, {\n          width: \"narrow\",\n          context: \"formatting\",\n        });\n      case \"bbbb\":\n      default:\n        return localize.dayPeriod(dayPeriodEnumValue, {\n          width: \"wide\",\n          context: \"formatting\",\n        });\n    }\n  },\n\n  // in the morning, in the afternoon, in the evening, at night\n  B: function (date, token, localize) {\n    const hours = date.getHours();\n    let dayPeriodEnumValue;\n    if (hours >= 17) {\n      dayPeriodEnumValue = dayPeriodEnum.evening;\n    } else if (hours >= 12) {\n      dayPeriodEnumValue = dayPeriodEnum.afternoon;\n    } else if (hours >= 4) {\n      dayPeriodEnumValue = dayPeriodEnum.morning;\n    } else {\n      dayPeriodEnumValue = dayPeriodEnum.night;\n    }\n\n    switch (token) {\n      case \"B\":\n      case \"BB\":\n      case \"BBB\":\n        return localize.dayPeriod(dayPeriodEnumValue, {\n          width: \"abbreviated\",\n          context: \"formatting\",\n        });\n      case \"BBBBB\":\n        return localize.dayPeriod(dayPeriodEnumValue, {\n          width: \"narrow\",\n          context: \"formatting\",\n        });\n      case \"BBBB\":\n      default:\n        return localize.dayPeriod(dayPeriodEnumValue, {\n          width: \"wide\",\n          context: \"formatting\",\n        });\n    }\n  },\n\n  // Hour [1-12]\n  h: function (date, token, localize) {\n    if (token === \"ho\") {\n      let hours = date.getHours() % 12;\n      if (hours === 0) hours = 12;\n      return localize.ordinalNumber(hours, { unit: \"hour\" });\n    }\n\n    return lightFormatters.h(date, token);\n  },\n\n  // Hour [0-23]\n  H: function (date, token, localize) {\n    if (token === \"Ho\") {\n      return localize.ordinalNumber(date.getHours(), { unit: \"hour\" });\n    }\n\n    return lightFormatters.H(date, token);\n  },\n\n  // Hour [0-11]\n  K: function (date, token, localize) {\n    const hours = date.getHours() % 12;\n\n    if (token === \"Ko\") {\n      return localize.ordinalNumber(hours, { unit: \"hour\" });\n    }\n\n    return addLeadingZeros(hours, token.length);\n  },\n\n  // Hour [1-24]\n  k: function (date, token, localize) {\n    let hours = date.getHours();\n    if (hours === 0) hours = 24;\n\n    if (token === \"ko\") {\n      return localize.ordinalNumber(hours, { unit: \"hour\" });\n    }\n\n    return addLeadingZeros(hours, token.length);\n  },\n\n  // Minute\n  m: function (date, token, localize) {\n    if (token === \"mo\") {\n      return localize.ordinalNumber(date.getMinutes(), { unit: \"minute\" });\n    }\n\n    return lightFormatters.m(date, token);\n  },\n\n  // Second\n  s: function (date, token, localize) {\n    if (token === \"so\") {\n      return localize.ordinalNumber(date.getSeconds(), { unit: \"second\" });\n    }\n\n    return lightFormatters.s(date, token);\n  },\n\n  // Fraction of second\n  S: function (date, token) {\n    return lightFormatters.S(date, token);\n  },\n\n  // Timezone (ISO-8601. If offset is 0, output is always `'Z'`)\n  X: function (date, token, _localize) {\n    const timezoneOffset = date.getTimezoneOffset();\n\n    if (timezoneOffset === 0) {\n      return \"Z\";\n    }\n\n    switch (token) {\n      // Hours and optional minutes\n      case \"X\":\n        return formatTimezoneWithOptionalMinutes(timezoneOffset);\n\n      // Hours, minutes and optional seconds without `:` delimiter\n      // Note: neither ISO-8601 nor JavaScript supports seconds in timezone offsets\n      // so this token always has the same output as `XX`\n      case \"XXXX\":\n      case \"XX\": // Hours and minutes without `:` delimiter\n        return formatTimezone(timezoneOffset);\n\n      // Hours, minutes and optional seconds with `:` delimiter\n      // Note: neither ISO-8601 nor JavaScript supports seconds in timezone offsets\n      // so this token always has the same output as `XXX`\n      case \"XXXXX\":\n      case \"XXX\": // Hours and minutes with `:` delimiter\n      default:\n        return formatTimezone(timezoneOffset, \":\");\n    }\n  },\n\n  // Timezone (ISO-8601. If offset is 0, output is `'+00:00'` or equivalent)\n  x: function (date, token, _localize) {\n    const timezoneOffset = date.getTimezoneOffset();\n\n    switch (token) {\n      // Hours and optional minutes\n      case \"x\":\n        return formatTimezoneWithOptionalMinutes(timezoneOffset);\n\n      // Hours, minutes and optional seconds without `:` delimiter\n      // Note: neither ISO-8601 nor JavaScript supports seconds in timezone offsets\n      // so this token always has the same output as `xx`\n      case \"xxxx\":\n      case \"xx\": // Hours and minutes without `:` delimiter\n        return formatTimezone(timezoneOffset);\n\n      // Hours, minutes and optional seconds with `:` delimiter\n      // Note: neither ISO-8601 nor JavaScript supports seconds in timezone offsets\n      // so this token always has the same output as `xxx`\n      case \"xxxxx\":\n      case \"xxx\": // Hours and minutes with `:` delimiter\n      default:\n        return formatTimezone(timezoneOffset, \":\");\n    }\n  },\n\n  // Timezone (GMT)\n  O: function (date, token, _localize) {\n    const timezoneOffset = date.getTimezoneOffset();\n\n    switch (token) {\n      // Short\n      case \"O\":\n      case \"OO\":\n      case \"OOO\":\n        return \"GMT\" + formatTimezoneShort(timezoneOffset, \":\");\n      // Long\n      case \"OOOO\":\n      default:\n        return \"GMT\" + formatTimezone(timezoneOffset, \":\");\n    }\n  },\n\n  // Timezone (specific non-location)\n  z: function (date, token, _localize) {\n    const timezoneOffset = date.getTimezoneOffset();\n\n    switch (token) {\n      // Short\n      case \"z\":\n      case \"zz\":\n      case \"zzz\":\n        return \"GMT\" + formatTimezoneShort(timezoneOffset, \":\");\n      // Long\n      case \"zzzz\":\n      default:\n        return \"GMT\" + formatTimezone(timezoneOffset, \":\");\n    }\n  },\n\n  // Seconds timestamp\n  t: function (date, token, _localize) {\n    const timestamp = Math.trunc(+date / 1000);\n    return addLeadingZeros(timestamp, token.length);\n  },\n\n  // Milliseconds timestamp\n  T: function (date, token, _localize) {\n    return addLeadingZeros(+date, token.length);\n  },\n};\n\nfunction formatTimezoneShort(offset, delimiter = \"\") {\n  const sign = offset > 0 ? \"-\" : \"+\";\n  const absOffset = Math.abs(offset);\n  const hours = Math.trunc(absOffset / 60);\n  const minutes = absOffset % 60;\n  if (minutes === 0) {\n    return sign + String(hours);\n  }\n  return sign + String(hours) + delimiter + addLeadingZeros(minutes, 2);\n}\n\nfunction formatTimezoneWithOptionalMinutes(offset, delimiter) {\n  if (offset % 60 === 0) {\n    const sign = offset > 0 ? \"-\" : \"+\";\n    return sign + addLeadingZeros(Math.abs(offset) / 60, 2);\n  }\n  return formatTimezone(offset, delimiter);\n}\n\nfunction formatTimezone(offset, delimiter = \"\") {\n  const sign = offset > 0 ? \"-\" : \"+\";\n  const absOffset = Math.abs(offset);\n  const hours = addLeadingZeros(Math.trunc(absOffset / 60), 2);\n  const minutes = addLeadingZeros(absOffset % 60, 2);\n  return sign + hours + delimiter + minutes;\n}\n","const dateLongFormatter = (pattern, formatLong) => {\n  switch (pattern) {\n    case \"P\":\n      return formatLong.date({ width: \"short\" });\n    case \"PP\":\n      return formatLong.date({ width: \"medium\" });\n    case \"PPP\":\n      return formatLong.date({ width: \"long\" });\n    case \"PPPP\":\n    default:\n      return formatLong.date({ width: \"full\" });\n  }\n};\n\nconst timeLongFormatter = (pattern, formatLong) => {\n  switch (pattern) {\n    case \"p\":\n      return formatLong.time({ width: \"short\" });\n    case \"pp\":\n      return formatLong.time({ width: \"medium\" });\n    case \"ppp\":\n      return formatLong.time({ width: \"long\" });\n    case \"pppp\":\n    default:\n      return formatLong.time({ width: \"full\" });\n  }\n};\n\nconst dateTimeLongFormatter = (pattern, formatLong) => {\n  const matchResult = pattern.match(/(P+)(p+)?/) || [];\n  const datePattern = matchResult[1];\n  const timePattern = matchResult[2];\n\n  if (!timePattern) {\n    return dateLongFormatter(pattern, formatLong);\n  }\n\n  let dateTimeFormat;\n\n  switch (datePattern) {\n    case \"P\":\n      dateTimeFormat = formatLong.dateTime({ width: \"short\" });\n      break;\n    case \"PP\":\n      dateTimeFormat = formatLong.dateTime({ width: \"medium\" });\n      break;\n    case \"PPP\":\n      dateTimeFormat = formatLong.dateTime({ width: \"long\" });\n      break;\n    case \"PPPP\":\n    default:\n      dateTimeFormat = formatLong.dateTime({ width: \"full\" });\n      break;\n  }\n\n  return dateTimeFormat\n    .replace(\"{{date}}\", dateLongFormatter(datePattern, formatLong))\n    .replace(\"{{time}}\", timeLongFormatter(timePattern, formatLong));\n};\n\nexport const longFormatters = {\n  p: timeLongFormatter,\n  P: dateTimeLongFormatter,\n};\n","const dayOfYearTokenRE = /^D+$/;\nconst weekYearTokenRE = /^Y+$/;\n\nconst throwTokens = [\"D\", \"DD\", \"YY\", \"YYYY\"];\n\nexport function isProtectedDayOfYearToken(token) {\n  return dayOfYearTokenRE.test(token);\n}\n\nexport function isProtectedWeekYearToken(token) {\n  return weekYearTokenRE.test(token);\n}\n\nexport function warnOrThrowProtectedError(token, format, input) {\n  const _message = message(token, format, input);\n  console.warn(_message);\n  if (throwTokens.includes(token)) throw new RangeError(_message);\n}\n\nfunction message(token, format, input) {\n  const subject = token[0] === \"Y\" ? \"years\" : \"days of the month\";\n  return `Use \\`${token.toLowerCase()}\\` instead of \\`${token}\\` (in \\`${format}\\`) for formatting ${subject} to the input \\`${input}\\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`;\n}\n","/**\n * @name isDate\n * @category Common Helpers\n * @summary Is the given value a date?\n *\n * @description\n * Returns true if the given value is an instance of Date. The function works for dates transferred across iframes.\n *\n * @param value - The value to check\n *\n * @returns True if the given value is a date\n *\n * @example\n * // For a valid date:\n * const result = isDate(new Date())\n * //=> true\n *\n * @example\n * // For an invalid date:\n * const result = isDate(new Date(NaN))\n * //=> true\n *\n * @example\n * // For some value:\n * const result = isDate('2014-02-31')\n * //=> false\n *\n * @example\n * // For an object:\n * const result = isDate({})\n * //=> false\n */\nexport function isDate(value) {\n  return (\n    value instanceof Date ||\n    (typeof value === \"object\" &&\n      Object.prototype.toString.call(value) === \"[object Date]\")\n  );\n}\n\n// Fallback for modularized imports:\nexport default isDate;\n","import { isDate } from \"./isDate.js\";\nimport { toDate } from \"./toDate.js\";\n\n/**\n * @name isValid\n * @category Common Helpers\n * @summary Is the given date valid?\n *\n * @description\n * Returns false if argument is Invalid Date and true otherwise.\n * Argument is converted to Date using `toDate`. See [toDate](https://date-fns.org/docs/toDate)\n * Invalid Date is a Date, whose time value is NaN.\n *\n * Time value of Date: http://es5.github.io/#x15.9.1.1\n *\n * @param date - The date to check\n *\n * @returns The date is valid\n *\n * @example\n * // For the valid date:\n * const result = isValid(new Date(2014, 1, 31))\n * //=> true\n *\n * @example\n * // For the value, convertible into a date:\n * const result = isValid(1393804800000)\n * //=> true\n *\n * @example\n * // For the invalid date:\n * const result = isValid(new Date(''))\n * //=> false\n */\nexport function isValid(date) {\n  return !((!isDate(date) && typeof date !== \"number\") || isNaN(+toDate(date)));\n}\n\n// Fallback for modularized imports:\nexport default isValid;\n","import { defaultLocale } from \"./_lib/defaultLocale.js\";\nimport { getDefaultOptions } from \"./_lib/defaultOptions.js\";\nimport { formatters } from \"./_lib/format/formatters.js\";\nimport { longFormatters } from \"./_lib/format/longFormatters.js\";\nimport {\n  isProtectedDayOfYearToken,\n  isProtectedWeekYearToken,\n  warnOrThrowProtectedError,\n} from \"./_lib/protectedTokens.js\";\nimport { isValid } from \"./isValid.js\";\nimport { toDate } from \"./toDate.js\";\n\n// Rexports of internal for libraries to use.\n// See: https://github.com/date-fns/date-fns/issues/3638#issuecomment-1877082874\nexport { formatters, longFormatters };\n\n// This RegExp consists of three parts separated by `|`:\n// - [yYQqMLwIdDecihHKkms]o matches any available ordinal number token\n//   (one of the certain letters followed by `o`)\n// - (\\w)\\1* matches any sequences of the same letter\n// - '' matches two quote characters in a row\n// - '(''|[^'])+('|$) matches anything surrounded by two quote characters ('),\n//   except a single quote symbol, which ends the sequence.\n//   Two quote characters do not end the sequence.\n//   If there is no matching single quote\n//   then the sequence will continue until the end of the string.\n// - . matches any single character unmatched by previous parts of the RegExps\nconst formattingTokensRegExp =\n  /[yYQqMLwIdDecihHKkms]o|(\\w)\\1*|''|'(''|[^'])+('|$)|./g;\n\n// This RegExp catches symbols escaped by quotes, and also\n// sequences of symbols P, p, and the combinations like `PPPPPPPppppp`\nconst longFormattingTokensRegExp = /P+p+|P+|p+|''|'(''|[^'])+('|$)|./g;\n\nconst escapedStringRegExp = /^'([^]*?)'?$/;\nconst doubleQuoteRegExp = /''/g;\nconst unescapedLatinCharacterRegExp = /[a-zA-Z]/;\n\nexport { format as formatDate };\n\n/**\n * The {@link format} function options.\n */\n\n/**\n * @name format\n * @alias formatDate\n * @category Common Helpers\n * @summary Format the date.\n *\n * @description\n * Return the formatted date string in the given format. The result may vary by locale.\n *\n * > ⚠️ Please note that the `format` tokens differ from Moment.js and other libraries.\n * > See: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md\n *\n * The characters wrapped between two single quotes characters (') are escaped.\n * Two single quotes in a row, whether inside or outside a quoted sequence, represent a 'real' single quote.\n * (see the last example)\n *\n * Format of the string is based on Unicode Technical Standard #35:\n * https://www.unicode.org/reports/tr35/tr35-dates.html#Date_Field_Symbol_Table\n * with a few additions (see note 7 below the table).\n *\n * Accepted patterns:\n * | Unit                            | Pattern | Result examples                   | Notes |\n * |---------------------------------|---------|-----------------------------------|-------|\n * | Era                             | G..GGG  | AD, BC                            |       |\n * |                                 | GGGG    | Anno Domini, Before Christ        | 2     |\n * |                                 | GGGGG   | A, B                              |       |\n * | Calendar year                   | y       | 44, 1, 1900, 2017                 | 5     |\n * |                                 | yo      | 44th, 1st, 0th, 17th              | 5,7   |\n * |                                 | yy      | 44, 01, 00, 17                    | 5     |\n * |                                 | yyy     | 044, 001, 1900, 2017              | 5     |\n * |                                 | yyyy    | 0044, 0001, 1900, 2017            | 5     |\n * |                                 | yyyyy   | ...                               | 3,5   |\n * | Local week-numbering year       | Y       | 44, 1, 1900, 2017                 | 5     |\n * |                                 | Yo      | 44th, 1st, 1900th, 2017th         | 5,7   |\n * |                                 | YY      | 44, 01, 00, 17                    | 5,8   |\n * |                                 | YYY     | 044, 001, 1900, 2017              | 5     |\n * |                                 | YYYY    | 0044, 0001, 1900, 2017            | 5,8   |\n * |                                 | YYYYY   | ...                               | 3,5   |\n * | ISO week-numbering year         | R       | -43, 0, 1, 1900, 2017             | 5,7   |\n * |                                 | RR      | -43, 00, 01, 1900, 2017           | 5,7   |\n * |                                 | RRR     | -043, 000, 001, 1900, 2017        | 5,7   |\n * |                                 | RRRR    | -0043, 0000, 0001, 1900, 2017     | 5,7   |\n * |                                 | RRRRR   | ...                               | 3,5,7 |\n * | Extended year                   | u       | -43, 0, 1, 1900, 2017             | 5     |\n * |                                 | uu      | -43, 01, 1900, 2017               | 5     |\n * |                                 | uuu     | -043, 001, 1900, 2017             | 5     |\n * |                                 | uuuu    | -0043, 0001, 1900, 2017           | 5     |\n * |                                 | uuuuu   | ...                               | 3,5   |\n * | Quarter (formatting)            | Q       | 1, 2, 3, 4                        |       |\n * |                                 | Qo      | 1st, 2nd, 3rd, 4th                | 7     |\n * |                                 | QQ      | 01, 02, 03, 04                    |       |\n * |                                 | QQQ     | Q1, Q2, Q3, Q4                    |       |\n * |                                 | QQQQ    | 1st quarter, 2nd quarter, ...     | 2     |\n * |                                 | QQQQQ   | 1, 2, 3, 4                        | 4     |\n * | Quarter (stand-alone)           | q       | 1, 2, 3, 4                        |       |\n * |                                 | qo      | 1st, 2nd, 3rd, 4th                | 7     |\n * |                                 | qq      | 01, 02, 03, 04                    |       |\n * |                                 | qqq     | Q1, Q2, Q3, Q4                    |       |\n * |                                 | qqqq    | 1st quarter, 2nd quarter, ...     | 2     |\n * |                                 | qqqqq   | 1, 2, 3, 4                        | 4     |\n * | Month (formatting)              | M       | 1, 2, ..., 12                     |       |\n * |                                 | Mo      | 1st, 2nd, ..., 12th               | 7     |\n * |                                 | MM      | 01, 02, ..., 12                   |       |\n * |                                 | MMM     | Jan, Feb, ..., Dec                |       |\n * |                                 | MMMM    | January, February, ..., December  | 2     |\n * |                                 | MMMMM   | J, F, ..., D                      |       |\n * | Month (stand-alone)             | L       | 1, 2, ..., 12                     |       |\n * |                                 | Lo      | 1st, 2nd, ..., 12th               | 7     |\n * |                                 | LL      | 01, 02, ..., 12                   |       |\n * |                                 | LLL     | Jan, Feb, ..., Dec                |       |\n * |                                 | LLLL    | January, February, ..., December  | 2     |\n * |                                 | LLLLL   | J, F, ..., D                      |       |\n * | Local week of year              | w       | 1, 2, ..., 53                     |       |\n * |                                 | wo      | 1st, 2nd, ..., 53th               | 7     |\n * |                                 | ww      | 01, 02, ..., 53                   |       |\n * | ISO week of year                | I       | 1, 2, ..., 53                     | 7     |\n * |                                 | Io      | 1st, 2nd, ..., 53th               | 7     |\n * |                                 | II      | 01, 02, ..., 53                   | 7     |\n * | Day of month                    | d       | 1, 2, ..., 31                     |       |\n * |                                 | do      | 1st, 2nd, ..., 31st               | 7     |\n * |                                 | dd      | 01, 02, ..., 31                   |       |\n * | Day of year                     | D       | 1, 2, ..., 365, 366               | 9     |\n * |                                 | Do      | 1st, 2nd, ..., 365th, 366th       | 7     |\n * |                                 | DD      | 01, 02, ..., 365, 366             | 9     |\n * |                                 | DDD     | 001, 002, ..., 365, 366           |       |\n * |                                 | DDDD    | ...                               | 3     |\n * | Day of week (formatting)        | E..EEE  | Mon, Tue, Wed, ..., Sun           |       |\n * |                                 | EEEE    | Monday, Tuesday, ..., Sunday      | 2     |\n * |                                 | EEEEE   | M, T, W, T, F, S, S               |       |\n * |                                 | EEEEEE  | Mo, Tu, We, Th, Fr, Sa, Su        |       |\n * | ISO day of week (formatting)    | i       | 1, 2, 3, ..., 7                   | 7     |\n * |                                 | io      | 1st, 2nd, ..., 7th                | 7     |\n * |                                 | ii      | 01, 02, ..., 07                   | 7     |\n * |                                 | iii     | Mon, Tue, Wed, ..., Sun           | 7     |\n * |                                 | iiii    | Monday, Tuesday, ..., Sunday      | 2,7   |\n * |                                 | iiiii   | M, T, W, T, F, S, S               | 7     |\n * |                                 | iiiiii  | Mo, Tu, We, Th, Fr, Sa, Su        | 7     |\n * | Local day of week (formatting)  | e       | 2, 3, 4, ..., 1                   |       |\n * |                                 | eo      | 2nd, 3rd, ..., 1st                | 7     |\n * |                                 | ee      | 02, 03, ..., 01                   |       |\n * |                                 | eee     | Mon, Tue, Wed, ..., Sun           |       |\n * |                                 | eeee    | Monday, Tuesday, ..., Sunday      | 2     |\n * |                                 | eeeee   | M, T, W, T, F, S, S               |       |\n * |                                 | eeeeee  | Mo, Tu, We, Th, Fr, Sa, Su        |       |\n * | Local day of week (stand-alone) | c       | 2, 3, 4, ..., 1                   |       |\n * |                                 | co      | 2nd, 3rd, ..., 1st                | 7     |\n * |                                 | cc      | 02, 03, ..., 01                   |       |\n * |                                 | ccc     | Mon, Tue, Wed, ..., Sun           |       |\n * |                                 | cccc    | Monday, Tuesday, ..., Sunday      | 2     |\n * |                                 | ccccc   | M, T, W, T, F, S, S               |       |\n * |                                 | cccccc  | Mo, Tu, We, Th, Fr, Sa, Su        |       |\n * | AM, PM                          | a..aa   | AM, PM                            |       |\n * |                                 | aaa     | am, pm                            |       |\n * |                                 | aaaa    | a.m., p.m.                        | 2     |\n * |                                 | aaaaa   | a, p                              |       |\n * | AM, PM, noon, midnight          | b..bb   | AM, PM, noon, midnight            |       |\n * |                                 | bbb     | am, pm, noon, midnight            |       |\n * |                                 | bbbb    | a.m., p.m., noon, midnight        | 2     |\n * |                                 | bbbbb   | a, p, n, mi                       |       |\n * | Flexible day period             | B..BBB  | at night, in the morning, ...     |       |\n * |                                 | BBBB    | at night, in the morning, ...     | 2     |\n * |                                 | BBBBB   | at night, in the morning, ...     |       |\n * | Hour [1-12]                     | h       | 1, 2, ..., 11, 12                 |       |\n * |                                 | ho      | 1st, 2nd, ..., 11th, 12th         | 7     |\n * |                                 | hh      | 01, 02, ..., 11, 12               |       |\n * | Hour [0-23]                     | H       | 0, 1, 2, ..., 23                  |       |\n * |                                 | Ho      | 0th, 1st, 2nd, ..., 23rd          | 7     |\n * |                                 | HH      | 00, 01, 02, ..., 23               |       |\n * | Hour [0-11]                     | K       | 1, 2, ..., 11, 0                  |       |\n * |                                 | Ko      | 1st, 2nd, ..., 11th, 0th          | 7     |\n * |                                 | KK      | 01, 02, ..., 11, 00               |       |\n * | Hour [1-24]                     | k       | 24, 1, 2, ..., 23                 |       |\n * |                                 | ko      | 24th, 1st, 2nd, ..., 23rd         | 7     |\n * |                                 | kk      | 24, 01, 02, ..., 23               |       |\n * | Minute                          | m       | 0, 1, ..., 59                     |       |\n * |                                 | mo      | 0th, 1st, ..., 59th               | 7     |\n * |                                 | mm      | 00, 01, ..., 59                   |       |\n * | Second                          | s       | 0, 1, ..., 59                     |       |\n * |                                 | so      | 0th, 1st, ..., 59th               | 7     |\n * |                                 | ss      | 00, 01, ..., 59                   |       |\n * | Fraction of second              | S       | 0, 1, ..., 9                      |       |\n * |                                 | SS      | 00, 01, ..., 99                   |       |\n * |                                 | SSS     | 000, 001, ..., 999                |       |\n * |                                 | SSSS    | ...                               | 3     |\n * | Timezone (ISO-8601 w/ Z)        | X       | -08, +0530, Z                     |       |\n * |                                 | XX      | -0800, +0530, Z                   |       |\n * |                                 | XXX     | -08:00, +05:30, Z                 |       |\n * |                                 | XXXX    | -0800, +0530, Z, +123456          | 2     |\n * |                                 | XXXXX   | -08:00, +05:30, Z, +12:34:56      |       |\n * | Timezone (ISO-8601 w/o Z)       | x       | -08, +0530, +00                   |       |\n * |                                 | xx      | -0800, +0530, +0000               |       |\n * |                                 | xxx     | -08:00, +05:30, +00:00            | 2     |\n * |                                 | xxxx    | -0800, +0530, +0000, +123456      |       |\n * |                                 | xxxxx   | -08:00, +05:30, +00:00, +12:34:56 |       |\n * | Timezone (GMT)                  | O...OOO | GMT-8, GMT+5:30, GMT+0            |       |\n * |                                 | OOOO    | GMT-08:00, GMT+05:30, GMT+00:00   | 2     |\n * | Timezone (specific non-locat.)  | z...zzz | GMT-8, GMT+5:30, GMT+0            | 6     |\n * |                                 | zzzz    | GMT-08:00, GMT+05:30, GMT+00:00   | 2,6   |\n * | Seconds timestamp               | t       | 512969520                         | 7     |\n * |                                 | tt      | ...                               | 3,7   |\n * | Milliseconds timestamp          | T       | 512969520900                      | 7     |\n * |                                 | TT      | ...                               | 3,7   |\n * | Long localized date             | P       | 04/29/1453                        | 7     |\n * |                                 | PP      | Apr 29, 1453                      | 7     |\n * |                                 | PPP     | April 29th, 1453                  | 7     |\n * |                                 | PPPP    | Friday, April 29th, 1453          | 2,7   |\n * | Long localized time             | p       | 12:00 AM                          | 7     |\n * |                                 | pp      | 12:00:00 AM                       | 7     |\n * |                                 | ppp     | 12:00:00 AM GMT+2                 | 7     |\n * |                                 | pppp    | 12:00:00 AM GMT+02:00             | 2,7   |\n * | Combination of date and time    | Pp      | 04/29/1453, 12:00 AM              | 7     |\n * |                                 | PPpp    | Apr 29, 1453, 12:00:00 AM         | 7     |\n * |                                 | PPPppp  | April 29th, 1453 at ...           | 7     |\n * |                                 | PPPPpppp| Friday, April 29th, 1453 at ...   | 2,7   |\n * Notes:\n * 1. \"Formatting\" units (e.g. formatting quarter) in the default en-US locale\n *    are the same as \"stand-alone\" units, but are different in some languages.\n *    \"Formatting\" units are declined according to the rules of the language\n *    in the context of a date. \"Stand-alone\" units are always nominative singular:\n *\n *    `format(new Date(2017, 10, 6), 'do LLLL', {locale: cs}) //=> '6. listopad'`\n *\n *    `format(new Date(2017, 10, 6), 'do MMMM', {locale: cs}) //=> '6. listopadu'`\n *\n * 2. Any sequence of the identical letters is a pattern, unless it is escaped by\n *    the single quote characters (see below).\n *    If the sequence is longer than listed in table (e.g. `EEEEEEEEEEE`)\n *    the output will be the same as default pattern for this unit, usually\n *    the longest one (in case of ISO weekdays, `EEEE`). Default patterns for units\n *    are marked with \"2\" in the last column of the table.\n *\n *    `format(new Date(2017, 10, 6), 'MMM') //=> 'Nov'`\n *\n *    `format(new Date(2017, 10, 6), 'MMMM') //=> 'November'`\n *\n *    `format(new Date(2017, 10, 6), 'MMMMM') //=> 'N'`\n *\n *    `format(new Date(2017, 10, 6), 'MMMMMM') //=> 'November'`\n *\n *    `format(new Date(2017, 10, 6), 'MMMMMMM') //=> 'November'`\n *\n * 3. Some patterns could be unlimited length (such as `yyyyyyyy`).\n *    The output will be padded with zeros to match the length of the pattern.\n *\n *    `format(new Date(2017, 10, 6), 'yyyyyyyy') //=> '00002017'`\n *\n * 4. `QQQQQ` and `qqqqq` could be not strictly numerical in some locales.\n *    These tokens represent the shortest form of the quarter.\n *\n * 5. The main difference between `y` and `u` patterns are B.C. years:\n *\n *    | Year | `y` | `u` |\n *    |------|-----|-----|\n *    | AC 1 |   1 |   1 |\n *    | BC 1 |   1 |   0 |\n *    | BC 2 |   2 |  -1 |\n *\n *    Also `yy` always returns the last two digits of a year,\n *    while `uu` pads single digit years to 2 characters and returns other years unchanged:\n *\n *    | Year | `yy` | `uu` |\n *    |------|------|------|\n *    | 1    |   01 |   01 |\n *    | 14   |   14 |   14 |\n *    | 376  |   76 |  376 |\n *    | 1453 |   53 | 1453 |\n *\n *    The same difference is true for local and ISO week-numbering years (`Y` and `R`),\n *    except local week-numbering years are dependent on `options.weekStartsOn`\n *    and `options.firstWeekContainsDate` (compare [getISOWeekYear](https://date-fns.org/docs/getISOWeekYear)\n *    and [getWeekYear](https://date-fns.org/docs/getWeekYear)).\n *\n * 6. Specific non-location timezones are currently unavailable in `date-fns`,\n *    so right now these tokens fall back to GMT timezones.\n *\n * 7. These patterns are not in the Unicode Technical Standard #35:\n *    - `i`: ISO day of week\n *    - `I`: ISO week of year\n *    - `R`: ISO week-numbering year\n *    - `t`: seconds timestamp\n *    - `T`: milliseconds timestamp\n *    - `o`: ordinal number modifier\n *    - `P`: long localized date\n *    - `p`: long localized time\n *\n * 8. `YY` and `YYYY` tokens represent week-numbering years but they are often confused with years.\n *    You should enable `options.useAdditionalWeekYearTokens` to use them. See: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md\n *\n * 9. `D` and `DD` tokens represent days of the year but they are often confused with days of the month.\n *    You should enable `options.useAdditionalDayOfYearTokens` to use them. See: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md\n *\n * @param date - The original date\n * @param format - The string of tokens\n * @param options - An object with options\n *\n * @returns The formatted date string\n *\n * @throws `date` must not be Invalid Date\n * @throws `options.locale` must contain `localize` property\n * @throws `options.locale` must contain `formatLong` property\n * @throws use `yyyy` instead of `YYYY` for formatting years using [format provided] to the input [input provided]; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md\n * @throws use `yy` instead of `YY` for formatting years using [format provided] to the input [input provided]; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md\n * @throws use `d` instead of `D` for formatting days of the month using [format provided] to the input [input provided]; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md\n * @throws use `dd` instead of `DD` for formatting days of the month using [format provided] to the input [input provided]; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md\n * @throws format string contains an unescaped latin alphabet character\n *\n * @example\n * // Represent 11 February 2014 in middle-endian format:\n * const result = format(new Date(2014, 1, 11), 'MM/dd/yyyy')\n * //=> '02/11/2014'\n *\n * @example\n * // Represent 2 July 2014 in Esperanto:\n * import { eoLocale } from 'date-fns/locale/eo'\n * const result = format(new Date(2014, 6, 2), \"do 'de' MMMM yyyy\", {\n *   locale: eoLocale\n * })\n * //=> '2-a de julio 2014'\n *\n * @example\n * // Escape string by single quote characters:\n * const result = format(new Date(2014, 6, 2, 15), \"h 'o''clock'\")\n * //=> \"3 o'clock\"\n */\nexport function format(date, formatStr, options) {\n  const defaultOptions = getDefaultOptions();\n  const locale = options?.locale ?? defaultOptions.locale ?? defaultLocale;\n\n  const firstWeekContainsDate =\n    options?.firstWeekContainsDate ??\n    options?.locale?.options?.firstWeekContainsDate ??\n    defaultOptions.firstWeekContainsDate ??\n    defaultOptions.locale?.options?.firstWeekContainsDate ??\n    1;\n\n  const weekStartsOn =\n    options?.weekStartsOn ??\n    options?.locale?.options?.weekStartsOn ??\n    defaultOptions.weekStartsOn ??\n    defaultOptions.locale?.options?.weekStartsOn ??\n    0;\n\n  const originalDate = toDate(date, options?.in);\n\n  if (!isValid(originalDate)) {\n    throw new RangeError(\"Invalid time value\");\n  }\n\n  let parts = formatStr\n    .match(longFormattingTokensRegExp)\n    .map((substring) => {\n      const firstCharacter = substring[0];\n      if (firstCharacter === \"p\" || firstCharacter === \"P\") {\n        const longFormatter = longFormatters[firstCharacter];\n        return longFormatter(substring, locale.formatLong);\n      }\n      return substring;\n    })\n    .join(\"\")\n    .match(formattingTokensRegExp)\n    .map((substring) => {\n      // Replace two single quote characters with one single quote character\n      if (substring === \"''\") {\n        return { isToken: false, value: \"'\" };\n      }\n\n      const firstCharacter = substring[0];\n      if (firstCharacter === \"'\") {\n        return { isToken: false, value: cleanEscapedString(substring) };\n      }\n\n      if (formatters[firstCharacter]) {\n        return { isToken: true, value: substring };\n      }\n\n      if (firstCharacter.match(unescapedLatinCharacterRegExp)) {\n        throw new RangeError(\n          \"Format string contains an unescaped latin alphabet character `\" +\n            firstCharacter +\n            \"`\",\n        );\n      }\n\n      return { isToken: false, value: substring };\n    });\n\n  // invoke localize preprocessor (only for french locales at the moment)\n  if (locale.localize.preprocessor) {\n    parts = locale.localize.preprocessor(originalDate, parts);\n  }\n\n  const formatterOptions = {\n    firstWeekContainsDate,\n    weekStartsOn,\n    locale,\n  };\n\n  return parts\n    .map((part) => {\n      if (!part.isToken) return part.value;\n\n      const token = part.value;\n\n      if (\n        (!options?.useAdditionalWeekYearTokens &&\n          isProtectedWeekYearToken(token)) ||\n        (!options?.useAdditionalDayOfYearTokens &&\n          isProtectedDayOfYearToken(token))\n      ) {\n        warnOrThrowProtectedError(token, formatStr, String(date));\n      }\n\n      const formatter = formatters[token[0]];\n      return formatter(originalDate, token, locale.localize, formatterOptions);\n    })\n    .join(\"\");\n}\n\nfunction cleanEscapedString(input) {\n  const matched = input.match(escapedStringRegExp);\n\n  if (!matched) {\n    return input;\n  }\n\n  return matched[1].replace(doubleQuoteRegExp, \"'\");\n}\n\n// Fallback for modularized imports:\nexport default format;\n","import React, { useMemo } from 'react';\r\nimport { format } from 'date-fns';\r\nimport { Receipt } from '../../types';\r\nimport Modal from '../../shared/components/Modal';\r\n\r\ninterface ModalReceiptItem {\r\n  name: string;\r\n  idNumber?: string;\r\n  requiresReporting?: boolean;\r\n  note?: string;\r\n  // Add location info if available in the future\r\n}\r\n\r\ninterface MergedModalReceiptItem {\r\n  name: string;\r\n  idNumber?: string;\r\n  requiresReporting?: boolean;\r\n  note?: string;\r\n  quantity: number;\r\n  originalItems: ModalReceiptItem[];\r\n}\r\n\r\ninterface ReceiptDetailsModalProps {\r\n  receipt: Receipt | null;\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  isAdmin?: boolean;\r\n  onUpdate?: () => void;\r\n  onDelete?: () => void;\r\n  onDownload?: () => Promise<void>;\r\n  downloadingReceiptId?: string | null;\r\n  onSign?: () => void;\r\n  currentUserId?: string;\r\n  isPendingReceipt?: boolean;\r\n}\r\n\r\n// Function to merge items with identical attributes for display\r\nconst mergeModalReceiptItems = (items: ModalReceiptItem[]): MergedModalReceiptItem[] => {\r\n  const mergedMap = new Map<string, MergedModalReceiptItem>();\r\n\r\n  items.forEach(item => {\r\n    // Create a unique key based on name, idNumber, requiresReporting, and note\r\n    const idNumber = item.idNumber || 'no-id';\r\n    const note = item.note || 'no-note';\r\n    const key = `${item.name}-${idNumber}-${item.requiresReporting}-${note}`;\r\n\r\n    if (mergedMap.has(key)) {\r\n      const existingItem = mergedMap.get(key)!;\r\n      existingItem.quantity += 1;\r\n      existingItem.originalItems.push(item);\r\n    } else {\r\n      mergedMap.set(key, {\r\n        name: item.name,\r\n        idNumber: item.idNumber,\r\n        requiresReporting: item.requiresReporting,\r\n        note: item.note,\r\n        quantity: 1,\r\n        originalItems: [item]\r\n      });\r\n    }\r\n  });\r\n\r\n  return Array.from(mergedMap.values());\r\n};\r\n\r\nconst ReceiptDetailsModal: React.FC<ReceiptDetailsModalProps> = ({\r\n  receipt,\r\n  isOpen,\r\n  onClose,\r\n  isAdmin = false,\r\n  onUpdate,\r\n  onDelete,\r\n  onDownload,\r\n  downloadingReceiptId,\r\n  onSign,\r\n  currentUserId,\r\n  isPendingReceipt = false\r\n}) => {\r\n  \r\n  // Helper function to check if current user can sign this receipt (for pending receipts)\r\n  const canUserSignReceipt = (receipt: Receipt) => {\r\n    if (!currentUserId || !isPendingReceipt) return false;\r\n    return receipt.signedById === currentUserId;\r\n  };\r\n  // Convert receipt items to modal format and merge identical ones\r\n  const modalItems: ModalReceiptItem[] = useMemo(() => {\r\n    if (!receipt?.receiptItems) return [];\r\n    \r\n    return receipt.receiptItems.map(receiptItem => ({\r\n      name: receiptItem.item?.itemName?.name || 'פריט לא ידוע',\r\n      idNumber: receiptItem.item?.idNumber || undefined,\r\n      requiresReporting: receiptItem.item?.requiresReporting || false,\r\n      note: receiptItem.item?.note || undefined\r\n    }));\r\n  }, [receipt?.receiptItems]);\r\n\r\n  const mergedItems = useMemo(() => mergeModalReceiptItems(modalItems), [modalItems]);\r\n\r\n  if (!receipt) return null;\r\n\r\n  const formatDate = (date: Date | string) => {\r\n    return format(new Date(date), 'dd/MM/yyyy HH:mm:ss');\r\n  };\r\n\r\n  const getUnit = (receipt: Receipt) => \r\n    receipt.signedBy?.location?.unit?.name || \r\n    receipt.createdBy?.location?.unit?.name || \r\n    '—';\r\n\r\n  return (\r\n    <Modal\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      title={`פרטי קבלה #${receipt.id}`}\r\n      size=\"lg\"\r\n    >\r\n      <div style={{ direction: 'rtl', padding: '16px', unicodeBidi: 'embed', textRendering: 'optimizeLegibility' }}>\r\n        {/* Receipt Summary */}\r\n        <div className=\"receipt-summary\" style={{\r\n          display: 'grid',\r\n          gridTemplateColumns: 'repeat(auto-fit, minmax(200px, 1fr))',\r\n          gap: '16px',\r\n          marginBottom: '24px',\r\n          padding: '16px',\r\n          background: 'rgba(255, 255, 255, 0.08)',\r\n          borderRadius: '12px',\r\n          border: '1px solid rgba(255, 255, 255, 0.15)',\r\n          backdropFilter: 'blur(10px)'\r\n        }}>\r\n          <div>\r\n            <label style={{ color: 'rgba(255, 255, 255, 0.6)', fontSize: '12px', direction: 'rtl', unicodeBidi: 'isolate' }}>מנפיק:</label>\r\n            <div style={{ fontWeight: 'bold', color: 'rgba(255, 255, 255, 0.9)', direction: 'rtl', unicodeBidi: 'isolate' }}>{receipt.createdBy?.name || 'משתמש לא ידוע'}</div>\r\n            <small style={{ color: 'rgba(255, 255, 255, 0.7)' }}>\r\n              {receipt.createdBy?.personalNumber && `מספר אישי: ${receipt.createdBy.personalNumber}`}\r\n            </small>\r\n          </div>\r\n          \r\n          <div>\r\n            <label style={{ color: 'rgba(255, 255, 255, 0.6)', fontSize: '12px' }}>מקבל:</label>\r\n            <div style={{ fontWeight: 'bold', color: 'rgba(255, 255, 255, 0.9)' }}>{receipt.signedBy?.name || 'משתמש לא ידוע'}</div>\r\n            <small style={{ color: 'rgba(255, 255, 255, 0.7)' }}>\r\n              {receipt.signedBy?.personalNumber && `מספר אישי: ${receipt.signedBy.personalNumber}`}\r\n            </small>\r\n          </div>\r\n          \r\n          <div>\r\n            <label style={{ color: 'rgba(255, 255, 255, 0.6)', fontSize: '12px' }}>יחידה:</label>\r\n            <div style={{ fontWeight: 'bold', color: 'rgba(255, 255, 255, 0.9)' }}>{getUnit(receipt)}</div>\r\n          </div>\r\n          \r\n          <div>\r\n            <label style={{ color: 'rgba(255, 255, 255, 0.6)', fontSize: '12px' }}>תאריך יצירה:</label>\r\n            <div style={{ fontWeight: 'bold', color: 'rgba(255, 255, 255, 0.9)' }}>{formatDate(receipt.createdAt)}</div>\r\n          </div>\r\n          \r\n          <div>\r\n            <label style={{ color: 'rgba(255, 255, 255, 0.6)', fontSize: '12px' }}>תאריך עדכון:</label>\r\n            <div style={{ fontWeight: 'bold', color: 'rgba(255, 255, 255, 0.9)' }}>{formatDate(receipt.updatedAt)}</div>\r\n          </div>\r\n          \r\n          <div>\r\n            <label style={{ color: 'rgba(255, 255, 255, 0.6)', fontSize: '12px' }}>סטטוס:</label>\r\n            <div>\r\n              <span style={{\r\n                background: receipt.isSigned \r\n                  ? 'linear-gradient(135deg, #4caf50, #388e3c)' \r\n                  : 'linear-gradient(135deg, #ffc107, #ffb300)',\r\n                color: receipt.isSigned ? 'white' : 'black',\r\n                padding: '4px 12px',\r\n                borderRadius: '20px',\r\n                fontSize: '12px',\r\n                fontWeight: '600'\r\n              }}>\r\n                {receipt.isSigned ? 'חתום' : 'ממתין לחתימה'}\r\n              </span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Items Table */}\r\n        <div className=\"receipt-items\" style={{\r\n          background: 'rgba(255, 255, 255, 0.08)',\r\n          border: '1px solid rgba(255, 255, 255, 0.15)',\r\n          borderRadius: '12px',\r\n          overflow: 'hidden',\r\n          backdropFilter: 'blur(10px)'\r\n        }}>\r\n          <div className=\"items-header\" style={{\r\n            padding: '12px 16px',\r\n            borderBottom: '1px solid rgba(255, 255, 255, 0.1)',\r\n            background: 'rgba(255, 255, 255, 0.05)',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'space-between'\r\n          }}>\r\n            <h6 style={{ margin: 0, fontWeight: 'bold', color: 'rgba(255, 255, 255, 0.9)' }}>\r\n              <i className=\"fas fa-list me-2\" style={{ color: '#64b5f6' }}></i>\r\n              פריטים בקבלה\r\n            </h6>\r\n            <span style={{\r\n              background: 'linear-gradient(135deg, #64b5f6, #42a5f5)',\r\n              color: 'white',\r\n              padding: '4px 12px',\r\n              borderRadius: '20px',\r\n              fontSize: '12px',\r\n              fontWeight: '600'\r\n            }}>\r\n              {mergedItems.length} סוגים, {modalItems.length} פריטים\r\n            </span>\r\n          </div>\r\n\r\n          <div className=\"items-table-container\" style={{ \r\n            maxHeight: '400px', \r\n            overflowY: 'auto' \r\n          }}>\r\n            {modalItems.length === 0 ? (\r\n              <div style={{ \r\n                textAlign: 'center', \r\n                padding: '32px 16px', \r\n                color: 'rgba(255, 255, 255, 0.6)' \r\n              }}>\r\n                <i className=\"fas fa-inbox fa-2x mb-2\" style={{ color: 'rgba(255, 255, 255, 0.4)' }}></i>\r\n                <div>לא נמצאו פריטים בקבלה זו</div>\r\n              </div>\r\n            ) : (\r\n              <table className=\"table mb-0\" style={{ backgroundColor: 'transparent' }}>\r\n                <thead style={{ background: 'rgba(255, 255, 255, 0.05)', position: 'sticky', top: 0 }}>\r\n                  <tr>\r\n                    <th style={{ \r\n                      width: '50px', \r\n                      textAlign: 'center', \r\n                      color: 'rgba(255, 255, 255, 0.8)',\r\n                      fontWeight: '600',\r\n                      borderBottom: '1px solid rgba(255, 255, 255, 0.1)'\r\n                    }}>#</th>\r\n                    <th style={{ \r\n                      color: 'rgba(255, 255, 255, 0.8)',\r\n                      fontWeight: '600',\r\n                      borderBottom: '1px solid rgba(255, 255, 255, 0.1)'\r\n                    }}>שם הפריט</th>\r\n                    <th style={{ \r\n                      width: '130px', \r\n                      color: 'rgba(255, 255, 255, 0.8)',\r\n                      fontWeight: '600',\r\n                      borderBottom: '1px solid rgba(255, 255, 255, 0.1)'\r\n                    }}>מספר צ'</th>\r\n                    <th style={{ \r\n                      width: '80px', \r\n                      textAlign: 'center', \r\n                      color: 'rgba(255, 255, 255, 0.8)',\r\n                      fontWeight: '600',\r\n                      borderBottom: '1px solid rgba(255, 255, 255, 0.1)'\r\n                    }}>צופן</th>\r\n                    <th style={{ \r\n                      width: '80px', \r\n                      textAlign: 'center', \r\n                      color: 'rgba(255, 255, 255, 0.8)',\r\n                      fontWeight: '600',\r\n                      borderBottom: '1px solid rgba(255, 255, 255, 0.1)'\r\n                    }}>כמות</th>\r\n                    <th style={{ \r\n                      color: 'rgba(255, 255, 255, 0.8)',\r\n                      fontWeight: '600',\r\n                      borderBottom: '1px solid rgba(255, 255, 255, 0.1)'\r\n                    }}>הערות</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  {mergedItems.map((mergedItem, index) => (\r\n                    <tr key={`${mergedItem.name}-${mergedItem.idNumber || 'no-id'}-${index}`} style={{ borderBottom: '1px solid rgba(255, 255, 255, 0.1)' }}>\r\n                      <td style={{ textAlign: 'center', color: 'rgba(255, 255, 255, 0.6)' }}>\r\n                        {index + 1}\r\n                      </td>\r\n                      <td style={{ fontWeight: '600', color: 'rgba(255, 255, 255, 0.9)' }}>\r\n                        <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>\r\n                          {mergedItem.name}\r\n                          {mergedItem.requiresReporting && (\r\n                            <span style={{ marginLeft: '8px' }}>\r\n                              <i \r\n                                className=\"fas fa-shield-alt\" \r\n                                style={{ \r\n                                  color: '#ef4444',\r\n                                  fontSize: '14px'\r\n                                }} \r\n                                title=\"פריט צופן\"\r\n                              ></i>\r\n                            </span>\r\n                          )}\r\n                        </div>\r\n                      </td>\r\n                      <td style={{ \r\n                        fontFamily: 'monospace', \r\n                        fontSize: '14px',\r\n                        color: mergedItem.idNumber ? 'rgba(255, 255, 255, 0.8)' : 'rgba(255, 255, 255, 0.5)'\r\n                      }}>\r\n                        {mergedItem.idNumber ? (\r\n                          <span style={{\r\n                            background: 'rgba(34, 197, 94, 0.2)',\r\n                            color: '#22c55e',\r\n                            padding: '4px 8px',\r\n                            borderRadius: '6px',\r\n                            fontSize: '12px',\r\n                            fontWeight: '600'\r\n                          }}>\r\n                            {mergedItem.idNumber}\r\n                          </span>\r\n                        ) : (\r\n                          <span>—</span>\r\n                        )}\r\n                      </td>\r\n                      <td style={{ textAlign: 'center' }}>\r\n                        <span style={{\r\n                          background: mergedItem.requiresReporting \r\n                            ? 'linear-gradient(135deg, #ffc107, #ffb300)' \r\n                            : 'linear-gradient(135deg, #4caf50, #388e3c)',\r\n                          color: mergedItem.requiresReporting ? 'black' : 'white',\r\n                          padding: '4px 8px',\r\n                          borderRadius: '12px',\r\n                          fontSize: '12px',\r\n                          fontWeight: '600'\r\n                        }}>\r\n                          {mergedItem.requiresReporting ? 'כן' : 'לא'}\r\n                        </span>\r\n                      </td>\r\n                      <td style={{ textAlign: 'center' }}>\r\n                        <span style={{\r\n                          background: 'rgba(59, 130, 246, 0.2)',\r\n                          color: '#3b82f6',\r\n                          padding: '6px 12px',\r\n                          borderRadius: '8px',\r\n                          fontSize: '14px',\r\n                          fontWeight: '600'\r\n                        }}>\r\n                          {mergedItem.quantity}\r\n                        </span>\r\n                      </td>\r\n                      <td style={{ \r\n                        color: mergedItem.note ? 'rgba(255, 255, 255, 0.8)' : 'rgba(255, 255, 255, 0.5)',\r\n                        fontSize: '14px' \r\n                      }}>\r\n                        {mergedItem.note || '—'}\r\n                      </td>\r\n                    </tr>\r\n                  ))}\r\n                </tbody>\r\n              </table>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Signature Section */}\r\n        {receipt.isSigned && receipt.signature && (\r\n          <div className=\"receipt-signature mt-4\" style={{\r\n            padding: '16px',\r\n            background: 'rgba(255, 255, 255, 0.08)',\r\n            borderRadius: '12px',\r\n            border: '1px solid rgba(255, 255, 255, 0.15)',\r\n            backdropFilter: 'blur(10px)'\r\n          }}>\r\n            <h6 style={{ marginBottom: '12px', color: 'rgba(255, 255, 255, 0.9)' }}>\r\n              <i className=\"fas fa-signature me-2\" style={{ color: '#64b5f6' }}></i>\r\n              חתימה דיגיטלית:\r\n            </h6>\r\n            <div style={{\r\n              background: 'rgba(255, 255, 255, 0.05)',\r\n              border: '1px solid rgba(255, 255, 255, 0.2)',\r\n              borderRadius: '8px',\r\n              padding: '12px',\r\n              maxHeight: '150px',\r\n              overflow: 'hidden'\r\n            }}>\r\n              <img \r\n                src={receipt.signature} \r\n                alt=\"חתימה דיגיטלית\"\r\n                style={{\r\n                  maxWidth: '100%',\r\n                  maxHeight: '120px',\r\n                  objectFit: 'contain'\r\n                }}\r\n              />\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Actions */}\r\n        <div className=\"modal-actions mt-4\" style={{\r\n          display: 'flex',\r\n          justifyContent: 'space-between',\r\n          alignItems: 'center',\r\n          gap: '12px',\r\n          paddingTop: '16px',\r\n          borderTop: '1px solid rgba(255, 255, 255, 0.1)'\r\n        }}>\r\n          {/* Left side - Receipt actions */}\r\n          <div style={{ display: 'flex', gap: '8px' }}>\r\n            {/* Admin actions for both signed and pending receipts */}\r\n            {isAdmin && onUpdate && (\r\n              <button \r\n                type=\"button\" \r\n                className=\"btn btn-primary\"\r\n                onClick={() => {\r\n                  onUpdate();\r\n                  onClose();\r\n                }}\r\n                style={{\r\n                  background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\r\n                  border: 'none',\r\n                  color: 'white',\r\n                  display: 'flex',\r\n                  alignItems: 'center',\r\n                  gap: '6px',\r\n                  padding: '8px 16px',\r\n                  borderRadius: '6px'\r\n                }}\r\n              >\r\n                <i className=\"fas fa-edit\"></i>\r\n                עדכן קבלה\r\n              </button>\r\n            )}\r\n            \r\n            {isAdmin && onDelete && (\r\n              <button \r\n                type=\"button\" \r\n                className=\"btn btn-danger\"\r\n                onClick={() => {\r\n                  onDelete();\r\n                  onClose();\r\n                }}\r\n                style={{\r\n                  background: 'linear-gradient(135deg, #f093fb 0%, #f5576c 100%)',\r\n                  border: 'none',\r\n                  color: 'white',\r\n                  display: 'flex',\r\n                  alignItems: 'center',\r\n                  gap: '6px',\r\n                  padding: '8px 16px',\r\n                  borderRadius: '6px'\r\n                }}\r\n              >\r\n                <i className=\"fas fa-trash\"></i>\r\n                מחק קבלה\r\n              </button>\r\n            )}\r\n\r\n            {/* Sign action for pending receipts */}\r\n            {isPendingReceipt && onSign && receipt && canUserSignReceipt(receipt) && (\r\n              <button \r\n                type=\"button\" \r\n                className=\"btn btn-success\"\r\n                onClick={() => {\r\n                  onSign();\r\n                  onClose();\r\n                }}\r\n                style={{\r\n                  background: 'linear-gradient(135deg, #4ade80 0%, #22c55e 100%)',\r\n                  border: 'none',\r\n                  color: 'white',\r\n                  display: 'flex',\r\n                  alignItems: 'center',\r\n                  gap: '6px',\r\n                  padding: '8px 16px',\r\n                  borderRadius: '6px'\r\n                }}\r\n              >\r\n                <i className=\"fas fa-signature\"></i>\r\n                חתום וקבל\r\n              </button>\r\n            )}\r\n\r\n            {/* Download action for signed receipts only */}\r\n            {!isPendingReceipt && onDownload && (\r\n              <button \r\n                type=\"button\" \r\n                className=\"btn btn-info\"\r\n                onClick={async () => {\r\n                  await onDownload();\r\n                }}\r\n                disabled={downloadingReceiptId === receipt?.id}\r\n                style={{\r\n                  background: downloadingReceiptId === receipt?.id \r\n                    ? 'rgba(255, 255, 255, 0.1)' \r\n                    : 'linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)',\r\n                  border: 'none',\r\n                  color: 'white',\r\n                  display: 'flex',\r\n                  alignItems: 'center',\r\n                  gap: '6px',\r\n                  padding: '8px 16px',\r\n                  borderRadius: '6px',\r\n                  opacity: downloadingReceiptId === receipt?.id ? 0.7 : 1\r\n                }}\r\n              >\r\n                {downloadingReceiptId === receipt?.id ? (\r\n                  <>\r\n                    <i className=\"fas fa-spinner fa-spin\"></i>\r\n                    מוריד...\r\n                  </>\r\n                ) : (\r\n                  <>\r\n                    <i className=\"fas fa-download\"></i>\r\n                    הורד PDF\r\n                  </>\r\n                )}\r\n              </button>\r\n            )}\r\n          </div>\r\n\r\n          {/* Right side - Close button */}\r\n          <button \r\n            type=\"button\" \r\n            className=\"btn btn-secondary\"\r\n            onClick={onClose}\r\n            style={{\r\n              background: 'rgba(255, 255, 255, 0.1)',\r\n              border: '1px solid rgba(255, 255, 255, 0.2)',\r\n              color: 'rgba(255, 255, 255, 0.9)',\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              gap: '6px',\r\n              padding: '8px 16px',\r\n              borderRadius: '6px'\r\n            }}\r\n          >\r\n            <i className=\"fas fa-times\"></i>\r\n            סגור\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default ReceiptDetailsModal;\r\n","import React, { useState } from 'react';\r\nimport Modal from '../../shared/components/Modal';\r\n\r\ninterface DeleteReceiptModalProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  onConfirm: () => void;\r\n  receiptId: string;\r\n  isLoading?: boolean;\r\n}\r\n\r\nconst DeleteReceiptModal: React.FC<DeleteReceiptModalProps> = ({\r\n  isOpen,\r\n  onClose,\r\n  onConfirm,\r\n  receiptId,\r\n  isLoading = false\r\n}) => {\r\n  const [confirmationText, setConfirmationText] = useState('');\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  const handleSubmit = (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    \r\n    if (confirmationText.trim() !== 'מחק') {\r\n      setError('יש להקליד \"מחק\" בדיוק כדי לאשר המחיקה');\r\n      return;\r\n    }\r\n\r\n    setError(null);\r\n    onConfirm();\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setConfirmationText('');\r\n    setError(null);\r\n    onClose();\r\n  };\r\n\r\n  return (\r\n    <Modal isOpen={isOpen} onClose={handleClose} title=\"מחיקת קבלה\" size=\"md\">\r\n      <div style={{ direction: 'rtl', padding: '20px' }}>\r\n        <div className=\"alert alert-danger\" style={{ marginBottom: '20px' }}>\r\n          <i className=\"fas fa-exclamation-triangle me-2\"></i>\r\n          <strong>אזהרה:</strong> פעולה זו תמחק את הקבלה לצמיתות ולא ניתן יהיה לשחזר אותה.\r\n        </div>\r\n\r\n        <div style={{ marginBottom: '20px' }}>\r\n          <p><strong>מזהה קבלה:</strong> {receiptId}</p>\r\n          <p>האם את/ה בטוח/ה שברצונך למחוק קבלה זו?</p>\r\n        </div>\r\n\r\n        <form onSubmit={handleSubmit}>\r\n          <div className=\"form-group\" style={{ marginBottom: '20px' }}>\r\n            <label className=\"form-label required\">\r\n              אנא הקלד/י <strong>\"מחק\"</strong> כדי לאשר המחיקה:\r\n            </label>\r\n            <input\r\n              type=\"text\"\r\n              className={`form-control ${error ? 'is-invalid' : ''}`}\r\n              value={confirmationText}\r\n              onChange={(e) => {\r\n                setConfirmationText(e.target.value);\r\n                if (error) setError(null);\r\n              }}\r\n              placeholder=\"הקלד מחק\"\r\n              required\r\n              disabled={isLoading}\r\n              autoFocus\r\n            />\r\n            {error && (\r\n              <div className=\"invalid-feedback\" style={{ display: 'block' }}>\r\n                {error}\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          <div style={{ display: 'flex', justifyContent: 'flex-end', gap: '12px' }}>\r\n            <button\r\n              type=\"button\"\r\n              className=\"btn btn-secondary\"\r\n              onClick={handleClose}\r\n              disabled={isLoading}\r\n            >\r\n              ביטול\r\n            </button>\r\n            <button\r\n              type=\"submit\"\r\n              className=\"btn btn-danger\"\r\n              disabled={isLoading || confirmationText.trim() !== 'מחק'}\r\n            >\r\n              {isLoading ? (\r\n                <>\r\n                  <i className=\"fas fa-spinner fa-spin me-2\"></i>\r\n                  מוחק...\r\n                </>\r\n              ) : (\r\n                <>\r\n                  <i className=\"fas fa-trash me-2\"></i>\r\n                  מחק קבלה\r\n                </>\r\n              )}\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default DeleteReceiptModal;\r\n","import React, { useState, useMemo } from 'react';\r\nimport { Receipt, SignPendingReceiptRequest } from '../../types';\r\nimport { SignaturePad } from './SignaturePad';\r\nimport { Modal, SmartPagination, NotificationModal, SearchInput } from '../../shared/components';\r\nimport ReceiptForm from './ReceiptForm';\r\nimport ReceiptDetailsModal from './ReceiptDetailsModal';\r\nimport DeleteReceiptModal from './DeleteReceiptModal';\r\nimport { paginate, formatDateTimeHebrew, getReceiptUnit, getReceiptLocation, receiptItemsMatchSearch, compareReceiptValues } from '../../utils';\r\nimport { UI_CONFIG } from '../../config/app.config';\r\nimport type { NotificationType } from '../../shared/components/NotificationModal';\r\nimport { usePendingReceiptsContext } from '../../contexts';\r\nimport './ReceiptsTab.css';\r\n\r\ninterface PendingReceiptsListProps {\r\n  pendingReceipts: Receipt[];\r\n  onRefresh: () => void;\r\n  isAdmin: boolean;\r\n  currentUserId?: string;\r\n  signPendingReceipt: (receiptId: string, data: SignPendingReceiptRequest) => Promise<any>;\r\n  deleteReceipt: (id: string) => Promise<any>;\r\n}\r\n\r\nconst PendingReceiptsList: React.FC<PendingReceiptsListProps> = ({\r\n  pendingReceipts,\r\n  onRefresh,\r\n  isAdmin,\r\n  currentUserId,\r\n  signPendingReceipt,\r\n  deleteReceipt,\r\n}) => {\r\n  // Get context for immediate count updates\r\n  const { decrementPendingCount, refreshPendingCount } = usePendingReceiptsContext();\r\n  \r\n  const [selectedReceipt, setSelectedReceipt] = useState<Receipt | null>(null);\r\n  const [isSignModalOpen, setIsSignModalOpen] = useState(false);\r\n  const [isUpdateModalOpen, setIsUpdateModalOpen] = useState(false);\r\n  const [isDeleteModalOpen, setIsDeleteModalOpen] = useState(false);\r\n  const [signature, setSignature] = useState<string>('');\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  const [isDeleting, setIsDeleting] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n  \r\n  // Pagination state\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n\r\n  // New: search and sort state\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [sortConfig, setSortConfig] = useState<{ key: string; direction: 'asc' | 'desc' } | null>(null);\r\n  // New: details modal state\r\n  const [detailsReceipt, setDetailsReceipt] = useState<Receipt | null>(null);\r\n\r\n  const [notification, setNotification] = useState<{\r\n    isOpen: boolean;\r\n    type: NotificationType;\r\n    message: string;\r\n    title?: string;\r\n  }>({\r\n    isOpen: false,\r\n    type: 'info',\r\n    message: ''\r\n  });\r\n\r\n  const showNotification = (type: NotificationType, message: string, title?: string) => {\r\n    setNotification({\r\n      isOpen: true,\r\n      type,\r\n      message,\r\n      title\r\n    });\r\n  };\r\n\r\n  const closeNotification = () => {\r\n    setNotification(prev => ({ ...prev, isOpen: false }));\r\n  };\r\n\r\n\r\n\r\n  // Helper: check if current user can sign this receipt\r\n  const canUserSignReceipt = (receipt: Receipt) => {\r\n    if (!currentUserId) return false; // No user ID provided\r\n    return receipt.signedById === currentUserId; // Only if user is the designated receiver (applies to both admin and non-admin)\r\n  };\r\n\r\n  // Search and sort logic\r\n  const handleSort = (key: string) => {\r\n    let direction: 'asc' | 'desc' = 'asc';\r\n    if (sortConfig && sortConfig.key === key && sortConfig.direction === 'asc') {\r\n      direction = 'desc';\r\n    }\r\n    setSortConfig({ key, direction });\r\n  };\r\n\r\n  // New: search + sort + paginate\r\n  const filteredAndSorted = useMemo(() => {\r\n    const term = searchTerm.toLowerCase().normalize('NFC');\r\n\r\n    let filtered = pendingReceipts.filter((r) => {\r\n      const issuer = (r.createdBy?.name?.toLowerCase() || '').normalize('NFC');\r\n      const receiver = (r.signedBy?.name?.toLowerCase() || '').normalize('NFC');\r\n      const unit = getReceiptUnit(r).toLowerCase().normalize('NFC');\r\n      const location = getReceiptLocation(r).toLowerCase().normalize('NFC');\r\n      const count = (r.receiptItems?.length || 0).toString();\r\n      const date = formatDateTimeHebrew(r.createdAt);\r\n      const note = (r.note?.toLowerCase() || '').normalize('NFC');\r\n\r\n      // Check if any items match the search term\r\n      const itemsMatch = receiptItemsMatchSearch(r, term);\r\n\r\n      return (\r\n        issuer.includes(term) ||\r\n        receiver.includes(term) ||\r\n        unit.includes(term) ||\r\n        location.includes(term) ||\r\n        count.includes(term) ||\r\n        date.includes(term) ||\r\n        note.includes(term) ||\r\n        itemsMatch\r\n      );\r\n    });\r\n\r\n    if (sortConfig) {\r\n      const { key, direction } = sortConfig;\r\n      filtered = [...filtered].sort((a, b) => {\r\n        let aVal: any, bVal: any;\r\n        switch (key) {\r\n          case 'createdBy':\r\n            aVal = a.createdBy?.name || '';\r\n            bVal = b.createdBy?.name || '';\r\n            break;\r\n          case 'signedBy':\r\n            aVal = a.signedBy?.name || '';\r\n            bVal = b.signedBy?.name || '';\r\n            break;\r\n          case 'unit':\r\n            aVal = getReceiptUnit(a) || '';\r\n            bVal = getReceiptUnit(b) || '';\r\n            break;\r\n          case 'location':\r\n            aVal = getReceiptLocation(a) || '';\r\n            bVal = getReceiptLocation(b) || '';\r\n            break;\r\n          case 'itemCount':\r\n            aVal = a.receiptItems?.length || 0;\r\n            bVal = b.receiptItems?.length || 0;\r\n            break;\r\n          case 'createdAt':\r\n            aVal = new Date(a.createdAt).getTime();\r\n            bVal = new Date(b.createdAt).getTime();\r\n            break;\r\n          case 'note':\r\n            aVal = a.note || '';\r\n            bVal = b.note || '';\r\n            break;\r\n          default:\r\n            return 0;\r\n        }\r\n\r\n        return compareReceiptValues(aVal, bVal, direction);\r\n      });\r\n    }\r\n\r\n    return filtered;\r\n  }, [pendingReceipts, searchTerm, sortConfig]);\r\n\r\n  // Apply pagination after filtering & sorting\r\n  const { paginatedItems: paginatedReceipts, totalPages } = paginate(filteredAndSorted, currentPage, UI_CONFIG.TABLE_PAGE_SIZE);\r\n\r\n  const handleSearchChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    setSearchTerm(e.target.value);\r\n    setCurrentPage(1);\r\n  };\r\n\r\n  const handleDeleteClick = (receipt: Receipt) => {\r\n    setSelectedReceipt(receipt);\r\n    setIsDeleteModalOpen(true);\r\n  };\r\n\r\n  const handleConfirmDelete = async () => {\r\n    if (!selectedReceipt) return;\r\n\r\n    setIsDeleting(true);\r\n    try {\r\n      const success = await deleteReceipt(selectedReceipt.id);\r\n      if (success) {\r\n        // Immediately update the header count for responsive UI with specific receipt ID\r\n        decrementPendingCount(selectedReceipt.id);\r\n        \r\n        handleCloseModal();\r\n        onRefresh();\r\n        showNotification('success', 'הקבלה נמחקה בהצלחה');\r\n        \r\n        // Also refresh the global count to ensure accuracy\r\n        await refreshPendingCount();\r\n      }\r\n    } catch (error) {\r\n      showNotification('error', 'שגיאה במחיקת הקבלה');\r\n    } finally {\r\n      setIsDeleting(false);\r\n    }\r\n  };\r\n\r\n  const handleSignClick = (receipt: Receipt) => {\r\n    // Security check - only allow if user is the designated receiver\r\n    if (!canUserSignReceipt(receipt)) {\r\n      showNotification('error', 'אין לך הרשאה לחתום על קבלה זו. הקבלה מיועדת למשתמש אחר.');\r\n      return;\r\n    }\r\n    \r\n    setSelectedReceipt(receipt);\r\n    setIsSignModalOpen(true);\r\n    setSignature('');\r\n    setError(null);\r\n  };\r\n\r\n  const handleUpdateClick = (receipt: Receipt) => {\r\n    setSelectedReceipt(receipt);\r\n    setIsUpdateModalOpen(true);\r\n  };\r\n\r\n  const handleUpdateSuccess = () => {\r\n    handleCloseModal();\r\n    onRefresh(); // Refresh the pending receipts list\r\n  };\r\n\r\n  const handleSignSubmit = async () => {\r\n    if (!selectedReceipt || !signature) {\r\n      setError('נדרשת חתימה');\r\n      return;\r\n    }\r\n\r\n    setIsSubmitting(true);\r\n    setError(null);\r\n\r\n    try {\r\n      const success = await signPendingReceipt(selectedReceipt.id, { signature });\r\n      if (success) {\r\n        // Immediately update the header count for responsive UI with specific receipt ID\r\n        decrementPendingCount(selectedReceipt.id);\r\n        \r\n        setIsSignModalOpen(false);\r\n        setSelectedReceipt(null);\r\n        setSignature('');\r\n        onRefresh();\r\n        \r\n        // Also refresh the global count to ensure accuracy\r\n        await refreshPendingCount();\r\n      }\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : 'Failed to sign receipt');\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  const handleCloseModal = () => {\r\n    setIsSignModalOpen(false);\r\n    setIsUpdateModalOpen(false);\r\n    setIsDeleteModalOpen(false);\r\n    setSelectedReceipt(null);\r\n    setSignature('');\r\n    setError(null);\r\n  };\r\n\r\n  if (pendingReceipts.length === 0) {\r\n    return (\r\n      <div className=\"empty-state\">\r\n        <i className=\"fas fa-clock\"></i>\r\n        <h4>אין קבלות ממתינות</h4>\r\n        <p>כל הקבלות נחתמו או שאין קבלות ממתינות להצגה</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <div className=\"pending-receipts-list\" style={{ direction: 'rtl' }}>\r\n        {/* Compact Header with Actions */}\r\n        <div className=\"management-header-compact\">\r\n          <div className=\"management-search-section\">\r\n            <SearchInput\r\n              value={searchTerm}\r\n              onChange={(value) => handleSearchChange({ target: { value } } as React.ChangeEvent<HTMLInputElement>)}\r\n              placeholder=\"חפש לפי מנפיק, מקבל, יחידה, מיקום, הערה, פריטים או תאריך...\"\r\n              resultsCount={filteredAndSorted.length}\r\n              resultsLabel=\"קבלות\"\r\n            />\r\n          </div>\r\n        </div>\r\n        \r\n        <div className=\"unified-table-container\">\r\n          <table className=\"unified-table\">\r\n            <thead>\r\n              <tr>\r\n                <th className=\"unified-table-header unified-table-header-regular sortable\" onClick={() => handleSort('createdBy')} data-sorted={sortConfig?.key === 'createdBy'}>\r\n                  <div className=\"d-flex align-items-center\">\r\n                    <span>מנפיק</span>\r\n                  </div>\r\n                </th>\r\n                <th className=\"unified-table-header unified-table-header-regular sortable\" onClick={() => handleSort('signedBy')} data-sorted={sortConfig?.key === 'signedBy'}>\r\n                  <div className=\"d-flex align-items-center\">\r\n                    <span>מקבל</span>\r\n                  </div>\r\n                </th>\r\n                <th className=\"unified-table-header unified-table-header-regular sortable\" onClick={() => handleSort('unit')} data-sorted={sortConfig?.key === 'unit'}>\r\n                  <div className=\"d-flex align-items-center\">\r\n                    <span>יחידה</span>\r\n                  </div>\r\n                </th>\r\n                <th className=\"unified-table-header unified-table-header-regular sortable\" onClick={() => handleSort('location')} data-sorted={sortConfig?.key === 'location'}>\r\n                  <div className=\"d-flex align-items-center\">\r\n                    <span>מיקום</span>\r\n                  </div>\r\n                </th>\r\n                <th className=\"unified-table-header unified-table-header-regular sortable\" onClick={() => handleSort('itemCount')} data-sorted={sortConfig?.key === 'itemCount'}>\r\n                  <div className=\"d-flex align-items-center\">\r\n                    <span>כמות פריטים</span>\r\n                  </div>\r\n                </th>\r\n                <th className=\"unified-table-header unified-table-header-regular sortable\" onClick={() => handleSort('createdAt')} data-sorted={sortConfig?.key === 'createdAt'}>\r\n                  <div className=\"d-flex align-items-center\">\r\n                    <span>תאריך יצירה</span>\r\n                  </div>\r\n                </th>\r\n                <th className=\"unified-table-header unified-table-header-regular sortable\" onClick={() => handleSort('note')} data-sorted={sortConfig?.key === 'note'}>\r\n                  <div className=\"d-flex align-items-center\">\r\n                    <span>הערה</span>\r\n                  </div>\r\n                </th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {paginatedReceipts.map((receipt, index) => {\r\n                const canSign = canUserSignReceipt(receipt);\r\n                \r\n                // All users now open details modal - actions will be inside the modal\r\n                const handleRowClick = () => {\r\n                  setDetailsReceipt(receipt);\r\n                };\r\n\r\n                const getRowTitle = () => {\r\n                  return \"לחץ לפרטים ופעולות\";\r\n                };\r\n\r\n                return (\r\n                  <tr \r\n                    key={receipt.id} \r\n                    className=\"unified-table-row\"\r\n                    onClick={handleRowClick} \r\n                    style={{ \r\n                      cursor: 'pointer',\r\n                      opacity: !isAdmin && !canSign ? 0.6 : 1\r\n                    }}\r\n                    title={getRowTitle()}\r\n                  >\r\n                    <td className=\"unified-table-cell\">{receipt.createdBy?.name || 'משתמש לא ידוע'}</td>\r\n                    <td className=\"unified-table-cell\">\r\n                      <div className=\"d-flex align-items-center\">\r\n                        <span>\r\n                          {receipt.signedBy?.name || 'משתמש לא ידוע'}\r\n                        </span>\r\n                      </div>\r\n                    </td>\r\n                    <td className=\"unified-table-cell\">{getReceiptUnit(receipt)}</td>\r\n                    <td className=\"unified-table-cell\">{getReceiptLocation(receipt)}</td>\r\n                    <td className=\"unified-table-cell\">{receipt.receiptItems?.length || 0}</td>\r\n                    <td className=\"unified-table-cell\">\r\n                      {formatDateTimeHebrew(receipt.createdAt)}\r\n                    </td>\r\n                    <td className=\"unified-table-cell\">\r\n                      {receipt.note ? (\r\n                        <span title={receipt.note} style={{ \r\n                          maxWidth: '150px', \r\n                          overflow: 'hidden', \r\n                          textOverflow: 'ellipsis', \r\n                          whiteSpace: 'nowrap',\r\n                          display: 'inline-block'\r\n                        }}>\r\n                          {receipt.note}\r\n                        </span>\r\n                      ) : (\r\n                        <span className=\"receipt-note-placeholder\">—</span>\r\n                      )}\r\n                    </td>\r\n                  </tr>\r\n                );\r\n              })}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n\r\n        {totalPages > 1 && (\r\n          <SmartPagination currentPage={currentPage} totalPages={totalPages} onPageChange={setCurrentPage} />\r\n        )}\r\n      </div>\r\n\r\n      {/* Details Modal */}\r\n      <ReceiptDetailsModal\r\n        receipt={detailsReceipt}\r\n        isOpen={!!detailsReceipt}\r\n        onClose={() => setDetailsReceipt(null)}\r\n        isAdmin={isAdmin}\r\n        onUpdate={detailsReceipt && isAdmin ? () => handleUpdateClick(detailsReceipt) : undefined}\r\n        onDelete={detailsReceipt && isAdmin ? () => handleDeleteClick(detailsReceipt) : undefined}\r\n        onSign={detailsReceipt && canUserSignReceipt(detailsReceipt) ? () => handleSignClick(detailsReceipt) : undefined}\r\n        currentUserId={currentUserId}\r\n        isPendingReceipt={true}\r\n      />\r\n\r\n      {/* Sign Modal */}\r\n      <Modal\r\n        isOpen={isSignModalOpen}\r\n        onClose={handleCloseModal}\r\n        title={`חתימה על קבלה #${selectedReceipt?.id}`}\r\n        size=\"lg\"\r\n      >\r\n        <div className=\"receipts-modal\" style={{ direction: 'rtl', padding: '20px' }}>\r\n          {error && (\r\n            <div className=\"alert alert-danger\">\r\n              {error}\r\n            </div>\r\n          )}\r\n\r\n          <div style={{ marginBottom: '32px' }}>\r\n            <h5 style={{ \r\n              color: '#ffffff', \r\n              marginBottom: '20px', \r\n              fontSize: '20px', \r\n              fontWeight: '700',\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              gap: '10px',\r\n              textShadow: '0 2px 4px rgba(0, 0, 0, 0.3)'\r\n            }}>\r\n              <i className=\"fas fa-receipt\" style={{ color: '#64b5f6', fontSize: '22px' }}></i>\r\n              פרטי הקבלה לחתימה\r\n            </h5>\r\n            {selectedReceipt && (\r\n              <div className=\"receipt-summary-card\" style={{\r\n                border: '2px solid rgba(100, 181, 246, 0.3)',\r\n                borderRadius: '16px',\r\n                padding: '24px',\r\n                background: 'linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, rgba(255, 255, 255, 0.05) 100%)',\r\n                marginBottom: '24px',\r\n                backdropFilter: 'blur(15px)',\r\n                boxShadow: '0 8px 32px rgba(0, 0, 0, 0.2)'\r\n              }}>\r\n                {/* Receipt Header Info */}\r\n                <div style={{ \r\n                  display: 'grid', \r\n                  gridTemplateColumns: 'repeat(auto-fit, minmax(250px, 1fr))', \r\n                  gap: '20px',\r\n                  marginBottom: '24px'\r\n                }}>\r\n                  <div style={{\r\n                    background: 'linear-gradient(135deg, rgba(59, 130, 246, 0.15) 0%, rgba(59, 130, 246, 0.05) 100%)',\r\n                    padding: '16px',\r\n                    borderRadius: '12px',\r\n                    border: '1px solid rgba(59, 130, 246, 0.2)',\r\n                    textAlign: 'center'\r\n                  }}>\r\n                    <div style={{ color: 'rgba(255, 255, 255, 0.7)', fontSize: '14px', marginBottom: '4px' }}>\r\n                      <i className=\"fas fa-hashtag\" style={{ marginLeft: '6px' }}></i>\r\n                      מזהה קבלה\r\n                    </div>\r\n                    <div style={{ fontSize: '18px', fontWeight: 'bold', color: '#64b5f6' }}>\r\n                      #{selectedReceipt.id}\r\n                    </div>\r\n                  </div>\r\n                  \r\n                  <div style={{\r\n                    background: 'linear-gradient(135deg, rgba(34, 197, 94, 0.15) 0%, rgba(34, 197, 94, 0.05) 100%)',\r\n                    padding: '16px',\r\n                    borderRadius: '12px',\r\n                    border: '1px solid rgba(34, 197, 94, 0.2)',\r\n                    textAlign: 'center'\r\n                  }}>\r\n                    <div style={{ color: 'rgba(255, 255, 255, 0.7)', fontSize: '14px', marginBottom: '4px' }}>\r\n                      <i className=\"fas fa-boxes\" style={{ marginLeft: '6px' }}></i>\r\n                      סה\"כ פריטים\r\n                    </div>\r\n                    <div style={{ fontSize: '18px', fontWeight: 'bold', color: '#4ade80' }}>\r\n                      {selectedReceipt.receiptItems?.length || 0}\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div style={{\r\n                    background: 'linear-gradient(135deg, rgba(168, 85, 247, 0.15) 0%, rgba(168, 85, 247, 0.05) 100%)',\r\n                    padding: '16px',\r\n                    borderRadius: '12px',\r\n                    border: '1px solid rgba(168, 85, 247, 0.2)',\r\n                    textAlign: 'center'\r\n                  }}>\r\n                    <div style={{ color: 'rgba(255, 255, 255, 0.7)', fontSize: '14px', marginBottom: '4px' }}>\r\n                      <i className=\"fas fa-user\" style={{ marginLeft: '6px' }}></i>\r\n                      מנפיק\r\n                    </div>\r\n                    <div style={{ fontSize: '16px', fontWeight: 'bold', color: '#a855f7' }}>\r\n                      {selectedReceipt.createdBy?.name || 'משתמש לא ידוע'}\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div style={{\r\n                    background: 'linear-gradient(135deg, rgba(245, 101, 101, 0.15) 0%, rgba(245, 101, 101, 0.05) 100%)',\r\n                    padding: '16px',\r\n                    borderRadius: '12px',\r\n                    border: '1px solid rgba(245, 101, 101, 0.2)',\r\n                    textAlign: 'center'\r\n                  }}>\r\n                    <div style={{ color: 'rgba(255, 255, 255, 0.7)', fontSize: '14px', marginBottom: '4px' }}>\r\n                      <i className=\"fas fa-user-check\" style={{ marginLeft: '6px' }}></i>\r\n                      מקבל\r\n                    </div>\r\n                    <div style={{ fontSize: '16px', fontWeight: 'bold', color: '#f56565' }}>\r\n                      {selectedReceipt.signedBy?.name || 'משתמש לא ידוע'}\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div style={{\r\n                    background: 'linear-gradient(135deg, rgba(251, 191, 36, 0.15) 0%, rgba(251, 191, 36, 0.05) 100%)',\r\n                    padding: '16px',\r\n                    borderRadius: '12px',\r\n                    border: '1px solid rgba(251, 191, 36, 0.2)',\r\n                    textAlign: 'center'\r\n                  }}>\r\n                    <div style={{ color: 'rgba(255, 255, 255, 0.7)', fontSize: '14px', marginBottom: '4px' }}>\r\n                      <i className=\"fas fa-building\" style={{ marginLeft: '6px' }}></i>\r\n                      יחידה\r\n                    </div>\r\n                    <div style={{ fontSize: '16px', fontWeight: 'bold', color: '#fbbf24' }}>\r\n                      {getReceiptUnit(selectedReceipt)}\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div style={{\r\n                    background: 'linear-gradient(135deg, rgba(14, 165, 233, 0.15) 0%, rgba(14, 165, 233, 0.05) 100%)',\r\n                    padding: '16px',\r\n                    borderRadius: '12px',\r\n                    border: '1px solid rgba(14, 165, 233, 0.2)',\r\n                    textAlign: 'center'\r\n                  }}>\r\n                    <div style={{ color: 'rgba(255, 255, 255, 0.7)', fontSize: '14px', marginBottom: '4px' }}>\r\n                      <i className=\"fas fa-map-marker-alt\" style={{ marginLeft: '6px' }}></i>\r\n                      מיקום\r\n                    </div>\r\n                    <div style={{ fontSize: '16px', fontWeight: 'bold', color: '#0ea5e9' }}>\r\n                      {getReceiptLocation(selectedReceipt)}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Items List */}\r\n                <div>\r\n                  <div style={{ \r\n                    margin: '0 0 20px 0', \r\n                    fontWeight: '700', \r\n                    fontSize: '18px',\r\n                    color: '#ffffff',\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    gap: '10px',\r\n                    padding: '12px 16px',\r\n                    background: 'linear-gradient(135deg, rgba(100, 181, 246, 0.2) 0%, rgba(100, 181, 246, 0.1) 100%)',\r\n                    borderRadius: '12px',\r\n                    border: '1px solid rgba(100, 181, 246, 0.3)',\r\n                    textShadow: '0 1px 2px rgba(0, 0, 0, 0.3)'\r\n                  }}>\r\n                    <i className=\"fas fa-list-ul\" style={{ color: '#64b5f6', fontSize: '20px' }}></i>\r\n                    רשימת פריטים לקבלה\r\n                  </div>\r\n                  <div className=\"items-grid\" style={{ display: 'flex', flexDirection: 'column', gap: '12px' }}>\r\n                    {selectedReceipt.receiptItems && selectedReceipt.receiptItems.length > 0 ? \r\n                      // Group items by name for better display\r\n                      selectedReceipt.receiptItems\r\n                        .reduce((grouped: { name: string, items: any[], count: number, requiresReporting: boolean }[], receiptItem) => {\r\n                          const itemName = receiptItem.item?.itemName?.name || 'פריט לא ידוע';\r\n                          const requiresReporting = !!receiptItem.item?.requiresReporting;\r\n\r\n                          // For cipher items, always create separate entries\r\n                          if (requiresReporting) {\r\n                            grouped.push({\r\n                              name: itemName,\r\n                              items: [receiptItem],\r\n                              count: 1,\r\n                              requiresReporting: true\r\n                            });\r\n                          } else {\r\n                            // For non-cipher items, group by name\r\n                            const existing = grouped.find(g => g.name === itemName && !g.requiresReporting);\r\n                            if (existing) {\r\n                              existing.items.push(receiptItem);\r\n                              existing.count++;\r\n                            } else {\r\n                              grouped.push({\r\n                                name: itemName,\r\n                                items: [receiptItem],\r\n                                count: 1,\r\n                                requiresReporting: false\r\n                              });\r\n                            }\r\n                          }\r\n                          return grouped;\r\n                        }, [])\r\n                        .map((group, index) => (\r\n                          <div \r\n                            key={`${group.name}-${index}`}\r\n                            className=\"receipt-item-card\"\r\n                            style={{\r\n                              display: 'flex',\r\n                              justifyContent: 'space-between',\r\n                              alignItems: 'center',\r\n                              padding: '16px',\r\n                              background: 'rgba(255, 255, 255, 0.08)',\r\n                              border: '1px solid rgba(255, 255, 255, 0.15)',\r\n                              borderRadius: '12px',\r\n                              backdropFilter: 'blur(10px)'\r\n                            }}\r\n                          >\r\n                            <div style={{ flex: 1 }}>\r\n                              <div style={{ \r\n                                fontSize: '16px', \r\n                                fontWeight: 'bold', \r\n                                color: 'rgba(255, 255, 255, 0.9)',\r\n                                marginBottom: '8px'\r\n                              }}>\r\n                                <i className=\"fas fa-box me-2\" style={{ color: '#64b5f6' }}></i>\r\n                                {group.name}\r\n                                {group.count > 1 && (\r\n                                  <span \r\n                                    className=\"quantity-badge\"\r\n                                    style={{\r\n                                      background: 'linear-gradient(135deg, #4caf50, #388e3c)',\r\n                                      color: 'white',\r\n                                      padding: '4px 8px',\r\n                                      borderRadius: '12px',\r\n                                      fontSize: '12px',\r\n                                      fontWeight: 'bold',\r\n                                      marginRight: '8px'\r\n                                    }}\r\n                                  >\r\n                                    כמות: {group.count}\r\n                                  </span>\r\n                                )}\r\n                              </div>\r\n                              \r\n                              {/* Show ID numbers for cipher items or first item */}\r\n                              <div style={{ display: 'flex', flexDirection: 'column', gap: '4px' }}>\r\n                                {group.requiresReporting ? \r\n                                  // For cipher items, show each ID separately\r\n                                  group.items.map((item, itemIndex) => (\r\n                                    <div key={itemIndex} style={{ fontSize: '14px', color: 'rgba(255, 255, 255, 0.7)' }}>\r\n                                      {item.item?.idNumber && (\r\n                                        <span>\r\n                                          <i className=\"fas fa-hashtag me-1\"></i>\r\n                                          מספר צ': {item.item.idNumber}\r\n                                        </span>\r\n                                      )}\r\n                                    </div>\r\n                                  ))\r\n                                  :\r\n                                  // For non-cipher items, show just one example ID if available\r\n                                  group.items[0]?.item?.idNumber && (\r\n                                    <div style={{ fontSize: '14px', color: 'rgba(255, 255, 255, 0.7)' }}>\r\n                                      <i className=\"fas fa-hashtag me-1\"></i>\r\n                                      מספר צ': {group.items[0].item.idNumber}\r\n                                      {group.count > 1 && ' (ועוד)'}\r\n                                    </div>\r\n                                  )\r\n                                }\r\n                              </div>\r\n                            </div>\r\n                            \r\n                            <div style={{ textAlign: 'center' }}>\r\n                              <span \r\n                                className={`cipher-badge ${group.requiresReporting ? 'cipher-yes' : 'cipher-no'}`}\r\n                                style={{\r\n                                  padding: '6px 12px',\r\n                                  borderRadius: '20px',\r\n                                  fontSize: '12px',\r\n                                  fontWeight: 'bold',\r\n                                  background: group.requiresReporting \r\n                                    ? 'linear-gradient(135deg, #f44336, #d32f2f)' \r\n                                    : 'linear-gradient(135deg, #4caf50, #388e3c)',\r\n                                  color: 'white'\r\n                                }}\r\n                              >\r\n                                צופן: {group.requiresReporting ? 'כן' : 'לא'}\r\n                              </span>\r\n                            </div>\r\n                          </div>\r\n                        ))\r\n                    : (\r\n                      <div \r\n                        className=\"no-items-message\"\r\n                        style={{\r\n                          textAlign: 'center',\r\n                          padding: '40px 20px',\r\n                          background: 'rgba(245, 158, 11, 0.1)',\r\n                          border: '1px solid rgba(245, 158, 11, 0.3)',\r\n                          borderRadius: '12px',\r\n                          color: 'rgba(255, 255, 255, 0.8)'\r\n                        }}\r\n                      >\r\n                        <i className=\"fas fa-exclamation-triangle fa-2x mb-3\" style={{ color: '#f59e0b' }}></i>\r\n                        <div style={{ fontSize: '16px', fontWeight: 'bold' }}>\r\n                          לא נמצאו פריטים עבור קבלה זו\r\n                        </div>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          <div style={{ marginBottom: '32px' }}>\r\n            <div style={{\r\n              background: 'linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, rgba(255, 255, 255, 0.05) 100%)',\r\n              border: '2px solid rgba(100, 181, 246, 0.3)',\r\n              borderRadius: '16px',\r\n              padding: '24px',\r\n              backdropFilter: 'blur(15px)',\r\n              boxShadow: '0 8px 32px rgba(0, 0, 0, 0.2)'\r\n            }}>\r\n              <label className=\"form-label required\" style={{ \r\n                fontSize: '18px', \r\n                fontWeight: '700', \r\n                color: '#64b5f6',\r\n                marginBottom: '16px',\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                gap: '8px'\r\n              }}>\r\n                <i className=\"fas fa-signature\" style={{ color: '#64b5f6', fontSize: '20px' }}></i>\r\n                חתימה לאישור קבלת הפריטים\r\n              </label>\r\n              \r\n              <div style={{\r\n                background: 'linear-gradient(135deg, rgba(100, 181, 246, 0.1) 0%, rgba(100, 181, 246, 0.05) 100%)',\r\n                border: '2px dashed rgba(100, 181, 246, 0.4)',\r\n                borderRadius: '16px',\r\n                padding: '24px',\r\n                textAlign: 'center',\r\n                transition: 'all 0.3s ease',\r\n                minHeight: '200px',\r\n                display: 'flex',\r\n                flexDirection: 'column',\r\n                justifyContent: 'center'\r\n              }}>\r\n                <div style={{ \r\n                  marginBottom: '16px', \r\n                  color: 'rgba(255, 255, 255, 0.8)', \r\n                  fontSize: '16px',\r\n                  fontWeight: '500'\r\n                }}>\r\n                  <i className=\"fas fa-pen-fancy me-2\" style={{ color: '#64b5f6' }}></i>\r\n                  אנא חתמו במסגרת זו לאישור קבלת הפריטים\r\n                </div>\r\n                \r\n                <div style={{\r\n                  background: 'rgba(255, 255, 255, 0.95)',\r\n                  borderRadius: '12px',\r\n                  padding: '8px',\r\n                  margin: '0 auto',\r\n                  maxWidth: '100%',\r\n                  boxShadow: '0 4px 16px rgba(0, 0, 0, 0.1)',\r\n                  border: '1px solid rgba(0, 0, 0, 0.1)'\r\n                }}>\r\n                  <SignaturePad onSave={setSignature} />\r\n                </div>\r\n                \r\n                <div style={{ \r\n                  marginTop: '16px', \r\n                  fontSize: '13px', \r\n                  color: 'rgba(255, 255, 255, 0.7)',\r\n                  fontStyle: 'italic'\r\n                }}>\r\n                  <i className=\"fas fa-info-circle me-1\" style={{ color: '#64b5f6' }}></i>\r\n                  החתימה מהווה אישור חוקי על קבלת הפריטים הרשומים לעיל\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div style={{ display: 'flex', justifyContent: 'flex-end', gap: '12px' }}>\r\n            <button\r\n              type=\"button\"\r\n              className=\"btn btn-secondary\"\r\n              onClick={handleCloseModal}\r\n              disabled={isSubmitting}\r\n            >\r\n              ביטול\r\n            </button>\r\n            <button\r\n              type=\"button\"\r\n              className=\"btn-sign\"\r\n              onClick={handleSignSubmit}\r\n              disabled={isSubmitting || !signature}\r\n            >\r\n              {isSubmitting ? 'חותם...' : 'חתום וקבל'}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </Modal>\r\n\r\n      {/* Update Modal */}\r\n      {isUpdateModalOpen && selectedReceipt && (\r\n        <Modal\r\n          isOpen={isUpdateModalOpen}\r\n          onClose={handleCloseModal}\r\n          title={`עדכון קבלה #${selectedReceipt.id}`}\r\n          size=\"lg\"\r\n        >\r\n          <ReceiptForm\r\n            originalReceipt={selectedReceipt}\r\n            onSuccess={handleUpdateSuccess}\r\n            onCancel={handleCloseModal}\r\n          />\r\n        </Modal>\r\n      )}\r\n\r\n      {/* Delete Confirmation Modal */}\r\n      {isDeleteModalOpen && selectedReceipt && (\r\n        <DeleteReceiptModal\r\n          isOpen={isDeleteModalOpen}\r\n          onClose={handleCloseModal}\r\n          onConfirm={handleConfirmDelete}\r\n          receiptId={selectedReceipt.id}\r\n          isLoading={isDeleting}\r\n        />\r\n      )}\r\n\r\n      <NotificationModal\r\n        isOpen={notification.isOpen}\r\n        onClose={closeNotification}\r\n        type={notification.type}\r\n        message={notification.message}\r\n        title={notification.title}\r\n      />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default PendingReceiptsList;\r\n","import React, { useState, useMemo, useImperativeHandle, forwardRef } from 'react';\r\nimport { Receipt, User } from '../../types';\r\nimport { useReceipts } from '../../hooks';\r\nimport { paginate, formatDateTimeHebrew, getReceiptUnit, getReceiptLocation, receiptItemsMatchSearch, compareReceiptValues } from '../../utils';\r\nimport { receiptService } from '../../services';\r\nimport { UI_CONFIG } from '../../config/app.config';\r\nimport Modal from '../../shared/components/Modal';\r\nimport { SmartPagination, TabNavigation, NotificationModal, SearchInput } from '../../shared/components';\r\nimport { NotificationType } from '../../shared/components/NotificationModal';\r\nimport ReceiptForm from './ReceiptForm';\r\nimport PendingReceiptsList from './PendingReceiptsList';\r\nimport DeleteReceiptModal from './DeleteReceiptModal';\r\nimport ReceiptDetailsModal from './ReceiptDetailsModal';\r\nimport '../../shared/styles/components.css';\r\nimport './ReceiptsTab.css';\r\n\r\n\r\n\r\ninterface ReceiptsTabProps {\r\n    userProfile: User;\r\n    isAdmin: boolean;\r\n}\r\n\r\nexport interface ReceiptsTabRef {\r\n    switchToPendingTab: () => void;\r\n}\r\n\r\nconst ReceiptsTab = forwardRef<ReceiptsTabRef, ReceiptsTabProps>(({ userProfile, isAdmin }, ref) => {\r\n    const { receipts, pendingReceipts, deleteReceipt, fetchReceipts, signPendingReceipt } = useReceipts();\r\n    \r\n    const [currentPage, setCurrentPage] = useState(1);\r\n    const [selectedReceipt, setSelectedReceipt] = useState<Receipt | null>(null);\r\n    const [isModalOpen, setIsModalOpen] = useState(false);\r\n    const [isUpdateModalOpen, setIsUpdateModalOpen] = useState(false);\r\n    const [isDeleteModalOpen, setIsDeleteModalOpen] = useState(false);\r\n    const [isDeleting, setIsDeleting] = useState(false);\r\n    const [downloadingReceiptId, setDownloadingReceiptId] = useState<string | null>(null);\r\n    const [modalType, setModalType] = useState<'create' | 'update'>('create');\r\n    const [activeTab, setActiveTab] = useState<'signed' | 'pending'>('signed');\r\n    const [notification, setNotification] = useState<{\r\n        isOpen: boolean;\r\n        message: string;\r\n        type: NotificationType;\r\n    }>({\r\n        isOpen: false,\r\n        message: '',\r\n        type: 'error',\r\n    });\r\n\r\n    // Tab configuration\r\n    const receiptTabs = [\r\n        { \r\n            id: 'signed', \r\n            label: isAdmin ? 'כל הקבלות החתומות' : 'קבלות המיקום שלי', \r\n            icon: (\r\n                <svg viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n                    <path d=\"M18 17H6v-2h12v2zm0-4H6v-2h12v2zm0-4H6V7h12v2zM3 21l1.5-1.5L6 21l1.5-1.5L9 21l1.5-1.5L12 21l1.5-1.5L15 21l1.5-1.5L18 21l1.5-1.5L21 21V3l-1.5 1.5L18 3l-1.5 1.5L15 3l-1.5 1.5L12 3L10.5 4.5 9 3 7.5 4.5 6 3 4.5 4.5 3 3v18z\"/>\r\n                </svg>\r\n            )\r\n        },\r\n        { \r\n            id: 'pending', \r\n            label: isAdmin ? 'כל הקבלות הממתינות' : 'קבלות ממתינות במיקום שלי', \r\n            icon: (\r\n                <svg viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n                    <path d=\"M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M16.2,16.2L11,13V7H12.5V12.2L17,14.7L16.2,16.2Z\"/>\r\n                </svg>\r\n            )\r\n        },\r\n    ];\r\n\r\n    // Expose function to parent component to switch to pending tab\r\n    useImperativeHandle(ref, () => ({\r\n        switchToPendingTab: () => {\r\n            setActiveTab('pending');\r\n            setCurrentPage(1);\r\n        }\r\n    }), []);\r\n\r\n    const handleTabChange = (tabId: string) => {\r\n        setActiveTab(tabId as 'signed' | 'pending');\r\n        setCurrentPage(1);\r\n    };\r\n\r\n    // New: search/sort for signed receipts\r\n    const [searchTerm, setSearchTerm] = useState('');\r\n    const [sortConfig, setSortConfig] = useState<{ key: string; direction: 'asc' | 'desc' } | null>(null);\r\n    const [detailsReceipt, setDetailsReceipt] = useState<Receipt | null>(null);\r\n\r\n    // Filter receipts based on user role and location\r\n    const userReceipts = useMemo(() => {\r\n        if (isAdmin) {\r\n            return receipts; // Admins see all receipts\r\n        }\r\n        // Non-admin users see all receipts from their location (not just their own)\r\n        return receipts.filter(receipt => {\r\n            const signedByLocation = receipt.signedBy?.location?.name;\r\n            const createdByLocation = receipt.createdBy?.location?.name;\r\n            const userLocation = userProfile.location;\r\n            \r\n            // Show receipt if either the signer or creator is from the same location as current user\r\n            return signedByLocation === userLocation || createdByLocation === userLocation;\r\n        });\r\n    }, [receipts, isAdmin, userProfile.location]);\r\n    \r\n    const userPendingReceipts = useMemo(() => {\r\n        if (isAdmin) {\r\n            return pendingReceipts; // Admins see all pending receipts\r\n        }\r\n        // Non-admin users see all pending receipts from their location (not just their own)\r\n        return pendingReceipts.filter(receipt => {\r\n            const signedByLocation = receipt.signedBy?.location?.name;\r\n            const createdByLocation = receipt.createdBy?.location?.name;\r\n            const userLocation = userProfile.location;\r\n            \r\n            // Show receipt if either the signer or creator is from the same location as current user\r\n            return signedByLocation === userLocation || createdByLocation === userLocation;\r\n        });\r\n    }, [pendingReceipts, isAdmin, userProfile.location]);\r\n\r\n\r\n\r\n    const handleSort = (key: string) => {\r\n        let direction: 'asc' | 'desc' = 'asc';\r\n        if (sortConfig && sortConfig.key === key && sortConfig.direction === 'asc') direction = 'desc';\r\n        setSortConfig({ key, direction });\r\n    };\r\n\r\n    // Apply search + sort\r\n    const filteredAndSortedReceipts = useMemo(() => {\r\n        const term = searchTerm.toLowerCase().normalize('NFC');\r\n        let filtered = userReceipts.filter((r) => {\r\n            const issuer = (r.createdBy?.name?.toLowerCase() || '').normalize('NFC');\r\n            const receiver = (r.signedBy?.name?.toLowerCase() || '').normalize('NFC');\r\n            const unit = getReceiptUnit(r).toLowerCase().normalize('NFC');\r\n            const location = getReceiptLocation(r).toLowerCase().normalize('NFC');\r\n            const count = (r.receiptItems?.length || 0).toString();\r\n            const dateStr = formatDateTimeHebrew(r.updatedAt.toString()).normalize('NFC');\r\n            const note = (r.note?.toLowerCase() || '').normalize('NFC');\r\n            \r\n            // Search in receipt items (item names and ID numbers)\r\n            const itemsMatch = receiptItemsMatchSearch(r, term);\r\n            \r\n            return issuer.includes(term) || receiver.includes(term) || unit.includes(term) || \r\n                   location.includes(term) || count.includes(term) || dateStr.includes(term) || \r\n                   note.includes(term) || itemsMatch;\r\n        });\r\n\r\n        if (sortConfig) {\r\n            const { key, direction } = sortConfig;\r\n            filtered = [...filtered].sort((a, b) => {\r\n                let aVal: any, bVal: any;\r\n                switch (key) {\r\n                    case 'createdBy':\r\n                        aVal = a.createdBy?.name || '';\r\n                        bVal = b.createdBy?.name || '';\r\n                        break;\r\n                    case 'signedBy':\r\n                        aVal = a.signedBy?.name || '';\r\n                        bVal = b.signedBy?.name || '';\r\n                        break;\r\n                    case 'unit':\r\n                        aVal = getReceiptUnit(a) || '';\r\n                        bVal = getReceiptUnit(b) || '';\r\n                        break;\r\n                    case 'location':\r\n                        aVal = getReceiptLocation(a) || '';\r\n                        bVal = getReceiptLocation(b) || '';\r\n                        break;\r\n                    case 'itemCount':\r\n                        aVal = a.receiptItems?.length || 0;\r\n                        bVal = b.receiptItems?.length || 0;\r\n                        break;\r\n                    case 'note':\r\n                        aVal = a.note || '';\r\n                        bVal = b.note || '';\r\n                        break;\r\n                    case 'updatedAt':\r\n                        aVal = new Date(a.updatedAt).getTime();\r\n                        bVal = new Date(b.updatedAt).getTime();\r\n                        break;\r\n                    default:\r\n                        return 0;\r\n                }\r\n                return compareReceiptValues(aVal, bVal, direction);\r\n            });\r\n        }\r\n        return filtered;\r\n    }, [userReceipts, searchTerm, sortConfig]);\r\n\r\n    const { paginatedItems: paginatedReceipts, totalPages } = paginate(filteredAndSortedReceipts, currentPage, UI_CONFIG.TABLE_PAGE_SIZE);\r\n\r\n    const handleSearchChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        setSearchTerm(e.target.value);\r\n        setCurrentPage(1);\r\n    };\r\n\r\n    // Remove the useEffect that was causing unnecessary API calls on tab changes\r\n    // The useReceipts hook already fetches all receipts on mount and separates them into signed/pending\r\n\r\n    const handlePendingReceiptsRefresh = async () => {\r\n        // Refresh both signed and pending lists so UI updates immediately after actions\r\n        await fetchReceipts();\r\n    };\r\n\r\n    const handleCreateNewClick = () => {\r\n        setSelectedReceipt(null);\r\n        setModalType('create');\r\n        setIsModalOpen(true);\r\n    };\r\n\r\n    const handleUpdateClick = (receipt: Receipt) => {\r\n        setSelectedReceipt(receipt);\r\n        setModalType('update');\r\n        setIsUpdateModalOpen(true);\r\n    };\r\n\r\n    const handleDeleteClick = (receipt: Receipt) => {\r\n        setSelectedReceipt(receipt);\r\n        setIsDeleteModalOpen(true);\r\n    };\r\n\r\n    const handleConfirmDelete = async () => {\r\n        if (!selectedReceipt) return;\r\n\r\n        setIsDeleting(true);\r\n        try {\r\n            const success = await deleteReceipt(selectedReceipt.id);\r\n            if (success) {\r\n                handleCloseModal();\r\n                // No need to refresh since deleteReceipt already updates the state\r\n            }\r\n        } catch (error) {\r\n            // Error is handled by the hook\r\n        } finally {\r\n            setIsDeleting(false);\r\n        }\r\n    };\r\n\r\n    const handleCloseModal = () => {\r\n        setSelectedReceipt(null);\r\n        setIsModalOpen(false);\r\n        setIsUpdateModalOpen(false);\r\n        setIsDeleteModalOpen(false);\r\n    };\r\n\r\n    const handleUpdateSuccess = () => {\r\n        handleCloseModal();\r\n        // Refresh both lists since updated receipt becomes pending\r\n        handlePendingReceiptsRefresh();\r\n    };\r\n\r\n    const handleCreateSuccess = () => {\r\n        handleCloseModal();\r\n        // After creating a receipt (pending), refresh lists so it appears immediately\r\n        handlePendingReceiptsRefresh();\r\n    };\r\n\r\n    const handleDownloadPDF = async (receipt: Receipt) => {\r\n        try {\r\n            setDownloadingReceiptId(receipt.id);\r\n            \r\n            // Use the receipt service to download the PDF from server\r\n            const blob = await receiptService.downloadReceiptPDF(receipt.id);\r\n            \r\n            // Create download link with a descriptive filename\r\n            const url = window.URL.createObjectURL(blob);\r\n            const link = document.createElement('a');\r\n            link.href = url;\r\n            \r\n            // Create a descriptive filename\r\n            const receiptDate = new Date(receipt.createdAt);\r\n            const dateStr = receiptDate.toLocaleDateString('he-IL').replace(/\\//g, '-');\r\n            const issuer = receipt.createdBy?.name?.replace(/\\s+/g, '-') || 'לא-ידוע';\r\n            const receiver = receipt.signedBy?.name?.replace(/\\s+/g, '-') || 'לא-ידוע';\r\n            \r\n            link.download = `קבלה-${dateStr}-${issuer}-אל-${receiver}.pdf`;\r\n            \r\n            document.body.appendChild(link);\r\n            link.click();\r\n            \r\n            // Clean up\r\n            document.body.removeChild(link);\r\n            window.URL.revokeObjectURL(url);\r\n            \r\n        } catch (error: any) {\r\n            console.error('Error downloading receipt PDF:', error);\r\n            \r\n            // Handle axios error responses\r\n            if (error.response) {\r\n                const status = error.response.status;\r\n                let errorMessage = 'שגיאה בהורדת הקבלה';\r\n                \r\n                if (status === 404) {\r\n                    errorMessage = 'קבלה לא נמצאה במערכת';\r\n                } else if (status === 401 || status === 403) {\r\n                    errorMessage = 'אין הרשאה להורדת הקבלה';\r\n                } else if (status === 500) {\r\n                    errorMessage = 'שגיאה פנימית בשרת בעת יצירת הקבלה';\r\n                }\r\n                \r\n                setNotification({\r\n                    isOpen: true,\r\n                    message: errorMessage,\r\n                    type: 'error',\r\n                });\r\n            } else if (error.code === 'ECONNABORTED' || error.message?.includes('timeout')) {\r\n                setNotification({\r\n                    isOpen: true,\r\n                    message: 'פג הזמן הקצוב לחיבור - הקבלה עשויה להיות גדולה מדי',\r\n                    type: 'error',\r\n                });\r\n            } else if (error.message?.includes('Network Error')) {\r\n                setNotification({\r\n                    isOpen: true,\r\n                    message: 'שגיאה בחיבור לשרת - אנא בדוק את החיבור לאינטרנט',\r\n                    type: 'error',\r\n                });\r\n            } else {\r\n                setNotification({\r\n                    isOpen: true,\r\n                    message: 'שגיאה לא צפויה בהורדת הקבלה',\r\n                    type: 'error',\r\n                });\r\n            }\r\n        } finally {\r\n            setDownloadingReceiptId(null);\r\n        }\r\n    };\r\n\r\n    const renderTabContent = () => {\r\n        switch (activeTab) {\r\n            case 'signed':\r\n                return (\r\n                    <>\r\n                        {/* Compact Header with Search and Action Button */}\r\n                        <div className=\"management-header-compact\">\r\n                            <div className=\"management-search-section\">\r\n                                <SearchInput\r\n                                    value={searchTerm}\r\n                                    onChange={(value) => handleSearchChange({ target: { value } } as React.ChangeEvent<HTMLInputElement>)}\r\n                                    placeholder=\"חפש לפי מנפיק, מקבל, יחידה, מיקום, פריטים, הערה או תאריך...\"\r\n                                    resultsCount={filteredAndSortedReceipts.length}\r\n                                    resultsLabel=\"קבלות\"\r\n                                />\r\n                            </div>\r\n                            {isAdmin && (\r\n                                <div className=\"management-action-section\">\r\n                                    <button \r\n                                        onClick={handleCreateNewClick}\r\n                                        className=\"btn btn-primary unified-action-btn\"\r\n                                        style={{\r\n                                            display: 'flex',\r\n                                            alignItems: 'center',\r\n                                            gap: '8px',\r\n                                            fontSize: '14px',\r\n                                            fontWeight: '500',\r\n                                            padding: '10px 16px',\r\n                                            borderRadius: '8px',\r\n                                            border: 'none',\r\n                                            whiteSpace: 'nowrap',\r\n                                            boxShadow: '0 2px 8px rgba(99, 102, 241, 0.15)',\r\n                                            transition: 'all 0.2s ease',\r\n                                        }}\r\n                                    >\r\n                                        <i className=\"fas fa-plus\" style={{ fontSize: '12px' }}></i>\r\n                                        <span>צור קבלה חדשה</span>\r\n                                    </button>\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n\r\n                        {paginatedReceipts.length === 0 ? (\r\n                            <div className=\"empty-state\">\r\n                                <i className=\"fas fa-receipt\"></i>\r\n                                <h4>אין קבלות להצגה</h4>\r\n                                <p>{isAdmin ? 'לא נמצאו קבלות במערכת' : 'לא נמצאו קבלות עבור המיקום שלך'}</p>\r\n                            </div>\r\n                        ) : (\r\n                            <>\r\n                                <div className=\"unified-table-container\">\r\n                                    <table className=\"unified-table\">\r\n                                        <thead>\r\n                                            <tr>\r\n                                                <th className=\"unified-table-header unified-table-header-regular sortable\" onClick={() => handleSort('createdBy')} data-sorted={sortConfig?.key === 'createdBy'}>\r\n                                                    <div className=\"d-flex align-items-center\">\r\n                                                        <span>מנפיק</span>\r\n                                                    </div>\r\n                                                </th>\r\n                                                <th className=\"unified-table-header unified-table-header-regular sortable\" onClick={() => handleSort('signedBy')} data-sorted={sortConfig?.key === 'signedBy'}>\r\n                                                    <div className=\"d-flex align-items-center\">\r\n                                                        <span>מקבל</span>\r\n                                                    </div>\r\n                                                </th>\r\n                                                <th className=\"unified-table-header unified-table-header-regular sortable\" onClick={() => handleSort('unit')} data-sorted={sortConfig?.key === 'unit'}>\r\n                                                    <div className=\"d-flex align-items-center\">\r\n                                                        <span>יחידה</span>\r\n                                                    </div>\r\n                                                </th>\r\n                                                <th className=\"unified-table-header unified-table-header-regular sortable\" onClick={() => handleSort('location')} data-sorted={sortConfig?.key === 'location'}>\r\n                                                    <div className=\"d-flex align-items-center\">\r\n                                                        <span>מיקום</span>\r\n                                                    </div>\r\n                                                </th>\r\n                                                <th className=\"unified-table-header unified-table-header-regular sortable\" onClick={() => handleSort('itemCount')} data-sorted={sortConfig?.key === 'itemCount'}>\r\n                                                    <div className=\"d-flex align-items-center\">\r\n                                                        <span>כמות פריטים</span>\r\n                                                    </div>\r\n                                                </th>\r\n                                                <th className=\"unified-table-header unified-table-header-regular sortable\" onClick={() => handleSort('updatedAt')} data-sorted={sortConfig?.key === 'updatedAt'}>\r\n                                                    <div className=\"d-flex align-items-center\">\r\n                                                        <span>תאריך חתימה</span>\r\n                                                    </div>\r\n                                                </th>\r\n                                                <th className=\"unified-table-header unified-table-header-regular sortable\" onClick={() => handleSort('note')} data-sorted={sortConfig?.key === 'note'}>\r\n                                                    <div className=\"d-flex align-items-center\">\r\n                                                        <span>הערה</span>\r\n                                                    </div>\r\n                                                </th>\r\n                                            </tr>\r\n                                        </thead>\r\n                                    <tbody>\r\n                                        {paginatedReceipts.map(receipt => (\r\n                                            <tr key={receipt.id} className=\"unified-table-row\" onClick={() => setDetailsReceipt(receipt)} style={{ cursor: 'pointer' }}>\r\n                                                <td className=\"unified-table-cell\">{receipt.createdBy?.name || 'משתמש לא ידוע'}</td>\r\n                                                <td className=\"unified-table-cell\">{receipt.signedBy?.name || 'משתמש לא ידוע'}</td>\r\n                                                <td className=\"unified-table-cell\">{getReceiptUnit(receipt)}</td>\r\n                                                <td className=\"unified-table-cell\">{getReceiptLocation(receipt)}</td>\r\n                                                <td className=\"unified-table-cell\">{receipt.receiptItems?.length || 0}</td>\r\n                                                <td className=\"unified-table-cell\">{formatDateTimeHebrew(receipt.updatedAt.toString())}</td>\r\n                                                <td className=\"unified-table-cell\" style={{ maxWidth: '200px' }}>\r\n                                                    {receipt.note ? (\r\n                                                        <span \r\n                                                            title={receipt.note}\r\n                                                            style={{ \r\n                                                                display: 'block',\r\n                                                                overflow: 'hidden',\r\n                                                                textOverflow: 'ellipsis',\r\n                                                                whiteSpace: 'nowrap'\r\n                                                            }}\r\n                                                        >\r\n                                                            {receipt.note}\r\n                                                        </span>\r\n                                                    ) : (\r\n                                                        <span style={{ color: 'var(--color-text-muted)', fontStyle: 'italic' }}>\r\n                                                            ללא הערה\r\n                                                        </span>\r\n                                                    )}\r\n                                                </td>\r\n                                            </tr>\r\n                                        ))}\r\n                                    </tbody>\r\n                                </table>\r\n                                </div>\r\n\r\n                                {totalPages > 1 && (\r\n                                    <SmartPagination\r\n                                        currentPage={currentPage}\r\n                                        totalPages={totalPages}\r\n                                        onPageChange={setCurrentPage}\r\n                                    />\r\n                                )}\r\n                            </>\r\n                        )}\r\n                    </>\r\n                );\r\n\r\n            case 'pending':\r\n                return (\r\n                    <PendingReceiptsList\r\n                        pendingReceipts={userPendingReceipts}\r\n                        onRefresh={handlePendingReceiptsRefresh}\r\n                        isAdmin={isAdmin}\r\n                        currentUserId={userProfile?.id}\r\n                        signPendingReceipt={signPendingReceipt}\r\n                        deleteReceipt={deleteReceipt}\r\n                    />\r\n                );\r\n\r\n            default:\r\n                return null;\r\n        }\r\n    };\r\n\r\n    // Check if user has a location assigned\r\n    if (!userProfile.location) {\r\n        return (\r\n            <div style={{ padding: '20px' }}>\r\n                <div className=\"alert alert-warning\">\r\n                    <h4>אין לך גישה למערכת</h4>\r\n                    <p>המשתמש שלך לא שוייך למיקום. אנא פנה למנהל המערכת כדי לשייך אותך למיקום.</p>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"page-container\">\r\n            <TabNavigation\r\n                tabs={receiptTabs}\r\n                activeTab={activeTab}\r\n                onTabChange={handleTabChange}\r\n                variant=\"primary\"\r\n                size=\"md\"\r\n            />\r\n            <div className=\"tab-content\">\r\n                {renderTabContent()}\r\n            </div>\r\n\r\n            {/* Details Modal for signed receipts */}\r\n            <ReceiptDetailsModal\r\n                receipt={detailsReceipt}\r\n                isOpen={!!detailsReceipt}\r\n                onClose={() => setDetailsReceipt(null)}\r\n                isAdmin={isAdmin}\r\n                onUpdate={detailsReceipt ? () => handleUpdateClick(detailsReceipt) : undefined}\r\n                onDelete={detailsReceipt ? () => handleDeleteClick(detailsReceipt) : undefined}\r\n                onDownload={detailsReceipt ? () => handleDownloadPDF(detailsReceipt) : undefined}\r\n                downloadingReceiptId={downloadingReceiptId}\r\n            />\r\n\r\n            {/* Create Modal */}\r\n            {isModalOpen && (\r\n                <Modal isOpen={isModalOpen} onClose={handleCloseModal}>\r\n                    {modalType === 'create' ? (\r\n                        <ReceiptForm\r\n                            onSuccess={handleCreateSuccess}\r\n                            onCancel={handleCloseModal}\r\n                        />\r\n                    ) : null}\r\n                </Modal>\r\n            )}\r\n\r\n            {/* Update Modal - Creates Pending Receipt */}\r\n            {isUpdateModalOpen && selectedReceipt && (\r\n                <Modal isOpen={isUpdateModalOpen} onClose={handleCloseModal}>\r\n                    <ReceiptForm\r\n                        originalReceipt={selectedReceipt}\r\n                        onSuccess={handleUpdateSuccess}\r\n                        onCancel={handleCloseModal}\r\n                    />\r\n                </Modal>\r\n            )}\r\n\r\n            {/* Delete Confirmation Modal */}\r\n            {isDeleteModalOpen && selectedReceipt && (\r\n                <DeleteReceiptModal\r\n                    isOpen={isDeleteModalOpen}\r\n                    onClose={handleCloseModal}\r\n                    onConfirm={handleConfirmDelete}\r\n                    receiptId={selectedReceipt.id}\r\n                    isLoading={isDeleting}\r\n                />\r\n            )}\r\n\r\n            {/* Notification Modal */}\r\n            <NotificationModal\r\n                isOpen={notification.isOpen}\r\n                onClose={() => setNotification({ isOpen: false, message: '', type: 'error' })}\r\n                message={notification.message}\r\n                type={notification.type}\r\n            />\r\n        </div>\r\n    );\r\n});\r\n\r\nexport default ReceiptsTab;\r\n","import { ID } from './common.types';\r\n\r\nexport const ranks = [\r\n  'טוראי', 'רב\"ט', 'סמל', 'סמ\"ר', 'רס\"ל', 'רס\"ר', 'רס\"ם', 'רס\"ב', 'רנ\"ג',\r\n  'קמ\"א', 'קא\"ב', 'קא\"ם', 'סג\"מ', 'סגן', 'סרן', 'רס\"ן', 'סא\"ל',\r\n  'אל\"מ', 'תא\"ל', 'אלוף', 'רא\"ל',\r\n] as const;\r\n\r\nexport type Rank = typeof ranks[number];\r\n\r\nexport interface User {\r\n  id: ID;\r\n  name: string;\r\n  personalNumber: number;\r\n  phoneNumber: string;\r\n  location: string;\r\n  unit: string;\r\n  rank: string;\r\n  isAdmin: boolean;\r\n  isAdminInUnit?: boolean;\r\n  emailSubscribed?: boolean;\r\n  firebaseUid?: string;\r\n  createdAt: string;\r\n  updatedAt: string;\r\n}\r\n\r\nexport interface CreateUserRequest {\r\n  name: string;\r\n  personalNumber: number;\r\n  phoneNumber: string;\r\n  rank: string;\r\n  firebaseUid?: string;\r\n  locationId?: string; // Made optional since users can't choose location during registration\r\n}\r\n\r\nexport interface UpdateUserRequest {\r\n  name?: string;\r\n  personalNumber?: number;\r\n  phoneNumber?: string;\r\n  rank?: string;\r\n  isAdmin?: boolean;\r\n  isAdminInUnit?: boolean;\r\n  emailSubscribed?: boolean;\r\n  firebaseUid?: string;\r\n  locationId?: string;\r\n}\r\n","import React, { useEffect, useState } from 'react';\r\nimport { User, CreateUserRequest, UpdateUserRequest, ranks } from '../../types';\r\nimport { useUsers } from '../../hooks';\r\nimport { useManagement } from '../../contexts';\r\nimport { validateRequired, validatePhoneNumber, validatePersonalNumber, sanitizeInput } from '../../utils';\r\nimport { ConflictErrorModal, NotificationModal } from '../../shared/components';\r\nimport type { NotificationType } from '../../shared/components/NotificationModal';\r\n\r\ninterface UserFormProps {\r\n  user: User | null;\r\n  isAdmin?: boolean;\r\n  onSuccess: () => void;\r\n  onCancel: () => void;\r\n}\r\n\r\ninterface FormErrors {\r\n  name?: string;\r\n  personalNumber?: string;\r\n  phoneNumber?: string;\r\n  locationId?: string;\r\n  rank?: string;\r\n  isAdmin?: string;\r\n}\r\n\r\ninterface FormData extends CreateUserRequest {\r\n  isAdmin?: boolean;\r\n  isAdminInUnit?: boolean;\r\n}\r\n\r\nconst UserForm: React.FC<UserFormProps> = ({ user, isAdmin = false, onSuccess, onCancel }) => {\r\n  const { createUser, updateUser } = useUsers();\r\n  const { \r\n    locations, \r\n    loading: managementLoading,\r\n    loadLocations\r\n  } = useManagement();\r\n  \r\n  const [formData, setFormData] = useState<FormData>({\r\n    name: '',\r\n    personalNumber: 0,\r\n    phoneNumber: '',\r\n    locationId: '',\r\n    rank: '',\r\n    isAdmin: false,\r\n    isAdminInUnit: false,\r\n  });\r\n  const [errors, setErrors] = useState<FormErrors>({});\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  const [showConflictModal, setShowConflictModal] = useState(false);\r\n  const [showLastAdminModal, setShowLastAdminModal] = useState(false);\r\n\r\n  const [notification, setNotification] = useState<{\r\n    isOpen: boolean;\r\n    type: NotificationType;\r\n    message: string;\r\n    title?: string;\r\n  }>({\r\n    isOpen: false,\r\n    type: 'info',\r\n    message: ''\r\n  });\r\n\r\n  const showNotification = (type: NotificationType, message: string, title?: string) => {\r\n    setNotification({\r\n      isOpen: true,\r\n      type,\r\n      message,\r\n      title\r\n    });\r\n  };\r\n\r\n  const closeNotification = () => {\r\n    setNotification(prev => ({ ...prev, isOpen: false }));\r\n  };\r\n\r\n  // All locations are available since we don't filter by unit anymore\r\n  const availableLocations = locations;\r\n\r\n  // Load locations when component mounts\r\n  useEffect(() => {\r\n    loadLocations();\r\n  }, [loadLocations]);\r\n\r\n  useEffect(() => {\r\n    if (user) {\r\n      // Since location is now a string, we need to find the matching location ID\r\n      const matchingLocation = locations.find(loc => loc.name === user.location);\r\n      setFormData({\r\n        name: user.name,\r\n        personalNumber: user.personalNumber,\r\n        phoneNumber: user.phoneNumber,\r\n        locationId: matchingLocation?.id || '',\r\n        rank: user.rank,\r\n        isAdmin: user.isAdmin,\r\n        isAdminInUnit: user.isAdminInUnit || false,\r\n      });\r\n    }\r\n  }, [user, locations]);\r\n\r\n  const validateForm = (): boolean => {\r\n    const newErrors: FormErrors = {};\r\n\r\n    if (!validateRequired(formData.name)) {\r\n      newErrors.name = 'שם חובה';\r\n    }\r\n\r\n    if (!validatePersonalNumber(formData.personalNumber)) {\r\n      newErrors.personalNumber = 'מספר אישי חייב להיות בדיוק 7 ספרות';\r\n    }\r\n\r\n    if (!validatePhoneNumber(formData.phoneNumber)) {\r\n      newErrors.phoneNumber = 'מספר טלפון לא תקין';\r\n    }\r\n\r\n    // Only validate location if admin is creating/editing user\r\n    if (isAdmin && (!formData.locationId || !validateRequired(formData.locationId))) {\r\n      newErrors.locationId = 'מיקום חובה';\r\n    }\r\n\r\n    if (!validateRequired(formData.rank)) {\r\n      newErrors.rank = 'דרגה חובה';\r\n    }\r\n\r\n    setErrors(newErrors);\r\n    return Object.keys(newErrors).length === 0;\r\n  };\r\n\r\n  const handleInputChange = (field: keyof FormData, value: string | boolean) => {\r\n    setFormData(prev => {\r\n      const newData = {\r\n        ...prev,\r\n        [field]: field === 'name' ? value : \r\n                 field === 'personalNumber' ? (value === '' ? 0 : parseInt(value as string, 10) || 0) :\r\n                 field === 'isAdmin' ? value as boolean :\r\n                 field === 'isAdminInUnit' ? value as boolean :\r\n                 sanitizeInput(value as string),\r\n      };\r\n      \r\n      return newData;\r\n    });\r\n    \r\n    // Clear error when user starts typing\r\n    if (errors[field as keyof FormErrors]) {\r\n      setErrors(prev => ({\r\n        ...prev,\r\n        [field]: undefined,\r\n      }));\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    \r\n    if (!validateForm()) {\r\n      return;\r\n    }\r\n\r\n    setIsSubmitting(true);\r\n\r\n    try {\r\n      let result: { success: boolean; error?: { status: number; message: string } };\r\n      \r\n      if (user?.id) {\r\n        // For updating, we need to exclude firebaseUid from the request\r\n        const updateData: UpdateUserRequest = {\r\n          name: formData.name,\r\n          personalNumber: formData.personalNumber,\r\n          phoneNumber: formData.phoneNumber,\r\n          rank: formData.rank,\r\n        };\r\n        \r\n        // Only include locationId if admin is making the request and locationId is provided\r\n        if (isAdmin && formData.locationId) {\r\n          updateData.locationId = formData.locationId;\r\n        }\r\n        \r\n        // Only allow admin to update isAdmin and isAdminInUnit\r\n        if (isAdmin && formData.isAdmin !== undefined) {\r\n          updateData.isAdmin = formData.isAdmin;\r\n        }\r\n        \r\n        if (isAdmin && formData.isAdminInUnit !== undefined) {\r\n          updateData.isAdminInUnit = formData.isAdminInUnit;\r\n        }\r\n        \r\n        result = await updateUser(user.id, updateData);\r\n      } else {\r\n        // For creating new users, only include locationId if admin provides it\r\n        const createData: CreateUserRequest = {\r\n          name: formData.name,\r\n          personalNumber: formData.personalNumber,\r\n          phoneNumber: formData.phoneNumber,\r\n          rank: formData.rank,\r\n        };\r\n        \r\n        if (isAdmin && formData.locationId) {\r\n          createData.locationId = formData.locationId;\r\n        }\r\n        \r\n        result = await createUser(createData);\r\n      }\r\n\r\n      if (result.success) {\r\n        onSuccess();\r\n      } else if (result.error?.status === 409) {\r\n        // Handle 409 conflict error with modal\r\n        setShowConflictModal(true);\r\n      } else if (result.error?.status === 403) {\r\n        // Handle 403 forbidden error (like last admin demotion)\r\n        setShowLastAdminModal(true);\r\n      } else {\r\n        showNotification('error', 'שגיאה בשמירת המשתמש');\r\n      }\r\n    } catch (error) {\r\n      // Removed console.error to avoid noisy logs\r\n      showNotification('error', 'שגיאה בשמירת המשתמש');\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div style={{\r\n        background: 'rgba(255, 255, 255, 0.05)',\r\n        borderRadius: '16px',\r\n        border: '1px solid rgba(255, 255, 255, 0.1)',\r\n        padding: '32px',\r\n        backdropFilter: 'blur(10px)',\r\n        maxWidth: '600px',\r\n        margin: '0 auto'\r\n      }}>\r\n        <form onSubmit={handleSubmit}>\r\n          <div style={{ marginBottom: '24px' }}>\r\n            <label style={{\r\n              display: 'block',\r\n              fontSize: '14px',\r\n              fontWeight: '600',\r\n              color: 'rgba(255, 255, 255, 0.9)',\r\n              marginBottom: '8px'\r\n            }}>\r\n              שם <span style={{ color: '#ef4444' }}>*</span>\r\n            </label>\r\n            <input \r\n              type=\"text\"\r\n              value={formData.name} \r\n              onChange={e => handleInputChange('name', e.target.value)} \r\n              required\r\n              style={{\r\n                width: '100%',\r\n                padding: '12px 16px',\r\n                background: 'rgba(255, 255, 255, 0.1)',\r\n                border: `1px solid ${errors.name ? '#ef4444' : 'rgba(255, 255, 255, 0.2)'}`,\r\n                borderRadius: '8px',\r\n                color: 'rgba(255, 255, 255, 0.9)',\r\n                fontSize: '14px',\r\n                transition: 'all 0.2s ease',\r\n                outline: 'none'\r\n              }}\r\n              onFocus={(e) => {\r\n                e.target.style.borderColor = 'rgba(59, 130, 246, 0.5)';\r\n                e.target.style.background = 'rgba(255, 255, 255, 0.15)';\r\n              }}\r\n              onBlur={(e) => {\r\n                e.target.style.borderColor = errors.name ? '#ef4444' : 'rgba(255, 255, 255, 0.2)';\r\n                e.target.style.background = 'rgba(255, 255, 255, 0.1)';\r\n              }}\r\n            />\r\n            {errors.name && (\r\n              <div style={{\r\n                color: '#ef4444',\r\n                fontSize: '12px',\r\n                marginTop: '4px',\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                gap: '4px'\r\n              }}>\r\n                <i className=\"fas fa-exclamation-circle\"></i>\r\n                {errors.name}\r\n              </div>\r\n            )}\r\n          </div>\r\n          \r\n          <div style={{ marginBottom: '24px' }}>\r\n            <label style={{\r\n              display: 'block',\r\n              fontSize: '14px',\r\n              fontWeight: '600',\r\n              color: 'rgba(255, 255, 255, 0.9)',\r\n              marginBottom: '8px'\r\n            }}>\r\n              מספר אישי <span style={{ color: '#ef4444' }}>*</span>\r\n            </label>\r\n            <input \r\n              type=\"number\"\r\n              value={formData.personalNumber || ''} \r\n              onChange={e => {\r\n                const value = e.target.value;\r\n                if (value === '' || (/^[0-9]{1,7}$/.test(value) && value.length <= 7)) {\r\n                  handleInputChange('personalNumber', value);\r\n                }\r\n              }}\r\n              onInput={e => {\r\n                const target = e.target as HTMLInputElement;\r\n                if (target.value.length > 7) {\r\n                  target.value = target.value.slice(0, 7);\r\n                }\r\n              }}\r\n              placeholder=\"הזן 7 ספרות\"\r\n              min=\"1000000\"\r\n              max=\"9999999\"\r\n              required\r\n              style={{\r\n                width: '100%',\r\n                padding: '12px 16px',\r\n                background: 'rgba(255, 255, 255, 0.1)',\r\n                border: `1px solid ${errors.personalNumber ? '#ef4444' : 'rgba(255, 255, 255, 0.2)'}`,\r\n                borderRadius: '8px',\r\n                color: 'rgba(255, 255, 255, 0.9)',\r\n                fontSize: '14px',\r\n                transition: 'all 0.2s ease',\r\n                outline: 'none',\r\n                textAlign: 'right',\r\n                direction: 'rtl'\r\n              }}\r\n              onFocus={(e) => {\r\n                e.target.style.borderColor = 'rgba(59, 130, 246, 0.5)';\r\n                e.target.style.background = 'rgba(255, 255, 255, 0.15)';\r\n              }}\r\n              onBlur={(e) => {\r\n                e.target.style.borderColor = errors.personalNumber ? '#ef4444' : 'rgba(255, 255, 255, 0.2)';\r\n                e.target.style.background = 'rgba(255, 255, 255, 0.1)';\r\n              }}\r\n            />\r\n            {errors.personalNumber && (\r\n              <div style={{\r\n                color: '#ef4444',\r\n                fontSize: '12px',\r\n                marginTop: '4px',\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                gap: '4px'\r\n              }}>\r\n                <i className=\"fas fa-exclamation-circle\"></i>\r\n                {errors.personalNumber}\r\n              </div>\r\n            )}\r\n          </div>\r\n          \r\n          <div style={{ marginBottom: '24px' }}>\r\n            <label style={{\r\n              display: 'block',\r\n              fontSize: '14px',\r\n              fontWeight: '600',\r\n              color: 'rgba(255, 255, 255, 0.9)',\r\n              marginBottom: '8px'\r\n            }}>\r\n              מספר טלפון <span style={{ color: '#ef4444' }}>*</span>\r\n            </label>\r\n            <input \r\n              type=\"text\"\r\n              value={formData.phoneNumber} \r\n              onChange={e => handleInputChange('phoneNumber', e.target.value)} \r\n              required\r\n              style={{\r\n                width: '100%',\r\n                padding: '12px 16px',\r\n                background: 'rgba(255, 255, 255, 0.1)',\r\n                border: `1px solid ${errors.phoneNumber ? '#ef4444' : 'rgba(255, 255, 255, 0.2)'}`,\r\n                borderRadius: '8px',\r\n                color: 'rgba(255, 255, 255, 0.9)',\r\n                fontSize: '14px',\r\n                transition: 'all 0.2s ease',\r\n                outline: 'none'\r\n              }}\r\n              onFocus={(e) => {\r\n                e.target.style.borderColor = 'rgba(59, 130, 246, 0.5)';\r\n                e.target.style.background = 'rgba(255, 255, 255, 0.15)';\r\n              }}\r\n              onBlur={(e) => {\r\n                e.target.style.borderColor = errors.phoneNumber ? '#ef4444' : 'rgba(255, 255, 255, 0.2)';\r\n                e.target.style.background = 'rgba(255, 255, 255, 0.1)';\r\n              }}\r\n            />\r\n            {errors.phoneNumber && (\r\n              <div style={{\r\n                color: '#ef4444',\r\n                fontSize: '12px',\r\n                marginTop: '4px',\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                gap: '4px'\r\n              }}>\r\n                <i className=\"fas fa-exclamation-circle\"></i>\r\n                {errors.phoneNumber}\r\n              </div>\r\n            )}\r\n          </div>\r\n          \r\n          <div style={{ marginBottom: '24px' }}>\r\n            <label style={{\r\n              display: 'block',\r\n              fontSize: '14px',\r\n              fontWeight: '600',\r\n              color: 'var(--color-text)',\r\n              marginBottom: '8px'\r\n            }}>\r\n              דרגה <span style={{ color: '#ef4444' }}>*</span>\r\n            </label>\r\n            <select \r\n              value={formData.rank} \r\n              onChange={e => handleInputChange('rank', e.target.value)} \r\n              required\r\n              style={{\r\n                width: '100%',\r\n                padding: '12px 16px',\r\n                background: 'var(--color-surface)',\r\n                border: `1px solid ${errors.rank ? '#ef4444' : 'var(--color-border)'}`,\r\n                borderRadius: '8px',\r\n                color: 'var(--color-text)',\r\n                fontSize: '14px',\r\n                transition: 'all 0.2s ease',\r\n                outline: 'none',\r\n                appearance: 'none',\r\n                paddingLeft: '16px',\r\n                cursor: 'pointer'\r\n              }}\r\n              onFocus={(e) => {\r\n                (e.target as HTMLSelectElement).style.borderColor = 'var(--color-primary)';\r\n                (e.target as HTMLSelectElement).style.background = 'var(--color-bg-hover)';\r\n              }}\r\n              onBlur={(e) => {\r\n                (e.target as HTMLSelectElement).style.borderColor = errors.rank ? '#ef4444' : 'var(--color-border)';\r\n                (e.target as HTMLSelectElement).style.background = 'var(--color-surface)';\r\n              }}\r\n            >\r\n              <option value=\"\" style={{\r\n                background: 'var(--color-surface)',\r\n                color: 'var(--color-text-muted)'\r\n              }}>\r\n                בחר דרגה\r\n              </option>\r\n              {ranks.map(rank => (\r\n                <option \r\n                  key={rank} \r\n                  value={rank}\r\n                  style={{\r\n                    background: 'var(--color-surface)',\r\n                    color: 'var(--color-text)'\r\n                  }}\r\n                >\r\n                  {rank}\r\n                </option>\r\n              ))}\r\n            </select>\r\n            {errors.rank && (\r\n              <div style={{\r\n                color: '#ef4444',\r\n                fontSize: '12px',\r\n                marginTop: '4px',\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                gap: '4px'\r\n              }}>\r\n                <i className=\"fas fa-exclamation-circle\"></i>\r\n                {errors.rank}\r\n              </div>\r\n            )}\r\n          </div>\r\n          \r\n          {isAdmin && (\r\n            <div style={{ marginBottom: '24px' }}>\r\n              <label style={{\r\n                display: 'block',\r\n                fontSize: '14px',\r\n                fontWeight: '600',\r\n                color: 'var(--color-text)',\r\n                marginBottom: '8px'\r\n              }}>\r\n                מיקום\r\n              </label>\r\n              <select \r\n                value={formData.locationId} \r\n                onChange={e => handleInputChange('locationId', e.target.value)} \r\n                disabled={managementLoading}\r\n                style={{\r\n                  width: '100%',\r\n                  padding: '12px 16px',\r\n                  background: 'var(--color-surface)',\r\n                  border: `1px solid ${errors.locationId ? '#ef4444' : 'var(--color-border)'}`,\r\n                  borderRadius: '8px',\r\n                  color: 'var(--color-text)',\r\n                  fontSize: '14px',\r\n                  transition: 'all 0.2s ease',\r\n                  outline: 'none',\r\n                  appearance: 'none',\r\n                  paddingLeft: '16px',\r\n                  cursor: 'pointer'\r\n                }}\r\n                onFocus={(e) => {\r\n                  (e.target as HTMLSelectElement).style.borderColor = 'var(--color-primary)';\r\n                  (e.target as HTMLSelectElement).style.background = 'var(--color-bg-hover)';\r\n                }}\r\n                onBlur={(e) => {\r\n                  (e.target as HTMLSelectElement).style.borderColor = errors.locationId ? '#ef4444' : 'var(--color-border)';\r\n                  (e.target as HTMLSelectElement).style.background = 'var(--color-surface)';\r\n                }}\r\n              >\r\n                <option value=\"\" style={{\r\n                  background: 'var(--color-surface)',\r\n                  color: 'var(--color-text-muted)'\r\n                }}>\r\n                  בחר מיקום\r\n                </option>\r\n                {availableLocations.map(location => (\r\n                  <option \r\n                    key={location.id} \r\n                    value={location.id}\r\n                    style={{\r\n                      background: 'var(--color-surface)',\r\n                      color: 'var(--color-text)'\r\n                    }}\r\n                  >\r\n                    {location.name}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n              {errors.locationId && (\r\n                <div style={{\r\n                  color: '#ef4444',\r\n                  fontSize: '12px',\r\n                  marginTop: '4px',\r\n                  display: 'flex',\r\n                  alignItems: 'center',\r\n                  gap: '4px'\r\n                }}>\r\n                  <i className=\"fas fa-exclamation-circle\"></i>\r\n                  {errors.locationId}\r\n                </div>\r\n              )}\r\n              <div style={{\r\n                color: 'rgba(255, 255, 255, 0.6)',\r\n                fontSize: '12px',\r\n                marginTop: '4px'\r\n              }}>\r\n                רק מנהלים יכולים להקצות מיקום למשתמשים\r\n              </div>\r\n            </div>\r\n          )}\r\n          \r\n          {!isAdmin && user && user.location && (\r\n            <div style={{ marginBottom: '24px' }}>\r\n              <label style={{\r\n                display: 'block',\r\n                fontSize: '14px',\r\n                fontWeight: '600',\r\n                color: 'rgba(255, 255, 255, 0.9)',\r\n                marginBottom: '8px'\r\n              }}>\r\n                מיקום נוכחי\r\n              </label>\r\n              <input \r\n                type=\"text\"\r\n                value={user.location}\r\n                disabled\r\n                readOnly\r\n                style={{\r\n                  width: '100%',\r\n                  padding: '12px 16px',\r\n                  background: 'rgba(255, 255, 255, 0.05)',\r\n                  border: '1px solid rgba(255, 255, 255, 0.1)',\r\n                  borderRadius: '8px',\r\n                  color: 'rgba(255, 255, 255, 0.6)',\r\n                  fontSize: '14px',\r\n                  cursor: 'not-allowed'\r\n                }}\r\n              />\r\n              <div style={{\r\n                color: 'rgba(255, 255, 255, 0.6)',\r\n                fontSize: '12px',\r\n                marginTop: '4px'\r\n              }}>\r\n                פנה למנהל המערכת לשינוי מיקום\r\n              </div>\r\n            </div>\r\n          )}\r\n          \r\n          {!isAdmin && user && !user.location && (\r\n            <div style={{\r\n              background: 'linear-gradient(135deg, rgba(245, 158, 11, 0.1), rgba(217, 119, 6, 0.05))',\r\n              borderRadius: '12px',\r\n              border: '1px solid rgba(245, 158, 11, 0.2)',\r\n              padding: '16px',\r\n              marginBottom: '24px',\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              gap: '12px'\r\n            }}>\r\n              <i className=\"fas fa-exclamation-triangle\" style={{ color: '#f59e0b', fontSize: '16px' }}></i>\r\n              <span style={{ color: 'rgba(255, 255, 255, 0.9)' }}>\r\n                לא הוקצה מיקום עדיין. פנה למנהל המערכת להקצאת מיקום.\r\n              </span>\r\n            </div>\r\n          )}\r\n          \r\n          {isAdmin && user && (\r\n            <>\r\n              <div style={{ marginBottom: '24px' }}>\r\n                <div style={{\r\n                  background: 'rgba(255, 255, 255, 0.05)',\r\n                  borderRadius: '12px',\r\n                  border: '1px solid rgba(255, 255, 255, 0.1)',\r\n                  padding: '16px',\r\n                  transition: 'all 0.2s ease'\r\n                }}>\r\n                  <label style={{\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    cursor: 'pointer',\r\n                    gap: '12px'\r\n                  }}>\r\n                    <div style={{ position: 'relative' }}>\r\n                      <input\r\n                        type=\"checkbox\"\r\n                        checked={formData.isAdmin || false}\r\n                        onChange={e => handleInputChange('isAdmin', e.target.checked)}\r\n                        style={{\r\n                          position: 'absolute',\r\n                          opacity: 0,\r\n                          cursor: 'pointer'\r\n                        }}\r\n                      />\r\n                      <div style={{\r\n                        width: '20px',\r\n                        height: '20px',\r\n                        borderRadius: '4px',\r\n                        border: '2px solid rgba(255, 255, 255, 0.3)',\r\n                        background: formData.isAdmin ? 'linear-gradient(135deg, #ef4444, #dc2626)' : 'rgba(255, 255, 255, 0.1)',\r\n                        display: 'flex',\r\n                        alignItems: 'center',\r\n                        justifyContent: 'center',\r\n                        transition: 'all 0.2s ease'\r\n                      }}>\r\n                        {formData.isAdmin && (\r\n                          <i className=\"fas fa-check\" style={{ \r\n                            color: 'white', \r\n                            fontSize: '12px' \r\n                          }}></i>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                    <div>\r\n                      <div style={{\r\n                        color: 'rgba(255, 255, 255, 0.9)',\r\n                        fontWeight: '600',\r\n                        fontSize: '14px'\r\n                      }}>\r\n                        מנהל מערכת?\r\n                      </div>\r\n                      <div style={{\r\n                        color: 'rgba(255, 255, 255, 0.6)',\r\n                        fontSize: '12px'\r\n                      }}>\r\n                        האם המשתמש הוא מנהל מערכת?\r\n                      </div>\r\n                    </div>\r\n                  </label>\r\n                </div>\r\n              </div>\r\n\r\n              <div style={{ marginBottom: '24px' }}>\r\n                <div style={{\r\n                  background: 'rgba(255, 255, 255, 0.05)',\r\n                  borderRadius: '12px',\r\n                  border: '1px solid rgba(255, 255, 255, 0.1)',\r\n                  padding: '16px',\r\n                  transition: 'all 0.2s ease'\r\n                }}>\r\n                  <label style={{\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    cursor: 'pointer',\r\n                    gap: '12px'\r\n                  }}>\r\n                    <div style={{ position: 'relative' }}>\r\n                      <input\r\n                        type=\"checkbox\"\r\n                        checked={formData.isAdminInUnit || false}\r\n                        onChange={e => handleInputChange('isAdminInUnit', e.target.checked)}\r\n                        style={{\r\n                          position: 'absolute',\r\n                          opacity: 0,\r\n                          cursor: 'pointer'\r\n                        }}\r\n                      />\r\n                      <div style={{\r\n                        width: '20px',\r\n                        height: '20px',\r\n                        borderRadius: '4px',\r\n                        border: '2px solid rgba(255, 255, 255, 0.3)',\r\n                        background: formData.isAdminInUnit ? 'linear-gradient(135deg, #3b82f6, #1d4ed8)' : 'rgba(255, 255, 255, 0.1)',\r\n                        display: 'flex',\r\n                        alignItems: 'center',\r\n                        justifyContent: 'center',\r\n                        transition: 'all 0.2s ease'\r\n                      }}>\r\n                        {formData.isAdminInUnit && (\r\n                          <i className=\"fas fa-check\" style={{ \r\n                            color: 'white', \r\n                            fontSize: '12px' \r\n                          }}></i>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                    <div>\r\n                      <div style={{\r\n                        color: 'rgba(255, 255, 255, 0.9)',\r\n                        fontWeight: '600',\r\n                        fontSize: '14px'\r\n                      }}>\r\n                        מנהל יחידה?\r\n                      </div>\r\n                      <div style={{\r\n                        color: 'rgba(255, 255, 255, 0.6)',\r\n                        fontSize: '12px'\r\n                      }}>\r\n                        האם המשתמש הוא מנהל ביחידה שלו?\r\n                      </div>\r\n                    </div>\r\n                  </label>\r\n                </div>\r\n              </div>\r\n            </>\r\n          )}\r\n\r\n          <div style={{\r\n            display: 'flex',\r\n            justifyContent: 'flex-end',\r\n            gap: '12px',\r\n            marginTop: '32px',\r\n            paddingTop: '24px',\r\n            borderTop: '1px solid rgba(255, 255, 255, 0.1)'\r\n          }}>\r\n            <button \r\n              type=\"button\" \r\n              onClick={onCancel}\r\n              style={{\r\n                background: 'rgba(255, 255, 255, 0.1)',\r\n                border: '1px solid rgba(255, 255, 255, 0.2)',\r\n                borderRadius: '8px',\r\n                padding: '12px 24px',\r\n                color: 'rgba(255, 255, 255, 0.8)',\r\n                fontSize: '14px',\r\n                fontWeight: '600',\r\n                cursor: 'pointer',\r\n                transition: 'all 0.2s ease'\r\n              }}\r\n              onMouseEnter={(e) => {\r\n                (e.target as HTMLButtonElement).style.background = 'rgba(255, 255, 255, 0.15)';\r\n              }}\r\n              onMouseLeave={(e) => {\r\n                (e.target as HTMLButtonElement).style.background = 'rgba(255, 255, 255, 0.1)';\r\n              }}\r\n            >\r\n              ביטול\r\n            </button>\r\n            <button \r\n              type=\"submit\" \r\n              disabled={isSubmitting}\r\n              style={{\r\n                background: isSubmitting ? 'rgba(255, 255, 255, 0.1)' : 'linear-gradient(135deg, #3b82f6, #1d4ed8)',\r\n                border: 'none',\r\n                borderRadius: '8px',\r\n                padding: '12px 24px',\r\n                color: 'white',\r\n                fontSize: '14px',\r\n                fontWeight: '600',\r\n                cursor: isSubmitting ? 'not-allowed' : 'pointer',\r\n                transition: 'all 0.2s ease',\r\n                boxShadow: isSubmitting ? 'none' : '0 4px 16px rgba(59, 130, 246, 0.3)'\r\n              }}\r\n            >\r\n              {isSubmitting ? 'שומר...' : 'שמור'}\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n\r\n      <ConflictErrorModal \r\n        isOpen={showConflictModal} \r\n        onClose={() => setShowConflictModal(false)}\r\n        title=\"התנגשות נתונים\"\r\n        message=\"משתמש עם מספר אישי זה כבר קיים במערכת או שאין לך הרשאה לעדכון.\"\r\n        resolutionMessage={`בדוק אם המשתמש כבר קיים במערכת עם אותו מספר אישי.\\nבמידת הצורך, פנה למנהל המערכת כדי לקבל הרשאות מתאימות.`}\r\n        type=\"user\"\r\n      />\r\n\r\n      <ConflictErrorModal \r\n        isOpen={showLastAdminModal} \r\n        onClose={() => setShowLastAdminModal(false)}\r\n        title=\"שגיאת הרשאות\"\r\n        message=\"לא ניתן להסיר הרשאות מנהל מהמשתמש האחרון בעל הרשאות מנהל במערכת.\"\r\n        resolutionMessage=\"חייב להישאר לפחות מנהל אחד במערכת. הוסף מנהל נוסף לפני הסרת ההרשאות מהמשתמש הנוכחי.\"\r\n        type=\"user\"\r\n      />\r\n\r\n      <NotificationModal\r\n        isOpen={notification.isOpen}\r\n        onClose={closeNotification}\r\n        type={notification.type}\r\n        message={notification.message}\r\n        title={notification.title}\r\n      />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default UserForm;\r\n","import React, { useState } from 'react';\r\nimport { ServerError, ConflictErrorModal, BulkDeleteErrorModal, SmartPagination, LoadingSpinner, NotificationModal, SelectionToolbar, SearchInput } from '../../shared/components';\r\nimport Modal from '../../shared/components/Modal';\r\nimport UserForm from './UserForm';\r\nimport { useUsers, useModernTableSelection } from '../../hooks';\r\nimport { User } from '../../types';\r\nimport { paginate, getConflictResolutionMessage } from '../../utils';\r\nimport { UI_CONFIG } from '../../config/app.config';\r\nimport type { NotificationType } from '../../shared/components/NotificationModal';\r\n\r\ninterface UsersTabProps {\r\n  isAdmin?: boolean;\r\n}\r\n\r\nconst UsersTab: React.FC<UsersTabProps> = ({ isAdmin = false }) => {\r\n  const { users, loading, error, deleteManyUsers, refetch } = useUsers();\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [selectedUser, setSelectedUser] = useState<User | null>(null);\r\n  const [isModalOpen, setIsModalOpen] = useState(false);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [sortConfig, setSortConfig] = useState<{\r\n    key: string;\r\n    direction: 'asc' | 'desc';\r\n  } | null>(null);\r\n  const [conflictError, setConflictError] = useState<{\r\n    isOpen: boolean;\r\n    message: string;\r\n    userName: string;\r\n  }>({\r\n    isOpen: false,\r\n    message: '',\r\n    userName: '',\r\n  });\r\n\r\n  const [bulkDeleteError, setBulkDeleteError] = useState<{\r\n    isOpen: boolean;\r\n    message: string;\r\n    deletedCount: number;\r\n    totalCount: number;\r\n    errors: string[];\r\n  }>({\r\n    isOpen: false,\r\n    message: '',\r\n    deletedCount: 0,\r\n    totalCount: 0,\r\n    errors: [],\r\n  });\r\n\r\n  const [notification, setNotification] = useState<{\r\n    isOpen: boolean;\r\n    type: NotificationType;\r\n    message: string;\r\n    title?: string;\r\n  }>({\r\n    isOpen: false,\r\n    type: 'info',\r\n    message: ''\r\n  });\r\n\r\n  const showNotification = (type: NotificationType, message: string, title?: string) => {\r\n    setNotification({\r\n      isOpen: true,\r\n      type,\r\n      message,\r\n      title\r\n    });\r\n  };\r\n\r\n  const closeNotification = () => {\r\n    setNotification(prev => ({ ...prev, isOpen: false }));\r\n  };\r\n\r\n  const handleSort = (key: string) => {\r\n    let direction: 'asc' | 'desc' = 'asc';\r\n    if (sortConfig && sortConfig.key === key && sortConfig.direction === 'asc') {\r\n      direction = 'desc';\r\n    }\r\n    setSortConfig({ key, direction });\r\n  };\r\n\r\n  // Filter and sort users based on search term and sort config\r\n  const filteredAndSortedUsers = (() => {\r\n    const normalizedSearchTerm = searchTerm.toLowerCase().normalize('NFC');\r\n    let filtered = users.filter(user => \r\n      user.name.toLowerCase().normalize('NFC').includes(normalizedSearchTerm) ||\r\n      user.personalNumber.toString().includes(searchTerm) ||\r\n      user.phoneNumber.toLowerCase().normalize('NFC').includes(normalizedSearchTerm) ||\r\n      user.location.toLowerCase().normalize('NFC').includes(normalizedSearchTerm) ||\r\n      user.unit.toLowerCase().normalize('NFC').includes(normalizedSearchTerm) ||\r\n      user.rank.toLowerCase().normalize('NFC').includes(normalizedSearchTerm) ||\r\n      (user.isAdmin && 'מנהל'.normalize('NFC').includes(normalizedSearchTerm)) ||\r\n      (!user.isAdmin && 'משתמש'.normalize('NFC').includes(normalizedSearchTerm))\r\n    );\r\n\r\n    if (sortConfig) {\r\n      filtered = [...filtered].sort((a, b) => {\r\n        let aValue: any;\r\n        let bValue: any;\r\n\r\n        switch (sortConfig.key) {\r\n          case 'name':\r\n            aValue = a.name;\r\n            bValue = b.name;\r\n            break;\r\n          case 'personalNumber':\r\n            aValue = a.personalNumber;\r\n            bValue = b.personalNumber;\r\n            break;\r\n          case 'phoneNumber':\r\n            aValue = a.phoneNumber;\r\n            bValue = b.phoneNumber;\r\n            break;\r\n          case 'location':\r\n            aValue = a.location;\r\n            bValue = b.location;\r\n            break;\r\n          case 'unit':\r\n            aValue = a.unit;\r\n            bValue = b.unit;\r\n            break;\r\n          case 'rank':\r\n            aValue = a.rank;\r\n            bValue = b.rank;\r\n            break;\r\n          case 'isAdmin':\r\n            aValue = a.isAdmin ? 1 : 0; // Admin users first when ascending\r\n            bValue = b.isAdmin ? 1 : 0;\r\n            break;\r\n          default:\r\n            return 0;\r\n        }\r\n\r\n        if (typeof aValue === 'string' && typeof bValue === 'string') {\r\n          return sortConfig.direction === 'asc' \r\n            ? aValue.localeCompare(bValue, 'he') \r\n            : bValue.localeCompare(aValue, 'he');\r\n        }\r\n\r\n        if (sortConfig.direction === 'asc') {\r\n          return aValue < bValue ? -1 : aValue > bValue ? 1 : 0;\r\n        } else {\r\n          return aValue > bValue ? -1 : aValue < bValue ? 1 : 0;\r\n        }\r\n      });\r\n    }\r\n\r\n    return filtered;\r\n  })();\r\n\r\n  const { paginatedItems: paginatedUsers, totalPages } = paginate(\r\n    filteredAndSortedUsers,\r\n    currentPage,\r\n    UI_CONFIG.TABLE_PAGE_SIZE\r\n  );\r\n\r\n  // Modern table selection\r\n  const {\r\n    selectedIds: selectedUserIds,\r\n    toggleSelection,\r\n    clearSelection,\r\n    selectAll,\r\n    hasSelection\r\n  } = useModernTableSelection({\r\n    items: filteredAndSortedUsers,\r\n    onSelectionChange: (ids) => {\r\n      // Optional: Handle selection changes\r\n    }\r\n  });\r\n\r\n  const handleCloseModal = () => {\r\n    setIsModalOpen(false);\r\n    setSelectedUser(null);\r\n  };\r\n\r\n  const handleSuccess = async () => {\r\n    handleCloseModal();\r\n    await refetch(); // Explicitly refresh the users list\r\n  };\r\n\r\n  const handleSelectUser = (user: User) => {\r\n    setSelectedUser(user);\r\n    setIsModalOpen(true);\r\n  };\r\n\r\n  // Reset page when search term changes\r\n  const handleSearchChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    setSearchTerm(e.target.value);\r\n    setCurrentPage(1);\r\n    clearSelection();\r\n  };\r\n\r\n  const handleBulkDelete = async () => {\r\n    if (selectedUserIds.length === 0) return;\r\n\r\n    const selectedUsers = users.filter(user => selectedUserIds.includes(user.id));\r\n    const userNames = selectedUsers.map(user => user.name).join(', ');\r\n    \r\n    if (!window.confirm(`האם אתה בטוח שברצונך למחוק את המשתמשים הבאים?\\n\\n${userNames}\\n\\n(${selectedUserIds.length} משתמשים)`)) return;\r\n\r\n    const result = await deleteManyUsers(selectedUserIds);\r\n    if (result.success) {\r\n      clearSelection();\r\n    } else if (result.isConflict && result.bulkError) {\r\n      // Show bulk delete error modal\r\n      setBulkDeleteError({\r\n        isOpen: true,\r\n        message: result.bulkError.message,\r\n        deletedCount: result.bulkError.deletedCount,\r\n        totalCount: selectedUserIds.length,\r\n        errors: result.bulkError.errors,\r\n      });\r\n      clearSelection();\r\n    } else if (result.isConflict) {\r\n      // Show regular conflict error modal\r\n      setConflictError({\r\n        isOpen: true,\r\n        message: result.error || 'שגיאת התנגשות במחיקת משתמשים',\r\n        userName: `${selectedUserIds.length} משתמשים`,\r\n      });\r\n    } else {\r\n      showNotification('error', `שגיאה במחיקת המשתמשים: ${result.error || 'שגיאה לא ידועה'}`);\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <LoadingSpinner message=\"טוען משתמשים...\" />\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return <ServerError />;\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {/* Compact Header with Actions */}\r\n      <div className=\"management-header-compact\">\r\n        <div className=\"management-search-section\">\r\n          <SearchInput\r\n            value={searchTerm}\r\n            onChange={(value) => handleSearchChange({ target: { value } } as React.ChangeEvent<HTMLInputElement>)}\r\n            placeholder=\"חפש משתמשים לפי שם, מספר אישי, טלפון, דרגה, מיקום, מסגרת או סוג משתמש...\"\r\n            resultsCount={filteredAndSortedUsers.length}\r\n            resultsLabel=\"משתמשים\"\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      {/* Modern Selection Toolbar */}\r\n      <SelectionToolbar\r\n        selectedCount={selectedUserIds.length}\r\n        totalCount={paginatedUsers.length}\r\n        onDelete={selectedUserIds.length > 0 ? handleBulkDelete : undefined}\r\n        onClear={clearSelection}\r\n        onSelectAll={selectAll}\r\n        isVisible={hasSelection}\r\n        deleteLabel=\"מחק משתמשים\"\r\n        isDeleting={false}\r\n      />\r\n\r\n      <div className=\"unified-table-container\">\r\n        <table className=\"unified-table\">\r\n          <thead>\r\n            <tr>\r\n              <th \r\n                className=\"unified-table-header unified-table-header-regular\" \r\n                onClick={() => handleSort('name')}\r\n                title=\"לחץ למיון לפי שם\"\r\n                data-sorted={sortConfig?.key === 'name' ? 'true' : 'false'}\r\n              >\r\n                <div className=\"d-flex align-items-center\">\r\n                  <span>שם</span>\r\n                </div>\r\n              </th>\r\n                <th \r\n                  className=\"unified-table-header unified-table-header-regular\" \r\n                  onClick={() => handleSort('personalNumber')}\r\n                  title=\"לחץ למיון לפי מספר אישי\"\r\n                  data-sorted={sortConfig?.key === 'personalNumber' ? 'true' : 'false'}\r\n                >\r\n                  <div className=\"d-flex align-items-center\">\r\n                    <span>מספר אישי</span>\r\n                  </div>\r\n                </th>\r\n                <th \r\n                  className=\"unified-table-header unified-table-header-regular\" \r\n                  onClick={() => handleSort('phoneNumber')}\r\n                  title=\"לחץ למיון לפי טלפון\"\r\n                  data-sorted={sortConfig?.key === 'phoneNumber' ? 'true' : 'false'}\r\n                >\r\n                  <div className=\"d-flex align-items-center\">\r\n                    <span>טלפון</span>\r\n                  </div>\r\n                </th>\r\n                <th \r\n                  className=\"unified-table-header unified-table-header-regular\" \r\n                  onClick={() => handleSort('rank')}\r\n                  title=\"לחץ למיון לפי דרגה\"\r\n                  data-sorted={sortConfig?.key === 'rank' ? 'true' : 'false'}\r\n                >\r\n                  <div className=\"d-flex align-items-center\">\r\n                    <span>דרגה</span>\r\n                  </div>\r\n                </th>\r\n                <th \r\n                  className=\"unified-table-header unified-table-header-regular\" \r\n                  onClick={() => handleSort('unit')}\r\n                  title=\"לחץ למיון לפי מסגרת\"\r\n                  data-sorted={sortConfig?.key === 'unit' ? 'true' : 'false'}\r\n                >\r\n                  <div className=\"d-flex align-items-center\">\r\n                    <span>מסגרת</span>\r\n                  </div>\r\n                </th>\r\n                <th \r\n                  className=\"unified-table-header unified-table-header-regular\" \r\n                  onClick={() => handleSort('location')}\r\n                  title=\"לחץ למיון לפי מיקום\"\r\n                  data-sorted={sortConfig?.key === 'location' ? 'true' : 'false'}\r\n                >\r\n                  <div className=\"d-flex align-items-center\">\r\n                    <span>מיקום</span>\r\n                  </div>\r\n                </th>\r\n                <th \r\n                  className=\"unified-table-header unified-table-header-regular\" \r\n                  onClick={() => handleSort('isAdmin')}\r\n                  title=\"לחץ למיון לפי סוג משתמש\"\r\n                  data-sorted={sortConfig?.key === 'isAdmin' ? 'true' : 'false'}\r\n                >\r\n                  <div className=\"d-flex align-items-center\">\r\n                    <span>סוג משתמש</span>\r\n                  </div>\r\n                </th>\r\n                <th className=\"unified-table-header unified-table-header-regular\">פעולות</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {paginatedUsers.map((user: User, index: number) => (\r\n                <tr \r\n                  key={user.id} \r\n                  className={`unified-table-row selectable ${selectedUserIds.includes(user.id) ? 'selected' : ''}`}\r\n                  onClick={(e) => {\r\n                    // Don't trigger selection when clicking on action buttons\r\n                    if ((e.target as HTMLElement).closest('.unified-action-btn')) {\r\n                      return;\r\n                    }\r\n                    toggleSelection(user.id, e, index);\r\n                  }}\r\n                  title=\"לחץ לבחירה • Ctrl+לחץ לבחירה מרובה\"\r\n                >\r\n                  <td className=\"unified-table-cell\">{user.name}</td>\r\n                  <td className=\"unified-table-cell\">{user.personalNumber}</td>\r\n                  <td className=\"unified-table-cell\">{user.phoneNumber}</td>\r\n                  <td className=\"unified-table-cell\">{user.rank}</td>\r\n                  <td className=\"unified-table-cell\">{user.unit}</td>\r\n                  <td className=\"unified-table-cell\">{user.location}</td>\r\n                  <td className=\"unified-table-cell\">\r\n                    <span className={`unified-badge ${user.isAdmin ? 'unified-badge-success' : 'unified-badge-secondary'}`}>\r\n                      {user.isAdmin ? 'מנהל' : 'משתמש'}\r\n                    </span>\r\n                  </td>\r\n                  <td className=\"unified-table-cell\">\r\n                    <button \r\n                      className=\"unified-action-btn unified-action-btn-primary\" \r\n                      onClick={(e) => {\r\n                        e.stopPropagation();\r\n                        handleSelectUser(user);\r\n                      }}\r\n                    >\r\n                      עדכן\r\n                    </button>\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n\r\n        {totalPages > 1 && (\r\n          <SmartPagination\r\n            currentPage={currentPage}\r\n            totalPages={totalPages}\r\n            onPageChange={setCurrentPage}\r\n          />\r\n        )}\r\n\r\n      <Modal\r\n        isOpen={isModalOpen}\r\n        onClose={handleCloseModal}\r\n        title={selectedUser ? 'עדכן משתמש' : 'הוסף משתמש חדש'}\r\n        size=\"md\"\r\n      >\r\n        <UserForm\r\n          user={selectedUser}\r\n          isAdmin={isAdmin}\r\n          onSuccess={handleSuccess}\r\n          onCancel={handleCloseModal}\r\n        />\r\n      </Modal>\r\n\r\n      <ConflictErrorModal\r\n        isOpen={conflictError.isOpen}\r\n        onClose={() => setConflictError({ isOpen: false, message: '', userName: '' })}\r\n        title={`לא ניתן למחוק את המשתמש \"${conflictError.userName}\"`}\r\n        message={conflictError.message}\r\n        resolutionMessage={getConflictResolutionMessage('user')}\r\n        type=\"user\"\r\n      />\r\n\r\n      <BulkDeleteErrorModal\r\n        isOpen={bulkDeleteError.isOpen}\r\n        onClose={() => setBulkDeleteError({ \r\n          isOpen: false, \r\n          message: '', \r\n          deletedCount: 0, \r\n          totalCount: 0, \r\n          errors: [] \r\n        })}\r\n        title=\"תוצאות מחיקה מרובה - משתמשים\"\r\n        message={bulkDeleteError.message}\r\n        deletedCount={bulkDeleteError.deletedCount}\r\n        totalCount={bulkDeleteError.totalCount}\r\n        errors={bulkDeleteError.errors}\r\n        type=\"user\"\r\n      />\r\n\r\n      <NotificationModal\r\n        isOpen={notification.isOpen}\r\n        onClose={closeNotification}\r\n        type={notification.type}\r\n        message={notification.message}\r\n        title={notification.title}\r\n      />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default UsersTab;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { Item, CreateItemRequest } from '../../types';\r\nimport { useItems } from '../../hooks';\r\nimport { useManagement } from '../../contexts';\r\nimport { validateRequired, sanitizeInput, getConflictResolutionMessage } from '../../utils';\r\nimport { ConflictErrorModal, NotificationModal } from '../../shared/components';\r\nimport type { NotificationType } from '../../shared/components/NotificationModal';\r\nimport './ItemForm.css';\r\n\r\ninterface ItemFormProps {\r\n  item: Item | null;\r\n  isAdmin: boolean;\r\n  onSuccess: () => void;\r\n  onCancel: () => void;\r\n}\r\n\r\ninterface FormErrors {\r\n  name?: string;\r\n  idNumber?: string;\r\n  note?: string;\r\n}\r\n\r\nconst ItemForm: React.FC<ItemFormProps> = ({ item, isAdmin, onSuccess, onCancel }) => {\r\n  const { createItem, updateItem } = useItems();\r\n  const { \r\n    itemNames, \r\n    locations,\r\n    loading: managementLoading,\r\n    loadItemNames,\r\n    loadLocations\r\n  } = useManagement();\r\n  \r\n  const [formData, setFormData] = useState<CreateItemRequest>({\r\n    name: '',\r\n    idNumber: '',\r\n    note: '',\r\n    isOperational: true,\r\n    requiresReporting: false,\r\n    allocatedLocationId: '',\r\n  });\r\n  const [quantity, setQuantity] = useState<number>(1);\r\n  const [errors, setErrors] = useState<FormErrors>({});\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  const [conflictError, setConflictError] = useState<{\r\n    isOpen: boolean;\r\n    message: string;\r\n    itemName: string;\r\n  }>({\r\n    isOpen: false,\r\n    message: '',\r\n    itemName: ''\r\n  });\r\n\r\n  const [notification, setNotification] = useState<{\r\n    isOpen: boolean;\r\n    type: NotificationType;\r\n    message: string;\r\n    title?: string;\r\n  }>({\r\n    isOpen: false,\r\n    type: 'info',\r\n    message: ''\r\n  });\r\n\r\n  const showNotification = (type: NotificationType, message: string, title?: string) => {\r\n    setNotification({\r\n      isOpen: true,\r\n      type,\r\n      message,\r\n      title\r\n    });\r\n  };\r\n\r\n  const closeNotification = () => {\r\n    setNotification(prev => ({ ...prev, isOpen: false }));\r\n  };\r\n\r\n  // Load item names and locations when component mounts\r\n  useEffect(() => {\r\n    loadItemNames();\r\n    loadLocations();\r\n  }, [loadItemNames, loadLocations]);\r\n\r\n  useEffect(() => {\r\n    if (item) {\r\n      setFormData({\r\n        name: item.itemName?.name || '',\r\n        idNumber: item.idNumber || '',\r\n        note: item.note || '',\r\n        isOperational: item.isOperational ?? true,\r\n        requiresReporting: item.requiresReporting ?? false,\r\n        allocatedLocationId: item.allocatedLocationId || '',\r\n      });\r\n      // Reset quantity to 1 when editing existing item\r\n      setQuantity(1);\r\n    } else {\r\n      // Reset form data when creating new item\r\n      setFormData({\r\n        name: '',\r\n        idNumber: '',\r\n        note: '',\r\n        isOperational: true,\r\n        requiresReporting: false,\r\n        allocatedLocationId: '',\r\n      });\r\n      // Reset quantity when creating new item\r\n      setQuantity(1);\r\n    }\r\n  }, [item]);\r\n\r\n  const validateForm = (): boolean => {\r\n    const newErrors: FormErrors = {};\r\n\r\n    if (!validateRequired(formData.name || '')) {\r\n      newErrors.name = 'שם פריט חובה';\r\n    }\r\n\r\n    if (formData.requiresReporting && !validateRequired(formData.idNumber || '')) {\r\n      newErrors.idNumber = 'מספר צ\\' חובה עבור פריטים הדורשים דיווח';\r\n    }\r\n\r\n    setErrors(newErrors);\r\n    return Object.keys(newErrors).length === 0;\r\n  };\r\n\r\n  const handleInputChange = (field: keyof CreateItemRequest, value: string) => {\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      [field]: field === 'note' || field === 'name' || field === 'allocatedLocationId' ? value : sanitizeInput(value),\r\n    }));\r\n    \r\n    if (errors[field as keyof FormErrors]) {\r\n      setErrors(prev => ({\r\n        ...prev,\r\n        [field]: undefined,\r\n      }));\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    \r\n    if (!validateForm()) {\r\n      return;\r\n    }\r\n\r\n    setIsSubmitting(true);\r\n\r\n    try {\r\n      if (item?.id) {\r\n        // For updates, exclude quantity from the request body and handle idNumber properly\r\n        const { quantity: _, ...updateData } = formData;\r\n        \r\n        // If requiresReporting is false, remove idNumber entirely from the request body\r\n        if (!updateData.requiresReporting) {\r\n          delete updateData.idNumber;\r\n        }\r\n        \r\n        // Convert empty allocatedLocationId to null\r\n        if (updateData.allocatedLocationId === '') {\r\n          updateData.allocatedLocationId = null;\r\n        }\r\n        \r\n        const result = await updateItem(item.id, updateData);\r\n        \r\n        if (result.success) {\r\n          onSuccess();\r\n        } else if (result.isConflict) {\r\n          // Show translated error (403/409) in modal\r\n          setConflictError({\r\n            isOpen: true,\r\n            message: result.error || 'לא ניתן לעדכן פריט הקשור לקבלה חתומה',\r\n            itemName: formData.name || 'פריט לא ידוע'\r\n          });\r\n        } else {\r\n          showNotification('error', result.error || 'שגיאה בעדכון הפריט');\r\n        }\r\n      } else {\r\n        // Validate admin permissions for creating new items\r\n        if (!isAdmin) {\r\n          showNotification('error', 'רק מנהלים יכולים ליצור פריטים חדשים');\r\n          setIsSubmitting(false);\r\n          return;\r\n        }\r\n\r\n        // For creating new items, prepare the request data\r\n        const requestData = {\r\n          ...formData,\r\n          // Only include quantity if requiresReporting is false and quantity > 1\r\n          ...(!formData.requiresReporting && quantity > 1 ? { quantity } : {})\r\n        };\r\n        \r\n        // If requiresReporting is false, remove idNumber entirely from the request body\r\n        if (!requestData.requiresReporting) {\r\n          delete requestData.idNumber;\r\n        }\r\n        \r\n        // Convert empty allocatedLocationId to null\r\n        if (requestData.allocatedLocationId === '') {\r\n          requestData.allocatedLocationId = null;\r\n        }\r\n        \r\n        const result = await createItem(requestData as CreateItemRequest);\r\n        \r\n        if (result.success) {\r\n          if (!formData.requiresReporting && quantity > 1) {\r\n            showNotification('success', `נוצרו בהצלחה ${quantity} פריטים`);\r\n          }\r\n          onSuccess();\r\n        } else if (result.isConflict) {\r\n          setConflictError({\r\n            isOpen: true,\r\n            message: result.error || 'פריט עם מספר צ\\' זה כבר קיים במערכת',\r\n            itemName: formData.name || 'פריט לא ידוע'\r\n          });\r\n        } else {\r\n          showNotification('error', result.error || 'שגיאה בשמירת הפריט');\r\n        }\r\n      }\r\n    } catch (error) {\r\n      // Removed console.error to avoid noisy logs\r\n      showNotification('error', 'שגיאה בשמירת הפריט');\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div style={{\r\n        background: 'rgba(255, 255, 255, 0.05)',\r\n        borderRadius: '16px',\r\n        border: '1px solid rgba(255, 255, 255, 0.1)',\r\n        padding: '32px',\r\n        backdropFilter: 'blur(10px)',\r\n        maxWidth: '600px',\r\n        margin: '0 auto'\r\n      }}>\r\n        {!item && !isAdmin && (\r\n          <div style={{\r\n            background: 'linear-gradient(135deg, rgba(245, 158, 11, 0.1), rgba(217, 119, 6, 0.05))',\r\n            borderRadius: '12px',\r\n            border: '1px solid rgba(245, 158, 11, 0.2)',\r\n            padding: '16px',\r\n            marginBottom: '24px',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            gap: '12px'\r\n          }}>\r\n            <i className=\"fas fa-exclamation-triangle\" style={{ color: '#f59e0b', fontSize: '16px' }}></i>\r\n            <div>\r\n              <strong style={{ color: 'rgba(255, 255, 255, 0.9)' }}>הערה:</strong>\r\n              <span style={{ color: 'rgba(255, 255, 255, 0.8)', marginRight: '8px' }}>\r\n                רק מנהלי מערכת יכולים ליצור פריטים חדשים.\r\n              </span>\r\n            </div>\r\n          </div>\r\n        )}\r\n        \r\n        <form onSubmit={handleSubmit}>\r\n          <div style={{ marginBottom: '24px' }}>\r\n            <label style={{\r\n              display: 'block',\r\n              fontSize: '14px',\r\n              fontWeight: '600',\r\n              color: 'var(--color-text)',\r\n              marginBottom: '8px'\r\n            }}>\r\n              שם פריט <span style={{ color: '#ef4444' }}>*</span>\r\n            </label>\r\n            <select \r\n              value={formData.name} \r\n              onChange={e => handleInputChange('name', e.target.value)} \r\n              required\r\n              disabled={managementLoading}\r\n              style={{\r\n                width: '100%',\r\n                padding: '12px 16px',\r\n                background: 'var(--color-surface)',\r\n                border: `1px solid ${errors.name ? '#ef4444' : 'var(--color-border)'}`,\r\n                borderRadius: '8px',\r\n                color: 'var(--color-text)',\r\n                fontSize: '14px',\r\n                transition: 'all 0.2s ease',\r\n                outline: 'none',\r\n                appearance: 'none',\r\n                paddingLeft: '16px',\r\n                cursor: 'pointer'\r\n              }}\r\n              onFocus={(e) => {\r\n                e.target.style.borderColor = 'var(--color-primary)';\r\n                e.target.style.background = 'var(--color-bg-hover)';\r\n              }}\r\n              onBlur={(e) => {\r\n                e.target.style.borderColor = errors.name ? '#ef4444' : 'var(--color-border)';\r\n                e.target.style.background = 'var(--color-surface)';\r\n              }}\r\n            >\r\n              <option value=\"\" style={{\r\n                background: 'var(--color-surface)',\r\n                color: 'var(--color-text-muted)'\r\n              }}>\r\n                בחר שם פריט\r\n              </option>\r\n              {itemNames.map(itemName => (\r\n                <option \r\n                  key={itemName.id} \r\n                  value={itemName.name}\r\n                  style={{\r\n                    background: 'var(--color-surface)',\r\n                    color: 'var(--color-text)'\r\n                  }}\r\n                >\r\n                  {itemName.name}\r\n                </option>\r\n              ))}\r\n            </select>\r\n            {errors.name && (\r\n              <div style={{\r\n                color: '#ef4444',\r\n                fontSize: '12px',\r\n                marginTop: '4px',\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                gap: '4px'\r\n              }}>\r\n                <i className=\"fas fa-exclamation-circle\"></i>\r\n                {errors.name}\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          <div style={{ marginBottom: '24px' }}>\r\n            <label style={{\r\n              display: 'block',\r\n              fontSize: '14px',\r\n              fontWeight: '600',\r\n              color: 'var(--color-text)',\r\n              marginBottom: '8px'\r\n            }}>\r\n              מיקום מוקצה (אופציונלי)\r\n            </label>\r\n            <select \r\n              value={formData.allocatedLocationId || ''} \r\n              onChange={e => handleInputChange('allocatedLocationId', e.target.value)} \r\n              disabled={managementLoading}\r\n              style={{\r\n                width: '100%',\r\n                padding: '12px 16px',\r\n                background: 'var(--color-surface)',\r\n                border: '1px solid var(--color-border)',\r\n                borderRadius: '8px',\r\n                color: 'var(--color-text)',\r\n                fontSize: '14px',\r\n                transition: 'all 0.2s ease',\r\n                outline: 'none',\r\n                appearance: 'none',\r\n                paddingLeft: '16px',\r\n                cursor: 'pointer'\r\n              }}\r\n              onFocus={(e) => {\r\n                (e.target as HTMLSelectElement).style.borderColor = 'var(--color-primary)';\r\n                (e.target as HTMLSelectElement).style.background = 'var(--color-bg-hover)';\r\n              }}\r\n              onBlur={(e) => {\r\n                (e.target as HTMLSelectElement).style.borderColor = 'var(--color-border)';\r\n                (e.target as HTMLSelectElement).style.background = 'var(--color-surface)';\r\n              }}\r\n            >\r\n              <option value=\"\" style={{\r\n                background: 'var(--color-surface)',\r\n                color: 'var(--color-text-muted)'\r\n              }}>\r\n                ללא מיקום מוקצה\r\n              </option>\r\n              {locations.map(location => (\r\n                <option \r\n                  key={location.id} \r\n                  value={location.id}\r\n                  style={{\r\n                    background: 'var(--color-surface)',\r\n                    color: 'var(--color-text)'\r\n                  }}\r\n                >\r\n                  {location.name}\r\n                </option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n\r\n        <div style={{ marginBottom: '24px' }}>\r\n          <div style={{\r\n            background: 'rgba(255, 255, 255, 0.05)',\r\n            borderRadius: '12px',\r\n            border: '1px solid rgba(255, 255, 255, 0.1)',\r\n            padding: '16px',\r\n            transition: 'all 0.2s ease'\r\n          }}>\r\n            <label style={{\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              cursor: 'pointer',\r\n              gap: '12px'\r\n            }}>\r\n              <div style={{ position: 'relative' }}>\r\n                <input\r\n                  type=\"checkbox\"\r\n                  checked={formData.isOperational}\r\n                  onChange={e => setFormData(prev => ({ ...prev, isOperational: e.target.checked }))}\r\n                  style={{\r\n                    position: 'absolute',\r\n                    opacity: 0,\r\n                    cursor: 'pointer'\r\n                  }}\r\n                />\r\n                <div style={{\r\n                  width: '20px',\r\n                  height: '20px',\r\n                  borderRadius: '4px',\r\n                  border: '2px solid rgba(255, 255, 255, 0.3)',\r\n                  background: formData.isOperational ? 'linear-gradient(135deg, #10b981, #059669)' : 'rgba(255, 255, 255, 0.1)',\r\n                  display: 'flex',\r\n                  alignItems: 'center',\r\n                  justifyContent: 'center',\r\n                  transition: 'all 0.2s ease'\r\n                }}>\r\n                  {formData.isOperational && (\r\n                    <i className=\"fas fa-check\" style={{ \r\n                      color: 'white', \r\n                      fontSize: '12px' \r\n                    }}></i>\r\n                  )}\r\n                </div>\r\n              </div>\r\n              <div>\r\n                <div style={{\r\n                  color: 'rgba(255, 255, 255, 0.9)',\r\n                  fontWeight: '600',\r\n                  fontSize: '14px'\r\n                }}>\r\n                  תקין?\r\n                </div>\r\n                <div style={{\r\n                  color: 'rgba(255, 255, 255, 0.6)',\r\n                  fontSize: '12px'\r\n                }}>\r\n                  האם הפריט תקין?\r\n                </div>\r\n              </div>\r\n            </label>\r\n          </div>\r\n        </div>\r\n\r\n        <div style={{ marginBottom: '24px' }}>\r\n          <div style={{\r\n            background: 'rgba(255, 255, 255, 0.05)',\r\n            borderRadius: '12px',\r\n            border: '1px solid rgba(255, 255, 255, 0.1)',\r\n            padding: '16px',\r\n            transition: 'all 0.2s ease'\r\n          }}>\r\n            <label style={{\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              cursor: 'pointer',\r\n              gap: '12px'\r\n            }}>\r\n              <div style={{ position: 'relative' }}>\r\n                <input\r\n                  type=\"checkbox\"\r\n                  checked={formData.requiresReporting}\r\n                  onChange={e => setFormData(prev => ({ \r\n                    ...prev, \r\n                    requiresReporting: e.target.checked,\r\n                    idNumber: e.target.checked ? prev.idNumber : ''\r\n                  }))}\r\n                  style={{\r\n                    position: 'absolute',\r\n                    opacity: 0,\r\n                    cursor: 'pointer'\r\n                  }}\r\n                />\r\n                <div style={{\r\n                  width: '20px',\r\n                  height: '20px',\r\n                  borderRadius: '4px',\r\n                  border: '2px solid rgba(255, 255, 255, 0.3)',\r\n                  background: formData.requiresReporting ? 'linear-gradient(135deg, #3b82f6, #1d4ed8)' : 'rgba(255, 255, 255, 0.1)',\r\n                  display: 'flex',\r\n                  alignItems: 'center',\r\n                  justifyContent: 'center',\r\n                  transition: 'all 0.2s ease'\r\n                }}>\r\n                  {formData.requiresReporting && (\r\n                    <i className=\"fas fa-check\" style={{ \r\n                      color: 'white', \r\n                      fontSize: '12px' \r\n                    }}></i>\r\n                  )}\r\n                </div>\r\n              </div>\r\n              <div>\r\n                <div style={{\r\n                  color: 'rgba(255, 255, 255, 0.9)',\r\n                  fontWeight: '600',\r\n                  fontSize: '14px'\r\n                }}>\r\n                  צופן?\r\n                </div>\r\n                <div style={{\r\n                  color: 'rgba(255, 255, 255, 0.6)',\r\n                  fontSize: '12px'\r\n                }}>\r\n                  האם הפריט דורש דיווח?\r\n                </div>\r\n              </div>\r\n            </label>\r\n          </div>\r\n        </div>\r\n\r\n        {/* ID Number field - only when requiresReporting is true */}\r\n        {formData.requiresReporting && (\r\n          <div style={{ marginBottom: '24px' }}>\r\n            <label style={{\r\n              display: 'block',\r\n              fontSize: '14px',\r\n              fontWeight: '600',\r\n              color: 'rgba(255, 255, 255, 0.9)',\r\n              marginBottom: '8px'\r\n            }}>\r\n              מספר צ' <span style={{ color: '#ef4444' }}>*</span>\r\n            </label>\r\n            <input \r\n              type=\"text\"\r\n              value={formData.idNumber || ''} \r\n              onChange={e => handleInputChange('idNumber', e.target.value)} \r\n              placeholder=\"הזן מספר צ'\"\r\n              required={formData.requiresReporting}\r\n              style={{\r\n                width: '100%',\r\n                padding: '12px 16px',\r\n                background: 'rgba(255, 255, 255, 0.1)',\r\n                border: `1px solid ${errors.idNumber ? '#ef4444' : 'rgba(255, 255, 255, 0.2)'}`,\r\n                borderRadius: '8px',\r\n                color: 'rgba(255, 255, 255, 0.9)',\r\n                fontSize: '14px',\r\n                transition: 'all 0.2s ease',\r\n                outline: 'none'\r\n              }}\r\n              onFocus={(e) => {\r\n                e.target.style.borderColor = 'rgba(59, 130, 246, 0.5)';\r\n                e.target.style.background = 'rgba(255, 255, 255, 0.15)';\r\n              }}\r\n              onBlur={(e) => {\r\n                e.target.style.borderColor = errors.idNumber ? '#ef4444' : 'rgba(255, 255, 255, 0.2)';\r\n                e.target.style.background = 'rgba(255, 255, 255, 0.1)';\r\n              }}\r\n            />\r\n            {errors.idNumber && (\r\n              <div style={{\r\n                color: '#ef4444',\r\n                fontSize: '12px',\r\n                marginTop: '4px',\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                gap: '4px'\r\n              }}>\r\n                <i className=\"fas fa-exclamation-circle\"></i>\r\n                {errors.idNumber}\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n\r\n        {/* Quantity selector - only for new items and when requiresReporting is false */}\r\n        {!item && !formData.requiresReporting && (\r\n          <div style={{ marginBottom: '24px' }}>\r\n            <label style={{\r\n              display: 'block',\r\n              fontSize: '14px',\r\n              fontWeight: '600',\r\n              color: 'rgba(255, 255, 255, 0.9)',\r\n              marginBottom: '8px'\r\n            }}>\r\n              כמות ליצירה\r\n            </label>\r\n            <div style={{ display: 'flex', alignItems: 'center', gap: '12px' }}>\r\n              <input\r\n                type=\"number\"\r\n                value={quantity}\r\n                onChange={(e) => {\r\n                  const value = parseInt(e.target.value) || 1;\r\n                  setQuantity(Math.max(1, Math.min(100, value)));\r\n                }}\r\n                min=\"1\"\r\n                max=\"100\"\r\n                placeholder=\"1\"\r\n                style={{\r\n                  width: '100px',\r\n                  padding: '12px 16px',\r\n                  background: 'rgba(255, 255, 255, 0.1)',\r\n                  border: '1px solid rgba(255, 255, 255, 0.2)',\r\n                  borderRadius: '8px',\r\n                  color: 'rgba(255, 255, 255, 0.9)',\r\n                  fontSize: '14px',\r\n                  transition: 'all 0.2s ease',\r\n                  outline: 'none',\r\n                  textAlign: 'center',\r\n                  direction: 'ltr'\r\n                }}\r\n                onFocus={(e) => {\r\n                  e.target.style.borderColor = 'rgba(59, 130, 246, 0.5)';\r\n                  e.target.style.background = 'rgba(255, 255, 255, 0.15)';\r\n                }}\r\n                onBlur={(e) => {\r\n                  e.target.style.borderColor = 'rgba(255, 255, 255, 0.2)';\r\n                  e.target.style.background = 'rgba(255, 255, 255, 0.1)';\r\n                }}\r\n              />\r\n              <span style={{ \r\n                color: 'rgba(255, 255, 255, 0.6)', \r\n                fontSize: '13px' \r\n              }}>\r\n                פריטים (1-100)\r\n              </span>\r\n            </div>\r\n          </div>\r\n        )}\r\n        \r\n        <div style={{ marginBottom: '24px' }}>\r\n          <label style={{\r\n            display: 'block',\r\n            fontSize: '14px',\r\n            fontWeight: '600',\r\n            color: 'rgba(255, 255, 255, 0.9)',\r\n            marginBottom: '8px'\r\n          }}>\r\n            הערה\r\n          </label>\r\n          <textarea \r\n            value={formData.note || ''} \r\n            onChange={e => handleInputChange('note', e.target.value)} \r\n            rows={3}\r\n            style={{\r\n              width: '100%',\r\n              padding: '12px 16px',\r\n              background: 'rgba(255, 255, 255, 0.1)',\r\n              border: `1px solid ${errors.note ? '#ef4444' : 'rgba(255, 255, 255, 0.2)'}`,\r\n              borderRadius: '8px',\r\n              color: 'rgba(255, 255, 255, 0.9)',\r\n              fontSize: '14px',\r\n              transition: 'all 0.2s ease',\r\n              outline: 'none',\r\n              resize: 'vertical',\r\n              minHeight: '80px',\r\n              maxHeight: '120px',\r\n              fontFamily: 'inherit'\r\n            }}\r\n            onFocus={(e) => {\r\n              (e.target as HTMLTextAreaElement).style.borderColor = 'rgba(59, 130, 246, 0.5)';\r\n              (e.target as HTMLTextAreaElement).style.background = 'rgba(255, 255, 255, 0.15)';\r\n            }}\r\n            onBlur={(e) => {\r\n              (e.target as HTMLTextAreaElement).style.borderColor = errors.note ? '#ef4444' : 'rgba(255, 255, 255, 0.2)';\r\n              (e.target as HTMLTextAreaElement).style.background = 'rgba(255, 255, 255, 0.1)';\r\n            }}\r\n          />\r\n          {errors.note && (\r\n            <div style={{\r\n              color: '#ef4444',\r\n              fontSize: '12px',\r\n              marginTop: '4px',\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              gap: '4px'\r\n            }}>\r\n              <i className=\"fas fa-exclamation-circle\"></i>\r\n              {errors.note}\r\n            </div>\r\n          )}\r\n        </div>\r\n        \r\n          <div style={{\r\n            display: 'flex',\r\n            justifyContent: 'flex-end',\r\n            gap: '12px',\r\n            marginTop: '32px',\r\n            paddingTop: '24px',\r\n            borderTop: '1px solid rgba(255, 255, 255, 0.1)'\r\n          }}>\r\n            <button \r\n              type=\"button\" \r\n              onClick={onCancel}\r\n              style={{\r\n                background: 'rgba(255, 255, 255, 0.1)',\r\n                border: '1px solid rgba(255, 255, 255, 0.2)',\r\n                borderRadius: '8px',\r\n                padding: '12px 24px',\r\n                color: 'rgba(255, 255, 255, 0.8)',\r\n                fontSize: '14px',\r\n                fontWeight: '600',\r\n                cursor: 'pointer',\r\n                transition: 'all 0.2s ease'\r\n              }}\r\n              onMouseEnter={(e) => {\r\n                (e.target as HTMLButtonElement).style.background = 'rgba(255, 255, 255, 0.15)';\r\n              }}\r\n              onMouseLeave={(e) => {\r\n                (e.target as HTMLButtonElement).style.background = 'rgba(255, 255, 255, 0.1)';\r\n              }}\r\n            >\r\n              ביטול\r\n            </button>\r\n            <button \r\n              type=\"submit\" \r\n              disabled={isSubmitting}\r\n              style={{\r\n                background: isSubmitting ? 'rgba(255, 255, 255, 0.1)' : 'linear-gradient(135deg, #3b82f6, #1d4ed8)',\r\n                border: 'none',\r\n                borderRadius: '8px',\r\n                padding: '12px 24px',\r\n                color: 'white',\r\n                fontSize: '14px',\r\n                fontWeight: '600',\r\n                cursor: isSubmitting ? 'not-allowed' : 'pointer',\r\n                transition: 'all 0.2s ease',\r\n                boxShadow: isSubmitting ? 'none' : '0 4px 16px rgba(59, 130, 246, 0.3)'\r\n              }}\r\n            >\r\n              {isSubmitting ? 'שומר...' : (\r\n                item ? 'עדכן' : (\r\n                  (!formData.requiresReporting && quantity > 1) ? `צור ${quantity} פריטים` : 'צור פריט'\r\n                )\r\n              )}\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n\r\n      <ConflictErrorModal\r\n        isOpen={conflictError.isOpen}\r\n        onClose={() => setConflictError({ isOpen: false, message: '', itemName: '' })}\r\n        title={`לא ניתן לשמור את הפריט \"${conflictError.itemName}\"`}\r\n        message={conflictError.message}\r\n        resolutionMessage={getConflictResolutionMessage('item')}\r\n        type=\"item\"\r\n      />\r\n\r\n      <NotificationModal\r\n        isOpen={notification.isOpen}\r\n        onClose={closeNotification}\r\n        type={notification.type}\r\n        message={notification.message}\r\n        title={notification.title}\r\n      />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ItemForm;\r\n","import React, { useState } from 'react';\r\nimport { ServerError, ConflictErrorModal, BulkDeleteErrorModal, SmartPagination, LoadingSpinner, NotificationModal, SearchInput, AdvancedFilter, AdvancedFilterCriteria } from '../../shared/components';\r\nimport { SelectionToolbar } from '../../shared/components';\r\nimport { useModernTableSelection } from '../../hooks';\r\nimport Modal from '../../shared/components/Modal';\r\nimport ItemForm from './ItemForm';\r\nimport { useItems } from '../../hooks';\r\nimport { Item, User } from '../../types';\r\nimport { paginate, getConflictResolutionMessage } from '../../utils';\r\nimport { UI_CONFIG } from '../../config/app.config';\r\nimport type { NotificationType } from '../../shared/components/NotificationModal';\r\n\r\ninterface ItemsTabProps {\r\n  userProfile: User;\r\n  isAdmin: boolean;\r\n}\r\n\r\nconst ItemsTab: React.FC<ItemsTabProps> = ({ userProfile, isAdmin }) => {\r\n  const { items, loading, error, refetch, deleteManyItems } = useItems();\r\n  const [selectedItem, setSelectedItem] = useState<Item | null>(null);\r\n  const [isModalOpen, setIsModalOpen] = useState(false);\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [sortConfig, setSortConfig] = useState<{\r\n    key: string;\r\n    direction: 'asc' | 'desc';\r\n  } | null>(null);\r\n  const [advancedFilters, setAdvancedFilters] = useState<AdvancedFilterCriteria>({});\r\n  const [isAdvancedFilterOpen, setIsAdvancedFilterOpen] = useState(false);\r\n  const [conflictError, setConflictError] = useState<{\r\n    isOpen: boolean;\r\n    message: string;\r\n    itemName: string;\r\n  }>({\r\n    isOpen: false,\r\n    message: '',\r\n    itemName: '',\r\n  });\r\n\r\n  const [bulkDeleteError, setBulkDeleteError] = useState<{\r\n    isOpen: boolean;\r\n    message: string;\r\n    deletedCount: number;\r\n    totalCount: number;\r\n    errors: string[];\r\n  }>({\r\n    isOpen: false,\r\n    message: '',\r\n    deletedCount: 0,\r\n    totalCount: 0,\r\n    errors: [],\r\n  });\r\n\r\n  const [notification, setNotification] = useState<{\r\n    isOpen: boolean;\r\n    type: NotificationType;\r\n    message: string;\r\n    title?: string;\r\n  }>({\r\n    isOpen: false,\r\n    type: 'info',\r\n    message: ''\r\n  });\r\n\r\n  const showNotification = (type: NotificationType, message: string, title?: string) => {\r\n    setNotification({\r\n      isOpen: true,\r\n      type,\r\n      message,\r\n      title\r\n    });\r\n  };\r\n\r\n  const closeNotification = () => {\r\n    setNotification(prev => ({ ...prev, isOpen: false }));\r\n  };\r\n\r\n  const handleSort = (key: string) => {\r\n    let direction: 'asc' | 'desc' = 'asc';\r\n    if (sortConfig && sortConfig.key === key && sortConfig.direction === 'asc') {\r\n      direction = 'desc';\r\n    }\r\n    setSortConfig({ key, direction });\r\n  };\r\n\r\n  // Helper function to get receipt location\r\n  const getReceiptLocation = (item: Item) => {\r\n    return item.receiptInfo?.signedBy?.location?.name || '—';\r\n  };\r\n\r\n  // Filter and sort items based on search term, advanced filters, and sort config\r\n  const filteredAndSortedItems = (() => {\r\n    let filtered = items.filter(item => {\r\n      // Basic text search filter\r\n      if (searchTerm) {\r\n        const statusText = !item.isOperational ? 'תקול' : (item.isAvailable ?? false) ? 'זמין' : 'לא זמין';\r\n        const locationText = item.allocatedLocation?.name || 'לא מוקצה';\r\n        const receiptLocationText = getReceiptLocation(item);\r\n        \r\n        const matchesSearch = (item.itemName?.name && item.itemName.name.toLowerCase().includes(searchTerm.toLowerCase())) ||\r\n          (item.idNumber && item.idNumber.toLowerCase().includes(searchTerm.toLowerCase())) ||\r\n          (item.note && item.note.toLowerCase().includes(searchTerm.toLowerCase())) ||\r\n          statusText.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n          locationText.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n          receiptLocationText.toLowerCase().includes(searchTerm.toLowerCase());\r\n        \r\n        if (!matchesSearch) return false;\r\n      }\r\n\r\n      // Advanced filters\r\n      if (advancedFilters.itemNameId && item.nameId !== advancedFilters.itemNameId) {\r\n        return false;\r\n      }\r\n\r\n      if (advancedFilters.allocatedLocationId && item.allocatedLocationId !== advancedFilters.allocatedLocationId) {\r\n        return false;\r\n      }\r\n\r\n      if (advancedFilters.receiptLocationName) {\r\n        const itemReceiptLocation = getReceiptLocation(item);\r\n        if (itemReceiptLocation !== advancedFilters.receiptLocationName) {\r\n          return false;\r\n        }\r\n      }\r\n\r\n      if (advancedFilters.status) {\r\n        const isOperational = item.isOperational;\r\n        const isAvailable = item.isAvailable ?? false;\r\n        \r\n        switch (advancedFilters.status) {\r\n          case 'operational':\r\n            if (!isOperational) return false;\r\n            break;\r\n          case 'non-operational':\r\n            if (isOperational) return false;\r\n            break;\r\n          case 'available':\r\n            if (!isAvailable || !isOperational) return false;\r\n            break;\r\n          case 'not-available':\r\n            if (isAvailable || !isOperational) return false;\r\n            break;\r\n        }\r\n      }\r\n\r\n      if (advancedFilters.hasIdNumber !== undefined) {\r\n        const hasIdNumber = Boolean(item.idNumber && item.idNumber.trim());\r\n        if (hasIdNumber !== advancedFilters.hasIdNumber) {\r\n          return false;\r\n        }\r\n      }\r\n\r\n      if (advancedFilters.noteText) {\r\n        const itemNote = item.note || '';\r\n        if (!itemNote.toLowerCase().includes(advancedFilters.noteText.toLowerCase())) {\r\n          return false;\r\n        }\r\n      }\r\n\r\n      return true;\r\n    });\r\n\r\n    if (sortConfig) {\r\n      filtered = [...filtered].sort((a, b) => {\r\n        let aValue: any;\r\n        let bValue: any;\r\n\r\n        switch (sortConfig.key) {\r\n          case 'name':\r\n            aValue = a.itemName?.name || '';\r\n            bValue = b.itemName?.name || '';\r\n            break;\r\n          case 'idNumber':\r\n            aValue = a.idNumber || '';\r\n            bValue = b.idNumber || '';\r\n            break;\r\n          case 'allocatedLocation':\r\n            aValue = a.allocatedLocation?.name || '';\r\n            bValue = b.allocatedLocation?.name || '';\r\n            break;\r\n          case 'receiptLocation':\r\n            aValue = getReceiptLocation(a) || '';\r\n            bValue = getReceiptLocation(b) || '';\r\n            break;\r\n          case 'status':\r\n            // Status priority: תקול (0) < לא זמין (1) < זמין (2)\r\n            aValue = !a.isOperational ? 0 : (a.isAvailable ?? false) ? 2 : 1;\r\n            bValue = !b.isOperational ? 0 : (b.isAvailable ?? false) ? 2 : 1;\r\n            break;\r\n          case 'note':\r\n            aValue = a.note || '';\r\n            bValue = b.note || '';\r\n            break;\r\n          case 'isOperational':\r\n            aValue = a.isOperational;\r\n            bValue = b.isOperational;\r\n            break;\r\n          case 'isAvailable':\r\n            aValue = a.isAvailable ?? false;\r\n            bValue = b.isAvailable ?? false;\r\n            break;\r\n          default:\r\n            return 0;\r\n        }\r\n\r\n        if (typeof aValue === 'string' && typeof bValue === 'string') {\r\n          return sortConfig.direction === 'asc' \r\n            ? aValue.localeCompare(bValue, 'he') \r\n            : bValue.localeCompare(aValue, 'he');\r\n        }\r\n\r\n        if (sortConfig.direction === 'asc') {\r\n          return aValue < bValue ? -1 : aValue > bValue ? 1 : 0;\r\n        } else {\r\n          return aValue > bValue ? -1 : aValue < bValue ? 1 : 0;\r\n        }\r\n      });\r\n    }\r\n\r\n    return filtered;\r\n  })();\r\n\r\n  const { paginatedItems, totalPages } = paginate(\r\n    filteredAndSortedItems,\r\n    currentPage,\r\n    UI_CONFIG.TABLE_PAGE_SIZE\r\n  );\r\n\r\n  // Modern selection hook - use all filtered items for selection, not just paginated\r\n  const {\r\n    selectedIds,\r\n    isSelected,\r\n    toggleSelection,\r\n    clearSelection,\r\n    selectAll,\r\n    selectedCount\r\n  } = useModernTableSelection({\r\n    items: filteredAndSortedItems,\r\n    multiSelect: true\r\n  });\r\n\r\n  const handleAddClick = () => {\r\n    setSelectedItem(null);\r\n    setIsModalOpen(true);\r\n  };\r\n\r\n  const handleItemClick = (item: Item) => {\r\n    setSelectedItem(item);\r\n    setIsModalOpen(true);\r\n  };\r\n\r\n  const handleCloseModal = () => {\r\n    setIsModalOpen(false);\r\n    setSelectedItem(null);\r\n    refetch(); // Refresh the items list after modal closes\r\n  };\r\n\r\n  // Reset page when search term changes\r\n  const handleSearchChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    setSearchTerm(e.target.value);\r\n    setCurrentPage(1);\r\n    clearSelection();\r\n  };\r\n\r\n  // Handle advanced filter changes\r\n  const handleAdvancedFiltersChange = (filters: AdvancedFilterCriteria) => {\r\n    setAdvancedFilters(filters);\r\n    setCurrentPage(1);\r\n    clearSelection();\r\n  };\r\n\r\n  // Toggle advanced filter panel\r\n  const handleAdvancedFilterToggle = () => {\r\n    setIsAdvancedFilterOpen(!isAdvancedFilterOpen);\r\n  };\r\n\r\n  const handleBulkDelete = async () => {\r\n    if (selectedIds.length === 0) return;\r\n\r\n    const selectedItems = items.filter(item => selectedIds.includes(item.id));\r\n    const itemNames = selectedItems.map(item => item.itemName?.name || 'אין שם').join(', ');\r\n    \r\n    if (!window.confirm(`האם אתה בטוח שברצונך למחוק את הפריטים הבאים?\\n\\n${itemNames}\\n\\n(${selectedIds.length} פריטים)`)) return;\r\n\r\n    const result = await deleteManyItems(selectedIds);\r\n    if (result.success) {\r\n      clearSelection();\r\n    } else if (result.isConflict && result.bulkError) {\r\n      // Show bulk delete error modal\r\n      setBulkDeleteError({\r\n        isOpen: true,\r\n        message: result.bulkError.message,\r\n        deletedCount: result.bulkError.deletedCount,\r\n        totalCount: selectedIds.length,\r\n        errors: result.bulkError.errors,\r\n      });\r\n      clearSelection();\r\n    } else if (result.isConflict) {\r\n      // Show regular conflict error modal\r\n      setConflictError({\r\n        isOpen: true,\r\n        message: result.error || 'שגיאת התנגשות במחיקת פריטים',\r\n        itemName: `${selectedIds.length} פריטים`,\r\n      });\r\n    } else {\r\n      showNotification('error', `שגיאה במחיקת הפריטים: ${result.error || 'שגיאה לא ידועה'}`);\r\n    }\r\n  };\r\n\r\n  // Check if user has a location assigned\r\n  if (!userProfile.location) {\r\n    return (\r\n      <div className=\"card\">\r\n        <div className=\"card-header\">\r\n          <h2 className=\"mb-0\">ציוד</h2>\r\n        </div>\r\n        <div className=\"card-body\">\r\n          <div className=\"alert alert-warning\">\r\n            <h4>אין לך גישה למערכת</h4>\r\n            <p>המשתמש שלך לא שוייך למיקום. אנא פנה למנהל המערכת כדי לשייך אותך למיקום.</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (loading) {\r\n    return (\r\n      <LoadingSpinner message=\"טוען פריטי ציוד...\" />\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return <ServerError />;\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {/* Compact Header with Actions */}\r\n      <div className=\"management-header-compact\">\r\n        <div className=\"management-search-section\">\r\n          <SearchInput\r\n            value={searchTerm}\r\n            onChange={(value) => handleSearchChange({ target: { value } } as React.ChangeEvent<HTMLInputElement>)}\r\n            placeholder=\"חפש פריטים לפי שם, מספר צ', הקצאה, מיקום או הערה...\"\r\n            resultsCount={filteredAndSortedItems.length}\r\n            resultsLabel=\"פריטים\"\r\n          />\r\n        </div>\r\n        \r\n        <div className=\"management-actions-compact\">\r\n          <div style={{ display: 'flex', gap: '8px', alignItems: 'center' }}>\r\n            <button className=\"btn btn-primary btn-sm\" onClick={handleAddClick}>\r\n              <i className=\"fas fa-plus\" style={{ marginLeft: '6px' }}></i>\r\n              הוסף פריט חדש\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Advanced Filter Component */}\r\n      <AdvancedFilter\r\n        items={items}\r\n        filters={advancedFilters}\r\n        onFiltersChange={handleAdvancedFiltersChange}\r\n        isOpen={isAdvancedFilterOpen}\r\n        onToggle={handleAdvancedFilterToggle}\r\n        isAdmin={isAdmin}\r\n        resultsCount={filteredAndSortedItems.length}\r\n      />\r\n\r\n      {/* Modern Selection Toolbar */}\r\n      <SelectionToolbar\r\n        selectedCount={selectedCount}\r\n        totalCount={filteredAndSortedItems.length}\r\n        onDelete={handleBulkDelete}\r\n        onClear={clearSelection}\r\n        onSelectAll={selectAll}\r\n        isDeleting={false}\r\n        isVisible={selectedCount > 0}\r\n      />\r\n\r\n        <div className=\"unified-table-container\">\r\n          <table className=\"unified-table\">\r\n            <thead>\r\n              <tr>\r\n                <th \r\n                  className=\"unified-table-header unified-table-header-first sortable\"\r\n                  onClick={() => handleSort('name')}\r\n                  title=\"לחץ למיון לפי שם פריט\"\r\n                  data-sorted={sortConfig?.key === 'name' ? 'true' : 'false'}\r\n                >\r\n                  <div>\r\n                    <span>שם פריט</span>\r\n                  </div>\r\n                </th>\r\n                <th \r\n                  className=\"unified-table-header unified-table-header-regular sortable\"\r\n                  onClick={() => handleSort('idNumber')}\r\n                  title=\"לחץ למיון לפי מספר צ'\"\r\n                  data-sorted={sortConfig?.key === 'idNumber' ? 'true' : 'false'}\r\n                >\r\n                  <div>\r\n                    <span>מספר צ'</span>\r\n                  </div>\r\n                </th>\r\n                <th \r\n                  className=\"unified-table-header unified-table-header-regular sortable\"\r\n                  onClick={() => handleSort('allocatedLocation')}\r\n                  title=\"לחץ למיון לפי הקצאה\"\r\n                  data-sorted={sortConfig?.key === 'allocatedLocation' ? 'true' : 'false'}\r\n                >\r\n                  <div>\r\n                    <span>הקצאה</span>\r\n                  </div>\r\n                </th>\r\n                <th \r\n                  className=\"unified-table-header unified-table-header-regular sortable\"\r\n                  onClick={() => handleSort('receiptLocation')}\r\n                  title=\"לחץ למיון לפי מיקום\"\r\n                  data-sorted={sortConfig?.key === 'receiptLocation' ? 'true' : 'false'}\r\n                >\r\n                  <div>\r\n                    <span>מיקום</span>\r\n                  </div>\r\n                </th>\r\n                <th \r\n                  className=\"unified-table-header unified-table-header-regular sortable\"\r\n                  onClick={() => handleSort('status')}\r\n                  title=\"לחץ למיון לפי סטטוס\"\r\n                  data-sorted={sortConfig?.key === 'status' ? 'true' : 'false'}\r\n                >\r\n                  <div>\r\n                    <span>סטטוס</span>\r\n                  </div>\r\n                </th>\r\n                <th \r\n                  className=\"unified-table-header unified-table-header-regular sortable\"\r\n                  onClick={() => handleSort('note')}\r\n                  title=\"לחץ למיון לפי הערה\"\r\n                  data-sorted={sortConfig?.key === 'note' ? 'true' : 'false'}\r\n                >\r\n                  <div>\r\n                    <span>הערה</span>\r\n                  </div>\r\n                </th>\r\n                <th className=\"unified-table-header unified-table-header-regular\">\r\n                  <div>\r\n                    <span>פעולות</span>\r\n                  </div>\r\n                </th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {paginatedItems.map((item: Item, index: number) => (\r\n                <tr \r\n                  key={item.id} \r\n                  className={`unified-table-row modern-table-row ${isSelected(item.id) ? 'selected' : ''}`}\r\n                  onClick={(e) => toggleSelection(item.id, e)}\r\n                  title=\"לחץ לבחירה\"\r\n                >\r\n                  <td className=\"unified-table-cell unified-table-cell-first\">{item.itemName?.name || 'אין תערכה'}</td>\r\n                  <td className=\"unified-table-cell unified-table-cell-badge\">\r\n                    <span className={`unified-badge ${item.idNumber ? 'unified-badge-primary' : 'unified-badge-secondary'}`}>\r\n                      {item.idNumber || 'לא זמין'}\r\n                    </span>\r\n                  </td>\r\n                  <td className=\"unified-table-cell\">{item.allocatedLocation?.name || 'לא מוקצה'}</td>\r\n                  <td className=\"unified-table-cell\">{getReceiptLocation(item)}</td>\r\n                  <td className=\"unified-table-cell unified-table-cell-badge\">\r\n                    <span \r\n                      className={`unified-badge ${\r\n                        !item.isOperational \r\n                          ? 'unified-badge-warning' \r\n                          : (item.isAvailable ?? false) \r\n                            ? 'unified-badge-success' \r\n                            : 'unified-badge-danger'\r\n                      }`}\r\n                    >\r\n                      {!item.isOperational \r\n                        ? 'תקול' \r\n                        : (item.isAvailable ?? false) \r\n                          ? 'זמין' \r\n                          : 'לא זמין'\r\n                      }\r\n                    </span>\r\n                  </td>\r\n                  <td className=\"unified-table-cell\">{item.note || 'אין הערה'}</td>\r\n                  <td className=\"unified-table-cell unified-table-cell-actions\">\r\n                    <button \r\n                      className=\"unified-action-btn unified-action-btn-primary unified-action-btn-sm\" \r\n                      onClick={(e) => {\r\n                        e.stopPropagation();\r\n                        handleItemClick(item);\r\n                      }}\r\n                    >\r\n                      עדכן\r\n                    </button>\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n\r\n        {totalPages > 1 && (\r\n          <SmartPagination\r\n            currentPage={currentPage}\r\n            totalPages={totalPages}\r\n            onPageChange={setCurrentPage}\r\n          />\r\n        )}\r\n\r\n      <Modal\r\n        isOpen={isModalOpen}\r\n        onClose={handleCloseModal}\r\n        title={selectedItem ? 'עדכן פריט' : 'הוסף פריט חדש'}\r\n        size=\"md\"\r\n      >\r\n        <ItemForm\r\n          key={selectedItem?.id || 'new'}\r\n          item={selectedItem}\r\n          isAdmin={isAdmin}\r\n          onSuccess={handleCloseModal}\r\n          onCancel={handleCloseModal}\r\n        />\r\n      </Modal>\r\n\r\n      <ConflictErrorModal\r\n        isOpen={conflictError.isOpen}\r\n        onClose={() => setConflictError({ isOpen: false, message: '', itemName: '' })}\r\n        title={`לא ניתן למחוק את הפריט \"${conflictError.itemName}\"`}\r\n        message={conflictError.message}\r\n        resolutionMessage={getConflictResolutionMessage('item')}\r\n        type=\"item\"\r\n      />\r\n\r\n      <BulkDeleteErrorModal\r\n        isOpen={bulkDeleteError.isOpen}\r\n        onClose={() => setBulkDeleteError({ \r\n          isOpen: false, \r\n          message: '', \r\n          deletedCount: 0, \r\n          totalCount: 0, \r\n          errors: [] \r\n        })}\r\n        title=\"תוצאות מחיקה מרובה - פריטים\"\r\n        message={bulkDeleteError.message}\r\n        deletedCount={bulkDeleteError.deletedCount}\r\n        totalCount={bulkDeleteError.totalCount}\r\n        errors={bulkDeleteError.errors}\r\n        type=\"item\"\r\n      />\r\n\r\n      <NotificationModal\r\n        isOpen={notification.isOpen}\r\n        onClose={closeNotification}\r\n        type={notification.type}\r\n        message={notification.message}\r\n        title={notification.title}\r\n      />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ItemsTab;\r\n","import React, { useState } from 'react';\r\nimport { TabNavigation } from '../../shared/components';\r\nimport { UnitsTab, LocationsTab, ItemNamesTab, AllocationsTab, ManagementSettingsTab, BackupRestoreTab } from './index';\r\nimport '../../shared/styles/components.css';\r\n\r\nconst ManagementTab: React.FC = () => {\r\n  const [activeSubTab, setActiveSubTab] = useState('units');\r\n\r\n  const subTabs = [\r\n    { \r\n      id: 'units', \r\n      label: 'יחידות', \r\n      icon: (\r\n        <svg viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n          <path d=\"M12 7V3H2v18h20V7H12zM6 19H4v-2h2v2zm0-4H4v-2h2v2zm0-4H4V9h2v2zm0-4H4V5h2v2zm4 12H8v-2h2v2zm0-4H8v-2h2v2zm0-4H8V9h2v2zm0-4H8V5h2v2zm10 12h-8v-2h2v-2h-2v-2h2v-2h-2V9h8v10zm-2-8h-2v2h2v-2zm0 4h-2v2h2v-2z\"/>\r\n        </svg>\r\n      )\r\n    },\r\n    { \r\n      id: 'locations', \r\n      label: 'מיקומים', \r\n      icon: (\r\n        <svg viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n          <path d=\"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z\"/>\r\n        </svg>\r\n      )\r\n    },\r\n    { \r\n      id: 'itemNames', \r\n      label: 'שמות פריטים', \r\n      icon: (\r\n        <svg viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n          <path d=\"M17.63 5.84C17.27 5.33 16.67 5 16 5L5 5.01C3.9 5.01 3 5.9 3 7v10c0 1.1.9 1.99 2 1.99L16 19c.67 0 1.27-.33 1.63-.84L22 12l-4.37-6.16z\"/>\r\n        </svg>\r\n      )\r\n    },\r\n    { \r\n      id: 'allocations', \r\n      label: 'שבצק', \r\n      icon: (\r\n        <svg viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n          <path d=\"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10h-4v4h-2v-4H7v-2h4V7h2v4h4v2z\"/>\r\n        </svg>\r\n      )\r\n    },\r\n    { \r\n      id: 'backup', \r\n      label: 'גיבוי ושחזור', \r\n      icon: (\r\n        <svg viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n          <path d=\"M12 3L2 12h3v8h14v-8h3L12 3zm2 12h-1v-2h-2v2H9v-2H7v2H6v-6h12v6z\"/>\r\n        </svg>\r\n      )\r\n    },\r\n    { \r\n      id: 'settings', \r\n      label: 'הגדרות', \r\n      icon: (\r\n        <svg viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n          <path d=\"M19.14,12.94c0.04-0.3,0.06-0.61,0.06-0.94c0-0.32-0.02-0.64-0.07-0.94l2.03-1.58c0.18-0.14,0.23-0.41,0.12-0.61 l-1.92-3.32c-0.12-0.22-0.37-0.29-0.59-0.22l-2.39,0.96c-0.5-0.38-1.03-0.7-1.62-0.94L14.4,2.81c-0.04-0.24-0.24-0.41-0.48-0.41 h-3.84c-0.24,0-0.43,0.17-0.47,0.41L9.25,5.35C8.66,5.59,8.12,5.92,7.63,6.29L5.24,5.33c-0.22-0.08-0.47,0-0.59,0.22L2.74,8.87 C2.62,9.08,2.66,9.34,2.86,9.48l2.03,1.58C4.84,11.36,4.8,11.69,4.8,12s0.02,0.64,0.07,0.94l-2.03,1.58 c-0.18,0.14-0.23,0.41-0.12,0.61l1.92,3.32c0.12,0.22,0.37,0.29,0.59,0.22l2.39-0.96c0.5,0.38,1.03,0.7,1.62,0.94l0.36,2.54 c0.05,0.24,0.24,0.41,0.48,0.41h3.84c0.24,0,0.44-0.17,0.47-0.41l0.36-2.54c0.59-0.24,1.13-0.56,1.62-0.94l2.39,0.96 c0.22,0.08,0.47,0,0.59-0.22l1.92-3.32c0.12-0.22,0.07-0.47-0.12-0.61L19.14,12.94z M12,15.6c-1.98,0-3.6-1.62-3.6-3.6 s1.62-3.6,3.6-3.6s3.6,1.62,3.6,3.6S13.98,15.6,12,15.6z\"/>\r\n        </svg>\r\n      )\r\n    },\r\n  ];\r\n\r\n  const handleTabChange = (tabId: string) => {\r\n    setActiveSubTab(tabId);\r\n  };\r\n\r\n  const renderActiveTab = () => {\r\n    switch (activeSubTab) {\r\n      case 'units':\r\n        return <UnitsTab />;\r\n      case 'locations':\r\n        return <LocationsTab />;\r\n      case 'itemNames':\r\n        return <ItemNamesTab />;\r\n      case 'allocations':\r\n        return <AllocationsTab />;\r\n      case 'backup':\r\n        return <BackupRestoreTab />;\r\n      case 'settings':\r\n        return <ManagementSettingsTab />;\r\n      default:\r\n        return <UnitsTab />;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"page-container\">\r\n      {/* Tab Navigation */}\r\n      <TabNavigation\r\n        tabs={subTabs}\r\n        activeTab={activeSubTab}\r\n        onTabChange={handleTabChange}\r\n        variant=\"primary\"\r\n        size=\"md\"\r\n      />\r\n      \r\n      <div className=\"tab-content\">\r\n        {renderActiveTab()}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ManagementTab;\r\n","import React, { useState } from 'react';\r\nimport { Modal, ConflictErrorModal, SmartPagination, LoadingSpinner, NotificationModal, SelectionToolbar, SearchInput } from '../../shared/components';\r\nimport { paginate } from '../../utils';\r\nimport { UI_CONFIG } from '../../config/app.config';\r\nimport { NotificationType } from '../../shared/components/NotificationModal';\r\nimport { useModernTableSelection } from '../../hooks';\r\n\r\ninterface BaseEntity {\r\n  id: string;\r\n  name: string;\r\n  createdAt: string;\r\n  updatedAt: string;\r\n}\r\n\r\ninterface ManagementTableProps<T extends BaseEntity> {\r\n  title: string;\r\n  items: T[];\r\n  loading: boolean;\r\n  error: string | null;\r\n  onAdd: (name: string) => Promise<{ success: boolean; error?: string; isConflict?: boolean }>;\r\n  onEdit: (id: string, name: string) => Promise<{ success: boolean; error?: string; isConflict?: boolean }>;\r\n  onDelete: (ids: string[]) => Promise<{ success: boolean; error?: string }>;\r\n  onRefresh: () => void;\r\n}\r\n\r\nexport function ManagementTable<T extends BaseEntity>({\r\n  title,\r\n  items,\r\n  loading,\r\n  error,\r\n  onAdd,\r\n  onEdit,\r\n  onDelete,\r\n  onRefresh,\r\n}: ManagementTableProps<T>) {\r\n  const [isAddModalOpen, setIsAddModalOpen] = useState(false);\r\n  const [editingItem, setEditingItem] = useState<T | null>(null);\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [newItemName, setNewItemName] = useState('');\r\n  const [editItemName, setEditItemName] = useState('');\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  const [sortConfig, setSortConfig] = useState<{\r\n    key: keyof BaseEntity;\r\n    direction: 'asc' | 'desc';\r\n  } | null>(null);\r\n  const [conflictError, setConflictError] = useState({\r\n    isOpen: false,\r\n    message: '',\r\n    itemName: '',\r\n  });\r\n  const [notification, setNotification] = useState<{\r\n    isOpen: boolean;\r\n    message: string;\r\n    type: NotificationType;\r\n  }>({\r\n    isOpen: false,\r\n    message: '',\r\n    type: 'error',\r\n  });\r\n\r\n  // Filter and sort items\r\n  const filteredItems = items.filter(item =>\r\n    item.name.toLowerCase().normalize('NFC').includes(searchTerm.toLowerCase().normalize('NFC'))\r\n  );\r\n\r\n  const sortedItems = [...filteredItems].sort((a, b) => {\r\n    if (!sortConfig) return 0;\r\n\r\n    const { key, direction } = sortConfig;\r\n    let aValue: any = a[key];\r\n    let bValue: any = b[key];\r\n\r\n    // Handle date sorting\r\n    if (key === 'createdAt' || key === 'updatedAt') {\r\n      const aTime = new Date(aValue as string).getTime();\r\n      const bTime = new Date(bValue as string).getTime();\r\n      \r\n      if (direction === 'asc') {\r\n        return aTime < bTime ? -1 : aTime > bTime ? 1 : 0;\r\n      } else {\r\n        return aTime > bTime ? -1 : aTime < bTime ? 1 : 0;\r\n      }\r\n    }\r\n\r\n    // Handle string sorting\r\n    if (typeof aValue === 'string' && typeof bValue === 'string') {\r\n      return direction === 'asc' \r\n        ? aValue.localeCompare(bValue, 'he') \r\n        : bValue.localeCompare(aValue, 'he');\r\n    }\r\n\r\n    // Handle number sorting\r\n    if (direction === 'asc') {\r\n      return aValue < bValue ? -1 : aValue > bValue ? 1 : 0;\r\n    } else {\r\n      return aValue > bValue ? -1 : aValue < bValue ? 1 : 0;\r\n    }\r\n  });\r\n\r\n  const { paginatedItems, totalPages } = paginate(\r\n    sortedItems,\r\n    currentPage,\r\n    UI_CONFIG.TABLE_PAGE_SIZE\r\n  );\r\n\r\n  // Modern table selection\r\n  const {\r\n    selectedIds,\r\n    toggleSelection,\r\n    clearSelection,\r\n    selectAll,\r\n    hasSelection\r\n  } = useModernTableSelection({\r\n    items: sortedItems,\r\n    onSelectionChange: (ids) => {\r\n      // Optional: Handle selection changes\r\n    }\r\n  });\r\n\r\n  const handleSort = (key: keyof BaseEntity) => {\r\n    let direction: 'asc' | 'desc' = 'asc';\r\n    if (sortConfig && sortConfig.key === key && sortConfig.direction === 'asc') {\r\n      direction = 'desc';\r\n    }\r\n    setSortConfig({ key, direction });\r\n    setCurrentPage(1); // Reset to first page when sorting\r\n  };\r\n\r\n  const handleAdd = async () => {\r\n    if (!newItemName.trim()) return;\r\n    \r\n    setIsSubmitting(true);\r\n    try {\r\n      const result = await onAdd(newItemName.trim());\r\n      if (result.success) {\r\n        setNewItemName('');\r\n        setIsAddModalOpen(false);\r\n      } else if (result.isConflict) {\r\n        setConflictError({\r\n          isOpen: true,\r\n          message: result.error || `${title} עם שם זה כבר קיים במערכת`,\r\n          itemName: newItemName.trim(),\r\n        });\r\n      } else {\r\n        setNotification({\r\n          isOpen: true,\r\n          message: result.error || `שגיאה ביצירת ${title}`,\r\n          type: 'error',\r\n        });\r\n      }\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  const handleEdit = async () => {\r\n    if (!editingItem || !editItemName.trim()) return;\r\n    \r\n    setIsSubmitting(true);\r\n    try {\r\n      const result = await onEdit(editingItem.id, editItemName.trim());\r\n      if (result.success) {\r\n        setEditingItem(null);\r\n        setEditItemName('');\r\n      } else if (result.isConflict) {\r\n        setConflictError({\r\n          isOpen: true,\r\n          message: result.error || `${title} עם שם זה כבר קיים במערכת`,\r\n          itemName: editItemName.trim(),\r\n        });\r\n      } else {\r\n        setNotification({\r\n          isOpen: true,\r\n          message: result.error || `שגיאה בעדכון ${title}`,\r\n          type: 'error',\r\n        });\r\n      }\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  const handleDelete = async () => {\r\n    if (selectedIds.length === 0) return;\r\n    \r\n    const confirmed = window.confirm(\r\n      `האם אתה בטוח שברצונך למחוק ${selectedIds.length} ${title}?`\r\n    );\r\n    \r\n    if (!confirmed) return;\r\n    \r\n    try {\r\n      const result = await onDelete(selectedIds);\r\n      if (result.success) {\r\n        clearSelection();\r\n      } else {\r\n        setNotification({\r\n          isOpen: true,\r\n          message: result.error || `שגיאה במחיקת ${title}`,\r\n          type: 'error',\r\n        });\r\n      }\r\n    } catch (error) {\r\n      setNotification({\r\n        isOpen: true,\r\n        message: `שגיאה במחיקת ${title}`,\r\n        type: 'error',\r\n      });\r\n    }\r\n  };\r\n\r\n  const openEditModal = (item: T) => {\r\n    setEditingItem(item);\r\n    setEditItemName(item.name);\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <LoadingSpinner message={`טוען ${title}...`} />\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <div className=\"alert alert-danger\">\r\n        <strong>שגיאה:</strong> {error}\r\n        <button className=\"btn btn-sm btn-outline-danger ms-2\" onClick={onRefresh}>\r\n          נסה שוב\r\n        </button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {/* Compact Header with Actions */}\r\n      <div className=\"management-header-compact\">\r\n        <div className=\"management-search-section\">\r\n          <SearchInput\r\n            value={searchTerm}\r\n            onChange={(value) => {\r\n              setSearchTerm(value);\r\n              setCurrentPage(1);\r\n            }}\r\n            placeholder={`חיפוש ${title}...`}\r\n            resultsCount={filteredItems.length}\r\n            resultsLabel={title}\r\n          />\r\n        </div>\r\n        \r\n        <div className=\"management-actions-compact\">\r\n          <button\r\n            className=\"btn btn-primary btn-sm\"\r\n            onClick={() => setIsAddModalOpen(true)}\r\n            disabled={loading}\r\n            title={`הוסף ${title} חדש`}\r\n            style={{\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              justifyContent: 'center',\r\n              gap: '6px',\r\n              padding: '0 16px'\r\n            }}\r\n          >\r\n            <i className=\"fas fa-plus\" style={{ fontSize: '13px' }}></i>\r\n            <span style={{ fontSize: '13px', fontWeight: '600' }}>הוסף חדש</span>\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Modern Selection Toolbar */}\r\n      <SelectionToolbar\r\n        selectedCount={selectedIds.length}\r\n        totalCount={paginatedItems.length}\r\n        onDelete={selectedIds.length > 0 ? handleDelete : undefined}\r\n        onClear={clearSelection}\r\n        onSelectAll={selectAll}\r\n        isVisible={hasSelection}\r\n        deleteLabel={`מחק ${title}`}\r\n        isDeleting={isSubmitting}\r\n      />\r\n\r\n      {loading ? (\r\n        <LoadingSpinner \r\n          message={`טוען ${title}...`} \r\n          padding=\"80px 20px\"\r\n          minHeight=\"400px\"\r\n        />\r\n      ) : (\r\n        <>\r\n          <div className=\"unified-table-container\">\r\n            <table className=\"unified-table\">\r\n              <thead>\r\n                <tr>\r\n                  <th \r\n                    className=\"unified-table-header unified-table-header-regular\"\r\n                    onClick={() => handleSort('name')}\r\n                    title=\"לחץ למיון לפי שם\"\r\n                    data-sorted={sortConfig?.key === 'name' ? 'true' : 'false'}\r\n                  >\r\n                    <div className=\"d-flex align-items-center\">\r\n                      <span>שם</span>\r\n                    </div>\r\n                  </th>\r\n                  <th \r\n                    className=\"unified-table-header unified-table-header-regular\"\r\n                    onClick={() => handleSort('createdAt')}\r\n                    title=\"לחץ למיון לפי תאריך יצירה\"\r\n                    data-sorted={sortConfig?.key === 'createdAt' ? 'true' : 'false'}\r\n                  >\r\n                    <div className=\"d-flex align-items-center\">\r\n                      <span>תאריך יצירה</span>\r\n                    </div>\r\n                  </th>\r\n                  <th \r\n                    className=\"unified-table-header unified-table-header-regular\"\r\n                    onClick={() => handleSort('updatedAt')}\r\n                    title=\"לחץ למיון לפי תאריך עדכון\"\r\n                    data-sorted={sortConfig?.key === 'updatedAt' ? 'true' : 'false'}\r\n                  >\r\n                    <div className=\"d-flex align-items-center\">\r\n                      <span>תאריך עדכון</span>\r\n                    </div>\r\n                  </th>\r\n                  <th className=\"unified-table-header unified-table-header-regular\">פעולות</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {paginatedItems.map((item, index) => (\r\n                  <tr \r\n                    key={item.id} \r\n                    className={`unified-table-row selectable ${selectedIds.includes(item.id) ? 'selected' : ''}`}\r\n                    onClick={(e) => {\r\n                      // Don't trigger selection when clicking on action buttons\r\n                      if ((e.target as HTMLElement).closest('.unified-action-btn')) {\r\n                        return;\r\n                      }\r\n                      toggleSelection(item.id, e, index);\r\n                    }}\r\n                    title=\"לחץ לבחירה • Ctrl+לחץ לבחירה מרובה\"\r\n                  >\r\n                    <td className=\"unified-table-cell\">{item.name}</td>\r\n                    <td className=\"unified-table-cell\">{new Date(item.createdAt).toLocaleDateString('he-IL')}</td>\r\n                    <td className=\"unified-table-cell\">{new Date(item.updatedAt).toLocaleDateString('he-IL')}</td>\r\n                    <td className=\"unified-table-cell\">\r\n                      <button\r\n                        className=\"unified-action-btn unified-action-btn-primary\"\r\n                        onClick={(e) => {\r\n                          e.stopPropagation();\r\n                          openEditModal(item);\r\n                        }}\r\n                        title=\"עריכה\"\r\n                      >\r\n                        עדכן\r\n                      </button>\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n\r\n          {totalPages > 1 && (\r\n            <div className=\"pagination-container\">\r\n              <SmartPagination\r\n                currentPage={currentPage}\r\n                totalPages={totalPages}\r\n                onPageChange={setCurrentPage}\r\n              />\r\n            </div>\r\n          )}\r\n        </>\r\n      )}\r\n\r\n      {/* Add Modal */}\r\n      <Modal\r\n        isOpen={isAddModalOpen}\r\n        onClose={() => {\r\n          setIsAddModalOpen(false);\r\n          setNewItemName('');\r\n        }}\r\n        title={`הוסף ${title}`}\r\n        size=\"md\"\r\n      >\r\n        <div className=\"p-4\">\r\n          <div className=\"form-group\">\r\n            <label className=\"form-label\">שם {title}</label>\r\n            <input\r\n              type=\"text\"\r\n              className=\"form-control\"\r\n              value={newItemName}\r\n              onChange={(e) => setNewItemName(e.target.value)}\r\n              placeholder={`הכנס שם ${title}`}\r\n              onKeyPress={(e) => {\r\n                if (e.key === 'Enter') {\r\n                  handleAdd();\r\n                }\r\n              }}\r\n            />\r\n          </div>\r\n          \r\n          <div className=\"d-flex justify-content-end gap-2 mt-4\">\r\n            <button\r\n              type=\"button\"\r\n              className=\"btn btn-secondary\"\r\n              onClick={() => {\r\n                setIsAddModalOpen(false);\r\n                setNewItemName('');\r\n              }}\r\n            >\r\n              ביטול\r\n            </button>\r\n            <button\r\n              type=\"button\"\r\n              className=\"btn btn-primary\"\r\n              onClick={handleAdd}\r\n              disabled={!newItemName.trim() || isSubmitting}\r\n            >\r\n              {isSubmitting ? 'שומר...' : 'הוסף'}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </Modal>\r\n\r\n      {/* Edit Modal */}\r\n      <Modal\r\n        isOpen={!!editingItem}\r\n        onClose={() => {\r\n          setEditingItem(null);\r\n          setEditItemName('');\r\n        }}\r\n        title={`ערוך ${title}`}\r\n        size=\"md\"\r\n      >\r\n        <div className=\"p-4\">\r\n          <div className=\"form-group\">\r\n            <label className=\"form-label\">שם {title}</label>\r\n            <input\r\n              type=\"text\"\r\n              className=\"form-control\"\r\n              value={editItemName}\r\n              onChange={(e) => setEditItemName(e.target.value)}\r\n              placeholder={`הכנס שם ${title}`}\r\n              onKeyPress={(e) => {\r\n                if (e.key === 'Enter') {\r\n                  handleEdit();\r\n                }\r\n              }}\r\n            />\r\n          </div>\r\n          \r\n          <div className=\"d-flex justify-content-end gap-2 mt-4\">\r\n            <button\r\n              type=\"button\"\r\n              className=\"btn btn-secondary\"\r\n              onClick={() => {\r\n                setEditingItem(null);\r\n                setEditItemName('');\r\n              }}\r\n            >\r\n              ביטול\r\n            </button>\r\n            <button\r\n              type=\"button\"\r\n              className=\"btn btn-primary\"\r\n              onClick={handleEdit}\r\n              disabled={!editItemName.trim() || isSubmitting}\r\n            >\r\n              {isSubmitting ? 'שומר...' : 'עדכן'}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </Modal>\r\n\r\n      {/* Conflict Error Modal */}\r\n      <ConflictErrorModal\r\n        isOpen={conflictError.isOpen}\r\n        onClose={() => setConflictError({ isOpen: false, message: '', itemName: '' })}\r\n        title={`לא ניתן לשמור את ${title} \"${conflictError.itemName}\"`}\r\n        message={conflictError.message}\r\n        resolutionMessage={`בחר שם אחר עבור ${title} או ערוך את הקיים.`}\r\n        type=\"item\"\r\n      />\r\n\r\n      {/* Notification Modal */}\r\n      <NotificationModal\r\n        isOpen={notification.isOpen}\r\n        onClose={() => setNotification({ isOpen: false, message: '', type: 'error' })}\r\n        message={notification.message}\r\n        type={notification.type}\r\n      />\r\n    </>\r\n  );\r\n}\r\n","import React, { useEffect, useState } from 'react';\r\nimport { ManagementTable } from './ManagementTable';\r\nimport { useManagement } from '../../contexts';\r\nimport { BulkDeleteErrorModal } from '../../shared/components';\r\n\r\nexport const UnitsTab: React.FC = () => {\r\n  const { \r\n    units, \r\n    loading, \r\n    error, \r\n    createUnit, \r\n    updateUnit, \r\n    deleteUnits, \r\n    loadUnits \r\n  } = useManagement();\r\n\r\n  const [bulkDeleteError, setBulkDeleteError] = useState({\r\n    isOpen: false,\r\n    message: '',\r\n    deletedCount: 0,\r\n    totalCount: 0,\r\n    errors: [] as string[],\r\n  });\r\n\r\n  // Lazy load units on first mount/open\r\n  useEffect(() => {\r\n    if (!units || units.length === 0) {\r\n      loadUnits();\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      <ManagementTable\r\n        title=\"יחידה\"\r\n        items={units}\r\n        loading={loading}\r\n        error={error}\r\n        onAdd={async (name) => {\r\n          const result = await createUnit({ name });\r\n          return {\r\n            success: result.success,\r\n            error: result.error,\r\n            isConflict: result.isConflict,\r\n          };\r\n        }}\r\n        onEdit={async (id, name) => {\r\n          const result = await updateUnit(id, { name });\r\n          if (result.success) {\r\n            await loadUnits();\r\n          }\r\n          return {\r\n            success: result.success,\r\n            error: result.error,\r\n            isConflict: result.isConflict,\r\n          };\r\n        }}\r\n        onDelete={async (ids) => {\r\n          const result = await deleteUnits({ ids });\r\n          const deletedCount = (result as any)?.data?.deleted ?? 0;\r\n          const errors: string[] = (result as any)?.data?.errors ?? [];\r\n\r\n          if (result.success) {\r\n            // Always refetch to reflect server truth (even on partial delete)\r\n            await loadUnits();\r\n          }\r\n\r\n          if (result.success && (deletedCount < ids.length || errors.length > 0)) {\r\n            // Show modal with server-provided details, but suppress outer alert\r\n            setBulkDeleteError({\r\n              isOpen: true,\r\n              message: result.error || 'חלק מהיחידות לא נמחקו עקב שיוך משתמשים למיקומים ביחידה.',\r\n              deletedCount,\r\n              totalCount: ids.length,\r\n              errors,\r\n            });\r\n            return { success: true };\r\n          }\r\n\r\n          if (!result.success) {\r\n            setBulkDeleteError({\r\n              isOpen: true,\r\n              message: result.error || 'שגיאה במחיקת יחידות',\r\n              deletedCount,\r\n              totalCount: ids.length,\r\n              errors,\r\n            });\r\n          }\r\n\r\n          return {\r\n            success: result.success,\r\n            error: result.error,\r\n          };\r\n        }}\r\n        onRefresh={() => { loadUnits(); }}\r\n      />\r\n\r\n      <BulkDeleteErrorModal\r\n        isOpen={bulkDeleteError.isOpen}\r\n        onClose={() => setBulkDeleteError({ isOpen: false, message: '', deletedCount: 0, totalCount: 0, errors: [] })}\r\n        title=\"תוצאות מחיקה מרובה - יחידות\"\r\n        message={bulkDeleteError.message}\r\n        deletedCount={bulkDeleteError.deletedCount}\r\n        totalCount={bulkDeleteError.totalCount}\r\n        errors={bulkDeleteError.errors}\r\n        type=\"unit\"\r\n      />\r\n    </>\r\n  );\r\n};\r\n","import React, { useState } from 'react';\r\nimport { Modal, ConflictErrorModal, SmartPagination, LoadingSpinner, NotificationModal, SelectionToolbar, SearchInput } from '../../shared/components';\r\nimport { paginate } from '../../utils';\r\nimport { UI_CONFIG } from '../../config/app.config';\r\nimport { LocationEntity, UnitEntity } from '../../types';\r\nimport { NotificationType } from '../../shared/components/NotificationModal';\r\nimport { useModernTableSelection } from '../../hooks';\r\n\r\ninterface LocationsTableProps {\r\n  locations: LocationEntity[];\r\n  units: UnitEntity[];\r\n  loading: boolean;\r\n  error: string | null;\r\n  onAdd: (data: { name: string; unitId: string }) => Promise<{ success: boolean; error?: string; isConflict?: boolean }>;\r\n  onEdit: (id: string, data: { name?: string; unitId?: string }) => Promise<{ success: boolean; error?: string; isConflict?: boolean }>;\r\n  onDelete: (ids: string[]) => Promise<{ success: boolean; error?: string }>;\r\n  onRefresh: () => void;\r\n}\r\n\r\nexport const LocationsTable: React.FC<LocationsTableProps> = ({\r\n  locations,\r\n  units,\r\n  loading,\r\n  error,\r\n  onAdd,\r\n  onEdit,\r\n  onDelete,\r\n  onRefresh,\r\n}) => {\r\n  const [isAddModalOpen, setIsAddModalOpen] = useState(false);\r\n  const [editingLocation, setEditingLocation] = useState<LocationEntity | null>(null);\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [newLocationData, setNewLocationData] = useState({ name: '', unitId: '' });\r\n  const [editLocationData, setEditLocationData] = useState({ name: '', unitId: '' });\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  const [sortConfig, setSortConfig] = useState<{\r\n    key: keyof LocationEntity | 'unitName';\r\n    direction: 'asc' | 'desc';\r\n  } | null>(null);\r\n  const [conflictError, setConflictError] = useState({\r\n    isOpen: false,\r\n    message: '',\r\n    itemName: '',\r\n  });\r\n  const [notification, setNotification] = useState<{\r\n    isOpen: boolean;\r\n    message: string;\r\n    type: NotificationType;\r\n  }>({\r\n    isOpen: false,\r\n    message: '',\r\n    type: 'error',\r\n  });\r\n\r\n  // Helper function to get unit name\r\n  const getUnitName = (unitId: string) => {\r\n    const unit = units.find(u => u.id === unitId);\r\n    return unit ? unit.name : 'יחידה לא נמצאה';\r\n  };\r\n\r\n  // Filter locations\r\n  const filteredLocations = locations.filter(location =>\r\n    location.name.toLowerCase().normalize('NFC').includes(searchTerm.toLowerCase().normalize('NFC')) ||\r\n    getUnitName(location.unitId).toLowerCase().normalize('NFC').includes(searchTerm.toLowerCase().normalize('NFC'))\r\n  );\r\n\r\n  // Sort locations\r\n  const sortedLocations = [...filteredLocations].sort((a, b) => {\r\n    if (!sortConfig) return 0;\r\n\r\n    const { key, direction } = sortConfig;\r\n    let aValue: any;\r\n    let bValue: any;\r\n\r\n    if (key === 'unitName') {\r\n      aValue = getUnitName(a.unitId);\r\n      bValue = getUnitName(b.unitId);\r\n    } else if (key === 'createdAt' || key === 'updatedAt') {\r\n      aValue = new Date(a[key]).getTime();\r\n      bValue = new Date(b[key]).getTime();\r\n    } else {\r\n      aValue = a[key];\r\n      bValue = b[key];\r\n    }\r\n\r\n    // Handle string sorting\r\n    if (typeof aValue === 'string' && typeof bValue === 'string') {\r\n      return direction === 'asc' \r\n        ? aValue.localeCompare(bValue, 'he') \r\n        : bValue.localeCompare(aValue, 'he');\r\n    }\r\n\r\n    // Handle number sorting\r\n    if (direction === 'asc') {\r\n      return aValue < bValue ? -1 : aValue > bValue ? 1 : 0;\r\n    } else {\r\n      return aValue > bValue ? -1 : aValue < bValue ? 1 : 0;\r\n    }\r\n  });\r\n\r\n  const { paginatedItems, totalPages } = paginate(\r\n    sortedLocations,\r\n    currentPage,\r\n    UI_CONFIG.TABLE_PAGE_SIZE\r\n  );\r\n\r\n  // Modern selection hook - use all sorted items for selection, not just paginated\r\n  const {\r\n    selectedIds,\r\n    isSelected,\r\n    toggleSelection,\r\n    clearSelection,\r\n    selectAll,\r\n    selectedCount\r\n  } = useModernTableSelection({\r\n    items: sortedLocations,\r\n    multiSelect: true\r\n  });\r\n\r\n  const handleSort = (key: keyof LocationEntity | 'unitName') => {\r\n    let direction: 'asc' | 'desc' = 'asc';\r\n    if (sortConfig && sortConfig.key === key && sortConfig.direction === 'asc') {\r\n      direction = 'desc';\r\n    }\r\n    setSortConfig({ key, direction });\r\n    setCurrentPage(1); // Reset to first page when sorting\r\n  };\r\n\r\n  const resetAddForm = () => {\r\n    setNewLocationData({ name: '', unitId: '' });\r\n    setIsAddModalOpen(false);\r\n  };\r\n\r\n  const resetEditForm = () => {\r\n    setEditLocationData({ name: '', unitId: '' });\r\n    setEditingLocation(null);\r\n  };\r\n\r\n  const handleAdd = async () => {\r\n    if (!newLocationData.name.trim() || !newLocationData.unitId) return;\r\n\r\n    setIsSubmitting(true);\r\n    try {\r\n      const result = await onAdd(newLocationData);\r\n      if (result.success) {\r\n        resetAddForm();\r\n      } else if (result.isConflict) {\r\n        setConflictError({\r\n          isOpen: true,\r\n          message: result.error || 'מיקום עם שם זה כבר קיים ביחידה זו',\r\n          itemName: newLocationData.name,\r\n        });\r\n      } else {\r\n        setNotification({\r\n          isOpen: true,\r\n          message: result.error || 'שגיאה ביצירת מיקום',\r\n          type: 'error',\r\n        });\r\n      }\r\n    } catch (error) {\r\n      setNotification({\r\n        isOpen: true,\r\n        message: 'שגיאה ביצירת מיקום',\r\n        type: 'error',\r\n      });\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  const handleEdit = async () => {\r\n    if (!editingLocation || (!editLocationData.name.trim() && !editLocationData.unitId)) return;\r\n\r\n    setIsSubmitting(true);\r\n    try {\r\n      const updateData: { name?: string; unitId?: string } = {};\r\n      if (editLocationData.name.trim()) updateData.name = editLocationData.name.trim();\r\n      if (editLocationData.unitId) updateData.unitId = editLocationData.unitId;\r\n\r\n      const result = await onEdit(editingLocation.id, updateData);\r\n      if (result.success) {\r\n        resetEditForm();\r\n      } else if (result.isConflict) {\r\n        setConflictError({\r\n          isOpen: true,\r\n          message: result.error || 'מיקום עם שם זה כבר קיים ביחידה זו',\r\n          itemName: editLocationData.name || editingLocation.name,\r\n        });\r\n      } else {\r\n        setNotification({\r\n          isOpen: true,\r\n          message: result.error || 'שגיאה בעדכון מיקום',\r\n          type: 'error',\r\n        });\r\n      }\r\n    } catch (error) {\r\n      setNotification({\r\n        isOpen: true,\r\n        message: 'שגיאה בעדכון מיקום',\r\n        type: 'error',\r\n      });\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  const handleBulkDelete = async () => {\r\n    if (selectedIds.length === 0) return;\r\n\r\n    const confirmMessage = `האם אתה בטוח שברצונך למחוק ${selectedIds.length} מיקומים?`;\r\n    if (!window.confirm(confirmMessage)) return;\r\n\r\n    setIsSubmitting(true);\r\n    try {\r\n      const result = await onDelete(selectedIds);\r\n      if (result.success) {\r\n        clearSelection();\r\n      } else {\r\n        setNotification({\r\n          isOpen: true,\r\n          message: result.error || 'שגיאה במחיקת מיקומים',\r\n          type: 'error',\r\n        });\r\n      }\r\n    } catch (error) {\r\n      setNotification({\r\n        isOpen: true,\r\n        message: 'שגיאה במחיקת מיקומים',\r\n        type: 'error',\r\n      });\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  const openEditModal = (location: LocationEntity) => {\r\n    setEditingLocation(location);\r\n    setEditLocationData({ name: location.name, unitId: location.unitId });\r\n  };\r\n\r\n  if (error) {\r\n    return (\r\n      <div className=\"error-container\">\r\n        <p className=\"error-message\">{error}</p>\r\n        <button className=\"btn btn-primary\" onClick={onRefresh}>\r\n          נסה שוב\r\n        </button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {/* Compact Header with Actions */}\r\n      <div className=\"management-header-compact\">\r\n        <div className=\"management-search-section\">\r\n          <SearchInput\r\n            value={searchTerm}\r\n            onChange={(value) => {\r\n              setSearchTerm(value);\r\n              setCurrentPage(1);\r\n            }}\r\n            placeholder=\"חיפוש מיקומים או יחידות...\"\r\n            resultsCount={filteredLocations.length}\r\n            resultsLabel=\"מיקומים\"\r\n          />\r\n        </div>\r\n        \r\n        <div className=\"management-actions-compact\">\r\n          <button\r\n            className=\"btn btn-primary btn-sm\"\r\n            onClick={() => setIsAddModalOpen(true)}\r\n            disabled={loading}\r\n            title=\"הוסף מיקום חדש\"\r\n            style={{\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              justifyContent: 'center',\r\n              gap: '6px',\r\n              padding: '0 16px'\r\n            }}\r\n          >\r\n            <i className=\"fas fa-plus\" style={{ fontSize: '13px' }}></i>\r\n            <span style={{ fontSize: '13px', fontWeight: '600' }}>הוסף חדש</span>\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Modern Selection Toolbar */}\r\n      <SelectionToolbar\r\n        selectedCount={selectedCount}\r\n        totalCount={sortedLocations.length}\r\n        onDelete={handleBulkDelete}\r\n        onClear={clearSelection}\r\n        onSelectAll={selectAll}\r\n        isDeleting={isSubmitting}\r\n        isVisible={selectedCount > 0}\r\n      />\r\n\r\n      {loading ? (\r\n        <LoadingSpinner \r\n          message=\"טוען מיקומים...\" \r\n          padding=\"80px 20px\"\r\n          minHeight=\"400px\"\r\n        />\r\n      ) : (\r\n        <>\r\n          <div className=\"unified-table-container\">\r\n            <table className=\"unified-table\">\r\n              <thead>\r\n                <tr>\r\n                  <th \r\n                    className=\"unified-table-header unified-table-header-first sortable\"\r\n                    onClick={() => handleSort('name')}\r\n                    title=\"לחץ למיון לפי שם המיקום\"\r\n                    data-sorted={sortConfig?.key === 'name' ? 'true' : 'false'}\r\n                  >\r\n                    <div>\r\n                      <span>שם המיקום</span>\r\n                    </div>\r\n                  </th>\r\n                  <th \r\n                    className=\"unified-table-header unified-table-header-regular sortable\"\r\n                    onClick={() => handleSort('unitName')}\r\n                    title=\"לחץ למיון לפי יחידה\"\r\n                    data-sorted={sortConfig?.key === 'unitName' ? 'true' : 'false'}\r\n                  >\r\n                    <div>\r\n                      <span>יחידה</span>\r\n                    </div>\r\n                  </th>\r\n                  <th \r\n                    className=\"unified-table-header unified-table-header-regular sortable\"\r\n                    onClick={() => handleSort('createdAt')}\r\n                    title=\"לחץ למיון לפי תאריך יצירה\"\r\n                    data-sorted={sortConfig?.key === 'createdAt' ? 'true' : 'false'}\r\n                  >\r\n                    <div>\r\n                      <span>תאריך יצירה</span>\r\n                    </div>\r\n                  </th>\r\n                  <th \r\n                    className=\"unified-table-header unified-table-header-regular sortable\"\r\n                    onClick={() => handleSort('updatedAt')}\r\n                    title=\"לחץ למיון לפי תאריך עדכון\"\r\n                    data-sorted={sortConfig?.key === 'updatedAt' ? 'true' : 'false'}\r\n                  >\r\n                    <div>\r\n                      <span>תאריך עדכון</span>\r\n                    </div>\r\n                  </th>\r\n                  <th className=\"unified-table-header unified-table-header-regular\" style={{ width: '100px' }}>\r\n                    <div>\r\n                      <span>פעולות</span>\r\n                    </div>\r\n                  </th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {paginatedItems.map((location) => (\r\n                  <tr \r\n                    key={location.id} \r\n                    className={`unified-table-row modern-table-row ${isSelected(location.id) ? 'selected' : ''}`}\r\n                    onClick={(e) => toggleSelection(location.id, e)}\r\n                    title=\"לחץ לבחירה\"\r\n                  >\r\n                    <td className=\"unified-table-cell unified-table-cell-first\">{location.name}</td>\r\n                    <td className=\"unified-table-cell\">{getUnitName(location.unitId)}</td>\r\n                    <td className=\"unified-table-cell\">{new Date(location.createdAt).toLocaleDateString('he-IL')}</td>\r\n                    <td className=\"unified-table-cell\">{new Date(location.updatedAt).toLocaleDateString('he-IL')}</td>\r\n                    <td className=\"unified-table-cell unified-table-cell-actions\">\r\n                      <button\r\n                        className=\"unified-action-btn unified-action-btn-primary unified-action-btn-sm\"\r\n                        onClick={(e) => {\r\n                          e.stopPropagation();\r\n                          openEditModal(location);\r\n                        }}\r\n                      >\r\n                        עדכן\r\n                      </button>\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n\r\n          {totalPages > 1 && (\r\n            <div className=\"pagination-container\">\r\n              <SmartPagination\r\n                currentPage={currentPage}\r\n                totalPages={totalPages}\r\n                onPageChange={setCurrentPage}\r\n              />\r\n            </div>\r\n          )}\r\n        </>\r\n      )}\r\n\r\n      {/* Add Location Modal */}\r\n      <Modal\r\n        isOpen={isAddModalOpen}\r\n        onClose={resetAddForm}\r\n        title=\"הוסף מיקום חדש\"\r\n      >\r\n        <div className=\"form-group\">\r\n          <label className=\"form-label\">שם המיקום</label>\r\n          <input\r\n            type=\"text\"\r\n            className=\"form-control\"\r\n            value={newLocationData.name}\r\n            onChange={(e) => setNewLocationData(prev => ({ ...prev, name: e.target.value }))}\r\n            placeholder=\"הכנס שם מיקום\"\r\n          />\r\n        </div>\r\n        <div className=\"form-group\">\r\n          <label className=\"form-label\">יחידה</label>\r\n          <select\r\n            className=\"form-control\"\r\n            value={newLocationData.unitId}\r\n            onChange={(e) => setNewLocationData(prev => ({ ...prev, unitId: e.target.value }))}\r\n          >\r\n            <option value=\"\">בחר יחידה</option>\r\n            {units.map(unit => (\r\n              <option key={unit.id} value={unit.id}>{unit.name}</option>\r\n            ))}\r\n          </select>\r\n        </div>\r\n        <div className=\"btn-group btn-group-end\">\r\n          <button className=\"btn btn-ghost\" onClick={resetAddForm}>\r\n            ביטול\r\n          </button>\r\n          <button \r\n            className=\"btn btn-primary\" \r\n            onClick={handleAdd}\r\n            disabled={isSubmitting || !newLocationData.name.trim() || !newLocationData.unitId}\r\n          >\r\n            {isSubmitting ? 'יוצר...' : 'צור'}\r\n          </button>\r\n        </div>\r\n      </Modal>\r\n\r\n      {/* Edit Location Modal */}\r\n      <Modal\r\n        isOpen={!!editingLocation}\r\n        onClose={resetEditForm}\r\n        title=\"ערוך מיקום\"\r\n      >\r\n        <div className=\"form-group\">\r\n          <label className=\"form-label\">שם המיקום</label>\r\n          <input\r\n            type=\"text\"\r\n            className=\"form-control\"\r\n            value={editLocationData.name}\r\n            onChange={(e) => setEditLocationData(prev => ({ ...prev, name: e.target.value }))}\r\n            placeholder={editingLocation?.name}\r\n          />\r\n        </div>\r\n        <div className=\"form-group\">\r\n          <label className=\"form-label\">יחידה</label>\r\n          <select\r\n            className=\"form-control\"\r\n            value={editLocationData.unitId}\r\n            onChange={(e) => setEditLocationData(prev => ({ ...prev, unitId: e.target.value }))}\r\n          >\r\n            <option value=\"\">השאר ללא שינוי</option>\r\n            {units.map(unit => (\r\n              <option key={unit.id} value={unit.id}>{unit.name}</option>\r\n            ))}\r\n          </select>\r\n        </div>\r\n        <div className=\"btn-group btn-group-end\">\r\n          <button className=\"btn btn-ghost\" onClick={resetEditForm}>\r\n            ביטול\r\n          </button>\r\n          <button \r\n            className=\"btn btn-primary\" \r\n            onClick={handleEdit}\r\n            disabled={isSubmitting || (!editLocationData.name.trim() && !editLocationData.unitId)}\r\n          >\r\n            {isSubmitting ? 'מעדכן...' : 'עדכן'}\r\n          </button>\r\n        </div>\r\n      </Modal>\r\n\r\n      {/* Conflict Error Modal */}\r\n      <ConflictErrorModal\r\n        isOpen={conflictError.isOpen}\r\n        onClose={() => setConflictError({ isOpen: false, message: '', itemName: '' })}\r\n        title=\"מיקום כבר קיים\"\r\n        message={conflictError.message}\r\n        resolutionMessage=\"אנא בחר שם אחר למיקום או יחידה אחרת.\"\r\n        type=\"item\"\r\n      />\r\n\r\n      {/* Notification Modal */}\r\n      <NotificationModal\r\n        isOpen={notification.isOpen}\r\n        onClose={() => setNotification({ isOpen: false, message: '', type: 'error' })}\r\n        message={notification.message}\r\n        type={notification.type}\r\n      />\r\n    </>\r\n  );\r\n};\r\n","import React, { useEffect, useState } from 'react';\r\nimport { LocationsTable } from './LocationsTable';\r\nimport { useManagement } from '../../contexts';\r\nimport { BulkDeleteErrorModal } from '../../shared/components';\r\n\r\nexport const LocationsTab: React.FC = () => {\r\n  const { \r\n    locations, \r\n    units,\r\n    loading, \r\n    error, \r\n    createLocation, \r\n    updateLocation, \r\n    deleteLocations, \r\n    loadLocations,\r\n    loadUnits,\r\n  } = useManagement();\r\n\r\n  const [bulkDeleteError, setBulkDeleteError] = useState({\r\n    isOpen: false,\r\n    message: '',\r\n    deletedCount: 0,\r\n    totalCount: 0,\r\n    errors: [] as string[],\r\n  });\r\n\r\n  // Lazy load locations & units for selector\r\n  useEffect(() => {\r\n    if (!locations || locations.length === 0) {\r\n      loadLocations();\r\n    }\r\n    if (!units || units.length === 0) {\r\n      loadUnits();\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      <LocationsTable\r\n        locations={locations}\r\n        units={units}\r\n        loading={loading}\r\n        error={error}\r\n        onAdd={async (data) => {\r\n          const result = await createLocation(data);\r\n          return {\r\n            success: result.success,\r\n            error: result.error,\r\n            isConflict: result.isConflict,\r\n          };\r\n        }}\r\n        onEdit={async (id, data) => {\r\n          const result = await updateLocation(id, data);\r\n          if (result.success) {\r\n            await loadLocations();\r\n          }\r\n          return {\r\n            success: result.success,\r\n            error: result.error,\r\n            isConflict: result.isConflict,\r\n          };\r\n        }}\r\n        onDelete={async (ids) => {\r\n          const result = await deleteLocations({ ids });\r\n          const deletedCount = (result as any)?.data?.deleted ?? 0;\r\n          const errors: string[] = (result as any)?.data?.errors ?? [];\r\n\r\n          if (result.success) {\r\n            await loadLocations();\r\n          }\r\n\r\n          if (result.success && (deletedCount < ids.length || errors.length > 0)) {\r\n            setBulkDeleteError({\r\n              isOpen: true,\r\n              message: result.error || 'חלק מהמיקומים לא נמחקו עקב שיוך משתמשים למיקום.',\r\n              deletedCount,\r\n              totalCount: ids.length,\r\n              errors,\r\n            });\r\n            // suppress outer alert\r\n            return { success: true };\r\n          }\r\n\r\n          if (!result.success) {\r\n            setBulkDeleteError({\r\n              isOpen: true,\r\n              message: result.error || 'שגיאה במחיקת מיקומים',\r\n              deletedCount,\r\n              totalCount: ids.length,\r\n              errors,\r\n            });\r\n          }\r\n\r\n          return {\r\n            success: result.success,\r\n            error: result.error,\r\n          };\r\n        }}\r\n        onRefresh={() => { loadLocations(); }}\r\n      />\r\n\r\n      <BulkDeleteErrorModal\r\n        isOpen={bulkDeleteError.isOpen}\r\n        onClose={() => setBulkDeleteError({ isOpen: false, message: '', deletedCount: 0, totalCount: 0, errors: [] })}\r\n        title=\"תוצאות מחיקה מרובה - מיקומים\"\r\n        message={bulkDeleteError.message}\r\n        deletedCount={bulkDeleteError.deletedCount}\r\n        totalCount={bulkDeleteError.totalCount}\r\n        errors={bulkDeleteError.errors}\r\n        type=\"location\"\r\n      />\r\n    </>\r\n  );\r\n};\r\n","import React, { useEffect, useState } from 'react';\r\nimport { ManagementTable } from './ManagementTable';\r\nimport { useManagement } from '../../contexts';\r\nimport { BulkDeleteErrorModal } from '../../shared/components';\r\n\r\nexport const ItemNamesTab: React.FC = () => {\r\n  const { \r\n    itemNames, \r\n    loading, \r\n    error, \r\n    createItemName, \r\n    updateItemName, \r\n    deleteItemNames, \r\n    loadItemNames \r\n  } = useManagement();\r\n\r\n  const [bulkDeleteError, setBulkDeleteError] = useState({\r\n    isOpen: false,\r\n    message: '',\r\n    deletedCount: 0,\r\n    totalCount: 0,\r\n    errors: [] as string[],\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (!itemNames || itemNames.length === 0) {\r\n      loadItemNames();\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      <ManagementTable\r\n        title=\"שם פריט\"\r\n        items={itemNames}\r\n        loading={loading}\r\n        error={error}\r\n        onAdd={async (name) => {\r\n          const result = await createItemName({ name });\r\n          return {\r\n            success: result.success,\r\n            error: result.error,\r\n            isConflict: result.isConflict,\r\n          };\r\n        }}\r\n        onEdit={async (id, name) => {\r\n          const result = await updateItemName(id, { name });\r\n          if (result.success) {\r\n            await loadItemNames();\r\n          }\r\n          return {\r\n            success: result.success,\r\n            error: result.error,\r\n            isConflict: result.isConflict,\r\n          };\r\n        }}\r\n        onDelete={async (ids) => {\r\n          const result = await deleteItemNames({ ids });\r\n          const deletedCount = (result as any)?.data?.deleted ?? (result as any)?.data?.deletedCount ?? 0;\r\n          const errors: string[] = (result as any)?.data?.errors ?? [];\r\n\r\n          if (result.success) {\r\n            // Always refetch to reflect server truth\r\n            await loadItemNames();\r\n          }\r\n\r\n          if (result.success && (deletedCount < ids.length || errors.length > 0)) {\r\n            setBulkDeleteError({\r\n              isOpen: true,\r\n              message: result.error || 'חלק משמות הפריטים לא נמחקו עקב תלות בפריטים קיימים.',\r\n              deletedCount,\r\n              totalCount: ids.length,\r\n              errors,\r\n            });\r\n            // Suppress generic alert in table\r\n            return { success: true };\r\n          }\r\n\r\n          if (!result.success) {\r\n            setBulkDeleteError({\r\n              isOpen: true,\r\n              message: result.error || 'שגיאה במחיקת שמות פריטים',\r\n              deletedCount,\r\n              totalCount: ids.length,\r\n              errors,\r\n            });\r\n          }\r\n\r\n          return {\r\n            success: result.success,\r\n            error: result.error,\r\n          };\r\n        }}\r\n        onRefresh={() => { loadItemNames(); }}\r\n      />\r\n\r\n      <BulkDeleteErrorModal\r\n        isOpen={bulkDeleteError.isOpen}\r\n        onClose={() => setBulkDeleteError({ isOpen: false, message: '', deletedCount: 0, totalCount: 0, errors: [] })}\r\n        title=\"תוצאות מחיקה מרובה - שמות פריטים\"\r\n        message={bulkDeleteError.message}\r\n        deletedCount={bulkDeleteError.deletedCount}\r\n        totalCount={bulkDeleteError.totalCount}\r\n        errors={bulkDeleteError.errors}\r\n        type=\"itemName\"\r\n      />\r\n    </>\r\n  );\r\n};\r\n","import React, { useEffect, useState, useMemo } from 'react';\r\nimport { AllocationEntity, CreateAllocationRequest, UpdateAllocationRequest } from '../../types';\r\nimport { managementService } from '../../services';\r\nimport { BulkDeleteErrorModal, Modal, LoadingSpinner, NotificationModal, SearchInput } from '../../shared/components';\r\nimport { SelectionToolbar } from '../../shared/components';\r\nimport { useModernTableSelection } from '../../hooks';\r\nimport type { NotificationType } from '../../shared/components/NotificationModal';\r\n\r\ninterface EditingCell {\r\n  id: string;\r\n  field: keyof AllocationEntity;\r\n  value: string | boolean;\r\n}\r\n\r\nexport const AllocationsTab: React.FC = () => {\r\n  const [allocations, setAllocations] = useState<AllocationEntity[]>([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [editingCell, setEditingCell] = useState<EditingCell | null>(null);\r\n  const [isAddModalOpen, setIsAddModalOpen] = useState(false);\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  const [newAllocation, setNewAllocation] = useState<CreateAllocationRequest>({\r\n    unit: '',\r\n    secondaryUnit: '',\r\n    owner: '',\r\n    vehicleType: '',\r\n    idNumber: '',\r\n    standard: '',\r\n    isIssued: false,\r\n    form624: '',\r\n    is624Issued: false,\r\n    note: '',\r\n  });\r\n  \r\n  const [bulkDeleteError, setBulkDeleteError] = useState({\r\n    isOpen: false,\r\n    message: '',\r\n    deletedCount: 0,\r\n    totalCount: 0,\r\n    errors: [] as string[],\r\n  });\r\n\r\n  const [sortConfig, setSortConfig] = useState<{\r\n    key: keyof AllocationEntity;\r\n    direction: 'asc' | 'desc';\r\n  } | null>(null);\r\n\r\n  const [notification, setNotification] = useState<{\r\n    isOpen: boolean;\r\n    type: NotificationType;\r\n    message: string;\r\n    title?: string;\r\n  }>({\r\n    isOpen: false,\r\n    type: 'info',\r\n    message: ''\r\n  });\r\n\r\n  const showNotification = (type: NotificationType, message: string, title?: string) => {\r\n    setNotification({\r\n      isOpen: true,\r\n      type,\r\n      message,\r\n      title\r\n    });\r\n  };\r\n\r\n  const closeNotification = () => {\r\n    setNotification(prev => ({ ...prev, isOpen: false }));\r\n  };\r\n\r\n  useEffect(() => {\r\n    loadAllocations();\r\n  }, []);\r\n\r\n  const loadAllocations = async () => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const result = await managementService.getAllAllocations();\r\n      if (result.success && result.data) {\r\n        setAllocations(result.data);\r\n      } else {\r\n        setError(result.error || 'שגיאה בטעינת השבצ\"ק');\r\n      }\r\n    } catch (err: any) {\r\n      setError('שגיאה בטעינת השבצ\"ק');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleSort = (key: keyof AllocationEntity) => {\r\n    let direction: 'asc' | 'desc' = 'asc';\r\n    if (sortConfig && sortConfig.key === key && sortConfig.direction === 'asc') {\r\n      direction = 'desc';\r\n    }\r\n    setSortConfig({ key, direction });\r\n  };\r\n\r\n  const filteredAndSortedAllocations = useMemo(() => {\r\n    let filtered = allocations.filter(allocation => {\r\n      const searchLower = searchTerm.toLowerCase().normalize('NFC');\r\n      return (\r\n        allocation.unit.toLowerCase().normalize('NFC').includes(searchLower) ||\r\n        allocation.secondaryUnit.toLowerCase().normalize('NFC').includes(searchLower) ||\r\n        allocation.owner.toLowerCase().normalize('NFC').includes(searchLower) ||\r\n        allocation.standard.toLowerCase().normalize('NFC').includes(searchLower) ||\r\n        (allocation.vehicleType && allocation.vehicleType.toLowerCase().normalize('NFC').includes(searchLower)) ||\r\n        (allocation.idNumber && allocation.idNumber.toLowerCase().normalize('NFC').includes(searchLower)) ||\r\n        (allocation.form624 && allocation.form624.toLowerCase().normalize('NFC').includes(searchLower)) ||\r\n        (allocation.note && allocation.note.toLowerCase().normalize('NFC').includes(searchLower))\r\n      );\r\n    });\r\n\r\n    if (sortConfig) {\r\n      filtered.sort((a, b) => {\r\n        let aValue = a[sortConfig.key];\r\n        let bValue = b[sortConfig.key];\r\n        \r\n        // Handle null values\r\n        if (aValue === null) aValue = '';\r\n        if (bValue === null) bValue = '';\r\n        \r\n        // Convert to string for comparison if needed\r\n        if (typeof aValue === 'boolean') aValue = aValue.toString();\r\n        if (typeof bValue === 'boolean') bValue = bValue.toString();\r\n        \r\n        if (typeof aValue === 'string' && typeof bValue === 'string') {\r\n          const result = aValue.localeCompare(bValue, 'he');\r\n          return sortConfig.direction === 'asc' ? result : -result;\r\n        }\r\n        \r\n        if (aValue < bValue) return sortConfig.direction === 'asc' ? -1 : 1;\r\n        if (aValue > bValue) return sortConfig.direction === 'asc' ? 1 : -1;\r\n        return 0;\r\n      });\r\n    }\r\n\r\n    return filtered;\r\n  }, [allocations, searchTerm, sortConfig]);\r\n\r\n  // Modern selection hook\r\n  const {\r\n    selectedIds,\r\n    isSelected,\r\n    toggleSelection,\r\n    clearSelection,\r\n    selectAll,\r\n    selectedCount\r\n  } = useModernTableSelection({\r\n    items: filteredAndSortedAllocations,\r\n    multiSelect: true\r\n  });\r\n\r\n  const handleCellClick = (allocation: AllocationEntity, field: keyof AllocationEntity) => {\r\n    if (field === 'id' || field === 'createdAt' || field === 'updatedAt') return;\r\n    \r\n    setEditingCell({\r\n      id: allocation.id,\r\n      field,\r\n      value: allocation[field] || ''\r\n    });\r\n  };\r\n\r\n  const handleCellSave = async () => {\r\n    if (!editingCell) return;\r\n\r\n    try {\r\n      const updateData: UpdateAllocationRequest = {\r\n        [editingCell.field]: editingCell.value\r\n      };\r\n\r\n      const result = await managementService.updateAllocation(editingCell.id, updateData);\r\n      \r\n      if (result.success) {\r\n        setAllocations(prev => prev.map(allocation => \r\n          allocation.id === editingCell.id \r\n            ? { ...allocation, [editingCell.field]: editingCell.value }\r\n            : allocation\r\n        ));\r\n        setEditingCell(null);\r\n      } else {\r\n        showNotification('error', result.error || 'שגיאה בעדכון השבצק');\r\n      }\r\n    } catch (err: any) {\r\n      showNotification('error', 'שגיאה בעדכון השבצק');\r\n    }\r\n  };\r\n\r\n  const handleCellCancel = () => {\r\n    setEditingCell(null);\r\n  };\r\n\r\n  const handleKeyDown = (e: React.KeyboardEvent) => {\r\n    if (e.key === 'Enter') {\r\n      handleCellSave();\r\n    } else if (e.key === 'Escape') {\r\n      handleCellCancel();\r\n    }\r\n  };\r\n\r\n  const handleCreate = async () => {\r\n    if (!newAllocation.unit || !newAllocation.secondaryUnit || !newAllocation.owner || !newAllocation.standard) {\r\n      showNotification('warning', 'יש למלא את כל השדות הדרושים: מסגרת, מסגרת משנה, בעת, תקן');\r\n      return;\r\n    }\r\n\r\n    setIsSubmitting(true);\r\n    try {\r\n      const result = await managementService.createAllocation(newAllocation);\r\n      \r\n      if (result.success && result.data) {\r\n        setAllocations(prev => [...prev, result.data!]);\r\n        setNewAllocation({\r\n          unit: '',\r\n          secondaryUnit: '',\r\n          owner: '',\r\n          vehicleType: '',\r\n          idNumber: '',\r\n          standard: '',\r\n          isIssued: false,\r\n          form624: '',\r\n          is624Issued: false,\r\n          note: '',\r\n        });\r\n        setIsAddModalOpen(false);\r\n      } else {\r\n        showNotification('error', result.error || 'שגיאה ביצירת השבצק');\r\n      }\r\n    } catch (err: any) {\r\n      showNotification('error', 'שגיאה ביצירת השבצק');\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  const handleDelete = async () => {\r\n    if (selectedIds.length === 0) {\r\n      showNotification('warning', 'יש לבחור פריטים למחיקה');\r\n      return;\r\n    }\r\n\r\n    if (!window.confirm(`האם אתה בטוח שברצונך למחוק ${selectedIds.length} שבצק?`)) {\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const result = await managementService.deleteAllocations({ ids: selectedIds });\r\n      \r\n      if (result.success && result.data) {\r\n        if (result.data.deleted) {\r\n          setAllocations(prev => prev.filter(allocation => !selectedIds.includes(allocation.id)));\r\n          clearSelection();\r\n          showNotification('success', `נמחקו בהצלחה ${result.data.deletedCount} שבצק`);\r\n        } else {\r\n          setBulkDeleteError({\r\n            isOpen: true,\r\n            message: result.data.message,\r\n            deletedCount: result.data.deletedCount,\r\n            totalCount: selectedIds.length,\r\n            errors: [],\r\n          });\r\n        }\r\n      } else {\r\n        showNotification('error', result.error || 'שגיאה במחיקת השבצק');\r\n      }\r\n    } catch (err: any) {\r\n      showNotification('error', 'שגיאה במחיקת השבצק');\r\n    }\r\n  };\r\n\r\n\r\n\r\n  const renderCell = (allocation: AllocationEntity, field: keyof AllocationEntity) => {\r\n    const isEditing = editingCell?.id === allocation.id && editingCell?.field === field;\r\n    const value = allocation[field];\r\n\r\n    if (field === 'id' || field === 'createdAt' || field === 'updatedAt') {\r\n      return <span>{String(value)}</span>;\r\n    }\r\n\r\n    if (isEditing) {\r\n      if (field === 'isIssued' || field === 'is624Issued') {\r\n        return (\r\n          <input\r\n            type=\"checkbox\"\r\n            checked={Boolean(editingCell.value)}\r\n            onChange={(e) => setEditingCell({ ...editingCell, value: e.target.checked })}\r\n            onBlur={handleCellSave}\r\n            onKeyDown={handleKeyDown}\r\n            autoFocus\r\n            className=\"form-check-input\"\r\n          />\r\n        );\r\n      }\r\n\r\n      return (\r\n        <input\r\n          type=\"text\"\r\n          value={String(editingCell.value)}\r\n          onChange={(e) => setEditingCell({ ...editingCell, value: e.target.value })}\r\n          onBlur={handleCellSave}\r\n          onKeyDown={handleKeyDown}\r\n          autoFocus\r\n          className=\"form-control form-control-sm\"\r\n          style={{ minWidth: '100px' }}\r\n        />\r\n      );\r\n    }\r\n\r\n    if (field === 'isIssued' || field === 'is624Issued') {\r\n      return (\r\n        <span \r\n          className={`badge ${value ? 'bg-success' : 'bg-secondary'}`}\r\n          onClick={() => handleCellClick(allocation, field)}\r\n          style={{ cursor: 'pointer' }}\r\n        >\r\n          {value ? 'כן' : 'לא'}\r\n        </span>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <span \r\n        onClick={() => handleCellClick(allocation, field)}\r\n        style={{ cursor: 'pointer', minHeight: '20px', display: 'block' }}\r\n        title=\"לחץ לעריכה\"\r\n      >\r\n        {value || '-'}\r\n      </span>\r\n    );\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <LoadingSpinner />\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <div className=\"alert alert-danger\">\r\n        <i className=\"fas fa-exclamation-circle me-2\"></i>\r\n        {error}\r\n        <button className=\"btn btn-outline-danger btn-sm ms-2\" onClick={loadAllocations}>\r\n          נסה שוב\r\n        </button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {/* Compact Header with Actions */}\r\n      <div className=\"management-header-compact\">\r\n        <div className=\"management-search-section\">\r\n          <SearchInput\r\n            value={searchTerm}\r\n            onChange={(value) => setSearchTerm(value)}\r\n            placeholder=\"חפש לפי מסגרת, מסגרת משנה, בעל, סוג הכלי, תקן...\"\r\n            resultsCount={filteredAndSortedAllocations.length}\r\n            resultsLabel=\"הקצאות\"\r\n          />\r\n        </div>\r\n        \r\n        <div className=\"management-actions-compact\">\r\n          <button\r\n            className=\"btn btn-primary btn-sm\"\r\n            onClick={() => setIsAddModalOpen(true)}\r\n            disabled={loading}\r\n            title=\"הוסף שבצק חדש\"\r\n            style={{\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              justifyContent: 'center',\r\n              gap: '6px',\r\n              padding: '0 16px'\r\n            }}\r\n          >\r\n            <i className=\"fas fa-plus\" style={{ fontSize: '13px' }}></i>\r\n            <span style={{ fontSize: '13px', fontWeight: '600' }}>הוסף חדש</span>\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Modern Selection Toolbar */}\r\n      <SelectionToolbar\r\n        selectedCount={selectedCount}\r\n        totalCount={filteredAndSortedAllocations.length}\r\n        onDelete={handleDelete}\r\n        onClear={clearSelection}\r\n        onSelectAll={selectAll}\r\n        isDeleting={isSubmitting}\r\n        isVisible={selectedCount > 0}\r\n      />\r\n\r\n      {/* Table */}\r\n      <div className=\"unified-table-container\">\r\n        <table className=\"unified-table\">\r\n          <thead>\r\n            <tr>\r\n              <th \r\n                className=\"unified-table-header unified-table-header-regular sortable\" \r\n                onClick={() => handleSort('unit')}\r\n                style={{ cursor: 'pointer' }}\r\n              >\r\n                מסגרת\r\n              </th>\r\n              <th \r\n                className=\"unified-table-header unified-table-header-regular sortable\" \r\n                onClick={() => handleSort('secondaryUnit')}\r\n                style={{ cursor: 'pointer' }}\r\n              >\r\n                מסגרת משנה\r\n              </th>\r\n              <th \r\n                className=\"unified-table-header unified-table-header-regular sortable\" \r\n                onClick={() => handleSort('owner')}\r\n                style={{ cursor: 'pointer' }}\r\n              >\r\n                בע\"ת\r\n              </th>\r\n              <th \r\n                className=\"unified-table-header unified-table-header-regular sortable\" \r\n                onClick={() => handleSort('vehicleType')}\r\n                style={{ cursor: 'pointer' }}\r\n              >\r\n                סוג הכלי\r\n              </th>\r\n              <th \r\n                className=\"unified-table-header unified-table-header-regular sortable\" \r\n                onClick={() => handleSort('idNumber')}\r\n                style={{ cursor: 'pointer' }}\r\n              >\r\n                צ'\r\n              </th>\r\n              <th \r\n                className=\"unified-table-header unified-table-header-regular sortable\" \r\n                onClick={() => handleSort('standard')}\r\n                style={{ cursor: 'pointer' }}\r\n              >\r\n                תקן\r\n              </th>\r\n              <th \r\n                className=\"unified-table-header unified-table-header-regular sortable\" \r\n                onClick={() => handleSort('isIssued')}\r\n                style={{ cursor: 'pointer' }}\r\n              >\r\n                הונפק קשר\r\n              </th>\r\n              <th \r\n                className=\"unified-table-header unified-table-header-regular sortable\" \r\n                onClick={() => handleSort('form624')}\r\n                style={{ cursor: 'pointer' }}\r\n              >\r\n                624\r\n              </th>\r\n              <th \r\n                className=\"unified-table-header unified-table-header-regular sortable\" \r\n                onClick={() => handleSort('is624Issued')}\r\n                style={{ cursor: 'pointer' }}\r\n              >\r\n                הונפק 624\r\n              </th>\r\n              <th \r\n                className=\"unified-table-header unified-table-header-regular sortable\" \r\n                onClick={() => handleSort('note')}\r\n                style={{ cursor: 'pointer' }}\r\n              >\r\n                הערות\r\n              </th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {filteredAndSortedAllocations.map((allocation) => (\r\n              <tr \r\n                key={allocation.id} \r\n                className={`unified-table-row modern-table-row ${isSelected(allocation.id) ? 'selected' : ''}`}\r\n                onClick={(e) => toggleSelection(allocation.id, e)}\r\n              >\r\n                <td className=\"unified-table-cell\">{renderCell(allocation, 'unit')}</td>\r\n                <td className=\"unified-table-cell\">{renderCell(allocation, 'secondaryUnit')}</td>\r\n                <td className=\"unified-table-cell\">{renderCell(allocation, 'owner')}</td>\r\n                <td className=\"unified-table-cell\">{renderCell(allocation, 'vehicleType')}</td>\r\n                <td className=\"unified-table-cell\">{renderCell(allocation, 'idNumber')}</td>\r\n                <td className=\"unified-table-cell\">{renderCell(allocation, 'standard')}</td>\r\n                <td className=\"unified-table-cell\">{renderCell(allocation, 'isIssued')}</td>\r\n                <td className=\"unified-table-cell\">{renderCell(allocation, 'form624')}</td>\r\n                <td className=\"unified-table-cell\">{renderCell(allocation, 'is624Issued')}</td>\r\n                <td className=\"unified-table-cell\">{renderCell(allocation, 'note')}</td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n\r\n      {filteredAndSortedAllocations.length === 0 && (\r\n        <div className=\"text-center py-4\">\r\n          <i className=\"fas fa-inbox fa-3x text-muted mb-3\"></i>\r\n          <h5 className=\"text-muted\">אין שבצ\"ק להצגה</h5>\r\n          <p className=\"text-muted\">\r\n            {searchTerm ? 'לא נמצאו תוצאות עבור החיפוש' : 'עדיין לא נוספו שבצ\"ק למערכת'}\r\n          </p>\r\n        </div>\r\n      )}\r\n\r\n      {/* Add Modal */}\r\n      <Modal\r\n        isOpen={isAddModalOpen}\r\n        onClose={() => {\r\n          setIsAddModalOpen(false);\r\n          setNewAllocation({\r\n            unit: '',\r\n            secondaryUnit: '',\r\n            owner: '',\r\n            vehicleType: '',\r\n            idNumber: '',\r\n            standard: '',\r\n            isIssued: false,\r\n            form624: '',\r\n            is624Issued: false,\r\n            note: '',\r\n          });\r\n        }}\r\n        title=\"הוסף שבצק חדש\"\r\n        size=\"lg\"\r\n      >\r\n        <div className=\"p-4\">\r\n          <div className=\"row g-3\">\r\n            <div className=\"col-md-6\">\r\n              <label className=\"form-label\">מסגרת <span className=\"text-danger\">*</span></label>\r\n              <input\r\n                type=\"text\"\r\n                className=\"form-control\"\r\n                value={newAllocation.unit}\r\n                onChange={(e) => setNewAllocation({ ...newAllocation, unit: e.target.value })}\r\n                placeholder=\"הכנס מסגרת\"\r\n              />\r\n            </div>\r\n            <div className=\"col-md-6\">\r\n              <label className=\"form-label\">מסגרת משנה <span className=\"text-danger\">*</span></label>\r\n              <input\r\n                type=\"text\"\r\n                className=\"form-control\"\r\n                value={newAllocation.secondaryUnit}\r\n                onChange={(e) => setNewAllocation({ ...newAllocation, secondaryUnit: e.target.value })}\r\n                placeholder=\"הכנס מסגרת משנה\"\r\n              />\r\n            </div>\r\n            <div className=\"col-md-6\">\r\n              <label className=\"form-label\">בע\"ת <span className=\"text-danger\">*</span></label>\r\n              <input\r\n                type=\"text\"\r\n                className=\"form-control\"\r\n                value={newAllocation.owner}\r\n                onChange={(e) => setNewAllocation({ ...newAllocation, owner: e.target.value })}\r\n                placeholder=\"הכנס בעת\"\r\n              />\r\n            </div>\r\n            <div className=\"col-md-6\">\r\n              <label className=\"form-label\">סוג הכלי</label>\r\n              <input\r\n                type=\"text\"\r\n                className=\"form-control\"\r\n                value={newAllocation.vehicleType || ''}\r\n                onChange={(e) => setNewAllocation({ ...newAllocation, vehicleType: e.target.value })}\r\n                placeholder=\"הכנס סוג הכלי\"\r\n              />\r\n            </div>\r\n            <div className=\"col-md-6\">\r\n              <label className=\"form-label\">תקן <span className=\"text-danger\">*</span></label>\r\n              <input\r\n                type=\"text\"\r\n                className=\"form-control\"\r\n                value={newAllocation.standard}\r\n                onChange={(e) => setNewAllocation({ ...newAllocation, standard: e.target.value })}\r\n                placeholder=\"הכנס תקן\"\r\n              />\r\n            </div>\r\n            <div className=\"col-md-6\">\r\n              <label className=\"form-label\">צ'</label>\r\n              <input\r\n                type=\"text\"\r\n                className=\"form-control\"\r\n                value={newAllocation.idNumber || ''}\r\n                onChange={(e) => setNewAllocation({ ...newAllocation, idNumber: e.target.value })}\r\n                placeholder=\"הכנס צ'\"\r\n              />\r\n            </div>\r\n            <div className=\"col-md-6\">\r\n              <label className=\"form-label\">624</label>\r\n              <input\r\n                type=\"text\"\r\n                className=\"form-control\"\r\n                value={newAllocation.form624 || ''}\r\n                onChange={(e) => setNewAllocation({ ...newAllocation, form624: e.target.value })}\r\n                placeholder=\"הכנס 624\"\r\n              />\r\n            </div>\r\n            <div className=\"col-md-12\">\r\n              <label className=\"form-label\">הערות</label>\r\n              <textarea\r\n                className=\"form-control\"\r\n                rows={3}\r\n                value={newAllocation.note || ''}\r\n                onChange={(e) => setNewAllocation({ ...newAllocation, note: e.target.value })}\r\n                placeholder=\"הכנס הערות\"\r\n              />\r\n            </div>\r\n            <div className=\"col-md-6\">\r\n              <div className=\"custom-checkbox-wrapper\">\r\n                <label className={`custom-checkbox ${newAllocation.isIssued ? 'checked' : ''}`}>\r\n                  <div style={{ position: 'relative' }}>\r\n                    <input\r\n                      type=\"checkbox\"\r\n                      checked={newAllocation.isIssued}\r\n                      onChange={(e) => setNewAllocation({ ...newAllocation, isIssued: e.target.checked })}\r\n                      style={{\r\n                        position: 'absolute',\r\n                        opacity: 0,\r\n                        cursor: 'pointer'\r\n                      }}\r\n                    />\r\n                    <div className=\"custom-checkbox-checkmark\">\r\n                      {newAllocation.isIssued && (\r\n                        <i className=\"fas fa-check checkmark-icon\"></i>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"custom-checkbox-label\">\r\n                    <strong>הונפק קשר</strong>\r\n                    <div className=\"checkbox-description\">מציין האם הקשר כבר הונפק</div>\r\n                  </div>\r\n                </label>\r\n              </div>\r\n            </div>\r\n            <div className=\"col-md-6\">\r\n              <div className=\"custom-checkbox-wrapper\">\r\n                <label className={`custom-checkbox ${newAllocation.is624Issued ? 'checked' : ''}`}>\r\n                  <div style={{ position: 'relative' }}>\r\n                    <input\r\n                      type=\"checkbox\"\r\n                      checked={newAllocation.is624Issued}\r\n                      onChange={(e) => setNewAllocation({ ...newAllocation, is624Issued: e.target.checked })}\r\n                      style={{\r\n                        position: 'absolute',\r\n                        opacity: 0,\r\n                        cursor: 'pointer'\r\n                      }}\r\n                    />\r\n                    <div className=\"custom-checkbox-checkmark\">\r\n                      {newAllocation.is624Issued && (\r\n                        <i className=\"fas fa-check checkmark-icon\"></i>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"custom-checkbox-label\">\r\n                    <strong>הונפק 624</strong>\r\n                    <div className=\"checkbox-description\">מציין האם 624 כבר הונפק</div>\r\n                  </div>\r\n                </label>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          \r\n          <div className=\"d-flex justify-content-end gap-2 mt-4\">\r\n            <button\r\n              type=\"button\"\r\n              className=\"btn btn-secondary\"\r\n              onClick={() => {\r\n                setIsAddModalOpen(false);\r\n                setNewAllocation({\r\n                  unit: '',\r\n                  secondaryUnit: '',\r\n                  owner: '',\r\n                  vehicleType: '',\r\n                  idNumber: '',\r\n                  standard: '',\r\n                  isIssued: false,\r\n                  form624: '',\r\n                  is624Issued: false,\r\n                  note: '',\r\n                });\r\n              }}\r\n            >\r\n              ביטול\r\n            </button>\r\n            <button\r\n              type=\"button\"\r\n              className=\"btn btn-primary\"\r\n              onClick={handleCreate}\r\n              disabled={!newAllocation.unit || !newAllocation.secondaryUnit || !newAllocation.owner || !newAllocation.standard || isSubmitting}\r\n            >\r\n              {isSubmitting ? 'שומר...' : 'הוסף'}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </Modal>\r\n\r\n      {/* Bulk Delete Error Modal */}\r\n      <BulkDeleteErrorModal\r\n        isOpen={bulkDeleteError.isOpen}\r\n        onClose={() => setBulkDeleteError({ ...bulkDeleteError, isOpen: false })}\r\n        title=\"שגיאה במחיקת שבצק\"\r\n        message={bulkDeleteError.message}\r\n        deletedCount={bulkDeleteError.deletedCount}\r\n        totalCount={bulkDeleteError.totalCount}\r\n        errors={bulkDeleteError.errors}\r\n        type=\"item\"\r\n      />\r\n\r\n      <NotificationModal\r\n        isOpen={notification.isOpen}\r\n        onClose={closeNotification}\r\n        type={notification.type}\r\n        message={notification.message}\r\n        title={notification.title}\r\n      />\r\n    </>\r\n  );\r\n};\r\n","import React, { useState, useEffect } from 'react';\r\nimport { managementService } from '../../services/management.service';\r\nimport { LoadingSpinner } from '../../shared/components';\r\nimport './ManagementSettingsTab.css';\r\n\r\ninterface ManagementSettings {\r\n  emailNotificationsEnabled: boolean;\r\n}\r\n\r\ninterface NotificationSettings {\r\n  enabled: boolean;\r\n  dayOfWeek: number; // 0 = Sunday, 6 = Saturday\r\n}\r\n\r\nconst ManagementSettingsTab: React.FC = () => {\r\n  const [settings, setSettings] = useState<ManagementSettings>({ \r\n    emailNotificationsEnabled: false \r\n  });\r\n  const [notificationSettings, setNotificationSettings] = useState<NotificationSettings>({\r\n    enabled: false,\r\n    dayOfWeek: 0 // Default to Sunday\r\n  });\r\n  const [loading, setLoading] = useState(true);\r\n  const [saving, setSaving] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [successMessage, setSuccessMessage] = useState<string | null>(null);\r\n\r\n  // Load settings on component mount\r\n  useEffect(() => {\r\n    loadSettings();\r\n  }, []);\r\n\r\n  const loadSettings = async () => {\r\n    try {\r\n      setLoading(true);\r\n      setError(null);\r\n      \r\n      // Load both general settings and notification settings\r\n      const [settingsResult, notificationResult] = await Promise.all([\r\n        managementService.getSettings(),\r\n        managementService.getNotificationSettings()\r\n      ]);\r\n      \r\n      if (settingsResult.success && settingsResult.data) {\r\n        setSettings(settingsResult.data);\r\n      } else {\r\n        setError(settingsResult.error || 'שגיאה בטעינת הגדרות');\r\n      }\r\n\r\n      if (notificationResult.success && notificationResult.data) {\r\n        setNotificationSettings(notificationResult.data);\r\n      } else {\r\n        console.warn('Failed to load notification settings:', notificationResult.error);\r\n      }\r\n    } catch (err) {\r\n      setError('שגיאה בטעינת הגדרות');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleUpdateSettings = async () => {\r\n    try {\r\n      setSaving(true);\r\n      setError(null);\r\n      setSuccessMessage(null);\r\n\r\n      // Update both general settings and notification settings\r\n      const [settingsResult, notificationResult] = await Promise.all([\r\n        managementService.updateSettings(settings),\r\n        managementService.updateNotificationSettings(notificationSettings)\r\n      ]);\r\n\r\n      if (settingsResult.success && settingsResult.data && notificationResult.success && notificationResult.data) {\r\n        setSettings(settingsResult.data);\r\n        setNotificationSettings(notificationResult.data);\r\n        setSuccessMessage('הגדרות נשמרו בהצלחה');\r\n        // Immediately refetch to ensure view mirrors server state\r\n        await loadSettings();\r\n        // Clear success message after 3 seconds\r\n        setTimeout(() => setSuccessMessage(null), 3000);\r\n      } else {\r\n        setError(settingsResult.error || notificationResult.error || 'שגיאה בשמירת הגדרות');\r\n      }\r\n    } catch (err) {\r\n      setError('שגיאה בשמירת הגדרות');\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n  const handleToggleSwitch = () => {\r\n    setSettings({ ...settings, emailNotificationsEnabled: !settings.emailNotificationsEnabled });\r\n  };\r\n\r\n  const handleNotificationToggle = () => {\r\n    setNotificationSettings({ ...notificationSettings, enabled: !notificationSettings.enabled });\r\n  };\r\n\r\n  const handleDayChange = (dayOfWeek: number) => {\r\n    setNotificationSettings({ ...notificationSettings, dayOfWeek });\r\n  };\r\n\r\n  // Day names in Hebrew (Sunday to Saturday)\r\n  const dayNames = [\r\n    'ראשון', 'שני', 'שלישי', 'רביעי', 'חמישי', 'שישי', 'שבת'\r\n  ];\r\n\r\n  if (loading) {\r\n    return (\r\n      <LoadingSpinner message=\"טוען הגדרות...\" />\r\n    );\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {/* Compact Header with Actions */}\r\n      <div className=\"management-header-compact\">\r\n        <div className=\"management-search-section\">\r\n          <div style={{ \r\n            display: 'flex', \r\n            alignItems: 'center', \r\n            gap: '16px',\r\n            color: 'var(--color-text-secondary)',\r\n            fontSize: '14px'\r\n          }}>\r\n            <i className=\"fas fa-cog\" style={{ fontSize: '16px' }}></i>\r\n            <span>הגדרות ניהול</span>\r\n          </div>\r\n        </div>\r\n        \r\n        <div className=\"management-actions-compact\">\r\n          <button\r\n            className=\"btn btn-primary btn-sm\"\r\n            onClick={handleUpdateSettings}\r\n            disabled={saving}\r\n            style={{\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              justifyContent: 'center',\r\n              gap: '6px',\r\n              padding: '0 16px'\r\n            }}\r\n          >\r\n            {saving ? (\r\n              <div className=\"saving-spinner\" style={{ width: '13px', height: '13px' }}></div>\r\n            ) : (\r\n              <i className=\"fas fa-save\" style={{ fontSize: '13px' }}></i>\r\n            )}\r\n            <span style={{ fontSize: '13px', fontWeight: '600' }}>\r\n              {saving ? 'שומר...' : 'שמור'}\r\n            </span>\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Status Messages */}\r\n      {error && (\r\n        <div style={{ \r\n          padding: '12px 16px',\r\n          margin: '16px 0',\r\n          background: 'rgba(239, 68, 68, 0.1)',\r\n          border: '1px solid rgba(239, 68, 68, 0.2)',\r\n          borderRadius: '8px',\r\n          color: '#ef4444',\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          gap: '8px'\r\n        }}>\r\n          <i className=\"fas fa-exclamation-triangle\"></i>\r\n          <span>{error}</span>\r\n        </div>\r\n      )}\r\n\r\n      {successMessage && (\r\n        <div style={{ \r\n          padding: '12px 16px',\r\n          margin: '16px 0',\r\n          background: 'rgba(34, 197, 94, 0.1)',\r\n          border: '1px solid rgba(34, 197, 94, 0.2)',\r\n          borderRadius: '8px',\r\n          color: '#22c55e',\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          gap: '8px'\r\n        }}>\r\n          <i className=\"fas fa-check-circle\"></i>\r\n          <span>{successMessage}</span>\r\n        </div>\r\n      )}\r\n\r\n      {/* Settings Content */}\r\n      <div style={{\r\n        background: 'var(--color-surface)',\r\n        border: '1px solid var(--color-border)',\r\n        borderRadius: '12px',\r\n        padding: '0',\r\n        overflow: 'hidden'\r\n      }}>\r\n        {/* Settings Section */}\r\n        <div style={{\r\n          padding: '24px 28px',\r\n          borderBottom: '1px solid var(--color-border)'\r\n        }}>\r\n          <div style={{\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'space-between',\r\n            marginBottom: '16px'\r\n          }}>\r\n            <div>\r\n              <div style={{\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                gap: '12px',\r\n                marginBottom: '6px'\r\n              }}>\r\n                <i className=\"fas fa-envelope\" style={{ \r\n                  color: 'var(--color-text-secondary)', \r\n                  fontSize: '18px' \r\n                }}></i>\r\n                <span style={{\r\n                  fontSize: '16px',\r\n                  fontWeight: '600',\r\n                  color: 'var(--color-text)'\r\n                }}>\r\n                  התראות במייל\r\n                </span>\r\n              </div>\r\n              <p style={{\r\n                fontSize: '14px',\r\n                color: 'var(--color-text-secondary)',\r\n                margin: '0',\r\n                paddingRight: '30px'\r\n              }}>\r\n                קבל התראות על פעילויות חשובות במערכת\r\n              </p>\r\n            </div>\r\n\r\n            {/* Modern Toggle Switch */}\r\n            <div style={{ display: 'flex', alignItems: 'center', gap: '12px' }}>\r\n              <span style={{\r\n                fontSize: '13px',\r\n                fontWeight: '500',\r\n                color: settings.emailNotificationsEnabled ? '#22c55e' : 'var(--color-text-muted)'\r\n              }}>\r\n                {settings.emailNotificationsEnabled ? 'פעיל' : 'כבוי'}\r\n              </span>\r\n              \r\n              <button\r\n                onClick={handleToggleSwitch}\r\n                disabled={saving}\r\n                style={{\r\n                  position: 'relative',\r\n                  width: '48px',\r\n                  height: '24px',\r\n                  borderRadius: '12px',\r\n                  border: 'none',\r\n                  cursor: saving ? 'not-allowed' : 'pointer',\r\n                  background: settings.emailNotificationsEnabled \r\n                    ? 'linear-gradient(45deg, #22c55e, #16a34a)' \r\n                    : 'var(--color-surface-alt)',\r\n                  transition: 'all 0.3s ease',\r\n                  outline: 'none',\r\n                  opacity: saving ? 0.6 : 1\r\n                }}\r\n              >\r\n                <div style={{\r\n                  position: 'absolute',\r\n                  top: '2px',\r\n                  left: settings.emailNotificationsEnabled ? '26px' : '2px',\r\n                  width: '20px',\r\n                  height: '20px',\r\n                  borderRadius: '50%',\r\n                  background: '#ffffff',\r\n                  transition: 'all 0.3s ease',\r\n                  boxShadow: '0 2px 4px rgba(0, 0, 0, 0.2)'\r\n                }} />\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Notification Schedule Settings Section */}\r\n        <div style={{\r\n          padding: '24px 28px',\r\n          borderBottom: '1px solid var(--color-border)'\r\n        }}>\r\n          {/* Header with title and toggle - responsive layout */}\r\n          <div style={{\r\n            display: 'flex',\r\n            flexDirection: window.innerWidth <= 768 ? 'column' : 'row',\r\n            alignItems: window.innerWidth <= 768 ? 'flex-start' : 'center',\r\n            justifyContent: 'space-between',\r\n            gap: '16px',\r\n            marginBottom: '16px'\r\n          }}>\r\n            <div style={{ flex: 1 }}>\r\n              <div style={{\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                gap: '12px',\r\n                marginBottom: '6px'\r\n              }}>\r\n                <i className=\"fas fa-calendar-alt\" style={{ \r\n                  color: 'var(--color-text-secondary)', \r\n                  fontSize: '18px' \r\n                }}></i>\r\n                <span style={{\r\n                  fontSize: '16px',\r\n                  fontWeight: '600',\r\n                  color: 'var(--color-text)'\r\n                }}>\r\n                  תזמון התראות שבועיות\r\n                </span>\r\n              </div>\r\n              <p style={{\r\n                fontSize: '14px',\r\n                color: 'var(--color-text-secondary)',\r\n                margin: '0 0 8px 0',\r\n                paddingRight: window.innerWidth <= 768 ? '0' : '30px'\r\n              }}>\r\n                בחר את היום בשבוע בו כל המשתמשים יקבלו התראת מייל\r\n              </p>\r\n            </div>\r\n\r\n            {/* Toggle Switch - responsive positioning */}\r\n            <div style={{ \r\n              display: 'flex', \r\n              alignItems: 'center', \r\n              gap: '12px',\r\n              alignSelf: window.innerWidth <= 768 ? 'flex-start' : 'flex-start',\r\n              marginTop: window.innerWidth <= 768 ? '0' : '4px'\r\n            }}>\r\n              <span style={{\r\n                fontSize: '13px',\r\n                fontWeight: '500',\r\n                color: notificationSettings.enabled ? '#22c55e' : 'var(--color-text-muted)'\r\n              }}>\r\n                {notificationSettings.enabled ? 'פעיל' : 'כבוי'}\r\n              </span>\r\n              \r\n              <button\r\n                onClick={handleNotificationToggle}\r\n                disabled={saving}\r\n                style={{\r\n                  position: 'relative',\r\n                  width: '48px',\r\n                  height: '24px',\r\n                  borderRadius: '12px',\r\n                  border: 'none',\r\n                  cursor: saving ? 'not-allowed' : 'pointer',\r\n                  background: notificationSettings.enabled \r\n                    ? 'linear-gradient(45deg, #22c55e, #16a34a)' \r\n                    : 'var(--color-surface-alt)',\r\n                  transition: 'all 0.3s ease',\r\n                  outline: 'none',\r\n                  opacity: saving ? 0.6 : 1\r\n                }}\r\n              >\r\n                <div style={{\r\n                  position: 'absolute',\r\n                  top: '2px',\r\n                  left: notificationSettings.enabled ? '26px' : '2px',\r\n                  width: '20px',\r\n                  height: '20px',\r\n                  borderRadius: '50%',\r\n                  background: '#ffffff',\r\n                  transition: 'all 0.3s ease',\r\n                  boxShadow: '0 2px 4px rgba(0, 0, 0, 0.2)'\r\n                }} />\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Day Selection - responsive grid */}\r\n          <div style={{ \r\n            paddingRight: window.innerWidth <= 768 ? '0' : '30px',\r\n            marginTop: '16px'\r\n          }}>\r\n            <div style={{\r\n              display: 'grid',\r\n              gridTemplateColumns: window.innerWidth <= 480 \r\n                ? 'repeat(2, 1fr)' \r\n                : window.innerWidth <= 768 \r\n                ? 'repeat(3, 1fr)' \r\n                : 'repeat(auto-fit, minmax(100px, 1fr))',\r\n              gap: '8px'\r\n            }}>\r\n              {dayNames.map((dayName, index) => (\r\n                <button\r\n                  key={index}\r\n                  onClick={() => handleDayChange(index)}\r\n                  disabled={saving || !notificationSettings.enabled}\r\n                  style={{\r\n                    padding: window.innerWidth <= 480 ? '10px 8px' : '8px 12px',\r\n                    border: '2px solid',\r\n                    borderColor: notificationSettings.dayOfWeek === index \r\n                      ? '#3b82f6' \r\n                      : 'var(--color-border)',\r\n                    borderRadius: '8px',\r\n                    background: notificationSettings.dayOfWeek === index \r\n                      ? '#3b82f6' \r\n                      : 'var(--color-surface)',\r\n                    color: notificationSettings.dayOfWeek === index \r\n                      ? '#ffffff' \r\n                      : 'var(--color-text)',\r\n                    fontSize: window.innerWidth <= 480 ? '12px' : '13px',\r\n                    fontWeight: '500',\r\n                    cursor: (saving || !notificationSettings.enabled) ? 'not-allowed' : 'pointer',\r\n                    transition: 'all 0.2s ease',\r\n                    opacity: !notificationSettings.enabled ? 0.5 : 1,\r\n                    minHeight: '36px',\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    justifyContent: 'center'\r\n                  }}\r\n                >\r\n                  {dayName}\r\n                </button>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Additional Settings Section (placeholder for future settings) */}\r\n        <div style={{\r\n          padding: '20px 28px',\r\n          textAlign: 'center',\r\n          color: 'var(--color-text-muted)',\r\n          fontSize: '14px'\r\n        }}>\r\n          <i className=\"fas fa-plus-circle\" style={{ \r\n            marginLeft: '8px', \r\n            fontSize: '16px',\r\n            opacity: 0.6 \r\n          }}></i>\r\n          הגדרות נוספות יתווספו בעתיד\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ManagementSettingsTab;\r\n","import React, { useState } from 'react';\r\nimport { managementService } from '../../services/management.service';\r\nimport { Modal } from '../../shared/components';\r\nimport { useManagement } from '../../contexts';\r\n\r\nconst BackupRestoreTab: React.FC = () => {\r\n  const [busy, setBusy] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [success, setSuccess] = useState<string | null>(null);\r\n  const [isConfirmOpen, setIsConfirmOpen] = useState(false);\r\n  const [pendingPayload, setPendingPayload] = useState<any | null>(null);\r\n  const [selectedFileName, setSelectedFileName] = useState<string>('');\r\n  const [override, setOverride] = useState<boolean>(false);\r\n  const [exportResult, setExportResult] = useState<any | null>(null);\r\n  const [importResult, setImportResult] = useState<any | null>(null);\r\n\r\n  const { loadAllData } = useManagement();\r\n\r\n  const handleExport = async () => {\r\n    try {\r\n      setBusy(true);\r\n      setError(null);\r\n      setSuccess(null);\r\n      setExportResult(null);\r\n      setImportResult(null);\r\n      \r\n      const resp = await managementService.exportDatabase();\r\n      \r\n      if (!resp.success) {\r\n        setBusy(false);\r\n        setError(resp.error || 'שגיאה בייצוא');\r\n        return;\r\n      }\r\n      \r\n      setExportResult(resp.data);\r\n      \r\n      const blob = new Blob([\r\n        JSON.stringify(resp.data.data, null, 2)\r\n      ], { type: 'application/json;charset=utf-8' });\r\n      const objectUrl = URL.createObjectURL(blob);\r\n      const a = document.createElement('a');\r\n      a.href = objectUrl;\r\n      a.download = `backup-${new Date().toISOString().replace(/[:.]/g, '-')}.json`;\r\n      document.body.appendChild(a);\r\n      a.click();\r\n      document.body.removeChild(a);\r\n      URL.revokeObjectURL(objectUrl);\r\n      \r\n      setSuccess('ייצוא הושלם והקובץ הורד בהצלחה');\r\n      setBusy(false);\r\n    } catch (e: any) {\r\n      setBusy(false);\r\n      setError(e?.message || 'שגיאה בייצוא');\r\n    }\r\n  };\r\n\r\n  const onFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const file = e.target.files?.[0];\r\n    if (file) {\r\n      openConfirmImport(file);\r\n    }\r\n  };\r\n\r\n  const openConfirmImport = async (file: File) => {\r\n    try {\r\n      setError(null);\r\n      setSuccess(null);\r\n      const text = await file.text();\r\n      const payload = JSON.parse(text);\r\n      setPendingPayload(payload);\r\n      setSelectedFileName(file.name || 'backup.json');\r\n      setIsConfirmOpen(true);\r\n    } catch (e: any) {\r\n      setError('קובץ גיבוי לא תקין. ודא שהקובץ הוא JSON תקין.');\r\n    }\r\n  };\r\n\r\n  const performImport = async () => {\r\n    if (!pendingPayload) {\r\n      setIsConfirmOpen(false);\r\n      return;\r\n    }\r\n    \r\n    try {\r\n      setBusy(true);\r\n      setError(null);\r\n      setSuccess(null);\r\n      setExportResult(null);\r\n      setImportResult(null);\r\n      setIsConfirmOpen(false);\r\n      \r\n      setSuccess('ייבוא החל - אנא המתן, פעולה זו עלולה לקחת זמן רב...');\r\n      \r\n      // Start the import process\r\n      const startResp = await managementService.startImport(pendingPayload, override);\r\n      \r\n      if (!startResp.success) {\r\n        setBusy(false);\r\n        setError(startResp.error || 'שגיאה בתחילת ייבוא');\r\n        setSuccess(null);\r\n        return;\r\n      }\r\n      \r\n      const importId = startResp.data?.id;\r\n      if (!importId) {\r\n        setBusy(false);\r\n        setError('לא התקבל מזהה תהליך ייבוא');\r\n        setSuccess(null);\r\n        return;\r\n      }\r\n      \r\n      // Poll for status updates\r\n      let completed = false;\r\n      let lastProgress = 0;\r\n      \r\n      while (!completed) {\r\n        await new Promise(resolve => setTimeout(resolve, 2000)); // Wait 2 seconds between polls\r\n        \r\n        try {\r\n          const statusResp = await managementService.getImportStatus(importId);\r\n          \r\n          if (!statusResp.success) {\r\n            setBusy(false);\r\n            setError(statusResp.error || 'שגיאה בבדיקת סטטוס ייבוא');\r\n            setSuccess(null);\r\n            return;\r\n          }\r\n          \r\n          const statusData = statusResp.data;\r\n          const progress = statusData?.progress ?? 0;\r\n          const done = statusData?.done ?? false;\r\n          const message = statusData?.message;\r\n          const status = statusData?.status;\r\n          const result = statusData?.result;\r\n          \r\n          // Update progress message\r\n          if (progress !== lastProgress || message) {\r\n            const progressText = progress > 0 ? ` (${Math.round(progress)}%)` : '';\r\n            const statusMessage = message || `מבצע ייבוא${progressText} - אנא המתן...`;\r\n            setSuccess(statusMessage);\r\n            lastProgress = progress;\r\n          }\r\n          \r\n          if (done || status === 'completed') {\r\n            completed = true;\r\n            setImportResult(result || {});\r\n            setSuccess('ייבוא הושלם בהצלחה');\r\n            setBusy(false);\r\n            await loadAllData();\r\n          } else if (status === 'failed' || status === 'error') {\r\n            setBusy(false);\r\n            setError(message || 'ייבוא נכשל');\r\n            setSuccess(null);\r\n            return;\r\n          }\r\n        } catch (pollError: any) {\r\n          // If polling fails, continue trying for a bit longer\r\n          console.warn('Status polling error:', pollError);\r\n          // Don't break immediately - server might be busy\r\n        }\r\n      }\r\n      \r\n    } catch (e: any) {\r\n      setBusy(false);\r\n      // Don't show timeout errors as user errors - they're expected for long imports\r\n      if (e?.code === 'ECONNABORTED' || e?.message?.includes('timeout')) {\r\n        setError('הייבוא עדיין פועל ברקע. אנא המתן מספר דקות נוספות ורענן את הדף.');\r\n      } else {\r\n        setError(e?.message || 'שגיאה בייבוא');\r\n      }\r\n      setSuccess(null);\r\n    } finally {\r\n      setPendingPayload(null);\r\n      setSelectedFileName('');\r\n      setOverride(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {/* Compact Header with Actions */}\r\n      <div className=\"management-header-compact\">\r\n        <div className=\"management-search-section\">\r\n          <div style={{ \r\n            display: 'flex', \r\n            alignItems: 'center', \r\n            gap: '16px',\r\n            color: 'var(--color-text-secondary)',\r\n            fontSize: '14px'\r\n          }}>\r\n            <i className=\"fas fa-database\" style={{ fontSize: '16px' }}></i>\r\n            <span>גיבוי ושחזור מסד נתונים</span>\r\n          </div>\r\n        </div>\r\n        \r\n        <div className=\"management-actions-compact\">\r\n          <button \r\n            className=\"btn btn-primary btn-sm\"\r\n            onClick={handleExport} \r\n            disabled={busy}\r\n            style={{\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              justifyContent: 'center',\r\n              gap: '6px',\r\n              padding: '0 16px'\r\n            }}\r\n          >\r\n            <i className=\"fas fa-download\" style={{ fontSize: '13px' }}></i>\r\n            <span style={{ fontSize: '13px', fontWeight: '600' }}>ייצוא</span>\r\n          </button>\r\n          \r\n          <label \r\n            className=\"btn btn-secondary btn-sm\"\r\n            style={{\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              justifyContent: 'center',\r\n              gap: '6px',\r\n              padding: '0 16px',\r\n              cursor: busy ? 'not-allowed' : 'pointer',\r\n              opacity: busy ? 0.6 : 1,\r\n              background: 'var(--color-surface)',\r\n              color: 'var(--color-text)',\r\n              border: '1px solid var(--color-border)',\r\n              transition: 'all 0.2s ease'\r\n            }}\r\n            onMouseEnter={(e) => {\r\n              if (!busy) {\r\n                e.currentTarget.style.background = 'var(--color-bg-hover)';\r\n                e.currentTarget.style.borderColor = 'var(--color-border-hover)';\r\n              }\r\n            }}\r\n            onMouseLeave={(e) => {\r\n              if (!busy) {\r\n                e.currentTarget.style.background = 'var(--color-surface)';\r\n                e.currentTarget.style.borderColor = 'var(--color-border)';\r\n              }\r\n            }}\r\n          >\r\n            <i className=\"fas fa-upload\" style={{ fontSize: '13px' }}></i>\r\n            <span style={{ fontSize: '13px', fontWeight: '600' }}>ייבוא</span>\r\n            <input \r\n              type=\"file\" \r\n              accept=\"application/json,.json\" \r\n              onChange={onFileChange} \r\n              style={{ display: 'none' }} \r\n              disabled={busy} \r\n            />\r\n          </label>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Status Messages */}\r\n      {error && (\r\n        <div style={{ \r\n          padding: '12px 16px',\r\n          margin: '16px 0',\r\n          background: 'rgba(239, 68, 68, 0.1)',\r\n          border: '1px solid rgba(239, 68, 68, 0.2)',\r\n          borderRadius: '8px',\r\n          color: '#ef4444',\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          gap: '8px'\r\n        }}>\r\n          <i className=\"fas fa-exclamation-triangle\"></i>\r\n          <span>{error}</span>\r\n        </div>\r\n      )}\r\n\r\n      {success && (\r\n        <div style={{ \r\n          padding: '12px 16px',\r\n          margin: '16px 0',\r\n          background: 'rgba(34, 197, 94, 0.1)',\r\n          border: '1px solid rgba(34, 197, 94, 0.2)',\r\n          borderRadius: '8px',\r\n          color: '#22c55e',\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          gap: '8px'\r\n        }}>\r\n          <i className=\"fas fa-check-circle\"></i>\r\n          <span>{success}</span>\r\n        </div>\r\n      )}\r\n\r\n      {busy && (\r\n        <div style={{ \r\n          padding: '16px',\r\n          margin: '16px 0',\r\n          background: 'var(--color-surface)',\r\n          border: '1px solid var(--color-border)',\r\n          borderRadius: '8px',\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          gap: '12px',\r\n          color: 'var(--color-text-secondary)'\r\n        }}>\r\n          <div className=\"saving-spinner\"></div>\r\n          <span>\r\n            {importResult ? 'מבצע פעולה...' : success?.includes('ייבוא החל') ? 'מבצע ייבוא - פעולה זו עלולה לקחת מספר דקות...' : 'מבצע פעולה...'}\r\n          </span>\r\n        </div>\r\n      )}\r\n\r\n      {/* Export Results */}\r\n      {exportResult && (\r\n        <div style={{ \r\n          margin: '20px 0',\r\n          background: 'var(--color-surface)',\r\n          border: '1px solid var(--color-border)',\r\n          borderRadius: '8px',\r\n          overflow: 'hidden'\r\n        }}>\r\n          <div style={{ \r\n            padding: '16px 20px',\r\n            background: 'rgba(34, 197, 94, 0.15)',\r\n            borderBottom: '1px solid var(--color-border)',\r\n            display: 'flex',\r\n            justifyContent: 'space-between',\r\n            alignItems: 'center'\r\n          }}>\r\n            <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>\r\n              <i className=\"fas fa-download\" style={{ color: '#22c55e', fontSize: '16px' }}></i>\r\n              <span style={{ color: 'var(--color-text)', fontWeight: '600', fontSize: '14px' }}>ייצוא הושלם</span>\r\n              <span style={{ color: 'var(--color-text-secondary)', fontSize: '13px' }}>\r\n                {exportResult.statistics?.summary?.totalRecords || 0} רשומות • {exportResult.statistics?.summary?.totalTables || 0} טבלאות\r\n              </span>\r\n            </div>\r\n            <div style={{ \r\n              background: 'rgba(34, 197, 94, 0.2)',\r\n              color: '#22c55e',\r\n              padding: '4px 12px',\r\n              borderRadius: '4px',\r\n              fontSize: '12px',\r\n              fontWeight: '600'\r\n            }}>\r\n              <i className=\"fas fa-check-circle\" style={{ marginLeft: '4px' }}></i>\r\n              הצלחה\r\n            </div>\r\n          </div>\r\n          \r\n          <div style={{ padding: '16px 20px', color: 'var(--color-text-secondary)', fontSize: '14px' }}>\r\n            <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>\r\n              <i className=\"fas fa-info-circle\" style={{ color: 'var(--color-text-muted)' }}></i>\r\n              <span>הנתונים יוצאו בהצלחה והורדו כקובץ JSON</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Import Results */}\r\n      {importResult && (\r\n        <div style={{ \r\n          margin: '20px 0',\r\n          background: 'var(--color-surface)',\r\n          border: '1px solid var(--color-border)',\r\n          borderRadius: '8px',\r\n          overflow: 'hidden'\r\n        }}>\r\n          <div style={{ \r\n            padding: '16px 20px',\r\n            background: 'rgba(59, 130, 246, 0.15)',\r\n            borderBottom: '1px solid var(--color-border)',\r\n            display: 'flex',\r\n            justifyContent: 'space-between',\r\n            alignItems: 'center'\r\n          }}>\r\n            <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>\r\n              <i className=\"fas fa-upload\" style={{ color: '#3b82f6', fontSize: '16px' }}></i>\r\n              <span style={{ color: 'var(--color-text)', fontWeight: '600', fontSize: '14px' }}>ייבוא הושלם</span>\r\n              <span style={{ color: 'var(--color-text-secondary)', fontSize: '13px' }}>\r\n                {Object.values(importResult || {}).reduce((sum: number, tableStats: any) => sum + (tableStats?.success || 0), 0)} יובאו • \r\n                {Object.keys(importResult || {}).length} טבלאות\r\n              </span>\r\n            </div>\r\n            <div style={{ \r\n              background: 'rgba(59, 130, 246, 0.2)',\r\n              color: '#3b82f6',\r\n              padding: '4px 12px',\r\n              borderRadius: '4px',\r\n              fontSize: '12px',\r\n              fontWeight: '600'\r\n            }}>\r\n              <i className=\"fas fa-check-circle\" style={{ marginLeft: '4px' }}></i>\r\n              הצלחה\r\n            </div>\r\n          </div>\r\n          \r\n          <div style={{ padding: '16px 20px', color: 'var(--color-text-secondary)', fontSize: '14px' }}>\r\n            <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>\r\n              <i className=\"fas fa-info-circle\" style={{ color: 'var(--color-text-muted)' }}></i>\r\n              <span>הנתונים יובאו בהצלחה למסד הנתונים</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Confirmation Modal */}\r\n      <Modal\r\n        isOpen={isConfirmOpen}\r\n        onClose={() => {\r\n          if (!busy) {\r\n            setIsConfirmOpen(false);\r\n            setPendingPayload(null);\r\n            setSelectedFileName('');\r\n            setOverride(false);\r\n          }\r\n        }}\r\n        title=\"אישור ייבוא נתונים\"\r\n        size=\"md\"\r\n      >\r\n        <div style={{ padding: '20px' }}>\r\n          <div style={{ marginBottom: '20px' }}>\r\n            <div style={{ \r\n              padding: '12px 16px',\r\n              background: 'rgba(251, 191, 36, 0.1)',\r\n              border: '1px solid rgba(251, 191, 36, 0.2)',\r\n              borderRadius: '8px',\r\n              color: '#f59e0b',\r\n              display: 'flex',\r\n              alignItems: 'flex-start',\r\n              gap: '8px'\r\n            }}>\r\n              <i className=\"fas fa-exclamation-triangle\" style={{ marginTop: '2px' }}></i>\r\n              <div>\r\n                <div style={{ fontWeight: '600', marginBottom: '4px' }}>אזהרה</div>\r\n                <div style={{ fontSize: '13px' }}>\r\n                  פעולת ייבוא עלולה לשנות נתונים קיימים במערכת.\r\n                  {selectedFileName && (\r\n                    <div style={{ marginTop: '8px' }}>\r\n                      <strong>קובץ:</strong> {selectedFileName}\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div style={{ marginBottom: '20px' }}>\r\n            <label style={{ \r\n              display: 'flex', \r\n              alignItems: 'center', \r\n              gap: '8px',\r\n              cursor: 'pointer',\r\n              fontSize: '14px'\r\n            }}>\r\n              <input\r\n                type=\"checkbox\"\r\n                checked={override}\r\n                onChange={(e) => setOverride(e.target.checked)}\r\n                disabled={busy}\r\n              />\r\n              <span>החלף נתונים קיימים (אם רלוונטי)</span>\r\n            </label>\r\n          </div>\r\n\r\n          <div style={{ display: 'flex', justifyContent: 'flex-end', gap: '12px' }}>\r\n            <button \r\n              className=\"btn btn-secondary\" \r\n              onClick={() => setIsConfirmOpen(false)} \r\n              disabled={busy}\r\n            >\r\n              ביטול\r\n            </button>\r\n            <button \r\n              className=\"btn btn-primary\" \r\n              onClick={performImport} \r\n              disabled={busy}\r\n            >\r\n              {busy ? 'מבצע ייבוא...' : 'אשר ייבוא'}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </Modal>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default BackupRestoreTab;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { User, UpdateUserRequest, ranks } from '../../types';\r\nimport { useUserProfile, useAuth } from '../../hooks';\r\nimport { useManagement } from '../../contexts';\r\nimport { ThemeToggle } from '../../shared/components';\r\nimport { sanitizeInput } from '../../utils';\r\nimport './SettingsTab.css';\r\n\r\ninterface SettingsTabProps {\r\n  userProfile: User | null;\r\n  isAdmin: boolean;\r\n}\r\n\r\ninterface EditingField {\r\n  field: string;\r\n  value: string;\r\n}\r\n\r\nconst SettingsTab: React.FC<SettingsTabProps> = ({ userProfile: propUserProfile, isAdmin }) => {\r\n  const { updateUserProfile, refetch, userProfile: hookUserProfile } = useUserProfile();\r\n  const { user: firebaseUser } = useAuth();\r\n  const { loadLocations } = useManagement();\r\n  \r\n  // Use the userProfile from the hook as it's the source of truth and gets updated by refetch\r\n  const userProfile = hookUserProfile || propUserProfile;\r\n  const [editingField, setEditingField] = useState<EditingField | null>(null);\r\n  const [isUpdating, setIsUpdating] = useState(false);\r\n  const [updateMessage, setUpdateMessage] = useState<{ type: 'success' | 'error'; text: string } | null>(null);\r\n\r\n  useEffect(() => {\r\n    loadLocations();\r\n  }, [loadLocations]);\r\n\r\n  // Clear message after 3 seconds\r\n  useEffect(() => {\r\n    if (updateMessage) {\r\n      const timer = setTimeout(() => {\r\n        setUpdateMessage(null);\r\n      }, 3000);\r\n      return () => clearTimeout(timer);\r\n    }\r\n  }, [updateMessage]);\r\n\r\n  if (!userProfile) {\r\n    return (\r\n      <div className=\"settings-loading\">\r\n        <div className=\"loading-spinner\"></div>\r\n        <p>טוען פרטי משתמש...</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const validateField = (field: string, value: string): string => {\r\n    if (field === 'name') {\r\n      return value.trim().length === 0 ? 'שם חובה' : '';\r\n    } else if (field === 'personalNumber') {\r\n      const numberValue = parseInt(value);\r\n      if (isNaN(numberValue)) return 'מספר אישי חייב להיות מספר';\r\n      if (value.length !== 7) return 'מספר אישי חייב להיות 7 ספרות';\r\n      return '';\r\n    } else if (field === 'phoneNumber') {\r\n      const phoneRegex = /^[0-9]{10}$/;\r\n      const cleanPhone = value.replace(/\\D/g, '');\r\n      return phoneRegex.test(cleanPhone) ? '' : 'מספר טלפון חייב להיות 10 ספרות';\r\n    }\r\n    return '';\r\n  };\r\n\r\n  const handleStartEdit = (field: string, currentValue: string) => {\r\n    setEditingField({ field, value: currentValue });\r\n  };\r\n\r\n  const handleCancelEdit = () => {\r\n    setEditingField(null);\r\n  };\r\n\r\n  const handleSaveField = async () => {\r\n    if (!editingField) return;\r\n\r\n    const { field, value } = editingField;\r\n    \r\n    // Validation\r\n    const error = validateField(field, value);\r\n\r\n    if (error) {\r\n      setUpdateMessage({ type: 'error', text: error });\r\n      return;\r\n    }\r\n\r\n    setIsUpdating(true);\r\n    setUpdateMessage(null);\r\n    \r\n    try {\r\n      let updates: Partial<UpdateUserRequest> = {};\r\n      \r\n      if (field === 'personalNumber') {\r\n        updates = { personalNumber: parseInt(value) };\r\n      } else if (field === 'emailSubscribed') {\r\n        updates = { emailSubscribed: value === 'true' };\r\n      } else {\r\n        updates = { [field]: sanitizeInput(value) };\r\n      }\r\n      \r\n      const success = await updateUserProfile(updates as UpdateUserRequest);\r\n      if (success) {\r\n        setUpdateMessage({ type: 'success', text: 'הפרטים עודכנו בהצלחה!' });\r\n        setEditingField(null);\r\n        // Refresh user data from server to display the latest values\r\n        await refetch();\r\n      } else {\r\n        setUpdateMessage({ type: 'error', text: 'שגיאה בעדכון הפרטים' });\r\n      }\r\n    } catch (error) {\r\n      setUpdateMessage({ type: 'error', text: 'שגיאה בעדכון הפרטים' });\r\n    } finally {\r\n      setIsUpdating(false);\r\n    }\r\n  };\r\n\r\n  const handleToggleEmailSubscription = (checked: boolean) => {\r\n    if (!userProfile || isUpdating) return;\r\n    \r\n    const originalValue = userProfile.emailSubscribed ?? false;\r\n    \r\n    // If the new value is the same as original, cancel editing\r\n    if (checked === originalValue) {\r\n      setEditingField(null);\r\n      return;\r\n    }\r\n    \r\n    // Start editing mode for emailSubscribed field\r\n    setEditingField({ field: 'emailSubscribed', value: checked.toString() });\r\n  };\r\n\r\n  const renderEditableField = (\r\n    label: string,\r\n    field: string,\r\n    value: string,\r\n    type: 'text' | 'select' = 'text',\r\n    options?: { value: string; label: string }[]\r\n  ) => {\r\n    const isEditing = editingField?.field === field;\r\n    \r\n    return (\r\n      <div className=\"settings-field\">\r\n        <label className=\"field-label\">{label}</label>\r\n        {isEditing ? (\r\n          <div className=\"field-edit-container\">\r\n            {type === 'select' ? (\r\n              <select\r\n                className=\"field-input\"\r\n                value={editingField.value}\r\n                onChange={(e) => setEditingField({ ...editingField, value: e.target.value })}\r\n                disabled={isUpdating}\r\n              >\r\n                {options?.map(option => (\r\n                  <option key={option.value} value={option.value}>\r\n                    {option.label}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            ) : (\r\n              <input\r\n                type={type}\r\n                className=\"field-input\"\r\n                value={editingField.value}\r\n                onChange={(e) => setEditingField({ ...editingField, value: e.target.value })}\r\n                disabled={isUpdating}\r\n                autoFocus\r\n              />\r\n            )}\r\n            <div className=\"field-actions\">\r\n              <button\r\n                className=\"btn btn-sm btn-primary\"\r\n                onClick={handleSaveField}\r\n                disabled={isUpdating}\r\n              >\r\n                {isUpdating ? 'שומר...' : 'שמור'}\r\n              </button>\r\n              <button\r\n                className=\"btn btn-sm btn-ghost\"\r\n                onClick={handleCancelEdit}\r\n                disabled={isUpdating}\r\n              >\r\n                ביטול\r\n              </button>\r\n            </div>\r\n          </div>\r\n        ) : (\r\n          <div className=\"field-display\">\r\n            <span className=\"field-value\">{value}</span>\r\n            <button\r\n              className=\"btn btn-sm btn-ghost field-edit-btn\"\r\n              onClick={() => handleStartEdit(field, value)}\r\n              title={`עריכת ${label}`}\r\n            >\r\n              עריכה\r\n            </button>\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className=\"settings-tab\">\r\n      <div className=\"settings-header\">\r\n        <h1 className=\"settings-title\">הגדרות חשבון</h1>\r\n      </div>\r\n\r\n      {updateMessage && (\r\n        <div className={`settings-alert ${updateMessage.type === 'success' ? 'alert-success' : 'alert-error'}`}>\r\n          {updateMessage.text}\r\n        </div>\r\n      )}\r\n\r\n      <div className=\"settings-section\">\r\n        <h2 className=\"section-title\">מידע אישי</h2>\r\n        <div className=\"settings-form\">\r\n          {renderEditableField('שם מלא', 'name', userProfile.name)}\r\n          {renderEditableField('מספר אישי', 'personalNumber', userProfile.personalNumber.toString())}\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"settings-section\">\r\n        <h2 className=\"section-title\">פרטי התקשרות</h2>\r\n        <div className=\"settings-form\">\r\n          <div className=\"settings-field\">\r\n            <label className=\"field-label\">כתובת אימייל</label>\r\n            <div className=\"field-display\">\r\n              <span className=\"field-value\">{firebaseUser?.email || 'לא זמין'}</span>\r\n            </div>\r\n          </div>\r\n          {renderEditableField('מספר טלפון', 'phoneNumber', userProfile.phoneNumber)}\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"settings-section\">\r\n        <h2 className=\"section-title\">פרטי תפקיד</h2>\r\n        <div className=\"settings-form\">\r\n          {renderEditableField('דרגה', 'rank', userProfile.rank, 'select', ranks.map((rank: string) => ({ value: rank, label: rank })))}\r\n          \r\n          <div className=\"settings-field\">\r\n            <label className=\"field-label\">יחידה</label>\r\n            <div className=\"field-display\">\r\n              <span className=\"field-value\">{userProfile.unit}</span>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"settings-field\">\r\n            <label className=\"field-label\">מיקום</label>\r\n            <div className=\"field-display\">\r\n              <span className=\"field-value\">{userProfile.location}</span>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"settings-field\">\r\n            <label className=\"field-label\">סוג משתמש</label>\r\n            <div className=\"field-display\">\r\n              <span className=\"field-value role-badge\" data-role={userProfile.isAdmin ? 'admin' : 'user'}>\r\n                {userProfile.isAdmin ? 'מנהל מערכת' : 'משתמש רגיל'}\r\n              </span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"settings-section\">\r\n        <h2 className=\"section-title\">התראות</h2>\r\n        <div className=\"settings-form\">\r\n          <div className=\"settings-field\">\r\n            <label className=\"field-label\">התראות אימייל</label>\r\n            {editingField?.field === 'emailSubscribed' ? (\r\n              <div className=\"field-edit-container\">\r\n                <div className=\"field-display notification-toggle-field\">\r\n                  <span className=\"notification-toggle-label\">\r\n                    {editingField.value === 'true' ? 'מופעל' : 'מבוטל'}\r\n                  </span>\r\n                  <label className=\"notification-toggle-wrapper\">\r\n                    <input\r\n                      type=\"checkbox\"\r\n                      checked={editingField.value === 'true'}\r\n                      onChange={(e) => {\r\n                        const newValue = e.target.checked;\r\n                        const originalValue = userProfile.emailSubscribed ?? false;\r\n                        \r\n                        // If changed back to original value, exit edit mode\r\n                        if (newValue === originalValue) {\r\n                          setEditingField(null);\r\n                        } else {\r\n                          setEditingField({ ...editingField, value: newValue.toString() });\r\n                        }\r\n                      }}\r\n                      disabled={isUpdating}\r\n                      className=\"notification-toggle-input\"\r\n                    />\r\n                    <span className=\"notification-toggle-slider\"></span>\r\n                  </label>\r\n                </div>\r\n                <div className=\"field-actions\">\r\n                  <button\r\n                    className=\"btn btn-sm btn-primary\"\r\n                    onClick={handleSaveField}\r\n                    disabled={isUpdating}\r\n                  >\r\n                    {isUpdating ? 'שומר...' : 'שמור'}\r\n                  </button>\r\n                  <button\r\n                    className=\"btn btn-sm btn-ghost\"\r\n                    onClick={handleCancelEdit}\r\n                    disabled={isUpdating}\r\n                  >\r\n                    ביטול\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            ) : (\r\n              <div className=\"field-display notification-toggle-field\">\r\n                <span className=\"notification-toggle-label\">\r\n                  {userProfile.emailSubscribed ? 'מופעל' : 'מבוטל'}\r\n                </span>\r\n                <label className=\"notification-toggle-wrapper\">\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    checked={userProfile.emailSubscribed ?? false}\r\n                    onChange={(e) => handleToggleEmailSubscription(e.target.checked)}\r\n                    disabled={isUpdating}\r\n                    className=\"notification-toggle-input\"\r\n                  />\r\n                  <span className=\"notification-toggle-slider\"></span>\r\n                </label>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"settings-section\">\r\n        <h2 className=\"section-title\">העדפות תצוגה</h2>\r\n        <div className=\"settings-form\">\r\n          <div className=\"settings-field\">\r\n            <ThemeToggle \r\n              showLabel={true} \r\n              variant=\"default\" \r\n              size=\"md\"\r\n              className=\"theme-toggle-settings\" \r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SettingsTab;\r\n","import React, { useState, useEffect } from 'react';\r\nimport './LandingPage.css';\r\n\r\ninterface LandingNavigationProps {\r\n  onGetStartedClick: () => void;\r\n  isLoading?: boolean;\r\n}\r\n\r\nexport const LandingNavigation: React.FC<LandingNavigationProps> = ({ onGetStartedClick, isLoading }) => {\r\n  const [isScrolled, setIsScrolled] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const handleScroll = () => {\r\n      setIsScrolled(window.scrollY > 50);\r\n    };\r\n\r\n    window.addEventListener('scroll', handleScroll);\r\n    return () => window.removeEventListener('scroll', handleScroll);\r\n  }, []);\r\n\r\n  const scrollToSection = (sectionId: string) => {\r\n    const element = document.getElementById(sectionId);\r\n    if (element) {\r\n      element.scrollIntoView({ behavior: 'smooth' });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <nav className={`top-navigation ${isScrolled ? 'scrolled' : ''}`}>\r\n      <div className=\"nav-container\">\r\n        <div className=\"nav-brand\">\r\n          <div className=\"brand-logo\">\r\n            <span className=\"logo-icon\">📋</span>\r\n            <div className=\"brand-text\">\r\n              <h1 className=\"brand-name\">אחל״ן</h1>\r\n              <p className=\"brand-subtitle\">אמצעי חתימות ללא ניירת</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"nav-links\">\r\n          <button className=\"nav-link\" onClick={() => scrollToSection('features')}>\r\n            יכולות\r\n          </button>\r\n          <button className=\"nav-link\" onClick={() => scrollToSection('contact')}>\r\n            צור קשר\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </nav>\r\n  );\r\n};\r\n\r\ninterface HeroSectionProps {\r\n  onGetStartedClick: () => void;\r\n  isLoading?: boolean;\r\n}\r\n\r\nexport const HeroSection: React.FC<HeroSectionProps> = ({ onGetStartedClick, isLoading }) => {\r\n  return (\r\n    <section className=\"hero-section\">\r\n      <div className=\"hero-content\">\r\n        <h1 className=\"hero-title\">ניהול מלאי דיגיטלי</h1>\r\n\r\n        <p className=\"hero-description\">\r\n          פתרון פשוט וחכם לניהול מלאי עם חתימות דיגיטליות\r\n        </p>\r\n\r\n        <button\r\n          className=\"cta-button\"\r\n          onClick={onGetStartedClick}\r\n          disabled={isLoading}\r\n        >\r\n          {isLoading ? 'מתחבר...' : 'התחילו עכשיו'}\r\n        </button>\r\n      </div>\r\n    </section>\r\n  );\r\n};\r\n\r\nexport const FeaturesSection: React.FC = () => {\r\n  return (\r\n    <section id=\"features\" className=\"features-section\">\r\n      <div className=\"container\">\r\n        <h2 className=\"section-title\">יכולות המערכת</h2>\r\n\r\n        <div className=\"features-grid\">\r\n          <div className=\"feature-card\">\r\n            <h3>ניהול פריטים</h3>\r\n            <p>מעקב פשוט אחר הפריטים במלאי</p>\r\n          </div>\r\n\r\n          <div className=\"feature-card\">\r\n            <h3>דוחות</h3>\r\n            <p>דוחות ברורים ומפורטים</p>\r\n          </div>\r\n\r\n          <div className=\"feature-card\">\r\n            <h3>חתימות דיגיטליות</h3>\r\n            <p>חתימות מאובטחות למסמכים</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </section>\r\n  );\r\n};\r\n\r\ninterface ContactSectionProps {\r\n  onSubmit: (formData: {\r\n    name: string;\r\n    email: string;\r\n    subject: string;\r\n    message: string;\r\n    type: string;\r\n  }) => Promise<void>;\r\n  isSubmitting?: boolean;\r\n}\r\n\r\nexport const ContactSection: React.FC<ContactSectionProps> = ({ onSubmit, isSubmitting }) => {\r\n  const [contactForm, setContactForm] = useState({\r\n    name: '',\r\n    email: '',\r\n    subject: '',\r\n    message: '',\r\n    type: 'contact'\r\n  });\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    await onSubmit(contactForm);\r\n    setContactForm({ name: '', email: '', subject: '', message: '', type: 'contact' });\r\n  };\r\n\r\n  return (\r\n    <section id=\"contact\" className=\"contact-section\">\r\n      <div className=\"container\">\r\n        <h2 className=\"section-title\">צור קשר</h2>\r\n\r\n        <div className=\"contact-form-card\">\r\n          <form onSubmit={handleSubmit} className=\"contact-form\">\r\n            <div className=\"form-group\">\r\n              <label htmlFor=\"type\">סוג הפנייה</label>\r\n              <select\r\n                id=\"type\"\r\n                value={contactForm.type}\r\n                onChange={(e) => setContactForm({...contactForm, type: e.target.value})}\r\n                required\r\n              >\r\n                <option value=\"contact\">צור קשר כללי</option>\r\n                <option value=\"support\">תמיכה טכנית</option>\r\n              </select>\r\n            </div>\r\n\r\n            <div className=\"form-row\">\r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"name\">שם מלא</label>\r\n                <input\r\n                  type=\"text\"\r\n                  id=\"name\"\r\n                  value={contactForm.name}\r\n                  onChange={(e) => setContactForm({...contactForm, name: e.target.value})}\r\n                  required\r\n                />\r\n              </div>\r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"email\">כתובת אימייל</label>\r\n                <input\r\n                  type=\"email\"\r\n                  id=\"email\"\r\n                  value={contactForm.email}\r\n                  onChange={(e) => setContactForm({...contactForm, email: e.target.value})}\r\n                  required\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n              <label htmlFor=\"subject\">נושא</label>\r\n              <input\r\n                type=\"text\"\r\n                id=\"subject\"\r\n                value={contactForm.subject}\r\n                onChange={(e) => setContactForm({...contactForm, subject: e.target.value})}\r\n                required\r\n              />\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n              <label htmlFor=\"message\">הודעה</label>\r\n              <textarea\r\n                id=\"message\"\r\n                rows={5}\r\n                value={contactForm.message}\r\n                onChange={(e) => setContactForm({...contactForm, message: e.target.value})}\r\n                required\r\n              ></textarea>\r\n            </div>\r\n\r\n            <button\r\n              type=\"submit\"\r\n              className=\"submit-btn\"\r\n              disabled={isSubmitting}\r\n            >\r\n              {isSubmitting ? 'שולח...' : 'שלח הודעה'}\r\n            </button>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </section>\r\n  );\r\n};\r\n\r\nexport const Footer: React.FC = () => {\r\n  return (\r\n    <footer className=\"site-footer\">\r\n      <div className=\"footer-container\">\r\n        <div className=\"footer-bottom\">\r\n          <div className=\"footer-copyright\">\r\n            <p>&copy; 2025 אחל״ן. כל הזכויות שמורות.</p>\r\n            <p className=\"footer-developer\">פותח ע\"י סק\"ש</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </footer>\r\n  );\r\n};\r\n","import React, { useState } from 'react';\r\nimport { User } from 'firebase/auth';\r\nimport { LandingNavigation, HeroSection, FeaturesSection, ContactSection, Footer } from './LandingComponents';\r\nimport { apiService } from '../../services';\r\nimport { NotificationModal } from '../../shared/components';\r\nimport type { NotificationType } from '../../shared/components/NotificationModal';\r\nimport './LandingPage.css';\r\n\r\ninterface LandingPageProps {\r\n  onAuthSuccess?: (user: User) => void;\r\n  onAuthError?: (error: string) => void;\r\n  onSignInClick: () => void;\r\n  isAuthLoading?: boolean;\r\n}\r\n\r\nexport const LandingPage: React.FC<LandingPageProps> = ({ \r\n  onAuthSuccess, \r\n  onAuthError, \r\n  onSignInClick,\r\n  isAuthLoading \r\n}) => {\r\n  const [isSubmittingForm, setIsSubmittingForm] = useState(false);\r\n  const [notification, setNotification] = useState<{\r\n    isOpen: boolean;\r\n    type: NotificationType;\r\n    message: string;\r\n    title?: string;\r\n  }>({\r\n    isOpen: false,\r\n    type: 'info',\r\n    message: ''\r\n  });\r\n\r\n  const showNotification = (type: NotificationType, message: string, title?: string) => {\r\n    setNotification({\r\n      isOpen: true,\r\n      type,\r\n      message,\r\n      title\r\n    });\r\n  };\r\n\r\n  const closeNotification = () => {\r\n    setNotification(prev => ({ ...prev, isOpen: false }));\r\n  };\r\n\r\n  const handleContactSubmit = async (contactForm: {\r\n    name: string;\r\n    email: string;\r\n    subject: string;\r\n    message: string;\r\n    type: string;\r\n  }) => {\r\n    setIsSubmittingForm(true);\r\n    \r\n    try {\r\n      // Using the API service with correct server port 3001 and path api/email/support\r\n      const result = await apiService.post<{ success: boolean; message: string }>('email/support', contactForm);\r\n      \r\n      if (result.success) {\r\n        // Success notification with Hebrew message\r\n        showNotification('success', `${result.message || 'הודעתך נשלחה בהצלחה. נחזור אליך בהקדם.'}\\n\\nתודה שפנית אלינו!`, 'הצלחה!');\r\n      } else {\r\n        // Handle case where success is false\r\n        showNotification('error', result.message || 'משהו השתבש בשליחת ההודעה. אנא נסו שנית.');\r\n      }\r\n    } catch (error: any) {\r\n      console.error('Error sending contact form:', error);\r\n      \r\n      // Enhanced error handling with better user messages\r\n      let errorMessage = '';\r\n      \r\n      if (error.response?.data?.message) {\r\n        errorMessage = error.response.data.message;\r\n      } else if (error.response?.status) {\r\n        switch (error.response.status) {\r\n          case 400:\r\n            errorMessage = 'נתונים לא תקינים. אנא בדקו את הפרטים ונסו שנית.';\r\n            break;\r\n          case 500:\r\n            errorMessage = 'שגיאה פנימית בשרת. אנא נסו שנית מאוחר יותר.';\r\n            break;\r\n          case 503:\r\n            errorMessage = 'השירות אינו זמין כרגע. אנא נסו שנית מאוחר יותר.';\r\n            break;\r\n          default:\r\n            errorMessage = 'שגיאה לא צפויה. אנא נסו שנית או צרו קשר באמצעים אחרים.';\r\n        }\r\n      } else if (error.code === 'NETWORK_ERROR') {\r\n        errorMessage = 'בעיית חיבור לאינטרנט. אנא בדקו את החיבור ונסו שנית.';\r\n      } else {\r\n        errorMessage = 'שגיאה לא צפויה. אנא נסו שנית מאוחר יותר.';\r\n      }\r\n      \r\n      showNotification('error', errorMessage, 'שגיאה בחיבור');\r\n    } finally {\r\n      setIsSubmittingForm(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"landing-container\">\r\n      <LandingNavigation onGetStartedClick={onSignInClick} isLoading={isAuthLoading} />\r\n      <HeroSection onGetStartedClick={onSignInClick} isLoading={isAuthLoading} />\r\n      <FeaturesSection />\r\n      <ContactSection onSubmit={handleContactSubmit} isSubmitting={isSubmittingForm} />\r\n      <Footer />\r\n      \r\n      <NotificationModal\r\n        isOpen={notification.isOpen}\r\n        onClose={closeNotification}\r\n        type={notification.type}\r\n        message={notification.message}\r\n        title={notification.title}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n","import React, { useState } from 'react';\r\nimport { auth } from '../../firebase';\r\nimport { signInWithPopup, GoogleAuthProvider, User } from 'firebase/auth';\r\nimport { LandingPage } from '../../components/landing/LandingPage';\r\n\r\ninterface GoogleAuthProps {\r\n  onAuthSuccess?: (user: User) => void;\r\n  onAuthError?: (error: string) => void;\r\n}\r\n\r\nconst GoogleAuth: React.FC<GoogleAuthProps> = ({ onAuthSuccess, onAuthError }) => {\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  const signInWithGoogle = async () => {\r\n    setIsLoading(true);\r\n    try {\r\n      const provider = new GoogleAuthProvider();\r\n      const result = await signInWithPopup(auth, provider);\r\n      console.log('משתמש נכנס בהצלחה:', result.user);\r\n      onAuthSuccess?.(result.user);\r\n    } catch (error) {\r\n      console.error('שגיאה בכניסה:', error);\r\n      onAuthError?.(error instanceof Error ? error.message : 'שגיאה לא ידועה');\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <LandingPage \r\n      onSignInClick={signInWithGoogle}\r\n      isAuthLoading={isLoading}\r\n      onAuthSuccess={onAuthSuccess}\r\n      onAuthError={onAuthError}\r\n    />\r\n  );\r\n};\r\n\r\nexport default GoogleAuth;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { CreateUserRequest, ranks } from '../../types';\r\nimport { validateRequired, validatePhoneNumber, validatePersonalNumber, sanitizeInput } from '../../utils';\r\nimport './UserProfileSetup.css';\r\n\r\ninterface UserProfileSetupProps {\r\n  onComplete: (profileData: Omit<CreateUserRequest, 'firebaseUid'>) => void;\r\n  userEmail: string;\r\n  userDisplayName?: string;\r\n  userPhoneNumber?: string;\r\n  isLoading?: boolean;\r\n  error?: string | null;\r\n}\r\n\r\ninterface FormErrors {\r\n  name?: string;\r\n  personalNumber?: string;\r\n  phoneNumber?: string;\r\n  rank?: string;\r\n}\r\n\r\nconst UserProfileSetup: React.FC<UserProfileSetupProps> = ({ \r\n  onComplete, \r\n  userEmail,\r\n  userDisplayName,\r\n  userPhoneNumber,\r\n  isLoading = false,\r\n  error = null \r\n}) => {\r\n  const [formData, setFormData] = useState<Omit<CreateUserRequest, 'firebaseUid'>>({\r\n    name: userDisplayName || '',\r\n    personalNumber: 0,\r\n    phoneNumber: userPhoneNumber || '',\r\n    rank: '',\r\n  });\r\n  const [errors, setErrors] = useState<FormErrors>({});\r\n  const [focusedField, setFocusedField] = useState<string | null>(null);\r\n  const [completedFields, setCompletedFields] = useState<Set<string>>(new Set());\r\n\r\n  // Manage body class for mobile behavior\r\n  useEffect(() => {\r\n    document.body.classList.add('profile-setup-active');\r\n    \r\n    // Mark pre-filled fields as completed\r\n    setCompletedFields(prev => {\r\n      const newSet = new Set(prev);\r\n      \r\n      // Mark name as completed if it was pre-filled\r\n      if (userDisplayName && userDisplayName.trim() !== '') {\r\n        newSet.add('name');\r\n      }\r\n      \r\n      // Mark phone number as completed if it was pre-filled\r\n      if (userPhoneNumber && userPhoneNumber.trim() !== '') {\r\n        newSet.add('phoneNumber');\r\n      }\r\n      \r\n      return newSet;\r\n    });\r\n    \r\n    return () => {\r\n      document.body.classList.remove('profile-setup-active');\r\n    };\r\n  }, [userDisplayName, userPhoneNumber]);\r\n\r\n  // Calculate form progress\r\n  const totalFields = 4;\r\n  const filledFields = [\r\n    formData.name,\r\n    formData.personalNumber,\r\n    formData.phoneNumber,\r\n    formData.rank\r\n  ].filter(field => field && field.toString().trim() !== '').length;\r\n  const progress = (filledFields / totalFields) * 100;\r\n\r\n  const validateForm = (): boolean => {\r\n    const newErrors: FormErrors = {};\r\n\r\n    if (!validateRequired(formData.name)) {\r\n      newErrors.name = 'שם חובה';\r\n    }\r\n\r\n    if (!validatePersonalNumber(formData.personalNumber)) {\r\n      newErrors.personalNumber = 'מספר אישי חייב להיות בדיוק 7 ספרות';\r\n    }\r\n\r\n    if (!validatePhoneNumber(formData.phoneNumber)) {\r\n      newErrors.phoneNumber = 'מספר טלפון לא תקין';\r\n    }\r\n\r\n    if (!validateRequired(formData.rank)) {\r\n      newErrors.rank = 'דרגה חובה';\r\n    }\r\n\r\n    setErrors(newErrors);\r\n    return Object.keys(newErrors).length === 0;\r\n  };\r\n\r\n  const handleInputChange = (field: keyof typeof formData, value: string) => {\r\n    setFormData(prev => {\r\n      const newData = {\r\n        ...prev,\r\n        [field]: field === 'name' ? value : \r\n                 field === 'personalNumber' ? (value === '' ? 0 : parseInt(value, 10) || 0) :\r\n                 sanitizeInput(value),\r\n      };\r\n      \r\n      return newData;\r\n    });\r\n    \r\n    // Clear error when user starts typing\r\n    if (errors[field as keyof FormErrors]) {\r\n      setErrors(prev => ({\r\n        ...prev,\r\n        [field]: undefined,\r\n      }));\r\n    }\r\n    \r\n    // Track completed fields\r\n    if (value && value.toString().trim() !== '') {\r\n      setCompletedFields(prev => {\r\n        const newSet = new Set(prev);\r\n        newSet.add(field);\r\n        return newSet;\r\n      });\r\n    } else {\r\n      setCompletedFields(prev => {\r\n        const newSet = new Set(prev);\r\n        newSet.delete(field);\r\n        return newSet;\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleFocus = (field: string) => {\r\n    setFocusedField(field);\r\n  };\r\n\r\n  const handleBlur = () => {\r\n    setFocusedField(null);\r\n  };\r\n\r\n  const getFieldIcon = (field: string) => {\r\n    if (completedFields.has(field)) {\r\n      return <span className=\"success-checkmark\"></span>;\r\n    }\r\n    return null;\r\n  };\r\n\r\n  const handleSubmit = (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    \r\n    if (!validateForm()) {\r\n      return;\r\n    }\r\n\r\n    onComplete(formData);\r\n  };\r\n\r\n  // Filter out authentication-related errors that shouldn't be shown during registration\r\n  const shouldShowError = (error: string | null): boolean => {\r\n    if (!error) return false;\r\n    \r\n    // Don't show these authentication-related errors\r\n    const authErrors = [\r\n      'Failed to load user profile',\r\n      'No authenticated user found',\r\n      'User not found',\r\n      'Authentication required',\r\n      'Unauthorized',\r\n      'Token expired',\r\n      'Invalid token',\r\n      'Please log in',\r\n      'Session expired'\r\n    ];\r\n    \r\n    return !authErrors.some(authError => \r\n      error.toLowerCase().includes(authError.toLowerCase())\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className=\"profile-setup-container\" data-testid=\"profile-setup-modal\">\r\n      <div className=\"profile-setup-card\">\r\n        <div className=\"profile-setup-header\">\r\n          <h1 className=\"profile-setup-title\">ברוכים הבאים למערכת</h1>\r\n          <p className=\"profile-setup-subtitle\">שלום {userDisplayName || userEmail}</p>\r\n          <p className=\"profile-setup-email\">נדרש להשלים את הפרטים האישיים להמשך השימוש</p>\r\n        </div>\r\n        \r\n        <div className=\"profile-setup-body\">\r\n          {/* Progress Indicator */}\r\n          <div className=\"progress-indicator\">\r\n            {[...Array(totalFields)].map((_, index) => (\r\n              <div\r\n                key={index}\r\n                className={`progress-dot ${index < filledFields ? 'active' : ''}`}\r\n              />\r\n            ))}\r\n          </div>\r\n          \r\n          {shouldShowError(error) && (\r\n            <div className=\"error-message\">\r\n              <i className=\"fas fa-exclamation-triangle\"></i>\r\n              {error}\r\n            </div>\r\n          )}\r\n          \r\n          <form onSubmit={handleSubmit}>\r\n            <div className={`form-group ${focusedField === 'name' ? 'focused' : ''}`}>\r\n              <label className=\"form-label required\">שם מלא</label>\r\n              <div style={{ position: 'relative' }}>\r\n                <input \r\n                  className={`form-input ${errors.name ? 'error' : ''}`}\r\n                  name=\"name\" \r\n                  value={formData.name} \r\n                  onChange={e => handleInputChange('name', e.target.value)}\r\n                  onFocus={() => handleFocus('name')}\r\n                  onBlur={handleBlur}\r\n                  required \r\n                  placeholder={userDisplayName ? \"שם מלא (מתוך החשבון)\" : \"הזן את שמך המלא\"}\r\n                />\r\n                {getFieldIcon('name')}\r\n              </div>\r\n              {errors.name && (\r\n                <div className=\"form-error\">\r\n                  <i className=\"fas fa-exclamation-circle\"></i>\r\n                  {errors.name}\r\n                </div>\r\n              )}\r\n            </div>\r\n            \r\n            <div className={`form-group ${focusedField === 'phoneNumber' ? 'focused' : ''}`}>\r\n              <label className=\"form-label required\">מספר טלפון</label>\r\n              <div style={{ position: 'relative' }}>\r\n                <input \r\n                  className={`form-input ${errors.phoneNumber ? 'error' : ''}`}\r\n                  name=\"phoneNumber\" \r\n                  value={formData.phoneNumber} \r\n                  onChange={e => handleInputChange('phoneNumber', e.target.value)}\r\n                  onFocus={() => handleFocus('phoneNumber')}\r\n                  onBlur={handleBlur}\r\n                  required \r\n                  placeholder={userPhoneNumber ? \"מספר טלפון (מתוך החשבון)\" : \"05xxxxxxxx\"}\r\n                />\r\n                {getFieldIcon('phoneNumber')}\r\n              </div>\r\n              {errors.phoneNumber && (\r\n                <div className=\"form-error\">\r\n                  <i className=\"fas fa-exclamation-circle\"></i>\r\n                  {errors.phoneNumber}\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            <div className={`form-group ${focusedField === 'personalNumber' ? 'focused' : ''}`}>\r\n              <label className=\"form-label required\">מספר אישי</label>\r\n              <div style={{ position: 'relative' }}>\r\n                <input \r\n                  type=\"number\"\r\n                  className={`form-input ${errors.personalNumber ? 'error' : ''}`}\r\n                  name=\"personalNumber\" \r\n                  value={formData.personalNumber || ''} \r\n                  onChange={e => {\r\n                    const value = e.target.value;\r\n                    if (value === '' || (/^[0-9]{1,7}$/.test(value) && value.length <= 7)) {\r\n                      handleInputChange('personalNumber', value);\r\n                    }\r\n                  }}\r\n                  onInput={e => {\r\n                    const target = e.target as HTMLInputElement;\r\n                    if (target.value.length > 7) {\r\n                      target.value = target.value.slice(0, 7);\r\n                    }\r\n                  }}\r\n                  onFocus={() => handleFocus('personalNumber')}\r\n                  onBlur={handleBlur}\r\n                  placeholder=\"הזן 7 ספרות\"\r\n                  min=\"1000000\"\r\n                  max=\"9999999\"\r\n                  required \r\n                />\r\n                {getFieldIcon('personalNumber')}\r\n              </div>\r\n              {errors.personalNumber && (\r\n                <div className=\"form-error\">\r\n                  <i className=\"fas fa-exclamation-circle\"></i>\r\n                  {errors.personalNumber}\r\n                </div>\r\n              )}\r\n            </div>\r\n            \r\n            <div className={`form-group ${focusedField === 'rank' ? 'focused' : ''}`}>\r\n              <label className=\"form-label required\">דרגה</label>\r\n              <div style={{ position: 'relative' }}>\r\n                <select \r\n                  className={`form-select ${errors.rank ? 'error' : ''}`}\r\n                  name=\"rank\" \r\n                  value={formData.rank} \r\n                  onChange={e => handleInputChange('rank', e.target.value)}\r\n                  onFocus={() => handleFocus('rank')}\r\n                  onBlur={handleBlur}\r\n                  required\r\n                >\r\n                  <option value=\"\">בחר דרגה</option>\r\n                  {ranks.map(rank => (\r\n                    <option key={rank} value={rank}>{rank}</option>\r\n                  ))}\r\n                </select>\r\n                {getFieldIcon('rank')}\r\n              </div>\r\n              {errors.rank && (\r\n                <div className=\"form-error\">\r\n                  <i className=\"fas fa-exclamation-circle\"></i>\r\n                  {errors.rank}\r\n                </div>\r\n              )}\r\n            </div>\r\n            \r\n            <div className=\"info-message\">\r\n              <i className=\"fas fa-info-circle info-icon\"></i>\r\n              <div>\r\n                <strong>הערה חשובה:</strong> מיקום יוקצה לך על ידי מנהל המערכת לאחר השלמת הרישום.\r\n                <br />\r\n                הפרטים ניתנים לעדכון בעתיד דרך הגדרות המשתמש.\r\n              </div>\r\n            </div>\r\n            \r\n            <button \r\n              type=\"submit\" \r\n              className=\"submit-button\" \r\n              disabled={isLoading || progress < 100}\r\n            >\r\n              {isLoading ? (\r\n                <div className=\"loading-spinner\">\r\n                  <div className=\"spinner\"></div>\r\n                  שומר פרטים...\r\n                </div>\r\n              ) : (\r\n                <>\r\n                  השלם רישום\r\n                  <i className=\"fas fa-arrow-left\" style={{ marginRight: '8px' }}></i>\r\n                </>\r\n              )}\r\n            </button>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UserProfileSetup;\r\n","import React, { useState, useEffect, useRef } from 'react';\r\nimport { Layout, Navigation, TopHeader } from './shared/layout';\r\nimport { Dashboard } from './features/dashboard';\r\nimport { DailyReport } from './features/reports';\r\nimport { ReceiptsTab } from './features/receipts';\r\nimport type { ReceiptsTabRef } from './features/receipts';\r\nimport { UsersTab } from './features/users';\r\nimport { ItemsTab } from './features/items';\r\nimport { ManagementTab } from './features/management';\r\nimport { SettingsTab } from './features/settings';\r\nimport GoogleAuth from './features/auth/GoogleAuth';\r\nimport { ManagementProvider, ThemeProvider, PendingReceiptsProvider } from './contexts';\r\nimport { useAuth, useUserProfile } from './hooks';\r\nimport { ErrorBoundary } from './shared/components';\r\nimport { UserProfileSetup } from './components/auth';\r\nimport { User } from 'firebase/auth';\r\nimport './shared/styles';\r\n\r\ntype Tab = 'dashboard' | 'dailyReport' | 'receipts' | 'users' | 'items' | 'management' | 'settings';\r\n\r\nconst App: React.FC = () => {\r\n  const [activeTab, setActiveTab] = useState<Tab>('dashboard');\r\n  const [authError, setAuthError] = useState<string | null>(null);\r\n  const receiptsTabRef = useRef<ReceiptsTabRef>(null);\r\n  const { user: firebaseUser, isLoading: authLoading, logout } = useAuth();\r\n  const { \r\n    userProfile, \r\n    isLoading: profileLoading, \r\n    needsProfile, \r\n    error: profileError,\r\n    isAdmin,\r\n    createUserProfile\r\n  } = useUserProfile();\r\n\r\n  // Mobile optimization effects\r\n  useEffect(() => {\r\n    // Prevent zoom on input focus for iOS\r\n    const handleInputFocus = (e: FocusEvent) => {\r\n      if (/iPad|iPhone|iPod/.test(navigator.userAgent)) {\r\n        const target = e.target as HTMLElement;\r\n        if (target.tagName === 'INPUT' || target.tagName === 'TEXTAREA' || target.tagName === 'SELECT') {\r\n          target.style.fontSize = '16px';\r\n        }\r\n      }\r\n    };\r\n\r\n    // Add event listeners\r\n    document.addEventListener('focusin', handleInputFocus);\r\n\r\n    return () => {\r\n      document.removeEventListener('focusin', handleInputFocus);\r\n    };\r\n  }, []);\r\n\r\n\r\n\r\n  const handleAuthSuccess = (user: User) => {\r\n    setAuthError(null);\r\n  };\r\n\r\n  const handleAuthError = (error: string) => {\r\n    setAuthError(error);\r\n  };\r\n\r\n  const handleLogout = async () => {\r\n    try {\r\n      await logout();\r\n    } catch (error) {\r\n      // Swallow logout errors silently\r\n    }\r\n  };\r\n\r\n  const handleProfileComplete = async (profileData: Parameters<typeof createUserProfile>[0]) => {\r\n    try {\r\n      await createUserProfile(profileData);\r\n    } catch (error) {\r\n      // Swallow profile creation errors (UI already shows errors)\r\n    }\r\n  };\r\n\r\n  const handlePendingReceiptsClick = () => {\r\n    setActiveTab('receipts');\r\n    // Use setTimeout to ensure ReceiptsTab is rendered before calling the function\r\n    setTimeout(() => {\r\n      receiptsTabRef.current?.switchToPendingTab();\r\n    }, 0);\r\n  };\r\n\r\n  // Show loading spinner while checking authentication or profile\r\n  if (authLoading || profileLoading) {\r\n    return (\r\n      <div style={{ \r\n        display: 'flex', \r\n        justifyContent: 'center', \r\n        alignItems: 'center', \r\n        height: '100vh',\r\n        fontSize: '1.2rem'\r\n      }}>\r\n        טוען...\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Show Google authentication if user is not authenticated\r\n  if (!firebaseUser) {\r\n    return (\r\n      <>\r\n              <GoogleAuth \r\n        onAuthSuccess={handleAuthSuccess}\r\n        onAuthError={handleAuthError}\r\n      />\r\n        {authError && (\r\n          <div style={{\r\n            position: 'fixed',\r\n            top: '20px',\r\n            right: '20px',\r\n            background: '#f8d7da',\r\n            color: '#721c24',\r\n            padding: '12px 16px',\r\n            borderRadius: '4px',\r\n            border: '1px solid #f5c6cb',\r\n            zIndex: 1000\r\n          }}>\r\n            {authError}\r\n            <button \r\n              onClick={() => setAuthError(null)}\r\n              style={{\r\n                marginLeft: '10px',\r\n                background: 'none',\r\n                border: 'none',\r\n                color: '#721c24',\r\n                cursor: 'pointer',\r\n                fontSize: '16px'\r\n              }}\r\n            >\r\n              ✕\r\n            </button>\r\n          </div>\r\n        )}\r\n      </>\r\n    );\r\n  }\r\n\r\n  // Show profile setup if user needs to complete their profile\r\n  if (needsProfile) {\r\n    return (\r\n      <ManagementProvider>\r\n        <UserProfileSetup\r\n          onComplete={handleProfileComplete}\r\n          userEmail={firebaseUser.email || ''}\r\n          userDisplayName={firebaseUser.displayName || undefined}\r\n          userPhoneNumber={firebaseUser.phoneNumber || undefined}\r\n          isLoading={profileLoading}\r\n          error={profileError}\r\n        />\r\n      </ManagementProvider>\r\n    );\r\n  }\r\n\r\n  // Show error if profile couldn't be loaded\r\n  if (!userProfile) {\r\n    return (\r\n      <div style={{ \r\n        display: 'flex', \r\n        justifyContent: 'center', \r\n        alignItems: 'center', \r\n        height: '100vh',\r\n        flexDirection: 'column',\r\n        fontSize: '1.2rem'\r\n      }}>\r\n        <div className=\"alert alert-danger\">\r\n          {profileError || 'שגיאה בטעינת פרופיל המשתמש'}\r\n        </div>\r\n        <button \r\n          className=\"btn btn-primary\" \r\n          onClick={() => window.location.reload()}\r\n        >\r\n          נסה שוב\r\n        </button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const getAvailableTabs = (): Tab[] => {\r\n    if (isAdmin) {\r\n      return ['dashboard', 'dailyReport', 'receipts', 'users', 'items', 'management'];\r\n    } else {\r\n      return ['dashboard', 'dailyReport', 'receipts'];\r\n    }\r\n  };\r\n\r\n  const availableTabs = getAvailableTabs();\r\n  \r\n  // Redirect to available tab if current tab is not accessible\r\n  if (!availableTabs.includes(activeTab) && activeTab !== 'settings') {\r\n    setActiveTab(availableTabs[0]);\r\n  }\r\n\r\n  const renderTabContent = () => {\r\n    switch (activeTab) {\r\n      case 'dashboard':\r\n        return <Dashboard />;\r\n      case 'dailyReport':\r\n        return <DailyReport userProfile={userProfile} isAdmin={isAdmin} />;\r\n      case 'receipts':\r\n        return <ReceiptsTab \r\n          ref={receiptsTabRef}\r\n          userProfile={userProfile} \r\n          isAdmin={isAdmin}\r\n        />;\r\n      case 'users':\r\n        return isAdmin ? <UsersTab isAdmin={isAdmin} /> : null;\r\n      case 'items':\r\n        return isAdmin ? <ItemsTab userProfile={userProfile} isAdmin={isAdmin} /> : null;\r\n      case 'management':\r\n        return isAdmin ? <ManagementTab /> : null;\r\n      case 'settings':\r\n        return <SettingsTab userProfile={userProfile} isAdmin={isAdmin} />;\r\n      default:\r\n        return null;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <ErrorBoundary>\r\n      <ThemeProvider>\r\n        <PendingReceiptsProvider>\r\n          <ManagementProvider>\r\n          <Layout \r\n            topHeader={\r\n              <TopHeader\r\n                user={firebaseUser}\r\n                userProfile={userProfile}\r\n                isAdmin={isAdmin}\r\n                onLogout={handleLogout}\r\n                onSettingsClick={() => setActiveTab('settings')}\r\n                onPendingReceiptsClick={handlePendingReceiptsClick}\r\n              />\r\n            }\r\n            sidebar={\r\n              <Navigation \r\n                activeTab={activeTab}\r\n                availableTabs={[...availableTabs, 'settings']}\r\n                onTabChange={(tab: string) => setActiveTab(tab as Tab)}\r\n                user={firebaseUser}\r\n                userProfile={userProfile}\r\n                isAdmin={isAdmin}\r\n                onLogout={handleLogout}\r\n              />\r\n            }\r\n          >\r\n            {renderTabContent()}\r\n          </Layout>\r\n          </ManagementProvider>\r\n        </PendingReceiptsProvider>\r\n      </ThemeProvider>\r\n    </ErrorBoundary>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport './index.css';\nimport App from './App';\n\nconst root = ReactDOM.createRoot(\n  document.getElementById('root') as HTMLElement\n);\nroot.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>\n);\n"],"names":["Scheduler","require","React","ReactDOM","formatProdErrorMessage","code","url","arguments","length","encodeURIComponent","i","isValidContainer","node","nodeType","getNearestMountedFiber","fiber","nearestMounted","alternate","return","flags","tag","getSuspenseInstanceFromFiber","suspenseState","memoizedState","dehydrated","assertIsMounted","Error","findCurrentHostFiberImpl","child","sibling","assign","Object","REACT_LEGACY_ELEMENT_TYPE","Symbol","for","REACT_ELEMENT_TYPE","REACT_PORTAL_TYPE","REACT_FRAGMENT_TYPE","REACT_STRICT_MODE_TYPE","REACT_PROFILER_TYPE","REACT_PROVIDER_TYPE","REACT_CONSUMER_TYPE","REACT_CONTEXT_TYPE","REACT_FORWARD_REF_TYPE","REACT_SUSPENSE_TYPE","REACT_SUSPENSE_LIST_TYPE","REACT_MEMO_TYPE","REACT_LAZY_TYPE","REACT_ACTIVITY_TYPE","REACT_MEMO_CACHE_SENTINEL","MAYBE_ITERATOR_SYMBOL","iterator","getIteratorFn","maybeIterable","REACT_CLIENT_REFERENCE","getComponentNameFromType","type","$$typeof","displayName","name","_context","innerType","render","_payload","_init","x","isArrayImpl","Array","isArray","ReactSharedInternals","__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE","ReactDOMSharedInternals","__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE","sharedNotPendingObject","pending","data","method","action","valueStack","index","createCursor","defaultValue","current","pop","cursor","push","value","contextStackCursor","contextFiberStackCursor","rootInstanceStackCursor","hostTransitionProviderCursor","pushHostContainer","nextRootInstance","documentElement","namespaceURI","getOwnHostContext","tagName","getChildHostContextProd","popHostContainer","pushHostContext","context","JSCompiler_inline_result","popHostContext","HostTransitionContext","_currentValue","hasOwnProperty","prototype","scheduleCallback$3","unstable_scheduleCallback","cancelCallback$1","unstable_cancelCallback","shouldYield","unstable_shouldYield","requestPaint","unstable_requestPaint","now","unstable_now","getCurrentPriorityLevel","unstable_getCurrentPriorityLevel","ImmediatePriority","unstable_ImmediatePriority","UserBlockingPriority","unstable_UserBlockingPriority","NormalPriority$1","unstable_NormalPriority","LowPriority","unstable_LowPriority","IdlePriority","unstable_IdlePriority","log$1","log","unstable_setDisableYieldValue","rendererID","injectedHook","setIsStrictModeForDevtools","newIsStrictMode","setStrictMode","err","clz32","Math","LN2","nextTransitionLane","nextRetryLane","getHighestPriorityLanes","lanes","pendingSyncLanes","getNextLanes","root","wipLanes","rootHasPendingCommit","pendingLanes","nextLanes","suspendedLanes","pingedLanes","warmLanes","nonIdlePendingLanes","checkIfRootIsPrerendering","renderLanes","computeExpirationTime","lane","currentTime","claimNextTransitionLane","claimNextRetryLane","createLaneMap","initial","laneMap","markRootUpdated$1","updateLane","markSpawnedDeferredLane","spawnedLane","entangledLanes","spawnedLaneIndex","entanglements","markRootEntangled","rootEntangledLanes","index$6","getBumpedLaneForHydrationByLane","lanesToEventPriority","resolveUpdatePriority","updatePriority","p","window","event","getEventPriority","randomKey","random","toString","slice","internalInstanceKey","internalPropsKey","internalContainerInstanceKey","internalEventHandlersKey","internalEventHandlerListenersKey","internalEventHandlesSetKey","internalRootNodeResourcesKey","internalHoistableMarker","detachDeletedInstance","getClosestInstanceFromNode","targetNode","targetInst","parentNode","getParentSuspenseInstance","getInstanceFromNode","getNodeFromInstance","inst","stateNode","getResourcesFromRoot","resources","hoistableStyles","Map","hoistableScripts","markNodeAsHoistable","allNativeEvents","Set","registrationNameDependencies","registerTwoPhaseEvent","registrationName","dependencies","registerDirectEvent","add","prefix","suffix","VALID_ATTRIBUTE_NAME_REGEX","RegExp","illegalAttributeNameCache","validatedAttributeNameCache","setValueForAttribute","attributeName","call","test","removeAttribute","prefix$8","toLowerCase","setAttribute","setValueForKnownAttribute","setValueForNamespacedAttribute","namespace","setAttributeNS","describeBuiltInComponentFrame","match","stack","trim","indexOf","reentry","describeNativeComponentFrame","fn","construct","previousPrepareStackTrace","prepareStackTrace","RunInRootFrame","DetermineComponentFrameRoot","Fake","defineProperty","set","Reflect","control","x$9","x$10","catch","sample","namePropDescriptor","getOwnPropertyDescriptor","configurable","_RunInRootFrame$Deter","sampleStack","controlStack","sampleLines","split","controlLines","includes","frame","replace","describeFiber","getStackByFiberInDevAndProd","workInProgress","info","message","getToStringValue","isCheckable","elem","nodeName","track","_valueTracker","valueField","descriptor","constructor","currentValue","get","this","enumerable","getValue","setValue","stopTracking","trackValueOnNode","updateValueIfChanged","tracker","lastValue","checked","getActiveElement","doc","document","activeElement","body","e","escapeSelectorAttributeValueInsideDoubleQuotesRegex","escapeSelectorAttributeValueInsideDoubleQuotes","ch","charCodeAt","updateInput","element","lastDefaultValue","defaultChecked","setDefaultValue","initInput","isHydrating","ownerDocument","updateOptions","multiple","propValue","setDefaultSelected","options","selected","defaultSelected","disabled","updateTextarea","initTextarea","children","textContent","setTextContent","text","firstChild","lastChild","nodeValue","unitlessNumbers","setValueForStyle","style","styleName","isCustomProperty","setProperty","cssFloat","has","setValueForStyles","styles","prevStyles","styleName$16","styleName$17","isCustomElement","aliases","isJavaScriptProtocol","sanitizeURL","currentReplayingEvent","getEventTarget","nativeEvent","target","srcElement","correspondingUseElement","restoreTarget","restoreQueue","restoreStateOfTarget","internalInstance","props","a","querySelectorAll","otherNode","form","otherProps","isInsideEventHandler","batchedUpdates$1","b","flushSyncWork$1","getListener","canUseDOM","createElement","passiveBrowserEventsSupported","addEventListener","removeEventListener","startText","fallbackText","getData","start","end","startValue","startLength","endValue","endLength","minEnd","getEventCharCode","keyCode","charCode","functionThatReturnsTrue","functionThatReturnsFalse","createSyntheticEvent","Interface","SyntheticBaseEvent","reactName","reactEventType","nativeEventTarget","propName","_reactName","_targetInst","currentTarget","isDefaultPrevented","defaultPrevented","returnValue","isPropagationStopped","preventDefault","stopPropagation","cancelBubble","persist","isPersistent","lastMovementX","lastMovementY","lastMouseEvent","EventInterface","eventPhase","bubbles","cancelable","timeStamp","Date","isTrusted","SyntheticEvent","UIEventInterface","view","detail","SyntheticUIEvent","MouseEventInterface","screenX","screenY","clientX","clientY","pageX","pageY","ctrlKey","shiftKey","altKey","metaKey","getModifierState","getEventModifierState","button","buttons","relatedTarget","fromElement","toElement","movementX","movementY","SyntheticMouseEvent","SyntheticDragEvent","dataTransfer","SyntheticFocusEvent","SyntheticAnimationEvent","animationName","elapsedTime","pseudoElement","SyntheticClipboardEvent","clipboardData","SyntheticCompositionEvent","normalizeKey","Esc","Spacebar","Left","Up","Right","Down","Del","Win","Menu","Apps","Scroll","MozPrintableKey","translateToKey","modifierKeyToProp","Alt","Control","Meta","Shift","modifierStateGetter","keyArg","SyntheticKeyboardEvent","key","String","fromCharCode","location","repeat","locale","which","SyntheticPointerEvent","pointerId","width","height","pressure","tangentialPressure","tiltX","tiltY","twist","pointerType","isPrimary","SyntheticTouchEvent","touches","targetTouches","changedTouches","SyntheticTransitionEvent","propertyName","SyntheticWheelEvent","deltaX","wheelDeltaX","deltaY","wheelDeltaY","wheelDelta","deltaZ","deltaMode","SyntheticToggleEvent","newState","oldState","END_KEYCODES","canUseCompositionEvent","documentMode","canUseTextInputEvent","useFallbackCompositionData","SPACEBAR_CHAR","hasSpaceKeypress","isFallbackCompositionEnd","domEventName","getDataFromCustomEvent","isComposing","supportedInputTypes","color","date","datetime","email","month","number","password","range","search","tel","time","week","isTextInputElement","createAndAccumulateChangeEvent","dispatchQueue","accumulateTwoPhaseListeners","listeners","activeElement$1","activeElementInst$1","runEventInBatch","processDispatchQueue","getInstIfValueChanged","getTargetInstForChangeEvent","isInputEventSupported","JSCompiler_inline_result$jscomp$282","isSupported$jscomp$inline_417","element$jscomp$inline_418","oninput","stopWatchingForValueChange","detachEvent","handlePropertyChange","handleEventsForInputEventPolyfill","attachEvent","getTargetInstForInputEventPolyfill","getTargetInstForClickEvent","getTargetInstForInputOrChangeEvent","objectIs","is","y","shallowEqual","objA","objB","keysA","keys","keysB","currentKey","getLeafNode","getNodeForCharacterOffset","offset","nodeEnd","nextSibling","containsNode","outerNode","innerNode","contains","compareDocumentPosition","getActiveElementDeep","containerInfo","defaultView","HTMLIFrameElement","contentWindow","href","hasSelectionCapabilities","contentEditable","skipSelectionChangeEvent","activeElementInst","lastSelection","mouseDown","constructSelectEvent","selectionStart","selectionEnd","anchorNode","getSelection","anchorOffset","focusNode","focusOffset","makePrefixMap","styleProp","eventName","prefixes","vendorPrefixes","animationend","animationiteration","animationstart","transitionrun","transitionstart","transitioncancel","transitionend","prefixedEventNames","getVendorPrefixedEventName","prefixMap","animation","transition","ANIMATION_END","ANIMATION_ITERATION","ANIMATION_START","TRANSITION_RUN","TRANSITION_START","TRANSITION_CANCEL","TRANSITION_END","topLevelEventsToReactNames","simpleEventPluginEvents","registerSimpleEvent","CapturedStacks","WeakMap","createCapturedValueAtFiber","source","existing","concurrentQueues","concurrentQueuesIndex","concurrentlyUpdatedLanes","finishQueueingConcurrentUpdates","endIndex","queue","update","next","markUpdateLaneFromFiberToRoot","enqueueUpdate$1","enqueueConcurrentHookUpdate","getRootForUpdatedFiber","enqueueConcurrentRenderForLane","sourceFiber","isHidden","parent","childLanes","_visibility","hiddenUpdates","nestedUpdateCount","rootWithNestedUpdates","emptyContextObject","FiberNode","pendingProps","mode","elementType","refCleanup","ref","updateQueue","memoizedProps","subtreeFlags","deletions","createFiberImplClass","shouldConstruct","Component","isReactComponent","createWorkInProgress","firstContext","resetWorkInProgress","createFiberFromTypeAndProps","owner","fiberTag","hostContext","itemProp","precedence","rel","onLoad","onError","async","src","isHostHoistableType","createFiberFromFragment","elements","createFiberFromText","content","createFiberFromPortal","portal","pendingChildren","implementation","forkStack","forkStackIndex","treeForkProvider","treeForkCount","idStack","idStackIndex","treeContextProvider","treeContextId","treeContextOverflow","pushTreeFork","totalChildren","pushTreeId","baseIdWithLeadingBit","baseLength","numberOfOverflowBits","pushMaterializedTreeId","popTreeContext","hydrationParentFiber","nextHydratableInstance","hydrationErrors","rootOrSingletonContext","HydrationMismatchException","throwOnHydrationMismatch","queueHydrationError","prepareToHydrateHostInstance","instance","listenToNonDelegatedEvent","mediaEventTypes","suppressHydrationWarning","checkForUnmatchedText","popover","onScroll","onScrollEnd","onClick","onclick","noop$1","popToNextHostParent","popHydrationState","JSCompiler_temp","shouldSetTextContent","getNextHydratable","isSingletonScope","previousHydratableOnEnteringScopedSingleton","resetHydrationState","upgradeHydrationErrorsToRecoverable","queuedErrors","workInProgressRootRecoverableErrors","apply","error","valueCursor","currentlyRenderingFiber$1","lastContextDependency","pushProvider","providerFiber","nextValue","popProvider","scheduleContextWorkOnParentPath","propagationRoot","propagateContextChanges","contexts","forcePropagateEntireTree","list","nextFiber","dependency","propagateParentContextChanges","isInsidePropagationBailout","currentParent","checkIfContextChanged","currentDependencies","memoizedValue","prepareToReadContext","readContext","readContextForConsumer","readContextDuringReconciliation","consumer","AbortControllerLocal","AbortController","signal","aborted","listener","abort","forEach","scheduleCallback$2","NormalPriority","CacheContext","Consumer","Provider","_currentValue2","_threadCount","createCache","controller","refCount","releaseCache","cache","currentEntangledListeners","currentEntangledPendingCount","currentEntangledLane","currentEntangledActionThenable","pingEngtangledActionScope","status","prevOnStartTransitionFinish","S","then","thenable","entangledListeners","requestTransitionLane","resolve","entangleAsyncAction","resumedCache","peekCacheFromPool","cacheResumedFromPreviousRender","workInProgressRoot","pooledCache","pushTransition","offscreenWorkInProgress","prevCachePool","pool","getSuspendedCache","cacheFromPool","SuspenseException","SuspenseyCommitException","SuspenseActionException","noopSuspenseyCommitThenable","isThenableResolved","noop$3","trackUsedThenable","thenableState","checkIfUseWrappedInAsyncCatch","reason","shellSuspendCounter","fulfilledValue","fulfilledThenable","rejectedThenable","suspendedThenable","getSuspendedThenable","rejectedReason","hasForceUpdate","initializeUpdateQueue","baseState","firstBaseUpdate","lastBaseUpdate","shared","hiddenCallbacks","callbacks","cloneUpdateQueue","createUpdate","payload","callback","enqueueUpdate","executionContext","entangleTransitions","queueLanes","enqueueCapturedUpdate","capturedUpdate","newFirst","newLast","clone","didReadFromEntangledAsyncAction","suspendIfUpdateReadFromEntangledAsyncAction","processUpdateQueue","workInProgress$jscomp$0","instance$jscomp$0","pendingQueue","lastPendingUpdate","firstPendingUpdate","isHiddenUpdate","workInProgressRootRenderLanes","workInProgressRootSkippedLanes","callCallback","commitCallbacks","currentTreeHiddenStackCursor","prevEntangledRenderLanesCursor","pushHiddenContext","entangledRenderLanes","baseLanes","reuseHiddenContextOnStack","popHiddenContext","currentlyRenderingFiber","currentHook","workInProgressHook","didScheduleRenderPhaseUpdate","didScheduleRenderPhaseUpdateDuringThisPass","shouldDoubleInvokeUserFnsInHooksDEV","localIdCounter","thenableIndexCounter$1","thenableState$1","globalClientIdCounter","throwInvalidHookError","areHookInputsEqual","nextDeps","prevDeps","renderWithHooks","secondArg","nextRenderLanes","H","HooksDispatcherOnMount","HooksDispatcherOnUpdate","renderWithHooksAgain","finishRenderingHooks","ContextOnlyDispatcher","didRenderTooFewHooks","didReceiveUpdate","numberOfReRenders","lastEffect","events","stores","memoCache","HooksDispatcherOnRerender","TransitionAwareHostComponent","dispatcher","maybeThenable","useState","useThenable","checkDidRenderIdHook","didRenderIdHook","bailoutHooks","resetHooksOnUnwind","mountWorkInProgressHook","hook","baseQueue","updateWorkInProgressHook","nextCurrentHook","nextWorkInProgressHook","use","usable","useMemoCache","size","map","array","basicStateReducer","state","updateReducer","reducer","updateReducerImpl","lastRenderedReducer","baseFirst","newBaseQueueFirst","newBaseQueueLast","didReadFromEntangledAsyncAction$32","revertLane","hasEagerState","eagerState","lastRenderedState","dispatch","rerenderReducer","lastRenderPhaseUpdate","updateSyncExternalStore","subscribe","getSnapshot","getServerSnapshot","isHydrating$jscomp$0","snapshotChanged","updateEffectImpl","subscribeToStore","bind","pushSimpleEffect","destroy","resource","updateStoreInstance","pushStoreConsistencyCheck","renderedSnapshot","nextSnapshot","checkIfSnapshotChanged","forceStoreRerender","latestGetSnapshot","scheduleUpdateOnFiber","mountStateImpl","initialState","initialStateInitializer","updateOptimisticImpl","passthrough","dispatchActionState","actionQueue","setPendingState","setState","isRenderPhaseUpdate","actionNode","isTransition","T","runActionStateAction","prevState","prevTransition","currentTransition","onStartTransitionFinish","handleActionReturnValue","onActionError","error$38","nextState","onActionSuccess","notifyActionListeners","last","actionStateReducer","mountActionState","initialStateProp","ssrFormState","formState","JSCompiler_inline_result$jscomp$0","inRootOrSingleton","dispatchSetState","dispatchOptimisticSetState","updateActionState","updateActionStateImpl","stateHook","currentStateHook","actionStateActionEffect","rerenderActionState","create","createDeps","deps","updateRef","mountEffectImpl","fiberFlags","hookFlags","mountEffect","updateEffect","updateInsertionEffect","updateLayoutEffect","imperativeHandleEffect","updateImperativeHandle","concat","mountDebugValue","updateCallback","updateMemo","nextCreate","mountDeferredValueImpl","initialValue","requestDeferredLane","updateDeferredValueImpl","prevValue","startTransition","pendingState","finishedState","previousPriority","dispatchSetStateInternal","result","thenableWithOverride","chainThenableValue","requestUpdateLane","noop$2","startHostTransition","formFiber","formData","ensureFormComponentIsStateful","requestFormReset$1","existingStateHook","initialResetState","useHostTransitionStatus","updateId","updateRefresh","refreshCache","provider","root$41","dispatchReducerAction","enqueueRenderPhaseUpdate","entangleTransitionUpdate","currentState","throwIfDuringRender","useCallback","useContext","useEffect","useImperativeHandle","useLayoutEffect","useInsertionEffect","useMemo","useReducer","useRef","useDebugValue","useDeferredValue","useTransition","useSyncExternalStore","useId","useFormState","useActionState","useOptimistic","useCacheRefresh","initialArg","init","identifierPrefix","booleanOrThenable","thenableIndexCounter","unwrapThenable","coerceRef","throwOnInvalidObjectType","returnFiber","newChild","join","resolveLazy","lazyType","createChildReconciler","shouldTrackSideEffects","deleteChild","childToDelete","deleteRemainingChildren","currentFirstChild","mapRemainingChildren","existingChildren","useFiber","placeChild","newFiber","lastPlacedIndex","newIndex","placeSingleChild","updateTextNode","updateElement","updateFragment","updatePortal","fragment","createChild","updateSlot","oldFiber","updateFromMap","newIdx","reconcileChildFibersImpl","newChildren","resultingFirstChild","previousNewFiber","nextOldFiber","delete","reconcileChildrenArray","step","done","reconcileChildrenIterator","firstChildFiber","reconcileChildFibers","mountChildFibers","suspenseHandlerStackCursor","shellBoundary","pushPrimaryTreeSuspenseHandler","handler","suspenseStackCursor","pushOffscreenSuspenseHandler","reuseSuspenseHandlerOnStack","popSuspenseHandler","findFirstSuspended","row","isSuspenseInstanceFallback","revealOrder","applyDerivedStateFromProps","ctor","getDerivedStateFromProps","nextProps","classComponentUpdater","enqueueSetState","_reactInternals","enqueueReplaceState","enqueueForceUpdate","checkShouldComponentUpdate","oldProps","newProps","nextContext","shouldComponentUpdate","isPureReactComponent","callComponentWillReceiveProps","componentWillReceiveProps","UNSAFE_componentWillReceiveProps","resolveClassComponentProps","baseProps","defaultProps","propName$73","reportGlobalError","reportError","ErrorEvent","dispatchEvent","process","emit","console","defaultOnUncaughtError","defaultOnCaughtError","defaultOnRecoverableError","logUncaughtError","errorInfo","onUncaughtError","componentStack","e$74","setTimeout","logCaughtError","boundary","onCaughtError","errorBoundary","e$75","createRootErrorUpdate","createClassErrorUpdate","initializeClassErrorUpdate","getDerivedStateFromError","componentDidCatch","legacyErrorBoundariesThatAlreadyFailed","SelectiveHydrationException","reconcileChildren","nextChildren","updateForwardRef","propsWithoutRef","bailoutOnAlreadyFinishedWork","updateMemoComponent","compare","updateSimpleMemoComponent","checkScheduledUpdateOrContext","prevProps","updateFunctionComponent","updateOffscreenComponent","deferHiddenOffscreenComponent","cachePool","nextBaseLanes","markRef","replayFunctionComponent","updateClassComponent","contextType","updater","refs","getSnapshotBeforeUpdate","UNSAFE_componentWillMount","componentWillMount","componentDidMount","unresolvedOldProps","oldContext","contextType$jscomp$0","UNSAFE_componentWillUpdate","componentWillUpdate","componentDidUpdate","mountHostRootWithoutHydrating","SUSPENDED_MARKER","treeContext","retryLane","mountSuspenseOffscreenState","getRemainingWorkInPrimaryTree","primaryTreeDidDefer","workInProgressDeferredLane","updateSuspenseComponent","showFallback","didSuspend","JSCompiler_temp$jscomp$0","nextInstance","c","id","overflow","fallback","mountWorkInProgressOffscreenFiber","mountSuspensePrimaryChildren","retrySuspenseComponentWithoutHydrating","dataset","digest","dgst","renderDidSuspendDelayIfPossible","primaryChildren","offscreenProps","_pendingMarkers","_retryCache","_transitions","scheduleSuspenseWorkOnFiber","initSuspenseListRenderState","isBackwards","tail","lastContentRow","tailMode","renderState","rendering","renderingStartTime","updateSuspenseListComponent","beginWork","didSuspendBefore","attemptEarlyBailoutIfNoScheduledUpdate","lazyComponent","isDehydrated","getResource","getOwnerDocumentFromRootContainer","setInitialProperties","resolveSingletonInstance","anyProps","hasAttribute","getAttribute","crossOrigin","title","canHydrateInstance","canHydrateTextInstance","pooledCacheLanes","markUpdate","preloadResourceAndSuspendIfNeeded","loading","preloadResource","scheduleRetryEffect","retryQueue","workInProgressSuspendedRetryLanes","cutOffTailIfNeeded","hasRenderedATailFallback","lastTailNode","lastTailNode$113","bubbleProperties","completedWork","didBailout","newChildLanes","child$114","completeWork","pendingContext","createElementNS","innerHTML","removeChild","appendChild","autoFocus","createTextNode","cache$127","listenToAllSupportedEvents","workInProgressRootExitStatus","workInProgressRootRenderTargetTime","unwindWork","unwindInterruptedWork","interruptedWork","commitHookEffectListMount","finishedWork","firstEffect","captureCommitPhaseError","commitHookEffectListUnmount","nearestMountedAncestor$jscomp$0","nearestMountedAncestor","destroy_","commitClassCallbacks","safelyCallComponentWillUnmount","componentWillUnmount","safelyAttachRef","instanceToUse","safelyDetachRef","error$143","commitHostMount","focus","srcSet","srcset","commitHostUpdate","domElement","lastProps","propKey","lastProp","setProp","propKey$205","propKey$221","propKey$226","propKey$231","setPropOnCustomElement","propKey$236","updateProperties","isHostParent","getHostSibling","insertOrAppendPlacementNodeIntoContainer","before","insertBefore","_reactRootContainer","insertOrAppendPlacementNode","commitHostSingletonAcquisition","singleton","attributes","removeAttributeNode","offscreenSubtreeIsHidden","offscreenSubtreeWasHidden","needsFormReset","PossiblyWeakSet","WeakSet","nextEffect","commitLayoutEffectOnFiber","finishedRoot","recursivelyTraverseLayoutEffects","__reactInternalSnapshotBeforeUpdate","error$142","commitSuspenseHydrationCallbacks","readyState","_reactRetry","registerSuspenseInstanceRetry","retryDehydratedSuspenseBoundary","prevOffscreenSubtreeWasHidden","recursivelyTraverseReappearLayoutEffects","detachFiberAfterEffects","hostParent","hostParentIsContainer","recursivelyTraverseDeletionEffects","commitDeletionEffectsOnFiber","deletedFiber","onCommitFiberUnmount","count","prevHostParent","prevHostParentIsContainer","releaseSingletonInstance","clearSuspenseBoundary","retryIfBlockedOn","attachSuspenseRetryListeners","wakeables","retryCache","getRetryCache","wakeable","retry","resolveRetryWakeable","recursivelyTraverseMutationEffects","root$jscomp$0","parentFiber","commitMutationEffectsOnFiber","currentHoistableRoot","commitReconciliationEffects","hoistableRoot","currentResource","getElementsByTagName","head","querySelector","maybeNodes","getHydratableHoistableCache","splice","property","httpEquiv","charSet","mountHoistable","acquireResource","tagCaches","getHoistableRoot","recursivelyResetForms","globalMostRecentFallbackTime","wasHidden","prevOffscreenSubtreeIsHidden","recursivelyTraverseDisappearLayoutEffects","display","hostParentFiber","parent$144","parent$146","reset","finishedRoot$jscomp$0","includeWorkInProgressEffects","commitOffscreenPassiveMountEffects","previousCache","commitCachePassiveMountEffect","recursivelyTraversePassiveMountEffects","committedLanes","committedTransitions","commitPassiveMountOnFiber","_finishedWork$memoize2","onPostCommit","passiveEffectDuration","recursivelyTraverseAtomicPassiveEffects","recursivelyTraverseReconnectPassiveEffects","committedLanes$jscomp$0","committedTransitions$jscomp$0","suspenseyCommitFlag","recursivelyAccumulateSuspenseyCommit","accumulateSuspenseyCommitOnFiber","suspendedState","media","matchMedia","matches","getStyleKey","getStylesheetSelectorFromKey","_p","onUnsuspend","stylesheetPropsFromRawProps","preloadPropsMap","adoptPreloadPropsForStylesheet","linkInstance","Promise","reject","onload","onerror","stylesheets","preload","suspendResource","previousHoistableRoot","detachAlternateSiblings","previousFiber","recursivelyTraversePassiveUnmountEffects","commitPassiveUnmountEffectsInsideOfDeletedTree_begin","commitPassiveUnmountOnFiber","recursivelyTraverseDisconnectPassiveEffects","deletedSubtreeRoot","DefaultAsyncDispatcher","getCacheForType","resourceType","cacheForType","PossiblyWeakMap","workInProgressSuspendedReason","workInProgressThrownValue","workInProgressRootDidSkipSuspendedSiblings","workInProgressRootIsPrerendering","workInProgressRootDidAttachPingListener","workInProgressRootInterleavedUpdatedLanes","workInProgressRootPingedLanes","workInProgressRootConcurrentErrors","workInProgressRootDidIncludeRecursiveRenderUpdate","Infinity","workInProgressTransitions","pendingEffectsStatus","pendingEffectsRoot","pendingFinishedWork","pendingEffectsLanes","pendingEffectsRemainingLanes","pendingPassiveTransitions","pendingRecoverableErrors","suspenseHandler","cancelPendingCommit","prepareFreshStack","markRootSuspended","ensureRootIsScheduled","performWorkOnRoot","forceSync","shouldTimeSlice","expiredLanes","exitStatus","prevExecutionContext","prevDispatcher","pushDispatcher","prevAsyncDispatcher","pushAsyncDispatcher","thrownValue","throwAndUnwindWorkLoop","replaySuspendedUnitOfWork","hostFiber","completeUnitOfWork","resetWorkInProgressStack","workLoopConcurrentByScheduler","thrownValue$169","handleThrow","A","renderRootConcurrent","renderRootSync","renderWasConcurrent","isRenderConsistentWithExternalStores","errorRecoveryDisabledLanes","wasRootDehydrated","timeoutHandle","scheduleTimeout","commitRootWhenReady","recoverableErrors","transitions","didIncludeRenderPhaseUpdate","updatedLanes","suspendedRetryLanes","didSkipSuspendedSiblings","suspendedCommitReason","completedRenderStartTime","completedRenderEndTime","unsuspend","noop","insertSuspendedStylesheets","commit","stylesheetTimer","clearTimeout","waitForCommitToBeReady","commitRoot","check","didAttemptEntireTree","expirationTimes","index$4","flushSyncWorkAcrossRoots_impl","cancelTimeout","allEntangledLanes","index$2","shouldYieldForPrerendering","unitOfWork","workLoopSync","thrownValue$167","performUnitOfWork","suspendedReason","rootRenderLanes","attachPingListener","markerInstances","cause","wrapperError","throwException","unwindUnitOfWork","skipSiblings","flushPendingEffects","finishedLanes","remainingLanes","previouslyPendingLanes","index$5","hiddenUpdatesForLane","markRootFinished","callbackNode","callbackPriority","flushPassiveEffects","eventsEnabled","_enabled","selection","rangeCount","e$20","indexWithinAnchor","indexWithinFocus","selectionInformation","focusedElem","selectionRange","resolvedPrevProps","clearContainerSparingly","commitBeforeMutationEffects","flushMutationEffects","flushLayoutEffects","flushSpawnedWork","rootMutationHasEffect","priorSelectionInformation","curFocusedElem","priorFocusedElem","priorSelectionRange","min","win","start$jscomp$0","end$jscomp$0","extend","startMarker","endMarker","createRange","setStart","removeAllRanges","addRange","setEnd","left","scrollLeft","top","scrollTop","rootHasLayoutEffect","releaseRootPooledCache","onCommitFiberRoot","onRecoverableError","recoverableError","wasDelayedCommit","renderPriority","onPostCommitFiberRoot","captureCommitPhaseErrorOnRoot","rootFiber","pingCache","threadIDs","pingSuspendedRoot","retryTimedOutBoundary","boundaryFiber","firstScheduledRoot","lastScheduledRoot","didScheduleMicrotask","mightHavePendingSyncWork","isFlushingWork","currentEventTransitionLane","scheduleMicrotask","processRootScheduleInImmediateTask","processRootScheduleInMicrotask","syncTransitionLanes","onlyLegacy","didPerformSomeWork","root$174","performSyncWorkOnRoot","currentPopstateTransitionEvent","shouldAttemptEagerTransition","prev","scheduleTaskForRootDuringMicrotask","index$3","expirationTime","performWorkOnRootViaSchedulerTask","didTimeout","originalCallbackNode","workInProgressRootRenderLanes$jscomp$0","coerceFormActionProp","actionProp","createFormDataWithSubmitter","submitter","temp","FormData","i$jscomp$inline_1528","eventName$jscomp$inline_1529","toUpperCase","nonDelegatedEvents","eventSystemFlags","_dispatchQueue$i","previousInstance","i$jscomp$0","_dispatchListeners$i","targetElement","listenerSetKey","addTrappedEventListener","listenToNativeEvent","isCapturePhaseListener","listeningMarker","rootContainerElement","targetContainer","listenerWrapper","dispatchDiscreteEvent","dispatchContinuousEvent","capture","passive","dispatchEventForPluginEventSystem","targetInst$jscomp$0","ancestorInst","nodeTag","container","grandTag","SyntheticEventCtor","inCapturePhase","accumulateTargetOnly","reactEventName","lastHostComponent","_instance","createDispatchListener","parentWindow","getParent","accumulateEnterLeaveListenersForEvent","getTargetInstFunc","handleEventFunc","fallbackData","eventType","getNativeBeforeInputChars","char","getFallbackBeforeInputChars","maybeTargetInst","formAction","extractEvents$1","targetFiber","captureName","_instance2","unshift","common","_instance3","NORMALIZE_NEWLINES_REGEX","NORMALIZE_NULL_AND_REPLACEMENT_REGEX","normalizeMarkupForTextOrAttribute","markup","serverText","clientText","formEncType","formMethod","formTarget","encType","__html","muted","isNaN","endsWith","hasSrc","hasSrcSet","propValue$188","parentNamespace","dangerouslySetInnerHTML","localPromise","queueMicrotask","handleErrorInNextTick","parentInstance","suspenseInstance","possiblePreambleContribution","depth","nextNode","nextNode$jscomp$0","targetInstance","previousSibling","rootContainerInstance","preconnectsSet","getRootNode","previousDispatcher","d","f","previousWasRendering","wasRendering","r","formInst","D","preconnectAs","C","L","as","globalDocument","preloadSelector","imageSrcSet","imageSizes","getScriptKey","getScriptSelectorFromKey","m","X","scripts","adoptPreloadPropsForScript","link","insertStylesheet","M","limitedEscapedHref","currentProps","preloadProps","styles$244","resource$245","integrity","hrefLang","referrerPolicy","rawProps","styleProps","instance$250","nodes","prior","stylesheetProps","scriptProps","keyAttribute","caches","nodeKey","precedencesByRoot","insertStylesheetIntoRoot","precedences","FiberRootNode","hydrate","incompleteTransitions","createFiberRoot","initialChildren","hydrationCallbacks","isStrictMode","transitionCallbacks","getContextForSubtree","parentComponent","updateContainerImpl","markRetryLaneImpl","markRetryLaneIfNotHydrated","attemptContinuousHydration","blockedOn","findInstanceBlockingEvent","return_targetInst","clearIfContinuousEvent","queuedFocus","accumulateOrCreateContinuousQueuedReplayableEvent","queuedDrag","queuedMouse","queuedPointers","queuedPointerCaptures","queueIfContinuousEvent","discreteReplayableEvents","findInstanceBlockingTarget","hasScheduledReplayAttempt","queuedExplicitHydrationTargets","existingQueuedEvent","targetContainers","attemptExplicitHydrationTarget","queuedTarget","priority","runWithPriority","attemptReplayContinuousQueuedEvent","queuedEvent","nextBlockedOn","nativeEventClone","shift","attemptReplayContinuousQueuedEventInMap","replayUnblockedEvents","scheduleCallbackIfUnblocked","unblocked","lastScheduledReplayQueue","scheduleReplayQueueIfNeeded","formReplayingQueue","submitterOrAction","unblock","$$reactFormReplay","formProps","ReactDOMRoot","internalRoot","_internalRoot","ReactDOMHydrationRoot","unmount","unstable_scheduleHydration","isomorphicReactPackageVersion$jscomp$inline_1785","version","findDOMNode","componentOrElement","parentA","parentB","didFindChild","child$0","findCurrentFiberUsingSlowPath","internals$jscomp$inline_2256","bundleType","rendererPackageName","currentDispatcherRef","reconcilerVersion","__REACT_DEVTOOLS_GLOBAL_HOOK__","hook$jscomp$inline_2257","isDisabled","supportsFiber","inject","exports","createRoot","unstable_strictMode","unstable_transitionCallbacks","hydrateRoot","module","ReactNoopUpdateQueue","isMounted","emptyObject","ComponentDummy","PureComponent","partialState","forceUpdate","pureComponentPrototype","V","ReactElement","self","isValidElement","object","userProvidedKeyEscapeRegex","getElementKey","escaperLookup","escape","mapIntoArray","escapedPrefix","nameSoFar","oldElement","newKey","invokeCallback","nextNamePrefix","resolveThenable","mapChildren","func","lazyInitializer","_status","_result","moduleObject","default","Children","forEachFunc","forEachContext","n","toArray","only","Fragment","Profiler","StrictMode","Suspense","__COMPILER_RUNTIME","__proto__","cloneElement","config","childArray","createContext","childrenLength","createRef","forwardRef","lazy","memo","scope","unstable_useCacheRefresh","permalink","Context","checkDCE","ReactPropTypesSecret","emptyFunction","emptyFunctionWithReset","resetWarningCache","shim","componentName","propFullName","secret","getShim","isRequired","ReactPropTypes","bigint","bool","string","symbol","any","arrayOf","instanceOf","objectOf","oneOf","oneOfType","shape","exact","checkPropTypes","PropTypes","t","o","loaded","getContext","getImageData","u","l","s","clearRect","putImageData","red","green","blue","alpha","Internals","getCrossOriginStringAs","input","createPortal","createPortal$1","flushSync","previousTransition","previousUpdatePriority","preconnect","prefetchDNS","preinit","fetchPriority","nonce","preinitModule","preloadModule","requestFormReset","unstable_batchedUpdates","useFormStatus","jsxProd","maybeKey","jsx","jsxs","heap","parentIndex","peek","first","halfLength","leftIndex","rightIndex","right","diff","sortIndex","performance","localPerformance","localDate","initialTime","taskQueue","timerQueue","taskIdCounter","currentTask","currentPriorityLevel","isPerformingWork","isHostCallbackScheduled","isHostTimeoutScheduled","needsPaint","localSetTimeout","localClearTimeout","localSetImmediate","setImmediate","advanceTimers","timer","startTime","handleTimeout","isMessageLoopRunning","schedulePerformWorkUntilDeadline","firstTimer","requestHostTimeout","taskTimeoutID","frameInterval","shouldYieldToHost","performWorkUntilDeadline","hasMoreWork","previousPriorityLevel","priorityLevel","continuationCallback","MessageChannel","channel","port","port2","port1","onmessage","postMessage","ms","unstable_Profiling","task","unstable_forceFrameRate","fps","floor","unstable_next","eventHandler","unstable_runWithPriority","delay","timeout","unstable_wrapCallback","parentPriorityLevel","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","definition","g","globalThis","Function","obj","prop","toStringTag","_ref","sidebar","topHeader","isMobileMenuOpen","setIsMobileMenuOpen","isMobile","setIsMobile","checkMobile","mobile","innerWidth","closeMobileMenu","enhancedSidebar","isMobileOpen","onMobileClose","_jsxs","className","_jsx","toggleMobileMenu","viewBox","fill","activeTab","availableTabs","onTabChange","user","userProfile","isAdmin","onLogout","localMobileOpen","setLocalMobileOpen","handleMobileClose","visibleTabs","label","icon","filter","tab","_Fragment","handleTabClick","thisArg","getPrototypeOf","kindOf","thing","str","kindOfTest","typeOfTest","isUndefined","isArrayBuffer","isString","isFunction","isNumber","isObject","isPlainObject","val","isDate","isFile","isBlob","isFileList","isURLSearchParams","isReadableStream","isRequest","isResponse","isHeaders","allOwnKeys","getOwnPropertyNames","len","findKey","_key","_global","global","isContextDefined","isTypedArray","TypedArray","Uint8Array","isHTMLForm","isRegExp","reduceDescriptors","descriptors","getOwnPropertyDescriptors","reducedDescriptors","ret","defineProperties","isAsyncFn","_setImmediate","setImmediateSupported","postMessageSupported","token","_ref2","cb","asap","nextTick","isBuffer","isFormData","kind","append","isArrayBufferView","ArrayBuffer","isView","buffer","isBoolean","isStream","pipe","merge","caseless","assignValue","targetKey","stripBOM","inherits","superConstructor","toFlatObject","sourceObj","destObj","propFilter","merged","searchString","position","lastIndex","arr","forEachEntry","_iterator","pair","matchAll","regExp","exec","hasOwnProp","freezeMethods","writable","toObjectSet","arrayOrString","delimiter","define","toCamelCase","p1","p2","toFiniteNumber","Number","isFinite","isSpecCompliantForm","toJSONObject","visit","reducedValue","isThenable","isIterable","AxiosError","request","response","captureStackTrace","utils","toJSON","description","fileName","lineNumber","columnNumber","from","customProps","axiosError","isVisitable","removeBrackets","renderKey","path","dots","predicates","TypeError","metaTokens","indexes","option","visitor","defaultVisitor","useBlob","Blob","convertValue","toISOString","Buffer","JSON","stringify","some","isFlatArray","el","exposedHelpers","build","encode","charMap","AxiosURLSearchParams","params","_pairs","toFormData","encoder","_encode","buildURL","serialize","serializeFn","serializedParams","hashmarkIndex","handlers","fulfilled","rejected","synchronous","runWhen","eject","clear","h","silentJSONParsing","forcedJSONParsing","clarifyTimeoutError","isBrowser","classes","URLSearchParams","protocols","hasBrowserEnv","_navigator","navigator","hasStandardBrowserEnv","product","hasStandardBrowserWebWorkerEnv","WorkerGlobalScope","importScripts","origin","platform","buildPath","isNumericKey","isLast","arrayToObject","entries","parsePropPath","defaults","transitional","transitionalDefaults","adapter","transformRequest","headers","contentType","getContentType","hasJSONContentType","isObjectPayload","formDataToJSON","setContentType","helpers","isNode","toURLEncodedForm","formSerializer","_FormData","env","rawValue","parser","parse","stringifySafely","transformResponse","JSONRequested","responseType","strictJSONParsing","ERR_BAD_RESPONSE","xsrfCookieName","xsrfHeaderName","maxContentLength","maxBodyLength","validateStatus","ignoreDuplicateOf","$internals","normalizeHeader","header","normalizeValue","matchHeaderValue","isHeaderNameFilter","AxiosHeaders","valueOrRewrite","rewrite","setHeader","_value","_header","_rewrite","lHeader","setHeaders","rawHeaders","parsed","line","substring","parseHeaders","dest","entry","tokens","tokensRE","parseTokens","matcher","deleted","deleteHeader","normalize","format","normalized","w","formatHeader","_len","targets","asStrings","getSetCookie","computed","_len2","_key2","accessor","accessors","defineAccessor","accessorName","methodName","arg1","arg2","arg3","buildAccessors","mapped","headerValue","transformData","fns","isCancel","__CANCEL__","CanceledError","ERR_CANCELED","settle","ERR_BAD_REQUEST","samplesCount","bytes","timestamps","firstSampleTS","chunkLength","startedAt","bytesCount","passed","round","freq","lastArgs","timestamp","threshold","invoke","args","flush","progressEventReducer","isDownloadStream","bytesNotified","_speedometer","speedometer","throttle","total","lengthComputable","progressBytes","rate","progress","estimated","progressEventDecorator","throttled","asyncDecorator","isMSIE","URL","protocol","host","userAgent","write","expires","domain","secure","cookie","toGMTString","read","decodeURIComponent","remove","buildFullPath","baseURL","requestedURL","allowAbsoluteUrls","isRelativeUrl","relativeURL","combineURLs","headersToObject","mergeConfig","config1","config2","getMergedValue","mergeDeepProperties","valueFromConfig2","defaultToConfig2","mergeDirectKeys","mergeMap","paramsSerializer","timeoutMessage","withCredentials","withXSRFToken","onUploadProgress","onDownloadProgress","decompress","beforeRedirect","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding","configValue","newConfig","auth","btoa","username","unescape","Boolean","isURLSameOrigin","xsrfValue","cookies","XMLHttpRequest","_config","resolveConfig","requestData","requestHeaders","onCanceled","uploadThrottled","downloadThrottled","flushUpload","flushDownload","unsubscribe","onloadend","responseHeaders","getAllResponseHeaders","responseText","statusText","open","onreadystatechange","responseURL","onabort","ECONNABORTED","ERR_NETWORK","ontimeout","timeoutErrorMessage","ETIMEDOUT","setRequestHeader","upload","cancel","parseProtocol","send","composeSignals","signals","streamChunk","chunk","chunkSize","byteLength","pos","readStream","stream","asyncIterator","reader","getReader","trackStream","onProgress","onFinish","iterable","readBytes","_onFinish","ReadableStream","pull","close","loadedBytes","enqueue","highWaterMark","isFetchSupported","fetch","Request","Response","isReadableStreamSupported","encodeText","TextEncoder","arrayBuffer","supportsRequestStream","duplexAccessed","hasContentType","duplex","supportsResponseStream","resolvers","res","_","ERR_NOT_SUPPORT","resolveBodyLength","getContentLength","_request","getBodyLength","knownAdapters","http","xhr","xhrAdapter","fetchOptions","composedSignal","toAbortSignal","requestContentLength","contentTypeHeader","isCredentialsSupported","credentials","isStreamResponse","responseContentLength","responseData","renderReason","isResolvedHandle","adapters","nameOrAdapter","rejectedReasons","reasons","throwIfCancellationRequested","throwIfRequested","dispatchRequest","VERSION","validators","deprecatedWarnings","validator","formatMessage","opt","desc","opts","ERR_DEPRECATED","warn","spelling","correctSpelling","assertOptions","schema","allowUnknown","ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","Axios","instanceConfig","interceptors","InterceptorManager","configOrUrl","dummy","boolean","function","baseUrl","withXsrfToken","contextHeaders","requestInterceptorChain","synchronousRequestInterceptors","interceptor","responseInterceptorChain","promise","chain","onFulfilled","onRejected","getUri","generateHTTPMethod","isForm","CancelToken","executor","resolvePromise","_listeners","onfulfilled","_resolve","HttpStatusCode","Continue","SwitchingProtocols","Processing","EarlyHints","Ok","Created","Accepted","NonAuthoritativeInformation","NoContent","ResetContent","PartialContent","MultiStatus","AlreadyReported","ImUsed","MultipleChoices","MovedPermanently","Found","SeeOther","NotModified","UseProxy","Unused","TemporaryRedirect","PermanentRedirect","BadRequest","Unauthorized","PaymentRequired","Forbidden","NotFound","MethodNotAllowed","NotAcceptable","ProxyAuthenticationRequired","RequestTimeout","Conflict","Gone","LengthRequired","PreconditionFailed","PayloadTooLarge","UriTooLong","UnsupportedMediaType","RangeNotSatisfiable","ExpectationFailed","ImATeapot","MisdirectedRequest","UnprocessableEntity","Locked","FailedDependency","TooEarly","UpgradeRequired","PreconditionRequired","TooManyRequests","RequestHeaderFieldsTooLarge","UnavailableForLegalReasons","InternalServerError","NotImplemented","BadGateway","ServiceUnavailable","GatewayTimeout","HttpVersionNotSupported","VariantAlsoNegotiates","InsufficientStorage","LoopDetected","NotExtended","NetworkAuthenticationRequired","axios","createInstance","defaultConfig","Cancel","all","promises","spread","isAxiosError","formToJSON","getAdapter","stringToByteArray$1","out","base64","byteToCharMap_","charToByteMap_","byteToCharMapWebSafe_","charToByteMapWebSafe_","ENCODED_VALS_BASE","ENCODED_VALS","ENCODED_VALS_WEBSAFE","HAS_NATIVE_SUPPORT","atob","encodeByteArray","webSafe","init_","byteToCharMap","output","byte1","haveByte2","byte2","haveByte3","byte3","outByte1","outByte2","outByte3","outByte4","encodeString","decodeString","c1","c2","c3","byteArrayToString","decodeStringToByteArray","charToByteMap","charAt","byte4","DecodeBase64StringError","base64urlEncodeWithoutPadding","utf8Bytes","base64Encode","base64Decode","getDefaultsFromGlobal","getGlobal","__FIREBASE_DEFAULTS__","getDefaults","getDefaultsFromEnvVariable","defaultsJsonString","getDefaultsFromCookie","decoded","getDefaultEmulatorHost","productName","emulatorHosts","getDefaultAppConfig","getExperimentalSetting","Deferred","wrapCallback","isCloudWorkstation","startsWith","hostname","emulatorStatus","previouslyDismissed","updateEmulatorBanner","isRunningEmulator","prefixedId","bannerId","showError","summary","prod","emulator","getEmulatorSummary","setupCloseBtn","closeBtn","marginLeft","fontSize","getElementById","tearDown","setupDom","banner","parentDiv","created","getOrCreateEl","firebaseTextId","firebaseText","learnMoreId","learnMoreLink","prependIconId","prependIcon","bannerEl","background","bottom","padding","borderRadius","alignItems","setupBannerStyles","innerText","paddingLeft","textDecoration","setupLinkStyles","iconId","setupIconStyles","getUA","isBrowserExtension","runtime","chrome","browser","isIndexedDBAvailable","indexedDB","validateIndexedDBOpenable","preExist","DB_CHECK_NAME","onsuccess","deleteDatabase","onupgradeneeded","FirebaseError","customData","super","setPrototypeOf","ErrorFactory","service","serviceName","errors","fullCode","template","PATTERN","replaceTemplate","fullMessage","deepEqual","aKeys","bKeys","k","aProp","bProp","querystring","querystringParams","arrayVal","querystringDecode","extractQuerystring","queryStart","fragmentStart","ObserverProxy","onNoObservers","observers","unsubscribes","observerCount","finalized","forEachObserver","observer","complete","nextOrObserver","methods","implementsAnyMethods","unsub","unsubscribeOne","finalError","sendOne","calculateBackoffMillis","backoffCount","backoffFactor","currBaseValue","pow","randomWait","getModularInstance","_delegate","instanceFactory","multipleInstances","serviceProps","instantiationMode","onInstanceCreated","setInstantiationMode","setMultipleInstances","setServiceProps","setInstanceCreatedCallback","DEFAULT_ENTRY_NAME","component","instances","instancesDeferred","instancesOptions","onInitCallbacks","identifier","normalizedIdentifier","normalizeInstanceIdentifier","deferred","isInitialized","shouldAutoInitialize","getOrInitializeService","instanceIdentifier","getImmediate","optional","getComponent","setComponent","isComponentEager","instanceDeferred","clearInstance","services","values","INTERNAL","_delete","isComponentSet","getOptions","initialize","onInit","existingCallbacks","existingInstance","invokeOnInitCallbacks","ComponentContainer","providers","addComponent","getProvider","addOrOverwriteComponent","getProviders","LogLevel","levelStringToEnum","DEBUG","VERBOSE","INFO","WARN","ERROR","SILENT","defaultLogLevel","ConsoleMethod","defaultLogHandler","logType","logLevel","Logger","_logLevel","_logHandler","_userLogHandler","setLogLevel","logHandler","userLogHandler","debug","_len3","_key3","_len4","_key4","_len5","_key5","_len6","_key6","idbProxyableTypes","cursorAdvanceMethods","cursorRequestMap","transactionDoneMap","transactionStoreNamesMap","transformCache","reverseTransformCache","idbProxyTraps","receiver","IDBTransaction","objectStoreNames","objectStore","wrap","wrapFunction","IDBDatabase","transaction","IDBCursor","advance","continue","continuePrimaryKey","unwrap","storeNames","tx","sort","transformCachableValue","unlisten","DOMException","cacheDonePromiseForTransaction","IDBObjectStore","IDBIndex","Proxy","instanceOfAny","IDBRequest","success","promisifyRequest","newValue","openDB","blocked","upgrade","blocking","terminated","openPromise","oldVersion","newVersion","db","readMethods","writeMethods","cachedMethods","getMethod","targetFuncName","useIndex","isWrite","storeName","store","oldTraps","PlatformLoggerServiceImpl","getPlatformInfoString","isVersionServiceProvider","library","logString","logger","PLATFORM_LOG_STRING","name$q","name$p","name$n","name$o","name$l","name$m","name$k","name$j","name$i","name$h","name$g","name$f","name$e","name$d","name$c","name$b","name$a","name$9","name$8","name$7","name$6","name$5","name$4","name$3","name$1","name$2","_apps","_serverApps","_components","_addComponent","app","_registerComponent","serverApp","_getProvider","heartbeatController","triggerHeartbeat","_isFirebaseServerApp","settings","ERROR_FACTORY","FirebaseAppImpl","_isDeleted","_options","_name","_automaticDataCollectionEnabled","automaticDataCollectionEnabled","_container","checkDestroyed","isDeleted","appName","SDK_VERSION","initializeApp","rawConfig","existingApp","newApp","getApp","registerVersion","libraryKeyOrName","variant","libraryMismatch","versionMismatch","warning","STORE_NAME","dbPromise","getDbPromise","createObjectStore","originalErrorMessage","writeHeartbeatsToIndexedDB","heartbeatObject","put","computeKey","idbGetError","appId","HeartbeatServiceImpl","_heartbeatsCache","_storage","HeartbeatStorageImpl","_heartbeatsCachePromise","agent","getUTCDateString","heartbeats","lastSentHeartbeatDate","singleDateHeartbeat","earliestHeartbeatIdx","earliestHeartbeatDate","getEarliestHeartbeatIdx","overwrite","getHeartbeatsHeader","heartbeatsToSend","unsentEntries","heartbeatsCache","maxSize","heartbeatEntry","find","hb","dates","countBytes","extractHeartbeatsForHeader","headerString","_canUseIndexedDBPromise","runIndexedDBEnvironmentCheck","idbHeartbeatObject","readHeartbeatsFromIndexedDB","heartbeatsObject","existingHeartbeatsObject","version$1","_prodErrorMap","prodErrorMap","_DEFAULT_AUTH_ERROR_FACTORY","logClient","_logError","msg","_fail","authOrCode","rest","createErrorInternal","_createError","_errorWithCustomMessage","errorMap","_serverAppCurrentUserOperationNotSupportedError","_assertInstanceOf","fullParams","_errorFactory","_assert","assertion","_key7","debugFail","failure","debugAssert","_getCurrentUrl","_isHttpOrHttps","_getCurrentScheme","Delay","shortDelay","longDelay","onLine","_emulatorUrl","FetchProvider","fetchImpl","headersImpl","responseImpl","Headers","SERVER_ERROR_MAP","CookieAuthProxiedEndpoints","DEFAULT_API_TIMEOUT_MS","_addTidIfNecessary","tenantId","_performApiRequest","_performFetchWithErrorHandling","query","apiKey","_getAdditionalHeaders","languageCode","fetchArgs","emulatorConfig","_getFinalTarget","apiHost","customErrorMap","fetchFn","_canInitEmulator","networkTimeout","NetworkTimeout","race","clearNetworkTimeout","json","_makeTaggedError","ok","errorMessage","serverErrorCode","serverErrorMessage","authError","_performSignInRequest","serverResponse","_serverResponse","base","authInternal","finalTarget","apiScheme","_persistenceManagerAvailable","_getPersistenceType","_getPersistence","_parseEnforcementState","enforcementStateStr","errorParams","phoneNumber","_tokenResponse","isEnterprise","grecaptcha","enterprise","RecaptchaConfig","siteKey","recaptchaEnforcementState","recaptchaKey","getProviderEnforcementState","providerStr","enforcementState","isProviderEnabled","isAnyProviderEnabled","getRecaptchaConfig","getAccountInfo","utcTimestampToDateString","utcTimestamp","getTime","toUTCString","secondsStringToMilliseconds","seconds","_parseToken","algorithm","signature","_tokenExpiresIn","parsedToken","exp","iat","_logoutIfInvalidated","isUserInvalidated","currentUser","signOut","ProactiveRefresh","isRunning","timerId","errorBackoff","_start","schedule","_stop","getInterval","wasError","interval","stsTokenManager","max","iteration","getIdToken","UserMetadata","createdAt","lastLoginAt","_initializeTime","lastSignInTime","creationTime","_copy","metadata","_reloadWithoutSaving","idToken","users","coreAccount","_notifyReloadListener","newProviderData","providerUserInfo","extractProviderData","providerData","original","newData","providerId","oldIsAnonymous","isAnonymous","newIsAnonymous","passwordHash","updates","uid","localId","photoURL","photoUrl","emailVerified","rawId","StsTokenManager","refreshToken","accessToken","isExpired","updateFromServerResponse","expiresIn","updateTokensAndExpiration","updateFromIdToken","getToken","refresh","clearRefreshToken","oldToken","tokenApiHost","access_token","expires_in","refresh_token","requestStsToken","expiresInSec","fromJSON","manager","_assign","_clone","_performRefresh","assertStringOrUndefined","UserImpl","_ref3","proactiveRefresh","reloadUserInfo","reloadListener","forceRefresh","_persistUserIfCurrent","_notifyListenersIfCurrent","getIdTokenResult","userInternal","claims","auth_time","firebase","signInProvider","authTime","issuedAtTime","signInSecondFactor","reload","userInfo","newUser","_onReload","_startProactiveRefresh","_stopProactiveRefresh","_updateTokensIfNecessary","tokensRefreshed","deleteAccount","_redirectEventId","_fromJSON","plainObjectTokenManager","_fromIdTokenResponse","idTokenResponse","_fromGetAccountInfoResponse","instanceCache","_getInstance","cls","InMemoryPersistence","storage","_isAvailable","_set","_get","_remove","_addListener","_listener","_removeListener","inMemoryPersistence","_persistenceKeyName","PersistenceUserManager","persistence","userKey","fullUserKey","fullPersistenceKey","boundEventHandler","_onStorageEvent","setCurrentUser","getCurrentUser","blob","removeCurrentUser","savePersistenceForRedirect","setPersistence","newPersistence","persistenceHierarchy","availablePersistences","selectedPersistence","userToMigrate","migrationHierarchy","_shouldAllowMigration","_getBrowserName","ua","_isIEMobile","_isFirefox","_isBlackBerry","_isWebOS","_isSafari","_isChromeIOS","_isAndroid","re","_isIOS","_isIE10","isIE","_isMobileBrowser","_getClientVersion","clientPlatform","reportedPlatform","frameworks","reportedFrameworks","AuthMiddlewareQueue","pushCallback","onAbort","wrappedCallback","runMiddleware","nextUser","onAbortStack","beforeStateCallback","reverse","originalMessage","PasswordPolicyImpl","responseOptions","customStrengthOptions","minPasswordLength","maxPasswordLength","containsLowercaseCharacter","containsLowercaseLetter","containsUppercaseCharacter","containsUppercaseLetter","containsNumericCharacter","containsNonAlphanumericCharacter","allowedNonAlphanumericCharacters","forceUpgradeOnSignin","schemaVersion","validatePassword","isValid","passwordPolicy","validatePasswordLengthOptions","validatePasswordCharacterOptions","meetsMinPasswordLength","meetsMaxPasswordLength","passwordChar","updatePasswordCharacterOptionsStatuses","AuthImpl","heartbeatServiceProvider","appCheckServiceProvider","operations","authStateSubscription","Subscription","idTokenSubscription","beforeStateQueue","redirectUser","isProactiveRefreshEnabled","EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION","_isInitialized","_deleted","_initializationPromise","_popupRedirectResolver","_agentRecaptchaConfig","_tenantRecaptchaConfigs","_projectPasswordPolicy","_tenantPasswordPolicies","_resolvePersistenceManagerAvailable","lastNotifiedUid","appVerificationDisabledForTesting","clientVersion","sdkClientVersion","_initializeWithPersistence","popupRedirectResolver","persistenceManager","_shouldInitProactively","_initialize","initializeCurrentUser","assertedPersistence","_currentUser","_updateCurrentUser","initializeCurrentUserFromIdToken","directlySetCurrentUser","authIdToken","previouslyStoredUser","futureCurrentUser","needsTocheckMiddleware","authDomain","getOrInitRedirectPersistenceManager","redirectUserEventId","storedUserEventId","tryRedirectSignIn","_overrideRedirectResult","reloadAndSetCurrentUserOrClear","redirectResolver","_completeRedirectFn","_setRedirectUser","useDeviceLanguage","navigatorLanguage","languages","language","_getUserLanguage","updateCurrentUser","userExtern","skipBeforeStateCallbacks","notifyAuthListeners","redirectPersistenceManager","_getRecaptchaConfig","_getPasswordPolicyInternal","_updatePasswordPolicy","_getPasswordPolicy","_updateErrorMap","onAuthStateChanged","completed","registerStateListener","beforeAuthStateChanged","onIdTokenChanged","authStateReady","revokeAccessToken","tokenType","revokeToken","redirectManager","resolver","_redirectPersistence","_redirectUserForId","currentUid","subscription","isUnsubscribed","addObserver","_logFramework","framework","_getFrameworks","heartbeatsHeader","appCheckToken","_getAppCheckToken","appCheckTokenResult","_logWarn","_castAuth","proxy","createSubscribe","externalJSProvider","loadJS","recaptchaV2Script","recaptchaEnterpriseScript","gapiScript","_loadJS","_generateCallbackName","MockGreCAPTCHATopLevel","MockGreCAPTCHA","ready","execute","_siteKey","_parameters","FAKE_TOKEN","RecaptchaEnterpriseVerifier","authExtern","verify","retrieveRecaptchaToken","clientType","retrieveSiteKey","injectRecaptchaFields","isCaptchaResp","isFakeToken","verifier","captchaResponse","newRequest","phoneEnrollmentInfo","recaptchaToken","phoneSignInInfo","handleRecaptchaFlow","authInstance","actionName","actionMethod","recaptchaAuthProvider","requestWithRecaptcha","requestWithRecaptchaFields","_initializeRecaptchaConfig","connectAuthEmulator","disableWarnings","extractProtocol","authority","substr","hostAndPort","bracketedIPv6","parsePort","extractHostAndPort","portStr","freeze","endpoint","pingServer","attachBanner","sty","backgroundColor","border","margin","zIndex","textAlign","classList","emitEmulatorWarning","protocolEnd","AuthCredential","signInMethod","_getIdTokenResponse","_auth","_linkToIdToken","_idToken","_getReauthenticationResolver","linkEmailPassword","signInWithPassword","EmailAuthCredential","_email","_password","_tenantId","_fromEmailAndPassword","_fromEmailAndCode","oobCode","returnSecureToken","signInWithEmailLink$1","signInWithEmailLinkForLinking","signInWithIdp","OAuthCredential","pendingToken","_fromParams","cred","oauthToken","oauthTokenSecret","buildRequest","autoCreate","requestUri","postBody","sendPhoneVerificationCode","VERIFY_PHONE_NUMBER_FOR_EXISTING_ERROR_MAP_","PhoneAuthCredential","_fromVerification","verificationId","verificationCode","_fromTokenResponse","temporaryProof","signInWithPhoneNumber$1","_makeVerificationRequest","linkWithPhoneNumber$1","operation","verifyPhoneNumberForExisting","sessionInfo","ActionCodeURL","actionLink","searchParams","parseMode","continueUrl","parseLink","doubleDeepLink","iOSDeepLink","parseDeepLink","EmailAuthProvider","PROVIDER_ID","credential","credentialWithLink","emailLink","actionCodeUrl","EMAIL_PASSWORD_SIGN_IN_METHOD","EMAIL_LINK_SIGN_IN_METHOD","FederatedAuthProvider","defaultLanguageCode","customParameters","setDefaultLanguage","setCustomParameters","customOAuthParameters","getCustomParameters","BaseOAuthProvider","scopes","addScope","getScopes","FacebookAuthProvider","FACEBOOK_SIGN_IN_METHOD","credentialFromResult","userCredential","credentialFromTaggedObject","credentialFromError","_ref5","tokenResponse","oauthAccessToken","GoogleAuthProvider","GOOGLE_SIGN_IN_METHOD","_ref6","oauthIdToken","GithubAuthProvider","GITHUB_SIGN_IN_METHOD","_ref7","TwitterAuthProvider","TWITTER_SIGN_IN_METHOD","_ref9","UserCredentialImpl","operationType","providerIdForResponse","_forOperation","MultiFactorError","_fromErrorAndOperation","_processCredentialSavingMfaContextIfNecessary","_link$1","bypassAuthState","_reauthenticate","sub","_signInWithCredential","startEnrollPhoneMfa","STORAGE_AVAILABLE_KEY","BrowserPersistenceClass","storageRetriever","setItem","removeItem","getItem","BrowserLocalPersistence","localStorage","poll","onStorageEvent","localCache","pollTimer","fallbackToPolling","forAllChangedKeys","oldValue","_oldValue","notifyListeners","detachListener","stopPolling","triggerListeners","storedValue","startPolling","setInterval","StorageEvent","clearInterval","attachListener","browserLocalPersistence","getDocumentCookie","escapedName","getCookieName","CookiePersistence","listenerUnsubscribes","originalUrl","isSecureContext","cookieEnabled","cookieStore","changedCookie","changed","change","BrowserSessionPersistence","sessionStorage","browserSessionPersistence","Receiver","eventTarget","handlersMap","handleEvent","receivers","isListeningto","newInstance","messageEvent","eventId","ports","_allSettled","_subscribe","_unsubscribe","_generateEventId","digits","Sender","removeMessageHandler","messageChannel","onMessage","_send","completionTimer","ackTimer","finally","_window","_isWorker","DB_NAME","DB_OBJECTSTORE_NAME","DB_DATA_KEYPATH","DBPromise","toPromise","getObjectStore","isReadWrite","_openDatabase","keyPath","_deleteDatabase","_putObject","_deleteObject","IndexedDBLocalPersistence","pendingWrites","sender","serviceWorkerReceiverAvailable","activeServiceWorker","_workerInitializationPromise","initializeServiceWorkerMessaging","_openDb","_withRetries","op","numAttempts","initializeReceiver","initializeSender","_origin","keyProcessed","_poll","_data","serviceWorker","active","_getActiveServiceWorker","results","notifyServiceWorker","_withPendingWrite","getObject","getAllRequest","getAll","keysInResult","fbase_key","localKey","indexedDBLocalPersistence","startSignInPhoneMfa","RECAPTCHA_VERIFIER_TYPE","_verifyPhoneNumber","phoneInfoOptions","session","startPhoneMfaEnrollmentRequest","startPhoneMfaEnrollmentResponse","injectRecaptchaV2Token","phoneSessionInfo","mfaEnrollmentId","multiFactorHint","multiFactorUid","startPhoneMfaSignInRequest","mfaPendingCredential","startPhoneMfaSignInResponse","phoneResponseInfo","sendPhoneVerificationCodeRequest","sendPhoneVerificationCodeResponse","_reset","recaptchaV2Verifier","recaptchaV2Token","recaptchaVersion","PhoneAuthProvider","verifyPhoneNumber","phoneOptions","applicationVerifier","_ref14","_withDefaultResolver","resolverOverride","PHONE_SIGN_IN_METHOD","IdpCredential","_buildIdpRequest","sessionId","returnIdpCredential","_signIn","_reauth","_link","AbstractPopupRedirectOperation","pendingPromise","eventManager","onExecution","registerConsumer","onAuthEvent","urlResponse","getIdpTask","unregisterAndCleanUp","unregisterConsumer","cleanUp","_POLL_WINDOW_CLOSE_TIMEOUT","PopupOperation","authWindow","pollId","currentPopupAction","executeNotNull","_openPopup","associatedEvent","_originValidation","_isIframeWebStorageSupported","isSupported","pollUserCancellation","closed","redirectOutcomeMap","RedirectAction","readyOutcome","hasPendingRedirect","pendingRedirectKey","resolverPersistence","_getAndClearPendingRedirectStatus","_getRedirectResult","resolverExtern","AuthEventManager","cachedEventUids","consumers","queuedRedirectEvent","hasHandledPotentialRedirect","lastProcessedEventTime","authEventConsumer","isEventForConsumer","sendToConsumer","saveEventToCache","onEvent","hasEventBeenHandled","handled","isNullRedirectEvent","isRedirectEvent","eventIdMatches","eventUid","v","_ref15","IP_ADDRESS_REGEX","HTTP_REGEX","_validateOrigin","authorizedDomains","_getProjectConfig","matchDomain","expected","currentUrl","ceUrl","escapedDomainPattern","NETWORK_TIMEOUT","resetUnloadedGapiModules","beacon","___jsl","hint","CP","loadGapi","loadGapiIframe","gapi","load","iframes","Iframe","cbName","cachedGApiLoader","PING_TIMEOUT","IFRAME_ATTRIBUTES","tabindex","EID_FROM_APIHOST","getIframeUrl","eid","fw","_openIframe","_loadGapi","where","messageHandlersFilter","CROSS_ORIGIN_IFRAMES_FILTER","dontclear","iframe","restyle","setHideOnLeave","networkError","networkErrorTimer","clearTimerAndResolve","ping","BASE_POPUP_OPTIONS","resizable","statusbar","toolbar","AuthPopup","_open","screen","availHeight","availWidth","scrollbars","optionsString","reduce","accum","_ref16","standalone","_isIOSStandalone","click","createEvent","initMouseEvent","openAsNewWindowIOS","newWin","WIDGET_PATH","EMULATOR_WIDGET_PATH","FIREBASE_APP_CHECK_FRAGMENT_ID","_getRedirectUrl","authType","redirectUrl","additionalParams","isEmpty","tid","paramsDict","appCheckTokenFragment","_ref17","getHandlerBase","WEB_STORAGE_SUPPORT_KEY","browserPopupRedirectResolver","eventManagers","originValidationPromises","_openRedirect","_setWindowLocation","initAndGetManager","register","iframeEvent","authEvent","AuthInterop","internalListeners","getUid","assertAuthConfigured","addAuthTokenListener","updateProactiveRefresh","removeAuthTokenListener","authIdTokenMaxAge","lastPostedIdToken","getAuth","initializeAuth","authTokenSyncPath","authTokenSyncUrl","mintCookie","idTokenResult","idTokenAge","authEmulatorHost","charset","_ref18","hierarchy","_initializeAuthInstance","_instanceIdentifier","getVersionForPlatform","API_PREFIX","API_CONFIG","BASE_URL","constructBaseURL","apiUrl","TIMEOUT","HEADERS","UI_CONFIG","apiService","api","setupInterceptors","Authorization","_error$response","post","patch","getBlob","userService","userData","getLocationsForRegistration","userId","deleteMany","ids","getById","itemService","getAvailableItems","items","itemData","itemId","markReceived","markReturned","receiptService","receiptId","receiptData","signReceipt","signatureData","getPendingReceipts","receipt","isSigned","getMyPendingReceipts","signPendingReceipt","downloadReceiptPDF","returnItems","returnData","returnSelectedItems","reportService","getStatistics","getCurrentReportingStatus","updateReportItems","completeReportCycle","getCompletionHistory","page","limit","downloadReportPDF","reportId","getDashboardByUnit","unitId","getUserDashboard","managementService","getAllUnits","_error$response$data","createUnit","_error$response2","_error$response3","_error$response3$data","isConflict","updateUnit","_error$response4","_error$response5","_error$response5$data","deleteUnits","_error$response6","_error$response6$data","getAllLocations","_error$response7","_error$response7$data","createLocation","_error$response8","_error$response9","_error$response9$data","updateLocation","_error$response10","_error$response11","_error$response11$dat","deleteLocations","_error$response12","_error$response12$dat","getAllItemNames","_error$response13","_error$response13$dat","createItemName","_error$response14","_error$response15","_error$response15$dat","updateItemName","_error$response16","_error$response17","_error$response17$dat","deleteItemNames","_error$response18","_error$response18$dat","getSettings","_error$response19","_error$response19$dat","updateSettings","_error$response20","_error$response20$dat","getNotificationSettings","_error$response21","_error$response21$dat","updateNotificationSettings","_error$response22","_error$response22$dat","getAllAllocations","_error$response23","_error$response23$dat","createAllocation","_error$response24","_error$response25","_error$response25$dat","updateAllocation","_error$response26","_error$response27","_error$response27$dat","deleteAllocations","_error$response28","_error$response28$dat","exportDatabase","_error$response29","_error$response29$dat","startExport","_data2","_data3","operationId","processId","_error$response30","_error$response30$dat","getExportStatus","_raw$result","_raw$result2","_raw$tables","_raw$totalStatistics","_raw$result3","raw","nested","currentProgress","overallProgress","downloadUrl","tables","totalStatistics","_error$response31","_error$response31$dat","importDatabase","override","requestBody","isOverride","_error$response32","_error$response32$dat","startImport","allocation","itemName","fakeId","__tempImportResult","extractIdFromNestedResponse","idField","nestedId","_error$response33","_error$response33$dat","getImportStatus","_raw$result4","_raw$tables2","_raw$totalStatistics2","_raw$result5","tempResult","_error$response34","_error$response34$dat","formatDate","Intl","DateTimeFormat","year","day","timeZone","formatDateTimeHebrew","toLocaleDateString","toLocaleTimeString","hour","minute","second","getReceiptUnit","_receipt$signedBy","_receipt$signedBy$loc","_receipt$signedBy$loc2","_receipt$createdBy","_receipt$createdBy$lo","_receipt$createdBy$lo2","signedBy","unit","createdBy","getReceiptLocation","_receipt$signedBy2","_receipt$signedBy2$lo","_receipt$createdBy2","_receipt$createdBy2$l","receiptItemsMatchSearch","searchTerm","_receipt$receiptItems","receiptItems","receiptItem","_receiptItem$item","_receiptItem$item$ite","_receiptItem$item$ite2","_receiptItem$item2","_receiptItem$item2$id","item","idNumber","compareReceiptValues","aVal","bVal","direction","cmp","localeCompare","validatePhoneNumber","phone","validatePersonalNumber","personalNumber","numberStr","validateRequired","sanitizeInput","paginate","currentPage","pageSize","paginatedItems","totalPages","startIndex","ceil","extractApiError","_axiosError$response2","_axiosError$response","getConflictMessage","getValidationMessage","getForbiddenMessage","isValidation","_error$config","_error$config2","_error$config2$method","serverMessage","getConflictResolutionMessage","extractBulkDeleteResponse","deletedCount","isSuccess","hasConflicts","bulkResult","useUsers","setUsers","setLoading","setError","fetchUsers","refetch","createUser","apiError","updateUser","deleteManyUsers","userIds","bulkError","useItems","setItems","availableItems","setAvailableItems","fetchItems","refetchAvailableItems","createItem","updateItem","deleteItem","deleteManyItems","itemIds","markItemReceived","markItemReturned","useDailyReports","currentStatus","toggleReportStatus","setReportStatusBulk","updateItemNotes","useReports","setCurrentStatus","fetchCurrentStatus","isReported","reportedItems","updatedItems","notes","dailyReportData","createDailyReport","updateDailyReport","_data$reportItems","reportItems","completeDailyReport","useDailyReportHistory","history","fetchHistory","useReportHistory","setHistory","completions","pagination","pages","reports","completion","createdById","completedById","completedAt","isActive","isCompleted","totalItems","updatedAt","completedBy","getDailyReportById","useDashboardStats","stats","setStats","fetchStats","useReceipts","receipts","setReceipts","pendingReceipts","setPendingReceipts","fetchReceipts","signedReceipts","unsignedReceipts","createReceipt","file","newReceipt","updateReceipt","deleteReceipt","returnReceipt","fetchPendingReceipts","fetchMyPendingReceipts","signedReceipt","PENDING_TIMEOUT_MS","PACKAGE_VERSION","INTERNAL_AUTH_VERSION","TOKEN_EXPIRATION_BUFFER","isServerError","getInstallationsEndpoint","projectId","extractAuthTokenInfoFromResponse","requestStatus","responseExpiresIn","getErrorFromResponse","requestName","errorData","serverCode","serverStatus","getHeaders","Accept","getHeadersWithAuth","appConfig","getAuthorizationHeader","retryIfServerError","sleep","VALID_FID_PATTERN","generateFid","fidByteArray","crypto","msCrypto","getRandomValues","fid","b64String","getKey","fidChangeCallbacks","fidChanged","callFidChangeCallbacks","getBroadcastChannel","closeBroadcastChannel","broadcastFidChange","broadcastChannel","BroadcastChannel","OBJECT_STORE_NAME","updateFn","getInstallationEntry","installations","registrationPromise","installationEntry","oldEntry","registrationStatus","clearTimedOutRequest","updateOrCreateInstallationEntry","entryWithPromise","inProgressEntry","registrationTime","registeredInstallationEntry","_ref4","heartbeatService","authVersion","sdkVersion","responseValue","authToken","createInstallationRequest","registerInstallation","waitUntilFidRegistration","triggerRegistrationIfNecessary","updateInstallationRequest","generateAuthTokenRequest","getGenerateAuthTokenEndpoint","installation","refreshAuthToken","tokenPromise","isEntryRegistered","oldAuthToken","isAuthTokenExpired","isAuthTokenValid","updateAuthTokenRequest","waitUntilAuthTokenRequest","inProgressAuthToken","requestTime","makeAuthTokenRequestInProgressEntry","updatedInstallationEntry","fetchAuthTokenFromServer","installationsImpl","completeInstallationRegistration","getMissingValueError","valueName","INSTALLATIONS_NAME","publicFactory","configKeys","keyName","extractAppConfig","internalFactory","getId","ANALYTICS_TYPE","GTAG_URL","createGtagTrustedTypesScriptURL","gtagURL","promiseAllSettled","insertScriptTag","dataLayerName","measurementId","trustedTypesPolicy","policyName","policyOptions","trustedTypes","createPolicy","createTrustedTypesPolicy","createScriptURL","script","gtagScriptURL","wrapGtag","gtagCore","initializationPromisesMap","dynamicConfigPromisesList","measurementIdToAppId","command","gtagParams","initializationPromisesToWaitFor","gaSendToList","dynamicConfigResults","sendToId","foundConfig","initializationPromise","gtagOnEvent","correspondingAppId","gtagOnConfig","consentAction","fieldName","customParams","defaultRetryData","throttleMetadata","intervalMillis","getThrottleMetadata","setThrottleMetadata","deleteThrottleMetadata","fetchDynamicConfigWithRetry","retryData","timeoutMillis","throttleEndTimeMillis","AnalyticsAbortSignal","attemptFetchDynamicConfigWithRetry","appFields","backoffMillis","setAbortableTimeout","appUrl","jsonResponse","_ignored","httpStatus","responseMessage","fetchDynamicConfig","isRetriableError","defaultEventParametersForInit","defaultConsentSettingsForInit","_setConsentDefaultForInit","consentSettings","_setDefaultEventParametersForInit","_initializeAnalytics","dynamicConfigPromise","fidPromise","validateIndexedDB","envIsValid","dynamicConfig","scriptTags","findGtagScriptOnPage","configProperties","AnalyticsService","gtagCoreFunction","wrappedGtagFunction","gtagName","globalInitDone","warnOnBrowserContextMismatch","mismatchedEnvMessages","details","factory","dataLayer","getOrCreateDataLayer","wrappedGtag","gtagFunctionName","_args","wrapOrCreateGtag","analyticsOptions","analytics","logEvent","eventParams","analyticsInstance","gtagFunction","logEvent$1","storageBucket","messagingSenderId","analyticsProvider","initializeAnalytics","getAnalytics","googleProvider","useAuth","setUser","isLoading","setIsLoading","logout","clearError","isAuthenticated","useUserProfile","firebaseUser","setUserProfile","needsProfile","setNeedsProfile","fetchUserProfile","needsRegistration","_serverUser$location","_serverUser$location2","_serverUser$location3","serverUser","transformedUser","rank","emailSubscribed","firebaseUid","createUserProfile","profileData","locationId","_serverUser$location4","_serverUser$location5","_serverUser$location6","updateUserProfile","_serverUser$location7","_serverUser$location8","_serverUser$location9","_error$response2$data","ThemeContext","ThemeProvider","theme","setThemeState","getSavedTheme","savedTheme","toggleTheme","prevTheme","setTheme","newTheme","useModernTableSelection","onSelectionChange","multiSelect","maxSelection","selectedIds","setSelectedIds","lastClickedIndex","setLastClickedIndex","validIds","isSelected","toggleSelection","itemIndex","isCurrentlySelected","selectedId","rangeIds","newSelection","selectAll","allIds","clearSelection","selectRange","isAllSelected","isPartiallySelected","hasSelection","selectedCount","totalCount","ManagementContext","ManagementProvider","units","setUnits","locations","setLocations","itemNames","setItemNames","loadUnits","loadLocations","loadItemNames","loadAllData","unitsRes","locationsRes","itemNamesRes","useManagement","PendingReceiptsContext","PendingReceiptsProvider","refreshCallback","setRefreshCallback","decrementCallback","setDecrementCallback","refreshPendingCount","decrementPendingCount","registerRefreshCallback","registerDecrementCallback","usePendingReceiptsContext","ServerError","marginBottom","isOpen","onClose","showCloseButton","closeOnOverlayClick","closeOnEscape","modalRef","previousActiveElement","handleOverlayClick","handleContentClick","handleCloseClick","_modalRef$current","touchAction","scrollY","pointerEvents","userSelect","overflowY","scrollTo","parseInt","handleEscape","effectiveSize","onTouchStart","role","justifyContent","tabIndex","maxWidth","maxHeight","flexDirection","boxShadow","resolutionMessage","displayMessage","translateErrorMessage","found","he","dir","whiteSpace","fontWeight","entityName","failedCount","Modal","errorItem","marginTop","gap","confirmText","displayTitle","getDefaultTitle","getAlertClass","getIcon","SmartPagination","onPageChange","checkIsMobile","handlePageChange","behavior","pageNumbers","generatePageNumbers","showFirstPage","showLastPage","showFirstEllipsis","showLastEllipsis","customStyles","minWidth","minHeight","outline","boxSizing","flexShrink","flexGrow","onMouseEnter","borderColor","onMouseLeave","tabs","fullWidth","containerStyle","spinner","sm","md","lg","borderTop","ThemeToggle","showLabel","useTheme","getAriaLabel","renderIcon","iconType","fillRule","clipRule","SelectionToolbar","onDelete","onClear","onSelectAll","isVisible","deleteLabel","isDeleting","onChange","placeholder","resultsCount","resultsLabel","showClearButton","hasResults","showClear","handleClear","_uniqueItemNames$find","_uniqueAllocatedLocat","_statusOptions$find","filters","onFiltersChange","onToggle","uniqueItemNames","_item$itemName","nameId","uniqueAllocatedLocations","_item$allocatedLocati","allocatedLocation","allocatedLocationId","_unit","uniqueReceiptLocations","_item$receiptInfo","_item$receiptInfo$sig","_item$receiptInfo$sig2","receiptInfo","statusOptions","handleFilterChange","newFilters","hasActiveFilters","activeFiltersCount","clearAllFilters","itemNameId","receiptLocationName","hasIdNumber","noteText","loc","isUrgent","urgentClass","ErrorBoundary","hasError","_this$state$error","_this$state$error2","ResponsiveTable","mobileBreakpoint","enableCardLayout","useCardLayout","setUseCardLayout","checkScreenSize","table","th","_th$textContent","cell","containerClasses","overflowX","onSettingsClick","onPendingReceiptsClick","isUserMenuOpen","setIsUserMenuOpen","imageError","setImageError","menuRef","userSpecificCount","pendingCount","usePendingReceiptsCount","refreshCount","userPendingReceipts","signedByLocation","createdByLocation","userLocation","userSpecificReceipts","userLocationReceipts","signedById","handleVisibilityChange","hidden","decrementCount","userSignableReceipts","filteredPendingReceipts","specificUserReceipts","handleClickOutside","PendingReceiptsBadge","toggleUserMenu","alt","handleImageError","handleImageLoad","DashboardLoadingSpinner","LoadingSpinner","DashboardError","onRetry","DashboardSearch","SearchInput","DashboardPagination","DashboardEmptyState","UserDashboard","setCurrentPage","setSearchTerm","sortConfig","setSortConfig","useUserDashboard","setData","fetchUserDashboard","_err$response","_err$response2","handleSort","filteredAndSortedItems","normalizedSearchTerm","filtered","itemIdNumber","_a$signedBy","_b$signedBy","aValue","bValue","flexWrap","term","_item$signedBy","_item$signedBy2","_item$signedBy3","borderLeft","opacity","AdminDashboard","setActiveTab","selectedUnit","setSelectedUnit","selectedLocation","setSelectedLocation","tooltipData","setTooltipData","show","dashboardData","setDashboardData","dashboardLoading","setDashboardLoading","dashboardError","setDashboardError","allUnits","setAllUnits","unitsLoading","setUnitsLoading","locationsSortConfig","setLocationsSortConfig","locationsSearchTerm","setLocationsSearchTerm","unitsSearchTerm","setUnitsSearchTerm","unitSet","extractLocationsFromDashboardData","locationSet","locationName","handleCellClick","unitName","rect","getBoundingClientRect","getCellData","signedQuantity","waitingQuantity","totalQuantity","unitData","allUsers","totalSignedQuantity","totalWaitingQuantity","locationData","signUsers","quantity","getItemSignedTotal","getItemWaitingTotal","getItemNonOperationalTotal","nonOperationalQuantity","getItemAvailableTotal","nonOperational","signed","getItemTotal","filteredItems","aSignedQuantity","aWaitingQuantity","bSignedQuantity","bWaitingQuantity","handleLocationsSort","getFilteredAndSortedLocationsData","tableData","getUnifiedLocationsTableData","filteredLocations","aLocationData","bLocationData","actualAllocation","handleUnifiedLocationsCellClick","cellData","_receipt$idNumber","signBy","scrollX","loadDashboardData","TabNavigation","tabId","htmlFor","hasUsers","hasSignedUsers","hasWaitingUsers","allSignedUsers","signedUsers","allWaitingUsers","waitingUsers","nonOpCount","hasUserData","hasAnyData","handleCloseTooltip","userIndex","allocatedLocationName","note","flat","sum","_user$items","Dashboard","_history$reports","_history$pagination","_history$pagination2","downloadingId","setDownloadingId","notification","setNotification","formatDateWithTime","dateString","sortedHistory","report","reportItem","createObjectURL","dateStr","download","revokeObjectURL","_error$message","_error$message2","handleDownloadPDF","NotificationModal","activeReportTab","setActiveReportTab","completing","setCompleting","headerCheckboxRef","errorModal","setErrorModal","availableReportTabs","handleTabChange","sortedReportItems","searchLower","_item$idNumber","_item$signedBy$name","_item$signedBy2$locat","_item$signedBy2$locat2","_item$reportedBy","_item$reportedBy$name","_item$reportNotes","reportedBy","reportNotes","_a$reportedBy","_b$reportedBy","_a$signedBy2","_a$signedBy2$location","_b$signedBy2","_b$signedBy2$location","reportedAt","checkedCount","indeterminate","reportingStats","getReportingStats","allItems","percentage","reported","reportedCount","allItemsReported","every","usersData","getUsersStatusData","userStats","stat","filteredUsersData","sortedUsersData","paginatedUsers","usersTotalPages","toFixed","accentColor","_item$signedBy4","_item$signedBy4$locat","handleCheckboxChange","transform","onFocus","onBlur","DailyReportHistory","ErrorNotificationModal","SelectedItemsTable","onRemove","onAddItem","mergedItems","mergedMap","_item$allocatedLocati2","requiresReporting","existingItem","originalItems","mergeIdenticalItems","field","sortedItems","_a$allocatedLocation","_b$allocatedLocation","comparison","borderBottom","borderCollapse","_item$allocatedLocati3","_item$allocatedLocati4","mergedItem","availableItem","_availableItem$alloca3","_mergedItem$allocated3","_availableItem$alloca4","_mergedItem$allocated4","_availableItem$itemNa2","mergedLocationId","mergedLocationName","mergedIdNumber","attributesMatch","notInReceipt","_availableItem$alloca","_mergedItem$allocated","_availableItem$alloca2","_mergedItem$allocated2","_availableItem$itemNa","handleIncreaseQuantity","originalItem","handleRemoveMergedItem","_originalReceipt$rece","_selectedItem$itemNam9","onSuccess","onCancel","originalReceipt","serverAvailableItems","itemsLoading","itemsError","useAvailableItems","fetchAvailableItems","selectedUserId","setSelectedUserId","setNote","hasChanges","setHasChanges","setReceiptItems","_item$item","_item$item$itemName","_item$item2","_item$item3","selectedItemId","setSelectedItemId","selectedQuantity","setSelectedQuantity","itemSearchQuery","setItemSearchQuery","isUpdateMode","itemsInOtherReceipts","usedItemIds","filteredServerItems","_originalReceipt$rece2","_receiptItem$item3","getUsedQuantity","locationKey","_receiptItem$allocate","filteredAvailableItems","unselectedItems","_item$itemName$name","_item$allocatedLocati5","_item$allocatedLocati6","selectedUser","userLocationName","_a$allocatedLocation2","_b$allocatedLocation2","_a$itemName","_b$itemName","aMatchesUserLocation","bMatchesUserLocation","aHasLocation","bHasLocation","aName","bName","selectedItem","maxAvailableQuantity","_originalReceipt$rece3","userChanged","noteChanged","currentItems","itemsChanged","addItemDirectly","itemToAdd","_itemToAdd$itemName3","_itemToAdd$itemName","_itemToAdd$itemName2","newReceiptItem","backdropFilter","onSubmit","serverItems","_originalReceipt$rece4","updateData","currentNote","required","appearance","backgroundImage","backgroundPosition","backgroundRepeat","backgroundSize","maxLength","rows","resize","fontFamily","lineHeight","flex","_item$itemName2","_item$allocatedLocati7","quantityToAdd","marginRight","addItem","_selectedItem$itemNam","sameNameItems","_availableItem$itemNa3","_selectedItem$itemNam2","newReceiptItems","_itemToAdd$itemName5","_itemToAdd$itemName4","existingItemIndex","findIndex","_selectedItem$itemNam3","_receiptItem$allocate2","_selectedItem$allocat","_selectedItem$allocat2","_selectedItem$itemNam5","_selectedItem$allocat3","availableItemsOfSameName","_availableItem$itemNa4","_selectedItem$itemNam4","_availableItem$alloca5","currentUsed","_selectedItem$allocat4","_selectedItem$itemNam8","_availableItem$itemNa5","_selectedItem$itemNam6","_availableItem$alloca6","_selectedItem$itemNam7","serverItem","paddingTop","_extends","_typeof","toPropertyKey","toPrimitive","_defineProperties","_setPrototypeOf","_getPrototypeOf","_isNativeReflectConstruct","valueOf","_possibleConstructorReturn","ReferenceError","Point","Bezier","startPoint","control1","control2","endPoint","SignaturePad","canvas","velocityFilterWeight","minDistance","_strokeMoveUpdate","wait","previous","later","leading","remaining","trailing","_strokeUpdate","dotSize","penColor","onBegin","onEnd","_canvas","_ctx","_handleMouseDown","_mouseButtonDown","_strokeBegin","_handleMouseMove","_handleMouseUp","_strokeEnd","_handleTouchStart","touch","_handleTouchMove","_handleTouchEnd","on","velocityFrom","distanceTo","sqrt","equals","other","px","py","cx","_point","cy","xdiff","ydiff","ctx","fillStyle","fillRect","_isEmpty","fromDataURL","dataUrl","_this","image","Image","ratio","devicePixelRatio","drawImage","toDataURL","_toSVG","_handleMouseEvents","_handleTouchEvents","off","point","_createPoint","lastPointGroup","lastPoint","isLastPointTooClose","_addPoint","curve","widths","_drawCurve","canDrawCurve","points","_drawDot","msTouchAction","_lastVelocity","_lastWidth","_calculateCurveControlPoints","_calculateCurveWidths","s1","s2","s3","dx1","dy1","dx2","dy2","m1","m2","l1","l2","cm","ty","velocity","newWidth","_strokeWidth","_drawPoint","moveTo","arc","PI","startWidth","endWidth","widthDelta","drawSteps","beginPath","tt","ttt","uu","uuu","closePath","_fromData","pointGroups","drawCurve","drawDot","group","j","rawPoint","_addPoint2","_this2","maxX","maxY","svg","attr","circle","childNodes","cloneNode","fromData","_this3","toData","SignatureCanvas","_Component","_inherits","_super","_createSuper","_classCallCheck","staticThis","_sigPad","setRef","_excludeOurProps","_this$props","canvasProps","clearOnResize","getOwnPropertySymbols","propertyIsEnumerable","_objectWithoutProperties","_excluded","getCanvas","_resizeCanvas","refNullError","getTrimmedCanvas","copy","trimCanvas","getSignaturePad","_checkClearOnResize","_this$props$canvasPro","_window$devicePixelRa","offsetWidth","offsetHeight","scale","dataURL","encoderOptions","propTypes","onSave","sigRef","containerRef","canvasSize","setCanvasSize","updateCanvasSize","availableWidth","isSigRefValid","handleEnd","formatDistanceLocale","lessThanXSeconds","one","xSeconds","halfAMinute","lessThanXMinutes","xMinutes","aboutXHours","xHours","xDays","aboutXWeeks","xWeeks","aboutXMonths","xMonths","aboutXYears","xYears","overXYears","almostXYears","buildFormatLongFn","defaultWidth","formats","formatLong","full","long","medium","short","dateTime","formatRelativeLocale","lastWeek","yesterday","today","tomorrow","nextWeek","buildLocalizeFn","valuesArray","formattingValues","defaultFormattingWidth","argumentCallback","buildMatchFn","matchPattern","matchPatterns","defaultMatchWidth","matchResult","matchedString","parsePatterns","defaultParseWidth","predicate","pattern","valueCallback","enUS","formatDistance","tokenValue","addSuffix","formatRelative","_date","_baseDate","localize","ordinalNumber","dirtyNumber","rem100","era","narrow","abbreviated","wide","quarter","dayPeriod","am","pm","midnight","noon","morning","afternoon","evening","night","parsePattern","parseResult","weekStartsOn","firstWeekContainsDate","defaultOptions","getDefaultOptions","millisecondsInWeek","constructFromSymbol","constructFrom","toDate","argument","getTimezoneOffsetInMilliseconds","utcDate","UTC","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","getMilliseconds","setUTCFullYear","startOfDay","in","setHours","differenceInCalendarDays","laterDate","earlierDate","laterDate_","earlierDate_","normalizeDates","laterStartOfDay","earlierStartOfDay","laterTimestamp","earlierTimestamp","startOfYear","date_","setFullYear","getDayOfYear","startOfWeek","getDay","setDate","startOfISOWeek","getISOWeekYear","fourthOfJanuaryOfNextYear","startOfNextYear","fourthOfJanuaryOfThisYear","startOfThisYear","startOfISOWeekYear","fourthOfJanuary","getISOWeek","getWeekYear","firstWeekOfNextYear","firstWeekOfThisYear","startOfWeekYear","firstWeek","getWeek","addLeadingZeros","targetLength","abs","padStart","lightFormatters","signedYear","dayPeriodEnumValue","numberOfDigits","milliseconds","trunc","dayPeriodEnum","formatters","G","Y","signedWeekYear","weekYear","R","Q","q","I","isoWeek","dayOfYear","E","dayOfWeek","localDayOfWeek","isoDayOfWeek","hours","B","K","_localize","timezoneOffset","getTimezoneOffset","formatTimezoneWithOptionalMinutes","formatTimezone","O","formatTimezoneShort","z","sign","absOffset","minutes","dateLongFormatter","timeLongFormatter","longFormatters","P","dateTimeLongFormatter","datePattern","timePattern","dateTimeFormat","dayOfYearTokenRE","weekYearTokenRE","throwTokens","formattingTokensRegExp","longFormattingTokensRegExp","escapedStringRegExp","doubleQuoteRegExp","unescapedLatinCharacterRegExp","formatStr","defaultLocale","originalDate","RangeError","parts","firstCharacter","longFormatter","isToken","cleanEscapedString","preprocessor","formatterOptions","part","useAdditionalWeekYearTokens","isProtectedWeekYearToken","useAdditionalDayOfYearTokens","isProtectedDayOfYearToken","_message","subject","warnOrThrowProtectedError","formatter","matched","_receipt$createdBy3","_receipt$signedBy3","onUpdate","onDownload","downloadingReceiptId","onSign","currentUserId","isPendingReceipt","modalItems","_receiptItem$item4","mergeModalReceiptItems","unicodeBidi","textRendering","gridTemplateColumns","getUnit","objectFit","canUserSignReceipt","onConfirm","confirmationText","setConfirmationText","handleClose","_selectedReceipt$rece","_selectedReceipt$crea","_selectedReceipt$sign","onRefresh","selectedReceipt","setSelectedReceipt","isSignModalOpen","setIsSignModalOpen","isUpdateModalOpen","setIsUpdateModalOpen","isDeleteModalOpen","setIsDeleteModalOpen","setSignature","isSubmitting","setIsSubmitting","setIsDeleting","detailsReceipt","setDetailsReceipt","showNotification","filteredAndSorted","_r$createdBy","_r$createdBy$name","_r$signedBy","_r$signedBy$name","_r$receiptItems","_r$note","issuer","itemsMatch","_a$createdBy","_b$createdBy","_a$receiptItems","_b$receiptItems","paginatedReceipts","handleCloseModal","canSign","handleRowClick","textOverflow","ReceiptDetailsModal","textShadow","grouped","_group$items$","_group$items$$item","fontStyle","ReceiptForm","handleUpdateSuccess","DeleteReceiptModal","closeNotification","ReceiptsTab","isModalOpen","setIsModalOpen","setDownloadingReceiptId","modalType","setModalType","receiptTabs","switchToPendingTab","userReceipts","filteredAndSortedReceipts","handlePendingReceiptsRefresh","handleCreateNewClick","renderTabContent","_receipt$createdBy4","_receipt$signedBy4","PendingReceiptsList","_receipt$createdBy3$n","_receipt$signedBy3$na","handleCreateSuccess","ranks","managementLoading","setFormData","isAdminInUnit","setErrors","showConflictModal","setShowConflictModal","showLastAdminModal","setShowLastAdminModal","availableLocations","matchingLocation","handleInputChange","validateForm","newErrors","_result$error","_result$error2","createData","onInput","readOnly","ConflictErrorModal","setSelectedUser","conflictError","setConflictError","userName","bulkDeleteError","setBulkDeleteError","filteredAndSortedUsers","selectedUserIds","userNames","confirm","closest","handleSelectUser","UserForm","BulkDeleteErrorModal","isOperational","setQuantity","_item$isOperational","_item$requiresReporti","setSelectedItem","advancedFilters","setAdvancedFilters","isAdvancedFilterOpen","setIsAdvancedFilterOpen","_item$isAvailable","isAvailable","locationText","receiptLocationText","_item$isAvailable2","_a$isAvailable","_b$isAvailable","_a$isAvailable2","_b$isAvailable2","handleAddClick","AdvancedFilter","handleAdvancedFilterToggle","_item$itemName3","_item$isAvailable3","_item$isAvailable4","handleItemClick","ItemForm","ManagementTab","activeSubTab","setActiveSubTab","subTabs","renderActiveTab","UnitsTab","LocationsTab","ItemNamesTab","AllocationsTab","BackupRestoreTab","ManagementSettingsTab","ManagementTable","onAdd","onEdit","isAddModalOpen","setIsAddModalOpen","editingItem","setEditingItem","newItemName","setNewItemName","editItemName","setEditItemName","aTime","bTime","handleAdd","handleEdit","openEditModal","onKeyPress","_data$deleted","_data$errors","LocationsTable","editingLocation","setEditingLocation","newLocationData","setNewLocationData","editLocationData","setEditLocationData","getUnitName","sortedLocations","resetAddForm","resetEditForm","confirmMessage","allocations","setAllocations","editingCell","setEditingCell","newAllocation","setNewAllocation","secondaryUnit","vehicleType","standard","isIssued","form624","is624Issued","loadAllocations","filteredAndSortedAllocations","handleCellSave","handleKeyDown","renderCell","isEditing","onKeyDown","setSettings","emailNotificationsEnabled","notificationSettings","setNotificationSettings","enabled","saving","setSaving","successMessage","setSuccessMessage","loadSettings","settingsResult","notificationResult","paddingRight","handleToggleSwitch","alignSelf","handleNotificationToggle","dayName","handleDayChange","_exportResult$statist","_exportResult$statist2","_exportResult$statist3","_exportResult$statist4","busy","setBusy","setSuccess","isConfirmOpen","setIsConfirmOpen","pendingPayload","setPendingPayload","selectedFileName","setSelectedFileName","setOverride","exportResult","setExportResult","importResult","setImportResult","openConfirmImport","resp","objectUrl","accept","_e$target$files","files","statistics","totalRecords","totalTables","tableStats","_startResp$data","startResp","importId","lastProgress","_statusData$progress","_statusData$done","statusResp","statusData","progressText","pollError","_e$message","_userProfile$emailSub3","propUserProfile","hookUserProfile","editingField","setEditingField","isUpdating","setIsUpdating","updateMessage","setUpdateMessage","handleCancelEdit","handleSaveField","validateField","numberValue","phoneRegex","cleanPhone","renderEditableField","handleStartEdit","_userProfile$emailSub2","originalValue","_userProfile$emailSub","handleToggleEmailSubscription","LandingNavigation","onGetStartedClick","isScrolled","setIsScrolled","handleScroll","scrollToSection","sectionId","scrollIntoView","HeroSection","FeaturesSection","ContactSection","contactForm","setContactForm","Footer","LandingPage","onAuthSuccess","onAuthError","onSignInClick","isAuthLoading","isSubmittingForm","setIsSubmittingForm","resolverInternal","signInWithPopup","onComplete","userEmail","userDisplayName","userPhoneNumber","focusedField","setFocusedField","completedFields","setCompletedFields","newSet","filledFields","handleFocus","handleBlur","getFieldIcon","shouldShowError","App","setAuthError","receiptsTabRef","authLoading","profileLoading","profileError","handleInputFocus","handleAuthSuccess","handleAuthError","handleLogout","handleProfileComplete","GoogleAuth","UserProfileSetup","Layout","TopHeader","handlePendingReceiptsClick","_receiptsTabRef$curre","Navigation","DailyReport","UsersTab","ItemsTab","SettingsTab"],"sourceRoot":""}